/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "D:\\phpStudy\\WWW\\TP0011\\xstarp\\xstarp\\docs\\dist";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/1/19.\r\n * package all the components.\r\n * @output prod entry.\r\n */\r\n\r\n__webpack_require__(1);\r\n__webpack_require__(3);\r\n__webpack_require__(5);\r\n__webpack_require__(7);\r\n__webpack_require__(9);\r\n__webpack_require__(10);\r\n__webpack_require__(10);\r\n__webpack_require__(11);\r\n__webpack_require__(14);\r\n__webpack_require__(15);\r\n__webpack_require__(16);\r\n__webpack_require__(17);\r\n__webpack_require__(18);\r\n\r\n__webpack_require__(14);\r\n__webpack_require__(24);\r\n__webpack_require__(21);\r\n\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMveHN0YXJwLmpzPzk1NDIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EiLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGZpenogb24gMjAxNy8xLzE5LlxyXG4gKiBwYWNrYWdlIGFsbCB0aGUgY29tcG9uZW50cy5cclxuICogQG91dHB1dCBwcm9kIGVudHJ5LlxyXG4gKi9cclxuXHJcbnJlcXVpcmUoJy4vY29tbW9uL3N0eWxlcy9pbmRleC5zY3NzJyk7XHJcbnJlcXVpcmUoJy4vY29tcG9uZW50cy90aXAvdGlwLmpzJyk7XHJcbnJlcXVpcmUoJy4vY29tcG9uZW50cy90YWIvdGFiLmpzJyk7XHJcbnJlcXVpcmUoJy4vY29tcG9uZW50cy9uYXYvbmF2LmpzJyk7XHJcbnJlcXVpcmUoJy4vY29tcG9uZW50cy90cmVlL3RyZWUuanMnKTtcclxucmVxdWlyZSgnLi9jb21wb25lbnRzL2dldHRpbWUvZ2V0dGltZS5qcycpO1xyXG5yZXF1aXJlKCcuL2NvbXBvbmVudHMvZ2V0dGltZS9nZXR0aW1lLmpzJyk7XHJcbnJlcXVpcmUoJy4vY29tcG9uZW50cy9pbWdWaWV3L2ltZ1ZpZXcuanMnKTtcclxucmVxdWlyZSgnLi9jb21wb25lbnRzL3Byb2dyZXNzL3Byb2dyZXNzLmpzJyk7XHJcbnJlcXVpcmUoJy4vY29tcG9uZW50cy92YWxpZGF0ZS9qcXVlcnkudmFsaWRhdGUuanMnKTtcclxucmVxdWlyZSgnLi9jb21wb25lbnRzL3ZhbGlkYXRlL3ZhbGlkYXRlLmpzJyk7XHJcbnJlcXVpcmUoJy4vY29tcG9uZW50cy9wbGFjZWhvbGRlci9qcXVlcnkucGxhY2Vob2xkZXIuanMnKTtcclxucmVxdWlyZSgnLi9jb21wb25lbnRzL2RhdGVwaWNrZXIvanF1ZXJ5LmRhdGVyYW5nZXBpY2tlcicpO1xyXG5cclxucmVxdWlyZSgnLi9jb21wb25lbnRzL3Byb2dyZXNzL3Byb2dyZXNzLmpzJyk7XHJcbnJlcXVpcmUoJy4vY29tcG9uZW50cy9tYXAvaW5kZXguanMnKTtcclxucmVxdWlyZSgnLi9jb21wb25lbnRzL3VwbG9hZC9pbmRleC5qcycpO1xyXG5cclxuXHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3hzdGFycC5qc1xuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 1 */
/***/ function(module, exports) {

	eval("// removed by extract-text-webpack-plugin//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3N0eWxlcy9pbmRleC5zY3NzP2I5NWEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiMS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tbW9uL3N0eWxlcy9pbmRleC5zY3NzXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 2 */,
/* 3 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by Administrator on 2017/2/17.\r\n */\r\n\r\n\r\n__webpack_require__(4);\r\n\r\n$.fn.extend({\r\n    hoverTips : function (){\r\n        var self = $(this);\r\n\r\n        var content = self.find('.x-tip-container').attr(\"data-tips\");\r\n        var htmlDom = $(\"<div class='x-tip-dialog'>\")\r\n            .html(\"<p class='x-tip-content'></p>\"\r\n                + \"<p class='x-tip-cor'></p>\");\r\n        htmlDom.find(\".x-tip-content\").html( content );\r\n\r\n        self.on(\"mouseenter\",function(){\r\n            self.append( htmlDom );\r\n            // var left = self.offset().left;\r\n            var top = htmlDom.outerHeight() + parseInt(htmlDom.find(\".x-tip-cor\").css(\"border-width\"));\r\n            htmlDom.css({\"left\":0,\"top\":-top,\"display\":\"block\"});\r\n            htmlDom.stop().animate({ \"top\" : -top ,\"opacity\" : 1},300);\r\n        });\r\n\r\n        self.on(\"mouseleave\",function(){\r\n             iTime = setTimeout(function(){\r\n                htmlDom.remove();\r\n            },2000);\r\n        });\r\n\r\n        $('body').on(\"mouseenter\",'.x-tip-dialog',function(){\r\n            clearTimeout(iTime);\r\n        });\r\n\r\n    }\r\n});\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy90aXAvdGlwLmpzPzVhZDIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixzQ0FBc0M7QUFDL0Qsb0NBQW9DLDZCQUE2QjtBQUNqRSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTOztBQUVUO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0EsQ0FBQyIsImZpbGUiOiIzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQWRtaW5pc3RyYXRvciBvbiAyMDE3LzIvMTcuXHJcbiAqL1xyXG5cclxuXHJcbnJlcXVpcmUoJy4vdGlwLnNjc3MnKTtcclxuXHJcbiQuZm4uZXh0ZW5kKHtcclxuICAgIGhvdmVyVGlwcyA6IGZ1bmN0aW9uICgpe1xyXG4gICAgICAgIHZhciBzZWxmID0gJCh0aGlzKTtcclxuXHJcbiAgICAgICAgdmFyIGNvbnRlbnQgPSBzZWxmLmZpbmQoJy54LXRpcC1jb250YWluZXInKS5hdHRyKFwiZGF0YS10aXBzXCIpO1xyXG4gICAgICAgIHZhciBodG1sRG9tID0gJChcIjxkaXYgY2xhc3M9J3gtdGlwLWRpYWxvZyc+XCIpXHJcbiAgICAgICAgICAgIC5odG1sKFwiPHAgY2xhc3M9J3gtdGlwLWNvbnRlbnQnPjwvcD5cIlxyXG4gICAgICAgICAgICAgICAgKyBcIjxwIGNsYXNzPSd4LXRpcC1jb3InPjwvcD5cIik7XHJcbiAgICAgICAgaHRtbERvbS5maW5kKFwiLngtdGlwLWNvbnRlbnRcIikuaHRtbCggY29udGVudCApO1xyXG5cclxuICAgICAgICBzZWxmLm9uKFwibW91c2VlbnRlclwiLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHNlbGYuYXBwZW5kKCBodG1sRG9tICk7XHJcbiAgICAgICAgICAgIC8vIHZhciBsZWZ0ID0gc2VsZi5vZmZzZXQoKS5sZWZ0O1xyXG4gICAgICAgICAgICB2YXIgdG9wID0gaHRtbERvbS5vdXRlckhlaWdodCgpICsgcGFyc2VJbnQoaHRtbERvbS5maW5kKFwiLngtdGlwLWNvclwiKS5jc3MoXCJib3JkZXItd2lkdGhcIikpO1xyXG4gICAgICAgICAgICBodG1sRG9tLmNzcyh7XCJsZWZ0XCI6MCxcInRvcFwiOi10b3AsXCJkaXNwbGF5XCI6XCJibG9ja1wifSk7XHJcbiAgICAgICAgICAgIGh0bWxEb20uc3RvcCgpLmFuaW1hdGUoeyBcInRvcFwiIDogLXRvcCAsXCJvcGFjaXR5XCIgOiAxfSwzMDApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBzZWxmLm9uKFwibW91c2VsZWF2ZVwiLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICBpVGltZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGh0bWxEb20ucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH0sMjAwMCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoJ2JvZHknKS5vbihcIm1vdXNlZW50ZXJcIiwnLngtdGlwLWRpYWxvZycsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGlUaW1lKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcbn0pO1xyXG5cclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy90aXAvdGlwLmpzXG4vLyBtb2R1bGUgaWQgPSAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 4 */
/***/ function(module, exports) {

	eval("// removed by extract-text-webpack-plugin//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy90aXAvdGlwLnNjc3M/NDEzZiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiI0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzL3RpcC90aXAuc2Nzc1xuLy8gbW9kdWxlIGlkID0gNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 5 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by Administrator on 2017/2/17.\r\n */\r\n\r\n__webpack_require__(6);\r\n\r\n$('.x-tab-nav li').click(function(){\r\n    var i = $(this).index();\r\n    $(this).addClass('x-active').siblings().removeClass('x-active');\r\n    $('.x-tab-content').eq(i).addClass('x-active').siblings().removeClass('x-active');\r\n});\r\n\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy90YWIvdGFiLmpzP2Q4Y2MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyIsImZpbGUiOiI1LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQWRtaW5pc3RyYXRvciBvbiAyMDE3LzIvMTcuXHJcbiAqL1xyXG5cclxucmVxdWlyZSgnLi90YWIuc2NzcycpO1xyXG5cclxuJCgnLngtdGFiLW5hdiBsaScpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgaSA9ICQodGhpcykuaW5kZXgoKTtcclxuICAgICQodGhpcykuYWRkQ2xhc3MoJ3gtYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygneC1hY3RpdmUnKTtcclxuICAgICQoJy54LXRhYi1jb250ZW50JykuZXEoaSkuYWRkQ2xhc3MoJ3gtYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygneC1hY3RpdmUnKTtcclxufSk7XHJcblxyXG5cclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy90YWIvdGFiLmpzXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 6 */
/***/ function(module, exports) {

	eval("// removed by extract-text-webpack-plugin//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy90YWIvdGFiLnNjc3M/YzJiZCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiI2LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzL3RhYi90YWIuc2Nzc1xuLy8gbW9kdWxlIGlkID0gNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 7 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by Administrator on 2017/2/17.\r\n */\r\n\r\n__webpack_require__(8);\r\n\r\n//导航-侧边栏\r\n$(\".x-nav-head\").click(function() {\r\n    $(this).next('ul').slideToggle(300).parent().siblings('li').find('ul').slideUp();\r\n    $(this).toggleClass('x-cur').parent().siblings('li').find('a.x-nav-head').removeClass('x-cur');\r\n\r\n    if($(this).hasClass('x-cur')){\r\n        $(this).find('i').removeClass('icon-xiangxia1').addClass('icon-xiangshang2');\r\n        $(this).parent().siblings('li').find('i').addClass('icon-xiangxia1').removeClass('icon-xiangshang2');\r\n    }else{\r\n        $(this).find('i').addClass('icon-xiangxia1').removeClass('icon-xiangshang2');\r\n    }\r\n});\r\n\r\n//导航-水平\r\n$('.x-nav-item').click(function(){\r\n    $(this).addClass('x-active').siblings('li').removeClass('x-active');\r\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9uYXYvbmF2LmpzP2Q1MzciXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQSxDQUFDIiwiZmlsZSI6IjcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBBZG1pbmlzdHJhdG9yIG9uIDIwMTcvMi8xNy5cclxuICovXHJcblxyXG5yZXF1aXJlKCcuL25hdi5zY3NzJyk7XHJcblxyXG4vL+WvvOiIqi3kvqfovrnmoI9cclxuJChcIi54LW5hdi1oZWFkXCIpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgJCh0aGlzKS5uZXh0KCd1bCcpLnNsaWRlVG9nZ2xlKDMwMCkucGFyZW50KCkuc2libGluZ3MoJ2xpJykuZmluZCgndWwnKS5zbGlkZVVwKCk7XHJcbiAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCd4LWN1cicpLnBhcmVudCgpLnNpYmxpbmdzKCdsaScpLmZpbmQoJ2EueC1uYXYtaGVhZCcpLnJlbW92ZUNsYXNzKCd4LWN1cicpO1xyXG5cclxuICAgIGlmKCQodGhpcykuaGFzQ2xhc3MoJ3gtY3VyJykpe1xyXG4gICAgICAgICQodGhpcykuZmluZCgnaScpLnJlbW92ZUNsYXNzKCdpY29uLXhpYW5neGlhMScpLmFkZENsYXNzKCdpY29uLXhpYW5nc2hhbmcyJyk7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5zaWJsaW5ncygnbGknKS5maW5kKCdpJykuYWRkQ2xhc3MoJ2ljb24teGlhbmd4aWExJykucmVtb3ZlQ2xhc3MoJ2ljb24teGlhbmdzaGFuZzInKTtcclxuICAgIH1lbHNle1xyXG4gICAgICAgICQodGhpcykuZmluZCgnaScpLmFkZENsYXNzKCdpY29uLXhpYW5neGlhMScpLnJlbW92ZUNsYXNzKCdpY29uLXhpYW5nc2hhbmcyJyk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuLy/lr7zoiKot5rC05bmzXHJcbiQoJy54LW5hdi1pdGVtJykuY2xpY2soZnVuY3Rpb24oKXtcclxuICAgICQodGhpcykuYWRkQ2xhc3MoJ3gtYWN0aXZlJykuc2libGluZ3MoJ2xpJykucmVtb3ZlQ2xhc3MoJ3gtYWN0aXZlJyk7XHJcbn0pO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbmF2L25hdi5qc1xuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 8 */
/***/ function(module, exports) {

	eval("// removed by extract-text-webpack-plugin//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9uYXYvbmF2LnNjc3M/ZmFhZCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiI4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzL25hdi9uYXYuc2Nzc1xuLy8gbW9kdWxlIGlkID0gOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 9 */
/***/ function(module, exports) {

	eval("/**\r\n * 命名大意：\r\n * dom    用户定义承载树的dom\r\n * html   树的html\r\n * item   data的每一条,可以是node也可以是child\r\n * child  树的叶子;子元素;成员\r\n * node   树的节点;文件夹;部门\r\n * layer  树的层级,包含同一层的item(node,child);\r\n * _      带有下划线的是插件需要的方法属性，用户不需要使用\r\n *\r\n *\r\n *\r\n *\r\n * 思路:\r\n * 1.node的id和child的id可以重复,因为实际场景可能是两种数据比如,部门和人员.对于省份和城市可能本身就不会重复\r\n * 2.选择数据,用户需要的结果是:1.所有child.2.node+child\r\n * 3.is_trigger如果是true,是为input框设计的,会去读取input框的宽度作为自身的宽度\r\n * 4.这里html的input显示的时候根据data决定是否check，\r\n * 5.每次的点击input产生的变化是html变了，然后data也变。\r\n * 6.4，5导致容易出错,但我觉得应该是根据操作data数据发生变化，变化完毕，统一一个方法决定html结构的变化，不过效率不一定更高\r\n * 7.only_child为true必然不会node_merge\r\n * 8.代码中还有一些根据标签(div,span)来做的判断,都不太靠谱\r\n *\r\n *\r\n */\r\n\r\n;(function ($) {\r\n\r\n    window.xTree = function (opt) {\r\n        return new tree(opt);\r\n    };\r\n\r\n    var defOpt = {\r\n        dom: '',  //jqueryDom\r\n        is_trigger: false,  //是否需要触发? 否则直接显示\r\n        has_search: false,\r\n        only_child: true,//是否结果只要 child\r\n        node_merge: true,//结果只显示最上层  比如   中国被选中  四川,成都则不会显示  否则 每个被勾选的节点都显示\r\n        zIndex: 1,\r\n        choose: false,  //哪些是选中的？优先级高于data  {nodeId:[1,2,3],id:[1,2,3]}\r\n        // node_first:false,//是否需要节点排在前面  否则按照data的顺序\r\n        is_multi: true,//是否多选\r\n        expand: false, //是否展开，false、true、num  //todo expand\r\n        width: null,\r\n        maxHeight: 300,\r\n        data: [],//{id:1,name:'xx',nodeId:'0',is_node:true,is_check:false},\r\n        sel_ids: '',\r\n        onInit: function () {\r\n        },\r\n        onOpen: function () {\r\n        }, //触发时\r\n        onBeforeOpen: function () {\r\n        },\r\n        onClose: function (has_chg) {\r\n            //has_chg  是否发生变化\r\n        },\r\n        onCheck: function (item, dom, childrenItem) {\r\n            //item 点击的item\r\n            //dom 点击的dom\r\n            //childrenItem  所有影响的子节点\r\n        },\r\n        onCancel: function (item, dom, childrenItem) {\r\n        },\r\n        onChange: function (item, dom, childrenItem) {\r\n        }\r\n    };\r\n\r\n\r\n    var tree = function (opt) {\r\n        this._init(opt);\r\n        return this;\r\n        /**\r\n         * return {\r\n         *     'start':this.start,\r\n         *     'end':this.end\r\n         * };  //todo  这样会导致 this 没有 别的方法 到底 还是不能正常使用\r\n         */\r\n\r\n\r\n    };\r\n\r\n\r\n    /**\r\n     *\r\n     * @var opt  用户传进来的option\r\n     * @var dom 打开tree的载体jquery dom\r\n     * @var data  做tree的data\r\n     * @var html tree的html\r\n     */\r\n\r\n\r\n    tree.prototype = {\r\n        _is_open: false,  //是否open\r\n        _originId: {nodeId: [], id: []},   //上次打开时候选中了哪一些id\r\n        _searchTimer: '',   //搜索框的定时器\r\n        _is_first: true,  //是不是第一次打开\r\n        _init: function (opt) {\r\n            var res = checkData(opt.data);\r\n            if (!res) {\r\n                return false;\r\n            }\r\n\r\n            this.opt = $.extend(true, {}, defOpt, opt);\r\n            this.data = _initData(this.opt.data);\r\n            this.rootId = _getRootId(this.data);\r\n            if (this.opt.sel_ids) {\r\n                _selData(this.data, this.opt.sel_ids);\r\n            }\r\n\r\n            this._originId = this.getId();\r\n\r\n            this.dom = this.opt.dom;\r\n            this.dom.css({'position': 'relative'});\r\n            this.html = this._makePanel();\r\n\r\n            this.opt.onInit();\r\n\r\n            var that = this;\r\n\r\n            if (this.opt.is_trigger) {\r\n                this.dom.off('click.xTree');\r\n                this.dom.on('click.xTree', function (e) {\r\n                    $('.xTreePanel').hide();\r\n                    that.start();\r\n                    e.stopPropagation();\r\n                });\r\n                $(document).on('click.xTree', function () {\r\n                    that.end();\r\n                });\r\n            } else {\r\n                this.start();\r\n            }\r\n        },\r\n\r\n        /**\r\n         *      方法\r\n         *\r\n         */\r\n        start: function () {\r\n            this.opt.onBeforeOpen();\r\n            this._showPanel();\r\n            this._showData();\r\n            this._expand();\r\n            this._is_open = true;\r\n\r\n            this.html.find('.x-tree-search').focus();\r\n            this.opt.onOpen();\r\n            return this;\r\n        },\r\n        end: function () {\r\n            if (this._is_open) {\r\n                this.html.hide();\r\n                var ids = this.getId();\r\n\r\n                this._is_open = false;\r\n                this.opt.onClose(JSON.stringify(ids) !== JSON.stringify(this._originId));\r\n                this._originId = ids;\r\n            }\r\n        },\r\n\r\n        getName: function () {\r\n            var text = [];\r\n            var data = this.data;\r\n            if (this.opt.only_child) {\r\n                $.each(data, function (i, n) {\r\n                    if (n.is_check && !n.is_node) {\r\n                        text.push(n.name);\r\n                    }\r\n                });\r\n            } else {\r\n                if (this.opt.node_merge) {\r\n                    var nodes = [];\r\n                    $.each(data, function (i, n) {\r\n                        if (n.is_check && n.is_node) {\r\n                            nodes.push(n.id);\r\n                        }\r\n                    });\r\n\r\n                    var clone = $.extend(true, [], data); //直接赋值传的是引用\r\n                    $.each(clone, function (i, n) {\r\n                        if ((n.is_check && $.inArray(n.nodeId, nodes) != -1) || !n.is_check) {\r\n                            clone[i] = null;\r\n                        }\r\n                    });\r\n\r\n                    $.each(clone, function (i, n) {\r\n                        if (n) {\r\n                            text.push(n.name);\r\n                        }\r\n                    });\r\n                } else {\r\n                    $.each(data, function (i, n) {\r\n                        if (n.is_check) {\r\n                            text.push(n.name);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n\r\n            return text.join();\r\n        },\r\n        getId: function () {\r\n            var id = [];\r\n            var nodeId = [];\r\n            var data = this.data;\r\n\r\n            if (this.opt.only_child) {\r\n                $.each(data, function (i, n) {\r\n                    if (n.is_check && !n.is_node) {\r\n                        id.push(n.id);\r\n                    }\r\n                });\r\n\r\n            } else {\r\n\r\n                if (this.opt.node_merge) {\r\n                    var node = [];\r\n                    $.each(data, function (i, n) {\r\n                        if (n.is_check && n.is_node) {\r\n                            node.push(n.id);\r\n//                            text.push( n.name);  //nodefirst\r\n                        }\r\n                    });\r\n\r\n                    var clone = $.extend(true, [], data);\r\n                    $.each(clone, function (i, n) {\r\n                        if ((n.is_check && $.inArray(n.nodeId, node) != -1) || !n.is_check) {\r\n                            clone[i] = null;\r\n                        }\r\n                    });\r\n\r\n\r\n                    $.each(clone, function (i, n) {\r\n                        if (n) {\r\n                            if (n.is_node) {\r\n                                nodeId.push(n.id);\r\n                            } else {\r\n                                id.push(n.id);\r\n                            }\r\n                        }\r\n                    });\r\n                } else {\r\n                    $.each(data, function (i, n) {\r\n                        if (n.is_check) {\r\n                            if (n.is_node) {\r\n                                nodeId.push(n.id);\r\n                            } else {\r\n                                id.push(n.id);\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n\r\n\r\n                id = {'id': id, 'nodeId': nodeId};\r\n            }\r\n            return id;\r\n        },\r\n        cancelItem: function (id, type) {\r\n            var item = {};\r\n            var dom = this.html.find('input[data-isNode=\"' + parseInt(type) + '\"][data-id=\"' + id + '\"]').prop('checked', false);\r\n            $.each(this.data, function (i, n) {\r\n                if (n.id == id && n.is_node == type) {\r\n                    item = n;\r\n                    item.is_check = false;\r\n                }\r\n            });\r\n\r\n            this._chgItem(item, dom);\r\n\r\n        },\r\n        cancelAll: function () {\r\n            $.each(this.data, function (index, item) {\r\n                item.is_check = false;\r\n            });\r\n            this.html.find('input').prop(\"checked\", false);\r\n            this.opt.onCancel();\r\n        },\r\n        checkItem: function (id, type) {\r\n            var item = {};\r\n            var dom = this.html.find('input[data-isNode=\"' + parseInt(type) + '\"][data-i=\"' + id + '\"]').prop('checked', true);\r\n            $.each(this.data, function (i, n) {\r\n                if (n.id == id && n.is_node == type) {\r\n                    item = n;\r\n                    item.is_check = true;\r\n                }\r\n            });\r\n\r\n            this._chgItem(item, dom);\r\n\r\n        },\r\n        checkAll: function () {\r\n            if (this.opt.is_multi) {\r\n                $.each(this.data, function (index, item) {\r\n                    item.is_check = true;\r\n                });\r\n                this.html.find('input').prop(\"checked\", true);\r\n                this.opt.onCheck();\r\n            }\r\n        },\r\n        getItem: function () {\r\n            var arr = [];\r\n            var data = this.data;\r\n            if (this.opt.only_child) {\r\n                $.each(data, function (i, n) {\r\n                    if (n.is_check && !n.is_node) {\r\n                        arr.push(n);\r\n                    }\r\n                });\r\n            } else {\r\n\r\n                if (this.opt.node_merge) {\r\n                    var node = [];\r\n                    $.each(data, function (i, n) {\r\n                        if (n.is_check && n.is_node) {\r\n                            node.push(n.id);\r\n//                            text.push( n.name);  //nodefirst\r\n                        }\r\n                    });\r\n\r\n                    var clone = $.extend(true, [], data);\r\n                    $.each(clone, function (i, n) {\r\n                        if ((n.is_check && $.inArray(n.nodeId, node) != -1) || !n.is_check) {\r\n                            clone[i] = null;\r\n                        }\r\n                    });\r\n\r\n\r\n                    $.each(clone, function (i, n) {\r\n                        if (n) {\r\n                            arr.push(n);\r\n                        }\r\n                    });\r\n                } else {\r\n                    $.each(data, function (i, n) {\r\n                        if (n.is_check) {\r\n                            arr.push(n);\r\n                        }\r\n                    });\r\n                }\r\n\r\n\r\n            }\r\n            return arr;\r\n        },\r\n        search: function (val) {\r\n            this._removeLayer(this.rootId);\r\n\r\n            if (val === '') {\r\n                this.html.find('div[node-id=\"' + this.rootId + '\"]').remove();\r\n                this._showLayer(this.rootId);\r\n            } else {\r\n                for (var i in this.data) {\r\n                    if (!this.data[i].is_node && this.data[i].name.indexOf(val) != -1) {\r\n                        this.html.find('div[node-id=\"' + this.rootId + '\"]').append(this._makeItem(this.data[i]));\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n\r\n        /**\r\n         *      数据方法\r\n         */\r\n        _getLayerData: function (parent) {\r\n            var res = [];\r\n            for (var i in this.data) {\r\n                if (this.data[i].nodeId == parent) {\r\n//                if(data[i].is_node){\r\n//                    res.unshift(data[i])\r\n//                }else{\r\n//                    res.push(data[i]);\r\n//                }\r\n\r\n                    res.push(this.data[i]);  //原序\r\n                }\r\n            }\r\n            return res;\r\n        },\r\n\r\n        _chgItem: function (item, dom) {\r\n\r\n            if (this.opt.is_multi) {\r\n                if (item.is_node) {\r\n                    dom.parent().parent().find('label > input').prop('checked', item.is_check);\r\n                    this._chgAllChildren(item.id, item.is_check);\r\n                }\r\n\r\n                if (!item.is_check) {\r\n                    this._cancelParentNode(item.nodeId);\r\n                } else {\r\n                    this._checkParentNode(item.nodeId);\r\n                }\r\n            } else {\r\n//                    this.html.find('input').prop(\"checked\",false);\r\n//                    $(this).prop('checked',true);\r\n            }\r\n\r\n\r\n            var childItem = [];\r\n            this._getChild(item, childItem);\r\n\r\n\r\n            if (!item.is_check) {\r\n                this.opt.onCancel(item, dom, childItem);\r\n            } else {\r\n                this.opt.onCheck(item, dom, childItem);\r\n            }\r\n            this.opt.onChange();\r\n\r\n\r\n        },\r\n        _getChild: function (node, cont) {\r\n            if (node.is_node && node.has_children) {\r\n                var that = this;\r\n                $.each(that.data, function (i, n) {\r\n                    if (n.nodeId == node.id) {\r\n                        cont.push(n);\r\n                        if (n.is_node && node.has_children) {\r\n                            that._getChild(n, cont);\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n\r\n        },\r\n        _cancelParentNode: function (id) {\r\n            var obj = this;\r\n            $.each(obj.data, function (i, n) {\r\n                if (n.id == id && n.is_node && n.is_check) {\r\n                    n.is_check = false;\r\n                    obj.html.find('input[data-isNode=\"1\"][data-id=\"' + id + '\"]').prop('checked', false);\r\n                    obj._cancelParentNode(n.nodeId);\r\n                }\r\n            })\r\n        },\r\n        _checkParentNode: function (id) {\r\n            var obj = this;\r\n            var allChildrenChecked = true;\r\n            $.each(obj.data, function (i, n) {\r\n                if (n.nodeId == id && !n.is_check) {\r\n                    allChildrenChecked = false;\r\n                }\r\n            });\r\n            $.each(obj.data, function (i, n) {\r\n                if (n.id == id && n.is_node && !n.is_check && allChildrenChecked) {\r\n                    n.is_check = true;\r\n                    obj.html.find('input[data-isNode=\"1\"][data-id=\"' + id + '\"]').prop('checked', true);\r\n                    obj._checkParentNode(n.nodeId);\r\n                }\r\n            });\r\n        },\r\n        _chgAllChildren: function (nodeid, bol) {\r\n            var obj = this;\r\n            $.each($.extend(true, [], this.data), function (i, n) {   //这句话 看起来 好像 不用 extend\r\n                if (n.nodeId == nodeid) {\r\n                    obj.data[i].is_check = bol;\r\n                    if (n.is_node && n.has_children) {\r\n                        obj._chgAllChildren(n.id, bol);\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n\r\n        /**\r\n         * 构造html内部方法\r\n         */\r\n        _makePanel: function () {\r\n            var html = '<div></div>';\r\n\r\n            if (this.opt.has_search) {\r\n                html = this._makeSearch(html);\r\n            }\r\n\r\n            var css;\r\n            if (this.opt.is_trigger) {\r\n                css = {\r\n                    'font-family': 'Microsoft YaHei',\r\n                    'z-index': this.opt.zIndex,\r\n                    border: '1px solid #5d5d5d',\r\n                    'background': '#fff',\r\n                    position: 'absolute',\r\n                    maxHeight: this.opt.maxHeight,\r\n                    padding: '0 1%',\r\n                    'white-space': 'nowrap',\r\n                    'overflow': 'auto'\r\n                };\r\n            } else {\r\n                css = {\r\n                    'font-family': 'Microsoft YaHei',\r\n                    'background': '#fff',\r\n                    maxHeight: this.opt.maxHeight,\r\n                    padding: '0 1%',\r\n                    'white-space': 'nowrap',\r\n                    'overflow': 'auto'\r\n                };\r\n            }\r\n\r\n\r\n            return $(html).css(css);\r\n        },\r\n        _makeSearch: function (html) {\r\n            var search = '<input class=\"x-tree-search\" type=\"text\" placeholder=\"搜索\"/></div>';\r\n            search = $(search).css({\r\n                'border': 'none',\r\n                'padding': '4px 0',\r\n                'margin': '5px auto 0 auto',\r\n                'width': '98%',\r\n                'display': 'block'\r\n            });\r\n\r\n            var obj = this;\r\n            $(search).on('keyup paste', function () {\r\n                var dom = this;\r\n                clearTimeout(obj._searchTimer);\r\n                obj._searchTimer = setTimeout(function () {\r\n                    obj.search(dom.value);\r\n                }, 100);\r\n            });\r\n\r\n            return $(html).append(search);\r\n\r\n        },\r\n        _makeNode: function (item) {\r\n            var $html;\r\n            if (this.opt.is_multi) {\r\n                $html = $('<div node-id=\"' + item.id + '\">' + makeExpand() + '<label><input type=\"checkbox\" data-isNode=\"1\" data-id=\"' + item.id + '\" ' + (item.is_check ? 'checked' : '') + ' data-name=\"' + item.name + '\"/><span>' + item.name + '</span></label></div>');\r\n            }\r\n            else {\r\n                if (this.opt.only_child) {\r\n                    $html = $('<div node-id=\"' + item.id + '\">' + makeExpand() + '<span>' + item.name + '</span></div>');\r\n                }\r\n                else {\r\n                    $html = $('<div node-id=\"' + item.id + '\">' + makeExpand() + '<label><input type=\"radio\" name=\"' + this.dom.selector + '\" data-isNode=\"1\" data-id=\"' + item.id + '\" ' + (item.is_check ? 'checked' : '') + ' data-name=\"' + item.name + '\"/><span>' + item.name + '</span></label></div>');\r\n                }\r\n            }\r\n            $html.find('span').css({\r\n                'cursor': 'pointer',\r\n                'user-select': 'none',\r\n                '-webkit-user-select': 'none',\r\n                '-moz-user-select': 'none',\r\n                '-ms-user-select': 'none'\r\n            });\r\n            $html.find('input').css({\r\n                'vertical-align': 'middle'\r\n            });\r\n            var obj = this;\r\n            $html.find('i').on('click', function (e) {\r\n                if ($(this).hasClass('icon-jia1')) {\r\n                    obj._showLayer(item.id);\r\n                } else {\r\n                    obj._removeLayer(item.id);\r\n                }\r\n            });\r\n            return $html;\r\n        },\r\n        _makeChild: function (item) {\r\n            var $html;\r\n            if (this.opt.is_multi) {\r\n                $html = $('<div><span></span><label><input type=\"checkbox\" data-id=\"' + item.id + '\" data-isNode=\"0\" data-name=\"' + item.name + '\" ' + (item.is_check ? 'checked' : '') + '/>' + item.name + '</label></div>');\r\n            }\r\n            else {\r\n                $html = $('<div>' + (this.opt.only_child ? '' : '<span></span>') + '<label><input type=\"radio\" name=\"' + this.dom.selector + '\" data-id=\"' + item.id + '\" data-isNode=\"0\" data-name=\"' + item.name + '\" />' + item.name + '</label></div>');\r\n            }\r\n            $html.find('span').css({\r\n                'width': '16px',\r\n                'user-select': 'none',\r\n                '-webkit-user-select': 'none',\r\n                '-moz-user-select': 'none',\r\n                '-ms-user-select': 'none',\r\n                'display': 'inline-block'\r\n            });\r\n            $html.find('input').css({\r\n                'vertical-align': 'middle'\r\n            });\r\n            return $html;\r\n        },\r\n        _makeItem: function (item) {\r\n            var $html;\r\n            if (item.is_node && item.has_children) {\r\n                $html = this._makeNode(item);\r\n            } else {\r\n                $html = this._makeChild(item);\r\n            }\r\n\r\n            var obj = this;\r\n            $html.find('input').on('click', function () {\r\n                if (obj.opt.is_multi) {\r\n                    item.is_check = !item.is_check;\r\n                } else {\r\n                    $.each(obj.data, function (index, item) {\r\n                        item.is_check = false;\r\n                    });\r\n                    item.is_check = true;\r\n                }\r\n\r\n\r\n                obj._chgItem(item, $(this));\r\n\r\n            });\r\n\r\n            return $html;\r\n        },\r\n        /**\r\n         *      视图方法\r\n         */\r\n\r\n        _showPanel: function () {\r\n            if (this.opt.is_trigger) {\r\n                this.html.css({\r\n                    top: this.dom.outerHeight(),\r\n                    left: 0,\r\n                    minWidth: this.opt.width ? this.opt.width : this.dom.outerWidth() * 0.98\r\n                });\r\n\r\n                this.html.addClass('xTreePanel');\r\n\r\n                this.html.on('click', function (e) {\r\n                    e.stopPropagation();\r\n                });\r\n            }\r\n            this.dom.append(this.html);\r\n\r\n        },\r\n        _showData: function () {\r\n            if (this._is_first) {\r\n                this._showLayer(this.rootId);\r\n                this._is_first = false;\r\n            } else {\r\n                this.html.show();\r\n            }\r\n        },\r\n        _expand: function () {\r\n            var obj = this;\r\n            if (obj.opt.expand === true) {\r\n                $.each(obj.data, function (index, item) {\r\n                    if (item.is_node && item.has_children) {\r\n                        obj.html.find('i').filter('.icon-jia1').click();\r\n                    }\r\n                });\r\n            } else if (obj.opt.expand) {\r\n                var expandId = [];\r\n                expandId.push(obj.rootId);\r\n                for (var i = 0; i < obj.opt.expand; i++) {\r\n                    expandId = obj._expandLevel(expandId);\r\n                }\r\n            }\r\n        },\r\n        _expandLevel: function (id) {\r\n            var obj = this;\r\n            var expandId = [];\r\n            $.each(id, function (index, item) {\r\n                $.each(obj.data, function (index2, item2) {\r\n                    if (item2.nodeId === item) {\r\n                        expandId.push(item2.id);\r\n                        obj.html.find('div[node-id=\"' + item2.nodeId + '\"] > i').filter('.icon-jia1').click();\r\n                    }\r\n                });\r\n            });\r\n            return expandId;\r\n        },\r\n        _showLayer: function (layerId) {\r\n            var showData = this._getLayerData(layerId);\r\n            var itemDiv = makeLayer();\r\n\r\n\r\n            //这里 0节点的结构 和 子节点的结构 没有处理好    以后尽量让node-id 和  itemdiv 分开\r\n            if (layerId === this.rootId) {\r\n                itemDiv = $(itemDiv).attr('node-id', this.rootId);\r\n                this.html.append(itemDiv);\r\n                //itemDiv.parent().attr('node-id',0);\r\n\r\n            } else {\r\n                toShrink(this.html.find('div[node-id=\"' + layerId + '\"] i'));\r\n                this.html.find('div[node-id=\"' + layerId + '\"]').append(itemDiv);\r\n            }\r\n\r\n            for (var i in showData) {\r\n                itemDiv.append(this._makeItem(showData[i]));\r\n            }\r\n        },\r\n        _removeLayer: function (layerId) {\r\n            this.html.find('div[node-id=\"' + layerId + '\"]>div').remove();\r\n            toExpand(this.html.find('div[node-id=\"' + layerId + '\"] i'));\r\n        },\r\n\r\n\r\n    };\r\n\r\n\r\n    function makeLayer() {\r\n        var html = '<div></div>';\r\n\r\n        return $(html).css({\r\n            'margin-left': '13px'\r\n        });\r\n    }\r\n\r\n    function makeExpand() {\r\n        // var html='<span data-icon=\"expand\">＋</span>';\r\n        var html = '<i class=\"iconfont icon-jia1\"></i>';\r\n\r\n        return $(html).css({\r\n            'font-size': '12px',\r\n            'vertical-align': 'base-line',\r\n            'padding-right': '0px',\r\n            'cursor': 'pointer'\r\n        })[0].outerHTML;\r\n    }\r\n\r\n    function toShrink(dom) {\r\n        dom.removeClass('icon-jia1');\r\n        dom.addClass('icon-jian1');\r\n    }\r\n\r\n    function toExpand(dom) {\r\n        dom.removeClass('icon-jian1');\r\n        dom.addClass('icon-jia1');\r\n    }\r\n\r\n\r\n    function checkData(data) {\r\n        for (var i in data) {\r\n            return typeof data[i] == 'object';\r\n        }\r\n        return false;\r\n    }\r\n\r\n    function _initData(data) {\r\n        var clone = $.extend(true, [], data);\r\n        var len = clone.length;\r\n\r\n        for (var k = 0; k < len; k++) {\r\n            clone[k].has_children = false;\r\n        }\r\n\r\n        for (var i = 0; i < len; i++) {\r\n            for (var j = i; j < len; j++) {\r\n                if (clone[i].is_node && clone[i].id === clone[j].nodeId) {\r\n                    clone[i].has_children = true;\r\n                }\r\n                if (clone[i].nodeId === clone[j].id && clone[j].is_node) {\r\n                    clone[j].has_children = true;\r\n                }\r\n            }\r\n        }\r\n\r\n        return clone;\r\n    }\r\n\r\n    function _selData(data, selected) {\r\n        var sel_ids = selected.split(',');\r\n        for (var i = 0; i < sel_ids.length; i++) {\r\n            for (var j = 0; j < data.length; j++) {\r\n                if (data[j].id === parseInt(sel_ids[i])) {\r\n                    data[j].is_check = true;\r\n                    _selParent(data, data[j].nodeId);\r\n                    if (data[j].is_node && data[i].has_children) {\r\n                        _selChildren(data, data[j].id);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return data;\r\n    }\r\n\r\n    function _selParent(data, nid) {\r\n        if (!nid) {\r\n            return false;\r\n        }\r\n        var selParent = true;\r\n        var sel_p = {};\r\n        for (var i = 0; i < data.length; i++) {\r\n            if (data[i].id == nid) {\r\n                sel_p = data[i];\r\n            }\r\n            if (data[i].nodeId == nid && !data[i].is_check) {\r\n                selParent = false;\r\n                return false;\r\n            }\r\n\r\n        }\r\n\r\n        if (selParent) {\r\n            sel_p.is_check = true;\r\n            if (sel_p.nodeId) {\r\n                _selParent(data, sel_p.nodeId);\r\n            }\r\n        }\r\n    }\r\n\r\n    function _selChildren(data, id) {\r\n        if (!id) {\r\n            return false;\r\n        }\r\n        for (var i = 0; i < data.length; i++) {\r\n            if (data[i].nodeId === id) {\r\n                data[i].is_check = true;\r\n                if (data[i].is_node && data[i].has_children) {\r\n                    _selChildren(data, data[i].id);\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    function _getRootId(_data) {\r\n        var rootId = [];\r\n        var clone = $.extend(true, [], _data);\r\n        for (var i = 0, len = _data.length; i < len; i++) {\r\n            for (var j = i; j < len; j++) {\r\n                if (_data[i].id === _data[j].nodeId) {\r\n                    clone[j] = null;\r\n                }\r\n                if (_data[i].nodeId === _data[j].id) {\r\n                    clone[i] = null;\r\n                }\r\n            }\r\n        }\r\n        $.each(clone, function (i, t) {\r\n            if (t) {\r\n                rootId.push(t.nodeId);\r\n            }\r\n        });\r\n\r\n        // //去除数组重复值\r\n        // function unique(array){\r\n        //     var n = [];\r\n        //     for(var i = 0; i < array.length; i++){\r\n        //         if (n.indexOf(array[i]) == -1) n.push(array[i]);\r\n        //     }\r\n        //     return n;\r\n        // }\r\n        //\r\n        // function unique(array){\r\n        //     var r = [];\r\n        //     for(var i = 0, l = array.length; i < l; i++) {\r\n        //         for(var j = i + 1; j < l; j++){\r\n        //             if (array[i] === array[j]) {\r\n        //                 j = ++i;\r\n        //             }\r\n        //         }\r\n        //         r.push(array[i]);\r\n        //     }\r\n        //     return r;\r\n        // }\r\n        // rootId = unique(rootId);\r\n\r\n        return rootId[0];\r\n    }\r\n\r\n\r\n})(jQuery);\r\n\r\n\r\n\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy90cmVlL3RyZWUuanM/MmJjMyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxJQUFJO0FBQ25CLGVBQWUsSUFBSTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixzREFBc0Q7QUFDMUU7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7OztBQUdBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBLG9CQUFvQixtQkFBbUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsd0NBQXdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSwwQkFBMEIsdUJBQXVCO0FBQ2pEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjs7QUFFckIseURBQXlEO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCOztBQUVyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTs7QUFFQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQixhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQ7QUFDakQ7QUFDQSxxQkFBcUI7O0FBRXJCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7OztBQUdyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjs7O0FBR0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7O0FBRUEsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViOztBQUVBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQ7QUFDakQ7QUFDQSxxQkFBcUI7O0FBRXJCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7OztBQUdyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7OztBQUdBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7O0FBR1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7O0FBRUEsMkNBQTJDO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTs7O0FBR0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCOztBQUVBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxtRUFBbUU7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7OztBQUdUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7O0FBRWI7O0FBRUEsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTs7O0FBR0E7O0FBRUEsYUFBYTs7QUFFYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7O0FBRUEsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQSwrQkFBK0Isb0JBQW9CO0FBQ25EO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTOzs7QUFHVDs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLHVCQUF1QixTQUFTO0FBQ2hDO0FBQ0E7O0FBRUEsdUJBQXVCLFNBQVM7QUFDaEMsMkJBQTJCLFNBQVM7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx1QkFBdUIsb0JBQW9CO0FBQzNDLDJCQUEyQixpQkFBaUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsaUJBQWlCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGlCQUFpQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsU0FBUztBQUNwRCwyQkFBMkIsU0FBUztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixrQkFBa0I7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsT0FBTztBQUN0RCxxQ0FBcUMsT0FBTztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0EsQ0FBQyIsImZpbGUiOiI5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIOWRveWQjeWkp+aEj++8mlxyXG4gKiBkb20gICAg55So5oi35a6a5LmJ5om/6L295qCR55qEZG9tXHJcbiAqIGh0bWwgICDmoJHnmoRodG1sXHJcbiAqIGl0ZW0gICBkYXRh55qE5q+P5LiA5p2hLOWPr+S7peaYr25vZGXkuZ/lj6/ku6XmmK9jaGlsZFxyXG4gKiBjaGlsZCAg5qCR55qE5Y+25a2QO+WtkOWFg+e0oDvmiJDlkZhcclxuICogbm9kZSAgIOagkeeahOiKgueCuTvmlofku7blpLk76YOo6ZeoXHJcbiAqIGxheWVyICDmoJHnmoTlsYLnuqcs5YyF5ZCr5ZCM5LiA5bGC55qEaXRlbShub2RlLGNoaWxkKTtcclxuICogXyAgICAgIOW4puacieS4i+WIkue6v+eahOaYr+aPkuS7tumcgOimgeeahOaWueazleWxnuaAp++8jOeUqOaIt+S4jemcgOimgeS9v+eUqFxyXG4gKlxyXG4gKlxyXG4gKlxyXG4gKlxyXG4gKiDmgJ3ot686XHJcbiAqIDEubm9kZeeahGlk5ZKMY2hpbGTnmoRpZOWPr+S7pemHjeWkjSzlm6DkuLrlrp7pmYXlnLrmma/lj6/og73mmK/kuKTnp43mlbDmja7mr5TlpoIs6YOo6Zeo5ZKM5Lq65ZGYLuWvueS6juecgeS7veWSjOWfjuW4guWPr+iDveacrOi6q+WwseS4jeS8mumHjeWkjVxyXG4gKiAyLumAieaLqeaVsOaNriznlKjmiLfpnIDopoHnmoTnu5PmnpzmmK86MS7miYDmnIljaGlsZC4yLm5vZGUrY2hpbGRcclxuICogMy5pc190cmlnZ2Vy5aaC5p6c5pivdHJ1ZSzmmK/kuLppbnB1dOahhuiuvuiuoeeahCzkvJrljrvor7vlj5ZpbnB1dOahhueahOWuveW6puS9nOS4uuiHqui6q+eahOWuveW6plxyXG4gKiA0Lui/memHjGh0bWznmoRpbnB1dOaYvuekuueahOaXtuWAmeagueaNrmRhdGHlhrPlrprmmK/lkKZjaGVja++8jFxyXG4gKiA1Luavj+asoeeahOeCueWHu2lucHV05Lqn55Sf55qE5Y+Y5YyW5pivaHRtbOWPmOS6hu+8jOeEtuWQjmRhdGHkuZ/lj5jjgIJcclxuICogNi4077yMNeWvvOiHtOWuueaYk+WHuumUmSzkvYbmiJHop4nlvpflupTor6XmmK/moLnmja7mk43kvZxkYXRh5pWw5o2u5Y+R55Sf5Y+Y5YyW77yM5Y+Y5YyW5a6M5q+V77yM57uf5LiA5LiA5Liq5pa55rOV5Yaz5a6aaHRtbOe7k+aehOeahOWPmOWMlu+8jOS4jei/h+aViOeOh+S4jeS4gOWumuabtOmrmFxyXG4gKiA3Lm9ubHlfY2hpbGTkuLp0cnVl5b+F54S25LiN5Lyabm9kZV9tZXJnZVxyXG4gKiA4LuS7o+eggeS4rei/mOacieS4gOS6m+agueaNruagh+etvihkaXYsc3BhbinmnaXlgZrnmoTliKTmlq0s6YO95LiN5aSq6Z2g6LCxXHJcbiAqXHJcbiAqXHJcbiAqL1xyXG5cclxuOyhmdW5jdGlvbiAoJCkge1xyXG5cclxuICAgIHdpbmRvdy54VHJlZSA9IGZ1bmN0aW9uIChvcHQpIHtcclxuICAgICAgICByZXR1cm4gbmV3IHRyZWUob3B0KTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGRlZk9wdCA9IHtcclxuICAgICAgICBkb206ICcnLCAgLy9qcXVlcnlEb21cclxuICAgICAgICBpc190cmlnZ2VyOiBmYWxzZSwgIC8v5piv5ZCm6ZyA6KaB6Kem5Y+RPyDlkKbliJnnm7TmjqXmmL7npLpcclxuICAgICAgICBoYXNfc2VhcmNoOiBmYWxzZSxcclxuICAgICAgICBvbmx5X2NoaWxkOiB0cnVlLC8v5piv5ZCm57uT5p6c5Y+q6KaBIGNoaWxkXHJcbiAgICAgICAgbm9kZV9tZXJnZTogdHJ1ZSwvL+e7k+aenOWPquaYvuekuuacgOS4iuWxgiAg5q+U5aaCICAg5Lit5Zu96KKr6YCJ5LitICDlm5vlt50s5oiQ6YO95YiZ5LiN5Lya5pi+56S6ICDlkKbliJkg5q+P5Liq6KKr5Yu+6YCJ55qE6IqC54K56YO95pi+56S6XHJcbiAgICAgICAgekluZGV4OiAxLFxyXG4gICAgICAgIGNob29zZTogZmFsc2UsICAvL+WTquS6m+aYr+mAieS4reeahO+8n+S8mOWFiOe6p+mrmOS6jmRhdGEgIHtub2RlSWQ6WzEsMiwzXSxpZDpbMSwyLDNdfVxyXG4gICAgICAgIC8vIG5vZGVfZmlyc3Q6ZmFsc2UsLy/mmK/lkKbpnIDopoHoioLngrnmjpLlnKjliY3pnaIgIOWQpuWImeaMieeFp2RhdGHnmoTpobrluo9cclxuICAgICAgICBpc19tdWx0aTogdHJ1ZSwvL+aYr+WQpuWkmumAiVxyXG4gICAgICAgIGV4cGFuZDogZmFsc2UsIC8v5piv5ZCm5bGV5byA77yMZmFsc2XjgIF0cnVl44CBbnVtICAvL3RvZG8gZXhwYW5kXHJcbiAgICAgICAgd2lkdGg6IG51bGwsXHJcbiAgICAgICAgbWF4SGVpZ2h0OiAzMDAsXHJcbiAgICAgICAgZGF0YTogW10sLy97aWQ6MSxuYW1lOid4eCcsbm9kZUlkOicwJyxpc19ub2RlOnRydWUsaXNfY2hlY2s6ZmFsc2V9LFxyXG4gICAgICAgIHNlbF9pZHM6ICcnLFxyXG4gICAgICAgIG9uSW5pdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25PcGVuOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgfSwgLy/op6blj5Hml7ZcclxuICAgICAgICBvbkJlZm9yZU9wZW46IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uQ2xvc2U6IGZ1bmN0aW9uIChoYXNfY2hnKSB7XHJcbiAgICAgICAgICAgIC8vaGFzX2NoZyAg5piv5ZCm5Y+R55Sf5Y+Y5YyWXHJcbiAgICAgICAgfSxcclxuICAgICAgICBvbkNoZWNrOiBmdW5jdGlvbiAoaXRlbSwgZG9tLCBjaGlsZHJlbkl0ZW0pIHtcclxuICAgICAgICAgICAgLy9pdGVtIOeCueWHu+eahGl0ZW1cclxuICAgICAgICAgICAgLy9kb20g54K55Ye755qEZG9tXHJcbiAgICAgICAgICAgIC8vY2hpbGRyZW5JdGVtICDmiYDmnInlvbHlk43nmoTlrZDoioLngrlcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uQ2FuY2VsOiBmdW5jdGlvbiAoaXRlbSwgZG9tLCBjaGlsZHJlbkl0ZW0pIHtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiAoaXRlbSwgZG9tLCBjaGlsZHJlbkl0ZW0pIHtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICB2YXIgdHJlZSA9IGZ1bmN0aW9uIChvcHQpIHtcclxuICAgICAgICB0aGlzLl9pbml0KG9wdCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogcmV0dXJuIHtcclxuICAgICAgICAgKiAgICAgJ3N0YXJ0Jzp0aGlzLnN0YXJ0LFxyXG4gICAgICAgICAqICAgICAnZW5kJzp0aGlzLmVuZFxyXG4gICAgICAgICAqIH07ICAvL3RvZG8gIOi/meagt+S8muWvvOiHtCB0aGlzIOayoeaciSDliKvnmoTmlrnms5Ug5Yiw5bqVIOi/mOaYr+S4jeiDveato+W4uOS9v+eUqFxyXG4gICAgICAgICAqL1xyXG5cclxuXHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAdmFyIG9wdCAg55So5oi35Lyg6L+b5p2l55qEb3B0aW9uXHJcbiAgICAgKiBAdmFyIGRvbSDmiZPlvIB0cmVl55qE6L295L2TanF1ZXJ5IGRvbVxyXG4gICAgICogQHZhciBkYXRhICDlgZp0cmVl55qEZGF0YVxyXG4gICAgICogQHZhciBodG1sIHRyZWXnmoRodG1sXHJcbiAgICAgKi9cclxuXHJcblxyXG4gICAgdHJlZS5wcm90b3R5cGUgPSB7XHJcbiAgICAgICAgX2lzX29wZW46IGZhbHNlLCAgLy/mmK/lkKZvcGVuXHJcbiAgICAgICAgX29yaWdpbklkOiB7bm9kZUlkOiBbXSwgaWQ6IFtdfSwgICAvL+S4iuasoeaJk+W8gOaXtuWAmemAieS4reS6huWTquS4gOS6m2lkXHJcbiAgICAgICAgX3NlYXJjaFRpbWVyOiAnJywgICAvL+aQnOe0ouahhueahOWumuaXtuWZqFxyXG4gICAgICAgIF9pc19maXJzdDogdHJ1ZSwgIC8v5piv5LiN5piv56ys5LiA5qyh5omT5byAXHJcbiAgICAgICAgX2luaXQ6IGZ1bmN0aW9uIChvcHQpIHtcclxuICAgICAgICAgICAgdmFyIHJlcyA9IGNoZWNrRGF0YShvcHQuZGF0YSk7XHJcbiAgICAgICAgICAgIGlmICghcmVzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMub3B0ID0gJC5leHRlbmQodHJ1ZSwge30sIGRlZk9wdCwgb3B0KTtcclxuICAgICAgICAgICAgdGhpcy5kYXRhID0gX2luaXREYXRhKHRoaXMub3B0LmRhdGEpO1xyXG4gICAgICAgICAgICB0aGlzLnJvb3RJZCA9IF9nZXRSb290SWQodGhpcy5kYXRhKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0LnNlbF9pZHMpIHtcclxuICAgICAgICAgICAgICAgIF9zZWxEYXRhKHRoaXMuZGF0YSwgdGhpcy5vcHQuc2VsX2lkcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX29yaWdpbklkID0gdGhpcy5nZXRJZCgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5kb20gPSB0aGlzLm9wdC5kb207XHJcbiAgICAgICAgICAgIHRoaXMuZG9tLmNzcyh7J3Bvc2l0aW9uJzogJ3JlbGF0aXZlJ30pO1xyXG4gICAgICAgICAgICB0aGlzLmh0bWwgPSB0aGlzLl9tYWtlUGFuZWwoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMub3B0Lm9uSW5pdCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0LmlzX3RyaWdnZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZG9tLm9mZignY2xpY2sueFRyZWUnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZG9tLm9uKCdjbGljay54VHJlZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnhUcmVlUGFuZWwnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5zdGFydCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljay54VHJlZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGF0LmVuZCgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiAgICAgIOaWueazlVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc3RhcnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5vcHQub25CZWZvcmVPcGVuKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3Nob3dQYW5lbCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9zaG93RGF0YSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9leHBhbmQoKTtcclxuICAgICAgICAgICAgdGhpcy5faXNfb3BlbiA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmh0bWwuZmluZCgnLngtdHJlZS1zZWFyY2gnKS5mb2N1cygpO1xyXG4gICAgICAgICAgICB0aGlzLm9wdC5vbk9wZW4oKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbmQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2lzX29wZW4pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaHRtbC5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgaWRzID0gdGhpcy5nZXRJZCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX2lzX29wZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMub3B0Lm9uQ2xvc2UoSlNPTi5zdHJpbmdpZnkoaWRzKSAhPT0gSlNPTi5zdHJpbmdpZnkodGhpcy5fb3JpZ2luSWQpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX29yaWdpbklkID0gaWRzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgZ2V0TmFtZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdGV4dCA9IFtdO1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YTtcclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0Lm9ubHlfY2hpbGQpIHtcclxuICAgICAgICAgICAgICAgICQuZWFjaChkYXRhLCBmdW5jdGlvbiAoaSwgbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuLmlzX2NoZWNrICYmICFuLmlzX25vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC5wdXNoKG4ubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHQubm9kZV9tZXJnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBub2RlcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICQuZWFjaChkYXRhLCBmdW5jdGlvbiAoaSwgbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobi5pc19jaGVjayAmJiBuLmlzX25vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVzLnB1c2gobi5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNsb25lID0gJC5leHRlbmQodHJ1ZSwgW10sIGRhdGEpOyAvL+ebtOaOpei1i+WAvOS8oOeahOaYr+W8leeUqFxyXG4gICAgICAgICAgICAgICAgICAgICQuZWFjaChjbG9uZSwgZnVuY3Rpb24gKGksIG4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChuLmlzX2NoZWNrICYmICQuaW5BcnJheShuLm5vZGVJZCwgbm9kZXMpICE9IC0xKSB8fCAhbi5pc19jaGVjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmVbaV0gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICQuZWFjaChjbG9uZSwgZnVuY3Rpb24gKGksIG4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQucHVzaChuLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQuZWFjaChkYXRhLCBmdW5jdGlvbiAoaSwgbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobi5pc19jaGVjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC5wdXNoKG4ubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRleHQuam9pbigpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0SWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGlkID0gW107XHJcbiAgICAgICAgICAgIHZhciBub2RlSWQgPSBbXTtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB0aGlzLmRhdGE7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHQub25seV9jaGlsZCkge1xyXG4gICAgICAgICAgICAgICAgJC5lYWNoKGRhdGEsIGZ1bmN0aW9uIChpLCBuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG4uaXNfY2hlY2sgJiYgIW4uaXNfbm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZC5wdXNoKG4uaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHQubm9kZV9tZXJnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBub2RlID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKGRhdGEsIGZ1bmN0aW9uIChpLCBuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuLmlzX2NoZWNrICYmIG4uaXNfbm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5wdXNoKG4uaWQpO1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LnB1c2goIG4ubmFtZSk7ICAvL25vZGVmaXJzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjbG9uZSA9ICQuZXh0ZW5kKHRydWUsIFtdLCBkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAkLmVhY2goY2xvbmUsIGZ1bmN0aW9uIChpLCBuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgobi5pc19jaGVjayAmJiAkLmluQXJyYXkobi5ub2RlSWQsIG5vZGUpICE9IC0xKSB8fCAhbi5pc19jaGVjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmVbaV0gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAkLmVhY2goY2xvbmUsIGZ1bmN0aW9uIChpLCBuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobi5pc19ub2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZUlkLnB1c2gobi5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkLnB1c2gobi5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKGRhdGEsIGZ1bmN0aW9uIChpLCBuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuLmlzX2NoZWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobi5pc19ub2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZUlkLnB1c2gobi5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkLnB1c2gobi5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgaWQgPSB7J2lkJzogaWQsICdub2RlSWQnOiBub2RlSWR9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBpZDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNhbmNlbEl0ZW06IGZ1bmN0aW9uIChpZCwgdHlwZSkge1xyXG4gICAgICAgICAgICB2YXIgaXRlbSA9IHt9O1xyXG4gICAgICAgICAgICB2YXIgZG9tID0gdGhpcy5odG1sLmZpbmQoJ2lucHV0W2RhdGEtaXNOb2RlPVwiJyArIHBhcnNlSW50KHR5cGUpICsgJ1wiXVtkYXRhLWlkPVwiJyArIGlkICsgJ1wiXScpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICQuZWFjaCh0aGlzLmRhdGEsIGZ1bmN0aW9uIChpLCBuKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobi5pZCA9PSBpZCAmJiBuLmlzX25vZGUgPT0gdHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBuO1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uaXNfY2hlY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9jaGdJdGVtKGl0ZW0sIGRvbSk7XHJcblxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2FuY2VsQWxsOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQuZWFjaCh0aGlzLmRhdGEsIGZ1bmN0aW9uIChpbmRleCwgaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgaXRlbS5pc19jaGVjayA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5odG1sLmZpbmQoJ2lucHV0JykucHJvcChcImNoZWNrZWRcIiwgZmFsc2UpO1xyXG4gICAgICAgICAgICB0aGlzLm9wdC5vbkNhbmNlbCgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2hlY2tJdGVtOiBmdW5jdGlvbiAoaWQsIHR5cGUpIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW0gPSB7fTtcclxuICAgICAgICAgICAgdmFyIGRvbSA9IHRoaXMuaHRtbC5maW5kKCdpbnB1dFtkYXRhLWlzTm9kZT1cIicgKyBwYXJzZUludCh0eXBlKSArICdcIl1bZGF0YS1pPVwiJyArIGlkICsgJ1wiXScpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcclxuICAgICAgICAgICAgJC5lYWNoKHRoaXMuZGF0YSwgZnVuY3Rpb24gKGksIG4pIHtcclxuICAgICAgICAgICAgICAgIGlmIChuLmlkID09IGlkICYmIG4uaXNfbm9kZSA9PSB0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbSA9IG47XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5pc19jaGVjayA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fY2hnSXRlbShpdGVtLCBkb20pO1xyXG5cclxuICAgICAgICB9LFxyXG4gICAgICAgIGNoZWNrQWxsOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdC5pc19tdWx0aSkge1xyXG4gICAgICAgICAgICAgICAgJC5lYWNoKHRoaXMuZGF0YSwgZnVuY3Rpb24gKGluZGV4LCBpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5pc19jaGVjayA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaHRtbC5maW5kKCdpbnB1dCcpLnByb3AoXCJjaGVja2VkXCIsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vcHQub25DaGVjaygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRJdGVtOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBhcnIgPSBbXTtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB0aGlzLmRhdGE7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdC5vbmx5X2NoaWxkKSB7XHJcbiAgICAgICAgICAgICAgICAkLmVhY2goZGF0YSwgZnVuY3Rpb24gKGksIG4pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobi5pc19jaGVjayAmJiAhbi5pc19ub2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyci5wdXNoKG4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdC5ub2RlX21lcmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAkLmVhY2goZGF0YSwgZnVuY3Rpb24gKGksIG4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4uaXNfY2hlY2sgJiYgbi5pc19ub2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlLnB1c2gobi5pZCk7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQucHVzaCggbi5uYW1lKTsgIC8vbm9kZWZpcnN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNsb25lID0gJC5leHRlbmQodHJ1ZSwgW10sIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICQuZWFjaChjbG9uZSwgZnVuY3Rpb24gKGksIG4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChuLmlzX2NoZWNrICYmICQuaW5BcnJheShuLm5vZGVJZCwgbm9kZSkgIT0gLTEpIHx8ICFuLmlzX2NoZWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9uZVtpXSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICQuZWFjaChjbG9uZSwgZnVuY3Rpb24gKGksIG4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyci5wdXNoKG4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQuZWFjaChkYXRhLCBmdW5jdGlvbiAoaSwgbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobi5pc19jaGVjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2gobik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBhcnI7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZWFyY2g6IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVtb3ZlTGF5ZXIodGhpcy5yb290SWQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHZhbCA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaHRtbC5maW5kKCdkaXZbbm9kZS1pZD1cIicgKyB0aGlzLnJvb3RJZCArICdcIl0nKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Nob3dMYXllcih0aGlzLnJvb3RJZCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5kYXRhW2ldLmlzX25vZGUgJiYgdGhpcy5kYXRhW2ldLm5hbWUuaW5kZXhPZih2YWwpICE9IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaHRtbC5maW5kKCdkaXZbbm9kZS1pZD1cIicgKyB0aGlzLnJvb3RJZCArICdcIl0nKS5hcHBlbmQodGhpcy5fbWFrZUl0ZW0odGhpcy5kYXRhW2ldKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqICAgICAg5pWw5o2u5pa55rOVXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgX2dldExheWVyRGF0YTogZnVuY3Rpb24gKHBhcmVudCkge1xyXG4gICAgICAgICAgICB2YXIgcmVzID0gW107XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gdGhpcy5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhW2ldLm5vZGVJZCA9PSBwYXJlbnQpIHtcclxuLy8gICAgICAgICAgICAgICAgaWYoZGF0YVtpXS5pc19ub2RlKXtcclxuLy8gICAgICAgICAgICAgICAgICAgIHJlcy51bnNoaWZ0KGRhdGFbaV0pXHJcbi8vICAgICAgICAgICAgICAgIH1lbHNle1xyXG4vLyAgICAgICAgICAgICAgICAgICAgcmVzLnB1c2goZGF0YVtpXSk7XHJcbi8vICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLnB1c2godGhpcy5kYXRhW2ldKTsgIC8v5Y6f5bqPXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlcztcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBfY2hnSXRlbTogZnVuY3Rpb24gKGl0ZW0sIGRvbSkge1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0LmlzX211bHRpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5pc19ub2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9tLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoJ2xhYmVsID4gaW5wdXQnKS5wcm9wKCdjaGVja2VkJywgaXRlbS5pc19jaGVjayk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2hnQWxsQ2hpbGRyZW4oaXRlbS5pZCwgaXRlbS5pc19jaGVjayk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFpdGVtLmlzX2NoZWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FuY2VsUGFyZW50Tm9kZShpdGVtLm5vZGVJZCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrUGFyZW50Tm9kZShpdGVtLm5vZGVJZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICB0aGlzLmh0bWwuZmluZCgnaW5wdXQnKS5wcm9wKFwiY2hlY2tlZFwiLGZhbHNlKTtcclxuLy8gICAgICAgICAgICAgICAgICAgICQodGhpcykucHJvcCgnY2hlY2tlZCcsdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICB2YXIgY2hpbGRJdGVtID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuX2dldENoaWxkKGl0ZW0sIGNoaWxkSXRlbSk7XHJcblxyXG5cclxuICAgICAgICAgICAgaWYgKCFpdGVtLmlzX2NoZWNrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wdC5vbkNhbmNlbChpdGVtLCBkb20sIGNoaWxkSXRlbSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wdC5vbkNoZWNrKGl0ZW0sIGRvbSwgY2hpbGRJdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLm9wdC5vbkNoYW5nZSgpO1xyXG5cclxuXHJcbiAgICAgICAgfSxcclxuICAgICAgICBfZ2V0Q2hpbGQ6IGZ1bmN0aW9uIChub2RlLCBjb250KSB7XHJcbiAgICAgICAgICAgIGlmIChub2RlLmlzX25vZGUgJiYgbm9kZS5oYXNfY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICAgICAgICAgICQuZWFjaCh0aGF0LmRhdGEsIGZ1bmN0aW9uIChpLCBuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG4ubm9kZUlkID09IG5vZGUuaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udC5wdXNoKG4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobi5pc19ub2RlICYmIG5vZGUuaGFzX2NoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0Ll9nZXRDaGlsZChuLCBjb250KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSxcclxuICAgICAgICBfY2FuY2VsUGFyZW50Tm9kZTogZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgICAgIHZhciBvYmogPSB0aGlzO1xyXG4gICAgICAgICAgICAkLmVhY2gob2JqLmRhdGEsIGZ1bmN0aW9uIChpLCBuKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobi5pZCA9PSBpZCAmJiBuLmlzX25vZGUgJiYgbi5pc19jaGVjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIG4uaXNfY2hlY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBvYmouaHRtbC5maW5kKCdpbnB1dFtkYXRhLWlzTm9kZT1cIjFcIl1bZGF0YS1pZD1cIicgKyBpZCArICdcIl0nKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5fY2FuY2VsUGFyZW50Tm9kZShuLm5vZGVJZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSxcclxuICAgICAgICBfY2hlY2tQYXJlbnROb2RlOiBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICAgICAgdmFyIG9iaiA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZhciBhbGxDaGlsZHJlbkNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAkLmVhY2gob2JqLmRhdGEsIGZ1bmN0aW9uIChpLCBuKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobi5ub2RlSWQgPT0gaWQgJiYgIW4uaXNfY2hlY2spIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGxDaGlsZHJlbkNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICQuZWFjaChvYmouZGF0YSwgZnVuY3Rpb24gKGksIG4pIHtcclxuICAgICAgICAgICAgICAgIGlmIChuLmlkID09IGlkICYmIG4uaXNfbm9kZSAmJiAhbi5pc19jaGVjayAmJiBhbGxDaGlsZHJlbkNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBuLmlzX2NoZWNrID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBvYmouaHRtbC5maW5kKCdpbnB1dFtkYXRhLWlzTm9kZT1cIjFcIl1bZGF0YS1pZD1cIicgKyBpZCArICdcIl0nKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLl9jaGVja1BhcmVudE5vZGUobi5ub2RlSWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIF9jaGdBbGxDaGlsZHJlbjogZnVuY3Rpb24gKG5vZGVpZCwgYm9sKSB7XHJcbiAgICAgICAgICAgIHZhciBvYmogPSB0aGlzO1xyXG4gICAgICAgICAgICAkLmVhY2goJC5leHRlbmQodHJ1ZSwgW10sIHRoaXMuZGF0YSksIGZ1bmN0aW9uIChpLCBuKSB7ICAgLy/ov5nlj6Xor50g55yL6LW35p2lIOWlveWDjyDkuI3nlKggZXh0ZW5kXHJcbiAgICAgICAgICAgICAgICBpZiAobi5ub2RlSWQgPT0gbm9kZWlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmRhdGFbaV0uaXNfY2hlY2sgPSBib2w7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG4uaXNfbm9kZSAmJiBuLmhhc19jaGlsZHJlbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmouX2NoZ0FsbENoaWxkcmVuKG4uaWQsIGJvbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG5cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5p6E6YCgaHRtbOWGhemDqOaWueazlVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIF9tYWtlUGFuZWw6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGh0bWwgPSAnPGRpdj48L2Rpdj4nO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0Lmhhc19zZWFyY2gpIHtcclxuICAgICAgICAgICAgICAgIGh0bWwgPSB0aGlzLl9tYWtlU2VhcmNoKGh0bWwpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgY3NzO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHQuaXNfdHJpZ2dlcikge1xyXG4gICAgICAgICAgICAgICAgY3NzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICdmb250LWZhbWlseSc6ICdNaWNyb3NvZnQgWWFIZWknLFxyXG4gICAgICAgICAgICAgICAgICAgICd6LWluZGV4JzogdGhpcy5vcHQuekluZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlcjogJzFweCBzb2xpZCAjNWQ1ZDVkJyxcclxuICAgICAgICAgICAgICAgICAgICAnYmFja2dyb3VuZCc6ICcjZmZmJyxcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcclxuICAgICAgICAgICAgICAgICAgICBtYXhIZWlnaHQ6IHRoaXMub3B0Lm1heEhlaWdodCxcclxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAnMCAxJScsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3doaXRlLXNwYWNlJzogJ25vd3JhcCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ292ZXJmbG93JzogJ2F1dG8nXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY3NzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICdmb250LWZhbWlseSc6ICdNaWNyb3NvZnQgWWFIZWknLFxyXG4gICAgICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kJzogJyNmZmYnLFxyXG4gICAgICAgICAgICAgICAgICAgIG1heEhlaWdodDogdGhpcy5vcHQubWF4SGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6ICcwIDElJyxcclxuICAgICAgICAgICAgICAgICAgICAnd2hpdGUtc3BhY2UnOiAnbm93cmFwJyxcclxuICAgICAgICAgICAgICAgICAgICAnb3ZlcmZsb3cnOiAnYXV0bydcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gJChodG1sKS5jc3MoY3NzKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIF9tYWtlU2VhcmNoOiBmdW5jdGlvbiAoaHRtbCkge1xyXG4gICAgICAgICAgICB2YXIgc2VhcmNoID0gJzxpbnB1dCBjbGFzcz1cIngtdHJlZS1zZWFyY2hcIiB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwi5pCc57SiXCIvPjwvZGl2Pic7XHJcbiAgICAgICAgICAgIHNlYXJjaCA9ICQoc2VhcmNoKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgJ2JvcmRlcic6ICdub25lJyxcclxuICAgICAgICAgICAgICAgICdwYWRkaW5nJzogJzRweCAwJyxcclxuICAgICAgICAgICAgICAgICdtYXJnaW4nOiAnNXB4IGF1dG8gMCBhdXRvJyxcclxuICAgICAgICAgICAgICAgICd3aWR0aCc6ICc5OCUnLFxyXG4gICAgICAgICAgICAgICAgJ2Rpc3BsYXknOiAnYmxvY2snXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdmFyIG9iaiA9IHRoaXM7XHJcbiAgICAgICAgICAgICQoc2VhcmNoKS5vbigna2V5dXAgcGFzdGUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZG9tID0gdGhpcztcclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChvYmouX3NlYXJjaFRpbWVyKTtcclxuICAgICAgICAgICAgICAgIG9iai5fc2VhcmNoVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouc2VhcmNoKGRvbS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9LCAxMDApO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAkKGh0bWwpLmFwcGVuZChzZWFyY2gpO1xyXG5cclxuICAgICAgICB9LFxyXG4gICAgICAgIF9tYWtlTm9kZTogZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgdmFyICRodG1sO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHQuaXNfbXVsdGkpIHtcclxuICAgICAgICAgICAgICAgICRodG1sID0gJCgnPGRpdiBub2RlLWlkPVwiJyArIGl0ZW0uaWQgKyAnXCI+JyArIG1ha2VFeHBhbmQoKSArICc8bGFiZWw+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGRhdGEtaXNOb2RlPVwiMVwiIGRhdGEtaWQ9XCInICsgaXRlbS5pZCArICdcIiAnICsgKGl0ZW0uaXNfY2hlY2sgPyAnY2hlY2tlZCcgOiAnJykgKyAnIGRhdGEtbmFtZT1cIicgKyBpdGVtLm5hbWUgKyAnXCIvPjxzcGFuPicgKyBpdGVtLm5hbWUgKyAnPC9zcGFuPjwvbGFiZWw+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHQub25seV9jaGlsZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRodG1sID0gJCgnPGRpdiBub2RlLWlkPVwiJyArIGl0ZW0uaWQgKyAnXCI+JyArIG1ha2VFeHBhbmQoKSArICc8c3Bhbj4nICsgaXRlbS5uYW1lICsgJzwvc3Bhbj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICRodG1sID0gJCgnPGRpdiBub2RlLWlkPVwiJyArIGl0ZW0uaWQgKyAnXCI+JyArIG1ha2VFeHBhbmQoKSArICc8bGFiZWw+PGlucHV0IHR5cGU9XCJyYWRpb1wiIG5hbWU9XCInICsgdGhpcy5kb20uc2VsZWN0b3IgKyAnXCIgZGF0YS1pc05vZGU9XCIxXCIgZGF0YS1pZD1cIicgKyBpdGVtLmlkICsgJ1wiICcgKyAoaXRlbS5pc19jaGVjayA/ICdjaGVja2VkJyA6ICcnKSArICcgZGF0YS1uYW1lPVwiJyArIGl0ZW0ubmFtZSArICdcIi8+PHNwYW4+JyArIGl0ZW0ubmFtZSArICc8L3NwYW4+PC9sYWJlbD48L2Rpdj4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkaHRtbC5maW5kKCdzcGFuJykuY3NzKHtcclxuICAgICAgICAgICAgICAgICdjdXJzb3InOiAncG9pbnRlcicsXHJcbiAgICAgICAgICAgICAgICAndXNlci1zZWxlY3QnOiAnbm9uZScsXHJcbiAgICAgICAgICAgICAgICAnLXdlYmtpdC11c2VyLXNlbGVjdCc6ICdub25lJyxcclxuICAgICAgICAgICAgICAgICctbW96LXVzZXItc2VsZWN0JzogJ25vbmUnLFxyXG4gICAgICAgICAgICAgICAgJy1tcy11c2VyLXNlbGVjdCc6ICdub25lJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJGh0bWwuZmluZCgnaW5wdXQnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgJ3ZlcnRpY2FsLWFsaWduJzogJ21pZGRsZSdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHZhciBvYmogPSB0aGlzO1xyXG4gICAgICAgICAgICAkaHRtbC5maW5kKCdpJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdpY29uLWppYTEnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5fc2hvd0xheWVyKGl0ZW0uaWQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouX3JlbW92ZUxheWVyKGl0ZW0uaWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuICRodG1sO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgX21ha2VDaGlsZDogZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgdmFyICRodG1sO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHQuaXNfbXVsdGkpIHtcclxuICAgICAgICAgICAgICAgICRodG1sID0gJCgnPGRpdj48c3Bhbj48L3NwYW4+PGxhYmVsPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBkYXRhLWlkPVwiJyArIGl0ZW0uaWQgKyAnXCIgZGF0YS1pc05vZGU9XCIwXCIgZGF0YS1uYW1lPVwiJyArIGl0ZW0ubmFtZSArICdcIiAnICsgKGl0ZW0uaXNfY2hlY2sgPyAnY2hlY2tlZCcgOiAnJykgKyAnLz4nICsgaXRlbS5uYW1lICsgJzwvbGFiZWw+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkaHRtbCA9ICQoJzxkaXY+JyArICh0aGlzLm9wdC5vbmx5X2NoaWxkID8gJycgOiAnPHNwYW4+PC9zcGFuPicpICsgJzxsYWJlbD48aW5wdXQgdHlwZT1cInJhZGlvXCIgbmFtZT1cIicgKyB0aGlzLmRvbS5zZWxlY3RvciArICdcIiBkYXRhLWlkPVwiJyArIGl0ZW0uaWQgKyAnXCIgZGF0YS1pc05vZGU9XCIwXCIgZGF0YS1uYW1lPVwiJyArIGl0ZW0ubmFtZSArICdcIiAvPicgKyBpdGVtLm5hbWUgKyAnPC9sYWJlbD48L2Rpdj4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkaHRtbC5maW5kKCdzcGFuJykuY3NzKHtcclxuICAgICAgICAgICAgICAgICd3aWR0aCc6ICcxNnB4JyxcclxuICAgICAgICAgICAgICAgICd1c2VyLXNlbGVjdCc6ICdub25lJyxcclxuICAgICAgICAgICAgICAgICctd2Via2l0LXVzZXItc2VsZWN0JzogJ25vbmUnLFxyXG4gICAgICAgICAgICAgICAgJy1tb3otdXNlci1zZWxlY3QnOiAnbm9uZScsXHJcbiAgICAgICAgICAgICAgICAnLW1zLXVzZXItc2VsZWN0JzogJ25vbmUnLFxyXG4gICAgICAgICAgICAgICAgJ2Rpc3BsYXknOiAnaW5saW5lLWJsb2NrJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJGh0bWwuZmluZCgnaW5wdXQnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgJ3ZlcnRpY2FsLWFsaWduJzogJ21pZGRsZSdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHRtbDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIF9tYWtlSXRlbTogZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgdmFyICRodG1sO1xyXG4gICAgICAgICAgICBpZiAoaXRlbS5pc19ub2RlICYmIGl0ZW0uaGFzX2NoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICAkaHRtbCA9IHRoaXMuX21ha2VOb2RlKGl0ZW0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJGh0bWwgPSB0aGlzLl9tYWtlQ2hpbGQoaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBvYmogPSB0aGlzO1xyXG4gICAgICAgICAgICAkaHRtbC5maW5kKCdpbnB1dCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmoub3B0LmlzX211bHRpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5pc19jaGVjayA9ICFpdGVtLmlzX2NoZWNrO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkLmVhY2gob2JqLmRhdGEsIGZ1bmN0aW9uIChpbmRleCwgaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmlzX2NoZWNrID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5pc19jaGVjayA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIG9iai5fY2hnSXRlbShpdGVtLCAkKHRoaXMpKTtcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuICRodG1sO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogICAgICDop4blm77mlrnms5VcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgX3Nob3dQYW5lbDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHQuaXNfdHJpZ2dlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5odG1sLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiB0aGlzLmRvbS5vdXRlckhlaWdodCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgbWluV2lkdGg6IHRoaXMub3B0LndpZHRoID8gdGhpcy5vcHQud2lkdGggOiB0aGlzLmRvbS5vdXRlcldpZHRoKCkgKiAwLjk4XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmh0bWwuYWRkQ2xhc3MoJ3hUcmVlUGFuZWwnKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmh0bWwub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5kb20uYXBwZW5kKHRoaXMuaHRtbCk7XHJcblxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgX3Nob3dEYXRhOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9pc19maXJzdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2hvd0xheWVyKHRoaXMucm9vdElkKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2lzX2ZpcnN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmh0bWwuc2hvdygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBfZXhwYW5kOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBvYmogPSB0aGlzO1xyXG4gICAgICAgICAgICBpZiAob2JqLm9wdC5leHBhbmQgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICQuZWFjaChvYmouZGF0YSwgZnVuY3Rpb24gKGluZGV4LCBpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uaXNfbm9kZSAmJiBpdGVtLmhhc19jaGlsZHJlbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmouaHRtbC5maW5kKCdpJykuZmlsdGVyKCcuaWNvbi1qaWExJykuY2xpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChvYmoub3B0LmV4cGFuZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGV4cGFuZElkID0gW107XHJcbiAgICAgICAgICAgICAgICBleHBhbmRJZC5wdXNoKG9iai5yb290SWQpO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmoub3B0LmV4cGFuZDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwYW5kSWQgPSBvYmouX2V4cGFuZExldmVsKGV4cGFuZElkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgX2V4cGFuZExldmVsOiBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICAgICAgdmFyIG9iaiA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZhciBleHBhbmRJZCA9IFtdO1xyXG4gICAgICAgICAgICAkLmVhY2goaWQsIGZ1bmN0aW9uIChpbmRleCwgaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgJC5lYWNoKG9iai5kYXRhLCBmdW5jdGlvbiAoaW5kZXgyLCBpdGVtMikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtMi5ub2RlSWQgPT09IGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwYW5kSWQucHVzaChpdGVtMi5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5odG1sLmZpbmQoJ2Rpdltub2RlLWlkPVwiJyArIGl0ZW0yLm5vZGVJZCArICdcIl0gPiBpJykuZmlsdGVyKCcuaWNvbi1qaWExJykuY2xpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBleHBhbmRJZDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIF9zaG93TGF5ZXI6IGZ1bmN0aW9uIChsYXllcklkKSB7XHJcbiAgICAgICAgICAgIHZhciBzaG93RGF0YSA9IHRoaXMuX2dldExheWVyRGF0YShsYXllcklkKTtcclxuICAgICAgICAgICAgdmFyIGl0ZW1EaXYgPSBtYWtlTGF5ZXIoKTtcclxuXHJcblxyXG4gICAgICAgICAgICAvL+i/memHjCAw6IqC54K555qE57uT5p6EIOWSjCDlrZDoioLngrnnmoTnu5PmnoQg5rKh5pyJ5aSE55CG5aW9ICAgIOS7peWQjuWwvemHj+iuqW5vZGUtaWQg5ZKMICBpdGVtZGl2IOWIhuW8gFxyXG4gICAgICAgICAgICBpZiAobGF5ZXJJZCA9PT0gdGhpcy5yb290SWQpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW1EaXYgPSAkKGl0ZW1EaXYpLmF0dHIoJ25vZGUtaWQnLCB0aGlzLnJvb3RJZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmh0bWwuYXBwZW5kKGl0ZW1EaXYpO1xyXG4gICAgICAgICAgICAgICAgLy9pdGVtRGl2LnBhcmVudCgpLmF0dHIoJ25vZGUtaWQnLDApO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRvU2hyaW5rKHRoaXMuaHRtbC5maW5kKCdkaXZbbm9kZS1pZD1cIicgKyBsYXllcklkICsgJ1wiXSBpJykpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5odG1sLmZpbmQoJ2Rpdltub2RlLWlkPVwiJyArIGxheWVySWQgKyAnXCJdJykuYXBwZW5kKGl0ZW1EaXYpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpIGluIHNob3dEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtRGl2LmFwcGVuZCh0aGlzLl9tYWtlSXRlbShzaG93RGF0YVtpXSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBfcmVtb3ZlTGF5ZXI6IGZ1bmN0aW9uIChsYXllcklkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaHRtbC5maW5kKCdkaXZbbm9kZS1pZD1cIicgKyBsYXllcklkICsgJ1wiXT5kaXYnKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgdG9FeHBhbmQodGhpcy5odG1sLmZpbmQoJ2Rpdltub2RlLWlkPVwiJyArIGxheWVySWQgKyAnXCJdIGknKSk7XHJcbiAgICAgICAgfSxcclxuXHJcblxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gbWFrZUxheWVyKCkge1xyXG4gICAgICAgIHZhciBodG1sID0gJzxkaXY+PC9kaXY+JztcclxuXHJcbiAgICAgICAgcmV0dXJuICQoaHRtbCkuY3NzKHtcclxuICAgICAgICAgICAgJ21hcmdpbi1sZWZ0JzogJzEzcHgnXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbWFrZUV4cGFuZCgpIHtcclxuICAgICAgICAvLyB2YXIgaHRtbD0nPHNwYW4gZGF0YS1pY29uPVwiZXhwYW5kXCI+77yLPC9zcGFuPic7XHJcbiAgICAgICAgdmFyIGh0bWwgPSAnPGkgY2xhc3M9XCJpY29uZm9udCBpY29uLWppYTFcIj48L2k+JztcclxuXHJcbiAgICAgICAgcmV0dXJuICQoaHRtbCkuY3NzKHtcclxuICAgICAgICAgICAgJ2ZvbnQtc2l6ZSc6ICcxMnB4JyxcclxuICAgICAgICAgICAgJ3ZlcnRpY2FsLWFsaWduJzogJ2Jhc2UtbGluZScsXHJcbiAgICAgICAgICAgICdwYWRkaW5nLXJpZ2h0JzogJzBweCcsXHJcbiAgICAgICAgICAgICdjdXJzb3InOiAncG9pbnRlcidcclxuICAgICAgICB9KVswXS5vdXRlckhUTUw7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdG9TaHJpbmsoZG9tKSB7XHJcbiAgICAgICAgZG9tLnJlbW92ZUNsYXNzKCdpY29uLWppYTEnKTtcclxuICAgICAgICBkb20uYWRkQ2xhc3MoJ2ljb24tamlhbjEnKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB0b0V4cGFuZChkb20pIHtcclxuICAgICAgICBkb20ucmVtb3ZlQ2xhc3MoJ2ljb24tamlhbjEnKTtcclxuICAgICAgICBkb20uYWRkQ2xhc3MoJ2ljb24tamlhMScpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBjaGVja0RhdGEoZGF0YSkge1xyXG4gICAgICAgIGZvciAodmFyIGkgaW4gZGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIGRhdGFbaV0gPT0gJ29iamVjdCc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBfaW5pdERhdGEoZGF0YSkge1xyXG4gICAgICAgIHZhciBjbG9uZSA9ICQuZXh0ZW5kKHRydWUsIFtdLCBkYXRhKTtcclxuICAgICAgICB2YXIgbGVuID0gY2xvbmUubGVuZ3RoO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGxlbjsgaysrKSB7XHJcbiAgICAgICAgICAgIGNsb25lW2tdLmhhc19jaGlsZHJlbiA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gaTsgaiA8IGxlbjsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2xvbmVbaV0uaXNfbm9kZSAmJiBjbG9uZVtpXS5pZCA9PT0gY2xvbmVbal0ubm9kZUlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xvbmVbaV0uaGFzX2NoaWxkcmVuID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChjbG9uZVtpXS5ub2RlSWQgPT09IGNsb25lW2pdLmlkICYmIGNsb25lW2pdLmlzX25vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjbG9uZVtqXS5oYXNfY2hpbGRyZW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY2xvbmU7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gX3NlbERhdGEoZGF0YSwgc2VsZWN0ZWQpIHtcclxuICAgICAgICB2YXIgc2VsX2lkcyA9IHNlbGVjdGVkLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxfaWRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGF0YS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGFbal0uaWQgPT09IHBhcnNlSW50KHNlbF9pZHNbaV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtqXS5pc19jaGVjayA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgX3NlbFBhcmVudChkYXRhLCBkYXRhW2pdLm5vZGVJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFbal0uaXNfbm9kZSAmJiBkYXRhW2ldLmhhc19jaGlsZHJlbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfc2VsQ2hpbGRyZW4oZGF0YSwgZGF0YVtqXS5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIF9zZWxQYXJlbnQoZGF0YSwgbmlkKSB7XHJcbiAgICAgICAgaWYgKCFuaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgc2VsUGFyZW50ID0gdHJ1ZTtcclxuICAgICAgICB2YXIgc2VsX3AgPSB7fTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGRhdGFbaV0uaWQgPT0gbmlkKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxfcCA9IGRhdGFbaV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGRhdGFbaV0ubm9kZUlkID09IG5pZCAmJiAhZGF0YVtpXS5pc19jaGVjaykge1xyXG4gICAgICAgICAgICAgICAgc2VsUGFyZW50ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc2VsUGFyZW50KSB7XHJcbiAgICAgICAgICAgIHNlbF9wLmlzX2NoZWNrID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHNlbF9wLm5vZGVJZCkge1xyXG4gICAgICAgICAgICAgICAgX3NlbFBhcmVudChkYXRhLCBzZWxfcC5ub2RlSWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIF9zZWxDaGlsZHJlbihkYXRhLCBpZCkge1xyXG4gICAgICAgIGlmICghaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGRhdGFbaV0ubm9kZUlkID09PSBpZCkge1xyXG4gICAgICAgICAgICAgICAgZGF0YVtpXS5pc19jaGVjayA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YVtpXS5pc19ub2RlICYmIGRhdGFbaV0uaGFzX2NoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3NlbENoaWxkcmVuKGRhdGEsIGRhdGFbaV0uaWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBfZ2V0Um9vdElkKF9kYXRhKSB7XHJcbiAgICAgICAgdmFyIHJvb3RJZCA9IFtdO1xyXG4gICAgICAgIHZhciBjbG9uZSA9ICQuZXh0ZW5kKHRydWUsIFtdLCBfZGF0YSk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IF9kYXRhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSBpOyBqIDwgbGVuOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChfZGF0YVtpXS5pZCA9PT0gX2RhdGFbal0ubm9kZUlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xvbmVbal0gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKF9kYXRhW2ldLm5vZGVJZCA9PT0gX2RhdGFbal0uaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjbG9uZVtpXSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgJC5lYWNoKGNsb25lLCBmdW5jdGlvbiAoaSwgdCkge1xyXG4gICAgICAgICAgICBpZiAodCkge1xyXG4gICAgICAgICAgICAgICAgcm9vdElkLnB1c2godC5ub2RlSWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIC8v5Y676Zmk5pWw57uE6YeN5aSN5YC8XHJcbiAgICAgICAgLy8gZnVuY3Rpb24gdW5pcXVlKGFycmF5KXtcclxuICAgICAgICAvLyAgICAgdmFyIG4gPSBbXTtcclxuICAgICAgICAvLyAgICAgZm9yKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAvLyAgICAgICAgIGlmIChuLmluZGV4T2YoYXJyYXlbaV0pID09IC0xKSBuLnB1c2goYXJyYXlbaV0pO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gICAgIHJldHVybiBuO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIGZ1bmN0aW9uIHVuaXF1ZShhcnJheSl7XHJcbiAgICAgICAgLy8gICAgIHZhciByID0gW107XHJcbiAgICAgICAgLy8gICAgIGZvcih2YXIgaSA9IDAsIGwgPSBhcnJheS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICAvLyAgICAgICAgIGZvcih2YXIgaiA9IGkgKyAxOyBqIDwgbDsgaisrKXtcclxuICAgICAgICAvLyAgICAgICAgICAgICBpZiAoYXJyYXlbaV0gPT09IGFycmF5W2pdKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGogPSArK2k7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICAgICAgci5wdXNoKGFycmF5W2ldKTtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vICAgICByZXR1cm4gcjtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gcm9vdElkID0gdW5pcXVlKHJvb3RJZCk7XHJcblxyXG4gICAgICAgIHJldHVybiByb290SWRbMF07XHJcbiAgICB9XHJcblxyXG5cclxufSkoalF1ZXJ5KTtcclxuXHJcblxyXG5cclxuXHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvdHJlZS90cmVlLmpzXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 10 */
/***/ function(module, exports) {

	eval("/**\r\n * Created by Administrator on 2017/1/6.\r\n */\r\n;(function () {\r\n\r\n    var psecond = 1000,\r\n        pminute = 60*psecond,\r\n        phour = 60*pminute,\r\n        pday = 24*phour,\r\n        pweek = 7*pday;\r\n\r\n    function gettime(date) {\r\n        var nowDate = date ? date : new Date();\r\n\r\n        var time = nowDate.getTime(),\r\n            msecond = nowDate.getMilliseconds(),\r\n            second = nowDate.getSeconds(),\r\n            minute = nowDate.getMinutes(),\r\n            hour = nowDate.getHours(),\r\n            dayWeek = nowDate.getDay(),\r\n            dayMonth = nowDate.getDate(),\r\n            month = nowDate.getMonth(),\r\n            year = nowDate.getFullYear();\r\n\r\n        var dayPass = hour*phour + minute*pminute + second*psecond + msecond,\r\n            dayStart = time - dayPass,\r\n            dayEnd = dayStart + pday,\r\n            yesterdayStart = dayStart - pday,\r\n            pastDayStart = time - pday;\r\n\r\n        var weekPass = dayWeek * pday + dayPass,\r\n            weekStart = time - weekPass,\r\n            weekEnd = weekStart + pweek,\r\n            lastWeekStart = weekStart - pweek,\r\n            pastWeekStart = time - pweek;\r\n\r\n        var monthStart = (new Date(year, month, 1)).getTime(),\r\n            monthEnd = (new Date(year, month+1, 1)).getTime(),\r\n            lastMonthStart = (new Date(year, month-1, 1)).getTime(),\r\n            pastMonthStart = time - monthStart + lastMonthStart;\r\n\r\n        var yearStart = (new Date(year, 0, 1)).getTime(),\r\n            yearEnd = (new Date(year+1, 0, 1)).getTime(),\r\n            lastYearStart = (new Date(year-1, 0, 1)).getTime(),\r\n            pastYearStart = (new Date(time)).setFullYear(year-1);\r\n\r\n\r\n        return {\r\n            time: time,\r\n\r\n            day: {\r\n                start: dayStart,\r\n                end: dayEnd\r\n            },\r\n            yesterday: {\r\n                start: yesterdayStart,\r\n                end: dayStart\r\n            },\r\n            pastDay: {\r\n                start: pastDayStart,\r\n                end: time\r\n            },\r\n\r\n            week: {\r\n                start: weekStart,\r\n                end: weekEnd\r\n            },\r\n            lastWeek: {\r\n                start: lastWeekStart,\r\n                end: weekStart\r\n            },\r\n            pastWeek: {\r\n                start: pastWeekStart,\r\n                end: time\r\n            },\r\n\r\n            month: {\r\n                start: monthStart,\r\n                end: monthEnd\r\n            },\r\n            lastMonth: {\r\n                start: lastMonthStart,\r\n                end: monthStart\r\n            },\r\n            pastMonth: {\r\n                start: pastMonthStart,\r\n                end: time\r\n            },\r\n\r\n            year: {\r\n                start: yearStart,\r\n                end: yearEnd\r\n            },\r\n            lastYear: {\r\n                start: lastYearStart,\r\n                end: yearStart\r\n            },\r\n            pastYear: {\r\n                start: pastYearStart,\r\n                end: time\r\n            }\r\n        }\r\n    }\r\n\r\n    window.xTime = gettime;\r\n\r\n})();//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9nZXR0aW1lL2dldHRpbWUuanM/OThlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLENBQUMiLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBBZG1pbmlzdHJhdG9yIG9uIDIwMTcvMS82LlxyXG4gKi9cclxuOyhmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgdmFyIHBzZWNvbmQgPSAxMDAwLFxyXG4gICAgICAgIHBtaW51dGUgPSA2MCpwc2Vjb25kLFxyXG4gICAgICAgIHBob3VyID0gNjAqcG1pbnV0ZSxcclxuICAgICAgICBwZGF5ID0gMjQqcGhvdXIsXHJcbiAgICAgICAgcHdlZWsgPSA3KnBkYXk7XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0dGltZShkYXRlKSB7XHJcbiAgICAgICAgdmFyIG5vd0RhdGUgPSBkYXRlID8gZGF0ZSA6IG5ldyBEYXRlKCk7XHJcblxyXG4gICAgICAgIHZhciB0aW1lID0gbm93RGF0ZS5nZXRUaW1lKCksXHJcbiAgICAgICAgICAgIG1zZWNvbmQgPSBub3dEYXRlLmdldE1pbGxpc2Vjb25kcygpLFxyXG4gICAgICAgICAgICBzZWNvbmQgPSBub3dEYXRlLmdldFNlY29uZHMoKSxcclxuICAgICAgICAgICAgbWludXRlID0gbm93RGF0ZS5nZXRNaW51dGVzKCksXHJcbiAgICAgICAgICAgIGhvdXIgPSBub3dEYXRlLmdldEhvdXJzKCksXHJcbiAgICAgICAgICAgIGRheVdlZWsgPSBub3dEYXRlLmdldERheSgpLFxyXG4gICAgICAgICAgICBkYXlNb250aCA9IG5vd0RhdGUuZ2V0RGF0ZSgpLFxyXG4gICAgICAgICAgICBtb250aCA9IG5vd0RhdGUuZ2V0TW9udGgoKSxcclxuICAgICAgICAgICAgeWVhciA9IG5vd0RhdGUuZ2V0RnVsbFllYXIoKTtcclxuXHJcbiAgICAgICAgdmFyIGRheVBhc3MgPSBob3VyKnBob3VyICsgbWludXRlKnBtaW51dGUgKyBzZWNvbmQqcHNlY29uZCArIG1zZWNvbmQsXHJcbiAgICAgICAgICAgIGRheVN0YXJ0ID0gdGltZSAtIGRheVBhc3MsXHJcbiAgICAgICAgICAgIGRheUVuZCA9IGRheVN0YXJ0ICsgcGRheSxcclxuICAgICAgICAgICAgeWVzdGVyZGF5U3RhcnQgPSBkYXlTdGFydCAtIHBkYXksXHJcbiAgICAgICAgICAgIHBhc3REYXlTdGFydCA9IHRpbWUgLSBwZGF5O1xyXG5cclxuICAgICAgICB2YXIgd2Vla1Bhc3MgPSBkYXlXZWVrICogcGRheSArIGRheVBhc3MsXHJcbiAgICAgICAgICAgIHdlZWtTdGFydCA9IHRpbWUgLSB3ZWVrUGFzcyxcclxuICAgICAgICAgICAgd2Vla0VuZCA9IHdlZWtTdGFydCArIHB3ZWVrLFxyXG4gICAgICAgICAgICBsYXN0V2Vla1N0YXJ0ID0gd2Vla1N0YXJ0IC0gcHdlZWssXHJcbiAgICAgICAgICAgIHBhc3RXZWVrU3RhcnQgPSB0aW1lIC0gcHdlZWs7XHJcblxyXG4gICAgICAgIHZhciBtb250aFN0YXJ0ID0gKG5ldyBEYXRlKHllYXIsIG1vbnRoLCAxKSkuZ2V0VGltZSgpLFxyXG4gICAgICAgICAgICBtb250aEVuZCA9IChuZXcgRGF0ZSh5ZWFyLCBtb250aCsxLCAxKSkuZ2V0VGltZSgpLFxyXG4gICAgICAgICAgICBsYXN0TW9udGhTdGFydCA9IChuZXcgRGF0ZSh5ZWFyLCBtb250aC0xLCAxKSkuZ2V0VGltZSgpLFxyXG4gICAgICAgICAgICBwYXN0TW9udGhTdGFydCA9IHRpbWUgLSBtb250aFN0YXJ0ICsgbGFzdE1vbnRoU3RhcnQ7XHJcblxyXG4gICAgICAgIHZhciB5ZWFyU3RhcnQgPSAobmV3IERhdGUoeWVhciwgMCwgMSkpLmdldFRpbWUoKSxcclxuICAgICAgICAgICAgeWVhckVuZCA9IChuZXcgRGF0ZSh5ZWFyKzEsIDAsIDEpKS5nZXRUaW1lKCksXHJcbiAgICAgICAgICAgIGxhc3RZZWFyU3RhcnQgPSAobmV3IERhdGUoeWVhci0xLCAwLCAxKSkuZ2V0VGltZSgpLFxyXG4gICAgICAgICAgICBwYXN0WWVhclN0YXJ0ID0gKG5ldyBEYXRlKHRpbWUpKS5zZXRGdWxsWWVhcih5ZWFyLTEpO1xyXG5cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdGltZTogdGltZSxcclxuXHJcbiAgICAgICAgICAgIGRheToge1xyXG4gICAgICAgICAgICAgICAgc3RhcnQ6IGRheVN0YXJ0LFxyXG4gICAgICAgICAgICAgICAgZW5kOiBkYXlFbmRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgeWVzdGVyZGF5OiB7XHJcbiAgICAgICAgICAgICAgICBzdGFydDogeWVzdGVyZGF5U3RhcnQsXHJcbiAgICAgICAgICAgICAgICBlbmQ6IGRheVN0YXJ0XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHBhc3REYXk6IHtcclxuICAgICAgICAgICAgICAgIHN0YXJ0OiBwYXN0RGF5U3RhcnQsXHJcbiAgICAgICAgICAgICAgICBlbmQ6IHRpbWVcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIHdlZWs6IHtcclxuICAgICAgICAgICAgICAgIHN0YXJ0OiB3ZWVrU3RhcnQsXHJcbiAgICAgICAgICAgICAgICBlbmQ6IHdlZWtFbmRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGFzdFdlZWs6IHtcclxuICAgICAgICAgICAgICAgIHN0YXJ0OiBsYXN0V2Vla1N0YXJ0LFxyXG4gICAgICAgICAgICAgICAgZW5kOiB3ZWVrU3RhcnRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcGFzdFdlZWs6IHtcclxuICAgICAgICAgICAgICAgIHN0YXJ0OiBwYXN0V2Vla1N0YXJ0LFxyXG4gICAgICAgICAgICAgICAgZW5kOiB0aW1lXHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBtb250aDoge1xyXG4gICAgICAgICAgICAgICAgc3RhcnQ6IG1vbnRoU3RhcnQsXHJcbiAgICAgICAgICAgICAgICBlbmQ6IG1vbnRoRW5kXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGxhc3RNb250aDoge1xyXG4gICAgICAgICAgICAgICAgc3RhcnQ6IGxhc3RNb250aFN0YXJ0LFxyXG4gICAgICAgICAgICAgICAgZW5kOiBtb250aFN0YXJ0XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHBhc3RNb250aDoge1xyXG4gICAgICAgICAgICAgICAgc3RhcnQ6IHBhc3RNb250aFN0YXJ0LFxyXG4gICAgICAgICAgICAgICAgZW5kOiB0aW1lXHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICB5ZWFyOiB7XHJcbiAgICAgICAgICAgICAgICBzdGFydDogeWVhclN0YXJ0LFxyXG4gICAgICAgICAgICAgICAgZW5kOiB5ZWFyRW5kXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGxhc3RZZWFyOiB7XHJcbiAgICAgICAgICAgICAgICBzdGFydDogbGFzdFllYXJTdGFydCxcclxuICAgICAgICAgICAgICAgIGVuZDogeWVhclN0YXJ0XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHBhc3RZZWFyOiB7XHJcbiAgICAgICAgICAgICAgICBzdGFydDogcGFzdFllYXJTdGFydCxcclxuICAgICAgICAgICAgICAgIGVuZDogdGltZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHdpbmRvdy54VGltZSA9IGdldHRpbWU7XHJcblxyXG59KSgpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvZ2V0dGltZS9nZXR0aW1lLmpzXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 11 */
/***/ function(module, exports, __webpack_require__) {

	eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/**\r\n * Created by Administrator on 2016/11/4.\r\n */\r\n\r\n\r\n;(function (factory) {\r\n    if (\"function\" === 'function' && __webpack_require__(12)['amd']) {\r\n        // AMD. Register as an anonymous module.\r\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(13)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n    } else {\r\n        // Browser globals\r\n        factory(jQuery);\r\n    }\r\n})(function ($) {\r\n    var global, dialog, view, view_ctrl, ctrl_right, ctrl_left, ctrl_close, detail;\r\n    var ctrl_magnify, ctrl_shrink, ctrl_rotate, ctrl_recover;   //放大缩小旋转回复 按钮\r\n\r\n    var loading;   //等待图片\r\n    var imgDom;   //imgDom\r\n    var showWidth, showHeight;   //图像在view 中显示的宽高\r\n    var imgs = [];   //要显示的图像们\r\n    var infoDom;  //要显示的信息\r\n    var imageObj = new Image(); //用来加载图片的对象\r\n    var index = 1;   //展示第几个图片\r\n    var maxWeight; //图片最大放大系数  //由于图片可能一show 就被缩小了  而我们的放大系数是针对原图大小\r\n    var weight = 1;  //图片放大缩小系数\r\n    var rotate = 0;  //图片旋转度数\r\n    var isNotMove = true;   //拖拽图片时 不响应点击事件 的开关\r\n    var dragTime;   //拖拽图片时 定时器\r\n    var startX, startY;  //拖拽图片\r\n\r\n    var zIndex;  //还未投入使用\r\n    var onSwitch = function () {\r\n    };  //切换图片的函数\r\n\r\n\r\n    function calcuImgTop() {\r\n        var offset = view.height() - imgDom.height();\r\n        return offset / 2;\r\n    }\r\n\r\n    function calcuImgWH() {\r\n//            //计算在view中的  图像的宽高  （可能是原图大小  可能是被max-height max-width 处理过的）\r\n//            if(image.width>view.width()){\r\n//                showWidth=view.width();\r\n//                showHeight=image.height*view.width()/image.width;\r\n//            }else if(image.height>view.height()){\r\n//                showHeight=view.height();\r\n//                showWidth=image.width*view.height()/image.height;\r\n//            }else{\r\n//                showHeight=image.height;\r\n//                showWidth=image.width;\r\n//            }\r\n        showHeight = imgDom.height();\r\n        showWidth = imgDom.width();\r\n    }\r\n\r\n    function dragImg(e) {\r\n        var offsetY = startY - e.pageY;\r\n        var offsetX = startX - e.pageX;\r\n\r\n        imgDom.css('margin-top', -offsetY);\r\n        imgDom.css('margin-left', -offsetX);\r\n    }\r\n\r\n    function bindEVent() {\r\n        //图片读取\r\n        imageObj.onload = function () {\r\n            imgDom.show();\r\n            loading.hide();\r\n            imgDom.prop('src', imageObj.src);\r\n            imgDom.css({\r\n                'margin-top': calcuImgTop()\r\n            });\r\n            maxWeight = (imageObj.width / imgDom.width()) * 1.5;\r\n            calcuImgWH();\r\n        };\r\n\r\n        //隐藏imgview\r\n        global.click(function (e) {\r\n            if (isNotMove) {\r\n                if (this === e.target) {\r\n                    $(this).hide();\r\n                    imageObj.src = \"\";\r\n\r\n                }\r\n            }\r\n        });\r\n        ctrl_close.click(function (e) {\r\n            if (isNotMove) {\r\n                if (this === e.target) {\r\n                    global.hide();\r\n                    imageObj.src = \"\";\r\n\r\n                }\r\n            }\r\n        });\r\n\r\n        //拖拽\r\n        imgDom.bind('mousedown', function (e) {\r\n            e.preventDefault();\r\n            startX = e.pageX - parseInt(imgDom.css('margin-left'));\r\n            startY = e.pageY - parseInt(imgDom.css('margin-top'));\r\n            $(document).bind('mousemove', function (e) {\r\n                e.preventDefault();\r\n                $('body').css('cursor', 'move');\r\n                isNotMove = false;\r\n                dragImg(e);\r\n            });\r\n            $(document).bind('mouseup', function (e) {\r\n                $(document).unbind('mousemove');\r\n                $('body').css('cursor', 'initial');\r\n                clearTimeout(dragTime);\r\n                dragTime = setTimeout(function () {\r\n                    isNotMove = true;\r\n                }, 100);\r\n            });\r\n        });\r\n\r\n\r\n        //切换\r\n        imgDom.click(function (e) {\r\n            if (isNotMove) {\r\n                if (!showImg(++index)) {\r\n                    index--;\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n        ctrl_right.click(function (e) {\r\n            if (!showImg(++index)) {\r\n                index--;\r\n            }\r\n            e.stopPropagation();\r\n\r\n        });\r\n\r\n\r\n        ctrl_left.click(function (e) {\r\n            if (!showImg(--index)) {\r\n                index++;\r\n            }\r\n            e.stopPropagation();\r\n        });\r\n\r\n\r\n        imgDom.bind('mousewheel', function (event) {\r\n            event.preventDefault();\r\n            var direction = event.originalEvent.wheelDelta;\r\n\r\n            if (direction == 120) {\r\n                if (weight < maxWeight) {\r\n                    weight += 0.1;\r\n                }\r\n            } else if (direction == -120) {\r\n                if (weight > 0.5) {\r\n                    weight -= 0.1;\r\n                }\r\n            }\r\n\r\n            handlerImgScale();\r\n\r\n\r\n//                console.log(event.deltaY, event.deltaFactor, event.originalEvent.deltaMode, event.originalEvent.wheelDelta);\r\n        });\r\n\r\n\r\n        ctrl_recover.click(function () {\r\n            handerImgRecover();\r\n        });\r\n\r\n        ctrl_magnify.click(function () {\r\n            if (weight < maxWeight) {\r\n                weight += 0.1;\r\n            }\r\n            handlerImgScale();\r\n        });\r\n\r\n        ctrl_shrink.click(function () {\r\n            if (weight > 0.5) {\r\n                weight -= 0.1;\r\n            }\r\n            handlerImgScale();\r\n        });\r\n\r\n        ctrl_rotate.click(function () {\r\n            fnRotateScale(imgDom[0], rotate += 90);\r\n        });\r\n\r\n\r\n    }\r\n\r\n    function handlerImgScale() {\r\n        imgDom.css('width', showWidth * weight);\r\n        imgDom.css('height', showHeight * weight);\r\n        imgDom.css('max-width', 'none');\r\n        imgDom.css('max-height', 'none');\r\n        imgDom.css('margin-top', calcuImgTop());\r\n    }\r\n\r\n\r\n    function buildHtml() {\r\n        global = $('<div>').appendTo(\"body\");\r\n        global.css({\r\n            'background': 'rgba(0,0,0,0.5)',\r\n            'position': 'fixed',\r\n            'top': '0',\r\n            'bottom': '0',\r\n            'left': '0',\r\n            'right': '0',\r\n            'z-index': '9999',\r\n            'display': 'none'\r\n        });\r\n\r\n        dialog = $('<div>').appendTo(global);\r\n        dialog.css({\r\n            'width': '70%',\r\n            'position': 'relative',\r\n            'min-width': '500px',\r\n            'margin': '0% auto',\r\n            'padding': '10px 0',\r\n            'height': '100%'\r\n        });\r\n\r\n\r\n        detail = $('<div>').appendTo(dialog);\r\n        detail.css({\r\n            'width': '30%',\r\n            'background': '#ddd',\r\n            'display': 'none',\r\n//                'overflow':'hidden',\r\n            'height': '100%',\r\n            'float': 'left',\r\n            'box-sizing': 'border-box',\r\n            'padding': '1%'\r\n        });\r\n\r\n        view = $('<div>').appendTo(dialog);\r\n        view.css({\r\n            'background': '#000',\r\n            'width': '100%',\r\n            'padding': '1% 1% 50px 1%',\r\n            'box-sizing': 'border-box',\r\n            'overflow': 'hidden',\r\n            'height': '100%',\r\n            'user-select': 'none',\r\n            'text-align': 'center',\r\n            'position': 'relative',\r\n            'line-height': '100%'\r\n        });\r\n\r\n\r\n        imgDom = $('<img>').appendTo(view);\r\n        imgDom.css({\r\n            'transition': 'transform 0.5s',\r\n            'cursor': 'pointer'\r\n        });\r\n\r\n        view_ctrl = $('<div>').appendTo(view);\r\n        view_ctrl.css({\r\n            'position': 'absolute',\r\n            'bottom': '5px',\r\n            'background': '#000',\r\n            'width': '98%'\r\n        });\r\n\r\n\r\n        ctrl_recover = $('<span class=\"x-imgView-recover\">').appendTo(view_ctrl);\r\n        ctrl_recover.css({\r\n            'display': 'inline-block',\r\n            'width': '22px',\r\n            'height': '19px',\r\n            'margin': '10px',\r\n            'cursor': 'pointer'\r\n        });\r\n\r\n        ctrl_magnify = $('<span class=\"x-imgView-magnify\">').appendTo(view_ctrl);\r\n        ctrl_magnify.css({\r\n            'display': 'inline-block',\r\n            'width': '22px',\r\n            'height': '20px',\r\n            'margin': '10px',\r\n            'cursor': 'pointer'\r\n        });\r\n\r\n        ctrl_shrink = $('<span class=\"x-imgView-shrink\">').appendTo(view_ctrl);\r\n        ctrl_shrink.css({\r\n            'display': 'inline-block',\r\n            'width': '21px',\r\n            'height': '20px',\r\n            'margin': '10px',\r\n            'cursor': 'pointer'\r\n        });\r\n\r\n        ctrl_rotate = $('<span class=\"x-imgView-rotate\">').appendTo(view_ctrl);\r\n        ctrl_rotate.css({\r\n            'display': 'inline-block',\r\n            'width': '20px',\r\n            'height': '20px',\r\n            'margin': '10px',\r\n            'cursor': 'pointer'\r\n        });\r\n\r\n\r\n        ctrl_left = $('<span class=\"x-imgView-left\">').appendTo(view);\r\n        ctrl_left.css({\r\n            'display': 'inline-block',\r\n            'position': 'absolute',\r\n            'width': '25px',\r\n            'height': '43px',\r\n            'left': '1%',\r\n            'top': '48%',\r\n            'cursor': 'pointer'\r\n        });\r\n\r\n        ctrl_right = $('<span class=\"x-imgView-right\">').appendTo(view);\r\n        ctrl_right.css({\r\n            'display': 'inline-block',\r\n            'position': 'absolute',\r\n            'width': '25px',\r\n            'height': '43px',\r\n            'cursor': 'pointer',\r\n            'right': '1%',\r\n            'top': '48%'\r\n        });\r\n\r\n        ctrl_close = $('<span class=\"x-imgView-close\">').appendTo(dialog);\r\n        ctrl_close.css({\r\n            'display': 'inline-block',\r\n            'position': 'absolute',\r\n            'width': '30px',\r\n            'height': '30px',\r\n            'cursor': 'pointer',\r\n            'right': '-14px',\r\n            'top': '0'\r\n        });\r\n\r\n\r\n        loading = $('<span class=\"x-imgView-loading\">').appendTo(view);\r\n        loading.css({\r\n            'position': 'absolute',\r\n            'top': '48%',\r\n            'left': '50%',\r\n            'width': '40px',\r\n            'height': '40px',\r\n            'margin-left': '-30px',\r\n            'display': 'none'\r\n        });\r\n\r\n\r\n    }\r\n\r\n    function handerImgRecover() {\r\n        //重新调整到初始位置\r\n        imgDom.css({\r\n            'max-height': '100%',\r\n            'max-width': '100%',\r\n            'margin-left': '0',\r\n            'width': 'initial',\r\n            'height': 'initial'\r\n        });\r\n        //改变宽高之后才能算出正确的 margin-top\r\n        imgDom.css({\r\n            'margin-top': calcuImgTop()\r\n        });\r\n        weight = 1;\r\n        fnRotateScale(imgDom[0], rotate = 0);\r\n    }\r\n\r\n    var _is_init = false;\r\n\r\n    function init() {\r\n        if (!_is_init) {\r\n            buildHtml();\r\n            bindEVent();\r\n            _is_init = true;\r\n        }\r\n    }\r\n\r\n\r\n    //应该是load img   load完了应该才是 showimg\r\n    function showImg(index) {\r\n        if (!imgs[index]) {\r\n            return false;\r\n        }\r\n\r\n        handerImgRecover();\r\n        //判断左右两个按钮\r\n        if (imgs.length == 0) {\r\n            ctrl_right.hide();\r\n            ctrl_left.hide();\r\n\r\n        } else if (imgs.length == 1) {\r\n            ctrl_right.hide();\r\n            ctrl_left.hide();\r\n        } else if (index == 0) {\r\n            ctrl_left.hide();\r\n            ctrl_right.show();\r\n        } else if (index == imgs.length - 1) {\r\n            ctrl_right.hide();\r\n            ctrl_left.show();\r\n        } else {\r\n            ctrl_left.show();\r\n            ctrl_right.show();\r\n        }\r\n\r\n        global.show();\r\n        if (imgs.length) {\r\n            loading.show();\r\n        }\r\n        imgDom.hide();\r\n        onSwitch(index);\r\n        imageObj.src = imgs[index];\r\n        return true;\r\n\r\n    }\r\n\r\n\r\n    function fnRotateScale(dom, angle, scale) {\r\n        if (dom && dom.nodeType === 1) {\r\n            angle = parseFloat(angle) || 0;\r\n            scale = parseFloat(scale) || 1;\r\n            if (typeof(angle) === \"number\") {\r\n                //IE\r\n                var rad = angle * (Math.PI / 180);\r\n                var m11 = Math.cos(rad) * scale, m12 = -1 * Math.sin(rad) * scale, m21 = Math.sin(rad) * scale;\r\n                dom.style.filter = \"progid:DXImageTransform.Microsoft.Matrix(M11=\" + m11 + \",M12=\" + m12 + \",M21=\" + m21 + \",M22=\" + m11 + \",SizingMethod='auto expand')\";\r\n                //Modern\r\n                dom.style.MozTransform = \"rotate(\" + angle + \"deg) scale(\" + scale + \")\";\r\n                dom.style.WebkitTransform = \"rotate(\" + angle + \"deg) scale(\" + scale + \")\";\r\n                dom.style.OTransform = \"rotate(\" + angle + \"deg) scale(\" + scale + \")\";\r\n                dom.style.Transform = \"rotate(\" + angle + \"deg) scale(\" + scale + \")\";\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    window.xImgView = function (option) {\r\n        init();\r\n        imgs = option.imgs;\r\n        zIndex = option.zIndex || 2000;\r\n        infoDom = option.infoDom;\r\n        if (infoDom) {\r\n            detail.show();\r\n            detail.html(infoDom);\r\n            $(infoDom).show();\r\n            view.css('width', '70%');\r\n        }\r\n        onSwitch = option.onSwitch || function () {\r\n            };\r\n        showImg(index = 0);\r\n    };\r\n\r\n\r\n    $(document).ready(function () {\r\n        //自动定义\r\n        $('body').on('click', '.x-imgView .x-imgView-item', function () {\r\n            init();\r\n            imgs = [];\r\n            $.each($(this).parent().children(), function (i) {\r\n                imgs[i] = $(this).attr('x-imgView-src');\r\n            });\r\n            showImg(index = $(this).index());\r\n        });\r\n\r\n\r\n    });\r\n\r\n\r\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9pbWdWaWV3L2ltZ1ZpZXcuanM/NDY1YiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7OztBQUdBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsNkRBQTZEOztBQUU3RCxnQkFBZ0I7QUFDaEIsZUFBZTtBQUNmLDhCQUE4QjtBQUM5QixrQkFBa0I7QUFDbEIsZ0JBQWdCO0FBQ2hCLCtCQUErQjtBQUMvQixrQkFBa0I7QUFDbEIsa0JBQWtCO0FBQ2xCLG1CQUFtQjtBQUNuQixtQkFBbUI7QUFDbkIseUJBQXlCO0FBQ3pCLGlCQUFpQjtBQUNqQix1QkFBdUI7O0FBRXZCLGVBQWU7QUFDZjtBQUNBLE1BQU07OztBQUdOO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsU0FBUzs7O0FBR1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOzs7QUFHVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFNBQVM7OztBQUdUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOzs7QUFHVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7OztBQUdBO0FBQ0EsU0FBUzs7O0FBR1Q7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBLFNBQVM7OztBQUdUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7O0FBR1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7OztBQUdUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOzs7QUFHVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7OztBQUdUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOzs7QUFHVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOzs7QUFHVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTOzs7QUFHVCxLQUFLOzs7QUFHTCxDQUFDIiwiZmlsZSI6IjExLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQWRtaW5pc3RyYXRvciBvbiAyMDE2LzExLzQuXHJcbiAqL1xyXG5cclxuXHJcbjsoZnVuY3Rpb24gKGZhY3RvcnkpIHtcclxuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZVsnYW1kJ10pIHtcclxuICAgICAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXHJcbiAgICAgICAgZGVmaW5lKFsnanF1ZXJ5J10sIGZhY3RvcnkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBCcm93c2VyIGdsb2JhbHNcclxuICAgICAgICBmYWN0b3J5KGpRdWVyeSk7XHJcbiAgICB9XHJcbn0pKGZ1bmN0aW9uICgkKSB7XHJcbiAgICB2YXIgZ2xvYmFsLCBkaWFsb2csIHZpZXcsIHZpZXdfY3RybCwgY3RybF9yaWdodCwgY3RybF9sZWZ0LCBjdHJsX2Nsb3NlLCBkZXRhaWw7XHJcbiAgICB2YXIgY3RybF9tYWduaWZ5LCBjdHJsX3NocmluaywgY3RybF9yb3RhdGUsIGN0cmxfcmVjb3ZlcjsgICAvL+aUvuWkp+e8qeWwj+aXi+i9rOWbnuWkjSDmjInpkq5cclxuXHJcbiAgICB2YXIgbG9hZGluZzsgICAvL+etieW+heWbvueJh1xyXG4gICAgdmFyIGltZ0RvbTsgICAvL2ltZ0RvbVxyXG4gICAgdmFyIHNob3dXaWR0aCwgc2hvd0hlaWdodDsgICAvL+WbvuWDj+WcqHZpZXcg5Lit5pi+56S655qE5a696auYXHJcbiAgICB2YXIgaW1ncyA9IFtdOyAgIC8v6KaB5pi+56S655qE5Zu+5YOP5LusXHJcbiAgICB2YXIgaW5mb0RvbTsgIC8v6KaB5pi+56S655qE5L+h5oGvXHJcbiAgICB2YXIgaW1hZ2VPYmogPSBuZXcgSW1hZ2UoKTsgLy/nlKjmnaXliqDovb3lm77niYfnmoTlr7nosaFcclxuICAgIHZhciBpbmRleCA9IDE7ICAgLy/lsZXnpLrnrKzlh6DkuKrlm77niYdcclxuICAgIHZhciBtYXhXZWlnaHQ7IC8v5Zu+54mH5pyA5aSn5pS+5aSn57O75pWwICAvL+eUseS6juWbvueJh+WPr+iDveS4gHNob3cg5bCx6KKr57yp5bCP5LqGICDogIzmiJHku6znmoTmlL7lpKfns7vmlbDmmK/pkojlr7nljp/lm77lpKflsI9cclxuICAgIHZhciB3ZWlnaHQgPSAxOyAgLy/lm77niYfmlL7lpKfnvKnlsI/ns7vmlbBcclxuICAgIHZhciByb3RhdGUgPSAwOyAgLy/lm77niYfml4vovazluqbmlbBcclxuICAgIHZhciBpc05vdE1vdmUgPSB0cnVlOyAgIC8v5ouW5ou95Zu+54mH5pe2IOS4jeWTjeW6lOeCueWHu+S6i+S7tiDnmoTlvIDlhbNcclxuICAgIHZhciBkcmFnVGltZTsgICAvL+aLluaLveWbvueJh+aXtiDlrprml7blmahcclxuICAgIHZhciBzdGFydFgsIHN0YXJ0WTsgIC8v5ouW5ou95Zu+54mHXHJcblxyXG4gICAgdmFyIHpJbmRleDsgIC8v6L+Y5pyq5oqV5YWl5L2/55SoXHJcbiAgICB2YXIgb25Td2l0Y2ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB9OyAgLy/liIfmjaLlm77niYfnmoTlh73mlbBcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gY2FsY3VJbWdUb3AoKSB7XHJcbiAgICAgICAgdmFyIG9mZnNldCA9IHZpZXcuaGVpZ2h0KCkgLSBpbWdEb20uaGVpZ2h0KCk7XHJcbiAgICAgICAgcmV0dXJuIG9mZnNldCAvIDI7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2FsY3VJbWdXSCgpIHtcclxuLy8gICAgICAgICAgICAvL+iuoeeul+WcqHZpZXfkuK3nmoQgIOWbvuWDj+eahOWuvemrmCAg77yI5Y+v6IO95piv5Y6f5Zu+5aSn5bCPICDlj6/og73mmK/ooqttYXgtaGVpZ2h0IG1heC13aWR0aCDlpITnkIbov4fnmoTvvIlcclxuLy8gICAgICAgICAgICBpZihpbWFnZS53aWR0aD52aWV3LndpZHRoKCkpe1xyXG4vLyAgICAgICAgICAgICAgICBzaG93V2lkdGg9dmlldy53aWR0aCgpO1xyXG4vLyAgICAgICAgICAgICAgICBzaG93SGVpZ2h0PWltYWdlLmhlaWdodCp2aWV3LndpZHRoKCkvaW1hZ2Uud2lkdGg7XHJcbi8vICAgICAgICAgICAgfWVsc2UgaWYoaW1hZ2UuaGVpZ2h0PnZpZXcuaGVpZ2h0KCkpe1xyXG4vLyAgICAgICAgICAgICAgICBzaG93SGVpZ2h0PXZpZXcuaGVpZ2h0KCk7XHJcbi8vICAgICAgICAgICAgICAgIHNob3dXaWR0aD1pbWFnZS53aWR0aCp2aWV3LmhlaWdodCgpL2ltYWdlLmhlaWdodDtcclxuLy8gICAgICAgICAgICB9ZWxzZXtcclxuLy8gICAgICAgICAgICAgICAgc2hvd0hlaWdodD1pbWFnZS5oZWlnaHQ7XHJcbi8vICAgICAgICAgICAgICAgIHNob3dXaWR0aD1pbWFnZS53aWR0aDtcclxuLy8gICAgICAgICAgICB9XHJcbiAgICAgICAgc2hvd0hlaWdodCA9IGltZ0RvbS5oZWlnaHQoKTtcclxuICAgICAgICBzaG93V2lkdGggPSBpbWdEb20ud2lkdGgoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBkcmFnSW1nKGUpIHtcclxuICAgICAgICB2YXIgb2Zmc2V0WSA9IHN0YXJ0WSAtIGUucGFnZVk7XHJcbiAgICAgICAgdmFyIG9mZnNldFggPSBzdGFydFggLSBlLnBhZ2VYO1xyXG5cclxuICAgICAgICBpbWdEb20uY3NzKCdtYXJnaW4tdG9wJywgLW9mZnNldFkpO1xyXG4gICAgICAgIGltZ0RvbS5jc3MoJ21hcmdpbi1sZWZ0JywgLW9mZnNldFgpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGJpbmRFVmVudCgpIHtcclxuICAgICAgICAvL+WbvueJh+ivu+WPllxyXG4gICAgICAgIGltYWdlT2JqLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaW1nRG9tLnNob3coKTtcclxuICAgICAgICAgICAgbG9hZGluZy5oaWRlKCk7XHJcbiAgICAgICAgICAgIGltZ0RvbS5wcm9wKCdzcmMnLCBpbWFnZU9iai5zcmMpO1xyXG4gICAgICAgICAgICBpbWdEb20uY3NzKHtcclxuICAgICAgICAgICAgICAgICdtYXJnaW4tdG9wJzogY2FsY3VJbWdUb3AoKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbWF4V2VpZ2h0ID0gKGltYWdlT2JqLndpZHRoIC8gaW1nRG9tLndpZHRoKCkpICogMS41O1xyXG4gICAgICAgICAgICBjYWxjdUltZ1dIKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy/pmpDol49pbWd2aWV3XHJcbiAgICAgICAgZ2xvYmFsLmNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGlmIChpc05vdE1vdmUpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzID09PSBlLnRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlT2JqLnNyYyA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY3RybF9jbG9zZS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBpZiAoaXNOb3RNb3ZlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcyA9PT0gZS50YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICBnbG9iYWwuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlT2JqLnNyYyA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8v5ouW5ou9XHJcbiAgICAgICAgaW1nRG9tLmJpbmQoJ21vdXNlZG93bicsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgc3RhcnRYID0gZS5wYWdlWCAtIHBhcnNlSW50KGltZ0RvbS5jc3MoJ21hcmdpbi1sZWZ0JykpO1xyXG4gICAgICAgICAgICBzdGFydFkgPSBlLnBhZ2VZIC0gcGFyc2VJbnQoaW1nRG9tLmNzcygnbWFyZ2luLXRvcCcpKTtcclxuICAgICAgICAgICAgJChkb2N1bWVudCkuYmluZCgnbW91c2Vtb3ZlJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICQoJ2JvZHknKS5jc3MoJ2N1cnNvcicsICdtb3ZlJyk7XHJcbiAgICAgICAgICAgICAgICBpc05vdE1vdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGRyYWdJbWcoZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkKGRvY3VtZW50KS5iaW5kKCdtb3VzZXVwJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLnVuYmluZCgnbW91c2Vtb3ZlJyk7XHJcbiAgICAgICAgICAgICAgICAkKCdib2R5JykuY3NzKCdjdXJzb3InLCAnaW5pdGlhbCcpO1xyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGRyYWdUaW1lKTtcclxuICAgICAgICAgICAgICAgIGRyYWdUaW1lID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNOb3RNb3ZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgLy/liIfmjaJcclxuICAgICAgICBpbWdEb20uY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKGlzTm90TW92ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzaG93SW1nKCsraW5kZXgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXgtLTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgY3RybF9yaWdodC5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBpZiAoIXNob3dJbWcoKytpbmRleCkpIHtcclxuICAgICAgICAgICAgICAgIGluZGV4LS07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICBjdHJsX2xlZnQuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKCFzaG93SW1nKC0taW5kZXgpKSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICBpbWdEb20uYmluZCgnbW91c2V3aGVlbCcsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gZXZlbnQub3JpZ2luYWxFdmVudC53aGVlbERlbHRhO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PSAxMjApIHtcclxuICAgICAgICAgICAgICAgIGlmICh3ZWlnaHQgPCBtYXhXZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICB3ZWlnaHQgKz0gMC4xO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PSAtMTIwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAod2VpZ2h0ID4gMC41KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0IC09IDAuMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaGFuZGxlckltZ1NjYWxlKCk7XHJcblxyXG5cclxuLy8gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXZlbnQuZGVsdGFZLCBldmVudC5kZWx0YUZhY3RvciwgZXZlbnQub3JpZ2luYWxFdmVudC5kZWx0YU1vZGUsIGV2ZW50Lm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICBjdHJsX3JlY292ZXIuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBoYW5kZXJJbWdSZWNvdmVyKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGN0cmxfbWFnbmlmeS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh3ZWlnaHQgPCBtYXhXZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgIHdlaWdodCArPSAwLjE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaGFuZGxlckltZ1NjYWxlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGN0cmxfc2hyaW5rLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHdlaWdodCA+IDAuNSkge1xyXG4gICAgICAgICAgICAgICAgd2VpZ2h0IC09IDAuMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBoYW5kbGVySW1nU2NhbGUoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY3RybF9yb3RhdGUuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBmblJvdGF0ZVNjYWxlKGltZ0RvbVswXSwgcm90YXRlICs9IDkwKTtcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGhhbmRsZXJJbWdTY2FsZSgpIHtcclxuICAgICAgICBpbWdEb20uY3NzKCd3aWR0aCcsIHNob3dXaWR0aCAqIHdlaWdodCk7XHJcbiAgICAgICAgaW1nRG9tLmNzcygnaGVpZ2h0Jywgc2hvd0hlaWdodCAqIHdlaWdodCk7XHJcbiAgICAgICAgaW1nRG9tLmNzcygnbWF4LXdpZHRoJywgJ25vbmUnKTtcclxuICAgICAgICBpbWdEb20uY3NzKCdtYXgtaGVpZ2h0JywgJ25vbmUnKTtcclxuICAgICAgICBpbWdEb20uY3NzKCdtYXJnaW4tdG9wJywgY2FsY3VJbWdUb3AoKSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGJ1aWxkSHRtbCgpIHtcclxuICAgICAgICBnbG9iYWwgPSAkKCc8ZGl2PicpLmFwcGVuZFRvKFwiYm9keVwiKTtcclxuICAgICAgICBnbG9iYWwuY3NzKHtcclxuICAgICAgICAgICAgJ2JhY2tncm91bmQnOiAncmdiYSgwLDAsMCwwLjUpJyxcclxuICAgICAgICAgICAgJ3Bvc2l0aW9uJzogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgJ3RvcCc6ICcwJyxcclxuICAgICAgICAgICAgJ2JvdHRvbSc6ICcwJyxcclxuICAgICAgICAgICAgJ2xlZnQnOiAnMCcsXHJcbiAgICAgICAgICAgICdyaWdodCc6ICcwJyxcclxuICAgICAgICAgICAgJ3otaW5kZXgnOiAnOTk5OScsXHJcbiAgICAgICAgICAgICdkaXNwbGF5JzogJ25vbmUnXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGRpYWxvZyA9ICQoJzxkaXY+JykuYXBwZW5kVG8oZ2xvYmFsKTtcclxuICAgICAgICBkaWFsb2cuY3NzKHtcclxuICAgICAgICAgICAgJ3dpZHRoJzogJzcwJScsXHJcbiAgICAgICAgICAgICdwb3NpdGlvbic6ICdyZWxhdGl2ZScsXHJcbiAgICAgICAgICAgICdtaW4td2lkdGgnOiAnNTAwcHgnLFxyXG4gICAgICAgICAgICAnbWFyZ2luJzogJzAlIGF1dG8nLFxyXG4gICAgICAgICAgICAncGFkZGluZyc6ICcxMHB4IDAnLFxyXG4gICAgICAgICAgICAnaGVpZ2h0JzogJzEwMCUnXHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICBkZXRhaWwgPSAkKCc8ZGl2PicpLmFwcGVuZFRvKGRpYWxvZyk7XHJcbiAgICAgICAgZGV0YWlsLmNzcyh7XHJcbiAgICAgICAgICAgICd3aWR0aCc6ICczMCUnLFxyXG4gICAgICAgICAgICAnYmFja2dyb3VuZCc6ICcjZGRkJyxcclxuICAgICAgICAgICAgJ2Rpc3BsYXknOiAnbm9uZScsXHJcbi8vICAgICAgICAgICAgICAgICdvdmVyZmxvdyc6J2hpZGRlbicsXHJcbiAgICAgICAgICAgICdoZWlnaHQnOiAnMTAwJScsXHJcbiAgICAgICAgICAgICdmbG9hdCc6ICdsZWZ0JyxcclxuICAgICAgICAgICAgJ2JveC1zaXppbmcnOiAnYm9yZGVyLWJveCcsXHJcbiAgICAgICAgICAgICdwYWRkaW5nJzogJzElJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2aWV3ID0gJCgnPGRpdj4nKS5hcHBlbmRUbyhkaWFsb2cpO1xyXG4gICAgICAgIHZpZXcuY3NzKHtcclxuICAgICAgICAgICAgJ2JhY2tncm91bmQnOiAnIzAwMCcsXHJcbiAgICAgICAgICAgICd3aWR0aCc6ICcxMDAlJyxcclxuICAgICAgICAgICAgJ3BhZGRpbmcnOiAnMSUgMSUgNTBweCAxJScsXHJcbiAgICAgICAgICAgICdib3gtc2l6aW5nJzogJ2JvcmRlci1ib3gnLFxyXG4gICAgICAgICAgICAnb3ZlcmZsb3cnOiAnaGlkZGVuJyxcclxuICAgICAgICAgICAgJ2hlaWdodCc6ICcxMDAlJyxcclxuICAgICAgICAgICAgJ3VzZXItc2VsZWN0JzogJ25vbmUnLFxyXG4gICAgICAgICAgICAndGV4dC1hbGlnbic6ICdjZW50ZXInLFxyXG4gICAgICAgICAgICAncG9zaXRpb24nOiAncmVsYXRpdmUnLFxyXG4gICAgICAgICAgICAnbGluZS1oZWlnaHQnOiAnMTAwJSdcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIGltZ0RvbSA9ICQoJzxpbWc+JykuYXBwZW5kVG8odmlldyk7XHJcbiAgICAgICAgaW1nRG9tLmNzcyh7XHJcbiAgICAgICAgICAgICd0cmFuc2l0aW9uJzogJ3RyYW5zZm9ybSAwLjVzJyxcclxuICAgICAgICAgICAgJ2N1cnNvcic6ICdwb2ludGVyJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2aWV3X2N0cmwgPSAkKCc8ZGl2PicpLmFwcGVuZFRvKHZpZXcpO1xyXG4gICAgICAgIHZpZXdfY3RybC5jc3Moe1xyXG4gICAgICAgICAgICAncG9zaXRpb24nOiAnYWJzb2x1dGUnLFxyXG4gICAgICAgICAgICAnYm90dG9tJzogJzVweCcsXHJcbiAgICAgICAgICAgICdiYWNrZ3JvdW5kJzogJyMwMDAnLFxyXG4gICAgICAgICAgICAnd2lkdGgnOiAnOTglJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgY3RybF9yZWNvdmVyID0gJCgnPHNwYW4gY2xhc3M9XCJ4LWltZ1ZpZXctcmVjb3ZlclwiPicpLmFwcGVuZFRvKHZpZXdfY3RybCk7XHJcbiAgICAgICAgY3RybF9yZWNvdmVyLmNzcyh7XHJcbiAgICAgICAgICAgICdkaXNwbGF5JzogJ2lubGluZS1ibG9jaycsXHJcbiAgICAgICAgICAgICd3aWR0aCc6ICcyMnB4JyxcclxuICAgICAgICAgICAgJ2hlaWdodCc6ICcxOXB4JyxcclxuICAgICAgICAgICAgJ21hcmdpbic6ICcxMHB4JyxcclxuICAgICAgICAgICAgJ2N1cnNvcic6ICdwb2ludGVyJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjdHJsX21hZ25pZnkgPSAkKCc8c3BhbiBjbGFzcz1cIngtaW1nVmlldy1tYWduaWZ5XCI+JykuYXBwZW5kVG8odmlld19jdHJsKTtcclxuICAgICAgICBjdHJsX21hZ25pZnkuY3NzKHtcclxuICAgICAgICAgICAgJ2Rpc3BsYXknOiAnaW5saW5lLWJsb2NrJyxcclxuICAgICAgICAgICAgJ3dpZHRoJzogJzIycHgnLFxyXG4gICAgICAgICAgICAnaGVpZ2h0JzogJzIwcHgnLFxyXG4gICAgICAgICAgICAnbWFyZ2luJzogJzEwcHgnLFxyXG4gICAgICAgICAgICAnY3Vyc29yJzogJ3BvaW50ZXInXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGN0cmxfc2hyaW5rID0gJCgnPHNwYW4gY2xhc3M9XCJ4LWltZ1ZpZXctc2hyaW5rXCI+JykuYXBwZW5kVG8odmlld19jdHJsKTtcclxuICAgICAgICBjdHJsX3Nocmluay5jc3Moe1xyXG4gICAgICAgICAgICAnZGlzcGxheSc6ICdpbmxpbmUtYmxvY2snLFxyXG4gICAgICAgICAgICAnd2lkdGgnOiAnMjFweCcsXHJcbiAgICAgICAgICAgICdoZWlnaHQnOiAnMjBweCcsXHJcbiAgICAgICAgICAgICdtYXJnaW4nOiAnMTBweCcsXHJcbiAgICAgICAgICAgICdjdXJzb3InOiAncG9pbnRlcidcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY3RybF9yb3RhdGUgPSAkKCc8c3BhbiBjbGFzcz1cIngtaW1nVmlldy1yb3RhdGVcIj4nKS5hcHBlbmRUbyh2aWV3X2N0cmwpO1xyXG4gICAgICAgIGN0cmxfcm90YXRlLmNzcyh7XHJcbiAgICAgICAgICAgICdkaXNwbGF5JzogJ2lubGluZS1ibG9jaycsXHJcbiAgICAgICAgICAgICd3aWR0aCc6ICcyMHB4JyxcclxuICAgICAgICAgICAgJ2hlaWdodCc6ICcyMHB4JyxcclxuICAgICAgICAgICAgJ21hcmdpbic6ICcxMHB4JyxcclxuICAgICAgICAgICAgJ2N1cnNvcic6ICdwb2ludGVyJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgY3RybF9sZWZ0ID0gJCgnPHNwYW4gY2xhc3M9XCJ4LWltZ1ZpZXctbGVmdFwiPicpLmFwcGVuZFRvKHZpZXcpO1xyXG4gICAgICAgIGN0cmxfbGVmdC5jc3Moe1xyXG4gICAgICAgICAgICAnZGlzcGxheSc6ICdpbmxpbmUtYmxvY2snLFxyXG4gICAgICAgICAgICAncG9zaXRpb24nOiAnYWJzb2x1dGUnLFxyXG4gICAgICAgICAgICAnd2lkdGgnOiAnMjVweCcsXHJcbiAgICAgICAgICAgICdoZWlnaHQnOiAnNDNweCcsXHJcbiAgICAgICAgICAgICdsZWZ0JzogJzElJyxcclxuICAgICAgICAgICAgJ3RvcCc6ICc0OCUnLFxyXG4gICAgICAgICAgICAnY3Vyc29yJzogJ3BvaW50ZXInXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGN0cmxfcmlnaHQgPSAkKCc8c3BhbiBjbGFzcz1cIngtaW1nVmlldy1yaWdodFwiPicpLmFwcGVuZFRvKHZpZXcpO1xyXG4gICAgICAgIGN0cmxfcmlnaHQuY3NzKHtcclxuICAgICAgICAgICAgJ2Rpc3BsYXknOiAnaW5saW5lLWJsb2NrJyxcclxuICAgICAgICAgICAgJ3Bvc2l0aW9uJzogJ2Fic29sdXRlJyxcclxuICAgICAgICAgICAgJ3dpZHRoJzogJzI1cHgnLFxyXG4gICAgICAgICAgICAnaGVpZ2h0JzogJzQzcHgnLFxyXG4gICAgICAgICAgICAnY3Vyc29yJzogJ3BvaW50ZXInLFxyXG4gICAgICAgICAgICAncmlnaHQnOiAnMSUnLFxyXG4gICAgICAgICAgICAndG9wJzogJzQ4JSdcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY3RybF9jbG9zZSA9ICQoJzxzcGFuIGNsYXNzPVwieC1pbWdWaWV3LWNsb3NlXCI+JykuYXBwZW5kVG8oZGlhbG9nKTtcclxuICAgICAgICBjdHJsX2Nsb3NlLmNzcyh7XHJcbiAgICAgICAgICAgICdkaXNwbGF5JzogJ2lubGluZS1ibG9jaycsXHJcbiAgICAgICAgICAgICdwb3NpdGlvbic6ICdhYnNvbHV0ZScsXHJcbiAgICAgICAgICAgICd3aWR0aCc6ICczMHB4JyxcclxuICAgICAgICAgICAgJ2hlaWdodCc6ICczMHB4JyxcclxuICAgICAgICAgICAgJ2N1cnNvcic6ICdwb2ludGVyJyxcclxuICAgICAgICAgICAgJ3JpZ2h0JzogJy0xNHB4JyxcclxuICAgICAgICAgICAgJ3RvcCc6ICcwJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgbG9hZGluZyA9ICQoJzxzcGFuIGNsYXNzPVwieC1pbWdWaWV3LWxvYWRpbmdcIj4nKS5hcHBlbmRUbyh2aWV3KTtcclxuICAgICAgICBsb2FkaW5nLmNzcyh7XHJcbiAgICAgICAgICAgICdwb3NpdGlvbic6ICdhYnNvbHV0ZScsXHJcbiAgICAgICAgICAgICd0b3AnOiAnNDglJyxcclxuICAgICAgICAgICAgJ2xlZnQnOiAnNTAlJyxcclxuICAgICAgICAgICAgJ3dpZHRoJzogJzQwcHgnLFxyXG4gICAgICAgICAgICAnaGVpZ2h0JzogJzQwcHgnLFxyXG4gICAgICAgICAgICAnbWFyZ2luLWxlZnQnOiAnLTMwcHgnLFxyXG4gICAgICAgICAgICAnZGlzcGxheSc6ICdub25lJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaGFuZGVySW1nUmVjb3ZlcigpIHtcclxuICAgICAgICAvL+mHjeaWsOiwg+aVtOWIsOWIneWni+S9jee9rlxyXG4gICAgICAgIGltZ0RvbS5jc3Moe1xyXG4gICAgICAgICAgICAnbWF4LWhlaWdodCc6ICcxMDAlJyxcclxuICAgICAgICAgICAgJ21heC13aWR0aCc6ICcxMDAlJyxcclxuICAgICAgICAgICAgJ21hcmdpbi1sZWZ0JzogJzAnLFxyXG4gICAgICAgICAgICAnd2lkdGgnOiAnaW5pdGlhbCcsXHJcbiAgICAgICAgICAgICdoZWlnaHQnOiAnaW5pdGlhbCdcclxuICAgICAgICB9KTtcclxuICAgICAgICAvL+aUueWPmOWuvemrmOS5i+WQjuaJjeiDveeul+WHuuato+ehrueahCBtYXJnaW4tdG9wXHJcbiAgICAgICAgaW1nRG9tLmNzcyh7XHJcbiAgICAgICAgICAgICdtYXJnaW4tdG9wJzogY2FsY3VJbWdUb3AoKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHdlaWdodCA9IDE7XHJcbiAgICAgICAgZm5Sb3RhdGVTY2FsZShpbWdEb21bMF0sIHJvdGF0ZSA9IDApO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBfaXNfaW5pdCA9IGZhbHNlO1xyXG5cclxuICAgIGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgICAgICAgaWYgKCFfaXNfaW5pdCkge1xyXG4gICAgICAgICAgICBidWlsZEh0bWwoKTtcclxuICAgICAgICAgICAgYmluZEVWZW50KCk7XHJcbiAgICAgICAgICAgIF9pc19pbml0ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8v5bqU6K+l5pivbG9hZCBpbWcgICBsb2Fk5a6M5LqG5bqU6K+l5omN5pivIHNob3dpbWdcclxuICAgIGZ1bmN0aW9uIHNob3dJbWcoaW5kZXgpIHtcclxuICAgICAgICBpZiAoIWltZ3NbaW5kZXhdKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGhhbmRlckltZ1JlY292ZXIoKTtcclxuICAgICAgICAvL+WIpOaWreW3puWPs+S4pOS4quaMiemSrlxyXG4gICAgICAgIGlmIChpbWdzLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgIGN0cmxfcmlnaHQuaGlkZSgpO1xyXG4gICAgICAgICAgICBjdHJsX2xlZnQuaGlkZSgpO1xyXG5cclxuICAgICAgICB9IGVsc2UgaWYgKGltZ3MubGVuZ3RoID09IDEpIHtcclxuICAgICAgICAgICAgY3RybF9yaWdodC5oaWRlKCk7XHJcbiAgICAgICAgICAgIGN0cmxfbGVmdC5oaWRlKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpbmRleCA9PSAwKSB7XHJcbiAgICAgICAgICAgIGN0cmxfbGVmdC5oaWRlKCk7XHJcbiAgICAgICAgICAgIGN0cmxfcmlnaHQuc2hvdygpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaW5kZXggPT0gaW1ncy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgIGN0cmxfcmlnaHQuaGlkZSgpO1xyXG4gICAgICAgICAgICBjdHJsX2xlZnQuc2hvdygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGN0cmxfbGVmdC5zaG93KCk7XHJcbiAgICAgICAgICAgIGN0cmxfcmlnaHQuc2hvdygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZ2xvYmFsLnNob3coKTtcclxuICAgICAgICBpZiAoaW1ncy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgbG9hZGluZy5zaG93KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGltZ0RvbS5oaWRlKCk7XHJcbiAgICAgICAgb25Td2l0Y2goaW5kZXgpO1xyXG4gICAgICAgIGltYWdlT2JqLnNyYyA9IGltZ3NbaW5kZXhdO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gZm5Sb3RhdGVTY2FsZShkb20sIGFuZ2xlLCBzY2FsZSkge1xyXG4gICAgICAgIGlmIChkb20gJiYgZG9tLm5vZGVUeXBlID09PSAxKSB7XHJcbiAgICAgICAgICAgIGFuZ2xlID0gcGFyc2VGbG9hdChhbmdsZSkgfHwgMDtcclxuICAgICAgICAgICAgc2NhbGUgPSBwYXJzZUZsb2F0KHNjYWxlKSB8fCAxO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mKGFuZ2xlKSA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgICAgICAgICAgLy9JRVxyXG4gICAgICAgICAgICAgICAgdmFyIHJhZCA9IGFuZ2xlICogKE1hdGguUEkgLyAxODApO1xyXG4gICAgICAgICAgICAgICAgdmFyIG0xMSA9IE1hdGguY29zKHJhZCkgKiBzY2FsZSwgbTEyID0gLTEgKiBNYXRoLnNpbihyYWQpICogc2NhbGUsIG0yMSA9IE1hdGguc2luKHJhZCkgKiBzY2FsZTtcclxuICAgICAgICAgICAgICAgIGRvbS5zdHlsZS5maWx0ZXIgPSBcInByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5NYXRyaXgoTTExPVwiICsgbTExICsgXCIsTTEyPVwiICsgbTEyICsgXCIsTTIxPVwiICsgbTIxICsgXCIsTTIyPVwiICsgbTExICsgXCIsU2l6aW5nTWV0aG9kPSdhdXRvIGV4cGFuZCcpXCI7XHJcbiAgICAgICAgICAgICAgICAvL01vZGVyblxyXG4gICAgICAgICAgICAgICAgZG9tLnN0eWxlLk1velRyYW5zZm9ybSA9IFwicm90YXRlKFwiICsgYW5nbGUgKyBcImRlZykgc2NhbGUoXCIgKyBzY2FsZSArIFwiKVwiO1xyXG4gICAgICAgICAgICAgICAgZG9tLnN0eWxlLldlYmtpdFRyYW5zZm9ybSA9IFwicm90YXRlKFwiICsgYW5nbGUgKyBcImRlZykgc2NhbGUoXCIgKyBzY2FsZSArIFwiKVwiO1xyXG4gICAgICAgICAgICAgICAgZG9tLnN0eWxlLk9UcmFuc2Zvcm0gPSBcInJvdGF0ZShcIiArIGFuZ2xlICsgXCJkZWcpIHNjYWxlKFwiICsgc2NhbGUgKyBcIilcIjtcclxuICAgICAgICAgICAgICAgIGRvbS5zdHlsZS5UcmFuc2Zvcm0gPSBcInJvdGF0ZShcIiArIGFuZ2xlICsgXCJkZWcpIHNjYWxlKFwiICsgc2NhbGUgKyBcIilcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgd2luZG93LnhJbWdWaWV3ID0gZnVuY3Rpb24gKG9wdGlvbikge1xyXG4gICAgICAgIGluaXQoKTtcclxuICAgICAgICBpbWdzID0gb3B0aW9uLmltZ3M7XHJcbiAgICAgICAgekluZGV4ID0gb3B0aW9uLnpJbmRleCB8fCAyMDAwO1xyXG4gICAgICAgIGluZm9Eb20gPSBvcHRpb24uaW5mb0RvbTtcclxuICAgICAgICBpZiAoaW5mb0RvbSkge1xyXG4gICAgICAgICAgICBkZXRhaWwuc2hvdygpO1xyXG4gICAgICAgICAgICBkZXRhaWwuaHRtbChpbmZvRG9tKTtcclxuICAgICAgICAgICAgJChpbmZvRG9tKS5zaG93KCk7XHJcbiAgICAgICAgICAgIHZpZXcuY3NzKCd3aWR0aCcsICc3MCUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgb25Td2l0Y2ggPSBvcHRpb24ub25Td2l0Y2ggfHwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIHNob3dJbWcoaW5kZXggPSAwKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL+iHquWKqOWumuS5iVxyXG4gICAgICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnLngtaW1nVmlldyAueC1pbWdWaWV3LWl0ZW0nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGluaXQoKTtcclxuICAgICAgICAgICAgaW1ncyA9IFtdO1xyXG4gICAgICAgICAgICAkLmVhY2goJCh0aGlzKS5wYXJlbnQoKS5jaGlsZHJlbigpLCBmdW5jdGlvbiAoaSkge1xyXG4gICAgICAgICAgICAgICAgaW1nc1tpXSA9ICQodGhpcykuYXR0cigneC1pbWdWaWV3LXNyYycpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgc2hvd0ltZyhpbmRleCA9ICQodGhpcykuaW5kZXgoKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuICAgIH0pO1xyXG5cclxuXHJcbn0pO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvaW1nVmlldy9pbWdWaWV3LmpzXG4vLyBtb2R1bGUgaWQgPSAxMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 12 */
/***/ function(module, exports) {

	eval("module.exports = function() { throw new Error(\"define cannot be used indirect\"); };\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vYW1kLWRlZmluZS5qcz8wYmJhIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDZCQUE2QixtREFBbUQiLCJmaWxlIjoiMTIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkgeyB0aHJvdyBuZXcgRXJyb3IoXCJkZWZpbmUgY2Fubm90IGJlIHVzZWQgaW5kaXJlY3RcIik7IH07XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9idWlsZGluL2FtZC1kZWZpbmUuanNcbi8vIG1vZHVsZSBpZCA9IDEyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 13 */
/***/ function(module, exports) {

	eval("module.exports = window.$;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJ3aW5kb3cuJFwiP2Y4ZDIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHdpbmRvdy4kO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwid2luZG93LiRcIlxuLy8gbW9kdWxlIGlkID0gMTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 14 */
/***/ function(module, exports) {

	eval("/**\r\n * Created by Administrator on 2016/12/29.\r\n */\r\n\r\n;(function (window, $) {\r\n\r\n    window.xProgress2 = function (option) {\r\n        return new xProgress(option);\r\n    };\r\n\r\n    var xProgress = function (option) {\r\n\r\n        this._init(option);\r\n\r\n        return this;\r\n    };\r\n\r\n    xProgress.prototype = {\r\n        defaultOpt: {\r\n            wrap: '.x-progress-wrap',\r\n            pclass: 'x-progress-bar',\r\n            tclass: 'x-progress-only',\r\n            percentage: '0%',\r\n            onchange: function () {console.log('onchange')}\r\n        },\r\n        _init: function (option) {\r\n            this.option = $.extend(true, {}, this.defaultOpt, option);\r\n\r\n            if(typeof this.option.wrap === \"string\"){\r\n                this.wrap = $(this.option.wrap);\r\n            }else{\r\n                this.wrap = this.option.wrap;\r\n            }\r\n\r\n            if(typeof this.option.percentage === 'string'){\r\n                this._makeprogress();\r\n            }else{\r\n                // var that = this;\r\n                // $.each(this.percentage,function (index,item) {\r\n                //     that._makeprogress();\r\n                // });\r\n            }\r\n        },\r\n\r\n        _makeprogress: function () {\r\n\r\n            this.p = $('<div class=\"' + this.option.pclass + '\" ></div>');\r\n            this.t = $('<span class=\"' + this.option.tclass + '\" ></span>');\r\n            this.p.append(this.t);\r\n            this.percentage = this.option.percentage;\r\n\r\n            this.wrap.append(this.p);\r\n\r\n            this._observer(this,'percentage');\r\n            this._progress(this.percentage);\r\n        },\r\n\r\n        _observer: function (obj, k) {\r\n            var that = this;\r\n            var old = obj[k];\r\n            Object.defineProperty(obj, k, {\r\n                enumerable: true,\r\n                configurable: true,\r\n                get: function () {\r\n                    return old;\r\n                },\r\n                set: function (next) {\r\n                    if (next !== old) {\r\n                        that._progress(next, old);\r\n                    }\r\n                    old = next;\r\n                    this.option.onchange();\r\n                }\r\n            })\r\n        },\r\n        _progress: function (next, old) {\r\n            this.p.stop(true,true);\r\n            if(next==='0%'){\r\n                this.p.css({width: next});\r\n            }else{\r\n                this.p.animate({width: next},1000);\r\n            }\r\n            // this.p.css({width: next});\r\n            // this.p.width(next);\r\n            this.t.text(next);\r\n        },\r\n        _p:function () {\r\n        },\r\n        _pp:function(obj, next, old){\r\n            if(typeof obj.option.percentage === 'string'){\r\n                obj._p(obj, next, old);\r\n            }else{\r\n                if(typeof obj.option.percentage === 'object'){\r\n                    for (var i = 0, len = this.option.percentage; i < len; i++) {\r\n                        obj._p(this.option, next, old);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n})(window, jQuery);//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9wcm9ncmVzcy9wcm9ncmVzcy5qcz84MWQ3Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQyxTQUFTO0FBQ1Q7QUFDQSwyQ0FBMkM7O0FBRTNDO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBLFNBQVM7O0FBRVQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLFlBQVk7QUFDeEMsYUFBYTtBQUNiLGdDQUFnQyxZQUFZO0FBQzVDO0FBQ0EsMkJBQTJCLFlBQVk7QUFDdkM7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxpRUFBaUUsU0FBUztBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDIiwiZmlsZSI6IjE0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQWRtaW5pc3RyYXRvciBvbiAyMDE2LzEyLzI5LlxyXG4gKi9cclxuXHJcbjsoZnVuY3Rpb24gKHdpbmRvdywgJCkge1xyXG5cclxuICAgIHdpbmRvdy54UHJvZ3Jlc3MyID0gZnVuY3Rpb24gKG9wdGlvbikge1xyXG4gICAgICAgIHJldHVybiBuZXcgeFByb2dyZXNzKG9wdGlvbik7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciB4UHJvZ3Jlc3MgPSBmdW5jdGlvbiAob3B0aW9uKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX2luaXQob3B0aW9uKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG5cclxuICAgIHhQcm9ncmVzcy5wcm90b3R5cGUgPSB7XHJcbiAgICAgICAgZGVmYXVsdE9wdDoge1xyXG4gICAgICAgICAgICB3cmFwOiAnLngtcHJvZ3Jlc3Mtd3JhcCcsXHJcbiAgICAgICAgICAgIHBjbGFzczogJ3gtcHJvZ3Jlc3MtYmFyJyxcclxuICAgICAgICAgICAgdGNsYXNzOiAneC1wcm9ncmVzcy1vbmx5JyxcclxuICAgICAgICAgICAgcGVyY2VudGFnZTogJzAlJyxcclxuICAgICAgICAgICAgb25jaGFuZ2U6IGZ1bmN0aW9uICgpIHtjb25zb2xlLmxvZygnb25jaGFuZ2UnKX1cclxuICAgICAgICB9LFxyXG4gICAgICAgIF9pbml0OiBmdW5jdGlvbiAob3B0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9uID0gJC5leHRlbmQodHJ1ZSwge30sIHRoaXMuZGVmYXVsdE9wdCwgb3B0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIGlmKHR5cGVvZiB0aGlzLm9wdGlvbi53cmFwID09PSBcInN0cmluZ1wiKXtcclxuICAgICAgICAgICAgICAgIHRoaXMud3JhcCA9ICQodGhpcy5vcHRpb24ud3JhcCk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgdGhpcy53cmFwID0gdGhpcy5vcHRpb24ud3JhcDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYodHlwZW9mIHRoaXMub3B0aW9uLnBlcmNlbnRhZ2UgPT09ICdzdHJpbmcnKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21ha2Vwcm9ncmVzcygpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIC8vIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICAgICAgICAgIC8vICQuZWFjaCh0aGlzLnBlcmNlbnRhZ2UsZnVuY3Rpb24gKGluZGV4LGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICB0aGF0Ll9tYWtlcHJvZ3Jlc3MoKTtcclxuICAgICAgICAgICAgICAgIC8vIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgX21ha2Vwcm9ncmVzczogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5wID0gJCgnPGRpdiBjbGFzcz1cIicgKyB0aGlzLm9wdGlvbi5wY2xhc3MgKyAnXCIgPjwvZGl2PicpO1xyXG4gICAgICAgICAgICB0aGlzLnQgPSAkKCc8c3BhbiBjbGFzcz1cIicgKyB0aGlzLm9wdGlvbi50Y2xhc3MgKyAnXCIgPjwvc3Bhbj4nKTtcclxuICAgICAgICAgICAgdGhpcy5wLmFwcGVuZCh0aGlzLnQpO1xyXG4gICAgICAgICAgICB0aGlzLnBlcmNlbnRhZ2UgPSB0aGlzLm9wdGlvbi5wZXJjZW50YWdlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy53cmFwLmFwcGVuZCh0aGlzLnApO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fb2JzZXJ2ZXIodGhpcywncGVyY2VudGFnZScpO1xyXG4gICAgICAgICAgICB0aGlzLl9wcm9ncmVzcyh0aGlzLnBlcmNlbnRhZ2UpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIF9vYnNlcnZlcjogZnVuY3Rpb24gKG9iaiwgaykge1xyXG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZhciBvbGQgPSBvYmpba107XHJcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGssIHtcclxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2xkO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKG5leHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dCAhPT0gb2xkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuX3Byb2dyZXNzKG5leHQsIG9sZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIG9sZCA9IG5leHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb24ub25jaGFuZ2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIF9wcm9ncmVzczogZnVuY3Rpb24gKG5leHQsIG9sZCkge1xyXG4gICAgICAgICAgICB0aGlzLnAuc3RvcCh0cnVlLHRydWUpO1xyXG4gICAgICAgICAgICBpZihuZXh0PT09JzAlJyl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnAuY3NzKHt3aWR0aDogbmV4dH0pO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHRoaXMucC5hbmltYXRlKHt3aWR0aDogbmV4dH0sMTAwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gdGhpcy5wLmNzcyh7d2lkdGg6IG5leHR9KTtcclxuICAgICAgICAgICAgLy8gdGhpcy5wLndpZHRoKG5leHQpO1xyXG4gICAgICAgICAgICB0aGlzLnQudGV4dChuZXh0KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIF9wOmZ1bmN0aW9uICgpIHtcclxuICAgICAgICB9LFxyXG4gICAgICAgIF9wcDpmdW5jdGlvbihvYmosIG5leHQsIG9sZCl7XHJcbiAgICAgICAgICAgIGlmKHR5cGVvZiBvYmoub3B0aW9uLnBlcmNlbnRhZ2UgPT09ICdzdHJpbmcnKXtcclxuICAgICAgICAgICAgICAgIG9iai5fcChvYmosIG5leHQsIG9sZCk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgaWYodHlwZW9mIG9iai5vcHRpb24ucGVyY2VudGFnZSA9PT0gJ29iamVjdCcpe1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLm9wdGlvbi5wZXJjZW50YWdlOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLl9wKHRoaXMub3B0aW9uLCBuZXh0LCBvbGQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0pKHdpbmRvdywgalF1ZXJ5KTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzL3Byb2dyZXNzL3Byb2dyZXNzLmpzXG4vLyBtb2R1bGUgaWQgPSAxNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 15 */
/***/ function(module, exports, __webpack_require__) {

	eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\r\n * jQuery Validation Plugin v1.15.0\r\n *\r\n * http://jqueryvalidation.org/\r\n *\r\n * Copyright (c) 2016 Jörn Zaefferer\r\n * Released under the MIT license\r\n */\r\n(function( factory ) {\r\n\tif ( true ) {\r\n\t\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(13)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n\t} else if (typeof module === \"object\" && module.exports) {\r\n\t\tmodule.exports = factory( require( \"jquery\" ) );\r\n\t} else {\r\n\t\tfactory( jQuery );\r\n\t}\r\n}(function( $ ) {\r\n\r\n$.extend( $.fn, {\r\n\r\n\t// http://jqueryvalidation.org/validate/\r\n\tvalidate: function( options ) {\r\n\r\n\t\t// If nothing is selected, return nothing; can't chain anyway\r\n\t\tif ( !this.length ) {\r\n\t\t\tif ( options && options.debug && window.console ) {\r\n\t\t\t\tconsole.warn( \"Nothing selected, can't validate, returning nothing.\" );\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Check if a validator for this form was already created\r\n\t\tvar validator = $.data( this[ 0 ], \"validator\" );\r\n\t\tif ( validator ) {\r\n\t\t\treturn validator;\r\n\t\t}\r\n\r\n\t\t// Add novalidate tag if HTML5.\r\n\t\tthis.attr( \"novalidate\", \"novalidate\" );\r\n\r\n\t\tvalidator = new $.validator( options, this[ 0 ] );\r\n\t\t$.data( this[ 0 ], \"validator\", validator );\r\n\r\n\t\tif ( validator.settings.onsubmit ) {\r\n\r\n\t\t\tthis.on( \"click.validate\", \":submit\", function( event ) {\r\n\t\t\t\tif ( validator.settings.submitHandler ) {\r\n\t\t\t\t\tvalidator.submitButton = event.target;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Allow suppressing validation by adding a cancel class to the submit button\r\n\t\t\t\tif ( $( this ).hasClass( \"cancel\" ) ) {\r\n\t\t\t\t\tvalidator.cancelSubmit = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Allow suppressing validation by adding the html5 formnovalidate attribute to the submit button\r\n\t\t\t\tif ( $( this ).attr( \"formnovalidate\" ) !== undefined ) {\r\n\t\t\t\t\tvalidator.cancelSubmit = true;\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\r\n\t\t\t// Validate the form on submit\r\n\t\t\tthis.on( \"submit.validate\", function( event ) {\r\n\t\t\t\tif ( validator.settings.debug ) {\r\n\r\n\t\t\t\t\t// Prevent form submit to be able to see console output\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t\tfunction handle() {\r\n\t\t\t\t\tvar hidden, result;\r\n\t\t\t\t\tif ( validator.settings.submitHandler ) {\r\n\t\t\t\t\t\tif ( validator.submitButton ) {\r\n\r\n\t\t\t\t\t\t\t// Insert a hidden input as a replacement for the missing submit button\r\n\t\t\t\t\t\t\thidden = $( \"<input type='hidden'/>\" )\r\n\t\t\t\t\t\t\t\t.attr( \"name\", validator.submitButton.name )\r\n\t\t\t\t\t\t\t\t.val( $( validator.submitButton ).val() )\r\n\t\t\t\t\t\t\t\t.appendTo( validator.currentForm );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tresult = validator.settings.submitHandler.call( validator, validator.currentForm, event );\r\n\t\t\t\t\t\tif ( validator.submitButton ) {\r\n\r\n\t\t\t\t\t\t\t// And clean up afterwards; thanks to no-block-scope, hidden can be referenced\r\n\t\t\t\t\t\t\thidden.remove();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ( result !== undefined ) {\r\n\t\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Prevent submit for invalid forms or custom submit handlers\r\n\t\t\t\tif ( validator.cancelSubmit ) {\r\n\t\t\t\t\tvalidator.cancelSubmit = false;\r\n\t\t\t\t\treturn handle();\r\n\t\t\t\t}\r\n\t\t\t\tif ( validator.form() ) {\r\n\t\t\t\t\tif ( validator.pendingRequest ) {\r\n\t\t\t\t\t\tvalidator.formSubmitted = true;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn handle();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvalidator.focusInvalid();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\treturn validator;\r\n\t},\r\n\r\n\t// http://jqueryvalidation.org/valid/\r\n\tvalid: function() {\r\n\t\tvar valid, validator, errorList;\r\n\r\n\t\tif ( $( this[ 0 ] ).is( \"form\" ) ) {\r\n\t\t\tvalid = this.validate().form();\r\n\t\t} else {\r\n\t\t\terrorList = [];\r\n\t\t\tvalid = true;\r\n\t\t\tvalidator = $( this[ 0 ].form ).validate();\r\n\t\t\tthis.each( function() {\r\n\t\t\t\tvalid = validator.element( this ) && valid;\r\n\t\t\t\tif ( !valid ) {\r\n\t\t\t\t\terrorList = errorList.concat( validator.errorList );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t\tvalidator.errorList = errorList;\r\n\t\t}\r\n\t\treturn valid;\r\n\t},\r\n\r\n\t// http://jqueryvalidation.org/rules/\r\n\trules: function( command, argument ) {\r\n\r\n\t\t// If nothing is selected, return nothing; can't chain anyway\r\n\t\tif ( !this.length ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar element = this[ 0 ],\r\n\t\t\tsettings, staticRules, existingRules, data, param, filtered;\r\n\r\n\t\tif ( command ) {\r\n\t\t\tsettings = $.data( element.form, \"validator\" ).settings;\r\n\t\t\tstaticRules = settings.rules;\r\n\t\t\texistingRules = $.validator.staticRules( element );\r\n\t\t\tswitch ( command ) {\r\n\t\t\tcase \"add\":\r\n\t\t\t\t$.extend( existingRules, $.validator.normalizeRule( argument ) );\r\n\r\n\t\t\t\t// Remove messages from rules, but allow them to be set separately\r\n\t\t\t\tdelete existingRules.messages;\r\n\t\t\t\tstaticRules[ element.name ] = existingRules;\r\n\t\t\t\tif ( argument.messages ) {\r\n\t\t\t\t\tsettings.messages[ element.name ] = $.extend( settings.messages[ element.name ], argument.messages );\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"remove\":\r\n\t\t\t\tif ( !argument ) {\r\n\t\t\t\t\tdelete staticRules[ element.name ];\r\n\t\t\t\t\treturn existingRules;\r\n\t\t\t\t}\r\n\t\t\t\tfiltered = {};\r\n\t\t\t\t$.each( argument.split( /\\s/ ), function( index, method ) {\r\n\t\t\t\t\tfiltered[ method ] = existingRules[ method ];\r\n\t\t\t\t\tdelete existingRules[ method ];\r\n\t\t\t\t\tif ( method === \"required\" ) {\r\n\t\t\t\t\t\t$( element ).removeAttr( \"aria-required\" );\r\n\t\t\t\t\t}\r\n\t\t\t\t} );\r\n\t\t\t\treturn filtered;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdata = $.validator.normalizeRules(\r\n\t\t$.extend(\r\n\t\t\t{},\r\n\t\t\t$.validator.classRules( element ),\r\n\t\t\t$.validator.attributeRules( element ),\r\n\t\t\t$.validator.dataRules( element ),\r\n\t\t\t$.validator.staticRules( element )\r\n\t\t), element );\r\n\r\n\t\t// Make sure required is at front\r\n\t\tif ( data.required ) {\r\n\t\t\tparam = data.required;\r\n\t\t\tdelete data.required;\r\n\t\t\tdata = $.extend( { required: param }, data );\r\n\t\t\t$( element ).attr( \"aria-required\", \"true\" );\r\n\t\t}\r\n\r\n\t\t// Make sure remote is at back\r\n\t\tif ( data.remote ) {\r\n\t\t\tparam = data.remote;\r\n\t\t\tdelete data.remote;\r\n\t\t\tdata = $.extend( data, { remote: param } );\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n} );\r\n\r\n// Custom selectors\r\n$.extend( $.expr[ \":\" ], {\r\n\r\n\t// http://jqueryvalidation.org/blank-selector/\r\n\tblank: function( a ) {\r\n\t\treturn !$.trim( \"\" + $( a ).val() );\r\n\t},\r\n\r\n\t// http://jqueryvalidation.org/filled-selector/\r\n\tfilled: function( a ) {\r\n\t\tvar val = $( a ).val();\r\n\t\treturn val !== null && !!$.trim( \"\" + val );\r\n\t},\r\n\r\n\t// http://jqueryvalidation.org/unchecked-selector/\r\n\tunchecked: function( a ) {\r\n\t\treturn !$( a ).prop( \"checked\" );\r\n\t}\r\n} );\r\n\r\n// Constructor for validator\r\n$.validator = function( options, form ) {\r\n\tthis.settings = $.extend( true, {}, $.validator.defaults, options );\r\n\tthis.currentForm = form;\r\n\tthis.init();\r\n};\r\n\r\n// http://jqueryvalidation.org/jQuery.validator.format/\r\n$.validator.format = function( source, params ) {\r\n\tif ( arguments.length === 1 ) {\r\n\t\treturn function() {\r\n\t\t\tvar args = $.makeArray( arguments );\r\n\t\t\targs.unshift( source );\r\n\t\t\treturn $.validator.format.apply( this, args );\r\n\t\t};\r\n\t}\r\n\tif ( params === undefined ) {\r\n\t\treturn source;\r\n\t}\r\n\tif ( arguments.length > 2 && params.constructor !== Array  ) {\r\n\t\tparams = $.makeArray( arguments ).slice( 1 );\r\n\t}\r\n\tif ( params.constructor !== Array ) {\r\n\t\tparams = [ params ];\r\n\t}\r\n\t$.each( params, function( i, n ) {\r\n\t\tsource = source.replace( new RegExp( \"\\\\{\" + i + \"\\\\}\", \"g\" ), function() {\r\n\t\t\treturn n;\r\n\t\t} );\r\n\t} );\r\n\treturn source;\r\n};\r\n\r\n$.extend( $.validator, {\r\n\r\n\tdefaults: {\r\n\t\tmessages: {},\r\n\t\tgroups: {},\r\n\t\trules: {},\r\n\t\terrorClass: \"error\",\r\n\t\tpendingClass: \"pending\",\r\n\t\tvalidClass: \"valid\",\r\n\t\terrorElement: \"label\",\r\n\t\tfocusCleanup: false,\r\n\t\tfocusInvalid: true,\r\n\t\terrorContainer: $( [] ),\r\n\t\terrorLabelContainer: $( [] ),\r\n\t\tonsubmit: true,\r\n\t\tignore: \":hidden\",\r\n\t\tignoreTitle: false,\r\n\t\tonfocusin: function( element ) {\r\n\t\t\tthis.lastActive = element;\r\n\r\n\t\t\t// Hide error label and remove error class on focus if enabled\r\n\t\t\tif ( this.settings.focusCleanup ) {\r\n\t\t\t\tif ( this.settings.unhighlight ) {\r\n\t\t\t\t\tthis.settings.unhighlight.call( this, element, this.settings.errorClass, this.settings.validClass );\r\n\t\t\t\t}\r\n\t\t\t\tthis.hideThese( this.errorsFor( element ) );\r\n\t\t\t}\r\n\t\t},\r\n\t\tonfocusout: function( element ) {\r\n\t\t\tif ( !this.checkable( element ) && ( element.name in this.submitted || !this.optional( element ) ) ) {\r\n\t\t\t\tthis.element( element );\r\n\t\t\t}\r\n\t\t},\r\n\t\tonkeyup: function( element, event ) {\r\n\r\n\t\t\t// Avoid revalidate the field when pressing one of the following keys\r\n\t\t\t// Shift       => 16\r\n\t\t\t// Ctrl        => 17\r\n\t\t\t// Alt         => 18\r\n\t\t\t// Caps lock   => 20\r\n\t\t\t// End         => 35\r\n\t\t\t// Home        => 36\r\n\t\t\t// Left arrow  => 37\r\n\t\t\t// Up arrow    => 38\r\n\t\t\t// Right arrow => 39\r\n\t\t\t// Down arrow  => 40\r\n\t\t\t// Insert      => 45\r\n\t\t\t// Num lock    => 144\r\n\t\t\t// AltGr key   => 225\r\n\t\t\tvar excludedKeys = [\r\n\t\t\t\t16, 17, 18, 20, 35, 36, 37,\r\n\t\t\t\t38, 39, 40, 45, 144, 225\r\n\t\t\t];\r\n\r\n\t\t\tif ( event.which === 9 && this.elementValue( element ) === \"\" || $.inArray( event.keyCode, excludedKeys ) !== -1 ) {\r\n\t\t\t\treturn;\r\n\t\t\t} else if ( element.name in this.submitted || element.name in this.invalid ) {\r\n\t\t\t\tthis.element( element );\r\n\t\t\t}\r\n\t\t},\r\n\t\tonclick: function( element ) {\r\n\r\n\t\t\t// Click on selects, radiobuttons and checkboxes\r\n\t\t\tif ( element.name in this.submitted ) {\r\n\t\t\t\tthis.element( element );\r\n\r\n\t\t\t// Or option elements, check parent select in that case\r\n\t\t\t} else if ( element.parentNode.name in this.submitted ) {\r\n\t\t\t\tthis.element( element.parentNode );\r\n\t\t\t}\r\n\t\t},\r\n\t\thighlight: function( element, errorClass, validClass ) {\r\n\t\t\tif ( element.type === \"radio\" ) {\r\n\t\t\t\tthis.findByName( element.name ).addClass( errorClass ).removeClass( validClass );\r\n\t\t\t} else {\r\n\t\t\t\t$( element ).addClass( errorClass ).removeClass( validClass );\r\n\t\t\t}\r\n\t\t},\r\n\t\tunhighlight: function( element, errorClass, validClass ) {\r\n\t\t\tif ( element.type === \"radio\" ) {\r\n\t\t\t\tthis.findByName( element.name ).removeClass( errorClass ).addClass( validClass );\r\n\t\t\t} else {\r\n\t\t\t\t$( element ).removeClass( errorClass ).addClass( validClass );\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t// http://jqueryvalidation.org/jQuery.validator.setDefaults/\r\n\tsetDefaults: function( settings ) {\r\n\t\t$.extend( $.validator.defaults, settings );\r\n\t},\r\n\r\n\tmessages: {\r\n\t\trequired: \"This field is required.\",\r\n\t\tremote: \"Please fix this field.\",\r\n\t\temail: \"Please enter a valid email address.\",\r\n\t\turl: \"Please enter a valid URL.\",\r\n\t\tdate: \"Please enter a valid date.\",\r\n\t\tdateISO: \"Please enter a valid date ( ISO ).\",\r\n\t\tnumber: \"Please enter a valid number.\",\r\n\t\tdigits: \"Please enter only digits.\",\r\n\t\tequalTo: \"Please enter the same value again.\",\r\n\t\tmaxlength: $.validator.format( \"Please enter no more than {0} characters.\" ),\r\n\t\tminlength: $.validator.format( \"Please enter at least {0} characters.\" ),\r\n\t\trangelength: $.validator.format( \"Please enter a value between {0} and {1} characters long.\" ),\r\n\t\trange: $.validator.format( \"Please enter a value between {0} and {1}.\" ),\r\n\t\tmax: $.validator.format( \"Please enter a value less than or equal to {0}.\" ),\r\n\t\tmin: $.validator.format( \"Please enter a value greater than or equal to {0}.\" ),\r\n\t\tstep: $.validator.format( \"Please enter a multiple of {0}.\" )\r\n\t},\r\n\r\n\tautoCreateRanges: false,\r\n\r\n\tprototype: {\r\n\r\n\t\tinit: function() {\r\n\t\t\tthis.labelContainer = $( this.settings.errorLabelContainer );\r\n\t\t\tthis.errorContext = this.labelContainer.length && this.labelContainer || $( this.currentForm );\r\n\t\t\tthis.containers = $( this.settings.errorContainer ).add( this.settings.errorLabelContainer );\r\n\t\t\tthis.submitted = {};\r\n\t\t\tthis.valueCache = {};\r\n\t\t\tthis.pendingRequest = 0;\r\n\t\t\tthis.pending = {};\r\n\t\t\tthis.invalid = {};\r\n\t\t\tthis.reset();\r\n\r\n\t\t\tvar groups = ( this.groups = {} ),\r\n\t\t\t\trules;\r\n\t\t\t$.each( this.settings.groups, function( key, value ) {\r\n\t\t\t\tif ( typeof value === \"string\" ) {\r\n\t\t\t\t\tvalue = value.split( /\\s/ );\r\n\t\t\t\t}\r\n\t\t\t\t$.each( value, function( index, name ) {\r\n\t\t\t\t\tgroups[ name ] = key;\r\n\t\t\t\t} );\r\n\t\t\t} );\r\n\t\t\trules = this.settings.rules;\r\n\t\t\t$.each( rules, function( key, value ) {\r\n\t\t\t\trules[ key ] = $.validator.normalizeRule( value );\r\n\t\t\t} );\r\n\r\n\t\t\tfunction delegate( event ) {\r\n\t\t\t\tvar validator = $.data( this.form, \"validator\" ),\r\n\t\t\t\t\teventType = \"on\" + event.type.replace( /^validate/, \"\" ),\r\n\t\t\t\t\tsettings = validator.settings;\r\n\t\t\t\tif ( settings[ eventType ] && !$( this ).is( settings.ignore ) ) {\r\n\t\t\t\t\tsettings[ eventType ].call( validator, this, event );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t$( this.currentForm )\r\n\t\t\t\t.on( \"focusin.validate focusout.validate keyup.validate\",\r\n\t\t\t\t\t\":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], \" +\r\n\t\t\t\t\t\"[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], \" +\r\n\t\t\t\t\t\"[type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], \" +\r\n\t\t\t\t\t\"[type='radio'], [type='checkbox'], [contenteditable]\", delegate )\r\n\r\n\t\t\t\t// Support: Chrome, oldIE\r\n\t\t\t\t// \"select\" is provided as event.target when clicking a option\r\n\t\t\t\t.on( \"click.validate\", \"select, option, [type='radio'], [type='checkbox']\", delegate );\r\n\r\n\t\t\tif ( this.settings.invalidHandler ) {\r\n\t\t\t\t$( this.currentForm ).on( \"invalid-form.validate\", this.settings.invalidHandler );\r\n\t\t\t}\r\n\r\n\t\t\t// Add aria-required to any Static/Data/Class required fields before first validation\r\n\t\t\t// Screen readers require this attribute to be present before the initial submission http://www.w3.org/TR/WCAG-TECHS/ARIA2.html\r\n\t\t\t$( this.currentForm ).find( \"[required], [data-rule-required], .required\" ).attr( \"aria-required\", \"true\" );\r\n\t\t},\r\n\r\n\t\t// http://jqueryvalidation.org/Validator.form/\r\n\t\tform: function() {\r\n\t\t\tthis.checkForm();\r\n\t\t\t$.extend( this.submitted, this.errorMap );\r\n\t\t\tthis.invalid = $.extend( {}, this.errorMap );\r\n\t\t\tif ( !this.valid() ) {\r\n\t\t\t\t$( this.currentForm ).triggerHandler( \"invalid-form\", [ this ] );\r\n\t\t\t}\r\n\t\t\tthis.showErrors();\r\n\t\t\treturn this.valid();\r\n\t\t},\r\n\r\n\t\tcheckForm: function() {\r\n\t\t\tthis.prepareForm();\r\n\t\t\tfor ( var i = 0, elements = ( this.currentElements = this.elements() ); elements[ i ]; i++ ) {\r\n\t\t\t\tthis.check( elements[ i ] );\r\n\t\t\t}\r\n\t\t\treturn this.valid();\r\n\t\t},\r\n\r\n\t\t// http://jqueryvalidation.org/Validator.element/\r\n\t\telement: function( element ) {\r\n\t\t\tvar cleanElement = this.clean( element ),\r\n\t\t\t\tcheckElement = this.validationTargetFor( cleanElement ),\r\n\t\t\t\tv = this,\r\n\t\t\t\tresult = true,\r\n\t\t\t\trs, group;\r\n\r\n\t\t\tif ( checkElement === undefined ) {\r\n\t\t\t\tdelete this.invalid[ cleanElement.name ];\r\n\t\t\t} else {\r\n\t\t\t\tthis.prepareElement( checkElement );\r\n\t\t\t\tthis.currentElements = $( checkElement );\r\n\r\n\t\t\t\t// If this element is grouped, then validate all group elements already\r\n\t\t\t\t// containing a value\r\n\t\t\t\tgroup = this.groups[ checkElement.name ];\r\n\t\t\t\tif ( group ) {\r\n\t\t\t\t\t$.each( this.groups, function( name, testgroup ) {\r\n\t\t\t\t\t\tif ( testgroup === group && name !== checkElement.name ) {\r\n\t\t\t\t\t\t\tcleanElement = v.validationTargetFor( v.clean( v.findByName( name ) ) );\r\n\t\t\t\t\t\t\tif ( cleanElement && cleanElement.name in v.invalid ) {\r\n\t\t\t\t\t\t\t\tv.currentElements.push( cleanElement );\r\n\t\t\t\t\t\t\t\tresult = result && v.check( cleanElement );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} );\r\n\t\t\t\t}\r\n\r\n\t\t\t\trs = this.check( checkElement ) !== false;\r\n\t\t\t\tresult = result && rs;\r\n\t\t\t\tif ( rs ) {\r\n\t\t\t\t\tthis.invalid[ checkElement.name ] = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.invalid[ checkElement.name ] = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( !this.numberOfInvalids() ) {\r\n\r\n\t\t\t\t\t// Hide error containers on last error\r\n\t\t\t\t\tthis.toHide = this.toHide.add( this.containers );\r\n\t\t\t\t}\r\n\t\t\t\tthis.showErrors();\r\n\r\n\t\t\t\t// Add aria-invalid status for screen readers\r\n\t\t\t\t$( element ).attr( \"aria-invalid\", !rs );\r\n\t\t\t}\r\n\r\n\t\t\treturn result;\r\n\t\t},\r\n\r\n\t\t// http://jqueryvalidation.org/Validator.showErrors/\r\n\t\tshowErrors: function( errors ) {\r\n\t\t\tif ( errors ) {\r\n\t\t\t\tvar validator = this;\r\n\r\n\t\t\t\t// Add items to error list and map\r\n\t\t\t\t$.extend( this.errorMap, errors );\r\n\t\t\t\tthis.errorList = $.map( this.errorMap, function( message, name ) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tmessage: message,\r\n\t\t\t\t\t\telement: validator.findByName( name )[ 0 ]\r\n\t\t\t\t\t};\r\n\t\t\t\t} );\r\n\r\n\t\t\t\t// Remove items from success list\r\n\t\t\t\tthis.successList = $.grep( this.successList, function( element ) {\r\n\t\t\t\t\treturn !( element.name in errors );\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t\tif ( this.settings.showErrors ) {\r\n\t\t\t\tthis.settings.showErrors.call( this, this.errorMap, this.errorList );\r\n\t\t\t} else {\r\n\t\t\t\tthis.defaultShowErrors();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// http://jqueryvalidation.org/Validator.resetForm/\r\n\t\tresetForm: function() {\r\n\t\t\tif ( $.fn.resetForm ) {\r\n\t\t\t\t$( this.currentForm ).resetForm();\r\n\t\t\t}\r\n\t\t\tthis.invalid = {};\r\n\t\t\tthis.submitted = {};\r\n\t\t\tthis.prepareForm();\r\n\t\t\tthis.hideErrors();\r\n\t\t\tvar elements = this.elements()\r\n\t\t\t\t.removeData( \"previousValue\" )\r\n\t\t\t\t.removeAttr( \"aria-invalid\" );\r\n\r\n\t\t\tthis.resetElements( elements );\r\n\t\t},\r\n\r\n\t\tresetElements: function( elements ) {\r\n\t\t\tvar i;\r\n\r\n\t\t\tif ( this.settings.unhighlight ) {\r\n\t\t\t\tfor ( i = 0; elements[ i ]; i++ ) {\r\n\t\t\t\t\tthis.settings.unhighlight.call( this, elements[ i ],\r\n\t\t\t\t\t\tthis.settings.errorClass, \"\" );\r\n\t\t\t\t\tthis.findByName( elements[ i ].name ).removeClass( this.settings.validClass );\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\telements\r\n\t\t\t\t\t.removeClass( this.settings.errorClass )\r\n\t\t\t\t\t.removeClass( this.settings.validClass );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tnumberOfInvalids: function() {\r\n\t\t\treturn this.objectLength( this.invalid );\r\n\t\t},\r\n\r\n\t\tobjectLength: function( obj ) {\r\n\t\t\t/* jshint unused: false */\r\n\t\t\tvar count = 0,\r\n\t\t\t\ti;\r\n\t\t\tfor ( i in obj ) {\r\n\t\t\t\tif ( obj[ i ] ) {\r\n\t\t\t\t\tcount++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn count;\r\n\t\t},\r\n\r\n\t\thideErrors: function() {\r\n\t\t\tthis.hideThese( this.toHide );\r\n\t\t},\r\n\r\n\t\thideThese: function( errors ) {\r\n\t\t\terrors.not( this.containers ).text( \"\" );\r\n\t\t\tthis.addWrapper( errors ).hide();\r\n\t\t},\r\n\r\n\t\tvalid: function() {\r\n\t\t\treturn this.size() === 0;\r\n\t\t},\r\n\r\n\t\tsize: function() {\r\n\t\t\treturn this.errorList.length;\r\n\t\t},\r\n\r\n\t\tfocusInvalid: function() {\r\n\t\t\tif ( this.settings.focusInvalid ) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t$( this.findLastActive() || this.errorList.length && this.errorList[ 0 ].element || [] )\r\n\t\t\t\t\t.filter( \":visible\" )\r\n\t\t\t\t\t.focus()\r\n\r\n\t\t\t\t\t// Manually trigger focusin event; without it, focusin handler isn't called, findLastActive won't have anything to find\r\n\t\t\t\t\t.trigger( \"focusin\" );\r\n\t\t\t\t} catch ( e ) {\r\n\r\n\t\t\t\t\t// Ignore IE throwing errors when focusing hidden elements\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tfindLastActive: function() {\r\n\t\t\tvar lastActive = this.lastActive;\r\n\t\t\treturn lastActive && $.grep( this.errorList, function( n ) {\r\n\t\t\t\treturn n.element.name === lastActive.name;\r\n\t\t\t} ).length === 1 && lastActive;\r\n\t\t},\r\n\r\n\t\telements: function() {\r\n\t\t\tvar validator = this,\r\n\t\t\t\trulesCache = {};\r\n\r\n\t\t\t// Select all valid inputs inside the form (no submit or reset buttons)\r\n\t\t\treturn $( this.currentForm )\r\n\t\t\t.find( \"input, select, textarea, [contenteditable]\" )\r\n\t\t\t.not( \":submit, :reset, :image, :disabled\" )\r\n\t\t\t.not( this.settings.ignore )\r\n\t\t\t.filter( function() {\r\n\t\t\t\tvar name = this.name || $( this ).attr( \"name\" ); // For contenteditable\r\n\t\t\t\tif ( !name && validator.settings.debug && window.console ) {\r\n\t\t\t\t\tconsole.error( \"%o has no name assigned\", this );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Set form expando on contenteditable\r\n\t\t\t\tif ( this.hasAttribute( \"contenteditable\" ) ) {\r\n\t\t\t\t\tthis.form = $( this ).closest( \"form\" )[ 0 ];\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Select only the first element for each name, and only those with rules specified\r\n\t\t\t\tif ( name in rulesCache || !validator.objectLength( $( this ).rules() ) ) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\trulesCache[ name ] = true;\r\n\t\t\t\treturn true;\r\n\t\t\t} );\r\n\t\t},\r\n\r\n\t\tclean: function( selector ) {\r\n\t\t\treturn $( selector )[ 0 ];\r\n\t\t},\r\n\r\n\t\terrors: function() {\r\n\t\t\tvar errorClass = this.settings.errorClass.split( \" \" ).join( \".\" );\r\n\t\t\treturn $( this.settings.errorElement + \".\" + errorClass, this.errorContext );\r\n\t\t},\r\n\r\n\t\tresetInternals: function() {\r\n\t\t\tthis.successList = [];\r\n\t\t\tthis.errorList = [];\r\n\t\t\tthis.errorMap = {};\r\n\t\t\tthis.toShow = $( [] );\r\n\t\t\tthis.toHide = $( [] );\r\n\t\t},\r\n\r\n\t\treset: function() {\r\n\t\t\tthis.resetInternals();\r\n\t\t\tthis.currentElements = $( [] );\r\n\t\t},\r\n\r\n\t\tprepareForm: function() {\r\n\t\t\tthis.reset();\r\n\t\t\tthis.toHide = this.errors().add( this.containers );\r\n\t\t},\r\n\r\n\t\tprepareElement: function( element ) {\r\n\t\t\tthis.reset();\r\n\t\t\tthis.toHide = this.errorsFor( element );\r\n\t\t},\r\n\r\n\t\telementValue: function( element ) {\r\n\t\t\tvar $element = $( element ),\r\n\t\t\t\ttype = element.type,\r\n\t\t\t\tval, idx;\r\n\r\n\t\t\tif ( type === \"radio\" || type === \"checkbox\" ) {\r\n\t\t\t\treturn this.findByName( element.name ).filter( \":checked\" ).val();\r\n\t\t\t} else if ( type === \"number\" && typeof element.validity !== \"undefined\" ) {\r\n\t\t\t\treturn element.validity.badInput ? \"NaN\" : $element.val();\r\n\t\t\t}\r\n\r\n\t\t\tif ( element.hasAttribute( \"contenteditable\" ) ) {\r\n\t\t\t\tval = $element.text();\r\n\t\t\t} else {\r\n\t\t\t\tval = $element.val();\r\n\t\t\t}\r\n\r\n\t\t\tif ( type === \"file\" ) {\r\n\r\n\t\t\t\t// Modern browser (chrome & safari)\r\n\t\t\t\tif ( val.substr( 0, 12 ) === \"C:\\\\fakepath\\\\\" ) {\r\n\t\t\t\t\treturn val.substr( 12 );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Legacy browsers\r\n\t\t\t\t// Unix-based path\r\n\t\t\t\tidx = val.lastIndexOf( \"/\" );\r\n\t\t\t\tif ( idx >= 0 ) {\r\n\t\t\t\t\treturn val.substr( idx + 1 );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Windows-based path\r\n\t\t\t\tidx = val.lastIndexOf( \"\\\\\" );\r\n\t\t\t\tif ( idx >= 0 ) {\r\n\t\t\t\t\treturn val.substr( idx + 1 );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Just the file name\r\n\t\t\t\treturn val;\r\n\t\t\t}\r\n\r\n\t\t\tif ( typeof val === \"string\" ) {\r\n\t\t\t\treturn val.replace( /\\r/g, \"\" );\r\n\t\t\t}\r\n\t\t\treturn val;\r\n\t\t},\r\n\r\n\t\tcheck: function( element ) {\r\n\t\t\telement = this.validationTargetFor( this.clean( element ) );\r\n\r\n\t\t\tvar rules = $( element ).rules(),\r\n\t\t\t\trulesCount = $.map( rules, function( n, i ) {\r\n\t\t\t\t\treturn i;\r\n\t\t\t\t} ).length,\r\n\t\t\t\tdependencyMismatch = false,\r\n\t\t\t\tval = this.elementValue( element ),\r\n\t\t\t\tresult, method, rule;\r\n\r\n\t\t\t// If a normalizer is defined for this element, then\r\n\t\t\t// call it to retreive the changed value instead\r\n\t\t\t// of using the real one.\r\n\t\t\t// Note that `this` in the normalizer is `element`.\r\n\t\t\tif ( typeof rules.normalizer === \"function\" ) {\r\n\t\t\t\tval = rules.normalizer.call( element, val );\r\n\r\n\t\t\t\tif ( typeof val !== \"string\" ) {\r\n\t\t\t\t\tthrow new TypeError( \"The normalizer should return a string value.\" );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Delete the normalizer from rules to avoid treating\r\n\t\t\t\t// it as a pre-defined method.\r\n\t\t\t\tdelete rules.normalizer;\r\n\t\t\t}\r\n\r\n\t\t\tfor ( method in rules ) {\r\n\t\t\t\trule = { method: method, parameters: rules[ method ] };\r\n\t\t\t\ttry {\r\n\t\t\t\t\tresult = $.validator.methods[ method ].call( this, val, element, rule.parameters );\r\n\r\n\t\t\t\t\t// If a method indicates that the field is optional and therefore valid,\r\n\t\t\t\t\t// don't mark it as valid when there are no other rules\r\n\t\t\t\t\tif ( result === \"dependency-mismatch\" && rulesCount === 1 ) {\r\n\t\t\t\t\t\tdependencyMismatch = true;\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdependencyMismatch = false;\r\n\r\n\t\t\t\t\tif ( result === \"pending\" ) {\r\n\t\t\t\t\t\tthis.toHide = this.toHide.not( this.errorsFor( element ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( !result ) {\r\n\t\t\t\t\t\tthis.formatAndAdd( element, rule );\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch ( e ) {\r\n\t\t\t\t\tif ( this.settings.debug && window.console ) {\r\n\t\t\t\t\t\tconsole.log( \"Exception occurred when checking element \" + element.id + \", check the '\" + rule.method + \"' method.\", e );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( e instanceof TypeError ) {\r\n\t\t\t\t\t\te.message += \".  Exception occurred when checking element \" + element.id + \", check the '\" + rule.method + \"' method.\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthrow e;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif ( dependencyMismatch ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif ( this.objectLength( rules ) ) {\r\n\t\t\t\tthis.successList.push( element );\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\r\n\t\t// Return the custom message for the given element and validation method\r\n\t\t// specified in the element's HTML5 data attribute\r\n\t\t// return the generic message if present and no method specific message is present\r\n\t\tcustomDataMessage: function( element, method ) {\r\n\t\t\treturn $( element ).data( \"msg\" + method.charAt( 0 ).toUpperCase() +\r\n\t\t\t\tmethod.substring( 1 ).toLowerCase() ) || $( element ).data( \"msg\" );\r\n\t\t},\r\n\r\n\t\t// Return the custom message for the given element name and validation method\r\n\t\tcustomMessage: function( name, method ) {\r\n\t\t\tvar m = this.settings.messages[ name ];\r\n\t\t\treturn m && ( m.constructor === String ? m : m[ method ] );\r\n\t\t},\r\n\r\n\t\t// Return the first defined argument, allowing empty strings\r\n\t\tfindDefined: function() {\r\n\t\t\tfor ( var i = 0; i < arguments.length; i++ ) {\r\n\t\t\t\tif ( arguments[ i ] !== undefined ) {\r\n\t\t\t\t\treturn arguments[ i ];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn undefined;\r\n\t\t},\r\n\r\n\t\tdefaultMessage: function( element, rule ) {\r\n\t\t\tvar message = this.findDefined(\r\n\t\t\t\t\tthis.customMessage( element.name, rule.method ),\r\n\t\t\t\t\tthis.customDataMessage( element, rule.method ),\r\n\r\n\t\t\t\t\t// 'title' is never undefined, so handle empty string as undefined\r\n\t\t\t\t\t!this.settings.ignoreTitle && element.title || undefined,\r\n\t\t\t\t\t$.validator.messages[ rule.method ],\r\n\t\t\t\t\t\"<strong>Warning: No message defined for \" + element.name + \"</strong>\"\r\n\t\t\t\t),\r\n\t\t\t\ttheregex = /\\$?\\{(\\d+)\\}/g;\r\n\t\t\tif ( typeof message === \"function\" ) {\r\n\t\t\t\tmessage = message.call( this, rule.parameters, element );\r\n\t\t\t} else if ( theregex.test( message ) ) {\r\n\t\t\t\tmessage = $.validator.format( message.replace( theregex, \"{$1}\" ), rule.parameters );\r\n\t\t\t}\r\n\r\n\t\t\treturn message;\r\n\t\t},\r\n\r\n\t\tformatAndAdd: function( element, rule ) {\r\n\t\t\tvar message = this.defaultMessage( element, rule );\r\n\r\n\t\t\tthis.errorList.push( {\r\n\t\t\t\tmessage: message,\r\n\t\t\t\telement: element,\r\n\t\t\t\tmethod: rule.method\r\n\t\t\t} );\r\n\r\n\t\t\tthis.errorMap[ element.name ] = message;\r\n\t\t\tthis.submitted[ element.name ] = message;\r\n\t\t},\r\n\r\n\t\taddWrapper: function( toToggle ) {\r\n\t\t\tif ( this.settings.wrapper ) {\r\n\t\t\t\ttoToggle = toToggle.add( toToggle.parent( this.settings.wrapper ) );\r\n\t\t\t}\r\n\t\t\treturn toToggle;\r\n\t\t},\r\n\r\n\t\tdefaultShowErrors: function() {\r\n\t\t\tvar i, elements, error;\r\n\t\t\tfor ( i = 0; this.errorList[ i ]; i++ ) {\r\n\t\t\t\terror = this.errorList[ i ];\r\n\t\t\t\tif ( this.settings.highlight ) {\r\n\t\t\t\t\tthis.settings.highlight.call( this, error.element, this.settings.errorClass, this.settings.validClass );\r\n\t\t\t\t}\r\n\t\t\t\tthis.showLabel( error.element, error.message );\r\n\t\t\t}\r\n\t\t\tif ( this.errorList.length ) {\r\n\t\t\t\tthis.toShow = this.toShow.add( this.containers );\r\n\t\t\t}\r\n\t\t\tif ( this.settings.success ) {\r\n\t\t\t\tfor ( i = 0; this.successList[ i ]; i++ ) {\r\n\t\t\t\t\tthis.showLabel( this.successList[ i ] );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif ( this.settings.unhighlight ) {\r\n\t\t\t\tfor ( i = 0, elements = this.validElements(); elements[ i ]; i++ ) {\r\n\t\t\t\t\tthis.settings.unhighlight.call( this, elements[ i ], this.settings.errorClass, this.settings.validClass );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.toHide = this.toHide.not( this.toShow );\r\n\t\t\tthis.hideErrors();\r\n\t\t\tthis.addWrapper( this.toShow ).show();\r\n\t\t},\r\n\r\n\t\tvalidElements: function() {\r\n\t\t\treturn this.currentElements.not( this.invalidElements() );\r\n\t\t},\r\n\r\n\t\tinvalidElements: function() {\r\n\t\t\treturn $( this.errorList ).map( function() {\r\n\t\t\t\treturn this.element;\r\n\t\t\t} );\r\n\t\t},\r\n\r\n\t\tshowLabel: function( element, message ) {\r\n\t\t\tvar place, group, errorID, v,\r\n\t\t\t\terror = this.errorsFor( element ),\r\n\t\t\t\telementID = this.idOrName( element ),\r\n\t\t\t\tdescribedBy = $( element ).attr( \"aria-describedby\" );\r\n\r\n\t\t\tif ( error.length ) {\r\n\r\n\t\t\t\t// Refresh error/success class\r\n\t\t\t\terror.removeClass( this.settings.validClass ).addClass( this.settings.errorClass );\r\n\r\n\t\t\t\t// Replace message on existing label\r\n\t\t\t\terror.html( message );\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Create error element\r\n\t\t\t\terror = $( \"<\" + this.settings.errorElement + \">\" )\r\n\t\t\t\t\t.attr( \"id\", elementID + \"-error\" )\r\n\t\t\t\t\t.addClass( this.settings.errorClass )\r\n\t\t\t\t\t.html( message || \"\" );\r\n\r\n\t\t\t\t// Maintain reference to the element to be placed into the DOM\r\n\t\t\t\tplace = error;\r\n\t\t\t\tif ( this.settings.wrapper ) {\r\n\r\n\t\t\t\t\t// Make sure the element is visible, even in IE\r\n\t\t\t\t\t// actually showing the wrapped element is handled elsewhere\r\n\t\t\t\t\tplace = error.hide().show().wrap( \"<\" + this.settings.wrapper + \"/>\" ).parent();\r\n\t\t\t\t}\r\n\t\t\t\tif ( this.labelContainer.length ) {\r\n\t\t\t\t\tthis.labelContainer.append( place );\r\n\t\t\t\t} else if ( this.settings.errorPlacement ) {\r\n\t\t\t\t\tthis.settings.errorPlacement( place, $( element ) );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplace.insertAfter( element );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Link error back to the element\r\n\t\t\t\tif ( error.is( \"label\" ) ) {\r\n\r\n\t\t\t\t\t// If the error is a label, then associate using 'for'\r\n\t\t\t\t\terror.attr( \"for\", elementID );\r\n\r\n\t\t\t\t\t// If the element is not a child of an associated label, then it's necessary\r\n\t\t\t\t\t// to explicitly apply aria-describedby\r\n\t\t\t\t} else if ( error.parents( \"label[for='\" + this.escapeCssMeta( elementID ) + \"']\" ).length === 0 ) {\r\n\t\t\t\t\terrorID = error.attr( \"id\" );\r\n\r\n\t\t\t\t\t// Respect existing non-error aria-describedby\r\n\t\t\t\t\tif ( !describedBy ) {\r\n\t\t\t\t\t\tdescribedBy = errorID;\r\n\t\t\t\t\t} else if ( !describedBy.match( new RegExp( \"\\\\b\" + this.escapeCssMeta( errorID ) + \"\\\\b\" ) ) ) {\r\n\r\n\t\t\t\t\t\t// Add to end of list if not already present\r\n\t\t\t\t\t\tdescribedBy += \" \" + errorID;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$( element ).attr( \"aria-describedby\", describedBy );\r\n\r\n\t\t\t\t\t// If this element is grouped, then assign to all elements in the same group\r\n\t\t\t\t\tgroup = this.groups[ element.name ];\r\n\t\t\t\t\tif ( group ) {\r\n\t\t\t\t\t\tv = this;\r\n\t\t\t\t\t\t$.each( v.groups, function( name, testgroup ) {\r\n\t\t\t\t\t\t\tif ( testgroup === group ) {\r\n\t\t\t\t\t\t\t\t$( \"[name='\" + v.escapeCssMeta( name ) + \"']\", v.currentForm )\r\n\t\t\t\t\t\t\t\t\t.attr( \"aria-describedby\", error.attr( \"id\" ) );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif ( !message && this.settings.success ) {\r\n\t\t\t\terror.text( \"\" );\r\n\t\t\t\tif ( typeof this.settings.success === \"string\" ) {\r\n\t\t\t\t\terror.addClass( this.settings.success );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.settings.success( error, element );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.toShow = this.toShow.add( error );\r\n\t\t},\r\n\r\n\t\terrorsFor: function( element ) {\r\n\t\t\tvar name = this.escapeCssMeta( this.idOrName( element ) ),\r\n\t\t\t\tdescriber = $( element ).attr( \"aria-describedby\" ),\r\n\t\t\t\tselector = \"label[for='\" + name + \"'], label[for='\" + name + \"'] *\";\r\n\r\n\t\t\t// 'aria-describedby' should directly reference the error element\r\n\t\t\tif ( describer ) {\r\n\t\t\t\tselector = selector + \", #\" + this.escapeCssMeta( describer )\r\n\t\t\t\t\t.replace( /\\s+/g, \", #\" );\r\n\t\t\t}\r\n\r\n\t\t\treturn this\r\n\t\t\t\t.errors()\r\n\t\t\t\t.filter( selector );\r\n\t\t},\r\n\r\n\t\t// See https://api.jquery.com/category/selectors/, for CSS\r\n\t\t// meta-characters that should be escaped in order to be used with JQuery\r\n\t\t// as a literal part of a name/id or any selector.\r\n\t\tescapeCssMeta: function( string ) {\r\n\t\t\treturn string.replace( /([\\\\!\"#$%&'()*+,./:;<=>?@\\[\\]^`{|}~])/g, \"\\\\$1\" );\r\n\t\t},\r\n\r\n\t\tidOrName: function( element ) {\r\n\t\t\treturn this.groups[ element.name ] || ( this.checkable( element ) ? element.name : element.id || element.name );\r\n\t\t},\r\n\r\n\t\tvalidationTargetFor: function( element ) {\r\n\r\n\t\t\t// If radio/checkbox, validate first element in group instead\r\n\t\t\tif ( this.checkable( element ) ) {\r\n\t\t\t\telement = this.findByName( element.name );\r\n\t\t\t}\r\n\r\n\t\t\t// Always apply ignore filter\r\n\t\t\treturn $( element ).not( this.settings.ignore )[ 0 ];\r\n\t\t},\r\n\r\n\t\tcheckable: function( element ) {\r\n\t\t\treturn ( /radio|checkbox/i ).test( element.type );\r\n\t\t},\r\n\r\n\t\tfindByName: function( name ) {\r\n\t\t\treturn $( this.currentForm ).find( \"[name='\" + this.escapeCssMeta( name ) + \"']\" );\r\n\t\t},\r\n\r\n\t\tgetLength: function( value, element ) {\r\n\t\t\tswitch ( element.nodeName.toLowerCase() ) {\r\n\t\t\tcase \"select\":\r\n\t\t\t\treturn $( \"option:selected\", element ).length;\r\n\t\t\tcase \"input\":\r\n\t\t\t\tif ( this.checkable( element ) ) {\r\n\t\t\t\t\treturn this.findByName( element.name ).filter( \":checked\" ).length;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn value.length;\r\n\t\t},\r\n\r\n\t\tdepend: function( param, element ) {\r\n\t\t\treturn this.dependTypes[ typeof param ] ? this.dependTypes[ typeof param ]( param, element ) : true;\r\n\t\t},\r\n\r\n\t\tdependTypes: {\r\n\t\t\t\"boolean\": function( param ) {\r\n\t\t\t\treturn param;\r\n\t\t\t},\r\n\t\t\t\"string\": function( param, element ) {\r\n\t\t\t\treturn !!$( param, element.form ).length;\r\n\t\t\t},\r\n\t\t\t\"function\": function( param, element ) {\r\n\t\t\t\treturn param( element );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\toptional: function( element ) {\r\n\t\t\tvar val = this.elementValue( element );\r\n\t\t\treturn !$.validator.methods.required.call( this, val, element ) && \"dependency-mismatch\";\r\n\t\t},\r\n\r\n\t\tstartRequest: function( element ) {\r\n\t\t\tif ( !this.pending[ element.name ] ) {\r\n\t\t\t\tthis.pendingRequest++;\r\n\t\t\t\t$( element ).addClass( this.settings.pendingClass );\r\n\t\t\t\tthis.pending[ element.name ] = true;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tstopRequest: function( element, valid ) {\r\n\t\t\tthis.pendingRequest--;\r\n\r\n\t\t\t// Sometimes synchronization fails, make sure pendingRequest is never < 0\r\n\t\t\tif ( this.pendingRequest < 0 ) {\r\n\t\t\t\tthis.pendingRequest = 0;\r\n\t\t\t}\r\n\t\t\tdelete this.pending[ element.name ];\r\n\t\t\t$( element ).removeClass( this.settings.pendingClass );\r\n\t\t\tif ( valid && this.pendingRequest === 0 && this.formSubmitted && this.form() ) {\r\n\t\t\t\t$( this.currentForm ).submit();\r\n\t\t\t\tthis.formSubmitted = false;\r\n\t\t\t} else if ( !valid && this.pendingRequest === 0 && this.formSubmitted ) {\r\n\t\t\t\t$( this.currentForm ).triggerHandler( \"invalid-form\", [ this ] );\r\n\t\t\t\tthis.formSubmitted = false;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tpreviousValue: function( element, method ) {\r\n\t\t\treturn $.data( element, \"previousValue\" ) || $.data( element, \"previousValue\", {\r\n\t\t\t\told: null,\r\n\t\t\t\tvalid: true,\r\n\t\t\t\tmessage: this.defaultMessage( element, { method: method } )\r\n\t\t\t} );\r\n\t\t},\r\n\r\n\t\t// Cleans up all forms and elements, removes validator-specific events\r\n\t\tdestroy: function() {\r\n\t\t\tthis.resetForm();\r\n\r\n\t\t\t$( this.currentForm )\r\n\t\t\t\t.off( \".validate\" )\r\n\t\t\t\t.removeData( \"validator\" )\r\n\t\t\t\t.find( \".validate-equalTo-blur\" )\r\n\t\t\t\t\t.off( \".validate-equalTo\" )\r\n\t\t\t\t\t.removeClass( \"validate-equalTo-blur\" );\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclassRuleSettings: {\r\n\t\trequired: { required: true },\r\n\t\temail: { email: true },\r\n\t\turl: { url: true },\r\n\t\tdate: { date: true },\r\n\t\tdateISO: { dateISO: true },\r\n\t\tnumber: { number: true },\r\n\t\tdigits: { digits: true },\r\n\t\tcreditcard: { creditcard: true }\r\n\t},\r\n\r\n\taddClassRules: function( className, rules ) {\r\n\t\tif ( className.constructor === String ) {\r\n\t\t\tthis.classRuleSettings[ className ] = rules;\r\n\t\t} else {\r\n\t\t\t$.extend( this.classRuleSettings, className );\r\n\t\t}\r\n\t},\r\n\r\n\tclassRules: function( element ) {\r\n\t\tvar rules = {},\r\n\t\t\tclasses = $( element ).attr( \"class\" );\r\n\r\n\t\tif ( classes ) {\r\n\t\t\t$.each( classes.split( \" \" ), function() {\r\n\t\t\t\tif ( this in $.validator.classRuleSettings ) {\r\n\t\t\t\t\t$.extend( rules, $.validator.classRuleSettings[ this ] );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t}\r\n\t\treturn rules;\r\n\t},\r\n\r\n\tnormalizeAttributeRule: function( rules, type, method, value ) {\r\n\r\n\t\t// Convert the value to a number for number inputs, and for text for backwards compability\r\n\t\t// allows type=\"date\" and others to be compared as strings\r\n\t\tif ( /min|max|step/.test( method ) && ( type === null || /number|range|text/.test( type ) ) ) {\r\n\t\t\tvalue = Number( value );\r\n\r\n\t\t\t// Support Opera Mini, which returns NaN for undefined minlength\r\n\t\t\tif ( isNaN( value ) ) {\r\n\t\t\t\tvalue = undefined;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( value || value === 0 ) {\r\n\t\t\trules[ method ] = value;\r\n\t\t} else if ( type === method && type !== \"range\" ) {\r\n\r\n\t\t\t// Exception: the jquery validate 'range' method\r\n\t\t\t// does not test for the html5 'range' type\r\n\t\t\trules[ method ] = true;\r\n\t\t}\r\n\t},\r\n\r\n\tattributeRules: function( element ) {\r\n\t\tvar rules = {},\r\n\t\t\t$element = $( element ),\r\n\t\t\ttype = element.getAttribute( \"type\" ),\r\n\t\t\tmethod, value;\r\n\r\n\t\tfor ( method in $.validator.methods ) {\r\n\r\n\t\t\t// Support for <input required> in both html5 and older browsers\r\n\t\t\tif ( method === \"required\" ) {\r\n\t\t\t\tvalue = element.getAttribute( method );\r\n\r\n\t\t\t\t// Some browsers return an empty string for the required attribute\r\n\t\t\t\t// and non-HTML5 browsers might have required=\"\" markup\r\n\t\t\t\tif ( value === \"\" ) {\r\n\t\t\t\t\tvalue = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Force non-HTML5 browsers to return bool\r\n\t\t\t\tvalue = !!value;\r\n\t\t\t} else {\r\n\t\t\t\tvalue = $element.attr( method );\r\n\t\t\t}\r\n\r\n\t\t\tthis.normalizeAttributeRule( rules, type, method, value );\r\n\t\t}\r\n\r\n\t\t// 'maxlength' may be returned as -1, 2147483647 ( IE ) and 524288 ( safari ) for text inputs\r\n\t\tif ( rules.maxlength && /-1|2147483647|524288/.test( rules.maxlength ) ) {\r\n\t\t\tdelete rules.maxlength;\r\n\t\t}\r\n\r\n\t\treturn rules;\r\n\t},\r\n\r\n\tdataRules: function( element ) {\r\n\t\tvar rules = {},\r\n\t\t\t$element = $( element ),\r\n\t\t\ttype = element.getAttribute( \"type\" ),\r\n\t\t\tmethod, value;\r\n\r\n\t\tfor ( method in $.validator.methods ) {\r\n\t\t\tvalue = $element.data( \"rule\" + method.charAt( 0 ).toUpperCase() + method.substring( 1 ).toLowerCase() );\r\n\t\t\tthis.normalizeAttributeRule( rules, type, method, value );\r\n\t\t}\r\n\t\treturn rules;\r\n\t},\r\n\r\n\tstaticRules: function( element ) {\r\n\t\tvar rules = {},\r\n\t\t\tvalidator = $.data( element.form, \"validator\" );\r\n\r\n\t\tif ( validator.settings.rules ) {\r\n\t\t\trules = $.validator.normalizeRule( validator.settings.rules[ element.name ] ) || {};\r\n\t\t}\r\n\t\treturn rules;\r\n\t},\r\n\r\n\tnormalizeRules: function( rules, element ) {\r\n\r\n\t\t// Handle dependency check\r\n\t\t$.each( rules, function( prop, val ) {\r\n\r\n\t\t\t// Ignore rule when param is explicitly false, eg. required:false\r\n\t\t\tif ( val === false ) {\r\n\t\t\t\tdelete rules[ prop ];\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif ( val.param || val.depends ) {\r\n\t\t\t\tvar keepRule = true;\r\n\t\t\t\tswitch ( typeof val.depends ) {\r\n\t\t\t\tcase \"string\":\r\n\t\t\t\t\tkeepRule = !!$( val.depends, element.form ).length;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"function\":\r\n\t\t\t\t\tkeepRule = val.depends.call( element, element );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif ( keepRule ) {\r\n\t\t\t\t\trules[ prop ] = val.param !== undefined ? val.param : true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$.data( element.form, \"validator\" ).resetElements( $( element ) );\r\n\t\t\t\t\tdelete rules[ prop ];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\t// Evaluate parameters\r\n\t\t$.each( rules, function( rule, parameter ) {\r\n\t\t\trules[ rule ] = $.isFunction( parameter ) && rule !== \"normalizer\" ? parameter( element ) : parameter;\r\n\t\t} );\r\n\r\n\t\t// Clean number parameters\r\n\t\t$.each( [ \"minlength\", \"maxlength\" ], function() {\r\n\t\t\tif ( rules[ this ] ) {\r\n\t\t\t\trules[ this ] = Number( rules[ this ] );\r\n\t\t\t}\r\n\t\t} );\r\n\t\t$.each( [ \"rangelength\", \"range\" ], function() {\r\n\t\t\tvar parts;\r\n\t\t\tif ( rules[ this ] ) {\r\n\t\t\t\tif ( $.isArray( rules[ this ] ) ) {\r\n\t\t\t\t\trules[ this ] = [ Number( rules[ this ][ 0 ] ), Number( rules[ this ][ 1 ] ) ];\r\n\t\t\t\t} else if ( typeof rules[ this ] === \"string\" ) {\r\n\t\t\t\t\tparts = rules[ this ].replace( /[\\[\\]]/g, \"\" ).split( /[\\s,]+/ );\r\n\t\t\t\t\trules[ this ] = [ Number( parts[ 0 ] ), Number( parts[ 1 ] ) ];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\tif ( $.validator.autoCreateRanges ) {\r\n\r\n\t\t\t// Auto-create ranges\r\n\t\t\tif ( rules.min != null && rules.max != null ) {\r\n\t\t\t\trules.range = [ rules.min, rules.max ];\r\n\t\t\t\tdelete rules.min;\r\n\t\t\t\tdelete rules.max;\r\n\t\t\t}\r\n\t\t\tif ( rules.minlength != null && rules.maxlength != null ) {\r\n\t\t\t\trules.rangelength = [ rules.minlength, rules.maxlength ];\r\n\t\t\t\tdelete rules.minlength;\r\n\t\t\t\tdelete rules.maxlength;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn rules;\r\n\t},\r\n\r\n\t// Converts a simple string to a {string: true} rule, e.g., \"required\" to {required:true}\r\n\tnormalizeRule: function( data ) {\r\n\t\tif ( typeof data === \"string\" ) {\r\n\t\t\tvar transformed = {};\r\n\t\t\t$.each( data.split( /\\s/ ), function() {\r\n\t\t\t\ttransformed[ this ] = true;\r\n\t\t\t} );\r\n\t\t\tdata = transformed;\r\n\t\t}\r\n\t\treturn data;\r\n\t},\r\n\r\n\t// http://jqueryvalidation.org/jQuery.validator.addMethod/\r\n\taddMethod: function( name, method, message ) {\r\n\t\t$.validator.methods[ name ] = method;\r\n\t\t$.validator.messages[ name ] = message !== undefined ? message : $.validator.messages[ name ];\r\n\t\tif ( method.length < 3 ) {\r\n\t\t\t$.validator.addClassRules( name, $.validator.normalizeRule( name ) );\r\n\t\t}\r\n\t},\r\n\r\n\t// http://jqueryvalidation.org/jQuery.validator.methods/\r\n\tmethods: {\r\n\r\n\t\t// http://jqueryvalidation.org/required-method/\r\n\t\trequired: function( value, element, param ) {\r\n\r\n\t\t\t// Check if dependency is met\r\n\t\t\tif ( !this.depend( param, element ) ) {\r\n\t\t\t\treturn \"dependency-mismatch\";\r\n\t\t\t}\r\n\t\t\tif ( element.nodeName.toLowerCase() === \"select\" ) {\r\n\r\n\t\t\t\t// Could be an array for select-multiple or a string, both are fine this way\r\n\t\t\t\tvar val = $( element ).val();\r\n\t\t\t\treturn val && val.length > 0;\r\n\t\t\t}\r\n\t\t\tif ( this.checkable( element ) ) {\r\n\t\t\t\treturn this.getLength( value, element ) > 0;\r\n\t\t\t}\r\n\t\t\treturn value.length > 0;\r\n\t\t},\r\n\r\n\t\t// http://jqueryvalidation.org/email-method/\r\n\t\temail: function( value, element ) {\r\n\r\n\t\t\t// From https://html.spec.whatwg.org/multipage/forms.html#valid-e-mail-address\r\n\t\t\t// Retrieved 2014-01-14\r\n\t\t\t// If you have a problem with this implementation, report a bug against the above spec\r\n\t\t\t// Or use custom methods to implement your own email validation\r\n\t\t\treturn this.optional( element ) || /^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test( value );\r\n\t\t},\r\n\r\n\t\t// http://jqueryvalidation.org/url-method/\r\n\t\turl: function( value, element ) {\r\n\r\n\t\t\t// Copyright (c) 2010-2013 Diego Perini, MIT licensed\r\n\t\t\t// https://gist.github.com/dperini/729294\r\n\t\t\t// see also https://mathiasbynens.be/demo/url-regex\r\n\t\t\t// modified to allow protocol-relative URLs\r\n\t\t\treturn this.optional( element ) || /^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})).?)(?::\\d{2,5})?(?:[/?#]\\S*)?$/i.test( value );\r\n\t\t},\r\n\r\n\t\t// http://jqueryvalidation.org/date-method/\r\n\t\tdate: function( value, element ) {\r\n\t\t\treturn this.optional( element ) || !/Invalid|NaN/.test( new Date( value ).toString() );\r\n\t\t},\r\n\r\n\t\t// http://jqueryvalidation.org/dateISO-method/\r\n\t\tdateISO: function( value, element ) {\r\n\t\t\treturn this.optional( element ) || /^\\d{4}[\\/\\-](0?[1-9]|1[012])[\\/\\-](0?[1-9]|[12][0-9]|3[01])$/.test( value );\r\n\t\t},\r\n\r\n\t\t// http://jqueryvalidation.org/number-method/\r\n\t\tnumber: function( value, element ) {\r\n\t\t\treturn this.optional( element ) || /^(?:-?\\d+|-?\\d{1,3}(?:,\\d{3})+)?(?:\\.\\d+)?$/.test( value );\r\n\t\t},\r\n\r\n\t\t// http://jqueryvalidation.org/digits-method/\r\n\t\tdigits: function( value, element ) {\r\n\t\t\treturn this.optional( element ) || /^\\d+$/.test( value );\r\n\t\t},\r\n\r\n\t\t// http://jqueryvalidation.org/minlength-method/\r\n\t\tminlength: function( value, element, param ) {\r\n\t\t\tvar length = $.isArray( value ) ? value.length : this.getLength( value, element );\r\n\t\t\treturn this.optional( element ) || length >= param;\r\n\t\t},\r\n\r\n\t\t// http://jqueryvalidation.org/maxlength-method/\r\n\t\tmaxlength: function( value, element, param ) {\r\n\t\t\tvar length = $.isArray( value ) ? value.length : this.getLength( value, element );\r\n\t\t\treturn this.optional( element ) || length <= param;\r\n\t\t},\r\n\r\n\t\t// http://jqueryvalidation.org/rangelength-method/\r\n\t\trangelength: function( value, element, param ) {\r\n\t\t\tvar length = $.isArray( value ) ? value.length : this.getLength( value, element );\r\n\t\t\treturn this.optional( element ) || ( length >= param[ 0 ] && length <= param[ 1 ] );\r\n\t\t},\r\n\r\n\t\t// http://jqueryvalidation.org/min-method/\r\n\t\tmin: function( value, element, param ) {\r\n\t\t\treturn this.optional( element ) || value >= param;\r\n\t\t},\r\n\r\n\t\t// http://jqueryvalidation.org/max-method/\r\n\t\tmax: function( value, element, param ) {\r\n\t\t\treturn this.optional( element ) || value <= param;\r\n\t\t},\r\n\r\n\t\t// http://jqueryvalidation.org/range-method/\r\n\t\trange: function( value, element, param ) {\r\n\t\t\treturn this.optional( element ) || ( value >= param[ 0 ] && value <= param[ 1 ] );\r\n\t\t},\r\n\r\n\t\t// http://jqueryvalidation.org/step-method/\r\n\t\tstep: function( value, element, param ) {\r\n\t\t\tvar type = $( element ).attr( \"type\" ),\r\n\t\t\t\terrorMessage = \"Step attribute on input type \" + type + \" is not supported.\",\r\n\t\t\t\tsupportedTypes = [ \"text\", \"number\", \"range\" ],\r\n\t\t\t\tre = new RegExp( \"\\\\b\" + type + \"\\\\b\" ),\r\n\t\t\t\tnotSupported = type && !re.test( supportedTypes.join() );\r\n\r\n\t\t\t// Works only for text, number and range input types\r\n\t\t\t// TODO find a way to support input types date, datetime, datetime-local, month, time and week\r\n\t\t\tif ( notSupported ) {\r\n\t\t\t\tthrow new Error( errorMessage );\r\n\t\t\t}\r\n\t\t\treturn this.optional( element ) || ( value % param === 0 );\r\n\t\t},\r\n\r\n\t\t// http://jqueryvalidation.org/equalTo-method/\r\n\t\tequalTo: function( value, element, param ) {\r\n\r\n\t\t\t// Bind to the blur event of the target in order to revalidate whenever the target field is updated\r\n\t\t\tvar target = $( param );\r\n\t\t\tif ( this.settings.onfocusout && target.not( \".validate-equalTo-blur\" ).length ) {\r\n\t\t\t\ttarget.addClass( \"validate-equalTo-blur\" ).on( \"blur.validate-equalTo\", function() {\r\n\t\t\t\t\t$( element ).valid();\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t\treturn value === target.val();\r\n\t\t},\r\n\r\n\t\t// http://jqueryvalidation.org/remote-method/\r\n\t\tremote: function( value, element, param, method ) {\r\n\t\t\tif ( this.optional( element ) ) {\r\n\t\t\t\treturn \"dependency-mismatch\";\r\n\t\t\t}\r\n\r\n\t\t\tmethod = typeof method === \"string\" && method || \"remote\";\r\n\r\n\t\t\tvar previous = this.previousValue( element, method ),\r\n\t\t\t\tvalidator, data, optionDataString;\r\n\r\n\t\t\tif ( !this.settings.messages[ element.name ] ) {\r\n\t\t\t\tthis.settings.messages[ element.name ] = {};\r\n\t\t\t}\r\n\t\t\tprevious.originalMessage = previous.originalMessage || this.settings.messages[ element.name ][ method ];\r\n\t\t\tthis.settings.messages[ element.name ][ method ] = previous.message;\r\n\r\n\t\t\tparam = typeof param === \"string\" && { url: param } || param;\r\n\t\t\toptionDataString = $.param( $.extend( { data: value }, param.data ) );\r\n\t\t\tif ( previous.old === optionDataString ) {\r\n\t\t\t\treturn previous.valid;\r\n\t\t\t}\r\n\r\n\t\t\tprevious.old = optionDataString;\r\n\t\t\tvalidator = this;\r\n\t\t\tthis.startRequest( element );\r\n\t\t\tdata = {};\r\n\t\t\tdata[ element.name ] = value;\r\n\t\t\t$.ajax( $.extend( true, {\r\n\t\t\t\tmode: \"abort\",\r\n\t\t\t\tport: \"validate\" + element.name,\r\n\t\t\t\tdataType: \"json\",\r\n\t\t\t\tdata: data,\r\n\t\t\t\tcontext: validator.currentForm,\r\n\t\t\t\tsuccess: function( response ) {\r\n\t\t\t\t\tvar valid = response === true || response === \"true\",\r\n\t\t\t\t\t\terrors, message, submitted;\r\n\r\n\t\t\t\t\tvalidator.settings.messages[ element.name ][ method ] = previous.originalMessage;\r\n\t\t\t\t\tif ( valid ) {\r\n\t\t\t\t\t\tsubmitted = validator.formSubmitted;\r\n\t\t\t\t\t\tvalidator.resetInternals();\r\n\t\t\t\t\t\tvalidator.toHide = validator.errorsFor( element );\r\n\t\t\t\t\t\tvalidator.formSubmitted = submitted;\r\n\t\t\t\t\t\tvalidator.successList.push( element );\r\n\t\t\t\t\t\tvalidator.invalid[ element.name ] = false;\r\n\t\t\t\t\t\tvalidator.showErrors();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\terrors = {};\r\n\t\t\t\t\t\tmessage = response || validator.defaultMessage( element, { method: method, parameters: value } );\r\n\t\t\t\t\t\terrors[ element.name ] = previous.message = message;\r\n\t\t\t\t\t\tvalidator.invalid[ element.name ] = true;\r\n\t\t\t\t\t\tvalidator.showErrors( errors );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprevious.valid = valid;\r\n\t\t\t\t\tvalidator.stopRequest( element, valid );\r\n\t\t\t\t}\r\n\t\t\t}, param ) );\r\n\t\t\treturn \"pending\";\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\n// Ajax mode: abort\r\n// usage: $.ajax({ mode: \"abort\"[, port: \"uniqueport\"]});\r\n// if mode:\"abort\" is used, the previous request on that port (port can be undefined) is aborted via XMLHttpRequest.abort()\r\n\r\nvar pendingRequests = {},\r\n\tajax;\r\n\r\n// Use a prefilter if available (1.5+)\r\nif ( $.ajaxPrefilter ) {\r\n\t$.ajaxPrefilter( function( settings, _, xhr ) {\r\n\t\tvar port = settings.port;\r\n\t\tif ( settings.mode === \"abort\" ) {\r\n\t\t\tif ( pendingRequests[ port ] ) {\r\n\t\t\t\tpendingRequests[ port ].abort();\r\n\t\t\t}\r\n\t\t\tpendingRequests[ port ] = xhr;\r\n\t\t}\r\n\t} );\r\n} else {\r\n\r\n\t// Proxy ajax\r\n\tajax = $.ajax;\r\n\t$.ajax = function( settings ) {\r\n\t\tvar mode = ( \"mode\" in settings ? settings : $.ajaxSettings ).mode,\r\n\t\t\tport = ( \"port\" in settings ? settings : $.ajaxSettings ).port;\r\n\t\tif ( mode === \"abort\" ) {\r\n\t\t\tif ( pendingRequests[ port ] ) {\r\n\t\t\t\tpendingRequests[ port ].abort();\r\n\t\t\t}\r\n\t\t\tpendingRequests[ port ] = ajax.apply( this, arguments );\r\n\t\t\treturn pendingRequests[ port ];\r\n\t\t}\r\n\t\treturn ajax.apply( this, arguments );\r\n\t};\r\n}\r\n\r\n}));//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy92YWxpZGF0ZS9qcXVlcnkudmFsaWRhdGUuanM/NGYwNCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7O0FBRUEsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUEsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsa0JBQWtCO0FBQ3ZDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsZ0JBQWdCO0FBQzNDOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLFlBQVk7QUFDdkQ7QUFDQSxHQUFHO0FBQ0gsRUFBRTtBQUNGO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxjQUFjO0FBQ2QsWUFBWTtBQUNaLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsRUFBRTtBQUMvRCx5REFBeUQsRUFBRTtBQUMzRCxrRUFBa0UsRUFBRSxNQUFNLEVBQUU7QUFDNUUsNERBQTRELEVBQUUsTUFBTSxFQUFFO0FBQ3RFLHdFQUF3RSxFQUFFO0FBQzFFLDJFQUEyRSxFQUFFO0FBQzdFLHlEQUF5RCxFQUFFO0FBQzNELEVBQUU7O0FBRUY7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsMEVBQTBFLGVBQWU7QUFDekY7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQSxnQkFBZ0IsZUFBZTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHVDQUF1QztBQUN2QztBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQ7QUFDckQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsbUJBQW1CLHNCQUFzQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLE9BQU87QUFDNUI7QUFDQTtBQUNBLElBQUk7QUFDSiwrREFBK0QsR0FBRztBQUNsRTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLGVBQWUscUJBQXFCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHVCQUF1QjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxlQUFlO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07O0FBRU47QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsWUFBWSxFQUFFO0FBQzdELEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsaUJBQWlCO0FBQzdELElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxFQUFFOztBQUVGO0FBQ0EsYUFBYSxpQkFBaUI7QUFDOUIsVUFBVSxjQUFjO0FBQ3hCLFFBQVEsWUFBWTtBQUNwQixTQUFTLGFBQWE7QUFDdEIsWUFBWSxnQkFBZ0I7QUFDNUIsV0FBVyxlQUFlO0FBQzFCLFdBQVcsZUFBZTtBQUMxQixlQUFlO0FBQ2YsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQSxnQkFBZ0I7QUFDaEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBLGdCQUFnQjtBQUNoQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRixtQ0FBbUMsYUFBYSw0QkFBNEI7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQW1FLEVBQUUsZ0NBQWdDLEtBQUssNkNBQTZDLEtBQUs7QUFDNUosR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEdBQThHLElBQUksRUFBRSxFQUFFLGlDQUFpQyxJQUFJLEVBQUUsRUFBRSxzQ0FBc0MsSUFBSSxFQUFFLEVBQUUsZ0RBQWdELElBQUksb0JBQW9CLEVBQUUsb0xBQW9MLEdBQUcsWUFBWSxJQUFJO0FBQzlkLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsMkNBQTJDLEVBQUU7QUFDN0MsR0FBRzs7QUFFSDtBQUNBO0FBQ0Esc0RBQXNELElBQUksT0FBTyxFQUFFO0FBQ25FLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx5Q0FBeUMsYUFBYTtBQUN0RCwwQ0FBMEMsY0FBYztBQUN4RDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxnRUFBZ0Usb0NBQW9DO0FBQ3BHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVEO0FBQ0Esa0JBQWtCLHFDQUFxQztBQUN2RDs7QUFFQSx3QkFBd0I7QUFDeEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQyIsImZpbGUiOiIxNS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxyXG4gKiBqUXVlcnkgVmFsaWRhdGlvbiBQbHVnaW4gdjEuMTUuMFxyXG4gKlxyXG4gKiBodHRwOi8vanF1ZXJ5dmFsaWRhdGlvbi5vcmcvXHJcbiAqXHJcbiAqIENvcHlyaWdodCAoYykgMjAxNiBKw7ZybiBaYWVmZmVyZXJcclxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXHJcbiAqL1xyXG4oZnVuY3Rpb24oIGZhY3RvcnkgKSB7XHJcblx0aWYgKCB0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCApIHtcclxuXHRcdGRlZmluZSggW1wianF1ZXJ5XCJdLCBmYWN0b3J5ICk7XHJcblx0fSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIG1vZHVsZS5leHBvcnRzKSB7XHJcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoIHJlcXVpcmUoIFwianF1ZXJ5XCIgKSApO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRmYWN0b3J5KCBqUXVlcnkgKTtcclxuXHR9XHJcbn0oZnVuY3Rpb24oICQgKSB7XHJcblxyXG4kLmV4dGVuZCggJC5mbiwge1xyXG5cclxuXHQvLyBodHRwOi8vanF1ZXJ5dmFsaWRhdGlvbi5vcmcvdmFsaWRhdGUvXHJcblx0dmFsaWRhdGU6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cclxuXHRcdC8vIElmIG5vdGhpbmcgaXMgc2VsZWN0ZWQsIHJldHVybiBub3RoaW5nOyBjYW4ndCBjaGFpbiBhbnl3YXlcclxuXHRcdGlmICggIXRoaXMubGVuZ3RoICkge1xyXG5cdFx0XHRpZiAoIG9wdGlvbnMgJiYgb3B0aW9ucy5kZWJ1ZyAmJiB3aW5kb3cuY29uc29sZSApIHtcclxuXHRcdFx0XHRjb25zb2xlLndhcm4oIFwiTm90aGluZyBzZWxlY3RlZCwgY2FuJ3QgdmFsaWRhdGUsIHJldHVybmluZyBub3RoaW5nLlwiICk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGlmIGEgdmFsaWRhdG9yIGZvciB0aGlzIGZvcm0gd2FzIGFscmVhZHkgY3JlYXRlZFxyXG5cdFx0dmFyIHZhbGlkYXRvciA9ICQuZGF0YSggdGhpc1sgMCBdLCBcInZhbGlkYXRvclwiICk7XHJcblx0XHRpZiAoIHZhbGlkYXRvciApIHtcclxuXHRcdFx0cmV0dXJuIHZhbGlkYXRvcjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBBZGQgbm92YWxpZGF0ZSB0YWcgaWYgSFRNTDUuXHJcblx0XHR0aGlzLmF0dHIoIFwibm92YWxpZGF0ZVwiLCBcIm5vdmFsaWRhdGVcIiApO1xyXG5cclxuXHRcdHZhbGlkYXRvciA9IG5ldyAkLnZhbGlkYXRvciggb3B0aW9ucywgdGhpc1sgMCBdICk7XHJcblx0XHQkLmRhdGEoIHRoaXNbIDAgXSwgXCJ2YWxpZGF0b3JcIiwgdmFsaWRhdG9yICk7XHJcblxyXG5cdFx0aWYgKCB2YWxpZGF0b3Iuc2V0dGluZ3Mub25zdWJtaXQgKSB7XHJcblxyXG5cdFx0XHR0aGlzLm9uKCBcImNsaWNrLnZhbGlkYXRlXCIsIFwiOnN1Ym1pdFwiLCBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdFx0aWYgKCB2YWxpZGF0b3Iuc2V0dGluZ3Muc3VibWl0SGFuZGxlciApIHtcclxuXHRcdFx0XHRcdHZhbGlkYXRvci5zdWJtaXRCdXR0b24gPSBldmVudC50YXJnZXQ7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBBbGxvdyBzdXBwcmVzc2luZyB2YWxpZGF0aW9uIGJ5IGFkZGluZyBhIGNhbmNlbCBjbGFzcyB0byB0aGUgc3VibWl0IGJ1dHRvblxyXG5cdFx0XHRcdGlmICggJCggdGhpcyApLmhhc0NsYXNzKCBcImNhbmNlbFwiICkgKSB7XHJcblx0XHRcdFx0XHR2YWxpZGF0b3IuY2FuY2VsU3VibWl0ID0gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIEFsbG93IHN1cHByZXNzaW5nIHZhbGlkYXRpb24gYnkgYWRkaW5nIHRoZSBodG1sNSBmb3Jtbm92YWxpZGF0ZSBhdHRyaWJ1dGUgdG8gdGhlIHN1Ym1pdCBidXR0b25cclxuXHRcdFx0XHRpZiAoICQoIHRoaXMgKS5hdHRyKCBcImZvcm1ub3ZhbGlkYXRlXCIgKSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdFx0dmFsaWRhdG9yLmNhbmNlbFN1Ym1pdCA9IHRydWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9ICk7XHJcblxyXG5cdFx0XHQvLyBWYWxpZGF0ZSB0aGUgZm9ybSBvbiBzdWJtaXRcclxuXHRcdFx0dGhpcy5vbiggXCJzdWJtaXQudmFsaWRhdGVcIiwgZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRcdGlmICggdmFsaWRhdG9yLnNldHRpbmdzLmRlYnVnICkge1xyXG5cclxuXHRcdFx0XHRcdC8vIFByZXZlbnQgZm9ybSBzdWJtaXQgdG8gYmUgYWJsZSB0byBzZWUgY29uc29sZSBvdXRwdXRcclxuXHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGZ1bmN0aW9uIGhhbmRsZSgpIHtcclxuXHRcdFx0XHRcdHZhciBoaWRkZW4sIHJlc3VsdDtcclxuXHRcdFx0XHRcdGlmICggdmFsaWRhdG9yLnNldHRpbmdzLnN1Ym1pdEhhbmRsZXIgKSB7XHJcblx0XHRcdFx0XHRcdGlmICggdmFsaWRhdG9yLnN1Ym1pdEJ1dHRvbiApIHtcclxuXHJcblx0XHRcdFx0XHRcdFx0Ly8gSW5zZXJ0IGEgaGlkZGVuIGlucHV0IGFzIGEgcmVwbGFjZW1lbnQgZm9yIHRoZSBtaXNzaW5nIHN1Ym1pdCBidXR0b25cclxuXHRcdFx0XHRcdFx0XHRoaWRkZW4gPSAkKCBcIjxpbnB1dCB0eXBlPSdoaWRkZW4nLz5cIiApXHJcblx0XHRcdFx0XHRcdFx0XHQuYXR0ciggXCJuYW1lXCIsIHZhbGlkYXRvci5zdWJtaXRCdXR0b24ubmFtZSApXHJcblx0XHRcdFx0XHRcdFx0XHQudmFsKCAkKCB2YWxpZGF0b3Iuc3VibWl0QnV0dG9uICkudmFsKCkgKVxyXG5cdFx0XHRcdFx0XHRcdFx0LmFwcGVuZFRvKCB2YWxpZGF0b3IuY3VycmVudEZvcm0gKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRyZXN1bHQgPSB2YWxpZGF0b3Iuc2V0dGluZ3Muc3VibWl0SGFuZGxlci5jYWxsKCB2YWxpZGF0b3IsIHZhbGlkYXRvci5jdXJyZW50Rm9ybSwgZXZlbnQgKTtcclxuXHRcdFx0XHRcdFx0aWYgKCB2YWxpZGF0b3Iuc3VibWl0QnV0dG9uICkge1xyXG5cclxuXHRcdFx0XHRcdFx0XHQvLyBBbmQgY2xlYW4gdXAgYWZ0ZXJ3YXJkczsgdGhhbmtzIHRvIG5vLWJsb2NrLXNjb3BlLCBoaWRkZW4gY2FuIGJlIHJlZmVyZW5jZWRcclxuXHRcdFx0XHRcdFx0XHRoaWRkZW4ucmVtb3ZlKCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0aWYgKCByZXN1bHQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gUHJldmVudCBzdWJtaXQgZm9yIGludmFsaWQgZm9ybXMgb3IgY3VzdG9tIHN1Ym1pdCBoYW5kbGVyc1xyXG5cdFx0XHRcdGlmICggdmFsaWRhdG9yLmNhbmNlbFN1Ym1pdCApIHtcclxuXHRcdFx0XHRcdHZhbGlkYXRvci5jYW5jZWxTdWJtaXQgPSBmYWxzZTtcclxuXHRcdFx0XHRcdHJldHVybiBoYW5kbGUoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKCB2YWxpZGF0b3IuZm9ybSgpICkge1xyXG5cdFx0XHRcdFx0aWYgKCB2YWxpZGF0b3IucGVuZGluZ1JlcXVlc3QgKSB7XHJcblx0XHRcdFx0XHRcdHZhbGlkYXRvci5mb3JtU3VibWl0dGVkID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0cmV0dXJuIGhhbmRsZSgpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHR2YWxpZGF0b3IuZm9jdXNJbnZhbGlkKCk7XHJcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9ICk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHZhbGlkYXRvcjtcclxuXHR9LFxyXG5cclxuXHQvLyBodHRwOi8vanF1ZXJ5dmFsaWRhdGlvbi5vcmcvdmFsaWQvXHJcblx0dmFsaWQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHZhbGlkLCB2YWxpZGF0b3IsIGVycm9yTGlzdDtcclxuXHJcblx0XHRpZiAoICQoIHRoaXNbIDAgXSApLmlzKCBcImZvcm1cIiApICkge1xyXG5cdFx0XHR2YWxpZCA9IHRoaXMudmFsaWRhdGUoKS5mb3JtKCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRlcnJvckxpc3QgPSBbXTtcclxuXHRcdFx0dmFsaWQgPSB0cnVlO1xyXG5cdFx0XHR2YWxpZGF0b3IgPSAkKCB0aGlzWyAwIF0uZm9ybSApLnZhbGlkYXRlKCk7XHJcblx0XHRcdHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFsaWQgPSB2YWxpZGF0b3IuZWxlbWVudCggdGhpcyApICYmIHZhbGlkO1xyXG5cdFx0XHRcdGlmICggIXZhbGlkICkge1xyXG5cdFx0XHRcdFx0ZXJyb3JMaXN0ID0gZXJyb3JMaXN0LmNvbmNhdCggdmFsaWRhdG9yLmVycm9yTGlzdCApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSApO1xyXG5cdFx0XHR2YWxpZGF0b3IuZXJyb3JMaXN0ID0gZXJyb3JMaXN0O1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHZhbGlkO1xyXG5cdH0sXHJcblxyXG5cdC8vIGh0dHA6Ly9qcXVlcnl2YWxpZGF0aW9uLm9yZy9ydWxlcy9cclxuXHRydWxlczogZnVuY3Rpb24oIGNvbW1hbmQsIGFyZ3VtZW50ICkge1xyXG5cclxuXHRcdC8vIElmIG5vdGhpbmcgaXMgc2VsZWN0ZWQsIHJldHVybiBub3RoaW5nOyBjYW4ndCBjaGFpbiBhbnl3YXlcclxuXHRcdGlmICggIXRoaXMubGVuZ3RoICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dmFyIGVsZW1lbnQgPSB0aGlzWyAwIF0sXHJcblx0XHRcdHNldHRpbmdzLCBzdGF0aWNSdWxlcywgZXhpc3RpbmdSdWxlcywgZGF0YSwgcGFyYW0sIGZpbHRlcmVkO1xyXG5cclxuXHRcdGlmICggY29tbWFuZCApIHtcclxuXHRcdFx0c2V0dGluZ3MgPSAkLmRhdGEoIGVsZW1lbnQuZm9ybSwgXCJ2YWxpZGF0b3JcIiApLnNldHRpbmdzO1xyXG5cdFx0XHRzdGF0aWNSdWxlcyA9IHNldHRpbmdzLnJ1bGVzO1xyXG5cdFx0XHRleGlzdGluZ1J1bGVzID0gJC52YWxpZGF0b3Iuc3RhdGljUnVsZXMoIGVsZW1lbnQgKTtcclxuXHRcdFx0c3dpdGNoICggY29tbWFuZCApIHtcclxuXHRcdFx0Y2FzZSBcImFkZFwiOlxyXG5cdFx0XHRcdCQuZXh0ZW5kKCBleGlzdGluZ1J1bGVzLCAkLnZhbGlkYXRvci5ub3JtYWxpemVSdWxlKCBhcmd1bWVudCApICk7XHJcblxyXG5cdFx0XHRcdC8vIFJlbW92ZSBtZXNzYWdlcyBmcm9tIHJ1bGVzLCBidXQgYWxsb3cgdGhlbSB0byBiZSBzZXQgc2VwYXJhdGVseVxyXG5cdFx0XHRcdGRlbGV0ZSBleGlzdGluZ1J1bGVzLm1lc3NhZ2VzO1xyXG5cdFx0XHRcdHN0YXRpY1J1bGVzWyBlbGVtZW50Lm5hbWUgXSA9IGV4aXN0aW5nUnVsZXM7XHJcblx0XHRcdFx0aWYgKCBhcmd1bWVudC5tZXNzYWdlcyApIHtcclxuXHRcdFx0XHRcdHNldHRpbmdzLm1lc3NhZ2VzWyBlbGVtZW50Lm5hbWUgXSA9ICQuZXh0ZW5kKCBzZXR0aW5ncy5tZXNzYWdlc1sgZWxlbWVudC5uYW1lIF0sIGFyZ3VtZW50Lm1lc3NhZ2VzICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIFwicmVtb3ZlXCI6XHJcblx0XHRcdFx0aWYgKCAhYXJndW1lbnQgKSB7XHJcblx0XHRcdFx0XHRkZWxldGUgc3RhdGljUnVsZXNbIGVsZW1lbnQubmFtZSBdO1xyXG5cdFx0XHRcdFx0cmV0dXJuIGV4aXN0aW5nUnVsZXM7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGZpbHRlcmVkID0ge307XHJcblx0XHRcdFx0JC5lYWNoKCBhcmd1bWVudC5zcGxpdCggL1xccy8gKSwgZnVuY3Rpb24oIGluZGV4LCBtZXRob2QgKSB7XHJcblx0XHRcdFx0XHRmaWx0ZXJlZFsgbWV0aG9kIF0gPSBleGlzdGluZ1J1bGVzWyBtZXRob2QgXTtcclxuXHRcdFx0XHRcdGRlbGV0ZSBleGlzdGluZ1J1bGVzWyBtZXRob2QgXTtcclxuXHRcdFx0XHRcdGlmICggbWV0aG9kID09PSBcInJlcXVpcmVkXCIgKSB7XHJcblx0XHRcdFx0XHRcdCQoIGVsZW1lbnQgKS5yZW1vdmVBdHRyKCBcImFyaWEtcmVxdWlyZWRcIiApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gKTtcclxuXHRcdFx0XHRyZXR1cm4gZmlsdGVyZWQ7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRkYXRhID0gJC52YWxpZGF0b3Iubm9ybWFsaXplUnVsZXMoXHJcblx0XHQkLmV4dGVuZChcclxuXHRcdFx0e30sXHJcblx0XHRcdCQudmFsaWRhdG9yLmNsYXNzUnVsZXMoIGVsZW1lbnQgKSxcclxuXHRcdFx0JC52YWxpZGF0b3IuYXR0cmlidXRlUnVsZXMoIGVsZW1lbnQgKSxcclxuXHRcdFx0JC52YWxpZGF0b3IuZGF0YVJ1bGVzKCBlbGVtZW50ICksXHJcblx0XHRcdCQudmFsaWRhdG9yLnN0YXRpY1J1bGVzKCBlbGVtZW50IClcclxuXHRcdCksIGVsZW1lbnQgKTtcclxuXHJcblx0XHQvLyBNYWtlIHN1cmUgcmVxdWlyZWQgaXMgYXQgZnJvbnRcclxuXHRcdGlmICggZGF0YS5yZXF1aXJlZCApIHtcclxuXHRcdFx0cGFyYW0gPSBkYXRhLnJlcXVpcmVkO1xyXG5cdFx0XHRkZWxldGUgZGF0YS5yZXF1aXJlZDtcclxuXHRcdFx0ZGF0YSA9ICQuZXh0ZW5kKCB7IHJlcXVpcmVkOiBwYXJhbSB9LCBkYXRhICk7XHJcblx0XHRcdCQoIGVsZW1lbnQgKS5hdHRyKCBcImFyaWEtcmVxdWlyZWRcIiwgXCJ0cnVlXCIgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBNYWtlIHN1cmUgcmVtb3RlIGlzIGF0IGJhY2tcclxuXHRcdGlmICggZGF0YS5yZW1vdGUgKSB7XHJcblx0XHRcdHBhcmFtID0gZGF0YS5yZW1vdGU7XHJcblx0XHRcdGRlbGV0ZSBkYXRhLnJlbW90ZTtcclxuXHRcdFx0ZGF0YSA9ICQuZXh0ZW5kKCBkYXRhLCB7IHJlbW90ZTogcGFyYW0gfSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBkYXRhO1xyXG5cdH1cclxufSApO1xyXG5cclxuLy8gQ3VzdG9tIHNlbGVjdG9yc1xyXG4kLmV4dGVuZCggJC5leHByWyBcIjpcIiBdLCB7XHJcblxyXG5cdC8vIGh0dHA6Ly9qcXVlcnl2YWxpZGF0aW9uLm9yZy9ibGFuay1zZWxlY3Rvci9cclxuXHRibGFuazogZnVuY3Rpb24oIGEgKSB7XHJcblx0XHRyZXR1cm4gISQudHJpbSggXCJcIiArICQoIGEgKS52YWwoKSApO1xyXG5cdH0sXHJcblxyXG5cdC8vIGh0dHA6Ly9qcXVlcnl2YWxpZGF0aW9uLm9yZy9maWxsZWQtc2VsZWN0b3IvXHJcblx0ZmlsbGVkOiBmdW5jdGlvbiggYSApIHtcclxuXHRcdHZhciB2YWwgPSAkKCBhICkudmFsKCk7XHJcblx0XHRyZXR1cm4gdmFsICE9PSBudWxsICYmICEhJC50cmltKCBcIlwiICsgdmFsICk7XHJcblx0fSxcclxuXHJcblx0Ly8gaHR0cDovL2pxdWVyeXZhbGlkYXRpb24ub3JnL3VuY2hlY2tlZC1zZWxlY3Rvci9cclxuXHR1bmNoZWNrZWQ6IGZ1bmN0aW9uKCBhICkge1xyXG5cdFx0cmV0dXJuICEkKCBhICkucHJvcCggXCJjaGVja2VkXCIgKTtcclxuXHR9XHJcbn0gKTtcclxuXHJcbi8vIENvbnN0cnVjdG9yIGZvciB2YWxpZGF0b3JcclxuJC52YWxpZGF0b3IgPSBmdW5jdGlvbiggb3B0aW9ucywgZm9ybSApIHtcclxuXHR0aGlzLnNldHRpbmdzID0gJC5leHRlbmQoIHRydWUsIHt9LCAkLnZhbGlkYXRvci5kZWZhdWx0cywgb3B0aW9ucyApO1xyXG5cdHRoaXMuY3VycmVudEZvcm0gPSBmb3JtO1xyXG5cdHRoaXMuaW5pdCgpO1xyXG59O1xyXG5cclxuLy8gaHR0cDovL2pxdWVyeXZhbGlkYXRpb24ub3JnL2pRdWVyeS52YWxpZGF0b3IuZm9ybWF0L1xyXG4kLnZhbGlkYXRvci5mb3JtYXQgPSBmdW5jdGlvbiggc291cmNlLCBwYXJhbXMgKSB7XHJcblx0aWYgKCBhcmd1bWVudHMubGVuZ3RoID09PSAxICkge1xyXG5cdFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgYXJncyA9ICQubWFrZUFycmF5KCBhcmd1bWVudHMgKTtcclxuXHRcdFx0YXJncy51bnNoaWZ0KCBzb3VyY2UgKTtcclxuXHRcdFx0cmV0dXJuICQudmFsaWRhdG9yLmZvcm1hdC5hcHBseSggdGhpcywgYXJncyApO1xyXG5cdFx0fTtcclxuXHR9XHJcblx0aWYgKCBwYXJhbXMgPT09IHVuZGVmaW5lZCApIHtcclxuXHRcdHJldHVybiBzb3VyY2U7XHJcblx0fVxyXG5cdGlmICggYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgcGFyYW1zLmNvbnN0cnVjdG9yICE9PSBBcnJheSAgKSB7XHJcblx0XHRwYXJhbXMgPSAkLm1ha2VBcnJheSggYXJndW1lbnRzICkuc2xpY2UoIDEgKTtcclxuXHR9XHJcblx0aWYgKCBwYXJhbXMuY29uc3RydWN0b3IgIT09IEFycmF5ICkge1xyXG5cdFx0cGFyYW1zID0gWyBwYXJhbXMgXTtcclxuXHR9XHJcblx0JC5lYWNoKCBwYXJhbXMsIGZ1bmN0aW9uKCBpLCBuICkge1xyXG5cdFx0c291cmNlID0gc291cmNlLnJlcGxhY2UoIG5ldyBSZWdFeHAoIFwiXFxcXHtcIiArIGkgKyBcIlxcXFx9XCIsIFwiZ1wiICksIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gbjtcclxuXHRcdH0gKTtcclxuXHR9ICk7XHJcblx0cmV0dXJuIHNvdXJjZTtcclxufTtcclxuXHJcbiQuZXh0ZW5kKCAkLnZhbGlkYXRvciwge1xyXG5cclxuXHRkZWZhdWx0czoge1xyXG5cdFx0bWVzc2FnZXM6IHt9LFxyXG5cdFx0Z3JvdXBzOiB7fSxcclxuXHRcdHJ1bGVzOiB7fSxcclxuXHRcdGVycm9yQ2xhc3M6IFwiZXJyb3JcIixcclxuXHRcdHBlbmRpbmdDbGFzczogXCJwZW5kaW5nXCIsXHJcblx0XHR2YWxpZENsYXNzOiBcInZhbGlkXCIsXHJcblx0XHRlcnJvckVsZW1lbnQ6IFwibGFiZWxcIixcclxuXHRcdGZvY3VzQ2xlYW51cDogZmFsc2UsXHJcblx0XHRmb2N1c0ludmFsaWQ6IHRydWUsXHJcblx0XHRlcnJvckNvbnRhaW5lcjogJCggW10gKSxcclxuXHRcdGVycm9yTGFiZWxDb250YWluZXI6ICQoIFtdICksXHJcblx0XHRvbnN1Ym1pdDogdHJ1ZSxcclxuXHRcdGlnbm9yZTogXCI6aGlkZGVuXCIsXHJcblx0XHRpZ25vcmVUaXRsZTogZmFsc2UsXHJcblx0XHRvbmZvY3VzaW46IGZ1bmN0aW9uKCBlbGVtZW50ICkge1xyXG5cdFx0XHR0aGlzLmxhc3RBY3RpdmUgPSBlbGVtZW50O1xyXG5cclxuXHRcdFx0Ly8gSGlkZSBlcnJvciBsYWJlbCBhbmQgcmVtb3ZlIGVycm9yIGNsYXNzIG9uIGZvY3VzIGlmIGVuYWJsZWRcclxuXHRcdFx0aWYgKCB0aGlzLnNldHRpbmdzLmZvY3VzQ2xlYW51cCApIHtcclxuXHRcdFx0XHRpZiAoIHRoaXMuc2V0dGluZ3MudW5oaWdobGlnaHQgKSB7XHJcblx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLnVuaGlnaGxpZ2h0LmNhbGwoIHRoaXMsIGVsZW1lbnQsIHRoaXMuc2V0dGluZ3MuZXJyb3JDbGFzcywgdGhpcy5zZXR0aW5ncy52YWxpZENsYXNzICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHRoaXMuaGlkZVRoZXNlKCB0aGlzLmVycm9yc0ZvciggZWxlbWVudCApICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRvbmZvY3Vzb3V0OiBmdW5jdGlvbiggZWxlbWVudCApIHtcclxuXHRcdFx0aWYgKCAhdGhpcy5jaGVja2FibGUoIGVsZW1lbnQgKSAmJiAoIGVsZW1lbnQubmFtZSBpbiB0aGlzLnN1Ym1pdHRlZCB8fCAhdGhpcy5vcHRpb25hbCggZWxlbWVudCApICkgKSB7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50KCBlbGVtZW50ICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRvbmtleXVwOiBmdW5jdGlvbiggZWxlbWVudCwgZXZlbnQgKSB7XHJcblxyXG5cdFx0XHQvLyBBdm9pZCByZXZhbGlkYXRlIHRoZSBmaWVsZCB3aGVuIHByZXNzaW5nIG9uZSBvZiB0aGUgZm9sbG93aW5nIGtleXNcclxuXHRcdFx0Ly8gU2hpZnQgICAgICAgPT4gMTZcclxuXHRcdFx0Ly8gQ3RybCAgICAgICAgPT4gMTdcclxuXHRcdFx0Ly8gQWx0ICAgICAgICAgPT4gMThcclxuXHRcdFx0Ly8gQ2FwcyBsb2NrICAgPT4gMjBcclxuXHRcdFx0Ly8gRW5kICAgICAgICAgPT4gMzVcclxuXHRcdFx0Ly8gSG9tZSAgICAgICAgPT4gMzZcclxuXHRcdFx0Ly8gTGVmdCBhcnJvdyAgPT4gMzdcclxuXHRcdFx0Ly8gVXAgYXJyb3cgICAgPT4gMzhcclxuXHRcdFx0Ly8gUmlnaHQgYXJyb3cgPT4gMzlcclxuXHRcdFx0Ly8gRG93biBhcnJvdyAgPT4gNDBcclxuXHRcdFx0Ly8gSW5zZXJ0ICAgICAgPT4gNDVcclxuXHRcdFx0Ly8gTnVtIGxvY2sgICAgPT4gMTQ0XHJcblx0XHRcdC8vIEFsdEdyIGtleSAgID0+IDIyNVxyXG5cdFx0XHR2YXIgZXhjbHVkZWRLZXlzID0gW1xyXG5cdFx0XHRcdDE2LCAxNywgMTgsIDIwLCAzNSwgMzYsIDM3LFxyXG5cdFx0XHRcdDM4LCAzOSwgNDAsIDQ1LCAxNDQsIDIyNVxyXG5cdFx0XHRdO1xyXG5cclxuXHRcdFx0aWYgKCBldmVudC53aGljaCA9PT0gOSAmJiB0aGlzLmVsZW1lbnRWYWx1ZSggZWxlbWVudCApID09PSBcIlwiIHx8ICQuaW5BcnJheSggZXZlbnQua2V5Q29kZSwgZXhjbHVkZWRLZXlzICkgIT09IC0xICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fSBlbHNlIGlmICggZWxlbWVudC5uYW1lIGluIHRoaXMuc3VibWl0dGVkIHx8IGVsZW1lbnQubmFtZSBpbiB0aGlzLmludmFsaWQgKSB7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50KCBlbGVtZW50ICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRvbmNsaWNrOiBmdW5jdGlvbiggZWxlbWVudCApIHtcclxuXHJcblx0XHRcdC8vIENsaWNrIG9uIHNlbGVjdHMsIHJhZGlvYnV0dG9ucyBhbmQgY2hlY2tib3hlc1xyXG5cdFx0XHRpZiAoIGVsZW1lbnQubmFtZSBpbiB0aGlzLnN1Ym1pdHRlZCApIHtcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQoIGVsZW1lbnQgKTtcclxuXHJcblx0XHRcdC8vIE9yIG9wdGlvbiBlbGVtZW50cywgY2hlY2sgcGFyZW50IHNlbGVjdCBpbiB0aGF0IGNhc2VcclxuXHRcdFx0fSBlbHNlIGlmICggZWxlbWVudC5wYXJlbnROb2RlLm5hbWUgaW4gdGhpcy5zdWJtaXR0ZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50KCBlbGVtZW50LnBhcmVudE5vZGUgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdGhpZ2hsaWdodDogZnVuY3Rpb24oIGVsZW1lbnQsIGVycm9yQ2xhc3MsIHZhbGlkQ2xhc3MgKSB7XHJcblx0XHRcdGlmICggZWxlbWVudC50eXBlID09PSBcInJhZGlvXCIgKSB7XHJcblx0XHRcdFx0dGhpcy5maW5kQnlOYW1lKCBlbGVtZW50Lm5hbWUgKS5hZGRDbGFzcyggZXJyb3JDbGFzcyApLnJlbW92ZUNsYXNzKCB2YWxpZENsYXNzICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JCggZWxlbWVudCApLmFkZENsYXNzKCBlcnJvckNsYXNzICkucmVtb3ZlQ2xhc3MoIHZhbGlkQ2xhc3MgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdHVuaGlnaGxpZ2h0OiBmdW5jdGlvbiggZWxlbWVudCwgZXJyb3JDbGFzcywgdmFsaWRDbGFzcyApIHtcclxuXHRcdFx0aWYgKCBlbGVtZW50LnR5cGUgPT09IFwicmFkaW9cIiApIHtcclxuXHRcdFx0XHR0aGlzLmZpbmRCeU5hbWUoIGVsZW1lbnQubmFtZSApLnJlbW92ZUNsYXNzKCBlcnJvckNsYXNzICkuYWRkQ2xhc3MoIHZhbGlkQ2xhc3MgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkKCBlbGVtZW50ICkucmVtb3ZlQ2xhc3MoIGVycm9yQ2xhc3MgKS5hZGRDbGFzcyggdmFsaWRDbGFzcyApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0Ly8gaHR0cDovL2pxdWVyeXZhbGlkYXRpb24ub3JnL2pRdWVyeS52YWxpZGF0b3Iuc2V0RGVmYXVsdHMvXHJcblx0c2V0RGVmYXVsdHM6IGZ1bmN0aW9uKCBzZXR0aW5ncyApIHtcclxuXHRcdCQuZXh0ZW5kKCAkLnZhbGlkYXRvci5kZWZhdWx0cywgc2V0dGluZ3MgKTtcclxuXHR9LFxyXG5cclxuXHRtZXNzYWdlczoge1xyXG5cdFx0cmVxdWlyZWQ6IFwiVGhpcyBmaWVsZCBpcyByZXF1aXJlZC5cIixcclxuXHRcdHJlbW90ZTogXCJQbGVhc2UgZml4IHRoaXMgZmllbGQuXCIsXHJcblx0XHRlbWFpbDogXCJQbGVhc2UgZW50ZXIgYSB2YWxpZCBlbWFpbCBhZGRyZXNzLlwiLFxyXG5cdFx0dXJsOiBcIlBsZWFzZSBlbnRlciBhIHZhbGlkIFVSTC5cIixcclxuXHRcdGRhdGU6IFwiUGxlYXNlIGVudGVyIGEgdmFsaWQgZGF0ZS5cIixcclxuXHRcdGRhdGVJU086IFwiUGxlYXNlIGVudGVyIGEgdmFsaWQgZGF0ZSAoIElTTyApLlwiLFxyXG5cdFx0bnVtYmVyOiBcIlBsZWFzZSBlbnRlciBhIHZhbGlkIG51bWJlci5cIixcclxuXHRcdGRpZ2l0czogXCJQbGVhc2UgZW50ZXIgb25seSBkaWdpdHMuXCIsXHJcblx0XHRlcXVhbFRvOiBcIlBsZWFzZSBlbnRlciB0aGUgc2FtZSB2YWx1ZSBhZ2Fpbi5cIixcclxuXHRcdG1heGxlbmd0aDogJC52YWxpZGF0b3IuZm9ybWF0KCBcIlBsZWFzZSBlbnRlciBubyBtb3JlIHRoYW4gezB9IGNoYXJhY3RlcnMuXCIgKSxcclxuXHRcdG1pbmxlbmd0aDogJC52YWxpZGF0b3IuZm9ybWF0KCBcIlBsZWFzZSBlbnRlciBhdCBsZWFzdCB7MH0gY2hhcmFjdGVycy5cIiApLFxyXG5cdFx0cmFuZ2VsZW5ndGg6ICQudmFsaWRhdG9yLmZvcm1hdCggXCJQbGVhc2UgZW50ZXIgYSB2YWx1ZSBiZXR3ZWVuIHswfSBhbmQgezF9IGNoYXJhY3RlcnMgbG9uZy5cIiApLFxyXG5cdFx0cmFuZ2U6ICQudmFsaWRhdG9yLmZvcm1hdCggXCJQbGVhc2UgZW50ZXIgYSB2YWx1ZSBiZXR3ZWVuIHswfSBhbmQgezF9LlwiICksXHJcblx0XHRtYXg6ICQudmFsaWRhdG9yLmZvcm1hdCggXCJQbGVhc2UgZW50ZXIgYSB2YWx1ZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gezB9LlwiICksXHJcblx0XHRtaW46ICQudmFsaWRhdG9yLmZvcm1hdCggXCJQbGVhc2UgZW50ZXIgYSB2YWx1ZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gezB9LlwiICksXHJcblx0XHRzdGVwOiAkLnZhbGlkYXRvci5mb3JtYXQoIFwiUGxlYXNlIGVudGVyIGEgbXVsdGlwbGUgb2YgezB9LlwiIClcclxuXHR9LFxyXG5cclxuXHRhdXRvQ3JlYXRlUmFuZ2VzOiBmYWxzZSxcclxuXHJcblx0cHJvdG90eXBlOiB7XHJcblxyXG5cdFx0aW5pdDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMubGFiZWxDb250YWluZXIgPSAkKCB0aGlzLnNldHRpbmdzLmVycm9yTGFiZWxDb250YWluZXIgKTtcclxuXHRcdFx0dGhpcy5lcnJvckNvbnRleHQgPSB0aGlzLmxhYmVsQ29udGFpbmVyLmxlbmd0aCAmJiB0aGlzLmxhYmVsQ29udGFpbmVyIHx8ICQoIHRoaXMuY3VycmVudEZvcm0gKTtcclxuXHRcdFx0dGhpcy5jb250YWluZXJzID0gJCggdGhpcy5zZXR0aW5ncy5lcnJvckNvbnRhaW5lciApLmFkZCggdGhpcy5zZXR0aW5ncy5lcnJvckxhYmVsQ29udGFpbmVyICk7XHJcblx0XHRcdHRoaXMuc3VibWl0dGVkID0ge307XHJcblx0XHRcdHRoaXMudmFsdWVDYWNoZSA9IHt9O1xyXG5cdFx0XHR0aGlzLnBlbmRpbmdSZXF1ZXN0ID0gMDtcclxuXHRcdFx0dGhpcy5wZW5kaW5nID0ge307XHJcblx0XHRcdHRoaXMuaW52YWxpZCA9IHt9O1xyXG5cdFx0XHR0aGlzLnJlc2V0KCk7XHJcblxyXG5cdFx0XHR2YXIgZ3JvdXBzID0gKCB0aGlzLmdyb3VwcyA9IHt9ICksXHJcblx0XHRcdFx0cnVsZXM7XHJcblx0XHRcdCQuZWFjaCggdGhpcy5zZXR0aW5ncy5ncm91cHMsIGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xyXG5cdFx0XHRcdGlmICggdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICkge1xyXG5cdFx0XHRcdFx0dmFsdWUgPSB2YWx1ZS5zcGxpdCggL1xccy8gKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0JC5lYWNoKCB2YWx1ZSwgZnVuY3Rpb24oIGluZGV4LCBuYW1lICkge1xyXG5cdFx0XHRcdFx0Z3JvdXBzWyBuYW1lIF0gPSBrZXk7XHJcblx0XHRcdFx0fSApO1xyXG5cdFx0XHR9ICk7XHJcblx0XHRcdHJ1bGVzID0gdGhpcy5zZXR0aW5ncy5ydWxlcztcclxuXHRcdFx0JC5lYWNoKCBydWxlcywgZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XHJcblx0XHRcdFx0cnVsZXNbIGtleSBdID0gJC52YWxpZGF0b3Iubm9ybWFsaXplUnVsZSggdmFsdWUgKTtcclxuXHRcdFx0fSApO1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gZGVsZWdhdGUoIGV2ZW50ICkge1xyXG5cdFx0XHRcdHZhciB2YWxpZGF0b3IgPSAkLmRhdGEoIHRoaXMuZm9ybSwgXCJ2YWxpZGF0b3JcIiApLFxyXG5cdFx0XHRcdFx0ZXZlbnRUeXBlID0gXCJvblwiICsgZXZlbnQudHlwZS5yZXBsYWNlKCAvXnZhbGlkYXRlLywgXCJcIiApLFxyXG5cdFx0XHRcdFx0c2V0dGluZ3MgPSB2YWxpZGF0b3Iuc2V0dGluZ3M7XHJcblx0XHRcdFx0aWYgKCBzZXR0aW5nc1sgZXZlbnRUeXBlIF0gJiYgISQoIHRoaXMgKS5pcyggc2V0dGluZ3MuaWdub3JlICkgKSB7XHJcblx0XHRcdFx0XHRzZXR0aW5nc1sgZXZlbnRUeXBlIF0uY2FsbCggdmFsaWRhdG9yLCB0aGlzLCBldmVudCApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0JCggdGhpcy5jdXJyZW50Rm9ybSApXHJcblx0XHRcdFx0Lm9uKCBcImZvY3VzaW4udmFsaWRhdGUgZm9jdXNvdXQudmFsaWRhdGUga2V5dXAudmFsaWRhdGVcIixcclxuXHRcdFx0XHRcdFwiOnRleHQsIFt0eXBlPSdwYXNzd29yZCddLCBbdHlwZT0nZmlsZSddLCBzZWxlY3QsIHRleHRhcmVhLCBbdHlwZT0nbnVtYmVyJ10sIFt0eXBlPSdzZWFyY2gnXSwgXCIgK1xyXG5cdFx0XHRcdFx0XCJbdHlwZT0ndGVsJ10sIFt0eXBlPSd1cmwnXSwgW3R5cGU9J2VtYWlsJ10sIFt0eXBlPSdkYXRldGltZSddLCBbdHlwZT0nZGF0ZSddLCBbdHlwZT0nbW9udGgnXSwgXCIgK1xyXG5cdFx0XHRcdFx0XCJbdHlwZT0nd2VlayddLCBbdHlwZT0ndGltZSddLCBbdHlwZT0nZGF0ZXRpbWUtbG9jYWwnXSwgW3R5cGU9J3JhbmdlJ10sIFt0eXBlPSdjb2xvciddLCBcIiArXHJcblx0XHRcdFx0XHRcIlt0eXBlPSdyYWRpbyddLCBbdHlwZT0nY2hlY2tib3gnXSwgW2NvbnRlbnRlZGl0YWJsZV1cIiwgZGVsZWdhdGUgKVxyXG5cclxuXHRcdFx0XHQvLyBTdXBwb3J0OiBDaHJvbWUsIG9sZElFXHJcblx0XHRcdFx0Ly8gXCJzZWxlY3RcIiBpcyBwcm92aWRlZCBhcyBldmVudC50YXJnZXQgd2hlbiBjbGlja2luZyBhIG9wdGlvblxyXG5cdFx0XHRcdC5vbiggXCJjbGljay52YWxpZGF0ZVwiLCBcInNlbGVjdCwgb3B0aW9uLCBbdHlwZT0ncmFkaW8nXSwgW3R5cGU9J2NoZWNrYm94J11cIiwgZGVsZWdhdGUgKTtcclxuXHJcblx0XHRcdGlmICggdGhpcy5zZXR0aW5ncy5pbnZhbGlkSGFuZGxlciApIHtcclxuXHRcdFx0XHQkKCB0aGlzLmN1cnJlbnRGb3JtICkub24oIFwiaW52YWxpZC1mb3JtLnZhbGlkYXRlXCIsIHRoaXMuc2V0dGluZ3MuaW52YWxpZEhhbmRsZXIgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQWRkIGFyaWEtcmVxdWlyZWQgdG8gYW55IFN0YXRpYy9EYXRhL0NsYXNzIHJlcXVpcmVkIGZpZWxkcyBiZWZvcmUgZmlyc3QgdmFsaWRhdGlvblxyXG5cdFx0XHQvLyBTY3JlZW4gcmVhZGVycyByZXF1aXJlIHRoaXMgYXR0cmlidXRlIHRvIGJlIHByZXNlbnQgYmVmb3JlIHRoZSBpbml0aWFsIHN1Ym1pc3Npb24gaHR0cDovL3d3dy53My5vcmcvVFIvV0NBRy1URUNIUy9BUklBMi5odG1sXHJcblx0XHRcdCQoIHRoaXMuY3VycmVudEZvcm0gKS5maW5kKCBcIltyZXF1aXJlZF0sIFtkYXRhLXJ1bGUtcmVxdWlyZWRdLCAucmVxdWlyZWRcIiApLmF0dHIoIFwiYXJpYS1yZXF1aXJlZFwiLCBcInRydWVcIiApO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBodHRwOi8vanF1ZXJ5dmFsaWRhdGlvbi5vcmcvVmFsaWRhdG9yLmZvcm0vXHJcblx0XHRmb3JtOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5jaGVja0Zvcm0oKTtcclxuXHRcdFx0JC5leHRlbmQoIHRoaXMuc3VibWl0dGVkLCB0aGlzLmVycm9yTWFwICk7XHJcblx0XHRcdHRoaXMuaW52YWxpZCA9ICQuZXh0ZW5kKCB7fSwgdGhpcy5lcnJvck1hcCApO1xyXG5cdFx0XHRpZiAoICF0aGlzLnZhbGlkKCkgKSB7XHJcblx0XHRcdFx0JCggdGhpcy5jdXJyZW50Rm9ybSApLnRyaWdnZXJIYW5kbGVyKCBcImludmFsaWQtZm9ybVwiLCBbIHRoaXMgXSApO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuc2hvd0Vycm9ycygpO1xyXG5cdFx0XHRyZXR1cm4gdGhpcy52YWxpZCgpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRjaGVja0Zvcm06IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLnByZXBhcmVGb3JtKCk7XHJcblx0XHRcdGZvciAoIHZhciBpID0gMCwgZWxlbWVudHMgPSAoIHRoaXMuY3VycmVudEVsZW1lbnRzID0gdGhpcy5lbGVtZW50cygpICk7IGVsZW1lbnRzWyBpIF07IGkrKyApIHtcclxuXHRcdFx0XHR0aGlzLmNoZWNrKCBlbGVtZW50c1sgaSBdICk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIHRoaXMudmFsaWQoKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gaHR0cDovL2pxdWVyeXZhbGlkYXRpb24ub3JnL1ZhbGlkYXRvci5lbGVtZW50L1xyXG5cdFx0ZWxlbWVudDogZnVuY3Rpb24oIGVsZW1lbnQgKSB7XHJcblx0XHRcdHZhciBjbGVhbkVsZW1lbnQgPSB0aGlzLmNsZWFuKCBlbGVtZW50ICksXHJcblx0XHRcdFx0Y2hlY2tFbGVtZW50ID0gdGhpcy52YWxpZGF0aW9uVGFyZ2V0Rm9yKCBjbGVhbkVsZW1lbnQgKSxcclxuXHRcdFx0XHR2ID0gdGhpcyxcclxuXHRcdFx0XHRyZXN1bHQgPSB0cnVlLFxyXG5cdFx0XHRcdHJzLCBncm91cDtcclxuXHJcblx0XHRcdGlmICggY2hlY2tFbGVtZW50ID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0ZGVsZXRlIHRoaXMuaW52YWxpZFsgY2xlYW5FbGVtZW50Lm5hbWUgXTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLnByZXBhcmVFbGVtZW50KCBjaGVja0VsZW1lbnQgKTtcclxuXHRcdFx0XHR0aGlzLmN1cnJlbnRFbGVtZW50cyA9ICQoIGNoZWNrRWxlbWVudCApO1xyXG5cclxuXHRcdFx0XHQvLyBJZiB0aGlzIGVsZW1lbnQgaXMgZ3JvdXBlZCwgdGhlbiB2YWxpZGF0ZSBhbGwgZ3JvdXAgZWxlbWVudHMgYWxyZWFkeVxyXG5cdFx0XHRcdC8vIGNvbnRhaW5pbmcgYSB2YWx1ZVxyXG5cdFx0XHRcdGdyb3VwID0gdGhpcy5ncm91cHNbIGNoZWNrRWxlbWVudC5uYW1lIF07XHJcblx0XHRcdFx0aWYgKCBncm91cCApIHtcclxuXHRcdFx0XHRcdCQuZWFjaCggdGhpcy5ncm91cHMsIGZ1bmN0aW9uKCBuYW1lLCB0ZXN0Z3JvdXAgKSB7XHJcblx0XHRcdFx0XHRcdGlmICggdGVzdGdyb3VwID09PSBncm91cCAmJiBuYW1lICE9PSBjaGVja0VsZW1lbnQubmFtZSApIHtcclxuXHRcdFx0XHRcdFx0XHRjbGVhbkVsZW1lbnQgPSB2LnZhbGlkYXRpb25UYXJnZXRGb3IoIHYuY2xlYW4oIHYuZmluZEJ5TmFtZSggbmFtZSApICkgKTtcclxuXHRcdFx0XHRcdFx0XHRpZiAoIGNsZWFuRWxlbWVudCAmJiBjbGVhbkVsZW1lbnQubmFtZSBpbiB2LmludmFsaWQgKSB7XHJcblx0XHRcdFx0XHRcdFx0XHR2LmN1cnJlbnRFbGVtZW50cy5wdXNoKCBjbGVhbkVsZW1lbnQgKTtcclxuXHRcdFx0XHRcdFx0XHRcdHJlc3VsdCA9IHJlc3VsdCAmJiB2LmNoZWNrKCBjbGVhbkVsZW1lbnQgKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0gKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHJzID0gdGhpcy5jaGVjayggY2hlY2tFbGVtZW50ICkgIT09IGZhbHNlO1xyXG5cdFx0XHRcdHJlc3VsdCA9IHJlc3VsdCAmJiBycztcclxuXHRcdFx0XHRpZiAoIHJzICkge1xyXG5cdFx0XHRcdFx0dGhpcy5pbnZhbGlkWyBjaGVja0VsZW1lbnQubmFtZSBdID0gZmFsc2U7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHRoaXMuaW52YWxpZFsgY2hlY2tFbGVtZW50Lm5hbWUgXSA9IHRydWU7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoICF0aGlzLm51bWJlck9mSW52YWxpZHMoKSApIHtcclxuXHJcblx0XHRcdFx0XHQvLyBIaWRlIGVycm9yIGNvbnRhaW5lcnMgb24gbGFzdCBlcnJvclxyXG5cdFx0XHRcdFx0dGhpcy50b0hpZGUgPSB0aGlzLnRvSGlkZS5hZGQoIHRoaXMuY29udGFpbmVycyApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR0aGlzLnNob3dFcnJvcnMoKTtcclxuXHJcblx0XHRcdFx0Ly8gQWRkIGFyaWEtaW52YWxpZCBzdGF0dXMgZm9yIHNjcmVlbiByZWFkZXJzXHJcblx0XHRcdFx0JCggZWxlbWVudCApLmF0dHIoIFwiYXJpYS1pbnZhbGlkXCIsICFycyApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gcmVzdWx0O1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBodHRwOi8vanF1ZXJ5dmFsaWRhdGlvbi5vcmcvVmFsaWRhdG9yLnNob3dFcnJvcnMvXHJcblx0XHRzaG93RXJyb3JzOiBmdW5jdGlvbiggZXJyb3JzICkge1xyXG5cdFx0XHRpZiAoIGVycm9ycyApIHtcclxuXHRcdFx0XHR2YXIgdmFsaWRhdG9yID0gdGhpcztcclxuXHJcblx0XHRcdFx0Ly8gQWRkIGl0ZW1zIHRvIGVycm9yIGxpc3QgYW5kIG1hcFxyXG5cdFx0XHRcdCQuZXh0ZW5kKCB0aGlzLmVycm9yTWFwLCBlcnJvcnMgKTtcclxuXHRcdFx0XHR0aGlzLmVycm9yTGlzdCA9ICQubWFwKCB0aGlzLmVycm9yTWFwLCBmdW5jdGlvbiggbWVzc2FnZSwgbmFtZSApIHtcclxuXHRcdFx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0XHRcdG1lc3NhZ2U6IG1lc3NhZ2UsXHJcblx0XHRcdFx0XHRcdGVsZW1lbnQ6IHZhbGlkYXRvci5maW5kQnlOYW1lKCBuYW1lIClbIDAgXVxyXG5cdFx0XHRcdFx0fTtcclxuXHRcdFx0XHR9ICk7XHJcblxyXG5cdFx0XHRcdC8vIFJlbW92ZSBpdGVtcyBmcm9tIHN1Y2Nlc3MgbGlzdFxyXG5cdFx0XHRcdHRoaXMuc3VjY2Vzc0xpc3QgPSAkLmdyZXAoIHRoaXMuc3VjY2Vzc0xpc3QsIGZ1bmN0aW9uKCBlbGVtZW50ICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuICEoIGVsZW1lbnQubmFtZSBpbiBlcnJvcnMgKTtcclxuXHRcdFx0XHR9ICk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCB0aGlzLnNldHRpbmdzLnNob3dFcnJvcnMgKSB7XHJcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5zaG93RXJyb3JzLmNhbGwoIHRoaXMsIHRoaXMuZXJyb3JNYXAsIHRoaXMuZXJyb3JMaXN0ICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5kZWZhdWx0U2hvd0Vycm9ycygpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIGh0dHA6Ly9qcXVlcnl2YWxpZGF0aW9uLm9yZy9WYWxpZGF0b3IucmVzZXRGb3JtL1xyXG5cdFx0cmVzZXRGb3JtOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCAkLmZuLnJlc2V0Rm9ybSApIHtcclxuXHRcdFx0XHQkKCB0aGlzLmN1cnJlbnRGb3JtICkucmVzZXRGb3JtKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5pbnZhbGlkID0ge307XHJcblx0XHRcdHRoaXMuc3VibWl0dGVkID0ge307XHJcblx0XHRcdHRoaXMucHJlcGFyZUZvcm0oKTtcclxuXHRcdFx0dGhpcy5oaWRlRXJyb3JzKCk7XHJcblx0XHRcdHZhciBlbGVtZW50cyA9IHRoaXMuZWxlbWVudHMoKVxyXG5cdFx0XHRcdC5yZW1vdmVEYXRhKCBcInByZXZpb3VzVmFsdWVcIiApXHJcblx0XHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS1pbnZhbGlkXCIgKTtcclxuXHJcblx0XHRcdHRoaXMucmVzZXRFbGVtZW50cyggZWxlbWVudHMgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0cmVzZXRFbGVtZW50czogZnVuY3Rpb24oIGVsZW1lbnRzICkge1xyXG5cdFx0XHR2YXIgaTtcclxuXHJcblx0XHRcdGlmICggdGhpcy5zZXR0aW5ncy51bmhpZ2hsaWdodCApIHtcclxuXHRcdFx0XHRmb3IgKCBpID0gMDsgZWxlbWVudHNbIGkgXTsgaSsrICkge1xyXG5cdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy51bmhpZ2hsaWdodC5jYWxsKCB0aGlzLCBlbGVtZW50c1sgaSBdLFxyXG5cdFx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLmVycm9yQ2xhc3MsIFwiXCIgKTtcclxuXHRcdFx0XHRcdHRoaXMuZmluZEJ5TmFtZSggZWxlbWVudHNbIGkgXS5uYW1lICkucmVtb3ZlQ2xhc3MoIHRoaXMuc2V0dGluZ3MudmFsaWRDbGFzcyApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRlbGVtZW50c1xyXG5cdFx0XHRcdFx0LnJlbW92ZUNsYXNzKCB0aGlzLnNldHRpbmdzLmVycm9yQ2xhc3MgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUNsYXNzKCB0aGlzLnNldHRpbmdzLnZhbGlkQ2xhc3MgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRudW1iZXJPZkludmFsaWRzOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMub2JqZWN0TGVuZ3RoKCB0aGlzLmludmFsaWQgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0b2JqZWN0TGVuZ3RoOiBmdW5jdGlvbiggb2JqICkge1xyXG5cdFx0XHQvKiBqc2hpbnQgdW51c2VkOiBmYWxzZSAqL1xyXG5cdFx0XHR2YXIgY291bnQgPSAwLFxyXG5cdFx0XHRcdGk7XHJcblx0XHRcdGZvciAoIGkgaW4gb2JqICkge1xyXG5cdFx0XHRcdGlmICggb2JqWyBpIF0gKSB7XHJcblx0XHRcdFx0XHRjb3VudCsrO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gY291bnQ7XHJcblx0XHR9LFxyXG5cclxuXHRcdGhpZGVFcnJvcnM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLmhpZGVUaGVzZSggdGhpcy50b0hpZGUgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0aGlkZVRoZXNlOiBmdW5jdGlvbiggZXJyb3JzICkge1xyXG5cdFx0XHRlcnJvcnMubm90KCB0aGlzLmNvbnRhaW5lcnMgKS50ZXh0KCBcIlwiICk7XHJcblx0XHRcdHRoaXMuYWRkV3JhcHBlciggZXJyb3JzICkuaGlkZSgpO1xyXG5cdFx0fSxcclxuXHJcblx0XHR2YWxpZDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLnNpemUoKSA9PT0gMDtcclxuXHRcdH0sXHJcblxyXG5cdFx0c2l6ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLmVycm9yTGlzdC5sZW5ndGg7XHJcblx0XHR9LFxyXG5cclxuXHRcdGZvY3VzSW52YWxpZDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggdGhpcy5zZXR0aW5ncy5mb2N1c0ludmFsaWQgKSB7XHJcblx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdCQoIHRoaXMuZmluZExhc3RBY3RpdmUoKSB8fCB0aGlzLmVycm9yTGlzdC5sZW5ndGggJiYgdGhpcy5lcnJvckxpc3RbIDAgXS5lbGVtZW50IHx8IFtdIClcclxuXHRcdFx0XHRcdC5maWx0ZXIoIFwiOnZpc2libGVcIiApXHJcblx0XHRcdFx0XHQuZm9jdXMoKVxyXG5cclxuXHRcdFx0XHRcdC8vIE1hbnVhbGx5IHRyaWdnZXIgZm9jdXNpbiBldmVudDsgd2l0aG91dCBpdCwgZm9jdXNpbiBoYW5kbGVyIGlzbid0IGNhbGxlZCwgZmluZExhc3RBY3RpdmUgd29uJ3QgaGF2ZSBhbnl0aGluZyB0byBmaW5kXHJcblx0XHRcdFx0XHQudHJpZ2dlciggXCJmb2N1c2luXCIgKTtcclxuXHRcdFx0XHR9IGNhdGNoICggZSApIHtcclxuXHJcblx0XHRcdFx0XHQvLyBJZ25vcmUgSUUgdGhyb3dpbmcgZXJyb3JzIHdoZW4gZm9jdXNpbmcgaGlkZGVuIGVsZW1lbnRzXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdGZpbmRMYXN0QWN0aXZlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGxhc3RBY3RpdmUgPSB0aGlzLmxhc3RBY3RpdmU7XHJcblx0XHRcdHJldHVybiBsYXN0QWN0aXZlICYmICQuZ3JlcCggdGhpcy5lcnJvckxpc3QsIGZ1bmN0aW9uKCBuICkge1xyXG5cdFx0XHRcdHJldHVybiBuLmVsZW1lbnQubmFtZSA9PT0gbGFzdEFjdGl2ZS5uYW1lO1xyXG5cdFx0XHR9ICkubGVuZ3RoID09PSAxICYmIGxhc3RBY3RpdmU7XHJcblx0XHR9LFxyXG5cclxuXHRcdGVsZW1lbnRzOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHZhbGlkYXRvciA9IHRoaXMsXHJcblx0XHRcdFx0cnVsZXNDYWNoZSA9IHt9O1xyXG5cclxuXHRcdFx0Ly8gU2VsZWN0IGFsbCB2YWxpZCBpbnB1dHMgaW5zaWRlIHRoZSBmb3JtIChubyBzdWJtaXQgb3IgcmVzZXQgYnV0dG9ucylcclxuXHRcdFx0cmV0dXJuICQoIHRoaXMuY3VycmVudEZvcm0gKVxyXG5cdFx0XHQuZmluZCggXCJpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSwgW2NvbnRlbnRlZGl0YWJsZV1cIiApXHJcblx0XHRcdC5ub3QoIFwiOnN1Ym1pdCwgOnJlc2V0LCA6aW1hZ2UsIDpkaXNhYmxlZFwiIClcclxuXHRcdFx0Lm5vdCggdGhpcy5zZXR0aW5ncy5pZ25vcmUgKVxyXG5cdFx0XHQuZmlsdGVyKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgbmFtZSA9IHRoaXMubmFtZSB8fCAkKCB0aGlzICkuYXR0ciggXCJuYW1lXCIgKTsgLy8gRm9yIGNvbnRlbnRlZGl0YWJsZVxyXG5cdFx0XHRcdGlmICggIW5hbWUgJiYgdmFsaWRhdG9yLnNldHRpbmdzLmRlYnVnICYmIHdpbmRvdy5jb25zb2xlICkge1xyXG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvciggXCIlbyBoYXMgbm8gbmFtZSBhc3NpZ25lZFwiLCB0aGlzICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBTZXQgZm9ybSBleHBhbmRvIG9uIGNvbnRlbnRlZGl0YWJsZVxyXG5cdFx0XHRcdGlmICggdGhpcy5oYXNBdHRyaWJ1dGUoIFwiY29udGVudGVkaXRhYmxlXCIgKSApIHtcclxuXHRcdFx0XHRcdHRoaXMuZm9ybSA9ICQoIHRoaXMgKS5jbG9zZXN0KCBcImZvcm1cIiApWyAwIF07XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBTZWxlY3Qgb25seSB0aGUgZmlyc3QgZWxlbWVudCBmb3IgZWFjaCBuYW1lLCBhbmQgb25seSB0aG9zZSB3aXRoIHJ1bGVzIHNwZWNpZmllZFxyXG5cdFx0XHRcdGlmICggbmFtZSBpbiBydWxlc0NhY2hlIHx8ICF2YWxpZGF0b3Iub2JqZWN0TGVuZ3RoKCAkKCB0aGlzICkucnVsZXMoKSApICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cnVsZXNDYWNoZVsgbmFtZSBdID0gdHJ1ZTtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRjbGVhbjogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xyXG5cdFx0XHRyZXR1cm4gJCggc2VsZWN0b3IgKVsgMCBdO1xyXG5cdFx0fSxcclxuXHJcblx0XHRlcnJvcnM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgZXJyb3JDbGFzcyA9IHRoaXMuc2V0dGluZ3MuZXJyb3JDbGFzcy5zcGxpdCggXCIgXCIgKS5qb2luKCBcIi5cIiApO1xyXG5cdFx0XHRyZXR1cm4gJCggdGhpcy5zZXR0aW5ncy5lcnJvckVsZW1lbnQgKyBcIi5cIiArIGVycm9yQ2xhc3MsIHRoaXMuZXJyb3JDb250ZXh0ICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdHJlc2V0SW50ZXJuYWxzOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5zdWNjZXNzTGlzdCA9IFtdO1xyXG5cdFx0XHR0aGlzLmVycm9yTGlzdCA9IFtdO1xyXG5cdFx0XHR0aGlzLmVycm9yTWFwID0ge307XHJcblx0XHRcdHRoaXMudG9TaG93ID0gJCggW10gKTtcclxuXHRcdFx0dGhpcy50b0hpZGUgPSAkKCBbXSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRyZXNldDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMucmVzZXRJbnRlcm5hbHMoKTtcclxuXHRcdFx0dGhpcy5jdXJyZW50RWxlbWVudHMgPSAkKCBbXSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRwcmVwYXJlRm9ybTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMucmVzZXQoKTtcclxuXHRcdFx0dGhpcy50b0hpZGUgPSB0aGlzLmVycm9ycygpLmFkZCggdGhpcy5jb250YWluZXJzICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdHByZXBhcmVFbGVtZW50OiBmdW5jdGlvbiggZWxlbWVudCApIHtcclxuXHRcdFx0dGhpcy5yZXNldCgpO1xyXG5cdFx0XHR0aGlzLnRvSGlkZSA9IHRoaXMuZXJyb3JzRm9yKCBlbGVtZW50ICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGVsZW1lbnRWYWx1ZTogZnVuY3Rpb24oIGVsZW1lbnQgKSB7XHJcblx0XHRcdHZhciAkZWxlbWVudCA9ICQoIGVsZW1lbnQgKSxcclxuXHRcdFx0XHR0eXBlID0gZWxlbWVudC50eXBlLFxyXG5cdFx0XHRcdHZhbCwgaWR4O1xyXG5cclxuXHRcdFx0aWYgKCB0eXBlID09PSBcInJhZGlvXCIgfHwgdHlwZSA9PT0gXCJjaGVja2JveFwiICkge1xyXG5cdFx0XHRcdHJldHVybiB0aGlzLmZpbmRCeU5hbWUoIGVsZW1lbnQubmFtZSApLmZpbHRlciggXCI6Y2hlY2tlZFwiICkudmFsKCk7XHJcblx0XHRcdH0gZWxzZSBpZiAoIHR5cGUgPT09IFwibnVtYmVyXCIgJiYgdHlwZW9mIGVsZW1lbnQudmFsaWRpdHkgIT09IFwidW5kZWZpbmVkXCIgKSB7XHJcblx0XHRcdFx0cmV0dXJuIGVsZW1lbnQudmFsaWRpdHkuYmFkSW5wdXQgPyBcIk5hTlwiIDogJGVsZW1lbnQudmFsKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggZWxlbWVudC5oYXNBdHRyaWJ1dGUoIFwiY29udGVudGVkaXRhYmxlXCIgKSApIHtcclxuXHRcdFx0XHR2YWwgPSAkZWxlbWVudC50ZXh0KCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dmFsID0gJGVsZW1lbnQudmFsKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggdHlwZSA9PT0gXCJmaWxlXCIgKSB7XHJcblxyXG5cdFx0XHRcdC8vIE1vZGVybiBicm93c2VyIChjaHJvbWUgJiBzYWZhcmkpXHJcblx0XHRcdFx0aWYgKCB2YWwuc3Vic3RyKCAwLCAxMiApID09PSBcIkM6XFxcXGZha2VwYXRoXFxcXFwiICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHZhbC5zdWJzdHIoIDEyICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBMZWdhY3kgYnJvd3NlcnNcclxuXHRcdFx0XHQvLyBVbml4LWJhc2VkIHBhdGhcclxuXHRcdFx0XHRpZHggPSB2YWwubGFzdEluZGV4T2YoIFwiL1wiICk7XHJcblx0XHRcdFx0aWYgKCBpZHggPj0gMCApIHtcclxuXHRcdFx0XHRcdHJldHVybiB2YWwuc3Vic3RyKCBpZHggKyAxICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBXaW5kb3dzLWJhc2VkIHBhdGhcclxuXHRcdFx0XHRpZHggPSB2YWwubGFzdEluZGV4T2YoIFwiXFxcXFwiICk7XHJcblx0XHRcdFx0aWYgKCBpZHggPj0gMCApIHtcclxuXHRcdFx0XHRcdHJldHVybiB2YWwuc3Vic3RyKCBpZHggKyAxICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBKdXN0IHRoZSBmaWxlIG5hbWVcclxuXHRcdFx0XHRyZXR1cm4gdmFsO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCIgKSB7XHJcblx0XHRcdFx0cmV0dXJuIHZhbC5yZXBsYWNlKCAvXFxyL2csIFwiXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gdmFsO1xyXG5cdFx0fSxcclxuXHJcblx0XHRjaGVjazogZnVuY3Rpb24oIGVsZW1lbnQgKSB7XHJcblx0XHRcdGVsZW1lbnQgPSB0aGlzLnZhbGlkYXRpb25UYXJnZXRGb3IoIHRoaXMuY2xlYW4oIGVsZW1lbnQgKSApO1xyXG5cclxuXHRcdFx0dmFyIHJ1bGVzID0gJCggZWxlbWVudCApLnJ1bGVzKCksXHJcblx0XHRcdFx0cnVsZXNDb3VudCA9ICQubWFwKCBydWxlcywgZnVuY3Rpb24oIG4sIGkgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gaTtcclxuXHRcdFx0XHR9ICkubGVuZ3RoLFxyXG5cdFx0XHRcdGRlcGVuZGVuY3lNaXNtYXRjaCA9IGZhbHNlLFxyXG5cdFx0XHRcdHZhbCA9IHRoaXMuZWxlbWVudFZhbHVlKCBlbGVtZW50ICksXHJcblx0XHRcdFx0cmVzdWx0LCBtZXRob2QsIHJ1bGU7XHJcblxyXG5cdFx0XHQvLyBJZiBhIG5vcm1hbGl6ZXIgaXMgZGVmaW5lZCBmb3IgdGhpcyBlbGVtZW50LCB0aGVuXHJcblx0XHRcdC8vIGNhbGwgaXQgdG8gcmV0cmVpdmUgdGhlIGNoYW5nZWQgdmFsdWUgaW5zdGVhZFxyXG5cdFx0XHQvLyBvZiB1c2luZyB0aGUgcmVhbCBvbmUuXHJcblx0XHRcdC8vIE5vdGUgdGhhdCBgdGhpc2AgaW4gdGhlIG5vcm1hbGl6ZXIgaXMgYGVsZW1lbnRgLlxyXG5cdFx0XHRpZiAoIHR5cGVvZiBydWxlcy5ub3JtYWxpemVyID09PSBcImZ1bmN0aW9uXCIgKSB7XHJcblx0XHRcdFx0dmFsID0gcnVsZXMubm9ybWFsaXplci5jYWxsKCBlbGVtZW50LCB2YWwgKTtcclxuXHJcblx0XHRcdFx0aWYgKCB0eXBlb2YgdmFsICE9PSBcInN0cmluZ1wiICkge1xyXG5cdFx0XHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvciggXCJUaGUgbm9ybWFsaXplciBzaG91bGQgcmV0dXJuIGEgc3RyaW5nIHZhbHVlLlwiICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBEZWxldGUgdGhlIG5vcm1hbGl6ZXIgZnJvbSBydWxlcyB0byBhdm9pZCB0cmVhdGluZ1xyXG5cdFx0XHRcdC8vIGl0IGFzIGEgcHJlLWRlZmluZWQgbWV0aG9kLlxyXG5cdFx0XHRcdGRlbGV0ZSBydWxlcy5ub3JtYWxpemVyO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRmb3IgKCBtZXRob2QgaW4gcnVsZXMgKSB7XHJcblx0XHRcdFx0cnVsZSA9IHsgbWV0aG9kOiBtZXRob2QsIHBhcmFtZXRlcnM6IHJ1bGVzWyBtZXRob2QgXSB9O1xyXG5cdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRyZXN1bHQgPSAkLnZhbGlkYXRvci5tZXRob2RzWyBtZXRob2QgXS5jYWxsKCB0aGlzLCB2YWwsIGVsZW1lbnQsIHJ1bGUucGFyYW1ldGVycyApO1xyXG5cclxuXHRcdFx0XHRcdC8vIElmIGEgbWV0aG9kIGluZGljYXRlcyB0aGF0IHRoZSBmaWVsZCBpcyBvcHRpb25hbCBhbmQgdGhlcmVmb3JlIHZhbGlkLFxyXG5cdFx0XHRcdFx0Ly8gZG9uJ3QgbWFyayBpdCBhcyB2YWxpZCB3aGVuIHRoZXJlIGFyZSBubyBvdGhlciBydWxlc1xyXG5cdFx0XHRcdFx0aWYgKCByZXN1bHQgPT09IFwiZGVwZW5kZW5jeS1taXNtYXRjaFwiICYmIHJ1bGVzQ291bnQgPT09IDEgKSB7XHJcblx0XHRcdFx0XHRcdGRlcGVuZGVuY3lNaXNtYXRjaCA9IHRydWU7XHJcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZGVwZW5kZW5jeU1pc21hdGNoID0gZmFsc2U7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCByZXN1bHQgPT09IFwicGVuZGluZ1wiICkge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnRvSGlkZSA9IHRoaXMudG9IaWRlLm5vdCggdGhpcy5lcnJvcnNGb3IoIGVsZW1lbnQgKSApO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0aWYgKCAhcmVzdWx0ICkge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmZvcm1hdEFuZEFkZCggZWxlbWVudCwgcnVsZSApO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSBjYXRjaCAoIGUgKSB7XHJcblx0XHRcdFx0XHRpZiAoIHRoaXMuc2V0dGluZ3MuZGVidWcgJiYgd2luZG93LmNvbnNvbGUgKSB7XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCBcIkV4Y2VwdGlvbiBvY2N1cnJlZCB3aGVuIGNoZWNraW5nIGVsZW1lbnQgXCIgKyBlbGVtZW50LmlkICsgXCIsIGNoZWNrIHRoZSAnXCIgKyBydWxlLm1ldGhvZCArIFwiJyBtZXRob2QuXCIsIGUgKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmICggZSBpbnN0YW5jZW9mIFR5cGVFcnJvciApIHtcclxuXHRcdFx0XHRcdFx0ZS5tZXNzYWdlICs9IFwiLiAgRXhjZXB0aW9uIG9jY3VycmVkIHdoZW4gY2hlY2tpbmcgZWxlbWVudCBcIiArIGVsZW1lbnQuaWQgKyBcIiwgY2hlY2sgdGhlICdcIiArIHJ1bGUubWV0aG9kICsgXCInIG1ldGhvZC5cIjtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHR0aHJvdyBlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIGRlcGVuZGVuY3lNaXNtYXRjaCApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCB0aGlzLm9iamVjdExlbmd0aCggcnVsZXMgKSApIHtcclxuXHRcdFx0XHR0aGlzLnN1Y2Nlc3NMaXN0LnB1c2goIGVsZW1lbnQgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gUmV0dXJuIHRoZSBjdXN0b20gbWVzc2FnZSBmb3IgdGhlIGdpdmVuIGVsZW1lbnQgYW5kIHZhbGlkYXRpb24gbWV0aG9kXHJcblx0XHQvLyBzcGVjaWZpZWQgaW4gdGhlIGVsZW1lbnQncyBIVE1MNSBkYXRhIGF0dHJpYnV0ZVxyXG5cdFx0Ly8gcmV0dXJuIHRoZSBnZW5lcmljIG1lc3NhZ2UgaWYgcHJlc2VudCBhbmQgbm8gbWV0aG9kIHNwZWNpZmljIG1lc3NhZ2UgaXMgcHJlc2VudFxyXG5cdFx0Y3VzdG9tRGF0YU1lc3NhZ2U6IGZ1bmN0aW9uKCBlbGVtZW50LCBtZXRob2QgKSB7XHJcblx0XHRcdHJldHVybiAkKCBlbGVtZW50ICkuZGF0YSggXCJtc2dcIiArIG1ldGhvZC5jaGFyQXQoIDAgKS50b1VwcGVyQ2FzZSgpICtcclxuXHRcdFx0XHRtZXRob2Quc3Vic3RyaW5nKCAxICkudG9Mb3dlckNhc2UoKSApIHx8ICQoIGVsZW1lbnQgKS5kYXRhKCBcIm1zZ1wiICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFJldHVybiB0aGUgY3VzdG9tIG1lc3NhZ2UgZm9yIHRoZSBnaXZlbiBlbGVtZW50IG5hbWUgYW5kIHZhbGlkYXRpb24gbWV0aG9kXHJcblx0XHRjdXN0b21NZXNzYWdlOiBmdW5jdGlvbiggbmFtZSwgbWV0aG9kICkge1xyXG5cdFx0XHR2YXIgbSA9IHRoaXMuc2V0dGluZ3MubWVzc2FnZXNbIG5hbWUgXTtcclxuXHRcdFx0cmV0dXJuIG0gJiYgKCBtLmNvbnN0cnVjdG9yID09PSBTdHJpbmcgPyBtIDogbVsgbWV0aG9kIF0gKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gUmV0dXJuIHRoZSBmaXJzdCBkZWZpbmVkIGFyZ3VtZW50LCBhbGxvd2luZyBlbXB0eSBzdHJpbmdzXHJcblx0XHRmaW5kRGVmaW5lZDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKyApIHtcclxuXHRcdFx0XHRpZiAoIGFyZ3VtZW50c1sgaSBdICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gYXJndW1lbnRzWyBpIF07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiB1bmRlZmluZWQ7XHJcblx0XHR9LFxyXG5cclxuXHRcdGRlZmF1bHRNZXNzYWdlOiBmdW5jdGlvbiggZWxlbWVudCwgcnVsZSApIHtcclxuXHRcdFx0dmFyIG1lc3NhZ2UgPSB0aGlzLmZpbmREZWZpbmVkKFxyXG5cdFx0XHRcdFx0dGhpcy5jdXN0b21NZXNzYWdlKCBlbGVtZW50Lm5hbWUsIHJ1bGUubWV0aG9kICksXHJcblx0XHRcdFx0XHR0aGlzLmN1c3RvbURhdGFNZXNzYWdlKCBlbGVtZW50LCBydWxlLm1ldGhvZCApLFxyXG5cclxuXHRcdFx0XHRcdC8vICd0aXRsZScgaXMgbmV2ZXIgdW5kZWZpbmVkLCBzbyBoYW5kbGUgZW1wdHkgc3RyaW5nIGFzIHVuZGVmaW5lZFxyXG5cdFx0XHRcdFx0IXRoaXMuc2V0dGluZ3MuaWdub3JlVGl0bGUgJiYgZWxlbWVudC50aXRsZSB8fCB1bmRlZmluZWQsXHJcblx0XHRcdFx0XHQkLnZhbGlkYXRvci5tZXNzYWdlc1sgcnVsZS5tZXRob2QgXSxcclxuXHRcdFx0XHRcdFwiPHN0cm9uZz5XYXJuaW5nOiBObyBtZXNzYWdlIGRlZmluZWQgZm9yIFwiICsgZWxlbWVudC5uYW1lICsgXCI8L3N0cm9uZz5cIlxyXG5cdFx0XHRcdCksXHJcblx0XHRcdFx0dGhlcmVnZXggPSAvXFwkP1xceyhcXGQrKVxcfS9nO1xyXG5cdFx0XHRpZiAoIHR5cGVvZiBtZXNzYWdlID09PSBcImZ1bmN0aW9uXCIgKSB7XHJcblx0XHRcdFx0bWVzc2FnZSA9IG1lc3NhZ2UuY2FsbCggdGhpcywgcnVsZS5wYXJhbWV0ZXJzLCBlbGVtZW50ICk7XHJcblx0XHRcdH0gZWxzZSBpZiAoIHRoZXJlZ2V4LnRlc3QoIG1lc3NhZ2UgKSApIHtcclxuXHRcdFx0XHRtZXNzYWdlID0gJC52YWxpZGF0b3IuZm9ybWF0KCBtZXNzYWdlLnJlcGxhY2UoIHRoZXJlZ2V4LCBcInskMX1cIiApLCBydWxlLnBhcmFtZXRlcnMgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIG1lc3NhZ2U7XHJcblx0XHR9LFxyXG5cclxuXHRcdGZvcm1hdEFuZEFkZDogZnVuY3Rpb24oIGVsZW1lbnQsIHJ1bGUgKSB7XHJcblx0XHRcdHZhciBtZXNzYWdlID0gdGhpcy5kZWZhdWx0TWVzc2FnZSggZWxlbWVudCwgcnVsZSApO1xyXG5cclxuXHRcdFx0dGhpcy5lcnJvckxpc3QucHVzaCgge1xyXG5cdFx0XHRcdG1lc3NhZ2U6IG1lc3NhZ2UsXHJcblx0XHRcdFx0ZWxlbWVudDogZWxlbWVudCxcclxuXHRcdFx0XHRtZXRob2Q6IHJ1bGUubWV0aG9kXHJcblx0XHRcdH0gKTtcclxuXHJcblx0XHRcdHRoaXMuZXJyb3JNYXBbIGVsZW1lbnQubmFtZSBdID0gbWVzc2FnZTtcclxuXHRcdFx0dGhpcy5zdWJtaXR0ZWRbIGVsZW1lbnQubmFtZSBdID0gbWVzc2FnZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0YWRkV3JhcHBlcjogZnVuY3Rpb24oIHRvVG9nZ2xlICkge1xyXG5cdFx0XHRpZiAoIHRoaXMuc2V0dGluZ3Mud3JhcHBlciApIHtcclxuXHRcdFx0XHR0b1RvZ2dsZSA9IHRvVG9nZ2xlLmFkZCggdG9Ub2dnbGUucGFyZW50KCB0aGlzLnNldHRpbmdzLndyYXBwZXIgKSApO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiB0b1RvZ2dsZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0ZGVmYXVsdFNob3dFcnJvcnM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgaSwgZWxlbWVudHMsIGVycm9yO1xyXG5cdFx0XHRmb3IgKCBpID0gMDsgdGhpcy5lcnJvckxpc3RbIGkgXTsgaSsrICkge1xyXG5cdFx0XHRcdGVycm9yID0gdGhpcy5lcnJvckxpc3RbIGkgXTtcclxuXHRcdFx0XHRpZiAoIHRoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0ICkge1xyXG5cdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5oaWdobGlnaHQuY2FsbCggdGhpcywgZXJyb3IuZWxlbWVudCwgdGhpcy5zZXR0aW5ncy5lcnJvckNsYXNzLCB0aGlzLnNldHRpbmdzLnZhbGlkQ2xhc3MgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dGhpcy5zaG93TGFiZWwoIGVycm9yLmVsZW1lbnQsIGVycm9yLm1lc3NhZ2UgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIHRoaXMuZXJyb3JMaXN0Lmxlbmd0aCApIHtcclxuXHRcdFx0XHR0aGlzLnRvU2hvdyA9IHRoaXMudG9TaG93LmFkZCggdGhpcy5jb250YWluZXJzICk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCB0aGlzLnNldHRpbmdzLnN1Y2Nlc3MgKSB7XHJcblx0XHRcdFx0Zm9yICggaSA9IDA7IHRoaXMuc3VjY2Vzc0xpc3RbIGkgXTsgaSsrICkge1xyXG5cdFx0XHRcdFx0dGhpcy5zaG93TGFiZWwoIHRoaXMuc3VjY2Vzc0xpc3RbIGkgXSApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIHRoaXMuc2V0dGluZ3MudW5oaWdobGlnaHQgKSB7XHJcblx0XHRcdFx0Zm9yICggaSA9IDAsIGVsZW1lbnRzID0gdGhpcy52YWxpZEVsZW1lbnRzKCk7IGVsZW1lbnRzWyBpIF07IGkrKyApIHtcclxuXHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MudW5oaWdobGlnaHQuY2FsbCggdGhpcywgZWxlbWVudHNbIGkgXSwgdGhpcy5zZXR0aW5ncy5lcnJvckNsYXNzLCB0aGlzLnNldHRpbmdzLnZhbGlkQ2xhc3MgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy50b0hpZGUgPSB0aGlzLnRvSGlkZS5ub3QoIHRoaXMudG9TaG93ICk7XHJcblx0XHRcdHRoaXMuaGlkZUVycm9ycygpO1xyXG5cdFx0XHR0aGlzLmFkZFdyYXBwZXIoIHRoaXMudG9TaG93ICkuc2hvdygpO1xyXG5cdFx0fSxcclxuXHJcblx0XHR2YWxpZEVsZW1lbnRzOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuY3VycmVudEVsZW1lbnRzLm5vdCggdGhpcy5pbnZhbGlkRWxlbWVudHMoKSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRpbnZhbGlkRWxlbWVudHM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJCggdGhpcy5lcnJvckxpc3QgKS5tYXAoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHJldHVybiB0aGlzLmVsZW1lbnQ7XHJcblx0XHRcdH0gKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0c2hvd0xhYmVsOiBmdW5jdGlvbiggZWxlbWVudCwgbWVzc2FnZSApIHtcclxuXHRcdFx0dmFyIHBsYWNlLCBncm91cCwgZXJyb3JJRCwgdixcclxuXHRcdFx0XHRlcnJvciA9IHRoaXMuZXJyb3JzRm9yKCBlbGVtZW50ICksXHJcblx0XHRcdFx0ZWxlbWVudElEID0gdGhpcy5pZE9yTmFtZSggZWxlbWVudCApLFxyXG5cdFx0XHRcdGRlc2NyaWJlZEJ5ID0gJCggZWxlbWVudCApLmF0dHIoIFwiYXJpYS1kZXNjcmliZWRieVwiICk7XHJcblxyXG5cdFx0XHRpZiAoIGVycm9yLmxlbmd0aCApIHtcclxuXHJcblx0XHRcdFx0Ly8gUmVmcmVzaCBlcnJvci9zdWNjZXNzIGNsYXNzXHJcblx0XHRcdFx0ZXJyb3IucmVtb3ZlQ2xhc3MoIHRoaXMuc2V0dGluZ3MudmFsaWRDbGFzcyApLmFkZENsYXNzKCB0aGlzLnNldHRpbmdzLmVycm9yQ2xhc3MgKTtcclxuXHJcblx0XHRcdFx0Ly8gUmVwbGFjZSBtZXNzYWdlIG9uIGV4aXN0aW5nIGxhYmVsXHJcblx0XHRcdFx0ZXJyb3IuaHRtbCggbWVzc2FnZSApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0XHQvLyBDcmVhdGUgZXJyb3IgZWxlbWVudFxyXG5cdFx0XHRcdGVycm9yID0gJCggXCI8XCIgKyB0aGlzLnNldHRpbmdzLmVycm9yRWxlbWVudCArIFwiPlwiIClcclxuXHRcdFx0XHRcdC5hdHRyKCBcImlkXCIsIGVsZW1lbnRJRCArIFwiLWVycm9yXCIgKVxyXG5cdFx0XHRcdFx0LmFkZENsYXNzKCB0aGlzLnNldHRpbmdzLmVycm9yQ2xhc3MgKVxyXG5cdFx0XHRcdFx0Lmh0bWwoIG1lc3NhZ2UgfHwgXCJcIiApO1xyXG5cclxuXHRcdFx0XHQvLyBNYWludGFpbiByZWZlcmVuY2UgdG8gdGhlIGVsZW1lbnQgdG8gYmUgcGxhY2VkIGludG8gdGhlIERPTVxyXG5cdFx0XHRcdHBsYWNlID0gZXJyb3I7XHJcblx0XHRcdFx0aWYgKCB0aGlzLnNldHRpbmdzLndyYXBwZXIgKSB7XHJcblxyXG5cdFx0XHRcdFx0Ly8gTWFrZSBzdXJlIHRoZSBlbGVtZW50IGlzIHZpc2libGUsIGV2ZW4gaW4gSUVcclxuXHRcdFx0XHRcdC8vIGFjdHVhbGx5IHNob3dpbmcgdGhlIHdyYXBwZWQgZWxlbWVudCBpcyBoYW5kbGVkIGVsc2V3aGVyZVxyXG5cdFx0XHRcdFx0cGxhY2UgPSBlcnJvci5oaWRlKCkuc2hvdygpLndyYXAoIFwiPFwiICsgdGhpcy5zZXR0aW5ncy53cmFwcGVyICsgXCIvPlwiICkucGFyZW50KCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICggdGhpcy5sYWJlbENvbnRhaW5lci5sZW5ndGggKSB7XHJcblx0XHRcdFx0XHR0aGlzLmxhYmVsQ29udGFpbmVyLmFwcGVuZCggcGxhY2UgKTtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKCB0aGlzLnNldHRpbmdzLmVycm9yUGxhY2VtZW50ICkge1xyXG5cdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5lcnJvclBsYWNlbWVudCggcGxhY2UsICQoIGVsZW1lbnQgKSApO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRwbGFjZS5pbnNlcnRBZnRlciggZWxlbWVudCApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gTGluayBlcnJvciBiYWNrIHRvIHRoZSBlbGVtZW50XHJcblx0XHRcdFx0aWYgKCBlcnJvci5pcyggXCJsYWJlbFwiICkgKSB7XHJcblxyXG5cdFx0XHRcdFx0Ly8gSWYgdGhlIGVycm9yIGlzIGEgbGFiZWwsIHRoZW4gYXNzb2NpYXRlIHVzaW5nICdmb3InXHJcblx0XHRcdFx0XHRlcnJvci5hdHRyKCBcImZvclwiLCBlbGVtZW50SUQgKTtcclxuXHJcblx0XHRcdFx0XHQvLyBJZiB0aGUgZWxlbWVudCBpcyBub3QgYSBjaGlsZCBvZiBhbiBhc3NvY2lhdGVkIGxhYmVsLCB0aGVuIGl0J3MgbmVjZXNzYXJ5XHJcblx0XHRcdFx0XHQvLyB0byBleHBsaWNpdGx5IGFwcGx5IGFyaWEtZGVzY3JpYmVkYnlcclxuXHRcdFx0XHR9IGVsc2UgaWYgKCBlcnJvci5wYXJlbnRzKCBcImxhYmVsW2Zvcj0nXCIgKyB0aGlzLmVzY2FwZUNzc01ldGEoIGVsZW1lbnRJRCApICsgXCInXVwiICkubGVuZ3RoID09PSAwICkge1xyXG5cdFx0XHRcdFx0ZXJyb3JJRCA9IGVycm9yLmF0dHIoIFwiaWRcIiApO1xyXG5cclxuXHRcdFx0XHRcdC8vIFJlc3BlY3QgZXhpc3Rpbmcgbm9uLWVycm9yIGFyaWEtZGVzY3JpYmVkYnlcclxuXHRcdFx0XHRcdGlmICggIWRlc2NyaWJlZEJ5ICkge1xyXG5cdFx0XHRcdFx0XHRkZXNjcmliZWRCeSA9IGVycm9ySUQ7XHJcblx0XHRcdFx0XHR9IGVsc2UgaWYgKCAhZGVzY3JpYmVkQnkubWF0Y2goIG5ldyBSZWdFeHAoIFwiXFxcXGJcIiArIHRoaXMuZXNjYXBlQ3NzTWV0YSggZXJyb3JJRCApICsgXCJcXFxcYlwiICkgKSApIHtcclxuXHJcblx0XHRcdFx0XHRcdC8vIEFkZCB0byBlbmQgb2YgbGlzdCBpZiBub3QgYWxyZWFkeSBwcmVzZW50XHJcblx0XHRcdFx0XHRcdGRlc2NyaWJlZEJ5ICs9IFwiIFwiICsgZXJyb3JJRDtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdCQoIGVsZW1lbnQgKS5hdHRyKCBcImFyaWEtZGVzY3JpYmVkYnlcIiwgZGVzY3JpYmVkQnkgKTtcclxuXHJcblx0XHRcdFx0XHQvLyBJZiB0aGlzIGVsZW1lbnQgaXMgZ3JvdXBlZCwgdGhlbiBhc3NpZ24gdG8gYWxsIGVsZW1lbnRzIGluIHRoZSBzYW1lIGdyb3VwXHJcblx0XHRcdFx0XHRncm91cCA9IHRoaXMuZ3JvdXBzWyBlbGVtZW50Lm5hbWUgXTtcclxuXHRcdFx0XHRcdGlmICggZ3JvdXAgKSB7XHJcblx0XHRcdFx0XHRcdHYgPSB0aGlzO1xyXG5cdFx0XHRcdFx0XHQkLmVhY2goIHYuZ3JvdXBzLCBmdW5jdGlvbiggbmFtZSwgdGVzdGdyb3VwICkge1xyXG5cdFx0XHRcdFx0XHRcdGlmICggdGVzdGdyb3VwID09PSBncm91cCApIHtcclxuXHRcdFx0XHRcdFx0XHRcdCQoIFwiW25hbWU9J1wiICsgdi5lc2NhcGVDc3NNZXRhKCBuYW1lICkgKyBcIiddXCIsIHYuY3VycmVudEZvcm0gKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHQuYXR0ciggXCJhcmlhLWRlc2NyaWJlZGJ5XCIsIGVycm9yLmF0dHIoIFwiaWRcIiApICk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9ICk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggIW1lc3NhZ2UgJiYgdGhpcy5zZXR0aW5ncy5zdWNjZXNzICkge1xyXG5cdFx0XHRcdGVycm9yLnRleHQoIFwiXCIgKTtcclxuXHRcdFx0XHRpZiAoIHR5cGVvZiB0aGlzLnNldHRpbmdzLnN1Y2Nlc3MgPT09IFwic3RyaW5nXCIgKSB7XHJcblx0XHRcdFx0XHRlcnJvci5hZGRDbGFzcyggdGhpcy5zZXR0aW5ncy5zdWNjZXNzICk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHRoaXMuc2V0dGluZ3Muc3VjY2VzcyggZXJyb3IsIGVsZW1lbnQgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy50b1Nob3cgPSB0aGlzLnRvU2hvdy5hZGQoIGVycm9yICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGVycm9yc0ZvcjogZnVuY3Rpb24oIGVsZW1lbnQgKSB7XHJcblx0XHRcdHZhciBuYW1lID0gdGhpcy5lc2NhcGVDc3NNZXRhKCB0aGlzLmlkT3JOYW1lKCBlbGVtZW50ICkgKSxcclxuXHRcdFx0XHRkZXNjcmliZXIgPSAkKCBlbGVtZW50ICkuYXR0ciggXCJhcmlhLWRlc2NyaWJlZGJ5XCIgKSxcclxuXHRcdFx0XHRzZWxlY3RvciA9IFwibGFiZWxbZm9yPSdcIiArIG5hbWUgKyBcIiddLCBsYWJlbFtmb3I9J1wiICsgbmFtZSArIFwiJ10gKlwiO1xyXG5cclxuXHRcdFx0Ly8gJ2FyaWEtZGVzY3JpYmVkYnknIHNob3VsZCBkaXJlY3RseSByZWZlcmVuY2UgdGhlIGVycm9yIGVsZW1lbnRcclxuXHRcdFx0aWYgKCBkZXNjcmliZXIgKSB7XHJcblx0XHRcdFx0c2VsZWN0b3IgPSBzZWxlY3RvciArIFwiLCAjXCIgKyB0aGlzLmVzY2FwZUNzc01ldGEoIGRlc2NyaWJlciApXHJcblx0XHRcdFx0XHQucmVwbGFjZSggL1xccysvZywgXCIsICNcIiApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gdGhpc1xyXG5cdFx0XHRcdC5lcnJvcnMoKVxyXG5cdFx0XHRcdC5maWx0ZXIoIHNlbGVjdG9yICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFNlZSBodHRwczovL2FwaS5qcXVlcnkuY29tL2NhdGVnb3J5L3NlbGVjdG9ycy8sIGZvciBDU1NcclxuXHRcdC8vIG1ldGEtY2hhcmFjdGVycyB0aGF0IHNob3VsZCBiZSBlc2NhcGVkIGluIG9yZGVyIHRvIGJlIHVzZWQgd2l0aCBKUXVlcnlcclxuXHRcdC8vIGFzIGEgbGl0ZXJhbCBwYXJ0IG9mIGEgbmFtZS9pZCBvciBhbnkgc2VsZWN0b3IuXHJcblx0XHRlc2NhcGVDc3NNZXRhOiBmdW5jdGlvbiggc3RyaW5nICkge1xyXG5cdFx0XHRyZXR1cm4gc3RyaW5nLnJlcGxhY2UoIC8oW1xcXFwhXCIjJCUmJygpKissLi86Ozw9Pj9AXFxbXFxdXmB7fH1+XSkvZywgXCJcXFxcJDFcIiApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRpZE9yTmFtZTogZnVuY3Rpb24oIGVsZW1lbnQgKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLmdyb3Vwc1sgZWxlbWVudC5uYW1lIF0gfHwgKCB0aGlzLmNoZWNrYWJsZSggZWxlbWVudCApID8gZWxlbWVudC5uYW1lIDogZWxlbWVudC5pZCB8fCBlbGVtZW50Lm5hbWUgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0dmFsaWRhdGlvblRhcmdldEZvcjogZnVuY3Rpb24oIGVsZW1lbnQgKSB7XHJcblxyXG5cdFx0XHQvLyBJZiByYWRpby9jaGVja2JveCwgdmFsaWRhdGUgZmlyc3QgZWxlbWVudCBpbiBncm91cCBpbnN0ZWFkXHJcblx0XHRcdGlmICggdGhpcy5jaGVja2FibGUoIGVsZW1lbnQgKSApIHtcclxuXHRcdFx0XHRlbGVtZW50ID0gdGhpcy5maW5kQnlOYW1lKCBlbGVtZW50Lm5hbWUgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQWx3YXlzIGFwcGx5IGlnbm9yZSBmaWx0ZXJcclxuXHRcdFx0cmV0dXJuICQoIGVsZW1lbnQgKS5ub3QoIHRoaXMuc2V0dGluZ3MuaWdub3JlIClbIDAgXTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Y2hlY2thYmxlOiBmdW5jdGlvbiggZWxlbWVudCApIHtcclxuXHRcdFx0cmV0dXJuICggL3JhZGlvfGNoZWNrYm94L2kgKS50ZXN0KCBlbGVtZW50LnR5cGUgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0ZmluZEJ5TmFtZTogZnVuY3Rpb24oIG5hbWUgKSB7XHJcblx0XHRcdHJldHVybiAkKCB0aGlzLmN1cnJlbnRGb3JtICkuZmluZCggXCJbbmFtZT0nXCIgKyB0aGlzLmVzY2FwZUNzc01ldGEoIG5hbWUgKSArIFwiJ11cIiApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRnZXRMZW5ndGg6IGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCApIHtcclxuXHRcdFx0c3dpdGNoICggZWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICkge1xyXG5cdFx0XHRjYXNlIFwic2VsZWN0XCI6XHJcblx0XHRcdFx0cmV0dXJuICQoIFwib3B0aW9uOnNlbGVjdGVkXCIsIGVsZW1lbnQgKS5sZW5ndGg7XHJcblx0XHRcdGNhc2UgXCJpbnB1dFwiOlxyXG5cdFx0XHRcdGlmICggdGhpcy5jaGVja2FibGUoIGVsZW1lbnQgKSApIHtcclxuXHRcdFx0XHRcdHJldHVybiB0aGlzLmZpbmRCeU5hbWUoIGVsZW1lbnQubmFtZSApLmZpbHRlciggXCI6Y2hlY2tlZFwiICkubGVuZ3RoO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gdmFsdWUubGVuZ3RoO1xyXG5cdFx0fSxcclxuXHJcblx0XHRkZXBlbmQ6IGZ1bmN0aW9uKCBwYXJhbSwgZWxlbWVudCApIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuZGVwZW5kVHlwZXNbIHR5cGVvZiBwYXJhbSBdID8gdGhpcy5kZXBlbmRUeXBlc1sgdHlwZW9mIHBhcmFtIF0oIHBhcmFtLCBlbGVtZW50ICkgOiB0cnVlO1xyXG5cdFx0fSxcclxuXHJcblx0XHRkZXBlbmRUeXBlczoge1xyXG5cdFx0XHRcImJvb2xlYW5cIjogZnVuY3Rpb24oIHBhcmFtICkge1xyXG5cdFx0XHRcdHJldHVybiBwYXJhbTtcclxuXHRcdFx0fSxcclxuXHRcdFx0XCJzdHJpbmdcIjogZnVuY3Rpb24oIHBhcmFtLCBlbGVtZW50ICkge1xyXG5cdFx0XHRcdHJldHVybiAhISQoIHBhcmFtLCBlbGVtZW50LmZvcm0gKS5sZW5ndGg7XHJcblx0XHRcdH0sXHJcblx0XHRcdFwiZnVuY3Rpb25cIjogZnVuY3Rpb24oIHBhcmFtLCBlbGVtZW50ICkge1xyXG5cdFx0XHRcdHJldHVybiBwYXJhbSggZWxlbWVudCApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdG9wdGlvbmFsOiBmdW5jdGlvbiggZWxlbWVudCApIHtcclxuXHRcdFx0dmFyIHZhbCA9IHRoaXMuZWxlbWVudFZhbHVlKCBlbGVtZW50ICk7XHJcblx0XHRcdHJldHVybiAhJC52YWxpZGF0b3IubWV0aG9kcy5yZXF1aXJlZC5jYWxsKCB0aGlzLCB2YWwsIGVsZW1lbnQgKSAmJiBcImRlcGVuZGVuY3ktbWlzbWF0Y2hcIjtcclxuXHRcdH0sXHJcblxyXG5cdFx0c3RhcnRSZXF1ZXN0OiBmdW5jdGlvbiggZWxlbWVudCApIHtcclxuXHRcdFx0aWYgKCAhdGhpcy5wZW5kaW5nWyBlbGVtZW50Lm5hbWUgXSApIHtcclxuXHRcdFx0XHR0aGlzLnBlbmRpbmdSZXF1ZXN0Kys7XHJcblx0XHRcdFx0JCggZWxlbWVudCApLmFkZENsYXNzKCB0aGlzLnNldHRpbmdzLnBlbmRpbmdDbGFzcyApO1xyXG5cdFx0XHRcdHRoaXMucGVuZGluZ1sgZWxlbWVudC5uYW1lIF0gPSB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdHN0b3BSZXF1ZXN0OiBmdW5jdGlvbiggZWxlbWVudCwgdmFsaWQgKSB7XHJcblx0XHRcdHRoaXMucGVuZGluZ1JlcXVlc3QtLTtcclxuXHJcblx0XHRcdC8vIFNvbWV0aW1lcyBzeW5jaHJvbml6YXRpb24gZmFpbHMsIG1ha2Ugc3VyZSBwZW5kaW5nUmVxdWVzdCBpcyBuZXZlciA8IDBcclxuXHRcdFx0aWYgKCB0aGlzLnBlbmRpbmdSZXF1ZXN0IDwgMCApIHtcclxuXHRcdFx0XHR0aGlzLnBlbmRpbmdSZXF1ZXN0ID0gMDtcclxuXHRcdFx0fVxyXG5cdFx0XHRkZWxldGUgdGhpcy5wZW5kaW5nWyBlbGVtZW50Lm5hbWUgXTtcclxuXHRcdFx0JCggZWxlbWVudCApLnJlbW92ZUNsYXNzKCB0aGlzLnNldHRpbmdzLnBlbmRpbmdDbGFzcyApO1xyXG5cdFx0XHRpZiAoIHZhbGlkICYmIHRoaXMucGVuZGluZ1JlcXVlc3QgPT09IDAgJiYgdGhpcy5mb3JtU3VibWl0dGVkICYmIHRoaXMuZm9ybSgpICkge1xyXG5cdFx0XHRcdCQoIHRoaXMuY3VycmVudEZvcm0gKS5zdWJtaXQoKTtcclxuXHRcdFx0XHR0aGlzLmZvcm1TdWJtaXR0ZWQgPSBmYWxzZTtcclxuXHRcdFx0fSBlbHNlIGlmICggIXZhbGlkICYmIHRoaXMucGVuZGluZ1JlcXVlc3QgPT09IDAgJiYgdGhpcy5mb3JtU3VibWl0dGVkICkge1xyXG5cdFx0XHRcdCQoIHRoaXMuY3VycmVudEZvcm0gKS50cmlnZ2VySGFuZGxlciggXCJpbnZhbGlkLWZvcm1cIiwgWyB0aGlzIF0gKTtcclxuXHRcdFx0XHR0aGlzLmZvcm1TdWJtaXR0ZWQgPSBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRwcmV2aW91c1ZhbHVlOiBmdW5jdGlvbiggZWxlbWVudCwgbWV0aG9kICkge1xyXG5cdFx0XHRyZXR1cm4gJC5kYXRhKCBlbGVtZW50LCBcInByZXZpb3VzVmFsdWVcIiApIHx8ICQuZGF0YSggZWxlbWVudCwgXCJwcmV2aW91c1ZhbHVlXCIsIHtcclxuXHRcdFx0XHRvbGQ6IG51bGwsXHJcblx0XHRcdFx0dmFsaWQ6IHRydWUsXHJcblx0XHRcdFx0bWVzc2FnZTogdGhpcy5kZWZhdWx0TWVzc2FnZSggZWxlbWVudCwgeyBtZXRob2Q6IG1ldGhvZCB9IClcclxuXHRcdFx0fSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBDbGVhbnMgdXAgYWxsIGZvcm1zIGFuZCBlbGVtZW50cywgcmVtb3ZlcyB2YWxpZGF0b3Itc3BlY2lmaWMgZXZlbnRzXHJcblx0XHRkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5yZXNldEZvcm0oKTtcclxuXHJcblx0XHRcdCQoIHRoaXMuY3VycmVudEZvcm0gKVxyXG5cdFx0XHRcdC5vZmYoIFwiLnZhbGlkYXRlXCIgKVxyXG5cdFx0XHRcdC5yZW1vdmVEYXRhKCBcInZhbGlkYXRvclwiIClcclxuXHRcdFx0XHQuZmluZCggXCIudmFsaWRhdGUtZXF1YWxUby1ibHVyXCIgKVxyXG5cdFx0XHRcdFx0Lm9mZiggXCIudmFsaWRhdGUtZXF1YWxUb1wiIClcclxuXHRcdFx0XHRcdC5yZW1vdmVDbGFzcyggXCJ2YWxpZGF0ZS1lcXVhbFRvLWJsdXJcIiApO1xyXG5cdFx0fVxyXG5cclxuXHR9LFxyXG5cclxuXHRjbGFzc1J1bGVTZXR0aW5nczoge1xyXG5cdFx0cmVxdWlyZWQ6IHsgcmVxdWlyZWQ6IHRydWUgfSxcclxuXHRcdGVtYWlsOiB7IGVtYWlsOiB0cnVlIH0sXHJcblx0XHR1cmw6IHsgdXJsOiB0cnVlIH0sXHJcblx0XHRkYXRlOiB7IGRhdGU6IHRydWUgfSxcclxuXHRcdGRhdGVJU086IHsgZGF0ZUlTTzogdHJ1ZSB9LFxyXG5cdFx0bnVtYmVyOiB7IG51bWJlcjogdHJ1ZSB9LFxyXG5cdFx0ZGlnaXRzOiB7IGRpZ2l0czogdHJ1ZSB9LFxyXG5cdFx0Y3JlZGl0Y2FyZDogeyBjcmVkaXRjYXJkOiB0cnVlIH1cclxuXHR9LFxyXG5cclxuXHRhZGRDbGFzc1J1bGVzOiBmdW5jdGlvbiggY2xhc3NOYW1lLCBydWxlcyApIHtcclxuXHRcdGlmICggY2xhc3NOYW1lLmNvbnN0cnVjdG9yID09PSBTdHJpbmcgKSB7XHJcblx0XHRcdHRoaXMuY2xhc3NSdWxlU2V0dGluZ3NbIGNsYXNzTmFtZSBdID0gcnVsZXM7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQkLmV4dGVuZCggdGhpcy5jbGFzc1J1bGVTZXR0aW5ncywgY2xhc3NOYW1lICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0Y2xhc3NSdWxlczogZnVuY3Rpb24oIGVsZW1lbnQgKSB7XHJcblx0XHR2YXIgcnVsZXMgPSB7fSxcclxuXHRcdFx0Y2xhc3NlcyA9ICQoIGVsZW1lbnQgKS5hdHRyKCBcImNsYXNzXCIgKTtcclxuXHJcblx0XHRpZiAoIGNsYXNzZXMgKSB7XHJcblx0XHRcdCQuZWFjaCggY2xhc3Nlcy5zcGxpdCggXCIgXCIgKSwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0aWYgKCB0aGlzIGluICQudmFsaWRhdG9yLmNsYXNzUnVsZVNldHRpbmdzICkge1xyXG5cdFx0XHRcdFx0JC5leHRlbmQoIHJ1bGVzLCAkLnZhbGlkYXRvci5jbGFzc1J1bGVTZXR0aW5nc1sgdGhpcyBdICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9ICk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcnVsZXM7XHJcblx0fSxcclxuXHJcblx0bm9ybWFsaXplQXR0cmlidXRlUnVsZTogZnVuY3Rpb24oIHJ1bGVzLCB0eXBlLCBtZXRob2QsIHZhbHVlICkge1xyXG5cclxuXHRcdC8vIENvbnZlcnQgdGhlIHZhbHVlIHRvIGEgbnVtYmVyIGZvciBudW1iZXIgaW5wdXRzLCBhbmQgZm9yIHRleHQgZm9yIGJhY2t3YXJkcyBjb21wYWJpbGl0eVxyXG5cdFx0Ly8gYWxsb3dzIHR5cGU9XCJkYXRlXCIgYW5kIG90aGVycyB0byBiZSBjb21wYXJlZCBhcyBzdHJpbmdzXHJcblx0XHRpZiAoIC9taW58bWF4fHN0ZXAvLnRlc3QoIG1ldGhvZCApICYmICggdHlwZSA9PT0gbnVsbCB8fCAvbnVtYmVyfHJhbmdlfHRleHQvLnRlc3QoIHR5cGUgKSApICkge1xyXG5cdFx0XHR2YWx1ZSA9IE51bWJlciggdmFsdWUgKTtcclxuXHJcblx0XHRcdC8vIFN1cHBvcnQgT3BlcmEgTWluaSwgd2hpY2ggcmV0dXJucyBOYU4gZm9yIHVuZGVmaW5lZCBtaW5sZW5ndGhcclxuXHRcdFx0aWYgKCBpc05hTiggdmFsdWUgKSApIHtcclxuXHRcdFx0XHR2YWx1ZSA9IHVuZGVmaW5lZDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggdmFsdWUgfHwgdmFsdWUgPT09IDAgKSB7XHJcblx0XHRcdHJ1bGVzWyBtZXRob2QgXSA9IHZhbHVlO1xyXG5cdFx0fSBlbHNlIGlmICggdHlwZSA9PT0gbWV0aG9kICYmIHR5cGUgIT09IFwicmFuZ2VcIiApIHtcclxuXHJcblx0XHRcdC8vIEV4Y2VwdGlvbjogdGhlIGpxdWVyeSB2YWxpZGF0ZSAncmFuZ2UnIG1ldGhvZFxyXG5cdFx0XHQvLyBkb2VzIG5vdCB0ZXN0IGZvciB0aGUgaHRtbDUgJ3JhbmdlJyB0eXBlXHJcblx0XHRcdHJ1bGVzWyBtZXRob2QgXSA9IHRydWU7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0YXR0cmlidXRlUnVsZXM6IGZ1bmN0aW9uKCBlbGVtZW50ICkge1xyXG5cdFx0dmFyIHJ1bGVzID0ge30sXHJcblx0XHRcdCRlbGVtZW50ID0gJCggZWxlbWVudCApLFxyXG5cdFx0XHR0eXBlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoIFwidHlwZVwiICksXHJcblx0XHRcdG1ldGhvZCwgdmFsdWU7XHJcblxyXG5cdFx0Zm9yICggbWV0aG9kIGluICQudmFsaWRhdG9yLm1ldGhvZHMgKSB7XHJcblxyXG5cdFx0XHQvLyBTdXBwb3J0IGZvciA8aW5wdXQgcmVxdWlyZWQ+IGluIGJvdGggaHRtbDUgYW5kIG9sZGVyIGJyb3dzZXJzXHJcblx0XHRcdGlmICggbWV0aG9kID09PSBcInJlcXVpcmVkXCIgKSB7XHJcblx0XHRcdFx0dmFsdWUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSggbWV0aG9kICk7XHJcblxyXG5cdFx0XHRcdC8vIFNvbWUgYnJvd3NlcnMgcmV0dXJuIGFuIGVtcHR5IHN0cmluZyBmb3IgdGhlIHJlcXVpcmVkIGF0dHJpYnV0ZVxyXG5cdFx0XHRcdC8vIGFuZCBub24tSFRNTDUgYnJvd3NlcnMgbWlnaHQgaGF2ZSByZXF1aXJlZD1cIlwiIG1hcmt1cFxyXG5cdFx0XHRcdGlmICggdmFsdWUgPT09IFwiXCIgKSB7XHJcblx0XHRcdFx0XHR2YWx1ZSA9IHRydWU7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBGb3JjZSBub24tSFRNTDUgYnJvd3NlcnMgdG8gcmV0dXJuIGJvb2xcclxuXHRcdFx0XHR2YWx1ZSA9ICEhdmFsdWU7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dmFsdWUgPSAkZWxlbWVudC5hdHRyKCBtZXRob2QgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5ub3JtYWxpemVBdHRyaWJ1dGVSdWxlKCBydWxlcywgdHlwZSwgbWV0aG9kLCB2YWx1ZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vICdtYXhsZW5ndGgnIG1heSBiZSByZXR1cm5lZCBhcyAtMSwgMjE0NzQ4MzY0NyAoIElFICkgYW5kIDUyNDI4OCAoIHNhZmFyaSApIGZvciB0ZXh0IGlucHV0c1xyXG5cdFx0aWYgKCBydWxlcy5tYXhsZW5ndGggJiYgLy0xfDIxNDc0ODM2NDd8NTI0Mjg4Ly50ZXN0KCBydWxlcy5tYXhsZW5ndGggKSApIHtcclxuXHRcdFx0ZGVsZXRlIHJ1bGVzLm1heGxlbmd0aDtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gcnVsZXM7XHJcblx0fSxcclxuXHJcblx0ZGF0YVJ1bGVzOiBmdW5jdGlvbiggZWxlbWVudCApIHtcclxuXHRcdHZhciBydWxlcyA9IHt9LFxyXG5cdFx0XHQkZWxlbWVudCA9ICQoIGVsZW1lbnQgKSxcclxuXHRcdFx0dHlwZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCBcInR5cGVcIiApLFxyXG5cdFx0XHRtZXRob2QsIHZhbHVlO1xyXG5cclxuXHRcdGZvciAoIG1ldGhvZCBpbiAkLnZhbGlkYXRvci5tZXRob2RzICkge1xyXG5cdFx0XHR2YWx1ZSA9ICRlbGVtZW50LmRhdGEoIFwicnVsZVwiICsgbWV0aG9kLmNoYXJBdCggMCApLnRvVXBwZXJDYXNlKCkgKyBtZXRob2Quc3Vic3RyaW5nKCAxICkudG9Mb3dlckNhc2UoKSApO1xyXG5cdFx0XHR0aGlzLm5vcm1hbGl6ZUF0dHJpYnV0ZVJ1bGUoIHJ1bGVzLCB0eXBlLCBtZXRob2QsIHZhbHVlICk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcnVsZXM7XHJcblx0fSxcclxuXHJcblx0c3RhdGljUnVsZXM6IGZ1bmN0aW9uKCBlbGVtZW50ICkge1xyXG5cdFx0dmFyIHJ1bGVzID0ge30sXHJcblx0XHRcdHZhbGlkYXRvciA9ICQuZGF0YSggZWxlbWVudC5mb3JtLCBcInZhbGlkYXRvclwiICk7XHJcblxyXG5cdFx0aWYgKCB2YWxpZGF0b3Iuc2V0dGluZ3MucnVsZXMgKSB7XHJcblx0XHRcdHJ1bGVzID0gJC52YWxpZGF0b3Iubm9ybWFsaXplUnVsZSggdmFsaWRhdG9yLnNldHRpbmdzLnJ1bGVzWyBlbGVtZW50Lm5hbWUgXSApIHx8IHt9O1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHJ1bGVzO1xyXG5cdH0sXHJcblxyXG5cdG5vcm1hbGl6ZVJ1bGVzOiBmdW5jdGlvbiggcnVsZXMsIGVsZW1lbnQgKSB7XHJcblxyXG5cdFx0Ly8gSGFuZGxlIGRlcGVuZGVuY3kgY2hlY2tcclxuXHRcdCQuZWFjaCggcnVsZXMsIGZ1bmN0aW9uKCBwcm9wLCB2YWwgKSB7XHJcblxyXG5cdFx0XHQvLyBJZ25vcmUgcnVsZSB3aGVuIHBhcmFtIGlzIGV4cGxpY2l0bHkgZmFsc2UsIGVnLiByZXF1aXJlZDpmYWxzZVxyXG5cdFx0XHRpZiAoIHZhbCA9PT0gZmFsc2UgKSB7XHJcblx0XHRcdFx0ZGVsZXRlIHJ1bGVzWyBwcm9wIF07XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggdmFsLnBhcmFtIHx8IHZhbC5kZXBlbmRzICkge1xyXG5cdFx0XHRcdHZhciBrZWVwUnVsZSA9IHRydWU7XHJcblx0XHRcdFx0c3dpdGNoICggdHlwZW9mIHZhbC5kZXBlbmRzICkge1xyXG5cdFx0XHRcdGNhc2UgXCJzdHJpbmdcIjpcclxuXHRcdFx0XHRcdGtlZXBSdWxlID0gISEkKCB2YWwuZGVwZW5kcywgZWxlbWVudC5mb3JtICkubGVuZ3RoO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSBcImZ1bmN0aW9uXCI6XHJcblx0XHRcdFx0XHRrZWVwUnVsZSA9IHZhbC5kZXBlbmRzLmNhbGwoIGVsZW1lbnQsIGVsZW1lbnQgKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoIGtlZXBSdWxlICkge1xyXG5cdFx0XHRcdFx0cnVsZXNbIHByb3AgXSA9IHZhbC5wYXJhbSAhPT0gdW5kZWZpbmVkID8gdmFsLnBhcmFtIDogdHJ1ZTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0JC5kYXRhKCBlbGVtZW50LmZvcm0sIFwidmFsaWRhdG9yXCIgKS5yZXNldEVsZW1lbnRzKCAkKCBlbGVtZW50ICkgKTtcclxuXHRcdFx0XHRcdGRlbGV0ZSBydWxlc1sgcHJvcCBdO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSApO1xyXG5cclxuXHRcdC8vIEV2YWx1YXRlIHBhcmFtZXRlcnNcclxuXHRcdCQuZWFjaCggcnVsZXMsIGZ1bmN0aW9uKCBydWxlLCBwYXJhbWV0ZXIgKSB7XHJcblx0XHRcdHJ1bGVzWyBydWxlIF0gPSAkLmlzRnVuY3Rpb24oIHBhcmFtZXRlciApICYmIHJ1bGUgIT09IFwibm9ybWFsaXplclwiID8gcGFyYW1ldGVyKCBlbGVtZW50ICkgOiBwYXJhbWV0ZXI7XHJcblx0XHR9ICk7XHJcblxyXG5cdFx0Ly8gQ2xlYW4gbnVtYmVyIHBhcmFtZXRlcnNcclxuXHRcdCQuZWFjaCggWyBcIm1pbmxlbmd0aFwiLCBcIm1heGxlbmd0aFwiIF0sIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHJ1bGVzWyB0aGlzIF0gKSB7XHJcblx0XHRcdFx0cnVsZXNbIHRoaXMgXSA9IE51bWJlciggcnVsZXNbIHRoaXMgXSApO1xyXG5cdFx0XHR9XHJcblx0XHR9ICk7XHJcblx0XHQkLmVhY2goIFsgXCJyYW5nZWxlbmd0aFwiLCBcInJhbmdlXCIgXSwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBwYXJ0cztcclxuXHRcdFx0aWYgKCBydWxlc1sgdGhpcyBdICkge1xyXG5cdFx0XHRcdGlmICggJC5pc0FycmF5KCBydWxlc1sgdGhpcyBdICkgKSB7XHJcblx0XHRcdFx0XHRydWxlc1sgdGhpcyBdID0gWyBOdW1iZXIoIHJ1bGVzWyB0aGlzIF1bIDAgXSApLCBOdW1iZXIoIHJ1bGVzWyB0aGlzIF1bIDEgXSApIF07XHJcblx0XHRcdFx0fSBlbHNlIGlmICggdHlwZW9mIHJ1bGVzWyB0aGlzIF0gPT09IFwic3RyaW5nXCIgKSB7XHJcblx0XHRcdFx0XHRwYXJ0cyA9IHJ1bGVzWyB0aGlzIF0ucmVwbGFjZSggL1tcXFtcXF1dL2csIFwiXCIgKS5zcGxpdCggL1tcXHMsXSsvICk7XHJcblx0XHRcdFx0XHRydWxlc1sgdGhpcyBdID0gWyBOdW1iZXIoIHBhcnRzWyAwIF0gKSwgTnVtYmVyKCBwYXJ0c1sgMSBdICkgXTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0gKTtcclxuXHJcblx0XHRpZiAoICQudmFsaWRhdG9yLmF1dG9DcmVhdGVSYW5nZXMgKSB7XHJcblxyXG5cdFx0XHQvLyBBdXRvLWNyZWF0ZSByYW5nZXNcclxuXHRcdFx0aWYgKCBydWxlcy5taW4gIT0gbnVsbCAmJiBydWxlcy5tYXggIT0gbnVsbCApIHtcclxuXHRcdFx0XHRydWxlcy5yYW5nZSA9IFsgcnVsZXMubWluLCBydWxlcy5tYXggXTtcclxuXHRcdFx0XHRkZWxldGUgcnVsZXMubWluO1xyXG5cdFx0XHRcdGRlbGV0ZSBydWxlcy5tYXg7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCBydWxlcy5taW5sZW5ndGggIT0gbnVsbCAmJiBydWxlcy5tYXhsZW5ndGggIT0gbnVsbCApIHtcclxuXHRcdFx0XHRydWxlcy5yYW5nZWxlbmd0aCA9IFsgcnVsZXMubWlubGVuZ3RoLCBydWxlcy5tYXhsZW5ndGggXTtcclxuXHRcdFx0XHRkZWxldGUgcnVsZXMubWlubGVuZ3RoO1xyXG5cdFx0XHRcdGRlbGV0ZSBydWxlcy5tYXhsZW5ndGg7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gcnVsZXM7XHJcblx0fSxcclxuXHJcblx0Ly8gQ29udmVydHMgYSBzaW1wbGUgc3RyaW5nIHRvIGEge3N0cmluZzogdHJ1ZX0gcnVsZSwgZS5nLiwgXCJyZXF1aXJlZFwiIHRvIHtyZXF1aXJlZDp0cnVlfVxyXG5cdG5vcm1hbGl6ZVJ1bGU6IGZ1bmN0aW9uKCBkYXRhICkge1xyXG5cdFx0aWYgKCB0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIiApIHtcclxuXHRcdFx0dmFyIHRyYW5zZm9ybWVkID0ge307XHJcblx0XHRcdCQuZWFjaCggZGF0YS5zcGxpdCggL1xccy8gKSwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dHJhbnNmb3JtZWRbIHRoaXMgXSA9IHRydWU7XHJcblx0XHRcdH0gKTtcclxuXHRcdFx0ZGF0YSA9IHRyYW5zZm9ybWVkO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGRhdGE7XHJcblx0fSxcclxuXHJcblx0Ly8gaHR0cDovL2pxdWVyeXZhbGlkYXRpb24ub3JnL2pRdWVyeS52YWxpZGF0b3IuYWRkTWV0aG9kL1xyXG5cdGFkZE1ldGhvZDogZnVuY3Rpb24oIG5hbWUsIG1ldGhvZCwgbWVzc2FnZSApIHtcclxuXHRcdCQudmFsaWRhdG9yLm1ldGhvZHNbIG5hbWUgXSA9IG1ldGhvZDtcclxuXHRcdCQudmFsaWRhdG9yLm1lc3NhZ2VzWyBuYW1lIF0gPSBtZXNzYWdlICE9PSB1bmRlZmluZWQgPyBtZXNzYWdlIDogJC52YWxpZGF0b3IubWVzc2FnZXNbIG5hbWUgXTtcclxuXHRcdGlmICggbWV0aG9kLmxlbmd0aCA8IDMgKSB7XHJcblx0XHRcdCQudmFsaWRhdG9yLmFkZENsYXNzUnVsZXMoIG5hbWUsICQudmFsaWRhdG9yLm5vcm1hbGl6ZVJ1bGUoIG5hbWUgKSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdC8vIGh0dHA6Ly9qcXVlcnl2YWxpZGF0aW9uLm9yZy9qUXVlcnkudmFsaWRhdG9yLm1ldGhvZHMvXHJcblx0bWV0aG9kczoge1xyXG5cclxuXHRcdC8vIGh0dHA6Ly9qcXVlcnl2YWxpZGF0aW9uLm9yZy9yZXF1aXJlZC1tZXRob2QvXHJcblx0XHRyZXF1aXJlZDogZnVuY3Rpb24oIHZhbHVlLCBlbGVtZW50LCBwYXJhbSApIHtcclxuXHJcblx0XHRcdC8vIENoZWNrIGlmIGRlcGVuZGVuY3kgaXMgbWV0XHJcblx0XHRcdGlmICggIXRoaXMuZGVwZW5kKCBwYXJhbSwgZWxlbWVudCApICkge1xyXG5cdFx0XHRcdHJldHVybiBcImRlcGVuZGVuY3ktbWlzbWF0Y2hcIjtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIGVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJzZWxlY3RcIiApIHtcclxuXHJcblx0XHRcdFx0Ly8gQ291bGQgYmUgYW4gYXJyYXkgZm9yIHNlbGVjdC1tdWx0aXBsZSBvciBhIHN0cmluZywgYm90aCBhcmUgZmluZSB0aGlzIHdheVxyXG5cdFx0XHRcdHZhciB2YWwgPSAkKCBlbGVtZW50ICkudmFsKCk7XHJcblx0XHRcdFx0cmV0dXJuIHZhbCAmJiB2YWwubGVuZ3RoID4gMDtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIHRoaXMuY2hlY2thYmxlKCBlbGVtZW50ICkgKSB7XHJcblx0XHRcdFx0cmV0dXJuIHRoaXMuZ2V0TGVuZ3RoKCB2YWx1ZSwgZWxlbWVudCApID4gMDtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gdmFsdWUubGVuZ3RoID4gMDtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gaHR0cDovL2pxdWVyeXZhbGlkYXRpb24ub3JnL2VtYWlsLW1ldGhvZC9cclxuXHRcdGVtYWlsOiBmdW5jdGlvbiggdmFsdWUsIGVsZW1lbnQgKSB7XHJcblxyXG5cdFx0XHQvLyBGcm9tIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2Zvcm1zLmh0bWwjdmFsaWQtZS1tYWlsLWFkZHJlc3NcclxuXHRcdFx0Ly8gUmV0cmlldmVkIDIwMTQtMDEtMTRcclxuXHRcdFx0Ly8gSWYgeW91IGhhdmUgYSBwcm9ibGVtIHdpdGggdGhpcyBpbXBsZW1lbnRhdGlvbiwgcmVwb3J0IGEgYnVnIGFnYWluc3QgdGhlIGFib3ZlIHNwZWNcclxuXHRcdFx0Ly8gT3IgdXNlIGN1c3RvbSBtZXRob2RzIHRvIGltcGxlbWVudCB5b3VyIG93biBlbWFpbCB2YWxpZGF0aW9uXHJcblx0XHRcdHJldHVybiB0aGlzLm9wdGlvbmFsKCBlbGVtZW50ICkgfHwgL15bYS16QS1aMC05LiEjJCUmJyorXFwvPT9eX2B7fH1+LV0rQFthLXpBLVowLTldKD86W2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPyg/OlxcLlthLXpBLVowLTldKD86W2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPykqJC8udGVzdCggdmFsdWUgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gaHR0cDovL2pxdWVyeXZhbGlkYXRpb24ub3JnL3VybC1tZXRob2QvXHJcblx0XHR1cmw6IGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCApIHtcclxuXHJcblx0XHRcdC8vIENvcHlyaWdodCAoYykgMjAxMC0yMDEzIERpZWdvIFBlcmluaSwgTUlUIGxpY2Vuc2VkXHJcblx0XHRcdC8vIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2RwZXJpbmkvNzI5Mjk0XHJcblx0XHRcdC8vIHNlZSBhbHNvIGh0dHBzOi8vbWF0aGlhc2J5bmVucy5iZS9kZW1vL3VybC1yZWdleFxyXG5cdFx0XHQvLyBtb2RpZmllZCB0byBhbGxvdyBwcm90b2NvbC1yZWxhdGl2ZSBVUkxzXHJcblx0XHRcdHJldHVybiB0aGlzLm9wdGlvbmFsKCBlbGVtZW50ICkgfHwgL14oPzooPzooPzpodHRwcz98ZnRwKTopP1xcL1xcLykoPzpcXFMrKD86OlxcUyopP0ApPyg/Oig/ISg/OjEwfDEyNykoPzpcXC5cXGR7MSwzfSl7M30pKD8hKD86MTY5XFwuMjU0fDE5MlxcLjE2OCkoPzpcXC5cXGR7MSwzfSl7Mn0pKD8hMTcyXFwuKD86MVs2LTldfDJcXGR8M1swLTFdKSg/OlxcLlxcZHsxLDN9KXsyfSkoPzpbMS05XVxcZD98MVxcZFxcZHwyWzAxXVxcZHwyMlswLTNdKSg/OlxcLig/OjE/XFxkezEsMn18MlswLTRdXFxkfDI1WzAtNV0pKXsyfSg/OlxcLig/OlsxLTldXFxkP3wxXFxkXFxkfDJbMC00XVxcZHwyNVswLTRdKSl8KD86KD86W2EtelxcdTAwYTEtXFx1ZmZmZjAtOV0tKikqW2EtelxcdTAwYTEtXFx1ZmZmZjAtOV0rKSg/OlxcLig/OlthLXpcXHUwMGExLVxcdWZmZmYwLTldLSopKlthLXpcXHUwMGExLVxcdWZmZmYwLTldKykqKD86XFwuKD86W2EtelxcdTAwYTEtXFx1ZmZmZl17Mix9KSkuPykoPzo6XFxkezIsNX0pPyg/OlsvPyNdXFxTKik/JC9pLnRlc3QoIHZhbHVlICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIGh0dHA6Ly9qcXVlcnl2YWxpZGF0aW9uLm9yZy9kYXRlLW1ldGhvZC9cclxuXHRcdGRhdGU6IGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCApIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMub3B0aW9uYWwoIGVsZW1lbnQgKSB8fCAhL0ludmFsaWR8TmFOLy50ZXN0KCBuZXcgRGF0ZSggdmFsdWUgKS50b1N0cmluZygpICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIGh0dHA6Ly9qcXVlcnl2YWxpZGF0aW9uLm9yZy9kYXRlSVNPLW1ldGhvZC9cclxuXHRcdGRhdGVJU086IGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCApIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMub3B0aW9uYWwoIGVsZW1lbnQgKSB8fCAvXlxcZHs0fVtcXC9cXC1dKDA/WzEtOV18MVswMTJdKVtcXC9cXC1dKDA/WzEtOV18WzEyXVswLTldfDNbMDFdKSQvLnRlc3QoIHZhbHVlICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIGh0dHA6Ly9qcXVlcnl2YWxpZGF0aW9uLm9yZy9udW1iZXItbWV0aG9kL1xyXG5cdFx0bnVtYmVyOiBmdW5jdGlvbiggdmFsdWUsIGVsZW1lbnQgKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLm9wdGlvbmFsKCBlbGVtZW50ICkgfHwgL14oPzotP1xcZCt8LT9cXGR7MSwzfSg/OixcXGR7M30pKyk/KD86XFwuXFxkKyk/JC8udGVzdCggdmFsdWUgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gaHR0cDovL2pxdWVyeXZhbGlkYXRpb24ub3JnL2RpZ2l0cy1tZXRob2QvXHJcblx0XHRkaWdpdHM6IGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCApIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMub3B0aW9uYWwoIGVsZW1lbnQgKSB8fCAvXlxcZCskLy50ZXN0KCB2YWx1ZSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBodHRwOi8vanF1ZXJ5dmFsaWRhdGlvbi5vcmcvbWlubGVuZ3RoLW1ldGhvZC9cclxuXHRcdG1pbmxlbmd0aDogZnVuY3Rpb24oIHZhbHVlLCBlbGVtZW50LCBwYXJhbSApIHtcclxuXHRcdFx0dmFyIGxlbmd0aCA9ICQuaXNBcnJheSggdmFsdWUgKSA/IHZhbHVlLmxlbmd0aCA6IHRoaXMuZ2V0TGVuZ3RoKCB2YWx1ZSwgZWxlbWVudCApO1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5vcHRpb25hbCggZWxlbWVudCApIHx8IGxlbmd0aCA+PSBwYXJhbTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gaHR0cDovL2pxdWVyeXZhbGlkYXRpb24ub3JnL21heGxlbmd0aC1tZXRob2QvXHJcblx0XHRtYXhsZW5ndGg6IGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCwgcGFyYW0gKSB7XHJcblx0XHRcdHZhciBsZW5ndGggPSAkLmlzQXJyYXkoIHZhbHVlICkgPyB2YWx1ZS5sZW5ndGggOiB0aGlzLmdldExlbmd0aCggdmFsdWUsIGVsZW1lbnQgKTtcclxuXHRcdFx0cmV0dXJuIHRoaXMub3B0aW9uYWwoIGVsZW1lbnQgKSB8fCBsZW5ndGggPD0gcGFyYW07XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIGh0dHA6Ly9qcXVlcnl2YWxpZGF0aW9uLm9yZy9yYW5nZWxlbmd0aC1tZXRob2QvXHJcblx0XHRyYW5nZWxlbmd0aDogZnVuY3Rpb24oIHZhbHVlLCBlbGVtZW50LCBwYXJhbSApIHtcclxuXHRcdFx0dmFyIGxlbmd0aCA9ICQuaXNBcnJheSggdmFsdWUgKSA/IHZhbHVlLmxlbmd0aCA6IHRoaXMuZ2V0TGVuZ3RoKCB2YWx1ZSwgZWxlbWVudCApO1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5vcHRpb25hbCggZWxlbWVudCApIHx8ICggbGVuZ3RoID49IHBhcmFtWyAwIF0gJiYgbGVuZ3RoIDw9IHBhcmFtWyAxIF0gKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gaHR0cDovL2pxdWVyeXZhbGlkYXRpb24ub3JnL21pbi1tZXRob2QvXHJcblx0XHRtaW46IGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCwgcGFyYW0gKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLm9wdGlvbmFsKCBlbGVtZW50ICkgfHwgdmFsdWUgPj0gcGFyYW07XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIGh0dHA6Ly9qcXVlcnl2YWxpZGF0aW9uLm9yZy9tYXgtbWV0aG9kL1xyXG5cdFx0bWF4OiBmdW5jdGlvbiggdmFsdWUsIGVsZW1lbnQsIHBhcmFtICkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5vcHRpb25hbCggZWxlbWVudCApIHx8IHZhbHVlIDw9IHBhcmFtO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBodHRwOi8vanF1ZXJ5dmFsaWRhdGlvbi5vcmcvcmFuZ2UtbWV0aG9kL1xyXG5cdFx0cmFuZ2U6IGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCwgcGFyYW0gKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLm9wdGlvbmFsKCBlbGVtZW50ICkgfHwgKCB2YWx1ZSA+PSBwYXJhbVsgMCBdICYmIHZhbHVlIDw9IHBhcmFtWyAxIF0gKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gaHR0cDovL2pxdWVyeXZhbGlkYXRpb24ub3JnL3N0ZXAtbWV0aG9kL1xyXG5cdFx0c3RlcDogZnVuY3Rpb24oIHZhbHVlLCBlbGVtZW50LCBwYXJhbSApIHtcclxuXHRcdFx0dmFyIHR5cGUgPSAkKCBlbGVtZW50ICkuYXR0ciggXCJ0eXBlXCIgKSxcclxuXHRcdFx0XHRlcnJvck1lc3NhZ2UgPSBcIlN0ZXAgYXR0cmlidXRlIG9uIGlucHV0IHR5cGUgXCIgKyB0eXBlICsgXCIgaXMgbm90IHN1cHBvcnRlZC5cIixcclxuXHRcdFx0XHRzdXBwb3J0ZWRUeXBlcyA9IFsgXCJ0ZXh0XCIsIFwibnVtYmVyXCIsIFwicmFuZ2VcIiBdLFxyXG5cdFx0XHRcdHJlID0gbmV3IFJlZ0V4cCggXCJcXFxcYlwiICsgdHlwZSArIFwiXFxcXGJcIiApLFxyXG5cdFx0XHRcdG5vdFN1cHBvcnRlZCA9IHR5cGUgJiYgIXJlLnRlc3QoIHN1cHBvcnRlZFR5cGVzLmpvaW4oKSApO1xyXG5cclxuXHRcdFx0Ly8gV29ya3Mgb25seSBmb3IgdGV4dCwgbnVtYmVyIGFuZCByYW5nZSBpbnB1dCB0eXBlc1xyXG5cdFx0XHQvLyBUT0RPIGZpbmQgYSB3YXkgdG8gc3VwcG9ydCBpbnB1dCB0eXBlcyBkYXRlLCBkYXRldGltZSwgZGF0ZXRpbWUtbG9jYWwsIG1vbnRoLCB0aW1lIGFuZCB3ZWVrXHJcblx0XHRcdGlmICggbm90U3VwcG9ydGVkICkge1xyXG5cdFx0XHRcdHRocm93IG5ldyBFcnJvciggZXJyb3JNZXNzYWdlICk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIHRoaXMub3B0aW9uYWwoIGVsZW1lbnQgKSB8fCAoIHZhbHVlICUgcGFyYW0gPT09IDAgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gaHR0cDovL2pxdWVyeXZhbGlkYXRpb24ub3JnL2VxdWFsVG8tbWV0aG9kL1xyXG5cdFx0ZXF1YWxUbzogZnVuY3Rpb24oIHZhbHVlLCBlbGVtZW50LCBwYXJhbSApIHtcclxuXHJcblx0XHRcdC8vIEJpbmQgdG8gdGhlIGJsdXIgZXZlbnQgb2YgdGhlIHRhcmdldCBpbiBvcmRlciB0byByZXZhbGlkYXRlIHdoZW5ldmVyIHRoZSB0YXJnZXQgZmllbGQgaXMgdXBkYXRlZFxyXG5cdFx0XHR2YXIgdGFyZ2V0ID0gJCggcGFyYW0gKTtcclxuXHRcdFx0aWYgKCB0aGlzLnNldHRpbmdzLm9uZm9jdXNvdXQgJiYgdGFyZ2V0Lm5vdCggXCIudmFsaWRhdGUtZXF1YWxUby1ibHVyXCIgKS5sZW5ndGggKSB7XHJcblx0XHRcdFx0dGFyZ2V0LmFkZENsYXNzKCBcInZhbGlkYXRlLWVxdWFsVG8tYmx1clwiICkub24oIFwiYmx1ci52YWxpZGF0ZS1lcXVhbFRvXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0JCggZWxlbWVudCApLnZhbGlkKCk7XHJcblx0XHRcdFx0fSApO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiB2YWx1ZSA9PT0gdGFyZ2V0LnZhbCgpO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBodHRwOi8vanF1ZXJ5dmFsaWRhdGlvbi5vcmcvcmVtb3RlLW1ldGhvZC9cclxuXHRcdHJlbW90ZTogZnVuY3Rpb24oIHZhbHVlLCBlbGVtZW50LCBwYXJhbSwgbWV0aG9kICkge1xyXG5cdFx0XHRpZiAoIHRoaXMub3B0aW9uYWwoIGVsZW1lbnQgKSApIHtcclxuXHRcdFx0XHRyZXR1cm4gXCJkZXBlbmRlbmN5LW1pc21hdGNoXCI7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdG1ldGhvZCA9IHR5cGVvZiBtZXRob2QgPT09IFwic3RyaW5nXCIgJiYgbWV0aG9kIHx8IFwicmVtb3RlXCI7XHJcblxyXG5cdFx0XHR2YXIgcHJldmlvdXMgPSB0aGlzLnByZXZpb3VzVmFsdWUoIGVsZW1lbnQsIG1ldGhvZCApLFxyXG5cdFx0XHRcdHZhbGlkYXRvciwgZGF0YSwgb3B0aW9uRGF0YVN0cmluZztcclxuXHJcblx0XHRcdGlmICggIXRoaXMuc2V0dGluZ3MubWVzc2FnZXNbIGVsZW1lbnQubmFtZSBdICkge1xyXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MubWVzc2FnZXNbIGVsZW1lbnQubmFtZSBdID0ge307XHJcblx0XHRcdH1cclxuXHRcdFx0cHJldmlvdXMub3JpZ2luYWxNZXNzYWdlID0gcHJldmlvdXMub3JpZ2luYWxNZXNzYWdlIHx8IHRoaXMuc2V0dGluZ3MubWVzc2FnZXNbIGVsZW1lbnQubmFtZSBdWyBtZXRob2QgXTtcclxuXHRcdFx0dGhpcy5zZXR0aW5ncy5tZXNzYWdlc1sgZWxlbWVudC5uYW1lIF1bIG1ldGhvZCBdID0gcHJldmlvdXMubWVzc2FnZTtcclxuXHJcblx0XHRcdHBhcmFtID0gdHlwZW9mIHBhcmFtID09PSBcInN0cmluZ1wiICYmIHsgdXJsOiBwYXJhbSB9IHx8IHBhcmFtO1xyXG5cdFx0XHRvcHRpb25EYXRhU3RyaW5nID0gJC5wYXJhbSggJC5leHRlbmQoIHsgZGF0YTogdmFsdWUgfSwgcGFyYW0uZGF0YSApICk7XHJcblx0XHRcdGlmICggcHJldmlvdXMub2xkID09PSBvcHRpb25EYXRhU3RyaW5nICkge1xyXG5cdFx0XHRcdHJldHVybiBwcmV2aW91cy52YWxpZDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cHJldmlvdXMub2xkID0gb3B0aW9uRGF0YVN0cmluZztcclxuXHRcdFx0dmFsaWRhdG9yID0gdGhpcztcclxuXHRcdFx0dGhpcy5zdGFydFJlcXVlc3QoIGVsZW1lbnQgKTtcclxuXHRcdFx0ZGF0YSA9IHt9O1xyXG5cdFx0XHRkYXRhWyBlbGVtZW50Lm5hbWUgXSA9IHZhbHVlO1xyXG5cdFx0XHQkLmFqYXgoICQuZXh0ZW5kKCB0cnVlLCB7XHJcblx0XHRcdFx0bW9kZTogXCJhYm9ydFwiLFxyXG5cdFx0XHRcdHBvcnQ6IFwidmFsaWRhdGVcIiArIGVsZW1lbnQubmFtZSxcclxuXHRcdFx0XHRkYXRhVHlwZTogXCJqc29uXCIsXHJcblx0XHRcdFx0ZGF0YTogZGF0YSxcclxuXHRcdFx0XHRjb250ZXh0OiB2YWxpZGF0b3IuY3VycmVudEZvcm0sXHJcblx0XHRcdFx0c3VjY2VzczogZnVuY3Rpb24oIHJlc3BvbnNlICkge1xyXG5cdFx0XHRcdFx0dmFyIHZhbGlkID0gcmVzcG9uc2UgPT09IHRydWUgfHwgcmVzcG9uc2UgPT09IFwidHJ1ZVwiLFxyXG5cdFx0XHRcdFx0XHRlcnJvcnMsIG1lc3NhZ2UsIHN1Ym1pdHRlZDtcclxuXHJcblx0XHRcdFx0XHR2YWxpZGF0b3Iuc2V0dGluZ3MubWVzc2FnZXNbIGVsZW1lbnQubmFtZSBdWyBtZXRob2QgXSA9IHByZXZpb3VzLm9yaWdpbmFsTWVzc2FnZTtcclxuXHRcdFx0XHRcdGlmICggdmFsaWQgKSB7XHJcblx0XHRcdFx0XHRcdHN1Ym1pdHRlZCA9IHZhbGlkYXRvci5mb3JtU3VibWl0dGVkO1xyXG5cdFx0XHRcdFx0XHR2YWxpZGF0b3IucmVzZXRJbnRlcm5hbHMoKTtcclxuXHRcdFx0XHRcdFx0dmFsaWRhdG9yLnRvSGlkZSA9IHZhbGlkYXRvci5lcnJvcnNGb3IoIGVsZW1lbnQgKTtcclxuXHRcdFx0XHRcdFx0dmFsaWRhdG9yLmZvcm1TdWJtaXR0ZWQgPSBzdWJtaXR0ZWQ7XHJcblx0XHRcdFx0XHRcdHZhbGlkYXRvci5zdWNjZXNzTGlzdC5wdXNoKCBlbGVtZW50ICk7XHJcblx0XHRcdFx0XHRcdHZhbGlkYXRvci5pbnZhbGlkWyBlbGVtZW50Lm5hbWUgXSA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHR2YWxpZGF0b3Iuc2hvd0Vycm9ycygpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0ZXJyb3JzID0ge307XHJcblx0XHRcdFx0XHRcdG1lc3NhZ2UgPSByZXNwb25zZSB8fCB2YWxpZGF0b3IuZGVmYXVsdE1lc3NhZ2UoIGVsZW1lbnQsIHsgbWV0aG9kOiBtZXRob2QsIHBhcmFtZXRlcnM6IHZhbHVlIH0gKTtcclxuXHRcdFx0XHRcdFx0ZXJyb3JzWyBlbGVtZW50Lm5hbWUgXSA9IHByZXZpb3VzLm1lc3NhZ2UgPSBtZXNzYWdlO1xyXG5cdFx0XHRcdFx0XHR2YWxpZGF0b3IuaW52YWxpZFsgZWxlbWVudC5uYW1lIF0gPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHR2YWxpZGF0b3Iuc2hvd0Vycm9ycyggZXJyb3JzICk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRwcmV2aW91cy52YWxpZCA9IHZhbGlkO1xyXG5cdFx0XHRcdFx0dmFsaWRhdG9yLnN0b3BSZXF1ZXN0KCBlbGVtZW50LCB2YWxpZCApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgcGFyYW0gKSApO1xyXG5cdFx0XHRyZXR1cm4gXCJwZW5kaW5nXCI7XHJcblx0XHR9XHJcblx0fVxyXG5cclxufSApO1xyXG5cclxuLy8gQWpheCBtb2RlOiBhYm9ydFxyXG4vLyB1c2FnZTogJC5hamF4KHsgbW9kZTogXCJhYm9ydFwiWywgcG9ydDogXCJ1bmlxdWVwb3J0XCJdfSk7XHJcbi8vIGlmIG1vZGU6XCJhYm9ydFwiIGlzIHVzZWQsIHRoZSBwcmV2aW91cyByZXF1ZXN0IG9uIHRoYXQgcG9ydCAocG9ydCBjYW4gYmUgdW5kZWZpbmVkKSBpcyBhYm9ydGVkIHZpYSBYTUxIdHRwUmVxdWVzdC5hYm9ydCgpXHJcblxyXG52YXIgcGVuZGluZ1JlcXVlc3RzID0ge30sXHJcblx0YWpheDtcclxuXHJcbi8vIFVzZSBhIHByZWZpbHRlciBpZiBhdmFpbGFibGUgKDEuNSspXHJcbmlmICggJC5hamF4UHJlZmlsdGVyICkge1xyXG5cdCQuYWpheFByZWZpbHRlciggZnVuY3Rpb24oIHNldHRpbmdzLCBfLCB4aHIgKSB7XHJcblx0XHR2YXIgcG9ydCA9IHNldHRpbmdzLnBvcnQ7XHJcblx0XHRpZiAoIHNldHRpbmdzLm1vZGUgPT09IFwiYWJvcnRcIiApIHtcclxuXHRcdFx0aWYgKCBwZW5kaW5nUmVxdWVzdHNbIHBvcnQgXSApIHtcclxuXHRcdFx0XHRwZW5kaW5nUmVxdWVzdHNbIHBvcnQgXS5hYm9ydCgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHBlbmRpbmdSZXF1ZXN0c1sgcG9ydCBdID0geGhyO1xyXG5cdFx0fVxyXG5cdH0gKTtcclxufSBlbHNlIHtcclxuXHJcblx0Ly8gUHJveHkgYWpheFxyXG5cdGFqYXggPSAkLmFqYXg7XHJcblx0JC5hamF4ID0gZnVuY3Rpb24oIHNldHRpbmdzICkge1xyXG5cdFx0dmFyIG1vZGUgPSAoIFwibW9kZVwiIGluIHNldHRpbmdzID8gc2V0dGluZ3MgOiAkLmFqYXhTZXR0aW5ncyApLm1vZGUsXHJcblx0XHRcdHBvcnQgPSAoIFwicG9ydFwiIGluIHNldHRpbmdzID8gc2V0dGluZ3MgOiAkLmFqYXhTZXR0aW5ncyApLnBvcnQ7XHJcblx0XHRpZiAoIG1vZGUgPT09IFwiYWJvcnRcIiApIHtcclxuXHRcdFx0aWYgKCBwZW5kaW5nUmVxdWVzdHNbIHBvcnQgXSApIHtcclxuXHRcdFx0XHRwZW5kaW5nUmVxdWVzdHNbIHBvcnQgXS5hYm9ydCgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHBlbmRpbmdSZXF1ZXN0c1sgcG9ydCBdID0gYWpheC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcblx0XHRcdHJldHVybiBwZW5kaW5nUmVxdWVzdHNbIHBvcnQgXTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBhamF4LmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxuXHR9O1xyXG59XHJcblxyXG59KSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy92YWxpZGF0ZS9qcXVlcnkudmFsaWRhdGUuanNcbi8vIG1vZHVsZSBpZCA9IDE1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 16 */
/***/ function(module, exports) {

	eval("/**\r\n * Created by Administrator on 2017/1/9.\r\n */\r\n\r\n//自定义validator --begin\r\n$.validator.setDefaults({\r\n    debug: true,\r\n    submitHandler: function () {\r\n        alert(\"验证通过，提交成功!\");\r\n    }\r\n});\r\n//自定义validator --end\r\n\r\n//自定义messages --begin\r\n$.extend($.validator.messages, {\r\n    required: \"这里不能为空\",\r\n    remote: \"请修正此字段\",\r\n    email: \"请提供有效的邮箱, 格式name@domain.com\",\r\n    url: \"请输入有效的网址\",\r\n    date: \"请输入有效的日期\",\r\n    dateISO: \"请输入有效的日期 (YYYY-MM-DD)\",\r\n    number: \"请输入有效的数字\",\r\n    digits: \"只能输入整数数字\",\r\n    creditcard: \"请输入有效的信用卡号码\",\r\n    equalTo: \"你的输入不相同\",\r\n    extension: \"请检查后缀\",\r\n    maxlength: $.validator.format(\"最多可以输入 {0} 个字符\"),\r\n    minlength: $.validator.format(\"最少要输入 {0} 个字符\"),\r\n    rangelength: $.validator.format(\"请输入长度在 {0} 到 {1} 之间的字符串\"),\r\n    range: $.validator.format(\"请输入范围在 {0} 到 {1} 之间的数值\"),\r\n    max: $.validator.format(\"请输入不大于 {0} 的数值\"),\r\n    min: $.validator.format(\"请输入不小于 {0} 的数值\")\r\n});\r\n//自定义messages --end\r\n\r\n\r\n//自定义校验规则 --begin\r\n$.validator.addMethod( \"xlower\", function( value, element ) {\r\n    return /[a-z]/.test( value );\r\n}, \"请包含小写字母\" );\r\n\r\n$.validator.addMethod( \"xcapital\", function( value, element ) {\r\n    return /[A-Z]/.test( value );\r\n}, \"请包含大写字母\" );\r\n\r\n$.validator.addMethod( \"xdigit\", function( value, element ) {\r\n    return /\\d/.test( value );\r\n}, \"请包含数字\" );\r\n\r\n$.validator.addMethod( \"xspecial\", function( value, element ) {\r\n    return /\\W/.test( value );\r\n}, \"请包含特殊字符\" );\r\n\r\n$.validator.addMethod( \"xchars2\", function( value, element ) {\r\n    var val=0;\r\n    if(/[a-z]/.test( value )){\r\n        val++;\r\n    }\r\n    if(/[A-Z]/.test( value )){\r\n        val++;\r\n    }\r\n    if(/\\d/.test( value )){\r\n        val++;\r\n    }\r\n    if(/\\W/.test( value )){\r\n        val++;\r\n    }\r\n    return val>=2;\r\n}, \"请至少包含2种字符\" );\r\n\r\n\r\n$.validator.addMethod( \"xname\", function( value, element ) {\r\n    return /^(\\w+|[\\u4e00-\\u9fa5]+)$/.test( value );\r\n}, \"姓名可以包含字母、数字、下划线或汉字\" );\r\n\r\n$.validator.addMethod( \"xuser\", function( value, element ) {\r\n    return /^(?![\\d_])[\\w\\u4e00-\\u9fa5]+$/.test( value );\r\n}, \"用户名可以包含字母、数字、'_'和汉字，不允许以数字或'_'开头\" );\r\n\r\n$.validator.addMethod( \"xpwd\", function( value, element ) {\r\n    return /^\\S+$/.test( value );\r\n}, \"密码最少6位，可以包含任何非空白字符\" );\r\n\r\n$.validator.addMethod( \"xphone\", function( value, element ) {\r\n    return /^1(3[0-9]|4[57]|5[0-35-9]|7[0135678]|8[0-9])\\d{8}$/.test(value);\r\n}, \"请输入正确的11位手机号码, 支持13[0-9], 14[5,7], 15[0, 1, 2, 3, 5, 6, 7, 8, 9], 17[0, 1, 6, 7, 8], 18[0-9]\");//支持13[0-9], 14[5,7], 15[0, 1, 2, 3, 5, 6, 7, 8, 9], 17[0, 1, 6, 7, 8], 18[0-9]\r\n\r\n$.validator.addMethod( \"xemail\", function( value, element ) {\r\n    return /^[\\w.]{1,64}@([a-z0-9-]{1,200}.){1,5}[a-z]{1,6}$/.test( value );\r\n}, \"请输入正确的Email地址，格式: name@domain\" );\r\n\r\n$.validator.addMethod( \"xurl\", function( value, element ) {\r\n    return /^((http|ftp|https):\\/\\/)?[\\w_.]+(\\/[\\w_]+)*\\/?$/.test( value );\r\n}, \"请输入正确的url地址\" );\r\n\r\n$.validator.addMethod( \"xip\", function( value, element ) {\r\n    return /^([01]?\\d{1,2}|2[0-4]\\d|25[0-5])\\.([01]?\\d{1,2}|2[0-4]\\d|25[0-5])\\.([01]?\\d{1,2}|2[0-4]\\d|25[0-5])\\.([01]?\\d{1,2}|2[0-4]\\d|25[0-5])$/.test( value );\r\n}, \"请输入正确的ip地址\" );\r\n\r\n$.validator.addMethod( \"xpostid\", function( value, element ) {\r\n    return /^[1-9]\\d{5}(?!\\d)$/.test( value );\r\n}, \"请输入正确的邮政编码\" );\r\n\r\n$.validator.addMethod( \"xtel\", function( value, element ) {\r\n    return /^(([0+]\\d{2,3}-)?(0\\d{2,3})-)(\\d{7,8})(-(\\d{3,}))?$/.test( value );\r\n}, \"请输入正确的固定电话\" );\r\n\r\n$.validator.addMethod( \"xidcn\", function( value, element ) {\r\n    return /^\\d{17}([0-9]|X|x)$/.test( value );\r\n}, \"请输入正确的身份证\" );\r\n//自定义校验规则 --end\r\n\r\n\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy92YWxpZGF0ZS92YWxpZGF0ZS5qcz81MDVmIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsRUFBRTtBQUM3QywwQ0FBMEMsRUFBRTtBQUM1Qyw2Q0FBNkMsRUFBRSxJQUFJLEVBQUU7QUFDckQsdUNBQXVDLEVBQUUsSUFBSSxFQUFFO0FBQy9DLHFDQUFxQyxFQUFFO0FBQ3ZDLHFDQUFxQyxFQUFFO0FBQ3ZDLENBQUM7QUFDRDs7O0FBR0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOzs7QUFHRDtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBLDJEQUEyRCxFQUFFO0FBQzdELENBQUMsa0dBQWtHOztBQUVuRztBQUNBLG1CQUFtQixLQUFLLFlBQVksTUFBTSxHQUFHLElBQUksTUFBTSxJQUFJO0FBQzNELENBQUM7O0FBRUQ7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQSxzQkFBc0IsSUFBSSw2QkFBNkIsSUFBSSw2QkFBNkIsSUFBSSw2QkFBNkIsSUFBSTtBQUM3SCxDQUFDOztBQUVEO0FBQ0EscUJBQXFCLEVBQUU7QUFDdkIsQ0FBQzs7QUFFRDtBQUNBLHNCQUFzQixJQUFJLFFBQVEsSUFBSSxPQUFPLElBQUksT0FBTyxHQUFHO0FBQzNELENBQUM7O0FBRUQ7QUFDQSxnQkFBZ0IsR0FBRztBQUNuQixDQUFDO0FBQ0QiLCJmaWxlIjoiMTYuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBBZG1pbmlzdHJhdG9yIG9uIDIwMTcvMS85LlxyXG4gKi9cclxuXHJcbi8v6Ieq5a6a5LmJdmFsaWRhdG9yIC0tYmVnaW5cclxuJC52YWxpZGF0b3Iuc2V0RGVmYXVsdHMoe1xyXG4gICAgZGVidWc6IHRydWUsXHJcbiAgICBzdWJtaXRIYW5kbGVyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYWxlcnQoXCLpqozor4HpgJrov4fvvIzmj5DkuqTmiJDlip8hXCIpO1xyXG4gICAgfVxyXG59KTtcclxuLy/oh6rlrprkuYl2YWxpZGF0b3IgLS1lbmRcclxuXHJcbi8v6Ieq5a6a5LmJbWVzc2FnZXMgLS1iZWdpblxyXG4kLmV4dGVuZCgkLnZhbGlkYXRvci5tZXNzYWdlcywge1xyXG4gICAgcmVxdWlyZWQ6IFwi6L+Z6YeM5LiN6IO95Li656m6XCIsXHJcbiAgICByZW1vdGU6IFwi6K+35L+u5q2j5q2k5a2X5q61XCIsXHJcbiAgICBlbWFpbDogXCLor7fmj5DkvpvmnInmlYjnmoTpgq7nrrEsIOagvOW8j25hbWVAZG9tYWluLmNvbVwiLFxyXG4gICAgdXJsOiBcIuivt+i+k+WFpeacieaViOeahOe9keWdgFwiLFxyXG4gICAgZGF0ZTogXCLor7fovpPlhaXmnInmlYjnmoTml6XmnJ9cIixcclxuICAgIGRhdGVJU086IFwi6K+36L6T5YWl5pyJ5pWI55qE5pel5pyfIChZWVlZLU1NLUREKVwiLFxyXG4gICAgbnVtYmVyOiBcIuivt+i+k+WFpeacieaViOeahOaVsOWtl1wiLFxyXG4gICAgZGlnaXRzOiBcIuWPquiDvei+k+WFpeaVtOaVsOaVsOWtl1wiLFxyXG4gICAgY3JlZGl0Y2FyZDogXCLor7fovpPlhaXmnInmlYjnmoTkv6HnlKjljaHlj7fnoIFcIixcclxuICAgIGVxdWFsVG86IFwi5L2g55qE6L6T5YWl5LiN55u45ZCMXCIsXHJcbiAgICBleHRlbnNpb246IFwi6K+35qOA5p+l5ZCO57yAXCIsXHJcbiAgICBtYXhsZW5ndGg6ICQudmFsaWRhdG9yLmZvcm1hdChcIuacgOWkmuWPr+S7pei+k+WFpSB7MH0g5Liq5a2X56ymXCIpLFxyXG4gICAgbWlubGVuZ3RoOiAkLnZhbGlkYXRvci5mb3JtYXQoXCLmnIDlsJHopoHovpPlhaUgezB9IOS4quWtl+esplwiKSxcclxuICAgIHJhbmdlbGVuZ3RoOiAkLnZhbGlkYXRvci5mb3JtYXQoXCLor7fovpPlhaXplb/luqblnKggezB9IOWIsCB7MX0g5LmL6Ze055qE5a2X56ym5LiyXCIpLFxyXG4gICAgcmFuZ2U6ICQudmFsaWRhdG9yLmZvcm1hdChcIuivt+i+k+WFpeiMg+WbtOWcqCB7MH0g5YiwIHsxfSDkuYvpl7TnmoTmlbDlgLxcIiksXHJcbiAgICBtYXg6ICQudmFsaWRhdG9yLmZvcm1hdChcIuivt+i+k+WFpeS4jeWkp+S6jiB7MH0g55qE5pWw5YC8XCIpLFxyXG4gICAgbWluOiAkLnZhbGlkYXRvci5mb3JtYXQoXCLor7fovpPlhaXkuI3lsI/kuo4gezB9IOeahOaVsOWAvFwiKVxyXG59KTtcclxuLy/oh6rlrprkuYltZXNzYWdlcyAtLWVuZFxyXG5cclxuXHJcbi8v6Ieq5a6a5LmJ5qCh6aqM6KeE5YiZIC0tYmVnaW5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCBcInhsb3dlclwiLCBmdW5jdGlvbiggdmFsdWUsIGVsZW1lbnQgKSB7XHJcbiAgICByZXR1cm4gL1thLXpdLy50ZXN0KCB2YWx1ZSApO1xyXG59LCBcIuivt+WMheWQq+Wwj+WGmeWtl+avjVwiICk7XHJcblxyXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoIFwieGNhcGl0YWxcIiwgZnVuY3Rpb24oIHZhbHVlLCBlbGVtZW50ICkge1xyXG4gICAgcmV0dXJuIC9bQS1aXS8udGVzdCggdmFsdWUgKTtcclxufSwgXCLor7fljIXlkKvlpKflhpnlrZfmr41cIiApO1xyXG5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCBcInhkaWdpdFwiLCBmdW5jdGlvbiggdmFsdWUsIGVsZW1lbnQgKSB7XHJcbiAgICByZXR1cm4gL1xcZC8udGVzdCggdmFsdWUgKTtcclxufSwgXCLor7fljIXlkKvmlbDlrZdcIiApO1xyXG5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCBcInhzcGVjaWFsXCIsIGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCApIHtcclxuICAgIHJldHVybiAvXFxXLy50ZXN0KCB2YWx1ZSApO1xyXG59LCBcIuivt+WMheWQq+eJueauiuWtl+esplwiICk7XHJcblxyXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoIFwieGNoYXJzMlwiLCBmdW5jdGlvbiggdmFsdWUsIGVsZW1lbnQgKSB7XHJcbiAgICB2YXIgdmFsPTA7XHJcbiAgICBpZigvW2Etel0vLnRlc3QoIHZhbHVlICkpe1xyXG4gICAgICAgIHZhbCsrO1xyXG4gICAgfVxyXG4gICAgaWYoL1tBLVpdLy50ZXN0KCB2YWx1ZSApKXtcclxuICAgICAgICB2YWwrKztcclxuICAgIH1cclxuICAgIGlmKC9cXGQvLnRlc3QoIHZhbHVlICkpe1xyXG4gICAgICAgIHZhbCsrO1xyXG4gICAgfVxyXG4gICAgaWYoL1xcVy8udGVzdCggdmFsdWUgKSl7XHJcbiAgICAgICAgdmFsKys7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdmFsPj0yO1xyXG59LCBcIuivt+iHs+WwkeWMheWQqzLnp43lrZfnrKZcIiApO1xyXG5cclxuXHJcbiQudmFsaWRhdG9yLmFkZE1ldGhvZCggXCJ4bmFtZVwiLCBmdW5jdGlvbiggdmFsdWUsIGVsZW1lbnQgKSB7XHJcbiAgICByZXR1cm4gL14oXFx3K3xbXFx1NGUwMC1cXHU5ZmE1XSspJC8udGVzdCggdmFsdWUgKTtcclxufSwgXCLlp5PlkI3lj6/ku6XljIXlkKvlrZfmr43jgIHmlbDlrZfjgIHkuIvliJLnur/miJbmsYnlrZdcIiApO1xyXG5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCBcInh1c2VyXCIsIGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCApIHtcclxuICAgIHJldHVybiAvXig/IVtcXGRfXSlbXFx3XFx1NGUwMC1cXHU5ZmE1XSskLy50ZXN0KCB2YWx1ZSApO1xyXG59LCBcIueUqOaIt+WQjeWPr+S7peWMheWQq+Wtl+avjeOAgeaVsOWtl+OAgSdfJ+WSjOaxieWtl++8jOS4jeWFgeiuuOS7peaVsOWtl+aIlidfJ+W8gOWktFwiICk7XHJcblxyXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoIFwieHB3ZFwiLCBmdW5jdGlvbiggdmFsdWUsIGVsZW1lbnQgKSB7XHJcbiAgICByZXR1cm4gL15cXFMrJC8udGVzdCggdmFsdWUgKTtcclxufSwgXCLlr4bnoIHmnIDlsJE25L2N77yM5Y+v5Lul5YyF5ZCr5Lu75L2V6Z2e56m655m95a2X56ymXCIgKTtcclxuXHJcbiQudmFsaWRhdG9yLmFkZE1ldGhvZCggXCJ4cGhvbmVcIiwgZnVuY3Rpb24oIHZhbHVlLCBlbGVtZW50ICkge1xyXG4gICAgcmV0dXJuIC9eMSgzWzAtOV18NFs1N118NVswLTM1LTldfDdbMDEzNTY3OF18OFswLTldKVxcZHs4fSQvLnRlc3QodmFsdWUpO1xyXG59LCBcIuivt+i+k+WFpeato+ehrueahDEx5L2N5omL5py65Y+356CBLCDmlK/mjIExM1swLTldLCAxNFs1LDddLCAxNVswLCAxLCAyLCAzLCA1LCA2LCA3LCA4LCA5XSwgMTdbMCwgMSwgNiwgNywgOF0sIDE4WzAtOV1cIik7Ly/mlK/mjIExM1swLTldLCAxNFs1LDddLCAxNVswLCAxLCAyLCAzLCA1LCA2LCA3LCA4LCA5XSwgMTdbMCwgMSwgNiwgNywgOF0sIDE4WzAtOV1cclxuXHJcbiQudmFsaWRhdG9yLmFkZE1ldGhvZCggXCJ4ZW1haWxcIiwgZnVuY3Rpb24oIHZhbHVlLCBlbGVtZW50ICkge1xyXG4gICAgcmV0dXJuIC9eW1xcdy5dezEsNjR9QChbYS16MC05LV17MSwyMDB9Lil7MSw1fVthLXpdezEsNn0kLy50ZXN0KCB2YWx1ZSApO1xyXG59LCBcIuivt+i+k+WFpeato+ehrueahEVtYWls5Zyw5Z2A77yM5qC85byPOiBuYW1lQGRvbWFpblwiICk7XHJcblxyXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoIFwieHVybFwiLCBmdW5jdGlvbiggdmFsdWUsIGVsZW1lbnQgKSB7XHJcbiAgICByZXR1cm4gL14oKGh0dHB8ZnRwfGh0dHBzKTpcXC9cXC8pP1tcXHdfLl0rKFxcL1tcXHdfXSspKlxcLz8kLy50ZXN0KCB2YWx1ZSApO1xyXG59LCBcIuivt+i+k+WFpeato+ehrueahHVybOWcsOWdgFwiICk7XHJcblxyXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoIFwieGlwXCIsIGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCApIHtcclxuICAgIHJldHVybiAvXihbMDFdP1xcZHsxLDJ9fDJbMC00XVxcZHwyNVswLTVdKVxcLihbMDFdP1xcZHsxLDJ9fDJbMC00XVxcZHwyNVswLTVdKVxcLihbMDFdP1xcZHsxLDJ9fDJbMC00XVxcZHwyNVswLTVdKVxcLihbMDFdP1xcZHsxLDJ9fDJbMC00XVxcZHwyNVswLTVdKSQvLnRlc3QoIHZhbHVlICk7XHJcbn0sIFwi6K+36L6T5YWl5q2j56Gu55qEaXDlnLDlnYBcIiApO1xyXG5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCBcInhwb3N0aWRcIiwgZnVuY3Rpb24oIHZhbHVlLCBlbGVtZW50ICkge1xyXG4gICAgcmV0dXJuIC9eWzEtOV1cXGR7NX0oPyFcXGQpJC8udGVzdCggdmFsdWUgKTtcclxufSwgXCLor7fovpPlhaXmraPnoa7nmoTpgq7mlL/nvJbnoIFcIiApO1xyXG5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCBcInh0ZWxcIiwgZnVuY3Rpb24oIHZhbHVlLCBlbGVtZW50ICkge1xyXG4gICAgcmV0dXJuIC9eKChbMCtdXFxkezIsM30tKT8oMFxcZHsyLDN9KS0pKFxcZHs3LDh9KSgtKFxcZHszLH0pKT8kLy50ZXN0KCB2YWx1ZSApO1xyXG59LCBcIuivt+i+k+WFpeato+ehrueahOWbuuWumueUteivnVwiICk7XHJcblxyXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoIFwieGlkY25cIiwgZnVuY3Rpb24oIHZhbHVlLCBlbGVtZW50ICkge1xyXG4gICAgcmV0dXJuIC9eXFxkezE3fShbMC05XXxYfHgpJC8udGVzdCggdmFsdWUgKTtcclxufSwgXCLor7fovpPlhaXmraPnoa7nmoTouqvku73or4FcIiApO1xyXG4vL+iHquWumuS5ieagoemqjOinhOWImSAtLWVuZFxyXG5cclxuXHJcblxyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzL3ZhbGlkYXRlL3ZhbGlkYXRlLmpzXG4vLyBtb2R1bGUgaWQgPSAxNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 17 */
/***/ function(module, exports, __webpack_require__) {

	eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\r\n * jQuery Placeholder Plugin v2.3.1\r\n * https://github.com/mathiasbynens/jquery-placeholder\r\n *\r\n * Copyright 2011, 2015 Mathias Bynens\r\n * Released under the MIT license\r\n */\r\n(function (factory) {\r\n    if (true) {\r\n        // AMD\r\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(13)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n    } else if (typeof module === 'object' && module.exports) {\r\n        factory(require('jquery'));\r\n    } else {\r\n        // Browser globals\r\n        factory(jQuery);\r\n    }\r\n}(function ($) {\r\n\r\n    /****\r\n     * Allows plugin behavior simulation in modern browsers for easier debugging.\r\n     * When setting to true, use attribute \"placeholder-x\" rather than the usual \"placeholder\" in your inputs/textareas\r\n     * i.e. <input type=\"text\" placeholder-x=\"my placeholder text\" />\r\n     */\r\n    var debugMode = false;\r\n\r\n    // Opera Mini v7 doesn't support placeholder although its DOM seems to indicate so\r\n    var isOperaMini = Object.prototype.toString.call(window.operamini) === '[object OperaMini]';\r\n    var isInputSupported = 'placeholder' in document.createElement('input') && !isOperaMini && !debugMode;\r\n    var isTextareaSupported = 'placeholder' in document.createElement('textarea') && !isOperaMini && !debugMode;\r\n    var valHooks = $.valHooks;\r\n    var propHooks = $.propHooks;\r\n    var hooks;\r\n    var placeholder;\r\n    var settings = {};\r\n\r\n    if (isInputSupported && isTextareaSupported) {\r\n\r\n        placeholder = $.fn.placeholder = function () {\r\n            return this;\r\n        };\r\n\r\n        placeholder.input = true;\r\n        placeholder.textarea = true;\r\n\r\n    } else {\r\n\r\n        placeholder = $.fn.placeholder = function (options) {\r\n\r\n            var defaults = {customClass: 'placeholder'};\r\n            settings = $.extend({}, defaults, options);\r\n\r\n            return this.filter((isInputSupported ? 'textarea' : ':input') + '[' + (debugMode ? 'placeholder-x' : 'placeholder') + ']')\r\n                .not('.' + settings.customClass)\r\n                .not(':radio, :checkbox, [type=hidden]')\r\n                .bind({\r\n                    'focus.placeholder': clearPlaceholder,\r\n                    'blur.placeholder': setPlaceholder\r\n                })\r\n                .data('placeholder-enabled', true)\r\n                .trigger('blur.placeholder');\r\n        };\r\n\r\n        placeholder.input = isInputSupported;\r\n        placeholder.textarea = isTextareaSupported;\r\n\r\n        hooks = {\r\n            'get': function (element) {\r\n\r\n                var $element = $(element);\r\n                var $passwordInput = $element.data('placeholder-password');\r\n\r\n                if ($passwordInput) {\r\n                    return $passwordInput[0].value;\r\n                }\r\n\r\n                return $element.data('placeholder-enabled') && $element.hasClass(settings.customClass) ? '' : element.value;\r\n            },\r\n            'set': function (element, value) {\r\n\r\n                var $element = $(element);\r\n                var $replacement;\r\n                var $passwordInput;\r\n\r\n                if (value !== '') {\r\n\r\n                    $replacement = $element.data('placeholder-textinput');\r\n                    $passwordInput = $element.data('placeholder-password');\r\n\r\n                    if ($replacement) {\r\n                        clearPlaceholder.call($replacement[0], true, value) || (element.value = value);\r\n                        $replacement[0].value = value;\r\n\r\n                    } else if ($passwordInput) {\r\n                        clearPlaceholder.call(element, true, value) || ($passwordInput[0].value = value);\r\n                        element.value = value;\r\n                    }\r\n                }\r\n\r\n                if (!$element.data('placeholder-enabled')) {\r\n                    element.value = value;\r\n                    return $element;\r\n                }\r\n\r\n                if (value === '') {\r\n\r\n                    element.value = value;\r\n\r\n                    // Setting the placeholder causes problems if the element continues to have focus.\r\n                    if (element != safeActiveElement()) {\r\n                        // We can't use `triggerHandler` here because of dummy text/password inputs :(\r\n                        setPlaceholder.call(element);\r\n                    }\r\n\r\n                } else {\r\n\r\n                    if ($element.hasClass(settings.customClass)) {\r\n                        clearPlaceholder.call(element);\r\n                    }\r\n\r\n                    element.value = value;\r\n                }\r\n                // `set` can not return `undefined`; see http://jsapi.info/jquery/1.7.1/val#L2363\r\n                return $element;\r\n            }\r\n        };\r\n\r\n        if (!isInputSupported) {\r\n            valHooks.input = hooks;\r\n            propHooks.value = hooks;\r\n        }\r\n\r\n        if (!isTextareaSupported) {\r\n            valHooks.textarea = hooks;\r\n            propHooks.value = hooks;\r\n        }\r\n\r\n        $(function () {\r\n            // Look for forms\r\n            $(document).delegate('form', 'submit.placeholder', function () {\r\n\r\n                // Clear the placeholder values so they don't get submitted\r\n                var $inputs = $('.' + settings.customClass, this).each(function () {\r\n                    clearPlaceholder.call(this, true, '');\r\n                });\r\n\r\n                setTimeout(function () {\r\n                    $inputs.each(setPlaceholder);\r\n                }, 10);\r\n            });\r\n        });\r\n\r\n        // Clear placeholder values upon page reload\r\n        $(window).bind('beforeunload.placeholder', function () {\r\n\r\n            var clearPlaceholders = true;\r\n\r\n            try {\r\n                // Prevent IE javascript:void(0) anchors from causing cleared values\r\n                if (document.activeElement.toString() === 'javascript:void(0)') {\r\n                    clearPlaceholders = false;\r\n                }\r\n            } catch (exception) {\r\n            }\r\n\r\n            if (clearPlaceholders) {\r\n                $('.' + settings.customClass).each(function () {\r\n                    this.value = '';\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    function args(elem) {\r\n        // Return an object of element attributes\r\n        var newAttrs = {};\r\n        var rinlinejQuery = /^jQuery\\d+$/;\r\n\r\n        $.each(elem.attributes, function (i, attr) {\r\n            if (attr.specified && !rinlinejQuery.test(attr.name)) {\r\n                newAttrs[attr.name] = attr.value;\r\n            }\r\n        });\r\n\r\n        return newAttrs;\r\n    }\r\n\r\n    function clearPlaceholder(event, value) {\r\n\r\n        var input = this;\r\n        var $input = $(this);\r\n\r\n        if (input.value === $input.attr((debugMode ? 'placeholder-x' : 'placeholder')) && $input.hasClass(settings.customClass)) {\r\n\r\n            input.value = '';\r\n            $input.removeClass(settings.customClass);\r\n\r\n            if ($input.data('placeholder-password')) {\r\n\r\n                $input = $input.hide().nextAll('input[type=\"password\"]:first').show().attr('id', $input.removeAttr('id').data('placeholder-id'));\r\n\r\n                // If `clearPlaceholder` was called from `$.valHooks.input.set`\r\n                if (event === true) {\r\n                    $input[0].value = value;\r\n\r\n                    return value;\r\n                }\r\n\r\n                $input.focus();\r\n\r\n            } else {\r\n                input == safeActiveElement() && input.select();\r\n            }\r\n        }\r\n    }\r\n\r\n    function setPlaceholder(event) {\r\n        var $replacement;\r\n        var input = this;\r\n        var $input = $(this);\r\n        var id = input.id;\r\n\r\n        // If the placeholder is activated, triggering blur event (`$input.trigger('blur')`) should do nothing.\r\n        if (event && event.type === 'blur' && $input.hasClass(settings.customClass)) {\r\n            return;\r\n        }\r\n\r\n        if (input.value === '') {\r\n            if (input.type === 'password') {\r\n                if (!$input.data('placeholder-textinput')) {\r\n\r\n                    try {\r\n                        $replacement = $input.clone().prop({'type': 'text'});\r\n                    } catch (e) {\r\n                        $replacement = $('<input>').attr($.extend(args(this), {'type': 'text'}));\r\n                    }\r\n\r\n                    $replacement\r\n                        .removeAttr('name')\r\n                        .data({\r\n                            'placeholder-enabled': true,\r\n                            'placeholder-password': $input,\r\n                            'placeholder-id': id\r\n                        })\r\n                        .bind('focus.placeholder', clearPlaceholder);\r\n\r\n                    $input\r\n                        .data({\r\n                            'placeholder-textinput': $replacement,\r\n                            'placeholder-id': id\r\n                        })\r\n                        .before($replacement);\r\n                }\r\n\r\n                input.value = '';\r\n                $input = $input.removeAttr('id').hide().prevAll('input[type=\"text\"]:first').attr('id', $input.data('placeholder-id')).show();\r\n\r\n            } else {\r\n\r\n                var $passwordInput = $input.data('placeholder-password');\r\n\r\n                if ($passwordInput) {\r\n                    $passwordInput[0].value = '';\r\n                    $input.attr('id', $input.data('placeholder-id')).show().nextAll('input[type=\"password\"]:last').hide().removeAttr('id');\r\n                }\r\n            }\r\n\r\n            $input.addClass(settings.customClass);\r\n            $input[0].value = $input.attr((debugMode ? 'placeholder-x' : 'placeholder'));\r\n\r\n        } else {\r\n            $input.removeClass(settings.customClass);\r\n        }\r\n    }\r\n\r\n    function safeActiveElement() {\r\n        // Avoid IE9 `document.activeElement` of death\r\n        try {\r\n            return document.activeElement;\r\n        } catch (exception) {\r\n        }\r\n    }\r\n}));//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9wbGFjZWhvbGRlci9qcXVlcnkucGxhY2Vob2xkZXIuanM/ZTE4ZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxLQUFLOztBQUVMOztBQUVBLDRCQUE0QjtBQUM1QixrQ0FBa0M7O0FBRWxDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsYUFBYTtBQUNiOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0RBQW9EO0FBQ3BEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYixTQUFTOztBQUVUO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDREQUE0RCxlQUFlO0FBQzNFLHFCQUFxQjtBQUNyQiwrRUFBK0UsZUFBZTtBQUM5Rjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTs7QUFFQTtBQUNBOztBQUVBLGFBQWE7O0FBRWI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLENBQUMiLCJmaWxlIjoiMTcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcclxuICogalF1ZXJ5IFBsYWNlaG9sZGVyIFBsdWdpbiB2Mi4zLjFcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21hdGhpYXNieW5lbnMvanF1ZXJ5LXBsYWNlaG9sZGVyXHJcbiAqXHJcbiAqIENvcHlyaWdodCAyMDExLCAyMDE1IE1hdGhpYXMgQnluZW5zXHJcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxyXG4gKi9cclxuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XHJcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XHJcbiAgICAgICAgLy8gQU1EXHJcbiAgICAgICAgZGVmaW5lKFsnanF1ZXJ5J10sIGZhY3RvcnkpO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykge1xyXG4gICAgICAgIGZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JykpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBCcm93c2VyIGdsb2JhbHNcclxuICAgICAgICBmYWN0b3J5KGpRdWVyeSk7XHJcbiAgICB9XHJcbn0oZnVuY3Rpb24gKCQpIHtcclxuXHJcbiAgICAvKioqKlxyXG4gICAgICogQWxsb3dzIHBsdWdpbiBiZWhhdmlvciBzaW11bGF0aW9uIGluIG1vZGVybiBicm93c2VycyBmb3IgZWFzaWVyIGRlYnVnZ2luZy5cclxuICAgICAqIFdoZW4gc2V0dGluZyB0byB0cnVlLCB1c2UgYXR0cmlidXRlIFwicGxhY2Vob2xkZXIteFwiIHJhdGhlciB0aGFuIHRoZSB1c3VhbCBcInBsYWNlaG9sZGVyXCIgaW4geW91ciBpbnB1dHMvdGV4dGFyZWFzXHJcbiAgICAgKiBpLmUuIDxpbnB1dCB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyLXg9XCJteSBwbGFjZWhvbGRlciB0ZXh0XCIgLz5cclxuICAgICAqL1xyXG4gICAgdmFyIGRlYnVnTW9kZSA9IGZhbHNlO1xyXG5cclxuICAgIC8vIE9wZXJhIE1pbmkgdjcgZG9lc24ndCBzdXBwb3J0IHBsYWNlaG9sZGVyIGFsdGhvdWdoIGl0cyBET00gc2VlbXMgdG8gaW5kaWNhdGUgc29cclxuICAgIHZhciBpc09wZXJhTWluaSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh3aW5kb3cub3BlcmFtaW5pKSA9PT0gJ1tvYmplY3QgT3BlcmFNaW5pXSc7XHJcbiAgICB2YXIgaXNJbnB1dFN1cHBvcnRlZCA9ICdwbGFjZWhvbGRlcicgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKSAmJiAhaXNPcGVyYU1pbmkgJiYgIWRlYnVnTW9kZTtcclxuICAgIHZhciBpc1RleHRhcmVhU3VwcG9ydGVkID0gJ3BsYWNlaG9sZGVyJyBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpICYmICFpc09wZXJhTWluaSAmJiAhZGVidWdNb2RlO1xyXG4gICAgdmFyIHZhbEhvb2tzID0gJC52YWxIb29rcztcclxuICAgIHZhciBwcm9wSG9va3MgPSAkLnByb3BIb29rcztcclxuICAgIHZhciBob29rcztcclxuICAgIHZhciBwbGFjZWhvbGRlcjtcclxuICAgIHZhciBzZXR0aW5ncyA9IHt9O1xyXG5cclxuICAgIGlmIChpc0lucHV0U3VwcG9ydGVkICYmIGlzVGV4dGFyZWFTdXBwb3J0ZWQpIHtcclxuXHJcbiAgICAgICAgcGxhY2Vob2xkZXIgPSAkLmZuLnBsYWNlaG9sZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBwbGFjZWhvbGRlci5pbnB1dCA9IHRydWU7XHJcbiAgICAgICAgcGxhY2Vob2xkZXIudGV4dGFyZWEgPSB0cnVlO1xyXG5cclxuICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgIHBsYWNlaG9sZGVyID0gJC5mbi5wbGFjZWhvbGRlciA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGVmYXVsdHMgPSB7Y3VzdG9tQ2xhc3M6ICdwbGFjZWhvbGRlcid9O1xyXG4gICAgICAgICAgICBzZXR0aW5ncyA9ICQuZXh0ZW5kKHt9LCBkZWZhdWx0cywgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXIoKGlzSW5wdXRTdXBwb3J0ZWQgPyAndGV4dGFyZWEnIDogJzppbnB1dCcpICsgJ1snICsgKGRlYnVnTW9kZSA/ICdwbGFjZWhvbGRlci14JyA6ICdwbGFjZWhvbGRlcicpICsgJ10nKVxyXG4gICAgICAgICAgICAgICAgLm5vdCgnLicgKyBzZXR0aW5ncy5jdXN0b21DbGFzcylcclxuICAgICAgICAgICAgICAgIC5ub3QoJzpyYWRpbywgOmNoZWNrYm94LCBbdHlwZT1oaWRkZW5dJylcclxuICAgICAgICAgICAgICAgIC5iaW5kKHtcclxuICAgICAgICAgICAgICAgICAgICAnZm9jdXMucGxhY2Vob2xkZXInOiBjbGVhclBsYWNlaG9sZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICdibHVyLnBsYWNlaG9sZGVyJzogc2V0UGxhY2Vob2xkZXJcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZGF0YSgncGxhY2Vob2xkZXItZW5hYmxlZCcsIHRydWUpXHJcbiAgICAgICAgICAgICAgICAudHJpZ2dlcignYmx1ci5wbGFjZWhvbGRlcicpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHBsYWNlaG9sZGVyLmlucHV0ID0gaXNJbnB1dFN1cHBvcnRlZDtcclxuICAgICAgICBwbGFjZWhvbGRlci50ZXh0YXJlYSA9IGlzVGV4dGFyZWFTdXBwb3J0ZWQ7XHJcblxyXG4gICAgICAgIGhvb2tzID0ge1xyXG4gICAgICAgICAgICAnZ2V0JzogZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgJGVsZW1lbnQgPSAkKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgdmFyICRwYXNzd29yZElucHV0ID0gJGVsZW1lbnQuZGF0YSgncGxhY2Vob2xkZXItcGFzc3dvcmQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoJHBhc3N3b3JkSW5wdXQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHBhc3N3b3JkSW5wdXRbMF0udmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRlbGVtZW50LmRhdGEoJ3BsYWNlaG9sZGVyLWVuYWJsZWQnKSAmJiAkZWxlbWVudC5oYXNDbGFzcyhzZXR0aW5ncy5jdXN0b21DbGFzcykgPyAnJyA6IGVsZW1lbnQudmFsdWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzZXQnOiBmdW5jdGlvbiAoZWxlbWVudCwgdmFsdWUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgJGVsZW1lbnQgPSAkKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgdmFyICRyZXBsYWNlbWVudDtcclxuICAgICAgICAgICAgICAgIHZhciAkcGFzc3dvcmRJbnB1dDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT09ICcnKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRyZXBsYWNlbWVudCA9ICRlbGVtZW50LmRhdGEoJ3BsYWNlaG9sZGVyLXRleHRpbnB1dCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICRwYXNzd29yZElucHV0ID0gJGVsZW1lbnQuZGF0YSgncGxhY2Vob2xkZXItcGFzc3dvcmQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRyZXBsYWNlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclBsYWNlaG9sZGVyLmNhbGwoJHJlcGxhY2VtZW50WzBdLCB0cnVlLCB2YWx1ZSkgfHwgKGVsZW1lbnQudmFsdWUgPSB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRyZXBsYWNlbWVudFswXS52YWx1ZSA9IHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCRwYXNzd29yZElucHV0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyUGxhY2Vob2xkZXIuY2FsbChlbGVtZW50LCB0cnVlLCB2YWx1ZSkgfHwgKCRwYXNzd29yZElucHV0WzBdLnZhbHVlID0gdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICghJGVsZW1lbnQuZGF0YSgncGxhY2Vob2xkZXItZW5hYmxlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkZWxlbWVudDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09ICcnKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudmFsdWUgPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU2V0dGluZyB0aGUgcGxhY2Vob2xkZXIgY2F1c2VzIHByb2JsZW1zIGlmIHRoZSBlbGVtZW50IGNvbnRpbnVlcyB0byBoYXZlIGZvY3VzLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50ICE9IHNhZmVBY3RpdmVFbGVtZW50KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgY2FuJ3QgdXNlIGB0cmlnZ2VySGFuZGxlcmAgaGVyZSBiZWNhdXNlIG9mIGR1bW15IHRleHQvcGFzc3dvcmQgaW5wdXRzIDooXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFBsYWNlaG9sZGVyLmNhbGwoZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkZWxlbWVudC5oYXNDbGFzcyhzZXR0aW5ncy5jdXN0b21DbGFzcykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJQbGFjZWhvbGRlci5jYWxsKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gYHNldGAgY2FuIG5vdCByZXR1cm4gYHVuZGVmaW5lZGA7IHNlZSBodHRwOi8vanNhcGkuaW5mby9qcXVlcnkvMS43LjEvdmFsI0wyMzYzXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJGVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAoIWlzSW5wdXRTdXBwb3J0ZWQpIHtcclxuICAgICAgICAgICAgdmFsSG9va3MuaW5wdXQgPSBob29rcztcclxuICAgICAgICAgICAgcHJvcEhvb2tzLnZhbHVlID0gaG9va3M7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWlzVGV4dGFyZWFTdXBwb3J0ZWQpIHtcclxuICAgICAgICAgICAgdmFsSG9va3MudGV4dGFyZWEgPSBob29rcztcclxuICAgICAgICAgICAgcHJvcEhvb2tzLnZhbHVlID0gaG9va3M7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gTG9vayBmb3IgZm9ybXNcclxuICAgICAgICAgICAgJChkb2N1bWVudCkuZGVsZWdhdGUoJ2Zvcm0nLCAnc3VibWl0LnBsYWNlaG9sZGVyJywgZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIENsZWFyIHRoZSBwbGFjZWhvbGRlciB2YWx1ZXMgc28gdGhleSBkb24ndCBnZXQgc3VibWl0dGVkXHJcbiAgICAgICAgICAgICAgICB2YXIgJGlucHV0cyA9ICQoJy4nICsgc2V0dGluZ3MuY3VzdG9tQ2xhc3MsIHRoaXMpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyUGxhY2Vob2xkZXIuY2FsbCh0aGlzLCB0cnVlLCAnJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkaW5wdXRzLmVhY2goc2V0UGxhY2Vob2xkZXIpO1xyXG4gICAgICAgICAgICAgICAgfSwgMTApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gQ2xlYXIgcGxhY2Vob2xkZXIgdmFsdWVzIHVwb24gcGFnZSByZWxvYWRcclxuICAgICAgICAkKHdpbmRvdykuYmluZCgnYmVmb3JldW5sb2FkLnBsYWNlaG9sZGVyJywgZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIGNsZWFyUGxhY2Vob2xkZXJzID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAvLyBQcmV2ZW50IElFIGphdmFzY3JpcHQ6dm9pZCgwKSBhbmNob3JzIGZyb20gY2F1c2luZyBjbGVhcmVkIHZhbHVlc1xyXG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQudG9TdHJpbmcoKSA9PT0gJ2phdmFzY3JpcHQ6dm9pZCgwKScpIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhclBsYWNlaG9sZGVycyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChleGNlcHRpb24pIHtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGNsZWFyUGxhY2Vob2xkZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuJyArIHNldHRpbmdzLmN1c3RvbUNsYXNzKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGFyZ3MoZWxlbSkge1xyXG4gICAgICAgIC8vIFJldHVybiBhbiBvYmplY3Qgb2YgZWxlbWVudCBhdHRyaWJ1dGVzXHJcbiAgICAgICAgdmFyIG5ld0F0dHJzID0ge307XHJcbiAgICAgICAgdmFyIHJpbmxpbmVqUXVlcnkgPSAvXmpRdWVyeVxcZCskLztcclxuXHJcbiAgICAgICAgJC5lYWNoKGVsZW0uYXR0cmlidXRlcywgZnVuY3Rpb24gKGksIGF0dHIpIHtcclxuICAgICAgICAgICAgaWYgKGF0dHIuc3BlY2lmaWVkICYmICFyaW5saW5lalF1ZXJ5LnRlc3QoYXR0ci5uYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgbmV3QXR0cnNbYXR0ci5uYW1lXSA9IGF0dHIudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ld0F0dHJzO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNsZWFyUGxhY2Vob2xkZXIoZXZlbnQsIHZhbHVlKSB7XHJcblxyXG4gICAgICAgIHZhciBpbnB1dCA9IHRoaXM7XHJcbiAgICAgICAgdmFyICRpbnB1dCA9ICQodGhpcyk7XHJcblxyXG4gICAgICAgIGlmIChpbnB1dC52YWx1ZSA9PT0gJGlucHV0LmF0dHIoKGRlYnVnTW9kZSA/ICdwbGFjZWhvbGRlci14JyA6ICdwbGFjZWhvbGRlcicpKSAmJiAkaW5wdXQuaGFzQ2xhc3Moc2V0dGluZ3MuY3VzdG9tQ2xhc3MpKSB7XHJcblxyXG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAkaW5wdXQucmVtb3ZlQ2xhc3Moc2V0dGluZ3MuY3VzdG9tQ2xhc3MpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCRpbnB1dC5kYXRhKCdwbGFjZWhvbGRlci1wYXNzd29yZCcpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgJGlucHV0ID0gJGlucHV0LmhpZGUoKS5uZXh0QWxsKCdpbnB1dFt0eXBlPVwicGFzc3dvcmRcIl06Zmlyc3QnKS5zaG93KCkuYXR0cignaWQnLCAkaW5wdXQucmVtb3ZlQXR0cignaWQnKS5kYXRhKCdwbGFjZWhvbGRlci1pZCcpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBJZiBgY2xlYXJQbGFjZWhvbGRlcmAgd2FzIGNhbGxlZCBmcm9tIGAkLnZhbEhvb2tzLmlucHV0LnNldGBcclxuICAgICAgICAgICAgICAgIGlmIChldmVudCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRpbnB1dFswXS52YWx1ZSA9IHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgJGlucHV0LmZvY3VzKCk7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaW5wdXQgPT0gc2FmZUFjdGl2ZUVsZW1lbnQoKSAmJiBpbnB1dC5zZWxlY3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZXRQbGFjZWhvbGRlcihldmVudCkge1xyXG4gICAgICAgIHZhciAkcmVwbGFjZW1lbnQ7XHJcbiAgICAgICAgdmFyIGlucHV0ID0gdGhpcztcclxuICAgICAgICB2YXIgJGlucHV0ID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgaWQgPSBpbnB1dC5pZDtcclxuXHJcbiAgICAgICAgLy8gSWYgdGhlIHBsYWNlaG9sZGVyIGlzIGFjdGl2YXRlZCwgdHJpZ2dlcmluZyBibHVyIGV2ZW50IChgJGlucHV0LnRyaWdnZXIoJ2JsdXInKWApIHNob3VsZCBkbyBub3RoaW5nLlxyXG4gICAgICAgIGlmIChldmVudCAmJiBldmVudC50eXBlID09PSAnYmx1cicgJiYgJGlucHV0Lmhhc0NsYXNzKHNldHRpbmdzLmN1c3RvbUNsYXNzKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoaW5wdXQudmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgIGlmIChpbnB1dC50eXBlID09PSAncGFzc3dvcmQnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoISRpbnB1dC5kYXRhKCdwbGFjZWhvbGRlci10ZXh0aW5wdXQnKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkcmVwbGFjZW1lbnQgPSAkaW5wdXQuY2xvbmUoKS5wcm9wKHsndHlwZSc6ICd0ZXh0J30pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHJlcGxhY2VtZW50ID0gJCgnPGlucHV0PicpLmF0dHIoJC5leHRlbmQoYXJncyh0aGlzKSwgeyd0eXBlJzogJ3RleHQnfSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHJlcGxhY2VtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKCduYW1lJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BsYWNlaG9sZGVyLWVuYWJsZWQnOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BsYWNlaG9sZGVyLXBhc3N3b3JkJzogJGlucHV0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BsYWNlaG9sZGVyLWlkJzogaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmJpbmQoJ2ZvY3VzLnBsYWNlaG9sZGVyJywgY2xlYXJQbGFjZWhvbGRlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZGF0YSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAncGxhY2Vob2xkZXItdGV4dGlucHV0JzogJHJlcGxhY2VtZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BsYWNlaG9sZGVyLWlkJzogaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmJlZm9yZSgkcmVwbGFjZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICAkaW5wdXQgPSAkaW5wdXQucmVtb3ZlQXR0cignaWQnKS5oaWRlKCkucHJldkFsbCgnaW5wdXRbdHlwZT1cInRleHRcIl06Zmlyc3QnKS5hdHRyKCdpZCcsICRpbnB1dC5kYXRhKCdwbGFjZWhvbGRlci1pZCcpKS5zaG93KCk7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciAkcGFzc3dvcmRJbnB1dCA9ICRpbnB1dC5kYXRhKCdwbGFjZWhvbGRlci1wYXNzd29yZCcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICgkcGFzc3dvcmRJbnB1dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRwYXNzd29yZElucHV0WzBdLnZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgJGlucHV0LmF0dHIoJ2lkJywgJGlucHV0LmRhdGEoJ3BsYWNlaG9sZGVyLWlkJykpLnNob3coKS5uZXh0QWxsKCdpbnB1dFt0eXBlPVwicGFzc3dvcmRcIl06bGFzdCcpLmhpZGUoKS5yZW1vdmVBdHRyKCdpZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkaW5wdXQuYWRkQ2xhc3Moc2V0dGluZ3MuY3VzdG9tQ2xhc3MpO1xyXG4gICAgICAgICAgICAkaW5wdXRbMF0udmFsdWUgPSAkaW5wdXQuYXR0cigoZGVidWdNb2RlID8gJ3BsYWNlaG9sZGVyLXgnIDogJ3BsYWNlaG9sZGVyJykpO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkaW5wdXQucmVtb3ZlQ2xhc3Moc2V0dGluZ3MuY3VzdG9tQ2xhc3MpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzYWZlQWN0aXZlRWxlbWVudCgpIHtcclxuICAgICAgICAvLyBBdm9pZCBJRTkgYGRvY3VtZW50LmFjdGl2ZUVsZW1lbnRgIG9mIGRlYXRoXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XHJcbiAgICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy9wbGFjZWhvbGRlci9qcXVlcnkucGxhY2Vob2xkZXIuanNcbi8vIG1vZHVsZSBpZCA9IDE3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 18 */
/***/ function(module, exports, __webpack_require__) {

	eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// jquery.daterangepicker.js\r\n// author : Chunlong Liu\r\n// license : MIT\r\n// www.jszen.com\r\n\r\n__webpack_require__(19);\r\n\r\n(function (factory) {\r\n\t\tif (true) {\r\n\t\t\t// AMD. Register as an anonymous module.\r\n\t\t\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(13), __webpack_require__(20)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n\t\t} else if (typeof exports === 'object' && typeof module !== 'undefined') {\r\n\t\t\t// CommonJS. Register as a module\r\n\t\t\tmodule.exports = factory(require('jquery'), require('moment'));\r\n\t\t} else {\r\n\t\t\t// Browser globals\r\n\t\t\tfactory(jQuery, moment);\r\n\t\t}\r\n}(function ($, moment)\r\n{\r\n    'use strict';\r\n\t$.dateRangePickerLanguages =\r\n\t{\r\n\t\t'default':  //default language: English\r\n\t\t{\r\n\t\t\t'selected': 'Selected:',\r\n\t\t\t'day':'Day',\r\n\t\t\t'days': 'Days',\r\n\t\t\t'apply': 'Close',\r\n\t\t\t'week-1' : 'mo',\r\n\t\t\t'week-2' : 'tu',\r\n\t\t\t'week-3' : 'we',\r\n\t\t\t'week-4' : 'th',\r\n\t\t\t'week-5' : 'fr',\r\n\t\t\t'week-6' : 'sa',\r\n\t\t\t'week-7' : 'su',\r\n\t\t\t'week-number': 'W',\r\n\t\t\t'month-name': ['january','february','march','april','may','june','july','august','september','october','november','december'],\r\n\t\t\t'shortcuts' : 'Shortcuts',\r\n\t\t\t'custom-values': 'Custom Values',\r\n\t\t\t'past': 'Past',\r\n\t\t\t'following':'Following',\r\n\t\t\t'previous' : 'Previous',\r\n\t\t\t'prev-week' : 'Week',\r\n\t\t\t'prev-month' : 'Month',\r\n\t\t\t'prev-year' : 'Year',\r\n\t\t\t'next':'Next',\r\n\t\t\t'next-week':'Week',\r\n\t\t\t'next-month':'Month',\r\n\t\t\t'next-year':'Year',\r\n\t\t\t'less-than' : 'Date range should not be more than %d days',\r\n\t\t\t'more-than' : 'Date range should not be less than %d days',\r\n\t\t\t'default-more' : 'Please select a date range longer than %d days',\r\n\t\t\t'default-single' : 'Please select a date',\r\n\t\t\t'default-less' : 'Please select a date range less than %d days',\r\n\t\t\t'default-range' : 'Please select a date range between %d and %d days',\r\n\t\t\t'default-default': 'Please select a date range',\r\n\t\t\t'time':'Time',\r\n\t\t\t'hour':'Hour',\r\n\t\t\t'minute':'Minute'\r\n\t\t},\r\n\t\t'id':\r\n\t\t{\r\n\t\t\t'selected': 'Terpilih:',\r\n\t\t\t'day': 'Hari',\r\n\t\t\t'days': 'Hari',\r\n\t\t\t'apply': 'Tutup',\r\n\t\t\t'week-1': 'sen',\r\n\t\t\t'week-2': 'sel',\r\n\t\t\t'week-3': 'rab',\r\n\t\t\t'week-4': 'kam',\r\n\t\t\t'week-5': 'jum',\r\n\t\t\t'week-6': 'sab',\r\n\t\t\t'week-7': 'min',\r\n\t\t\t'week-number': 'W',\r\n\t\t\t'month-name': ['januari', 'februari', 'maret', 'april', 'mei', 'juni', 'juli', 'agustus', 'september', 'oktober', 'november', 'desember'],\r\n\t\t\t'shortcuts': 'Pintas',\r\n\t\t\t'custom-values': 'Nilai yang ditentukan',\r\n\t\t\t'past': 'Yang Lalu',\r\n\t\t\t'following': 'Mengikuti',\r\n\t\t\t'previous': 'Sebelumnya',\r\n\t\t\t'prev-week': 'Minggu',\r\n\t\t\t'prev-month': 'Bulan',\r\n\t\t\t'prev-year': 'Tahun',\r\n\t\t\t'next': 'Selanjutnya',\r\n\t\t\t'next-week': 'Minggu',\r\n\t\t\t'next-month': 'Bulan',\r\n\t\t\t'next-year': 'Tahun',\r\n\t\t\t'less-than': 'Tanggal harus lebih dari %d hari',\r\n\t\t\t'more-than': 'Tanggal harus kurang dari %d hari',\r\n\t\t\t'default-more': 'Jarak tanggal harus lebih lama dari %d hari',\r\n\t\t\t'default-single': 'Silakan pilih tanggal',\r\n\t\t\t'default-less': 'Jarak rentang tanggal tidak boleh lebih lama dari %d hari',\r\n\t\t\t'default-range': 'Rentang tanggal harus antara %d dan %d hari',\r\n\t\t\t'default-default': 'Silakan pilih rentang tanggal',\r\n\t\t\t'time': 'Waktu',\r\n\t\t\t'hour': 'Jam',\r\n\t\t\t'minute': 'Menit'\r\n\t\t},\r\n\t\t'az':\r\n\t\t{\r\n\t\t\t'selected': 'Seçildi:',\r\n\t\t\t'day':' gün',\r\n\t\t\t'days': ' gün',\r\n\t\t\t'apply': 'tətbiq',\r\n\t\t\t'week-1' : '1',\r\n\t\t\t'week-2' : '2',\r\n\t\t\t'week-3' : '3',\r\n\t\t\t'week-4' : '4',\r\n\t\t\t'week-5' : '5',\r\n\t\t\t'week-6' : '6',\r\n\t\t\t'week-7' : '7',\r\n\t\t\t'month-name': ['yanvar','fevral','mart','aprel','may','iyun','iyul','avqust','sentyabr','oktyabr','noyabr','dekabr'],\r\n\t\t\t'shortcuts' : 'Qısayollar',\r\n\t\t\t'past': 'Keçmiş',\r\n\t\t\t'following':'Növbəti',\r\n\t\t\t'previous' : '&nbsp;&nbsp;&nbsp;',\r\n\t\t\t'prev-week' : 'Öncəki həftə',\r\n\t\t\t'prev-month' : 'Öncəki ay',\r\n\t\t\t'prev-year' : 'Öncəki il',\r\n\t\t\t'next': '&nbsp;&nbsp;&nbsp;',\r\n\t\t\t'next-week':'Növbəti həftə',\r\n\t\t\t'next-month':'Növbəti ay',\r\n\t\t\t'next-year':'Növbəti il',\r\n\t\t\t'less-than' : 'Tarix aralığı %d gündən çox olmamalıdır',\r\n\t\t\t'more-than' : 'Tarix aralığı %d gündən az olmamalıdır',\r\n\t\t\t'default-more' : '%d gündən çox bir tarix seçin',\r\n\t\t\t'default-single' : 'Tarix seçin',\r\n\t\t\t'default-less' : '%d gündən az bir tarix seçin',\r\n\t\t\t'default-range' : '%d və %d gün aralığında tarixlər seçin',\r\n\t\t\t'default-default': 'Tarix aralığı seçin'\r\n\t\t},\r\n\t\t'cn':  //simplified chinese\r\n\t\t{\r\n\t\t\t'selected': '已选择:',\r\n\t\t\t'day':'天',\r\n\t\t\t'days': '天',\r\n\t\t\t'apply': '确定',\r\n\t\t\t'week-1' : '一',\r\n\t\t\t'week-2' : '二',\r\n\t\t\t'week-3' : '三',\r\n\t\t\t'week-4' : '四',\r\n\t\t\t'week-5' : '五',\r\n\t\t\t'week-6' : '六',\r\n\t\t\t'week-7' : '日',\r\n\t\t\t'week-number': '周',\r\n\t\t\t'month-name': ['一月','二月','三月','四月','五月','六月','七月','八月','九月','十月','十一月','十二月'],\r\n\t\t\t'shortcuts' : '快捷选择',\r\n\t\t\t'past': '过去',\r\n\t\t\t'following':'将来',\r\n\t\t\t'previous' : '&nbsp;&nbsp;&nbsp;',\r\n\t\t\t'prev-week' : '上周',\r\n\t\t\t'prev-month' : '上个月',\r\n\t\t\t'prev-year' : '去年',\r\n\t\t\t'next': '&nbsp;&nbsp;&nbsp;',\r\n\t\t\t'next-week':'下周',\r\n\t\t\t'next-month':'下个月',\r\n\t\t\t'next-year':'明年',\r\n\t\t\t'less-than' : '所选日期范围不能大于%d天',\r\n\t\t\t'more-than' : '所选日期范围不能小于%d天',\r\n\t\t\t'default-more' : '请选择大于%d天的日期范围',\r\n\t\t\t'default-less' : '请选择小于%d天的日期范围',\r\n\t\t\t'default-range' : '请选择%d天到%d天的日期范围',\r\n\t\t\t'default-single':'请选择一个日期',\r\n\t\t\t'default-default': '请选择一个日期范围',\r\n\t\t\t'time':'时间',\r\n\t\t\t'hour':'小时',\r\n\t\t\t'minute':'分钟'\r\n\t\t},\r\n\t\t'cz':\r\n\t\t{\r\n\t\t\t'selected': 'Vybráno:',\r\n\t\t\t'day':'Den',\r\n\t\t\t'days': 'Dny',\r\n\t\t\t'apply': 'Zavřít',\r\n\t\t\t'week-1' : 'po',\r\n\t\t\t'week-2' : 'út',\r\n\t\t\t'week-3' : 'st',\r\n\t\t\t'week-4' : 'čt',\r\n\t\t\t'week-5' : 'pá',\r\n\t\t\t'week-6' : 'so',\r\n\t\t\t'week-7' : 'ne',\r\n\t\t\t'month-name': ['leden','únor','březen','duben','květen','červen','červenec','srpen','září','říjen','listopad','prosinec'],\r\n\t\t\t'shortcuts' : 'Zkratky',\r\n\t\t\t'past': 'po',\r\n\t\t\t'following':'následující',\r\n\t\t\t'previous' : 'předchozí',\r\n\t\t\t'prev-week' : 'týden',\r\n\t\t\t'prev-month' : 'měsíc',\r\n\t\t\t'prev-year' : 'rok',\r\n\t\t\t'next':'další',\r\n\t\t\t'next-week':'týden',\r\n\t\t\t'next-month':'měsíc',\r\n\t\t\t'next-year':'rok',\r\n\t\t\t'less-than' : 'Rozsah data by neměl být větší než %d dnů',\r\n\t\t\t'more-than' : 'Rozsah data by neměl být menší než %d dnů',\r\n\t\t\t'default-more' : 'Prosím zvolte rozsah data větší než %d dnů',\r\n\t\t\t'default-single' : 'Prosím zvolte datum',\r\n\t\t\t'default-less' : 'Prosím zvolte rozsah data menší než %d dnů',\r\n\t\t\t'default-range' : 'Prosím zvolte rozsah data mezi %d a %d dny',\r\n\t\t\t'default-default': 'Prosím zvolte rozsah data'\r\n\t\t},\r\n\t\t'de':\r\n\t\t{\r\n\t\t\t'selected': 'Auswahl:',\r\n\t\t\t'day':'Tag',\r\n\t\t\t'days': 'Tage',\r\n\t\t\t'apply': 'Schließen',\r\n\t\t\t'week-1' : 'mo',\r\n\t\t\t'week-2' : 'di',\r\n\t\t\t'week-3' : 'mi',\r\n\t\t\t'week-4' : 'do',\r\n\t\t\t'week-5' : 'fr',\r\n\t\t\t'week-6' : 'sa',\r\n\t\t\t'week-7' : 'so',\r\n\t\t\t'month-name': ['januar','februar','märz','april','mai','juni','juli','august','september','oktober','november','dezember'],\r\n\t\t\t'shortcuts' : 'Schnellwahl',\r\n\t\t\t'past': 'Vorherige',\r\n\t\t\t'following':'Folgende',\r\n\t\t\t'previous' : 'Vorherige',\r\n\t\t\t'prev-week' : 'Woche',\r\n\t\t\t'prev-month' : 'Monat',\r\n\t\t\t'prev-year' : 'Jahr',\r\n\t\t\t'next':'Nächste',\r\n\t\t\t'next-week':'Woche',\r\n\t\t\t'next-month':'Monat',\r\n\t\t\t'next-year':'Jahr',\r\n\t\t\t'less-than' : 'Datumsbereich darf nicht größer sein als %d Tage',\r\n\t\t\t'more-than' : 'Datumsbereich darf nicht kleiner sein als %d Tage',\r\n\t\t\t'default-more' : 'Bitte mindestens %d Tage auswählen',\r\n\t\t\t'default-single' : 'Bitte ein Datum auswählen',\r\n\t\t\t'default-less' : 'Bitte weniger als %d Tage auswählen',\r\n\t\t\t'default-range' : 'Bitte einen Datumsbereich zwischen %d und %d Tagen auswählen',\r\n\t\t\t'default-default': 'Bitte ein Start- und Enddatum auswählen',\r\n\t\t\t'Time': 'Zeit',\r\n\t\t\t'hour': 'Stunde',\r\n\t\t\t'minute': 'Minute'\r\n\t\t},\r\n\t\t'es':\r\n\t\t{\r\n\t\t\t'selected': 'Seleccionado:',\r\n\t\t\t'day':'Día',\r\n\t\t\t'days': 'Días',\r\n\t\t\t'apply': 'Cerrar',\r\n\t\t\t'week-1' : 'lu',\r\n\t\t\t'week-2' : 'ma',\r\n\t\t\t'week-3' : 'mi',\r\n\t\t\t'week-4' : 'ju',\r\n\t\t\t'week-5' : 'vi',\r\n\t\t\t'week-6' : 'sa',\r\n\t\t\t'week-7' : 'do',\r\n\t\t\t'month-name': ['enero','febrero','marzo','abril','mayo','junio','julio','agosto','septiembre','octubre','noviembre','diciembre'],\r\n\t\t\t'shortcuts' : 'Accesos directos',\r\n\t\t\t'past': 'Pasado',\r\n\t\t\t'following':'Siguiente',\r\n\t\t\t'previous' : 'Anterior',\r\n\t\t\t'prev-week' : 'Semana',\r\n\t\t\t'prev-month' : 'Mes',\r\n\t\t\t'prev-year' : 'Año',\r\n\t\t\t'next':'Siguiente',\r\n\t\t\t'next-week':'Semana',\r\n\t\t\t'next-month':'Mes',\r\n\t\t\t'next-year':'Año',\r\n\t\t\t'less-than' : 'El rango no debería ser mayor de %d días',\r\n\t\t\t'more-than' : 'El rango no debería ser menor de %d días',\r\n\t\t\t'default-more' : 'Por favor selecciona un rango mayor a %d días',\r\n\t\t\t'default-single' : 'Por favor selecciona un día',\r\n\t\t\t'default-less' : 'Por favor selecciona un rango menor a %d días',\r\n\t\t\t'default-range' : 'Por favor selecciona un rango entre %d y %d días',\r\n\t\t\t'default-default': 'Por favor selecciona un rango de fechas.'\r\n\t\t},\r\n\t\t'fr':\r\n\t\t{\r\n\t\t\t'selected': 'Sélection:',\r\n\t\t\t'day':'Jour',\r\n\t\t\t'days': 'Jours',\r\n\t\t\t'apply': 'Fermer',\r\n\t\t\t'week-1' : 'lu',\r\n\t\t\t'week-2' : 'ma',\r\n\t\t\t'week-3' : 'me',\r\n\t\t\t'week-4' : 'je',\r\n\t\t\t'week-5' : 've',\r\n\t\t\t'week-6' : 'sa',\r\n\t\t\t'week-7' : 'di',\r\n\t\t\t'month-name': ['janvier','février','mars','avril','mai','juin','juillet','août','septembre','octobre','novembre','décembre'],\r\n\t\t\t'shortcuts' : 'Raccourcis',\r\n\t\t\t'past': 'Passé',\r\n\t\t\t'following':'Suivant',\r\n\t\t\t'previous' : 'Précédent',\r\n\t\t\t'prev-week' : 'Semaine',\r\n\t\t\t'prev-month' : 'Mois',\r\n\t\t\t'prev-year' : 'Année',\r\n\t\t\t'next':'Suivant',\r\n\t\t\t'next-week':'Semaine',\r\n\t\t\t'next-month':'Mois',\r\n\t\t\t'next-year':'Année',\r\n\t\t\t'less-than' : 'L\\'intervalle ne doit pas être supérieure à %d jours',\r\n\t\t\t'more-than' : 'L\\'intervalle ne doit pas être inférieure à %d jours',\r\n\t\t\t'default-more' : 'Merci de choisir une intervalle supérieure à %d jours',\r\n\t\t\t'default-single' : 'Merci de choisir une date',\r\n\t\t\t'default-less' : 'Merci de choisir une intervalle inférieure %d jours',\r\n\t\t\t'default-range' : 'Merci de choisir une intervalle comprise entre %d et %d jours',\r\n\t\t\t'default-default': 'Merci de choisir une date'\r\n\t\t},\r\n\t\t'hu':\r\n\t\t{\r\n\t\t\t'selected': 'Kiválasztva:',\r\n\t\t\t'day':'Nap',\r\n\t\t\t'days': 'Nap',\r\n\t\t\t'apply': 'Ok',\r\n\t\t\t'week-1' : 'h',\r\n\t\t\t'week-2' : 'k',\r\n\t\t\t'week-3' : 'sz',\r\n\t\t\t'week-4' : 'cs',\r\n\t\t\t'week-5' : 'p',\r\n\t\t\t'week-6' : 'sz',\r\n\t\t\t'week-7' : 'v',\r\n\t\t\t'month-name': ['január','február','március','április','május','június','július','augusztus','szeptember','október','november','december'],\r\n\t\t\t'shortcuts' : 'Gyorsválasztó',\r\n\t\t\t'past': 'Múlt',\r\n\t\t\t'following':'Következő',\r\n\t\t\t'previous' : 'Előző',\r\n\t\t\t'prev-week' : 'Hét',\r\n\t\t\t'prev-month' : 'Hónap',\r\n\t\t\t'prev-year' : 'Év',\r\n\t\t\t'next':'Következő',\r\n\t\t\t'next-week':'Hét',\r\n\t\t\t'next-month':'Hónap',\r\n\t\t\t'next-year':'Év',\r\n\t\t\t'less-than' : 'A kiválasztás nem lehet több %d napnál',\r\n\t\t\t'more-than' : 'A kiválasztás nem lehet több %d napnál',\r\n\t\t\t'default-more' : 'Válassz ki egy időszakot ami hosszabb mint %d nap',\r\n\t\t\t'default-single' : 'Válassz egy napot',\r\n\t\t\t'default-less' : 'Válassz ki egy időszakot ami rövidebb mint %d nap',\r\n\t\t\t'default-range' : 'Válassz ki egy %d - %d nap hosszú időszakot',\r\n\t\t\t'default-default': 'Válassz ki egy időszakot'\r\n\t\t},\r\n\t\t'it':\r\n\t\t{\r\n\t\t\t'selected': 'Selezionati:',\r\n\t\t\t'day':'Giorno',\r\n\t\t\t'days': 'Giorni',\r\n\t\t\t'apply': 'Chiudi',\r\n\t\t\t'week-1' : 'lu',\r\n\t\t\t'week-2' : 'ma',\r\n\t\t\t'week-3' : 'me',\r\n\t\t\t'week-4' : 'gi',\r\n\t\t\t'week-5' : 've',\r\n\t\t\t'week-6' : 'sa',\r\n\t\t\t'week-7' : 'do',\r\n\t\t\t'month-name': ['gennaio','febbraio','marzo','aprile','maggio','giugno','luglio','agosto','settembre','ottobre','novembre','dicembre'],\r\n\t\t\t'shortcuts' : 'Scorciatoie',\r\n\t\t\t'past': 'Scorso',\r\n\t\t\t'following':'Successivo',\r\n\t\t\t'previous' : 'Precedente',\r\n\t\t\t'prev-week' : 'Settimana',\r\n\t\t\t'prev-month' : 'Mese',\r\n\t\t\t'prev-year' : 'Anno',\r\n\t\t\t'next':'Prossimo',\r\n\t\t\t'next-week':'Settimana',\r\n\t\t\t'next-month':'Mese',\r\n\t\t\t'next-year':'Anno',\r\n\t\t\t'less-than' : 'L\\'intervallo non dev\\'essere maggiore di %d giorni',\r\n\t\t\t'more-than' : 'L\\'intervallo non dev\\'essere minore di %d giorni',\r\n\t\t\t'default-more' : 'Seleziona un intervallo maggiore di %d giorni',\r\n\t\t\t'default-single' : 'Seleziona una data',\r\n\t\t\t'default-less' : 'Seleziona un intervallo minore di %d giorni',\r\n\t\t\t'default-range' : 'Seleziona un intervallo compreso tra i %d e i %d giorni',\r\n\t\t\t'default-default': 'Seleziona un intervallo di date'\r\n\t\t},\r\n\t\t'ko':\r\n\t\t{\r\n\t\t\t'selected': '기간:',\r\n\t\t\t'day':'일',\r\n\t\t\t'days': '일간',\r\n\t\t\t'apply': '닫기',\r\n\t\t\t'week-1' : '월',\r\n\t\t\t'week-2' : '화',\r\n\t\t\t'week-3' : '수',\r\n\t\t\t'week-4' : '목',\r\n\t\t\t'week-5' : '금',\r\n\t\t\t'week-6' : '토',\r\n\t\t\t'week-7' : '일',\r\n\t\t\t'week-number' : '주',\r\n\t\t\t'month-name': ['1월','2월','3월','4월','5월','6월','7월','8월','9월','10월','11월','12월'],\r\n\t\t\t'shortcuts' : '단축키들',\r\n\t\t\t'past': '지난(오늘기준)',\r\n\t\t\t'following':'이후(오늘기준)',\r\n\t\t\t'previous' : '이전',\r\n\t\t\t'prev-week' : '1주',\r\n\t\t\t'prev-month' : '1달',\r\n\t\t\t'prev-year' : '1년',\r\n\t\t\t'next':'다음',\r\n\t\t\t'next-week':'1주',\r\n\t\t\t'next-month':'1달',\r\n\t\t\t'next-year':'1년',\r\n\t\t\t'less-than' : '날짜 범위는 %d 일보다 많을 수 없습니다',\r\n\t\t\t'more-than' : '날짜 범위는 %d 일보다 작을 수 없습니다',\r\n\t\t\t'default-more' : '날짜 범위를 %d 일보다 길게 선택해 주세요',\r\n\t\t\t'default-single' : '날짜를 선택해 주세요',\r\n\t\t\t'default-less' : '%d 일보다 작은 날짜를 선택해 주세요',\r\n\t\t\t'default-range' : '%d와 %d 일 사이의 날짜 범위를 선택해 주세요',\r\n\t\t\t'default-default': '날짜 범위를 선택해 주세요',\r\n\t\t\t'time': '시각',\r\n\t\t\t'hour': '시',\r\n\t\t\t'minute': '분'\r\n\t\t},\r\n\t\t'no':\r\n\t\t{\r\n\t\t\t'selected': 'Valgt:',\r\n\t\t\t'day':'Dag',\r\n\t\t\t'days': 'Dager',\r\n\t\t\t'apply': 'Lukk',\r\n\t\t\t'week-1' : 'ma',\r\n\t\t\t'week-2' : 'ti',\r\n\t\t\t'week-3' : 'on',\r\n\t\t\t'week-4' : 'to',\r\n\t\t\t'week-5' : 'fr',\r\n\t\t\t'week-6' : 'lø',\r\n\t\t\t'week-7' : 'sø',\r\n\t\t\t'month-name': ['januar','februar','mars','april','mai','juni','juli','august','september','oktober','november','desember'],\r\n\t\t\t'shortcuts' : 'Snarveier',\r\n\t\t\t'custom-values': 'Egendefinerte Verdier',\r\n\t\t\t'past': 'Over', // Not quite sure about the context of this one\r\n\t\t\t'following':'Følger',\r\n\t\t\t'previous' : 'Forrige',\r\n\t\t\t'prev-week' : 'Uke',\r\n\t\t\t'prev-month' : 'Måned',\r\n\t\t\t'prev-year' : 'År',\r\n\t\t\t'next':'Neste',\r\n\t\t\t'next-week':'Uke',\r\n\t\t\t'next-month':'Måned',\r\n\t\t\t'next-year':'År',\r\n\t\t\t'less-than' : 'Datoperioden skal ikkje være lengre enn %d dager',\r\n\t\t\t'more-than' : 'Datoperioden skal ikkje være kortere enn %d dager',\r\n\t\t\t'default-more' : 'Vennligst velg ein datoperiode lengre enn %d dager',\r\n\t\t\t'default-single' : 'Vennligst velg ein dato',\r\n\t\t\t'default-less' : 'Vennligst velg ein datoperiode mindre enn %d dager',\r\n\t\t\t'default-range' : 'Vennligst velg ein datoperiode mellom %d og %d dager',\r\n\t\t\t'default-default': 'Vennligst velg ein datoperiode',\r\n\t\t\t'time':'Tid',\r\n\t\t\t'hour':'Time',\r\n\t\t\t'minute':'Minutter'\r\n\t\t},\r\n\t\t'nl':\r\n\t\t{\r\n\t\t\t'selected': 'Geselecteerd:',\r\n\t\t\t'day':'Dag',\r\n\t\t\t'days': 'Dagen',\r\n\t\t\t'apply': 'Ok',\r\n\t\t\t'week-1' : 'ma',\r\n\t\t\t'week-2' : 'di',\r\n\t\t\t'week-3' : 'wo',\r\n\t\t\t'week-4' : 'do',\r\n\t\t\t'week-5' : 'vr',\r\n\t\t\t'week-6' : 'za',\r\n\t\t\t'week-7' : 'zo',\r\n\t\t\t'month-name': ['januari','februari','maart','april','mei','juni','juli','augustus','september','oktober','november','december'],\r\n\t\t\t'shortcuts' : 'Snelkoppelingen',\r\n\t\t\t'custom-values': 'Aangepaste waarden',\r\n\t\t\t'past': 'Verleden',\r\n\t\t\t'following':'Komend',\r\n\t\t\t'previous' : 'Vorige',\r\n\t\t\t'prev-week' : 'Week',\r\n\t\t\t'prev-month' : 'Maand',\r\n\t\t\t'prev-year' : 'Jaar',\r\n\t\t\t'next':'Volgende',\r\n\t\t\t'next-week':'Week',\r\n\t\t\t'next-month':'Maand',\r\n\t\t\t'next-year':'Jaar',\r\n\t\t\t'less-than' : 'Interval moet langer dan %d dagen zijn',\r\n\t\t\t'more-than' : 'Interval mag niet minder dan %d dagen zijn',\r\n\t\t\t'default-more' : 'Selecteer een interval langer dan %dagen',\r\n\t\t\t'default-single' : 'Selecteer een datum',\r\n\t\t\t'default-less' : 'Selecteer een interval minder dan %d dagen',\r\n\t\t\t'default-range' : 'Selecteer een interval tussen %d en %d dagen',\r\n\t\t\t'default-default': 'Selecteer een interval',\r\n\t\t\t'time':'Tijd',\r\n\t\t\t'hour':'Uur',\r\n\t\t\t'minute':'Minuut'\r\n\t\t},\r\n\t\t'ru':\r\n\t\t{\r\n\t\t\t'selected': 'Выбрано:',\r\n\t\t\t'day': 'День',\r\n\t\t\t'days': 'Дней',\r\n\t\t\t'apply': 'Применить',\r\n\t\t\t'week-1': 'пн',\r\n\t\t\t'week-2': 'вт',\r\n\t\t\t'week-3': 'ср',\r\n\t\t\t'week-4': 'чт',\r\n\t\t\t'week-5': 'пт',\r\n\t\t\t'week-6': 'сб',\r\n\t\t\t'week-7': 'вс',\r\n\t\t\t'month-name': ['январь','февраль','март','апрель','май','июнь','июль','август','сентябрь','октябрь','ноябрь','декабрь'],\r\n\t\t\t'shortcuts': 'Быстрый выбор',\r\n\t\t\t'custom-values': 'Пользовательские значения',\r\n\t\t\t'past': 'Прошедшие',\r\n\t\t\t'following': 'Следующие',\r\n\t\t\t'previous': '&nbsp;&nbsp;&nbsp;',\r\n\t\t\t'prev-week': 'Неделя',\r\n\t\t\t'prev-month': 'Месяц',\r\n\t\t\t'prev-year': 'Год',\r\n\t\t\t'next': '&nbsp;&nbsp;&nbsp;',\r\n\t\t\t'next-week': 'Неделя',\r\n\t\t\t'next-month': 'Месяц',\r\n\t\t\t'next-year': 'Год',\r\n\t\t\t'less-than': 'Диапазон не может быть больше %d дней',\r\n\t\t\t'more-than': 'Диапазон не может быть меньше %d дней',\r\n\t\t\t'default-more': 'Пожалуйста выберите диапазон больше %d дней',\r\n\t\t\t'default-single': 'Пожалуйста выберите дату',\r\n\t\t\t'default-less': 'Пожалуйста выберите диапазон меньше %d дней',\r\n\t\t\t'default-range': 'Пожалуйста выберите диапазон между %d и %d днями',\r\n\t\t\t'default-default': 'Пожалуйста выберите диапазон',\r\n\t\t\t'time':'Время',\r\n\t\t\t'hour':'Часы',\r\n\t\t\t'minute':'Минуты'\r\n\t\t},\r\n\t\t'pl':\r\n\t\t{\r\n\t\t\t'selected': 'Wybrany:',\r\n\t\t\t'day':'Dzień',\r\n\t\t\t'days': 'Dni',\r\n\t\t\t'apply': 'Zamknij',\r\n\t\t\t'week-1' : 'pon',\r\n\t\t\t'week-2' : 'wt',\r\n\t\t\t'week-3' : 'śr',\r\n\t\t\t'week-4' : 'czw',\r\n\t\t\t'week-5' : 'pt',\r\n\t\t\t'week-6' : 'so',\r\n\t\t\t'week-7' : 'nd',\r\n\t\t\t'month-name': ['styczeń','luty','marzec','kwiecień','maj','czerwiec','lipiec','sierpień','wrzesień','październik','listopad','grudzień'],\r\n\t\t\t'shortcuts' : 'Skróty',\r\n\t\t\t'custom-values': 'Niestandardowe wartości',\r\n\t\t\t'past': 'Przeszłe',\r\n\t\t\t'following':'Następne',\r\n\t\t\t'previous' : 'Poprzednie',\r\n\t\t\t'prev-week' : 'tydzień',\r\n\t\t\t'prev-month' : 'miesiąc',\r\n\t\t\t'prev-year' : 'rok',\r\n\t\t\t'next':'Następny',\r\n\t\t\t'next-week':'tydzień',\r\n\t\t\t'next-month':'miesiąc',\r\n\t\t\t'next-year':'rok',\r\n\t\t\t'less-than' : 'Okres nie powinien być dłuższy niż %d dni',\r\n\t\t\t'more-than' : 'Okres nie powinien być krótszy niż  %d ni',\r\n\t\t\t'default-more' : 'Wybierz okres dłuższy niż %d dni',\r\n\t\t\t'default-single' : 'Wybierz datę',\r\n\t\t\t'default-less' : 'Wybierz okres krótszy niż %d dni',\r\n\t\t\t'default-range' : 'Wybierz okres trwający od %d do %d dni',\r\n\t\t\t'default-default': 'Wybierz okres',\r\n\t\t\t'time':'Czas',\r\n\t\t\t'hour':'Godzina',\r\n\t\t\t'minute':'Minuta'\r\n\t\t},\r\n\t\t'se':\r\n\t\t{\r\n\t\t\t'selected': 'Vald:',\r\n\t\t\t'day':'dag',\r\n\t\t\t'days': 'dagar',\r\n\t\t\t'apply': 'godkänn',\r\n\t\t\t'week-1' : 'ma',\r\n\t\t\t'week-2' : 'ti',\r\n\t\t\t'week-3' : 'on',\r\n\t\t\t'week-4' : 'to',\r\n\t\t\t'week-5' : 'fr',\r\n\t\t\t'week-6' : 'lö',\r\n\t\t\t'week-7' : 'sö',\r\n\t\t\t'month-name': ['januari','februari','mars','april','maj','juni','juli','augusti','september','oktober','november','december'],\r\n\t\t\t'shortcuts' : 'genvägar',\r\n\t\t\t'custom-values': 'Anpassade värden',\r\n\t\t\t'past': 'över',\r\n\t\t\t'following':'följande',\r\n\t\t\t'previous' : 'förra',\r\n\t\t\t'prev-week' : 'vecka',\r\n\t\t\t'prev-month' : 'månad',\r\n\t\t\t'prev-year' : 'år',\r\n\t\t\t'next':'nästa',\r\n\t\t\t'next-week':'vecka',\r\n\t\t\t'next-month':'måned',\r\n\t\t\t'next-year':'år',\r\n\t\t\t'less-than' : 'Datumintervall bör inte vara mindre än %d dagar',\r\n\t\t\t'more-than' : 'Datumintervall bör inte vara mer än %d dagar',\r\n\t\t\t'default-more' : 'Välj ett datumintervall längre än %d dagar',\r\n\t\t\t'default-single' : 'Välj ett datum',\r\n\t\t\t'default-less' : 'Välj ett datumintervall mindre än %d dagar',\r\n\t\t\t'default-range' : 'Välj ett datumintervall mellan %d och %d dagar',\r\n\t\t\t'default-default': 'Välj ett datumintervall',\r\n\t\t\t'time':'tid',\r\n\t\t\t'hour':'timme',\r\n\t\t\t'minute':'minut'\r\n\t\t},\r\n\t\t'pt':  //Portuguese (European)\r\n\t\t{\r\n\t\t\t'selected': 'Selecionado:',\r\n\t\t\t'day':'Dia',\r\n\t\t\t'days': 'Dias',\r\n\t\t\t'apply': 'Fechar',\r\n\t\t\t'week-1' : 'seg',\r\n\t\t\t'week-2' : 'ter',\r\n\t\t\t'week-3' : 'qua',\r\n\t\t\t'week-4' : 'qui',\r\n\t\t\t'week-5' : 'sex',\r\n\t\t\t'week-6' : 'sab',\r\n\t\t\t'week-7' : 'dom',\r\n\t\t\t'week-number': 'N',\r\n\t\t\t'month-name': ['janeiro','fevereiro','março','abril','maio','junho','julho','agosto','setembro','outubro','novembro','dezembro'],\r\n\t\t\t'shortcuts' : 'Atalhos',\r\n\t\t\t'custom-values': 'Valores Personalizados',\r\n\t\t\t'past': 'Passado',\r\n\t\t\t'following':'Seguinte',\r\n\t\t\t'previous' : 'Anterior',\r\n\t\t\t'prev-week' : 'Semana',\r\n\t\t\t'prev-month' : 'Mês',\r\n\t\t\t'prev-year' : 'Ano',\r\n\t\t\t'next':'Próximo',\r\n\t\t\t'next-week':'Próxima Semana',\r\n\t\t\t'next-month':'Próximo Mês',\r\n\t\t\t'next-year':'Próximo Ano',\r\n\t\t\t'less-than' : 'O período selecionado não deve ser maior que %d dias',\r\n\t\t\t'more-than' : 'O período selecionado não deve ser menor que %d dias',\r\n\t\t\t'default-more' : 'Selecione um período superior a %d dias',\r\n\t\t\t'default-single' : 'Selecione uma data',\r\n\t\t\t'default-less' : 'Selecione um período inferior a %d dias',\r\n\t\t\t'default-range' : 'Selecione um período de %d a %d dias',\r\n\t\t\t'default-default': 'Selecione um período',\r\n\t\t\t'time':'Tempo',\r\n\t\t\t'hour':'Hora',\r\n\t\t\t'minute':'Minuto'\r\n\t\t},\r\n\t\t'tc':  // traditional chinese\r\n\t\t{\r\n\t\t\t'selected': '已選擇:',\r\n\t\t\t'day':'天',\r\n\t\t\t'days': '天',\r\n\t\t\t'apply': '確定',\r\n\t\t\t'week-1' : '一',\r\n\t\t\t'week-2' : '二',\r\n\t\t\t'week-3' : '三',\r\n\t\t\t'week-4' : '四',\r\n\t\t\t'week-5' : '五',\r\n\t\t\t'week-6' : '六',\r\n\t\t\t'week-7' : '日',\r\n\t\t\t'week-number': '周',\r\n\t\t\t'month-name': ['一月','二月','三月','四月','五月','六月','七月','八月','九月','十月','十一月','十二月'],\r\n\t\t\t'shortcuts' : '快速選擇',\r\n\t\t\t'past': '過去',\r\n\t\t\t'following':'將來',\r\n\t\t\t'previous' : '&nbsp;&nbsp;&nbsp;',\r\n\t\t\t'prev-week' : '上週',\r\n\t\t\t'prev-month' : '上個月',\r\n\t\t\t'prev-year' : '去年',\r\n\t\t\t'next': '&nbsp;&nbsp;&nbsp;',\r\n\t\t\t'next-week':'下周',\r\n\t\t\t'next-month':'下個月',\r\n\t\t\t'next-year':'明年',\r\n\t\t\t'less-than' : '所選日期範圍不能大於%d天',\r\n\t\t\t'more-than' : '所選日期範圍不能小於%d天',\r\n\t\t\t'default-more' : '請選擇大於%d天的日期範圍',\r\n\t\t\t'default-less' : '請選擇小於%d天的日期範圍',\r\n\t\t\t'default-range' : '請選擇%d天到%d天的日期範圍',\r\n\t\t\t'default-single':'請選擇一個日期',\r\n\t\t\t'default-default': '請選擇一個日期範圍',\r\n\t\t\t'time': '日期',\r\n\t\t\t'hour': '小時',\r\n\t\t\t'minute': '分鐘'\r\n\t\t},\r\n\t\t'ja':\r\n        \t{\r\n            \t\t'selected': '選択しました:',\r\n\t            \t'day':'日',\r\n\t            \t'days': '日々',\r\n\t            \t'apply': '閉じる',\r\n\t            \t'week-1' : '日',\r\n\t            \t'week-2' : '月',\r\n\t            \t'week-3' : '火',\r\n\t            \t'week-4' : '水',\r\n\t            \t'week-5' : '木',\r\n\t            \t'week-6' : '金',\r\n\t            \t'week-7' : '土',\r\n\t            \t'month-name': ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],\r\n\t            \t'shortcuts' : 'クイック選択',\r\n\t            \t'past': '過去',\r\n\t            \t'following':'将来',\r\n\t            \t'previous' : '&nbsp;&nbsp;&nbsp;',\r\n\t            \t'prev-week' : '先週、',\r\n\t            \t'prev-month' : '先月',\r\n\t            \t'prev-year' : '昨年',\r\n\t            \t'next': '&nbsp;&nbsp;&nbsp;',\r\n\t            \t'next-week':'来週',\r\n\t            \t'next-month':'来月',\r\n\t            \t'next-year':'来年',\r\n\t            \t'less-than' : '日付の範囲は ％d 日以上にすべきではありません',\r\n\t            \t'more-than' : '日付の範囲は ％d 日を下回ってはいけません',\r\n\t            \t'default-more' : '％d 日よりも長い期間を選択してください',\r\n\t            \t'default-less' : '％d 日未満の期間を選択してください',\r\n\t            \t'default-range' : '％d と％ d日の間の日付範囲を選択してください',\r\n\t            \t'default-single':'日付を選択してください',\r\n\t            \t'default-default': '日付範囲を選択してください',\r\n\t            \t'time': '時間',\r\n\t            \t'hour': '時間',\r\n\t            \t'minute': '分'\r\n\t        },\r\n\t\t'da':\r\n\t\t{\r\n\t\t\t'selected': 'Valgt:',\r\n\t\t\t'day':'Dag',\r\n\t\t\t'days': 'Dage',\r\n\t\t\t'apply': 'Luk',\r\n\t\t\t'week-1' : 'ma',\r\n\t\t\t'week-2' : 'ti',\r\n\t\t\t'week-3' : 'on',\r\n\t\t\t'week-4' : 'to',\r\n\t\t\t'week-5' : 'fr',\r\n\t\t\t'week-6' : 'lö',\r\n\t\t\t'week-7' : 'sö',\r\n\t\t\t'month-name': ['januar','februar','marts','april','maj','juni','juli','august','september','oktober','november','december'],\r\n\t\t\t'shortcuts' : 'genveje',\r\n\t\t\t'custom-values': 'Brugerdefinerede værdier',\r\n\t\t\t'past': 'Forbi',\r\n\t\t\t'following':'Følgende',\r\n\t\t\t'previous' : 'Forrige',\r\n\t\t\t'prev-week' : 'uge',\r\n\t\t\t'prev-month' : 'månad',\r\n\t\t\t'prev-year' : 'år',\r\n\t\t\t'next':'Næste',\r\n\t\t\t'next-week':'Næste uge',\r\n\t\t\t'next-month':'Næste måned',\r\n\t\t\t'next-year':'Næste år',\r\n\t\t\t'less-than' : 'Dato interval bør ikke være med end %d dage',\r\n\t\t\t'more-than' : 'Dato interval bør ikke være mindre end %d dage',\r\n\t\t\t'default-more' : 'Vælg datointerval længere end %d dage',\r\n\t\t\t'default-single' : 'Vælg dato',\r\n\t\t\t'default-less' : 'Vælg datointerval mindre end %d dage',\r\n\t\t\t'default-range' : 'Vælg datointerval mellem %d og %d dage',\r\n\t\t\t'default-default': 'Vælg datointerval',\r\n\t\t\t'time':'tid',\r\n\t\t\t'hour':'time',\r\n\t\t\t'minute':'minut'\r\n\t\t}\r\n\t};\r\n\r\n\t$.fn.dateRangePicker = function(opt)\r\n\t{\r\n\t\tif (!opt) opt = {};\r\n\t\topt = $.extend(true,\r\n\t\t{\r\n\t\t\tautoClose: false,\r\n\t\t\tformat: 'YYYY-MM-DD',\r\n\t\t\tseparator: ' to ',\r\n\t\t\tlanguage: 'auto',\r\n\t\t\tstartOfWeek: 'sunday',// or monday\r\n\t\t\tgetValue: function()\r\n\t\t\t{\r\n\t\t\t\treturn $(this).val();\r\n\t\t\t},\r\n\t\t\tsetValue: function(s)\r\n\t\t\t{\r\n\t\t\t\tif(!$(this).attr('readonly') && !$(this).is(':disabled') && s != $(this).val())\r\n\t\t\t\t{\r\n\t\t\t\t\t$(this).val(s);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tstartDate: false,\r\n\t\t\tendDate: false,\r\n\t\t\ttime: {\r\n\t\t\t\tenabled: false\r\n\t\t\t},\r\n\t\t\tminDays: 0,\r\n\t\t\tmaxDays: 0,\r\n\t\t\tshowShortcuts: false,\r\n\t\t\tshortcuts:\r\n\t\t\t{\r\n\t\t\t\t//'prev-days': [1,3,5,7],\r\n\t\t\t\t// 'next-days': [3,5,7],\r\n\t\t\t\t//'prev' : ['week','month','year'],\r\n\t\t\t\t// 'next' : ['week','month','year']\r\n\t\t\t},\r\n\t\t\tcustomShortcuts : [],\r\n\t\t\tinline:false,\r\n\t\t\tcontainer:'body',\r\n\t\t\talwaysOpen:false,\r\n\t\t\tsingleDate:false,\r\n\t\t\tlookBehind: false,\r\n\t\t\tbatchMode: false,\r\n\t\t\tduration: 200,\r\n\t\t\tstickyMonths: false,\r\n\t\t\tdayDivAttrs: [],\r\n\t\t\tdayTdAttrs: [],\r\n\t\t\tselectForward: false,\r\n\t\t\tselectBackward: false,\r\n\t\t\tapplyBtnClass: '',\r\n\t\t\tsingleMonth: 'auto',\r\n\t\t\thoveringTooltip: function(days, startTime, hoveringTime)\r\n\t\t\t{\r\n\t\t\t\treturn days > 1 ? days + ' ' + lang('days') : '';\r\n\t\t\t},\r\n\t\t\tshowTopbar: true,\r\n\t\t\tswapTime: false,\r\n\t\t\tshowWeekNumbers: false,\r\n\t\t\tgetWeekNumber: function(date) //date will be the first day of a week\r\n\t\t\t{\r\n\t\t\t\treturn moment(date).format('w');\r\n\t\t\t},\r\n\t\t\tcustomOpenAnimation: null,\r\n\t\t\tcustomCloseAnimation: null,\r\n            customArrowPrevSymbol: null,\r\n            customArrowNextSymbol: null\r\n\t\t},opt);\r\n\r\n\t\topt.start = false;\r\n\t\topt.end = false;\r\n\r\n\t\topt.startWeek = false;\r\n\r\n\t\t//detect a touch device\r\n\t\topt.isTouchDevice = 'ontouchstart' in window || navigator.msMaxTouchPoints;\r\n\r\n\t\t//if it is a touch device, hide hovering tooltip\r\n\t\tif (opt.isTouchDevice) opt.hoveringTooltip = false;\r\n\r\n\t\t//show one month on mobile devices\r\n\t\tif (opt.singleMonth == 'auto') opt.singleMonth = $(window).width() < 480;\r\n\t\tif (opt.singleMonth) opt.stickyMonths = false;\r\n\r\n\t\tif (!opt.showTopbar) opt.autoClose = true;\r\n\r\n\t\tif (opt.startDate && typeof opt.startDate == 'string') opt.startDate = moment(opt.startDate,opt.format).toDate();\r\n\t\tif (opt.endDate && typeof opt.endDate == 'string') opt.endDate = moment(opt.endDate,opt.format).toDate();\r\n\r\n\t\tvar langs = getLanguages();\r\n\t\tvar box;\r\n\t\tvar initiated = false;\r\n\t\tvar self = this;\r\n\t\tvar selfDom = $(self).get(0);\r\n\t\tvar domChangeTimer;\r\n\r\n\t\t$(this).unbind('.datepicker').bind('click.datepicker',function(evt)\r\n\t\t{\r\n\t\t\tvar isOpen = box.is(':visible');\r\n\t\t\tif(!isOpen) open(opt.duration);\r\n\t\t}).bind('change.datepicker', function(evt)\r\n\t\t{\r\n\t\t\tcheckAndSetDefaultValue();\r\n\t\t}).bind('keyup.datepicker',function()\r\n\t\t{\r\n\t\t\ttry{ clearTimeout(domChangeTimer); }catch(e){}\r\n\t\t\tdomChangeTimer = setTimeout(function()\r\n\t\t\t{\r\n\t\t\t\tcheckAndSetDefaultValue();\r\n\t\t\t},2000);\r\n\t\t});\r\n\r\n\t\tinit_datepicker.call(this);\r\n\r\n\t\tif (opt.alwaysOpen)\r\n\t\t{\r\n\t\t\topen(0);\r\n\t\t}\r\n\r\n\t\t// expose some api\r\n\t\t$(this).data('dateRangePicker',\r\n\t\t{\r\n\t\t\tsetStart: function(d1)\r\n\t\t\t{\r\n\t\t\t\tif (typeof d1 == 'string')\r\n\t\t\t\t{\r\n\t\t\t\t\td1 = moment(d1,opt.format).toDate();\r\n\t\t\t\t}\r\n\r\n\t\t\t\topt.end = false;\r\n\t\t\t\tsetSingleDate(d1);\r\n\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\t\t\tsetEnd: function(d2, silent)\r\n\t\t\t{\r\n\t\t\t\tvar start = new Date();\r\n\t\t\t\tstart.setTime(opt.start);\r\n\t\t\t\tif (typeof d2 == 'string')\r\n\t\t\t\t{\r\n\t\t\t\t\td2 = moment(d2,opt.format).toDate();\r\n\t\t\t\t}\r\n\t\t\t\tsetDateRange(start, d2, silent);\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\t\t\tsetDateRange : function(d1,d2,silent)\r\n\t\t\t{\r\n\t\t\t\tif (typeof d1 == 'string' && typeof d2 == 'string')\r\n\t\t\t\t{\r\n\t\t\t\t\td1 = moment(d1,opt.format).toDate();\r\n\t\t\t\t\td2 = moment(d2,opt.format).toDate();\r\n\t\t\t\t}\r\n\t\t\t\tsetDateRange(d1,d2,silent);\r\n\t\t\t},\r\n\t\t\tclear: clearSelection,\r\n\t\t\tclose: closeDatePicker,\r\n\t\t\topen: open,\r\n\t\t\tredraw: redrawDatePicker,\r\n\t\t\tgetDatePicker: getDatePicker,\r\n\t\t\tresetMonthsView: resetMonthsView,\r\n\t\t\tdestroy: function()\r\n\t\t\t{\r\n\t\t\t\t$(self).unbind('.datepicker');\r\n\t\t\t\t$(self).data('dateRangePicker','');\r\n\t\t\t\t$(self).data('date-picker-opened',null);\r\n\t\t\t\tbox.remove();\r\n\t\t\t\t$(window).unbind('resize.datepicker',calcPosition);\r\n\t\t\t\t$(document).unbind('click.datepicker',closeDatePicker);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$(window).bind('resize.datepicker',calcPosition);\r\n\r\n\t\treturn this;\r\n\r\n\t\tfunction IsOwnDatePickerClicked(evt, selfObj)\r\n\t\t{\r\n\t\t\treturn ( selfObj.contains(evt.target) || evt.target == selfObj  || (selfObj.childNodes != undefined && $.inArray(evt.target, selfObj.childNodes)>=0));\r\n\t\t}\r\n\r\n\t\tfunction init_datepicker()\r\n\t\t{\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tif ($(this).data('date-picker-opened'))\r\n\t\t\t{\r\n\t\t\t\tcloseDatePicker();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t$(this).data('date-picker-opened',true);\r\n\r\n\r\n\t\t\tbox = createDom().hide();\r\n\t\t\tbox.append('<div class=\"date-range-length-tip\"></div>');\r\n\r\n\t\t\t$(opt.container).append(box);\r\n\r\n\t\t\tif (!opt.inline)\r\n\t\t\t{\r\n\t\t\t\tcalcPosition();\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tbox.addClass('inline-wrapper');\r\n\t\t\t}\r\n\r\n\t\t\tif (opt.alwaysOpen)\r\n\t\t\t{\r\n\t\t\t\tbox.find('.apply-btn').hide();\r\n\t\t\t}\r\n\r\n\t\t\tvar defaultTime = getDefaultTime();\r\n\t\t\tresetMonthsView(defaultTime);\r\n\r\n\t\t\tif (opt.time.enabled)\r\n\t\t\t{\r\n\t\t\t\tif ((opt.startDate && opt.endDate) || (opt.start && opt.end)) {\r\n\t\t\t\t\tshowTime(moment(opt.start || opt.startDate).toDate(),'time1');\r\n\t\t\t\t\tshowTime(moment(opt.end || opt.endDate).toDate(),'time2');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar defaultEndTime = opt.defaultEndTime ? opt.defaultEndTime : defaultTime;\r\n\t\t\t\t\tshowTime(defaultTime,'time1');\r\n\t\t\t\t\tshowTime(defaultEndTime,'time2');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//showSelectedInfo();\r\n\r\n\r\n\t\t\tvar defaultTopText = '';\r\n\t\t\tif (opt.singleDate)\r\n\t\t\t\tdefaultTopText = lang('default-single');\r\n\t\t\telse if (opt.minDays && opt.maxDays)\r\n\t\t\t\tdefaultTopText = lang('default-range');\r\n\t\t\telse if (opt.minDays)\r\n\t\t\t\tdefaultTopText = lang('default-more');\r\n\t\t\telse if (opt.maxDays)\r\n\t\t\t\tdefaultTopText = lang('default-less');\r\n\t\t\telse\r\n\t\t\t\tdefaultTopText = lang('default-default');\r\n\r\n\t\t\tbox.find('.default-top').html( defaultTopText.replace(/\\%d/,opt.minDays).replace(/\\%d/,opt.maxDays));\r\n\t\t\tif (opt.singleMonth)\r\n\t\t\t{\r\n\t\t\t\tbox.addClass('single-month');\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tbox.addClass('two-months');\r\n\t\t\t}\r\n\r\n\r\n\t\t\tsetTimeout(function()\r\n\t\t\t{\r\n\t\t\t\tupdateCalendarWidth();\r\n\t\t\t\tinitiated = true;\r\n\t\t\t},0);\r\n\r\n\t\t\tbox.click(function(evt)\r\n\t\t\t{\r\n\t\t\t\tevt.stopPropagation();\r\n\t\t\t});\r\n\r\n\t\t\t//if user click other place of the webpage, close date range picker window\r\n\t\t\t$(document).bind('click.datepicker',function(evt)\r\n\t\t\t{\r\n\t\t\t\tif (!IsOwnDatePickerClicked(evt, self[0])) {\r\n\t\t\t\t\tif (box.is(':visible')) closeDatePicker();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tbox.find('.next').click(function()\r\n\t\t\t{\r\n\t\t\t\tif(!opt.stickyMonths)\r\n\t\t\t\t\tgotoNextMonth(this);\r\n\t\t\t\telse\r\n\t\t\t\t\tgotoNextMonth_stickily(this);\r\n\t\t\t});\r\n\r\n\t\t\tfunction gotoNextMonth(self)\r\n\t\t\t{\r\n\t\t\t\tvar isMonth2 = $(self).parents('table').hasClass('month2');\r\n\t\t\t\tvar month = isMonth2 ? opt.month2 : opt.month1;\r\n\t\t\t\tmonth = nextMonth(month);\r\n\t\t\t\tif (!opt.singleMonth && !opt.singleDate && !isMonth2 && compare_month(month,opt.month2) >= 0 || isMonthOutOfBounds(month)) return;\r\n\t\t\t\tshowMonth(month,isMonth2 ? 'month2' : 'month1');\r\n\t\t\t\tshowGap();\r\n\t\t\t}\r\n\r\n\t\t\tfunction gotoNextMonth_stickily(self) {\r\n\t\t\t\tvar nextMonth1 = nextMonth(opt.month1);\r\n\t\t\t\tvar nextMonth2 = nextMonth(opt.month2);\r\n\t\t\t\tif(isMonthOutOfBounds(nextMonth2)) return;\r\n\t\t\t\tif (!opt.singleDate && compare_month(nextMonth1,nextMonth2) >= 0) return;\r\n\t\t\t\tshowMonth(nextMonth1, 'month1');\r\n\t\t\t\tshowMonth(nextMonth2, 'month2');\r\n\t\t\t\tshowSelectedDays();\r\n\t\t\t}\r\n\r\n\r\n\t\t\tbox.find('.prev').click(function()\r\n\t\t\t{\r\n\t\t\t\tif(!opt.stickyMonths)\r\n\t\t\t\t\tgotoPrevMonth(this);\r\n\t\t\t\telse\r\n\t\t\t\t\tgotoPrevMonth_stickily(this);\r\n\t\t\t});\r\n\r\n\t\t\tfunction gotoPrevMonth(self) {\r\n\t\t\t\tvar isMonth2 = $(self).parents('table').hasClass('month2');\r\n\t\t\t\tvar month = isMonth2 ? opt.month2 : opt.month1;\r\n\t\t\t\tmonth = prevMonth(month);\r\n\t\t\t\tif (isMonth2 && compare_month(month,opt.month1) <= 0 || isMonthOutOfBounds(month)) return;\r\n\t\t\t\tshowMonth(month,isMonth2 ? 'month2' : 'month1');\r\n\t\t\t\tshowGap();\r\n\t\t\t}\r\n\r\n\t\t\tfunction gotoPrevMonth_stickily(self)\r\n\t\t\t{\r\n\t\t\t\tvar prevMonth1 = prevMonth(opt.month1);\r\n\t\t\t\tvar prevMonth2 = prevMonth(opt.month2);\r\n\t\t\t\tif(isMonthOutOfBounds(prevMonth1)) return;\r\n\t\t\t\tif(!opt.singleDate && compare_month(prevMonth2,prevMonth1) <= 0) return;\r\n\t\t\t\tshowMonth(prevMonth2, 'month2');\r\n\t\t\t\tshowMonth(prevMonth1, 'month1');\r\n\t\t\t\tshowSelectedDays();\r\n\t\t\t}\r\n\r\n\t\t\tbox.attr('unselectable', 'on')\r\n\t\t\t.css('user-select', 'none')\r\n\t\t\t.bind('selectstart', function(e)\r\n\t\t\t{\r\n\t\t\t\te.preventDefault(); return false;\r\n\t\t\t});\r\n\r\n\t\t\tbox.find('.apply-btn').click(function()\r\n\t\t\t{\r\n\t\t\t\tcloseDatePicker();\r\n\t\t\t\tvar dateRange = getDateString(new Date(opt.start))+ opt.separator +getDateString(new Date(opt.end));\r\n\t\t\t\t$(self).trigger('datepicker-apply',\r\n\t\t\t\t{\r\n\t\t\t\t\t'value': dateRange,\r\n\t\t\t\t\t'date1' : new Date(opt.start),\r\n\t\t\t\t\t'date2' : new Date(opt.end)\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tbox.find('[custom]').click(function()\r\n\t\t\t{\r\n\t\t\t\tvar valueName = $(this).attr('custom');\r\n\t\t\t\topt.start = false;\r\n\t\t\t\topt.end = false;\r\n\t\t\t\tbox.find('.day.checked').removeClass('checked');\r\n\t\t\t\topt.setValue.call(selfDom, valueName);\r\n\t\t\t\tcheckSelectionValid();\r\n\t\t\t\tshowSelectedInfo(true);\r\n\t\t\t\tshowSelectedDays();\r\n\t\t\t\tif (opt.autoClose) closeDatePicker();\r\n\t\t\t});\r\n\r\n\t\t\tbox.find('[shortcut]').click(function()\r\n\t\t\t{\r\n\t\t\t\tvar shortcut = $(this).attr('shortcut');\r\n\t\t\t\tvar end = new Date(),start = false;\r\n                var dir;\r\n\t\t\t\tif (shortcut.indexOf('day') != -1)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar day = parseInt(shortcut.split(',',2)[1],10);\r\n\t\t\t\t\tstart = new Date(new Date().getTime() + 86400000*day);\r\n\t\t\t\t\tend = new Date(end.getTime() + 86400000*(day>0?1:-1) );\r\n\t\t\t\t}\r\n\t\t\t\telse if (shortcut.indexOf('week')!= -1)\r\n\t\t\t\t{\r\n\t\t\t\t\tdir = shortcut.indexOf('prev,') != -1 ? -1 : 1;\r\n                    var stopDay;\r\n\t\t\t\t\tif (dir == 1)\r\n\t\t\t\t\t\t stopDay = opt.startOfWeek == 'monday' ? 1 : 0;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\t stopDay = opt.startOfWeek == 'monday' ? 0 : 6;\r\n\r\n\t\t\t\t\tend = new Date(end.getTime() - 86400000);\r\n\t\t\t\t\twhile(end.getDay() != stopDay) end = new Date(end.getTime() + dir*86400000);\r\n\t\t\t\t\tstart = new Date(end.getTime() + dir*86400000*6);\r\n\t\t\t\t}\r\n\t\t\t\telse if (shortcut.indexOf('month') != -1)\r\n\t\t\t\t{\r\n\t\t\t\t\tdir = shortcut.indexOf('prev,') != -1 ? -1 : 1;\r\n\t\t\t\t\tif (dir == 1)\r\n\t\t\t\t\t\tstart = nextMonth(end);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tstart = prevMonth(end);\r\n\t\t\t\t\tstart.setDate(1);\r\n\t\t\t\t\tend = nextMonth(start);\r\n\t\t\t\t\tend.setDate(1);\r\n\t\t\t\t\tend = new Date(end.getTime() - 86400000);\r\n\t\t\t\t}\r\n\t\t\t\telse if (shortcut.indexOf('year') != -1)\r\n\t\t\t\t{\r\n\t\t\t\t\tdir = shortcut.indexOf('prev,') != -1 ? -1 : 1;\r\n\t\t\t\t\tstart = new Date();\r\n\t\t\t\t\tstart.setFullYear(end.getFullYear() + dir);\r\n\t\t\t\t\tstart.setMonth(0);\r\n\t\t\t\t\tstart.setDate(1);\r\n\t\t\t\t\tend.setFullYear(end.getFullYear() + dir);\r\n\t\t\t\t\tend.setMonth(11);\r\n\t\t\t\t\tend.setDate(31);\r\n\t\t\t\t}\r\n\t\t\t\telse if (shortcut == 'custom')\r\n\t\t\t\t{\r\n\t\t\t\t\tvar name = $(this).html();\r\n\t\t\t\t\tif (opt.customShortcuts && opt.customShortcuts.length > 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfor(var i=0;i<opt.customShortcuts.length;i++)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar sh = opt.customShortcuts[i];\r\n\t\t\t\t\t\t\tif (sh.name == name)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar data = [];\r\n\t\t\t\t\t\t\t\t// try\r\n\t\t\t\t\t\t\t\t// {\r\n\t\t\t\t\t\t\t\t\tdata = sh['dates'].call();\r\n\t\t\t\t\t\t\t\t//}catch(e){}\r\n\t\t\t\t\t\t\t\tif (data && data.length == 2)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tstart = data[0];\r\n\t\t\t\t\t\t\t\t\tend = data[1];\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t// if only one date is specified then just move calendars there\r\n\t\t\t\t\t\t\t\t// move calendars to show this date's month and next months\r\n\t\t\t\t\t\t\t\tif (data && data.length == 1)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar movetodate = data[0];\r\n\t\t\t\t\t\t\t\t\tshowMonth(movetodate,'month1');\r\n\t\t\t\t\t\t\t\t\tshowMonth(nextMonth(movetodate),'month2');\r\n\t\t\t\t\t\t\t\t\tshowGap();\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (start && end)\r\n\t\t\t\t{\r\n\t\t\t\t\tsetDateRange(start,end);\r\n\t\t\t\t\tcheckSelectionValid();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tbox.find('.time1 input[type=range]').bind('change touchmove', function (e) {\r\n\t\t\t\tvar target = e.target,\r\n\t\t\t\t\thour = target.name == 'hour' ? $(target).val().replace(/^(\\d{1})$/, '0$1') : undefined,\r\n\t\t\t\t\tmin = target.name == 'minute' ? $(target).val().replace(/^(\\d{1})$/, '0$1') : undefined;\r\n\t\t\t\tsetTime('time1', hour, min);\r\n\t\t\t});\r\n\r\n\t\t\tbox.find('.time2 input[type=range]').bind('change touchmove', function (e) {\r\n\t\t\t\tvar target = e.target,\r\n\t\t\t\t\thour = target.name == 'hour' ? $(target).val().replace(/^(\\d{1})$/, '0$1') : undefined,\r\n\t\t\t\t\tmin = target.name == 'minute' ? $(target).val().replace(/^(\\d{1})$/, '0$1') : undefined;\r\n\t\t\t\tsetTime('time2', hour, min);\r\n\t\t\t});\r\n\r\n\t\t}\r\n\r\n\r\n\t\tfunction calcPosition()\r\n\t\t{\r\n\t\t\tif (!opt.inline)\r\n\t\t\t{\r\n\t\t\t\tvar offset = $(self).offset();\r\n\t\t\t\tif ($(opt.container).css('position') == 'relative')\r\n\t\t\t\t{\r\n\t\t\t\t\tvar containerOffset = $(opt.container).offset();\r\n\t\t\t\t\tbox.css(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttop: offset.top - containerOffset.top + $(self).outerHeight() + 4,\r\n\t\t\t\t\t\tleft: offset.left - containerOffset.left\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tif (offset.left < 460) //left to right\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tbox.css(\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttop: offset.top+$(self).outerHeight() + parseInt($('body').css('border-top') || 0,10 ),\r\n\t\t\t\t\t\t\tleft: offset.left\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tbox.css(\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttop: offset.top+$(self).outerHeight() + parseInt($('body').css('border-top') || 0,10 ),\r\n\t\t\t\t\t\t\tleft: offset.left + $(self).width() - box.width() - 16\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Return the date picker wrapper element\r\n\t\tfunction getDatePicker()\r\n\t\t{\r\n\t\t\treturn box;\r\n\t\t}\r\n\r\n\t\tfunction open(animationTime)\r\n\t\t{\r\n\t\t\tcalcPosition();\r\n\t\t\tredrawDatePicker();\r\n\t\t\tcheckAndSetDefaultValue();\r\n\t\t\tif (opt.customOpenAnimation)\r\n\t\t\t{\r\n\t\t\t\topt.customOpenAnimation.call(box.get(0), function()\r\n\t\t\t\t{\r\n\t\t\t\t\t$(self).trigger('datepicker-opened', {relatedTarget: box});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tbox.slideDown(animationTime, function(){\r\n\t\t\t\t\t$(self).trigger('datepicker-opened', {relatedTarget: box});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t$(self).trigger('datepicker-open', {relatedTarget: box});\r\n\t\t\tshowGap();\r\n\t\t\tupdateCalendarWidth();\r\n\t\t}\r\n\r\n\t\tfunction checkAndSetDefaultValue()\r\n\t\t{\r\n\t\t\tvar __default_string = opt.getValue.call(selfDom);\r\n\t\t\tvar defaults = __default_string ? __default_string.split( opt.separator ) : '';\r\n\r\n\t\t\tif (defaults && ((defaults.length==1 && opt.singleDate) || defaults.length>=2))\r\n\t\t\t{\r\n\t\t\t\tvar ___format = opt.format;\r\n\t\t\t\tif (___format.match(/Do/))\r\n\t\t\t\t{\r\n\r\n\t\t\t\t\t___format = ___format.replace(/Do/,'D');\r\n\t\t\t\t\tdefaults[0] = defaults[0].replace(/(\\d+)(th|nd|st)/,'$1');\r\n\t\t\t\t\tif(defaults.length >= 2){\r\n\t\t\t\t\t\tdefaults[1] = defaults[1].replace(/(\\d+)(th|nd|st)/,'$1');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// set initiated  to avoid triggerring datepicker-change event\r\n\t\t\t\tinitiated = false;\r\n\t\t\t\tif(defaults.length >= 2){\r\n\t\t\t\t\tsetDateRange(getValidValue(defaults[0], ___format, moment.locale(opt.language)),getValidValue(defaults[1], ___format, moment.locale(opt.language)));\r\n\t\t\t\t}\r\n\t\t\t\telse if(defaults.length==1 && opt.singleDate){\r\n\t\t\t\t\tsetSingleDate(getValidValue(defaults[0], ___format, moment.locale(opt.language)));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tinitiated = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction getValidValue(date, format, locale) {\r\n\t\t\tif (moment(date, format, locale).isValid()) {\r\n\t\t\t\treturn moment(date, format, locale).toDate();\r\n\t\t\t} else {\r\n\t\t\t\treturn moment().toDate();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction updateCalendarWidth()\r\n\t\t{\r\n\t\t\tvar gapMargin = box.find('.gap').css('margin-left');\r\n\t\t\tif (gapMargin) gapMargin = parseInt(gapMargin);\r\n\t\t\tvar w1 = box.find('.month1').width();\r\n\t\t\tvar w2 = box.find('.gap').width() + ( gapMargin ? gapMargin*2 : 0 );\r\n\t\t\tvar w3 = box.find('.month2').width();\r\n\t\t\tbox.find('.month-wrapper').width(w1 + w2 + w3);\r\n\t\t}\r\n\r\n\t\tfunction renderTime (name, date) {\r\n\t\t\tbox.find('.' + name + ' input[type=range].hour-range').val(moment(date).hours());\r\n\t\t\tbox.find('.' + name + ' input[type=range].minute-range').val(moment(date).minutes());\r\n\t\t\tsetTime(name, moment(date).format('HH'), moment(date).format('mm'));\r\n\t\t}\r\n\r\n\t\tfunction changeTime (name, date) {\r\n\t\t\topt[name] = parseInt(\r\n\t\t\t\tmoment(parseInt(date))\r\n\t\t\t\t\t.startOf('day')\r\n\t\t\t\t\t.add(moment(opt[name + 'Time']).format('HH'), 'h')\r\n\t\t\t\t\t.add(moment(opt[name + 'Time']).format('mm'), 'm').valueOf()\r\n\t\t\t\t);\r\n\t\t}\r\n\r\n\t\tfunction swapTime () {\r\n\t\t\trenderTime('time1', opt.start);\r\n\t\t\trenderTime('time2', opt.end);\r\n\t\t}\r\n\r\n\t\tfunction setTime (name, hour, minute)\r\n\t\t{\r\n\t\t\thour && (box.find('.' + name + ' .hour-val').text(hour));\r\n\t\t\tminute && (box.find('.' + name + ' .minute-val').text(minute));\r\n\t\t\tswitch (name) {\r\n\t\t\t\tcase 'time1':\r\n\t\t\t\t\tif (opt.start) {\r\n\t\t\t\t\t\tsetRange('start', moment(opt.start));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetRange('startTime', moment(opt.startTime || moment().valueOf()));\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'time2':\r\n\t\t\t\t\tif (opt.end) {\r\n\t\t\t\t\t\tsetRange('end', moment(opt.end));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetRange('endTime', moment(opt.endTime || moment().valueOf()));\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tfunction setRange(name, timePoint) {\r\n\t\t\t\tvar h = timePoint.format('HH'),\r\n\t\t\t\t\tm = timePoint.format('mm');\r\n\t\t\t\topt[name] = timePoint\r\n\t\t\t\t\t.startOf('day')\r\n\t\t\t\t\t.add(hour || h, 'h')\r\n\t\t\t\t\t.add(minute || m, 'm')\r\n\t\t\t\t\t.valueOf();\r\n\t\t\t}\r\n\t\t\tcheckSelectionValid();\r\n\t\t\tshowSelectedInfo();\r\n\t\t\tshowSelectedDays();\r\n\t\t}\r\n\r\n\t\tfunction clearSelection()\r\n\t\t{\r\n\t\t\topt.start = false;\r\n\t\t\topt.end = false;\r\n\t\t\tbox.find('.day.checked').removeClass('checked');\r\n\t\t\tbox.find('.day.last-date-selected').removeClass('last-date-selected');\r\n\t\t\tbox.find('.day.first-date-selected').removeClass('first-date-selected');\r\n\t\t\topt.setValue.call(selfDom, '');\r\n\t\t\tcheckSelectionValid();\r\n\t\t\tshowSelectedInfo();\r\n\t\t\tshowSelectedDays();\r\n\t\t}\r\n\r\n\t\tfunction handleStart(time)\r\n\t\t{\r\n\t\t\tvar r = time;\r\n\t\t\tif  (opt.batchMode === 'week-range')\r\n\t\t\t{\r\n\t\t\t\tif (opt.startOfWeek === 'monday')\r\n\t\t\t\t{\r\n\t\t\t\t\tr = moment(parseInt(time)).startOf('isoweek').valueOf();\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tr = moment(parseInt(time)).startOf('week').valueOf();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (opt.batchMode === 'month-range')\r\n\t\t\t{\r\n\t\t\t\tr = moment(parseInt(time)).startOf('month').valueOf();\r\n\t\t\t}\r\n\t\t\treturn r;\r\n\t\t}\r\n\r\n\t\tfunction handleEnd(time)\r\n\t\t{\r\n\t\t\tvar r = time;\r\n\t\t\tif  (opt.batchMode === 'week-range')\r\n\t\t\t{\r\n\t\t\t\tif (opt.startOfWeek === 'monday')\r\n\t\t\t\t{\r\n\t\t\t\t\tr = moment(parseInt(time)).endOf('isoweek').valueOf();\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tr = moment(parseInt(time)).endOf('week').valueOf();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (opt.batchMode === 'month-range')\r\n\t\t\t{\r\n\t\t\t\tr = moment(parseInt(time)).endOf('month').valueOf();\r\n\t\t\t}\r\n\t\t\treturn r;\r\n\t\t}\r\n\r\n\r\n\t\tfunction dayClicked(day)\r\n\t\t{\r\n\t\t\tif (day.hasClass('invalid')) return;\r\n\t\t\tvar time = day.attr('time');\r\n\t\t\tday.addClass('checked');\r\n\t\t\tif ( opt.singleDate )\r\n\t\t\t{\r\n\t\t\t\topt.start = time;\r\n\t\t\t\topt.end = false;\r\n\t\t\t}\r\n\t\t\telse if  (opt.batchMode === 'week')\r\n\t\t\t{\r\n\t\t\t\tif (opt.startOfWeek === 'monday') {\r\n\t\t\t\t\topt.start = moment(parseInt(time)).startOf('isoweek').valueOf();\r\n\t\t\t\t\topt.end = moment(parseInt(time)).endOf('isoweek').valueOf();\r\n\t\t\t\t} else {\r\n\t\t\t\t\topt.end = moment(parseInt(time)).endOf('week').valueOf();\r\n\t\t\t\t\topt.start = moment(parseInt(time)).startOf('week').valueOf();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if  (opt.batchMode === 'workweek')\r\n\t\t\t{\r\n\t\t\t\topt.start = moment(parseInt(time)).day(1).valueOf();\r\n\t\t\t\topt.end = moment(parseInt(time)).day(5).valueOf();\r\n\t\t\t}\r\n\t\t\telse if  (opt.batchMode === 'weekend')\r\n\t\t\t{\r\n\t\t\t\topt.start = moment(parseInt(time)).day(6).valueOf();\r\n\t\t\t\topt.end = moment(parseInt(time)).day(7).valueOf();\r\n\t\t\t}\r\n\t\t\telse if (opt.batchMode === 'month')\r\n\t\t\t{\r\n\t\t\t\topt.start = moment(parseInt(time)).startOf('month').valueOf();\r\n\t\t\t\topt.end = moment(parseInt(time)).endOf('month').valueOf();\r\n\t\t\t}\r\n\t\t\telse if ((opt.start && opt.end) || (!opt.start && !opt.end) )\r\n\t\t\t{\r\n\t\t\t\topt.start = handleStart(time);\r\n\t\t\t\topt.end = false;\r\n\t\t\t}\r\n\t\t\telse if (opt.start)\r\n\t\t\t{\r\n\t\t\t\topt.end = handleEnd(time);\r\n\t\t\t\tif (opt.time.enabled) {\r\n\t\t\t\t\tchangeTime('end', opt.end);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//Update time in case it is enabled and timestamps are available\r\n\t\t\tif(opt.time.enabled) {\r\n\t\t\t\tif(opt.start) {\r\n\t\t\t\t\tchangeTime('start', opt.start);\r\n\t\t\t\t}\r\n\t\t\t\tif(opt.end) {\r\n\t\t\t\t\tchangeTime('end', opt.end);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//In case the start is after the end, swap the timestamps\r\n\t\t\tif (!opt.singleDate && opt.start && opt.end && opt.start > opt.end)\r\n\t\t\t{\r\n\t\t\t\tvar tmp = opt.end;\r\n\t\t\t\topt.end = handleEnd(opt.start);\r\n\t\t\t\topt.start = handleStart(tmp);\r\n\t\t\t\tif (opt.time.enabled && opt.swapTime) {\r\n\t\t\t\t\tswapTime();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\topt.start = parseInt(opt.start);\r\n\t\t\topt.end = parseInt(opt.end);\r\n\r\n\t\t\tclearHovering();\r\n\t\t\tif (opt.start && !opt.end)\r\n\t\t\t{\r\n\t\t\t\t$(self).trigger('datepicker-first-date-selected',\r\n\t\t\t\t{\r\n\t\t\t\t\t'date1' : new Date(opt.start)\r\n\t\t\t\t});\r\n\t\t\t\tdayHovering(day);\r\n\t\t\t}\r\n\t\t\tupdateSelectableRange(time);\r\n\r\n\t\t\tcheckSelectionValid();\r\n\t\t\tshowSelectedInfo();\r\n\t\t\tshowSelectedDays();\r\n\t\t\tautoclose();\r\n\t\t}\r\n\r\n\r\n\t\tfunction weekNumberClicked(weekNumberDom)\r\n\t\t{\r\n\t\t\tvar thisTime = parseInt(weekNumberDom.attr('data-start-time'),10);\r\n            var date1,date2;\r\n\t\t\tif (!opt.startWeek)\r\n\t\t\t{\r\n\t\t\t\topt.startWeek = thisTime;\r\n\t\t\t\tweekNumberDom.addClass('week-number-selected');\r\n\t\t\t\tdate1 = new Date(thisTime);\r\n\t\t\t\topt.start = moment(date1).day(opt.startOfWeek == 'monday' ? 1 : 0).valueOf();\r\n\t\t\t\topt.end = moment(date1).day(opt.startOfWeek == 'monday' ? 7 : 6).valueOf();\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tbox.find('.week-number-selected').removeClass('week-number-selected');\r\n\t\t\t\tdate1 = new Date(thisTime < opt.startWeek ? thisTime : opt.startWeek);\r\n\t\t\t\tdate2 = new Date(thisTime < opt.startWeek ? opt.startWeek : thisTime);\r\n\t\t\t\topt.startWeek = false;\r\n\t\t\t\topt.start = moment(date1).day(opt.startOfWeek == 'monday' ? 1 : 0).valueOf();\r\n\t\t\t\topt.end = moment(date2).day(opt.startOfWeek == 'monday' ? 7 : 6).valueOf();\r\n\t\t\t}\r\n\t\t\tupdateSelectableRange();\r\n\t\t\tcheckSelectionValid();\r\n\t\t\tshowSelectedInfo();\r\n\t\t\tshowSelectedDays();\r\n\t\t\tautoclose();\r\n\t\t}\r\n\r\n\t\tfunction isValidTime(time)\r\n\t\t{\r\n\t\t\ttime = parseInt(time, 10);\r\n\t\t\tif (opt.startDate && compare_day(time, opt.startDate) < 0) return false;\r\n\t\t\tif (opt.endDate && compare_day(time, opt.endDate) > 0) return false;\r\n\r\n\t\t\tif (opt.start && !opt.end && !opt.singleDate)\r\n\t\t\t{\r\n\t\t\t\t//check maxDays and minDays setting\r\n\t\t\t\tif (opt.maxDays > 0 && countDays(time, opt.start) > opt.maxDays) return false;\r\n\t\t\t\tif (opt.minDays > 0 && countDays(time, opt.start) < opt.minDays) return false;\r\n\r\n\t\t\t\t//check selectForward and selectBackward\r\n\t\t\t\tif (opt.selectForward && time < opt.start ) return false;\r\n\t\t\t\tif (opt.selectBackward && time > opt.start) return false;\r\n\r\n\t\t\t\t//check disabled days\r\n\t\t\t\tif (opt.beforeShowDay && typeof opt.beforeShowDay == 'function')\r\n\t\t\t\t{\r\n\t\t\t\t\tvar valid = true;\r\n\t\t\t\t\tvar timeTmp = time;\r\n\t\t\t\t\twhile( countDays(timeTmp, opt.start) > 1 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar arr = opt.beforeShowDay( new Date(timeTmp) );\r\n\t\t\t\t\t\tif (!arr[0])\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvalid = false;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (Math.abs(timeTmp - opt.start) < 86400000) break;\r\n\t\t\t\t\t\tif (timeTmp > opt.start) timeTmp -= 86400000;\r\n\t\t\t\t\t\tif (timeTmp < opt.start) timeTmp += 86400000;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!valid) return false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\r\n\t\tfunction updateSelectableRange()\r\n\t\t{\r\n\t\t\tbox.find('.day.invalid.tmp').removeClass('tmp invalid').addClass('valid');\r\n\t\t\tif (opt.start && !opt.end)\r\n\t\t\t{\r\n\t\t\t\tbox.find('.day.toMonth.valid').each(function()\r\n\t\t\t\t{\r\n\t\t\t\t\tvar time = parseInt($(this).attr('time'), 10);\r\n\t\t\t\t\tif (!isValidTime(time))\r\n\t\t\t\t\t\t$(this).addClass('invalid tmp').removeClass('valid');\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\t$(this).addClass('valid tmp').removeClass('invalid');\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\r\n\t\tfunction dayHovering(day)\r\n\t\t{\r\n\t\t\tvar hoverTime = parseInt(day.attr('time'));\r\n\t\t\tvar tooltip = '';\r\n\r\n\t\t\tif (day.hasClass('has-tooltip') && day.attr('data-tooltip'))\r\n\t\t\t{\r\n\t\t\t\ttooltip = '<span style=\"white-space:nowrap\">'+day.attr('data-tooltip')+'</span>';\r\n\t\t\t}\r\n\t\t\telse if (!day.hasClass('invalid'))\r\n\t\t\t{\r\n\t\t\t\tif (opt.singleDate)\r\n\t\t\t\t{\r\n\t\t\t\t\tbox.find('.day.hovering').removeClass('hovering');\r\n\t\t\t\t\tday.addClass('hovering');\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tbox.find('.day').each(function()\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar time = parseInt($(this).attr('time')),\r\n\t\t\t\t\t\t\tstart = opt.start,\r\n\t\t\t\t\t\t\tend = opt.end;\r\n\r\n\t\t\t\t\t\tif ( time == hoverTime )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t$(this).addClass('hovering');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t$(this).removeClass('hovering');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t( opt.start && !opt.end ) &&\r\n\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t( opt.start < time && hoverTime >= time ) ||\r\n\t\t\t\t\t\t\t\t( opt.start > time && hoverTime <= time )\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t$(this).addClass('hovering');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t$(this).removeClass('hovering');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (opt.start && !opt.end)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar days = countDays(hoverTime, opt.start);\r\n\t\t\t\t\t\tif (opt.hoveringTooltip)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif (typeof opt.hoveringTooltip == 'function')\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttooltip = opt.hoveringTooltip(days, opt.start, hoverTime);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if (opt.hoveringTooltip === true && days > 1)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttooltip = days + ' ' + lang('days');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (tooltip)\r\n\t\t\t{\r\n\t\t\t\tvar posDay = day.offset();\r\n\t\t\t\tvar posBox = box.offset();\r\n\r\n\t\t\t\tvar _left = posDay.left - posBox.left;\r\n\t\t\t\tvar _top = posDay.top - posBox.top;\r\n\t\t\t\t_left += day.width()/2;\r\n\r\n\r\n\t\t\t\tvar $tip = box.find('.date-range-length-tip');\r\n\t\t\t\tvar w = $tip.css({'visibility':'hidden', 'display':'none'}).html(tooltip).width();\r\n\t\t\t\tvar h = $tip.height();\r\n\t\t\t\t_left -= w/2;\r\n\t\t\t\t_top -= h;\r\n\t\t\t\tsetTimeout(function()\r\n\t\t\t\t{\r\n\t\t\t\t\t$tip.css({left:_left, top:_top, display:'block','visibility':'visible'});\r\n\t\t\t\t},10);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tbox.find('.date-range-length-tip').hide();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction clearHovering()\r\n\t\t{\r\n\t\t\tbox.find('.day.hovering').removeClass('hovering');\r\n\t\t\tbox.find('.date-range-length-tip').hide();\r\n\t\t}\r\n\r\n\t\tfunction autoclose () {\r\n\t\t\tif (opt.singleDate === true) {\r\n\t\t\t\tif (initiated && opt.start )\r\n\t\t\t\t{\r\n\t\t\t\t\tif (opt.autoClose) closeDatePicker();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (initiated && opt.start && opt.end)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (opt.autoClose) closeDatePicker();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction checkSelectionValid()\r\n\t\t{\r\n\t\t\tvar days = Math.ceil( (opt.end - opt.start) / 86400000 ) + 1;\r\n\t\t\tif (opt.singleDate) { // Validate if only start is there\r\n\t\t\t\tif (opt.start && !opt.end)\r\n\t\t\t\t\tbox.find('.drp_top-bar').removeClass('error').addClass('normal');\r\n\t\t\t\telse\r\n\t\t\t\t\tbox.find('.drp_top-bar').removeClass('error').removeClass('normal');\r\n\t\t\t}\r\n\t\t\telse if ( opt.maxDays && days > opt.maxDays)\r\n\t\t\t{\r\n\t\t\t\topt.start = false;\r\n\t\t\t\topt.end = false;\r\n\t\t\t\tbox.find('.day').removeClass('checked');\r\n\t\t\t\tbox.find('.drp_top-bar').removeClass('normal').addClass('error').find('.error-top').html( lang('less-than').replace('%d',opt.maxDays) );\r\n\t\t\t}\r\n\t\t\telse if ( opt.minDays && days < opt.minDays)\r\n\t\t\t{\r\n\t\t\t\topt.start = false;\r\n\t\t\t\topt.end = false;\r\n\t\t\t\tbox.find('.day').removeClass('checked');\r\n\t\t\t\tbox.find('.drp_top-bar').removeClass('normal').addClass('error').find('.error-top').html( lang('more-than').replace('%d',opt.minDays) );\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif (opt.start || opt.end)\r\n\t\t\t\t\tbox.find('.drp_top-bar').removeClass('error').addClass('normal');\r\n\t\t\t\telse\r\n\t\t\t\t\tbox.find('.drp_top-bar').removeClass('error').removeClass('normal');\r\n\t\t\t}\r\n\r\n\t\t\tif ( (opt.singleDate && opt.start && !opt.end) || (!opt.singleDate && opt.start && opt.end) )\r\n\t\t\t{\r\n\t\t\t\tbox.find('.apply-btn').removeClass('disabled');\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tbox.find('.apply-btn').addClass('disabled');\r\n\t\t\t}\r\n\r\n\t\t\tif (opt.batchMode)\r\n\t\t\t{\r\n\t\t\t\tif (\r\n\t\t\t\t\t(opt.start && opt.startDate && compare_day(opt.start, opt.startDate) < 0) ||\r\n\t\t\t\t\t(opt.end && opt.endDate && compare_day(opt.end, opt.endDate) > 0)\r\n\t\t\t\t) {\r\n\t\t\t\t\topt.start = false;\r\n\t\t\t\t\topt.end = false;\r\n\t\t\t\t\tbox.find('.day').removeClass('checked');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction showSelectedInfo(forceValid,silent)\r\n\t\t{\r\n\t\t\tbox.find('.start-day').html('...');\r\n\t\t\tbox.find('.end-day').html('...');\r\n\t\t\tbox.find('.selected-days').hide();\r\n\t\t\tif (opt.start)\r\n\t\t\t{\r\n\t\t\t\tbox.find('.start-day').html(getDateString(new Date(parseInt(opt.start))));\r\n\t\t\t}\r\n\t\t\tif (opt.end)\r\n\t\t\t{\r\n\t\t\t\tbox.find('.end-day').html(getDateString(new Date(parseInt(opt.end))));\r\n\t\t\t}\r\n            var dateRange;\r\n\t\t\tif (opt.start && opt.singleDate)\r\n\t\t\t{\r\n\t\t\t\tbox.find('.apply-btn').removeClass('disabled');\r\n\t\t\t\tdateRange = getDateString(new Date(opt.start));\r\n\t\t\t\topt.setValue.call(selfDom, dateRange, getDateString(new Date(opt.start)), getDateString(new Date(opt.end)));\r\n\r\n\t\t\t\tif (initiated && !silent)\r\n\t\t\t\t{\r\n\t\t\t\t\t$(self).trigger('datepicker-change',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'value': dateRange,\r\n\t\t\t\t\t\t'date1' : new Date(opt.start)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (opt.start && opt.end)\r\n\t\t\t{\r\n\t\t\t\tbox.find('.selected-days').show().find('.selected-days-num').html(countDays(opt.end, opt.start));\r\n\t\t\t\tbox.find('.apply-btn').removeClass('disabled');\r\n\t\t\t\tdateRange = getDateString(new Date(opt.start))+ opt.separator +getDateString(new Date(opt.end));\r\n\t\t\t\topt.setValue.call(selfDom,dateRange, getDateString(new Date(opt.start)), getDateString(new Date(opt.end)));\r\n\t\t\t\tif (initiated && !silent)\r\n\t\t\t\t{\r\n\t\t\t\t\t$(self).trigger('datepicker-change',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'value': dateRange,\r\n\t\t\t\t\t\t'date1' : new Date(opt.start),\r\n\t\t\t\t\t\t'date2' : new Date(opt.end)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (forceValid)\r\n\t\t\t{\r\n\t\t\t\tbox.find('.apply-btn').removeClass('disabled');\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tbox.find('.apply-btn').addClass('disabled');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction countDays(start,end)\r\n\t\t{\r\n\t\t\treturn Math.abs( daysFrom1970(start) - daysFrom1970(end) ) + 1;\r\n\t\t}\r\n\r\n\t\tfunction setDateRange(date1,date2,silent)\r\n\t\t{\r\n\t\t\tif (date1.getTime() > date2.getTime())\r\n\t\t\t{\r\n\t\t\t\tvar tmp = date2;\r\n\t\t\t\tdate2 = date1;\r\n\t\t\t\tdate1 = tmp;\r\n\t\t\t\ttmp = null;\r\n\t\t\t}\r\n\t\t\tvar valid = true;\r\n\t\t\tif (opt.startDate && compare_day(date1,opt.startDate) < 0) valid = false;\r\n\t\t\tif (opt.endDate && compare_day(date2,opt.endDate) > 0) valid = false;\r\n\t\t\tif (!valid)\r\n\t\t\t{\r\n\t\t\t\tshowMonth(opt.startDate,'month1');\r\n\t\t\t\tshowMonth(nextMonth(opt.startDate),'month2');\r\n\t\t\t\tshowGap();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\topt.start = date1.getTime();\r\n\t\t\topt.end = date2.getTime();\r\n\r\n\t\t\tif (opt.time.enabled)\r\n\t\t\t{\r\n\t\t\t\trenderTime('time1', date1);\r\n\t\t\t\trenderTime('time2', date2);\r\n\t\t\t}\r\n\r\n\t\t\tif (opt.stickyMonths || (compare_day(date1,date2) > 0 && compare_month(date1,date2) === 0))\r\n\t\t\t{\r\n\t\t\t\tif (opt.lookBehind) {\r\n\t\t\t\t\tdate1 = prevMonth(date2);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdate2 = nextMonth(date1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(opt.stickyMonths && opt.endDate !== false && compare_month(date2,opt.endDate) > 0) {\r\n\t\t\t\tdate1 = prevMonth(date1);\r\n\t\t\t\tdate2 = prevMonth(date2);\r\n\t\t\t}\r\n\r\n\t\t\tif (!opt.stickyMonths) {\r\n\t\t\t\tif (compare_month(date1,date2) === 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (opt.lookBehind) {\r\n\t\t\t\t\t\tdate1 = prevMonth(date2);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdate2 = nextMonth(date1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tshowMonth(date1,'month1');\r\n\t\t\tshowMonth(date2,'month2');\r\n\t\t\tshowGap();\r\n\t\t\tcheckSelectionValid();\r\n\t\t\tshowSelectedInfo(false,silent);\r\n\t\t\tautoclose();\r\n\t\t}\r\n\r\n\t\tfunction setSingleDate(date1)\r\n\t\t{\r\n\r\n\t\t\tvar valid = true;\r\n\t\t\tif (opt.startDate && compare_day(date1,opt.startDate) < 0) valid = false;\r\n\t\t\tif (opt.endDate && compare_day(date1,opt.endDate) > 0) valid = false;\r\n\t\t\tif (!valid)\r\n\t\t\t{\r\n\t\t\t\tshowMonth(opt.startDate,'month1');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\topt.start = date1.getTime();\r\n\r\n\r\n\t\t\tif (opt.time.enabled) {\r\n\t\t\t\trenderTime('time1', date1);\r\n\r\n\t\t\t}\r\n\t\t\tshowMonth(date1,'month1');\r\n\t\t\tif (opt.singleMonth !== true) {\r\n      \t\t\t\tvar date2 = nextMonth(date1);\r\n      \t\t\t\tshowMonth(date2, 'month2');\r\n    \t\t\t}\r\n\t\t\tshowGap();\r\n\t\t\tshowSelectedInfo();\r\n\t\t\tautoclose();\r\n\t\t}\r\n\r\n\t\tfunction showSelectedDays()\r\n\t\t{\r\n\t\t\tif (!opt.start && !opt.end) return;\r\n\t\t\tbox.find('.day').each(function()\r\n\t\t\t{\r\n\t\t\t\tvar time = parseInt($(this).attr('time')),\r\n\t\t\t\t\tstart = opt.start,\r\n\t\t\t\t\tend = opt.end;\r\n\t\t\t\tif (opt.time.enabled) {\r\n\t\t\t\t\ttime = moment(time).startOf('day').valueOf();\r\n\t\t\t\t\tstart = moment(start || moment().valueOf()).startOf('day').valueOf();\r\n\t\t\t\t\tend = moment(end || moment().valueOf()).startOf('day').valueOf();\r\n\t\t\t\t}\r\n\t\t\t\tif (\r\n\t\t\t\t\t(opt.start && opt.end && end >= time && start <= time ) ||\r\n\t\t\t\t\t( opt.start && !opt.end && moment(start).format('YYYY-MM-DD') == moment(time).format('YYYY-MM-DD') )\r\n\t\t\t\t)\r\n\t\t\t\t{\r\n\t\t\t\t\t$(this).addClass('checked');\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\t$(this).removeClass('checked');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//add first-date-selected class name to the first date selected\r\n\t\t\t\tif ( opt.start && moment(start).format('YYYY-MM-DD') == moment(time).format('YYYY-MM-DD') )\r\n\t\t\t\t{\r\n\t\t\t\t\t$(this).addClass('first-date-selected');\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\t$(this).removeClass('first-date-selected');\r\n\t\t\t\t}\r\n\t\t\t\t//add last-date-selected\r\n\t\t\t\tif ( opt.end && moment(end).format('YYYY-MM-DD') == moment(time).format('YYYY-MM-DD') )\r\n\t\t\t\t{\r\n\t\t\t\t\t$(this).addClass('last-date-selected');\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\t$(this).removeClass('last-date-selected');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tbox.find('.week-number').each(function()\r\n\t\t\t{\r\n\t\t\t\tif ($(this).attr('data-start-time') == opt.startWeek)\r\n\t\t\t\t{\r\n\t\t\t\t\t$(this).addClass('week-number-selected');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction showMonth(date,month)\r\n\t\t{\r\n\t\t\tdate = moment(date).toDate();\r\n\t\t\tvar monthName = nameMonth(date.getMonth());\r\n\t\t\tbox.find('.'+month+' .month-name').html(monthName+' '+date.getFullYear());\r\n\t\t\tbox.find('.'+month+' tbody').html(createMonthHTML(date));\r\n\t\t\topt[month] = date;\r\n\t\t\tupdateSelectableRange();\r\n\t\t\tbindDayEvents();\r\n\t\t}\r\n\r\n\t\tfunction bindDayEvents()\r\n\t\t{\r\n\t\t    box.find('.day').unbind(\"click\").click(function (evt) {\r\n\t\t\tdayClicked($(this));\r\n\t\t    });\r\n\r\n\t\t    box.find('.day').unbind(\"mouseenter\").mouseenter(function (evt) {\r\n\t\t\tdayHovering($(this));\r\n\t\t    });\r\n\r\n\t\t    box.find('.day').unbind(\"mouseleave\").mouseleave(function (evt) {\r\n\t\t\tbox.find('.date-range-length-tip').hide();\r\n\t\t\tif (opt.singleDate) {\r\n\t\t\t    clearHovering();\r\n\t\t\t}\r\n\t\t    });\r\n\r\n\t\t    box.find('.week-number').unbind(\"click\").click(function (evt) {\r\n\t\t\tweekNumberClicked($(this));\r\n\t\t    });\r\n\t\t}\r\n\r\n\t\tfunction showTime(date,name)\r\n\t\t{\r\n\t\t\tbox.find('.' + name).append(getTimeHTML());\r\n\t\t\trenderTime(name, date);\r\n\t\t}\r\n\r\n\t\tfunction nameMonth(m)\r\n\t\t{\r\n\t\t\treturn lang('month-name')[m];\r\n\t\t}\r\n\r\n\t\tfunction getDateString(d)\r\n\t\t{\r\n\t\t\treturn moment(d).format(opt.format);\r\n\t\t}\r\n\r\n\t\tfunction showGap()\r\n\t\t{\r\n\t\t\tshowSelectedDays();\r\n\t\t\tvar m1 = parseInt(moment(opt.month1).format('YYYYMM'));\r\n\t\t\tvar m2 = parseInt(moment(opt.month2).format('YYYYMM'));\r\n\t\t\tvar p = Math.abs(m1 - m2);\r\n\t\t\tvar shouldShow = (p > 1 && p !=89);\r\n\t\t\tif (shouldShow)\r\n\t\t\t{\r\n\t\t\t\tbox.addClass('has-gap').removeClass('no-gap').find('.gap').css('visibility','visible');\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tbox.removeClass('has-gap').addClass('no-gap').find('.gap').css('visibility','hidden');\r\n\t\t\t}\r\n\t\t\tvar h1 = box.find('table.month1').height();\r\n\t\t\tvar h2 = box.find('table.month2').height();\r\n\t\t\tbox.find('.gap').height(Math.max(h1,h2)+10);\r\n\t\t}\r\n\r\n\t\tfunction closeDatePicker()\r\n\t\t{\r\n\t\t\tif (opt.alwaysOpen) return;\r\n\r\n\t\t\tvar afterAnim = function()\r\n\t\t\t{\r\n\t\t\t\t$(self).data('date-picker-opened',false);\r\n\t\t\t\t$(self).trigger('datepicker-closed', {relatedTarget: box});\r\n\t\t\t};\r\n\t\t\tif (opt.customCloseAnimation)\r\n\t\t\t{\r\n\t\t\t\topt.customCloseAnimation.call(box.get(0), afterAnim);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t$(box).slideUp(opt.duration, afterAnim);\r\n\t\t\t}\r\n\t\t\t$(self).trigger('datepicker-close', {relatedTarget: box});\r\n\t\t}\r\n\r\n\t\tfunction redrawDatePicker()\r\n\t\t{\r\n\t\t\tshowMonth(opt.month1, 'month1');\r\n\t\t\tshowMonth(opt.month2, 'month2');\r\n\t\t}\r\n\r\n\t\tfunction compare_month(m1,m2)\r\n\t\t{\r\n\t\t\tvar p = parseInt(moment(m1).format('YYYYMM')) - parseInt(moment(m2).format('YYYYMM'));\r\n\t\t\tif (p > 0 ) return 1;\r\n\t\t\tif (p === 0) return 0;\r\n\t\t\treturn -1;\r\n\t\t}\r\n\r\n\t\tfunction compare_day(m1,m2)\r\n\t\t{\r\n\t\t\tvar p = parseInt(moment(m1).format('YYYYMMDD')) - parseInt(moment(m2).format('YYYYMMDD'));\r\n\t\t\tif (p > 0 ) return 1;\r\n\t\t\tif (p === 0) return 0;\r\n\t\t\treturn -1;\r\n\t\t}\r\n\r\n\t\tfunction nextMonth(month)\r\n\t\t{\r\n\t\t\treturn moment(month).add(1, 'months').toDate();\r\n\t\t}\r\n\r\n\t\tfunction prevMonth(month)\r\n\t\t{\r\n\t\t\treturn moment(month).add(-1, 'months').toDate();\r\n\t\t}\r\n\r\n\t\tfunction getTimeHTML()\r\n\t\t{\r\n\t\t\treturn '<div>' +\r\n\t\t\t\t\t'<span>'+lang('Time')+': <span class=\"hour-val\">00</span>:<span class=\"minute-val\">00</span></span>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'<div class=\"hour\">' +\r\n\t\t\t\t\t'<label>'+lang('Hour')+': <input type=\"range\" class=\"hour-range\" name=\"hour\" min=\"0\" max=\"23\"></label>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'<div class=\"minute\">' +\r\n\t\t\t\t\t'<label>'+lang('Minute')+': <input type=\"range\" class=\"minute-range\" name=\"minute\" min=\"0\" max=\"59\"></label>' +\r\n\t\t\t\t'</div>';\r\n\t\t}\r\n\r\n\t\tfunction createDom()\r\n\t\t{\r\n\t\t\tvar html = '<div class=\"date-picker-wrapper';\r\n\t\t\tif ( opt.extraClass ) html += ' '+opt.extraClass+' ';\r\n\t\t\tif ( opt.singleDate ) html += ' single-date ';\r\n\t\t\tif ( !opt.showShortcuts ) html += ' no-shortcuts ';\r\n\t\t\tif ( !opt.showTopbar ) html += ' no-topbar ';\r\n\t\t\tif ( opt.customTopBar) html += ' custom-topbar ';\r\n\t\t\thtml += '\">';\r\n\r\n\t\t\tif (opt.showTopbar)\r\n\t\t\t{\r\n\t\t\t\thtml += '<div class=\"drp_top-bar\">';\r\n\r\n\t\t\t\tif (opt.customTopBar)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (typeof opt.customTopBar == 'function') opt.customTopBar = opt.customTopBar();\r\n\t\t\t\t\thtml += '<div class=\"custom-top\">'+opt.customTopBar+'</div>';\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\thtml += '<div class=\"normal-top\">' +\r\n\t\t\t\t\t\t\t'<span style=\"color:#333\">'+lang('selected')+' </span> <b class=\"start-day\">...</b>';\r\n\t\t\t\t\tif ( ! opt.singleDate ) {\r\n\t\t\t\t\t\thtml += ' <span class=\"separator-day\">'+opt.separator+'</span> <b class=\"end-day\">...</b> <i class=\"selected-days\">(<span class=\"selected-days-num\">3</span> '+lang('days')+')</i>';\r\n\t\t\t\t\t}\r\n\t\t\t\t\thtml += '</div>';\r\n\t\t\t\t\thtml += '<div class=\"error-top\">error</div>' +\r\n\t\t\t\t\t\t'<div class=\"default-top\">default</div>';\r\n\t\t\t\t}\r\n\r\n\t\t\t\thtml += '<input type=\"button\" class=\"apply-btn disabled'+ getApplyBtnClass() +'\" value=\"'+lang('apply')+'\" />';\r\n\t\t\t\thtml += '</div>';\r\n\t\t\t}\r\n\r\n\t\t\tvar _colspan = opt.showWeekNumbers ? 6 : 5;\r\n\r\n            var arrowPrev = '&lt;';\r\n            if(opt.customArrowPrevSymbol) arrowPrev = opt.customArrowPrevSymbol;\r\n\r\n            var arrowNext = '&gt;';\r\n            if(opt.customArrowNextSymbol) arrowNext = opt.customArrowNextSymbol;\r\n\r\n            html += '<div class=\"month-wrapper\">' +\r\n                    '   <table class=\"month1\" cellspacing=\"0\" border=\"0\" cellpadding=\"0\">'+\r\n                    '       <thead>'+\r\n                    '           <tr class=\"caption\">'+\r\n                    '               <th style=\"width:27px;\">'+\r\n                    '                   <span class=\"prev\">'+\r\n                                            arrowPrev +\r\n                    '                   </span>'+\r\n                    '               </th>'+\r\n                    '               <th colspan=\"' + _colspan + '\" class=\"month-name\">'+\r\n                    '               </th>'+\r\n                    '               <th style=\"width:27px;\">' +\r\n                                    (opt.singleDate || !opt.stickyMonths ? '<span class=\"next\">' + arrowNext + '</span>' : '') +\r\n                    '               </th>'+\r\n                    '           </tr>'+\r\n                    '           <tr class=\"week-name\">' + getWeekHead() +\r\n                    '       </thead>'+\r\n                    '       <tbody></tbody>'+\r\n                    '   </table>';\r\n\r\n\t\t\tif ( hasMonth2() )\r\n\t\t\t{\r\n\t\t\t\thtml += '<div class=\"gap\">' + getGapHTML() + '</div>' +\r\n                        '<table class=\"month2\" cellspacing=\"0\" border=\"0\" cellpadding=\"0\">'+\r\n                        '   <thead>'+\r\n                        '   <tr class=\"caption\">'+\r\n                        '       <th style=\"width:27px;\">' +\r\n                                (!opt.stickyMonths ? '<span class=\"prev\">' + arrowPrev + '</span>' : '') +\r\n                        '       </th>'+\r\n                        '       <th colspan=\"' + _colspan + '\" class=\"month-name\">'+\r\n                        '       </th>'+\r\n                        '       <th style=\"width:27px;\">'+\r\n                        '           <span class=\"next\">' + arrowNext + '</span>'+\r\n                        '       </th>'+\r\n                        '   </tr>'+\r\n                        '   <tr class=\"week-name\">' + getWeekHead() +\r\n                        '   </thead>'+\r\n                        '   <tbody></tbody>'+\r\n                        '</table>';\r\n\r\n\t\t\t}\r\n\t\t\t\t//+'</div>'\r\n\t\t\thtml +=\t'<div style=\"clear:both;height:0;font-size:0;\"></div>' +\r\n\t\t\t\t'<div class=\"time\">' +\r\n\t\t\t\t'<div class=\"time1\"></div>';\r\n\t\t\tif ( ! opt.singleDate ) {\r\n\t\t\t\thtml += '<div class=\"time2\"></div>';\r\n\t\t\t}\r\n\t\t\thtml += '</div>' +\r\n\t\t\t\t'<div style=\"clear:both;height:0;font-size:0;\"></div>' +\r\n\t\t\t\t'</div>';\r\n\r\n\t\t\thtml += '<div class=\"footer\">';\r\n\t\t\tif (opt.showShortcuts)\r\n\t\t\t{\r\n\t\t\t\thtml += '<div class=\"shortcuts\"><b>'+lang('shortcuts')+'</b>';\r\n\r\n\t\t\t\tvar data = opt.shortcuts;\r\n\t\t\t\tif (data)\r\n\t\t\t\t{   var name;\r\n\t\t\t\t\tif (data['prev-days'] && data['prev-days'].length > 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\thtml += '&nbsp;<span class=\"prev-days\">'+lang('past');\r\n\t\t\t\t\t\tfor(var i=0;i<data['prev-days'].length; i++)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname = data['prev-days'][i];\r\n\t\t\t\t\t\t\tname += (data['prev-days'][i] > 1) ? lang('days') : lang('day');\r\n\t\t\t\t\t\t\thtml += ' <a href=\"javascript:;\" shortcut=\"day,-'+data['prev-days'][i]+'\">'+name+'</a>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\thtml+='</span>';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (data['next-days'] && data['next-days'].length > 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\thtml += '&nbsp;<span class=\"next-days\">'+lang('following');\r\n\t\t\t\t\t\tfor(var i=0;i<data['next-days'].length; i++)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname = data['next-days'][i];\r\n\t\t\t\t\t\t\tname += (data['next-days'][i] > 1) ? lang('days') : lang('day');\r\n\t\t\t\t\t\t\thtml += ' <a href=\"javascript:;\" shortcut=\"day,'+data['next-days'][i]+'\">'+name+'</a>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\thtml+= '</span>';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (data.prev && data.prev.length > 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\thtml += '&nbsp;<span class=\"prev-buttons\">'+lang('previous');\r\n\t\t\t\t\t\tfor(var i=0;i<data.prev.length; i++)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname = lang('prev-'+data.prev[i]);\r\n\t\t\t\t\t\t\thtml += ' <a href=\"javascript:;\" shortcut=\"prev,'+data.prev[i]+'\">'+name+'</a>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\thtml+='</span>';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (data.next && data.next.length > 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\thtml += '&nbsp;<span class=\"next-buttons\">'+lang('next');\r\n\t\t\t\t\t\tfor(var i=0;i<data.next.length; i++)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname = lang('next-'+data.next[i]);\r\n\t\t\t\t\t\t\thtml += ' <a href=\"javascript:;\" shortcut=\"next,'+data.next[i]+'\">'+name+'</a>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\thtml+='</span>';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (opt.customShortcuts)\r\n\t\t\t\t{\r\n\t\t\t\t\tfor(var i=0;i<opt.customShortcuts.length; i++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar sh = opt.customShortcuts[i];\r\n\t\t\t\t\t\thtml+= '&nbsp;<span class=\"custom-shortcut\"><a href=\"javascript:;\" shortcut=\"custom\">'+sh.name+'</a></span>';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\thtml += '</div>';\r\n\t\t\t}\r\n\r\n\t\t\t// Add Custom Values Dom\r\n\t\t\tif (opt.showCustomValues)\r\n\t\t\t{\r\n\t\t\t\thtml += '<div class=\"customValues\"><b>'+(opt.customValueLabel || lang('custom-values'))+'</b>';\r\n\r\n\t\t\t\tif (opt.customValues)\r\n\t\t\t\t{\r\n\t\t\t\t\tfor(var i=0;i<opt.customValues.length;i++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar val = opt.customValues[i];\r\n\t\t\t\t\t\t\thtml+= '&nbsp;<span class=\"custom-value\"><a href=\"javascript:;\" custom=\"'+ val.value+'\">'+val.name+'</a></span>';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\thtml += '</div></div>';\r\n\r\n\r\n\t\t\treturn $(html);\r\n\t\t}\r\n\r\n\t\tfunction getApplyBtnClass()\r\n\t\t{\r\n\t\t\tvar klass = '';\r\n\t\t\tif (opt.autoClose === true) {\r\n\t\t\t\tklass += ' hide';\r\n\t\t\t}\r\n\t\t\tif (opt.applyBtnClass !== '') {\r\n\t\t\t\tklass += ' ' + opt.applyBtnClass;\r\n\t\t\t}\r\n\t\t\treturn klass;\r\n\t\t}\r\n\r\n\t\tfunction getWeekHead()\r\n\t\t{\r\n\t\t\tvar prepend = opt.showWeekNumbers ? '<th>'+lang('week-number')+'</th>' : '';\r\n\t\t\tif (opt.startOfWeek == 'monday')\r\n\t\t\t{\r\n\t\t\t\treturn prepend+'<th>'+lang('week-1')+'</th>' +\r\n\t\t\t\t\t'<th>'+lang('week-2')+'</th>' +\r\n\t\t\t\t\t'<th>'+lang('week-3')+'</th>' +\r\n\t\t\t\t\t'<th>'+lang('week-4')+'</th>' +\r\n\t\t\t\t\t'<th>'+lang('week-5')+'</th>' +\r\n\t\t\t\t\t'<th>'+lang('week-6')+'</th>' +\r\n\t\t\t\t\t'<th>'+lang('week-7')+'</th>';\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\treturn prepend+'<th>'+lang('week-7')+'</th>' +\r\n\t\t\t\t\t'<th>'+lang('week-1')+'</th>' +\r\n\t\t\t\t\t'<th>'+lang('week-2')+'</th>' +\r\n\t\t\t\t\t'<th>'+lang('week-3')+'</th>' +\r\n\t\t\t\t\t'<th>'+lang('week-4')+'</th>' +\r\n\t\t\t\t\t'<th>'+lang('week-5')+'</th>' +\r\n\t\t\t\t\t'<th>'+lang('week-6')+'</th>';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction isMonthOutOfBounds(month)\r\n\t\t{\r\n\t\t\tmonth = moment(month);\r\n\t\t\tif (opt.startDate && month.endOf('month').isBefore(opt.startDate))\r\n\t\t\t{\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif (opt.endDate && month.startOf('month').isAfter(opt.endDate))\r\n\t\t\t{\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfunction getGapHTML()\r\n\t\t{\r\n\t\t\tvar html = ['<div class=\"gap-top-mask\"></div><div class=\"gap-bottom-mask\"></div><div class=\"gap-lines\">'];\r\n\t\t\tfor(var i=0;i<20;i++)\r\n\t\t\t{\r\n\t\t\t\thtml.push('<div class=\"gap-line\">' +\r\n\t\t\t\t\t'<div class=\"gap-1\"></div>' +\r\n\t\t\t\t\t'<div class=\"gap-2\"></div>' +\r\n\t\t\t\t\t'<div class=\"gap-3\"></div>' +\r\n\t\t\t\t'</div>');\r\n\t\t\t}\r\n\t\t\thtml.push('</div>');\r\n\t\t\treturn html.join('');\r\n\t\t}\r\n\r\n\t\tfunction hasMonth2()\r\n\t\t{\r\n\t\t\treturn (!opt.singleMonth);\r\n\t\t}\r\n\r\n\t\tfunction attributesCallbacks(initialObject,callbacksArray,today)\r\n\t\t{\r\n\t\t\tvar resultObject = $.extend(true, {}, initialObject);\r\n\r\n\t\t\t$.each(callbacksArray, function(cbAttrIndex, cbAttr){\r\n\t\t\t\tvar addAttributes = cbAttr(today);\r\n\t\t\t\tfor(var attr in addAttributes){\r\n\t\t\t\t\tif(resultObject.hasOwnProperty(attr)){\r\n\t\t\t\t\t\tresultObject[attr] += addAttributes[attr];\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tresultObject[attr] = addAttributes[attr];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tvar attrString = '';\r\n\r\n\t\t\tfor(var attr in resultObject){\r\n\t\t\t\tif(resultObject.hasOwnProperty(attr)){\r\n\t\t\t\t\tattrString += attr + '=\"' + resultObject[attr] + '\" ';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn attrString;\r\n\t\t}\r\n\r\n\t\tfunction daysFrom1970(t)\r\n\t\t{\r\n\t\t\treturn Math.floor(toLocalTimestamp(t) / 86400000);\r\n\t\t}\r\n\r\n\t\tfunction toLocalTimestamp(t)\r\n\t\t{\r\n\t\t\tif (moment.isMoment(t)) t = t.toDate().getTime();\r\n\t\t\tif (typeof t == 'object' && t.getTime) t = t.getTime();\r\n\t\t\tif (typeof t == 'string' && !t.match(/\\d{13}/)) t = moment(t,opt.format).toDate().getTime();\r\n\t\t\tt = parseInt(t, 10) - new Date().getTimezoneOffset()*60*1000;\r\n\t\t\treturn t;\r\n\t\t}\r\n\r\n\t\tfunction createMonthHTML(d)\r\n\t\t{\r\n\t\t\tvar days = [];\r\n\t\t\td.setDate(1);\r\n\t\t\tvar lastMonth = new Date(d.getTime() - 86400000);\r\n\t\t\tvar now = new Date();\r\n\r\n\t\t\tvar dayOfWeek = d.getDay();\r\n\t\t\tif((dayOfWeek === 0) && (opt.startOfWeek === 'monday')) {\r\n\t\t\t\t// add one week\r\n\t\t\t\tdayOfWeek = 7;\r\n\t\t\t}\r\n            var today,valid;\r\n\r\n\t\t\tif (dayOfWeek > 0)\r\n\t\t\t{\r\n\t\t\t\tfor (var i = dayOfWeek; i > 0; i--)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar day = new Date(d.getTime() - 86400000*i);\r\n\t\t\t\t\tvalid = isValidTime(day.getTime());\r\n\t\t\t\t\tif (opt.startDate && compare_day(day,opt.startDate) < 0) valid = false;\r\n\t\t\t\t\tif (opt.endDate && compare_day(day,opt.endDate) > 0) valid = false;\r\n\t\t\t\t\tdays.push(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdate: day,\r\n\t\t\t\t\t\ttype:'lastMonth',\r\n\t\t\t\t\t\tday: day.getDate(),\r\n\t\t\t\t\t\ttime:day.getTime(),\r\n\t\t\t\t\t\tvalid:valid\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar toMonth = d.getMonth();\r\n\t\t\tfor(var i=0; i<40; i++)\r\n\t\t\t{\r\n\t\t\t\ttoday = moment(d).add(i, 'days').toDate();\r\n\t\t\t\tvalid = isValidTime(today.getTime());\r\n\t\t\t\tif (opt.startDate && compare_day(today,opt.startDate) < 0) valid = false;\r\n\t\t\t\tif (opt.endDate && compare_day(today,opt.endDate) > 0) valid = false;\r\n\t\t\t\tdays.push(\r\n\t\t\t\t{\r\n\t\t\t\t\tdate: today,\r\n\t\t\t\t\ttype: today.getMonth() == toMonth ? 'toMonth' : 'nextMonth',\r\n\t\t\t\t\tday: today.getDate(),\r\n\t\t\t\t\ttime:today.getTime(),\r\n\t\t\t\t\tvalid:valid\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tvar html = [];\r\n\t\t\tfor(var week=0; week<6; week++)\r\n\t\t\t{\r\n\t\t\t\tif (days[week*7].type == 'nextMonth') break;\r\n\t\t\t\thtml.push('<tr>');\r\n\r\n\t\t\t\tfor(var day = 0; day<7; day++)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar _day = (opt.startOfWeek == 'monday') ? day+1 : day;\r\n\t\t\t\t\ttoday = days[week*7+_day];\r\n\t\t\t\t\tvar highlightToday = moment(today.time).format('L') == moment(now).format('L');\r\n\t\t\t\t\ttoday.extraClass = '';\r\n\t\t\t\t\ttoday.tooltip = '';\r\n\t\t\t\t\tif(today.valid && opt.beforeShowDay && typeof opt.beforeShowDay == 'function')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar _r = opt.beforeShowDay(moment(today.time).toDate());\r\n\t\t\t\t\t\ttoday.valid = _r[0];\r\n\t\t\t\t\t\ttoday.extraClass = _r[1] || '';\r\n\t\t\t\t\t\ttoday.tooltip = _r[2] || '';\r\n\t\t\t\t\t\tif (today.tooltip !== '') today.extraClass += ' has-tooltip ';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar todayDivAttr = {\r\n\t\t\t\t\t\ttime: today.time,\r\n\t\t\t\t\t\t'data-tooltip': today.tooltip,\r\n\t\t\t\t\t\t'class': 'day '+today.type+' '+today.extraClass+' '+(today.valid ? 'valid' : 'invalid')+' '+(highlightToday?'real-today':'')\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif (day === 0 && opt.showWeekNumbers)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\thtml.push('<td><div class=\"week-number\" data-start-time=\"'+today.time+'\">'+opt.getWeekNumber(today.date)+'</div></td>');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\thtml.push('<td ' + attributesCallbacks({},opt.dayTdAttrs,today) + '><div ' + attributesCallbacks(todayDivAttr,opt.dayDivAttrs,today) + '>'+showDayHTML(today.time, today.day)+'</div></td>');\r\n\t\t\t\t}\r\n\t\t\t\thtml.push('</tr>');\r\n\t\t\t}\r\n\t\t\treturn html.join('');\r\n\t\t}\r\n\r\n\t\tfunction showDayHTML(time, date)\r\n\t\t{\r\n\t\t\tif (opt.showDateFilter && typeof opt.showDateFilter == 'function') return opt.showDateFilter(time, date);\r\n\t\t\treturn date;\r\n\t\t}\r\n\r\n\t\tfunction getLanguages()\r\n\t\t{\r\n\t\t\tif (opt.language == 'auto')\r\n\t\t\t{\r\n\t\t\t\tvar language = navigator.language ? navigator.language : navigator.browserLanguage;\r\n\t\t\t\tif (!language) return $.dateRangePickerLanguages['default'];\r\n\t\t\t\tlanguage = language.toLowerCase();\r\n\t\t\t\tfor(var key in $.dateRangePickerLanguages)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (language.indexOf(key) !== -1)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\treturn $.dateRangePickerLanguages[key];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn $.dateRangePickerLanguages['default'];\r\n\t\t\t}\r\n\t\t\telse if ( opt.language && opt.language in $.dateRangePickerLanguages)\r\n\t\t\t{\r\n\t\t\t\treturn $.dateRangePickerLanguages[opt.language];\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\treturn $.dateRangePickerLanguages['default'];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * translate language string\r\n\t\t */\r\n\t\tfunction lang(t)\r\n\t\t{\r\n\t\t\tvar _t = t.toLowerCase();\r\n\t\t\tvar re = (t in langs) ? langs[t] : ( _t in langs) ? langs[_t] : null;\r\n\t\t\tvar defaultLanguage = $.dateRangePickerLanguages['default'];\r\n\t\t\tif (re == null) re = (t in defaultLanguage) ? defaultLanguage[t] : ( _t in defaultLanguage) ? defaultLanguage[_t] : '';\r\n\t\t\treturn re;\r\n\t\t}\r\n\r\n\t\tfunction getDefaultTime()\r\n\t\t{\r\n\t\t\tvar defaultTime = opt.defaultTime ? opt.defaultTime : new Date();\r\n\r\n\t\t\tif (opt.lookBehind)\r\n\t\t\t{\r\n\t\t\t\tif (opt.startDate && compare_month(defaultTime, opt.startDate) < 0 ) defaultTime = nextMonth(moment(opt.startDate).toDate());\r\n\t\t\t\tif (opt.endDate && compare_month(defaultTime,opt.endDate) > 0 ) defaultTime = moment(opt.endDate).toDate();\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif (opt.startDate && compare_month(defaultTime,opt.startDate) < 0 ) defaultTime = moment(opt.startDate).toDate();\r\n\t\t\t\tif (opt.endDate && compare_month(nextMonth(defaultTime),opt.endDate) > 0 ) defaultTime = prevMonth(moment(opt.endDate).toDate());\r\n\t\t\t}\r\n\r\n\t\t\tif (opt.singleDate)\r\n\t\t\t{\r\n\t\t\t\tif (opt.startDate && compare_month(defaultTime,opt.startDate) < 0 ) defaultTime = moment(opt.startDate).toDate();\r\n\t\t\t\tif (opt.endDate && compare_month(defaultTime,opt.endDate) > 0 ) defaultTime = moment(opt.endDate).toDate();\r\n\t\t\t}\r\n\r\n\t\t\treturn defaultTime;\r\n\t\t}\r\n\r\n\t\tfunction resetMonthsView(time)\r\n\t\t{\r\n\t\t\tif (!time) {\r\n\t\t\t\ttime = getDefaultTime();\r\n\t\t\t}\r\n\r\n\t\t\tif (opt.lookBehind)\r\n\t\t\t{\r\n\t\t\t\tshowMonth(prevMonth(time),'month1');\r\n\t\t\t\tshowMonth(time,'month2');\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tshowMonth(time,'month1');\r\n\t\t\t\tshowMonth(nextMonth(time),'month2');\r\n\t\t\t}\r\n\r\n\t\t\tif (opt.singleDate)\r\n\t\t\t{\r\n\t\t\t\tshowMonth(time,'month1');\r\n\t\t\t}\r\n\r\n\t\t\tshowSelectedDays();\r\n\t\t\tshowGap();\r\n\t\t}\r\n\r\n\t};\r\n}));\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9kYXRlcGlja2VyL2pxdWVyeS5kYXRlcmFuZ2VwaWNrZXIuanM/MWZlNyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsTUFBTSxNQUFNO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixNQUFNLE1BQU07QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLE1BQU0sTUFBTTtBQUNuQztBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsTUFBTSxNQUFNO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixNQUFNLE1BQU07QUFDbEM7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLE1BQU0sTUFBTTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixNQUFNLE1BQU07QUFDbkM7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLE1BQU0sTUFBTTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLE1BQU0sTUFBTTtBQUM5QztBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsTUFBTSxNQUFNO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLE9BQU8sOEJBQThCLEVBQUU7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkIsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDZCQUE2QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0Esa0VBQWtFLEVBQUU7QUFDcEUsbUVBQW1FLEVBQUU7QUFDckU7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQSxrRUFBa0UsRUFBRTtBQUNwRSxtRUFBbUUsRUFBRTtBQUNyRTtBQUNBLElBQUk7O0FBRUo7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsbUJBQW1CO0FBQzlELEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxtQkFBbUI7QUFDOUQsS0FBSztBQUNMO0FBQ0EsdUNBQXVDLG1CQUFtQjtBQUMxRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTs7QUFFTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQSxzQkFBc0Isd0NBQXdDO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDZEQUE2RDtBQUM1RSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLG1CQUFtQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsbUJBQW1CO0FBQzNEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBLGlDQUFpQztBQUNqQzs7QUFFQSxpQ0FBaUM7QUFDakM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQ7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBEO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRDtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRDtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsbUNBQW1DLFNBQVMsWUFBWTtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsU0FBUyxZQUFZO0FBQ2pEOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixrQkFBa0IsMkJBQTJCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixrQkFBa0IsMkJBQTJCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixrQkFBa0IsbUJBQW1CO0FBQ3JDO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsa0JBQWtCLG1CQUFtQjtBQUNyQztBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsNkJBQTZCO0FBQzlDO0FBQ0E7QUFDQSxvQkFBb0IsbURBQW1EO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsMEJBQTBCO0FBQzNDO0FBQ0E7QUFDQSxxQkFBcUIsZ0RBQWdEO0FBQ3JFO0FBQ0E7QUFDQTs7QUFFQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLEtBQUs7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVDQUF1Qzs7QUFFdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxHQUFHO0FBQy9DO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSwyQkFBMkIsT0FBTztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsZUFBZSxNQUFNO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0Esa0JBQWtCLFFBQVE7QUFDMUI7QUFDQTtBQUNBOztBQUVBLG9CQUFvQixPQUFPO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw4Q0FBOEM7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLENBQUMiLCJmaWxlIjoiMTguanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBqcXVlcnkuZGF0ZXJhbmdlcGlja2VyLmpzXHJcbi8vIGF1dGhvciA6IENodW5sb25nIExpdVxyXG4vLyBsaWNlbnNlIDogTUlUXHJcbi8vIHd3dy5qc3plbi5jb21cclxuXHJcbnJlcXVpcmUoJy4vZGF0ZXJhbmdlcGlja2VyLmNzcycpO1xyXG5cclxuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XHJcblx0XHRpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XHJcblx0XHRcdC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cclxuXHRcdFx0ZGVmaW5lKFsnanF1ZXJ5JywgJ21vbWVudCddLCBmYWN0b3J5KTtcclxuXHRcdH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRcdC8vIENvbW1vbkpTLiBSZWdpc3RlciBhcyBhIG1vZHVsZVxyXG5cdFx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JyksIHJlcXVpcmUoJ21vbWVudCcpKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIEJyb3dzZXIgZ2xvYmFsc1xyXG5cdFx0XHRmYWN0b3J5KGpRdWVyeSwgbW9tZW50KTtcclxuXHRcdH1cclxufShmdW5jdGlvbiAoJCwgbW9tZW50KVxyXG57XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblx0JC5kYXRlUmFuZ2VQaWNrZXJMYW5ndWFnZXMgPVxyXG5cdHtcclxuXHRcdCdkZWZhdWx0JzogIC8vZGVmYXVsdCBsYW5ndWFnZTogRW5nbGlzaFxyXG5cdFx0e1xyXG5cdFx0XHQnc2VsZWN0ZWQnOiAnU2VsZWN0ZWQ6JyxcclxuXHRcdFx0J2RheSc6J0RheScsXHJcblx0XHRcdCdkYXlzJzogJ0RheXMnLFxyXG5cdFx0XHQnYXBwbHknOiAnQ2xvc2UnLFxyXG5cdFx0XHQnd2Vlay0xJyA6ICdtbycsXHJcblx0XHRcdCd3ZWVrLTInIDogJ3R1JyxcclxuXHRcdFx0J3dlZWstMycgOiAnd2UnLFxyXG5cdFx0XHQnd2Vlay00JyA6ICd0aCcsXHJcblx0XHRcdCd3ZWVrLTUnIDogJ2ZyJyxcclxuXHRcdFx0J3dlZWstNicgOiAnc2EnLFxyXG5cdFx0XHQnd2Vlay03JyA6ICdzdScsXHJcblx0XHRcdCd3ZWVrLW51bWJlcic6ICdXJyxcclxuXHRcdFx0J21vbnRoLW5hbWUnOiBbJ2phbnVhcnknLCdmZWJydWFyeScsJ21hcmNoJywnYXByaWwnLCdtYXknLCdqdW5lJywnanVseScsJ2F1Z3VzdCcsJ3NlcHRlbWJlcicsJ29jdG9iZXInLCdub3ZlbWJlcicsJ2RlY2VtYmVyJ10sXHJcblx0XHRcdCdzaG9ydGN1dHMnIDogJ1Nob3J0Y3V0cycsXHJcblx0XHRcdCdjdXN0b20tdmFsdWVzJzogJ0N1c3RvbSBWYWx1ZXMnLFxyXG5cdFx0XHQncGFzdCc6ICdQYXN0JyxcclxuXHRcdFx0J2ZvbGxvd2luZyc6J0ZvbGxvd2luZycsXHJcblx0XHRcdCdwcmV2aW91cycgOiAnUHJldmlvdXMnLFxyXG5cdFx0XHQncHJldi13ZWVrJyA6ICdXZWVrJyxcclxuXHRcdFx0J3ByZXYtbW9udGgnIDogJ01vbnRoJyxcclxuXHRcdFx0J3ByZXYteWVhcicgOiAnWWVhcicsXHJcblx0XHRcdCduZXh0JzonTmV4dCcsXHJcblx0XHRcdCduZXh0LXdlZWsnOidXZWVrJyxcclxuXHRcdFx0J25leHQtbW9udGgnOidNb250aCcsXHJcblx0XHRcdCduZXh0LXllYXInOidZZWFyJyxcclxuXHRcdFx0J2xlc3MtdGhhbicgOiAnRGF0ZSByYW5nZSBzaG91bGQgbm90IGJlIG1vcmUgdGhhbiAlZCBkYXlzJyxcclxuXHRcdFx0J21vcmUtdGhhbicgOiAnRGF0ZSByYW5nZSBzaG91bGQgbm90IGJlIGxlc3MgdGhhbiAlZCBkYXlzJyxcclxuXHRcdFx0J2RlZmF1bHQtbW9yZScgOiAnUGxlYXNlIHNlbGVjdCBhIGRhdGUgcmFuZ2UgbG9uZ2VyIHRoYW4gJWQgZGF5cycsXHJcblx0XHRcdCdkZWZhdWx0LXNpbmdsZScgOiAnUGxlYXNlIHNlbGVjdCBhIGRhdGUnLFxyXG5cdFx0XHQnZGVmYXVsdC1sZXNzJyA6ICdQbGVhc2Ugc2VsZWN0IGEgZGF0ZSByYW5nZSBsZXNzIHRoYW4gJWQgZGF5cycsXHJcblx0XHRcdCdkZWZhdWx0LXJhbmdlJyA6ICdQbGVhc2Ugc2VsZWN0IGEgZGF0ZSByYW5nZSBiZXR3ZWVuICVkIGFuZCAlZCBkYXlzJyxcclxuXHRcdFx0J2RlZmF1bHQtZGVmYXVsdCc6ICdQbGVhc2Ugc2VsZWN0IGEgZGF0ZSByYW5nZScsXHJcblx0XHRcdCd0aW1lJzonVGltZScsXHJcblx0XHRcdCdob3VyJzonSG91cicsXHJcblx0XHRcdCdtaW51dGUnOidNaW51dGUnXHJcblx0XHR9LFxyXG5cdFx0J2lkJzpcclxuXHRcdHtcclxuXHRcdFx0J3NlbGVjdGVkJzogJ1RlcnBpbGloOicsXHJcblx0XHRcdCdkYXknOiAnSGFyaScsXHJcblx0XHRcdCdkYXlzJzogJ0hhcmknLFxyXG5cdFx0XHQnYXBwbHknOiAnVHV0dXAnLFxyXG5cdFx0XHQnd2Vlay0xJzogJ3NlbicsXHJcblx0XHRcdCd3ZWVrLTInOiAnc2VsJyxcclxuXHRcdFx0J3dlZWstMyc6ICdyYWInLFxyXG5cdFx0XHQnd2Vlay00JzogJ2thbScsXHJcblx0XHRcdCd3ZWVrLTUnOiAnanVtJyxcclxuXHRcdFx0J3dlZWstNic6ICdzYWInLFxyXG5cdFx0XHQnd2Vlay03JzogJ21pbicsXHJcblx0XHRcdCd3ZWVrLW51bWJlcic6ICdXJyxcclxuXHRcdFx0J21vbnRoLW5hbWUnOiBbJ2phbnVhcmknLCAnZmVicnVhcmknLCAnbWFyZXQnLCAnYXByaWwnLCAnbWVpJywgJ2p1bmknLCAnanVsaScsICdhZ3VzdHVzJywgJ3NlcHRlbWJlcicsICdva3RvYmVyJywgJ25vdmVtYmVyJywgJ2Rlc2VtYmVyJ10sXHJcblx0XHRcdCdzaG9ydGN1dHMnOiAnUGludGFzJyxcclxuXHRcdFx0J2N1c3RvbS12YWx1ZXMnOiAnTmlsYWkgeWFuZyBkaXRlbnR1a2FuJyxcclxuXHRcdFx0J3Bhc3QnOiAnWWFuZyBMYWx1JyxcclxuXHRcdFx0J2ZvbGxvd2luZyc6ICdNZW5naWt1dGknLFxyXG5cdFx0XHQncHJldmlvdXMnOiAnU2ViZWx1bW55YScsXHJcblx0XHRcdCdwcmV2LXdlZWsnOiAnTWluZ2d1JyxcclxuXHRcdFx0J3ByZXYtbW9udGgnOiAnQnVsYW4nLFxyXG5cdFx0XHQncHJldi15ZWFyJzogJ1RhaHVuJyxcclxuXHRcdFx0J25leHQnOiAnU2VsYW5qdXRueWEnLFxyXG5cdFx0XHQnbmV4dC13ZWVrJzogJ01pbmdndScsXHJcblx0XHRcdCduZXh0LW1vbnRoJzogJ0J1bGFuJyxcclxuXHRcdFx0J25leHQteWVhcic6ICdUYWh1bicsXHJcblx0XHRcdCdsZXNzLXRoYW4nOiAnVGFuZ2dhbCBoYXJ1cyBsZWJpaCBkYXJpICVkIGhhcmknLFxyXG5cdFx0XHQnbW9yZS10aGFuJzogJ1RhbmdnYWwgaGFydXMga3VyYW5nIGRhcmkgJWQgaGFyaScsXHJcblx0XHRcdCdkZWZhdWx0LW1vcmUnOiAnSmFyYWsgdGFuZ2dhbCBoYXJ1cyBsZWJpaCBsYW1hIGRhcmkgJWQgaGFyaScsXHJcblx0XHRcdCdkZWZhdWx0LXNpbmdsZSc6ICdTaWxha2FuIHBpbGloIHRhbmdnYWwnLFxyXG5cdFx0XHQnZGVmYXVsdC1sZXNzJzogJ0phcmFrIHJlbnRhbmcgdGFuZ2dhbCB0aWRhayBib2xlaCBsZWJpaCBsYW1hIGRhcmkgJWQgaGFyaScsXHJcblx0XHRcdCdkZWZhdWx0LXJhbmdlJzogJ1JlbnRhbmcgdGFuZ2dhbCBoYXJ1cyBhbnRhcmEgJWQgZGFuICVkIGhhcmknLFxyXG5cdFx0XHQnZGVmYXVsdC1kZWZhdWx0JzogJ1NpbGFrYW4gcGlsaWggcmVudGFuZyB0YW5nZ2FsJyxcclxuXHRcdFx0J3RpbWUnOiAnV2FrdHUnLFxyXG5cdFx0XHQnaG91cic6ICdKYW0nLFxyXG5cdFx0XHQnbWludXRlJzogJ01lbml0J1xyXG5cdFx0fSxcclxuXHRcdCdheic6XHJcblx0XHR7XHJcblx0XHRcdCdzZWxlY3RlZCc6ICdTZcOnaWxkaTonLFxyXG5cdFx0XHQnZGF5JzonIGfDvG4nLFxyXG5cdFx0XHQnZGF5cyc6ICcgZ8O8bicsXHJcblx0XHRcdCdhcHBseSc6ICd0yZl0YmlxJyxcclxuXHRcdFx0J3dlZWstMScgOiAnMScsXHJcblx0XHRcdCd3ZWVrLTInIDogJzInLFxyXG5cdFx0XHQnd2Vlay0zJyA6ICczJyxcclxuXHRcdFx0J3dlZWstNCcgOiAnNCcsXHJcblx0XHRcdCd3ZWVrLTUnIDogJzUnLFxyXG5cdFx0XHQnd2Vlay02JyA6ICc2JyxcclxuXHRcdFx0J3dlZWstNycgOiAnNycsXHJcblx0XHRcdCdtb250aC1uYW1lJzogWyd5YW52YXInLCdmZXZyYWwnLCdtYXJ0JywnYXByZWwnLCdtYXknLCdpeXVuJywnaXl1bCcsJ2F2cXVzdCcsJ3NlbnR5YWJyJywnb2t0eWFicicsJ25veWFicicsJ2Rla2FiciddLFxyXG5cdFx0XHQnc2hvcnRjdXRzJyA6ICdRxLFzYXlvbGxhcicsXHJcblx0XHRcdCdwYXN0JzogJ0tlw6dtacWfJyxcclxuXHRcdFx0J2ZvbGxvd2luZyc6J07DtnZiyZl0aScsXHJcblx0XHRcdCdwcmV2aW91cycgOiAnJm5ic3A7Jm5ic3A7Jm5ic3A7JyxcclxuXHRcdFx0J3ByZXYtd2VlaycgOiAnw5ZuY8mZa2kgaMmZZnTJmScsXHJcblx0XHRcdCdwcmV2LW1vbnRoJyA6ICfDlm5jyZlraSBheScsXHJcblx0XHRcdCdwcmV2LXllYXInIDogJ8OWbmPJmWtpIGlsJyxcclxuXHRcdFx0J25leHQnOiAnJm5ic3A7Jm5ic3A7Jm5ic3A7JyxcclxuXHRcdFx0J25leHQtd2Vlayc6J07DtnZiyZl0aSBoyZlmdMmZJyxcclxuXHRcdFx0J25leHQtbW9udGgnOidOw7Z2YsmZdGkgYXknLFxyXG5cdFx0XHQnbmV4dC15ZWFyJzonTsO2dmLJmXRpIGlsJyxcclxuXHRcdFx0J2xlc3MtdGhhbicgOiAnVGFyaXggYXJhbMSxxJ/EsSAlZCBnw7xuZMmZbiDDp294IG9sbWFtYWzEsWTEsXInLFxyXG5cdFx0XHQnbW9yZS10aGFuJyA6ICdUYXJpeCBhcmFsxLHEn8SxICVkIGfDvG5kyZluIGF6IG9sbWFtYWzEsWTEsXInLFxyXG5cdFx0XHQnZGVmYXVsdC1tb3JlJyA6ICclZCBnw7xuZMmZbiDDp294IGJpciB0YXJpeCBzZcOnaW4nLFxyXG5cdFx0XHQnZGVmYXVsdC1zaW5nbGUnIDogJ1Rhcml4IHNlw6dpbicsXHJcblx0XHRcdCdkZWZhdWx0LWxlc3MnIDogJyVkIGfDvG5kyZluIGF6IGJpciB0YXJpeCBzZcOnaW4nLFxyXG5cdFx0XHQnZGVmYXVsdC1yYW5nZScgOiAnJWQgdsmZICVkIGfDvG4gYXJhbMSxxJ/EsW5kYSB0YXJpeGzJmXIgc2XDp2luJyxcclxuXHRcdFx0J2RlZmF1bHQtZGVmYXVsdCc6ICdUYXJpeCBhcmFsxLHEn8SxIHNlw6dpbidcclxuXHRcdH0sXHJcblx0XHQnY24nOiAgLy9zaW1wbGlmaWVkIGNoaW5lc2VcclxuXHRcdHtcclxuXHRcdFx0J3NlbGVjdGVkJzogJ+W3sumAieaLqTonLFxyXG5cdFx0XHQnZGF5Jzon5aSpJyxcclxuXHRcdFx0J2RheXMnOiAn5aSpJyxcclxuXHRcdFx0J2FwcGx5JzogJ+ehruWumicsXHJcblx0XHRcdCd3ZWVrLTEnIDogJ+S4gCcsXHJcblx0XHRcdCd3ZWVrLTInIDogJ+S6jCcsXHJcblx0XHRcdCd3ZWVrLTMnIDogJ+S4iScsXHJcblx0XHRcdCd3ZWVrLTQnIDogJ+WbmycsXHJcblx0XHRcdCd3ZWVrLTUnIDogJ+S6lCcsXHJcblx0XHRcdCd3ZWVrLTYnIDogJ+WFrScsXHJcblx0XHRcdCd3ZWVrLTcnIDogJ+aXpScsXHJcblx0XHRcdCd3ZWVrLW51bWJlcic6ICflkagnLFxyXG5cdFx0XHQnbW9udGgtbmFtZSc6IFsn5LiA5pyIJywn5LqM5pyIJywn5LiJ5pyIJywn5Zub5pyIJywn5LqU5pyIJywn5YWt5pyIJywn5LiD5pyIJywn5YWr5pyIJywn5Lmd5pyIJywn5Y2B5pyIJywn5Y2B5LiA5pyIJywn5Y2B5LqM5pyIJ10sXHJcblx0XHRcdCdzaG9ydGN1dHMnIDogJ+W/q+aNt+mAieaLqScsXHJcblx0XHRcdCdwYXN0JzogJ+i/h+WOuycsXHJcblx0XHRcdCdmb2xsb3dpbmcnOiflsIbmnaUnLFxyXG5cdFx0XHQncHJldmlvdXMnIDogJyZuYnNwOyZuYnNwOyZuYnNwOycsXHJcblx0XHRcdCdwcmV2LXdlZWsnIDogJ+S4iuWRqCcsXHJcblx0XHRcdCdwcmV2LW1vbnRoJyA6ICfkuIrkuKrmnIgnLFxyXG5cdFx0XHQncHJldi15ZWFyJyA6ICfljrvlubQnLFxyXG5cdFx0XHQnbmV4dCc6ICcmbmJzcDsmbmJzcDsmbmJzcDsnLFxyXG5cdFx0XHQnbmV4dC13ZWVrJzon5LiL5ZGoJyxcclxuXHRcdFx0J25leHQtbW9udGgnOifkuIvkuKrmnIgnLFxyXG5cdFx0XHQnbmV4dC15ZWFyJzon5piO5bm0JyxcclxuXHRcdFx0J2xlc3MtdGhhbicgOiAn5omA6YCJ5pel5pyf6IyD5Zu05LiN6IO95aSn5LqOJWTlpKknLFxyXG5cdFx0XHQnbW9yZS10aGFuJyA6ICfmiYDpgInml6XmnJ/ojIPlm7TkuI3og73lsI/kuo4lZOWkqScsXHJcblx0XHRcdCdkZWZhdWx0LW1vcmUnIDogJ+ivt+mAieaLqeWkp+S6jiVk5aSp55qE5pel5pyf6IyD5Zu0JyxcclxuXHRcdFx0J2RlZmF1bHQtbGVzcycgOiAn6K+36YCJ5oup5bCP5LqOJWTlpKnnmoTml6XmnJ/ojIPlm7QnLFxyXG5cdFx0XHQnZGVmYXVsdC1yYW5nZScgOiAn6K+36YCJ5oupJWTlpKnliLAlZOWkqeeahOaXpeacn+iMg+WbtCcsXHJcblx0XHRcdCdkZWZhdWx0LXNpbmdsZSc6J+ivt+mAieaLqeS4gOS4quaXpeacnycsXHJcblx0XHRcdCdkZWZhdWx0LWRlZmF1bHQnOiAn6K+36YCJ5oup5LiA5Liq5pel5pyf6IyD5Zu0JyxcclxuXHRcdFx0J3RpbWUnOifml7bpl7QnLFxyXG5cdFx0XHQnaG91cic6J+Wwj+aXticsXHJcblx0XHRcdCdtaW51dGUnOifliIbpkp8nXHJcblx0XHR9LFxyXG5cdFx0J2N6JzpcclxuXHRcdHtcclxuXHRcdFx0J3NlbGVjdGVkJzogJ1Z5YnLDoW5vOicsXHJcblx0XHRcdCdkYXknOidEZW4nLFxyXG5cdFx0XHQnZGF5cyc6ICdEbnknLFxyXG5cdFx0XHQnYXBwbHknOiAnWmF2xZnDrXQnLFxyXG5cdFx0XHQnd2Vlay0xJyA6ICdwbycsXHJcblx0XHRcdCd3ZWVrLTInIDogJ8O6dCcsXHJcblx0XHRcdCd3ZWVrLTMnIDogJ3N0JyxcclxuXHRcdFx0J3dlZWstNCcgOiAnxI10JyxcclxuXHRcdFx0J3dlZWstNScgOiAncMOhJyxcclxuXHRcdFx0J3dlZWstNicgOiAnc28nLFxyXG5cdFx0XHQnd2Vlay03JyA6ICduZScsXHJcblx0XHRcdCdtb250aC1uYW1lJzogWydsZWRlbicsJ8O6bm9yJywnYsWZZXplbicsJ2R1YmVuJywna3bEm3RlbicsJ8SNZXJ2ZW4nLCfEjWVydmVuZWMnLCdzcnBlbicsJ3rDocWZw60nLCfFmcOtamVuJywnbGlzdG9wYWQnLCdwcm9zaW5lYyddLFxyXG5cdFx0XHQnc2hvcnRjdXRzJyA6ICdaa3JhdGt5JyxcclxuXHRcdFx0J3Bhc3QnOiAncG8nLFxyXG5cdFx0XHQnZm9sbG93aW5nJzonbsOhc2xlZHVqw61jw60nLFxyXG5cdFx0XHQncHJldmlvdXMnIDogJ3DFmWVkY2hvesOtJyxcclxuXHRcdFx0J3ByZXYtd2VlaycgOiAndMO9ZGVuJyxcclxuXHRcdFx0J3ByZXYtbW9udGgnIDogJ23Em3PDrWMnLFxyXG5cdFx0XHQncHJldi15ZWFyJyA6ICdyb2snLFxyXG5cdFx0XHQnbmV4dCc6J2RhbMWhw60nLFxyXG5cdFx0XHQnbmV4dC13ZWVrJzondMO9ZGVuJyxcclxuXHRcdFx0J25leHQtbW9udGgnOidtxJtzw61jJyxcclxuXHRcdFx0J25leHQteWVhcic6J3JvaycsXHJcblx0XHRcdCdsZXNzLXRoYW4nIDogJ1JvenNhaCBkYXRhIGJ5IG5lbcSbbCBiw710IHbEm3TFocOtIG5lxb4gJWQgZG7FrycsXHJcblx0XHRcdCdtb3JlLXRoYW4nIDogJ1JvenNhaCBkYXRhIGJ5IG5lbcSbbCBiw710IG1lbsWhw60gbmXFviAlZCBkbsWvJyxcclxuXHRcdFx0J2RlZmF1bHQtbW9yZScgOiAnUHJvc8OtbSB6dm9sdGUgcm96c2FoIGRhdGEgdsSbdMWhw60gbmXFviAlZCBkbsWvJyxcclxuXHRcdFx0J2RlZmF1bHQtc2luZ2xlJyA6ICdQcm9zw61tIHp2b2x0ZSBkYXR1bScsXHJcblx0XHRcdCdkZWZhdWx0LWxlc3MnIDogJ1Byb3PDrW0genZvbHRlIHJvenNhaCBkYXRhIG1lbsWhw60gbmXFviAlZCBkbsWvJyxcclxuXHRcdFx0J2RlZmF1bHQtcmFuZ2UnIDogJ1Byb3PDrW0genZvbHRlIHJvenNhaCBkYXRhIG1lemkgJWQgYSAlZCBkbnknLFxyXG5cdFx0XHQnZGVmYXVsdC1kZWZhdWx0JzogJ1Byb3PDrW0genZvbHRlIHJvenNhaCBkYXRhJ1xyXG5cdFx0fSxcclxuXHRcdCdkZSc6XHJcblx0XHR7XHJcblx0XHRcdCdzZWxlY3RlZCc6ICdBdXN3YWhsOicsXHJcblx0XHRcdCdkYXknOidUYWcnLFxyXG5cdFx0XHQnZGF5cyc6ICdUYWdlJyxcclxuXHRcdFx0J2FwcGx5JzogJ1NjaGxpZcOfZW4nLFxyXG5cdFx0XHQnd2Vlay0xJyA6ICdtbycsXHJcblx0XHRcdCd3ZWVrLTInIDogJ2RpJyxcclxuXHRcdFx0J3dlZWstMycgOiAnbWknLFxyXG5cdFx0XHQnd2Vlay00JyA6ICdkbycsXHJcblx0XHRcdCd3ZWVrLTUnIDogJ2ZyJyxcclxuXHRcdFx0J3dlZWstNicgOiAnc2EnLFxyXG5cdFx0XHQnd2Vlay03JyA6ICdzbycsXHJcblx0XHRcdCdtb250aC1uYW1lJzogWydqYW51YXInLCdmZWJydWFyJywnbcOkcnonLCdhcHJpbCcsJ21haScsJ2p1bmknLCdqdWxpJywnYXVndXN0Jywnc2VwdGVtYmVyJywnb2t0b2JlcicsJ25vdmVtYmVyJywnZGV6ZW1iZXInXSxcclxuXHRcdFx0J3Nob3J0Y3V0cycgOiAnU2NobmVsbHdhaGwnLFxyXG5cdFx0XHQncGFzdCc6ICdWb3JoZXJpZ2UnLFxyXG5cdFx0XHQnZm9sbG93aW5nJzonRm9sZ2VuZGUnLFxyXG5cdFx0XHQncHJldmlvdXMnIDogJ1ZvcmhlcmlnZScsXHJcblx0XHRcdCdwcmV2LXdlZWsnIDogJ1dvY2hlJyxcclxuXHRcdFx0J3ByZXYtbW9udGgnIDogJ01vbmF0JyxcclxuXHRcdFx0J3ByZXYteWVhcicgOiAnSmFocicsXHJcblx0XHRcdCduZXh0JzonTsOkY2hzdGUnLFxyXG5cdFx0XHQnbmV4dC13ZWVrJzonV29jaGUnLFxyXG5cdFx0XHQnbmV4dC1tb250aCc6J01vbmF0JyxcclxuXHRcdFx0J25leHQteWVhcic6J0phaHInLFxyXG5cdFx0XHQnbGVzcy10aGFuJyA6ICdEYXR1bXNiZXJlaWNoIGRhcmYgbmljaHQgZ3LDtsOfZXIgc2VpbiBhbHMgJWQgVGFnZScsXHJcblx0XHRcdCdtb3JlLXRoYW4nIDogJ0RhdHVtc2JlcmVpY2ggZGFyZiBuaWNodCBrbGVpbmVyIHNlaW4gYWxzICVkIFRhZ2UnLFxyXG5cdFx0XHQnZGVmYXVsdC1tb3JlJyA6ICdCaXR0ZSBtaW5kZXN0ZW5zICVkIFRhZ2UgYXVzd8OkaGxlbicsXHJcblx0XHRcdCdkZWZhdWx0LXNpbmdsZScgOiAnQml0dGUgZWluIERhdHVtIGF1c3fDpGhsZW4nLFxyXG5cdFx0XHQnZGVmYXVsdC1sZXNzJyA6ICdCaXR0ZSB3ZW5pZ2VyIGFscyAlZCBUYWdlIGF1c3fDpGhsZW4nLFxyXG5cdFx0XHQnZGVmYXVsdC1yYW5nZScgOiAnQml0dGUgZWluZW4gRGF0dW1zYmVyZWljaCB6d2lzY2hlbiAlZCB1bmQgJWQgVGFnZW4gYXVzd8OkaGxlbicsXHJcblx0XHRcdCdkZWZhdWx0LWRlZmF1bHQnOiAnQml0dGUgZWluIFN0YXJ0LSB1bmQgRW5kZGF0dW0gYXVzd8OkaGxlbicsXHJcblx0XHRcdCdUaW1lJzogJ1plaXQnLFxyXG5cdFx0XHQnaG91cic6ICdTdHVuZGUnLFxyXG5cdFx0XHQnbWludXRlJzogJ01pbnV0ZSdcclxuXHRcdH0sXHJcblx0XHQnZXMnOlxyXG5cdFx0e1xyXG5cdFx0XHQnc2VsZWN0ZWQnOiAnU2VsZWNjaW9uYWRvOicsXHJcblx0XHRcdCdkYXknOidEw61hJyxcclxuXHRcdFx0J2RheXMnOiAnRMOtYXMnLFxyXG5cdFx0XHQnYXBwbHknOiAnQ2VycmFyJyxcclxuXHRcdFx0J3dlZWstMScgOiAnbHUnLFxyXG5cdFx0XHQnd2Vlay0yJyA6ICdtYScsXHJcblx0XHRcdCd3ZWVrLTMnIDogJ21pJyxcclxuXHRcdFx0J3dlZWstNCcgOiAnanUnLFxyXG5cdFx0XHQnd2Vlay01JyA6ICd2aScsXHJcblx0XHRcdCd3ZWVrLTYnIDogJ3NhJyxcclxuXHRcdFx0J3dlZWstNycgOiAnZG8nLFxyXG5cdFx0XHQnbW9udGgtbmFtZSc6IFsnZW5lcm8nLCdmZWJyZXJvJywnbWFyem8nLCdhYnJpbCcsJ21heW8nLCdqdW5pbycsJ2p1bGlvJywnYWdvc3RvJywnc2VwdGllbWJyZScsJ29jdHVicmUnLCdub3ZpZW1icmUnLCdkaWNpZW1icmUnXSxcclxuXHRcdFx0J3Nob3J0Y3V0cycgOiAnQWNjZXNvcyBkaXJlY3RvcycsXHJcblx0XHRcdCdwYXN0JzogJ1Bhc2FkbycsXHJcblx0XHRcdCdmb2xsb3dpbmcnOidTaWd1aWVudGUnLFxyXG5cdFx0XHQncHJldmlvdXMnIDogJ0FudGVyaW9yJyxcclxuXHRcdFx0J3ByZXYtd2VlaycgOiAnU2VtYW5hJyxcclxuXHRcdFx0J3ByZXYtbW9udGgnIDogJ01lcycsXHJcblx0XHRcdCdwcmV2LXllYXInIDogJ0HDsW8nLFxyXG5cdFx0XHQnbmV4dCc6J1NpZ3VpZW50ZScsXHJcblx0XHRcdCduZXh0LXdlZWsnOidTZW1hbmEnLFxyXG5cdFx0XHQnbmV4dC1tb250aCc6J01lcycsXHJcblx0XHRcdCduZXh0LXllYXInOidBw7FvJyxcclxuXHRcdFx0J2xlc3MtdGhhbicgOiAnRWwgcmFuZ28gbm8gZGViZXLDrWEgc2VyIG1heW9yIGRlICVkIGTDrWFzJyxcclxuXHRcdFx0J21vcmUtdGhhbicgOiAnRWwgcmFuZ28gbm8gZGViZXLDrWEgc2VyIG1lbm9yIGRlICVkIGTDrWFzJyxcclxuXHRcdFx0J2RlZmF1bHQtbW9yZScgOiAnUG9yIGZhdm9yIHNlbGVjY2lvbmEgdW4gcmFuZ28gbWF5b3IgYSAlZCBkw61hcycsXHJcblx0XHRcdCdkZWZhdWx0LXNpbmdsZScgOiAnUG9yIGZhdm9yIHNlbGVjY2lvbmEgdW4gZMOtYScsXHJcblx0XHRcdCdkZWZhdWx0LWxlc3MnIDogJ1BvciBmYXZvciBzZWxlY2Npb25hIHVuIHJhbmdvIG1lbm9yIGEgJWQgZMOtYXMnLFxyXG5cdFx0XHQnZGVmYXVsdC1yYW5nZScgOiAnUG9yIGZhdm9yIHNlbGVjY2lvbmEgdW4gcmFuZ28gZW50cmUgJWQgeSAlZCBkw61hcycsXHJcblx0XHRcdCdkZWZhdWx0LWRlZmF1bHQnOiAnUG9yIGZhdm9yIHNlbGVjY2lvbmEgdW4gcmFuZ28gZGUgZmVjaGFzLidcclxuXHRcdH0sXHJcblx0XHQnZnInOlxyXG5cdFx0e1xyXG5cdFx0XHQnc2VsZWN0ZWQnOiAnU8OpbGVjdGlvbjonLFxyXG5cdFx0XHQnZGF5JzonSm91cicsXHJcblx0XHRcdCdkYXlzJzogJ0pvdXJzJyxcclxuXHRcdFx0J2FwcGx5JzogJ0Zlcm1lcicsXHJcblx0XHRcdCd3ZWVrLTEnIDogJ2x1JyxcclxuXHRcdFx0J3dlZWstMicgOiAnbWEnLFxyXG5cdFx0XHQnd2Vlay0zJyA6ICdtZScsXHJcblx0XHRcdCd3ZWVrLTQnIDogJ2plJyxcclxuXHRcdFx0J3dlZWstNScgOiAndmUnLFxyXG5cdFx0XHQnd2Vlay02JyA6ICdzYScsXHJcblx0XHRcdCd3ZWVrLTcnIDogJ2RpJyxcclxuXHRcdFx0J21vbnRoLW5hbWUnOiBbJ2phbnZpZXInLCdmw6l2cmllcicsJ21hcnMnLCdhdnJpbCcsJ21haScsJ2p1aW4nLCdqdWlsbGV0JywnYW/Du3QnLCdzZXB0ZW1icmUnLCdvY3RvYnJlJywnbm92ZW1icmUnLCdkw6ljZW1icmUnXSxcclxuXHRcdFx0J3Nob3J0Y3V0cycgOiAnUmFjY291cmNpcycsXHJcblx0XHRcdCdwYXN0JzogJ1Bhc3PDqScsXHJcblx0XHRcdCdmb2xsb3dpbmcnOidTdWl2YW50JyxcclxuXHRcdFx0J3ByZXZpb3VzJyA6ICdQcsOpY8OpZGVudCcsXHJcblx0XHRcdCdwcmV2LXdlZWsnIDogJ1NlbWFpbmUnLFxyXG5cdFx0XHQncHJldi1tb250aCcgOiAnTW9pcycsXHJcblx0XHRcdCdwcmV2LXllYXInIDogJ0FubsOpZScsXHJcblx0XHRcdCduZXh0JzonU3VpdmFudCcsXHJcblx0XHRcdCduZXh0LXdlZWsnOidTZW1haW5lJyxcclxuXHRcdFx0J25leHQtbW9udGgnOidNb2lzJyxcclxuXHRcdFx0J25leHQteWVhcic6J0FubsOpZScsXHJcblx0XHRcdCdsZXNzLXRoYW4nIDogJ0xcXCdpbnRlcnZhbGxlIG5lIGRvaXQgcGFzIMOqdHJlIHN1cMOpcmlldXJlIMOgICVkIGpvdXJzJyxcclxuXHRcdFx0J21vcmUtdGhhbicgOiAnTFxcJ2ludGVydmFsbGUgbmUgZG9pdCBwYXMgw6p0cmUgaW5mw6lyaWV1cmUgw6AgJWQgam91cnMnLFxyXG5cdFx0XHQnZGVmYXVsdC1tb3JlJyA6ICdNZXJjaSBkZSBjaG9pc2lyIHVuZSBpbnRlcnZhbGxlIHN1cMOpcmlldXJlIMOgICVkIGpvdXJzJyxcclxuXHRcdFx0J2RlZmF1bHQtc2luZ2xlJyA6ICdNZXJjaSBkZSBjaG9pc2lyIHVuZSBkYXRlJyxcclxuXHRcdFx0J2RlZmF1bHQtbGVzcycgOiAnTWVyY2kgZGUgY2hvaXNpciB1bmUgaW50ZXJ2YWxsZSBpbmbDqXJpZXVyZSAlZCBqb3VycycsXHJcblx0XHRcdCdkZWZhdWx0LXJhbmdlJyA6ICdNZXJjaSBkZSBjaG9pc2lyIHVuZSBpbnRlcnZhbGxlIGNvbXByaXNlIGVudHJlICVkIGV0ICVkIGpvdXJzJyxcclxuXHRcdFx0J2RlZmF1bHQtZGVmYXVsdCc6ICdNZXJjaSBkZSBjaG9pc2lyIHVuZSBkYXRlJ1xyXG5cdFx0fSxcclxuXHRcdCdodSc6XHJcblx0XHR7XHJcblx0XHRcdCdzZWxlY3RlZCc6ICdLaXbDoWxhc3p0dmE6JyxcclxuXHRcdFx0J2RheSc6J05hcCcsXHJcblx0XHRcdCdkYXlzJzogJ05hcCcsXHJcblx0XHRcdCdhcHBseSc6ICdPaycsXHJcblx0XHRcdCd3ZWVrLTEnIDogJ2gnLFxyXG5cdFx0XHQnd2Vlay0yJyA6ICdrJyxcclxuXHRcdFx0J3dlZWstMycgOiAnc3onLFxyXG5cdFx0XHQnd2Vlay00JyA6ICdjcycsXHJcblx0XHRcdCd3ZWVrLTUnIDogJ3AnLFxyXG5cdFx0XHQnd2Vlay02JyA6ICdzeicsXHJcblx0XHRcdCd3ZWVrLTcnIDogJ3YnLFxyXG5cdFx0XHQnbW9udGgtbmFtZSc6IFsnamFudcOhcicsJ2ZlYnJ1w6FyJywnbcOhcmNpdXMnLCfDoXByaWxpcycsJ23DoWp1cycsJ2rDum5pdXMnLCdqw7psaXVzJywnYXVndXN6dHVzJywnc3plcHRlbWJlcicsJ29rdMOzYmVyJywnbm92ZW1iZXInLCdkZWNlbWJlciddLFxyXG5cdFx0XHQnc2hvcnRjdXRzJyA6ICdHeW9yc3bDoWxhc3p0w7MnLFxyXG5cdFx0XHQncGFzdCc6ICdNw7psdCcsXHJcblx0XHRcdCdmb2xsb3dpbmcnOidLw7Z2ZXRrZXrFkScsXHJcblx0XHRcdCdwcmV2aW91cycgOiAnRWzFkXrFkScsXHJcblx0XHRcdCdwcmV2LXdlZWsnIDogJ0jDqXQnLFxyXG5cdFx0XHQncHJldi1tb250aCcgOiAnSMOzbmFwJyxcclxuXHRcdFx0J3ByZXYteWVhcicgOiAnw4l2JyxcclxuXHRcdFx0J25leHQnOidLw7Z2ZXRrZXrFkScsXHJcblx0XHRcdCduZXh0LXdlZWsnOidIw6l0JyxcclxuXHRcdFx0J25leHQtbW9udGgnOidIw7NuYXAnLFxyXG5cdFx0XHQnbmV4dC15ZWFyJzonw4l2JyxcclxuXHRcdFx0J2xlc3MtdGhhbicgOiAnQSBraXbDoWxhc3p0w6FzIG5lbSBsZWhldCB0w7ZiYiAlZCBuYXBuw6FsJyxcclxuXHRcdFx0J21vcmUtdGhhbicgOiAnQSBraXbDoWxhc3p0w6FzIG5lbSBsZWhldCB0w7ZiYiAlZCBuYXBuw6FsJyxcclxuXHRcdFx0J2RlZmF1bHQtbW9yZScgOiAnVsOhbGFzc3oga2kgZWd5IGlkxZFzemFrb3QgYW1pIGhvc3N6YWJiIG1pbnQgJWQgbmFwJyxcclxuXHRcdFx0J2RlZmF1bHQtc2luZ2xlJyA6ICdWw6FsYXNzeiBlZ3kgbmFwb3QnLFxyXG5cdFx0XHQnZGVmYXVsdC1sZXNzJyA6ICdWw6FsYXNzeiBraSBlZ3kgaWTFkXN6YWtvdCBhbWkgcsO2dmlkZWJiIG1pbnQgJWQgbmFwJyxcclxuXHRcdFx0J2RlZmF1bHQtcmFuZ2UnIDogJ1bDoWxhc3N6IGtpIGVneSAlZCAtICVkIG5hcCBob3NzesO6IGlkxZFzemFrb3QnLFxyXG5cdFx0XHQnZGVmYXVsdC1kZWZhdWx0JzogJ1bDoWxhc3N6IGtpIGVneSBpZMWRc3pha290J1xyXG5cdFx0fSxcclxuXHRcdCdpdCc6XHJcblx0XHR7XHJcblx0XHRcdCdzZWxlY3RlZCc6ICdTZWxlemlvbmF0aTonLFxyXG5cdFx0XHQnZGF5JzonR2lvcm5vJyxcclxuXHRcdFx0J2RheXMnOiAnR2lvcm5pJyxcclxuXHRcdFx0J2FwcGx5JzogJ0NoaXVkaScsXHJcblx0XHRcdCd3ZWVrLTEnIDogJ2x1JyxcclxuXHRcdFx0J3dlZWstMicgOiAnbWEnLFxyXG5cdFx0XHQnd2Vlay0zJyA6ICdtZScsXHJcblx0XHRcdCd3ZWVrLTQnIDogJ2dpJyxcclxuXHRcdFx0J3dlZWstNScgOiAndmUnLFxyXG5cdFx0XHQnd2Vlay02JyA6ICdzYScsXHJcblx0XHRcdCd3ZWVrLTcnIDogJ2RvJyxcclxuXHRcdFx0J21vbnRoLW5hbWUnOiBbJ2dlbm5haW8nLCdmZWJicmFpbycsJ21hcnpvJywnYXByaWxlJywnbWFnZ2lvJywnZ2l1Z25vJywnbHVnbGlvJywnYWdvc3RvJywnc2V0dGVtYnJlJywnb3R0b2JyZScsJ25vdmVtYnJlJywnZGljZW1icmUnXSxcclxuXHRcdFx0J3Nob3J0Y3V0cycgOiAnU2NvcmNpYXRvaWUnLFxyXG5cdFx0XHQncGFzdCc6ICdTY29yc28nLFxyXG5cdFx0XHQnZm9sbG93aW5nJzonU3VjY2Vzc2l2bycsXHJcblx0XHRcdCdwcmV2aW91cycgOiAnUHJlY2VkZW50ZScsXHJcblx0XHRcdCdwcmV2LXdlZWsnIDogJ1NldHRpbWFuYScsXHJcblx0XHRcdCdwcmV2LW1vbnRoJyA6ICdNZXNlJyxcclxuXHRcdFx0J3ByZXYteWVhcicgOiAnQW5ubycsXHJcblx0XHRcdCduZXh0JzonUHJvc3NpbW8nLFxyXG5cdFx0XHQnbmV4dC13ZWVrJzonU2V0dGltYW5hJyxcclxuXHRcdFx0J25leHQtbW9udGgnOidNZXNlJyxcclxuXHRcdFx0J25leHQteWVhcic6J0Fubm8nLFxyXG5cdFx0XHQnbGVzcy10aGFuJyA6ICdMXFwnaW50ZXJ2YWxsbyBub24gZGV2XFwnZXNzZXJlIG1hZ2dpb3JlIGRpICVkIGdpb3JuaScsXHJcblx0XHRcdCdtb3JlLXRoYW4nIDogJ0xcXCdpbnRlcnZhbGxvIG5vbiBkZXZcXCdlc3NlcmUgbWlub3JlIGRpICVkIGdpb3JuaScsXHJcblx0XHRcdCdkZWZhdWx0LW1vcmUnIDogJ1NlbGV6aW9uYSB1biBpbnRlcnZhbGxvIG1hZ2dpb3JlIGRpICVkIGdpb3JuaScsXHJcblx0XHRcdCdkZWZhdWx0LXNpbmdsZScgOiAnU2VsZXppb25hIHVuYSBkYXRhJyxcclxuXHRcdFx0J2RlZmF1bHQtbGVzcycgOiAnU2VsZXppb25hIHVuIGludGVydmFsbG8gbWlub3JlIGRpICVkIGdpb3JuaScsXHJcblx0XHRcdCdkZWZhdWx0LXJhbmdlJyA6ICdTZWxlemlvbmEgdW4gaW50ZXJ2YWxsbyBjb21wcmVzbyB0cmEgaSAlZCBlIGkgJWQgZ2lvcm5pJyxcclxuXHRcdFx0J2RlZmF1bHQtZGVmYXVsdCc6ICdTZWxlemlvbmEgdW4gaW50ZXJ2YWxsbyBkaSBkYXRlJ1xyXG5cdFx0fSxcclxuXHRcdCdrbyc6XHJcblx0XHR7XHJcblx0XHRcdCdzZWxlY3RlZCc6ICfquLDqsIQ6JyxcclxuXHRcdFx0J2RheSc6J+ydvCcsXHJcblx0XHRcdCdkYXlzJzogJ+ydvOqwhCcsXHJcblx0XHRcdCdhcHBseSc6ICfri6vquLAnLFxyXG5cdFx0XHQnd2Vlay0xJyA6ICfsm5QnLFxyXG5cdFx0XHQnd2Vlay0yJyA6ICftmZQnLFxyXG5cdFx0XHQnd2Vlay0zJyA6ICfsiJgnLFxyXG5cdFx0XHQnd2Vlay00JyA6ICfrqqknLFxyXG5cdFx0XHQnd2Vlay01JyA6ICfquIgnLFxyXG5cdFx0XHQnd2Vlay02JyA6ICfthqAnLFxyXG5cdFx0XHQnd2Vlay03JyA6ICfsnbwnLFxyXG5cdFx0XHQnd2Vlay1udW1iZXInIDogJ+yjvCcsXHJcblx0XHRcdCdtb250aC1uYW1lJzogWycx7JuUJywnMuyblCcsJzPsm5QnLCc07JuUJywnNeyblCcsJzbsm5QnLCc37JuUJywnOOyblCcsJznsm5QnLCcxMOyblCcsJzEx7JuUJywnMTLsm5QnXSxcclxuXHRcdFx0J3Nob3J0Y3V0cycgOiAn64uo7LaV7YKk65OkJyxcclxuXHRcdFx0J3Bhc3QnOiAn7KeA64KcKOyYpOuKmOq4sOykgCknLFxyXG5cdFx0XHQnZm9sbG93aW5nJzon7J207ZuEKOyYpOuKmOq4sOykgCknLFxyXG5cdFx0XHQncHJldmlvdXMnIDogJ+ydtOyghCcsXHJcblx0XHRcdCdwcmV2LXdlZWsnIDogJzHso7wnLFxyXG5cdFx0XHQncHJldi1tb250aCcgOiAnMeuLrCcsXHJcblx0XHRcdCdwcmV2LXllYXInIDogJzHrhYQnLFxyXG5cdFx0XHQnbmV4dCc6J+uLpOydjCcsXHJcblx0XHRcdCduZXh0LXdlZWsnOicx7KO8JyxcclxuXHRcdFx0J25leHQtbW9udGgnOicx64usJyxcclxuXHRcdFx0J25leHQteWVhcic6JzHrhYQnLFxyXG5cdFx0XHQnbGVzcy10aGFuJyA6ICfrgqDsp5wg67KU7JyE64qUICVkIOydvOuztOuLpCDrp47snYQg7IiYIOyXhuyKteuLiOuLpCcsXHJcblx0XHRcdCdtb3JlLXRoYW4nIDogJ+uCoOynnCDrspTsnITripQgJWQg7J2867O064ukIOyekeydhCDsiJgg7JeG7Iq164uI64ukJyxcclxuXHRcdFx0J2RlZmF1bHQtbW9yZScgOiAn64Kg7KecIOuylOychOulvCAlZCDsnbzrs7Tri6Qg6ri46rKMIOyEoO2Dne2VtCDso7zshLjsmpQnLFxyXG5cdFx0XHQnZGVmYXVsdC1zaW5nbGUnIDogJ+uCoOynnOulvCDshKDtg53tlbQg7KO87IS47JqUJyxcclxuXHRcdFx0J2RlZmF1bHQtbGVzcycgOiAnJWQg7J2867O064ukIOyekeydgCDrgqDsp5zrpbwg7ISg7YOd7ZW0IOyjvOyEuOyalCcsXHJcblx0XHRcdCdkZWZhdWx0LXJhbmdlJyA6ICclZOyZgCAlZCDsnbwg7IKs7J207J2YIOuCoOynnCDrspTsnITrpbwg7ISg7YOd7ZW0IOyjvOyEuOyalCcsXHJcblx0XHRcdCdkZWZhdWx0LWRlZmF1bHQnOiAn64Kg7KecIOuylOychOulvCDshKDtg53tlbQg7KO87IS47JqUJyxcclxuXHRcdFx0J3RpbWUnOiAn7Iuc6rCBJyxcclxuXHRcdFx0J2hvdXInOiAn7IucJyxcclxuXHRcdFx0J21pbnV0ZSc6ICfrtoQnXHJcblx0XHR9LFxyXG5cdFx0J25vJzpcclxuXHRcdHtcclxuXHRcdFx0J3NlbGVjdGVkJzogJ1ZhbGd0OicsXHJcblx0XHRcdCdkYXknOidEYWcnLFxyXG5cdFx0XHQnZGF5cyc6ICdEYWdlcicsXHJcblx0XHRcdCdhcHBseSc6ICdMdWtrJyxcclxuXHRcdFx0J3dlZWstMScgOiAnbWEnLFxyXG5cdFx0XHQnd2Vlay0yJyA6ICd0aScsXHJcblx0XHRcdCd3ZWVrLTMnIDogJ29uJyxcclxuXHRcdFx0J3dlZWstNCcgOiAndG8nLFxyXG5cdFx0XHQnd2Vlay01JyA6ICdmcicsXHJcblx0XHRcdCd3ZWVrLTYnIDogJ2zDuCcsXHJcblx0XHRcdCd3ZWVrLTcnIDogJ3PDuCcsXHJcblx0XHRcdCdtb250aC1uYW1lJzogWydqYW51YXInLCdmZWJydWFyJywnbWFycycsJ2FwcmlsJywnbWFpJywnanVuaScsJ2p1bGknLCdhdWd1c3QnLCdzZXB0ZW1iZXInLCdva3RvYmVyJywnbm92ZW1iZXInLCdkZXNlbWJlciddLFxyXG5cdFx0XHQnc2hvcnRjdXRzJyA6ICdTbmFydmVpZXInLFxyXG5cdFx0XHQnY3VzdG9tLXZhbHVlcyc6ICdFZ2VuZGVmaW5lcnRlIFZlcmRpZXInLFxyXG5cdFx0XHQncGFzdCc6ICdPdmVyJywgLy8gTm90IHF1aXRlIHN1cmUgYWJvdXQgdGhlIGNvbnRleHQgb2YgdGhpcyBvbmVcclxuXHRcdFx0J2ZvbGxvd2luZyc6J0bDuGxnZXInLFxyXG5cdFx0XHQncHJldmlvdXMnIDogJ0ZvcnJpZ2UnLFxyXG5cdFx0XHQncHJldi13ZWVrJyA6ICdVa2UnLFxyXG5cdFx0XHQncHJldi1tb250aCcgOiAnTcOlbmVkJyxcclxuXHRcdFx0J3ByZXYteWVhcicgOiAnw4VyJyxcclxuXHRcdFx0J25leHQnOidOZXN0ZScsXHJcblx0XHRcdCduZXh0LXdlZWsnOidVa2UnLFxyXG5cdFx0XHQnbmV4dC1tb250aCc6J03DpW5lZCcsXHJcblx0XHRcdCduZXh0LXllYXInOifDhXInLFxyXG5cdFx0XHQnbGVzcy10aGFuJyA6ICdEYXRvcGVyaW9kZW4gc2thbCBpa2tqZSB2w6ZyZSBsZW5ncmUgZW5uICVkIGRhZ2VyJyxcclxuXHRcdFx0J21vcmUtdGhhbicgOiAnRGF0b3BlcmlvZGVuIHNrYWwgaWtramUgdsOmcmUga29ydGVyZSBlbm4gJWQgZGFnZXInLFxyXG5cdFx0XHQnZGVmYXVsdC1tb3JlJyA6ICdWZW5ubGlnc3QgdmVsZyBlaW4gZGF0b3BlcmlvZGUgbGVuZ3JlIGVubiAlZCBkYWdlcicsXHJcblx0XHRcdCdkZWZhdWx0LXNpbmdsZScgOiAnVmVubmxpZ3N0IHZlbGcgZWluIGRhdG8nLFxyXG5cdFx0XHQnZGVmYXVsdC1sZXNzJyA6ICdWZW5ubGlnc3QgdmVsZyBlaW4gZGF0b3BlcmlvZGUgbWluZHJlIGVubiAlZCBkYWdlcicsXHJcblx0XHRcdCdkZWZhdWx0LXJhbmdlJyA6ICdWZW5ubGlnc3QgdmVsZyBlaW4gZGF0b3BlcmlvZGUgbWVsbG9tICVkIG9nICVkIGRhZ2VyJyxcclxuXHRcdFx0J2RlZmF1bHQtZGVmYXVsdCc6ICdWZW5ubGlnc3QgdmVsZyBlaW4gZGF0b3BlcmlvZGUnLFxyXG5cdFx0XHQndGltZSc6J1RpZCcsXHJcblx0XHRcdCdob3VyJzonVGltZScsXHJcblx0XHRcdCdtaW51dGUnOidNaW51dHRlcidcclxuXHRcdH0sXHJcblx0XHQnbmwnOlxyXG5cdFx0e1xyXG5cdFx0XHQnc2VsZWN0ZWQnOiAnR2VzZWxlY3RlZXJkOicsXHJcblx0XHRcdCdkYXknOidEYWcnLFxyXG5cdFx0XHQnZGF5cyc6ICdEYWdlbicsXHJcblx0XHRcdCdhcHBseSc6ICdPaycsXHJcblx0XHRcdCd3ZWVrLTEnIDogJ21hJyxcclxuXHRcdFx0J3dlZWstMicgOiAnZGknLFxyXG5cdFx0XHQnd2Vlay0zJyA6ICd3bycsXHJcblx0XHRcdCd3ZWVrLTQnIDogJ2RvJyxcclxuXHRcdFx0J3dlZWstNScgOiAndnInLFxyXG5cdFx0XHQnd2Vlay02JyA6ICd6YScsXHJcblx0XHRcdCd3ZWVrLTcnIDogJ3pvJyxcclxuXHRcdFx0J21vbnRoLW5hbWUnOiBbJ2phbnVhcmknLCdmZWJydWFyaScsJ21hYXJ0JywnYXByaWwnLCdtZWknLCdqdW5pJywnanVsaScsJ2F1Z3VzdHVzJywnc2VwdGVtYmVyJywnb2t0b2JlcicsJ25vdmVtYmVyJywnZGVjZW1iZXInXSxcclxuXHRcdFx0J3Nob3J0Y3V0cycgOiAnU25lbGtvcHBlbGluZ2VuJyxcclxuXHRcdFx0J2N1c3RvbS12YWx1ZXMnOiAnQWFuZ2VwYXN0ZSB3YWFyZGVuJyxcclxuXHRcdFx0J3Bhc3QnOiAnVmVybGVkZW4nLFxyXG5cdFx0XHQnZm9sbG93aW5nJzonS29tZW5kJyxcclxuXHRcdFx0J3ByZXZpb3VzJyA6ICdWb3JpZ2UnLFxyXG5cdFx0XHQncHJldi13ZWVrJyA6ICdXZWVrJyxcclxuXHRcdFx0J3ByZXYtbW9udGgnIDogJ01hYW5kJyxcclxuXHRcdFx0J3ByZXYteWVhcicgOiAnSmFhcicsXHJcblx0XHRcdCduZXh0JzonVm9sZ2VuZGUnLFxyXG5cdFx0XHQnbmV4dC13ZWVrJzonV2VlaycsXHJcblx0XHRcdCduZXh0LW1vbnRoJzonTWFhbmQnLFxyXG5cdFx0XHQnbmV4dC15ZWFyJzonSmFhcicsXHJcblx0XHRcdCdsZXNzLXRoYW4nIDogJ0ludGVydmFsIG1vZXQgbGFuZ2VyIGRhbiAlZCBkYWdlbiB6aWpuJyxcclxuXHRcdFx0J21vcmUtdGhhbicgOiAnSW50ZXJ2YWwgbWFnIG5pZXQgbWluZGVyIGRhbiAlZCBkYWdlbiB6aWpuJyxcclxuXHRcdFx0J2RlZmF1bHQtbW9yZScgOiAnU2VsZWN0ZWVyIGVlbiBpbnRlcnZhbCBsYW5nZXIgZGFuICVkYWdlbicsXHJcblx0XHRcdCdkZWZhdWx0LXNpbmdsZScgOiAnU2VsZWN0ZWVyIGVlbiBkYXR1bScsXHJcblx0XHRcdCdkZWZhdWx0LWxlc3MnIDogJ1NlbGVjdGVlciBlZW4gaW50ZXJ2YWwgbWluZGVyIGRhbiAlZCBkYWdlbicsXHJcblx0XHRcdCdkZWZhdWx0LXJhbmdlJyA6ICdTZWxlY3RlZXIgZWVuIGludGVydmFsIHR1c3NlbiAlZCBlbiAlZCBkYWdlbicsXHJcblx0XHRcdCdkZWZhdWx0LWRlZmF1bHQnOiAnU2VsZWN0ZWVyIGVlbiBpbnRlcnZhbCcsXHJcblx0XHRcdCd0aW1lJzonVGlqZCcsXHJcblx0XHRcdCdob3VyJzonVXVyJyxcclxuXHRcdFx0J21pbnV0ZSc6J01pbnV1dCdcclxuXHRcdH0sXHJcblx0XHQncnUnOlxyXG5cdFx0e1xyXG5cdFx0XHQnc2VsZWN0ZWQnOiAn0JLRi9Cx0YDQsNC90L46JyxcclxuXHRcdFx0J2RheSc6ICfQlNC10L3RjCcsXHJcblx0XHRcdCdkYXlzJzogJ9CU0L3QtdC5JyxcclxuXHRcdFx0J2FwcGx5JzogJ9Cf0YDQuNC80LXQvdC40YLRjCcsXHJcblx0XHRcdCd3ZWVrLTEnOiAn0L/QvScsXHJcblx0XHRcdCd3ZWVrLTInOiAn0LLRgicsXHJcblx0XHRcdCd3ZWVrLTMnOiAn0YHRgCcsXHJcblx0XHRcdCd3ZWVrLTQnOiAn0YfRgicsXHJcblx0XHRcdCd3ZWVrLTUnOiAn0L/RgicsXHJcblx0XHRcdCd3ZWVrLTYnOiAn0YHQsScsXHJcblx0XHRcdCd3ZWVrLTcnOiAn0LLRgScsXHJcblx0XHRcdCdtb250aC1uYW1lJzogWyfRj9C90LLQsNGA0YwnLCfRhNC10LLRgNCw0LvRjCcsJ9C80LDRgNGCJywn0LDQv9GA0LXQu9GMJywn0LzQsNC5Jywn0LjRjtC90YwnLCfQuNGO0LvRjCcsJ9Cw0LLQs9GD0YHRgicsJ9GB0LXQvdGC0Y/QsdGA0YwnLCfQvtC60YLRj9Cx0YDRjCcsJ9C90L7Rj9Cx0YDRjCcsJ9C00LXQutCw0LHRgNGMJ10sXHJcblx0XHRcdCdzaG9ydGN1dHMnOiAn0JHRi9GB0YLRgNGL0Lkg0LLRi9Cx0L7RgCcsXHJcblx0XHRcdCdjdXN0b20tdmFsdWVzJzogJ9Cf0L7Qu9GM0LfQvtCy0LDRgtC10LvRjNGB0LrQuNC1INC30L3QsNGH0LXQvdC40Y8nLFxyXG5cdFx0XHQncGFzdCc6ICfQn9GA0L7RiNC10LTRiNC40LUnLFxyXG5cdFx0XHQnZm9sbG93aW5nJzogJ9Ch0LvQtdC00YPRjtGJ0LjQtScsXHJcblx0XHRcdCdwcmV2aW91cyc6ICcmbmJzcDsmbmJzcDsmbmJzcDsnLFxyXG5cdFx0XHQncHJldi13ZWVrJzogJ9Cd0LXQtNC10LvRjycsXHJcblx0XHRcdCdwcmV2LW1vbnRoJzogJ9Cc0LXRgdGP0YYnLFxyXG5cdFx0XHQncHJldi15ZWFyJzogJ9CT0L7QtCcsXHJcblx0XHRcdCduZXh0JzogJyZuYnNwOyZuYnNwOyZuYnNwOycsXHJcblx0XHRcdCduZXh0LXdlZWsnOiAn0J3QtdC00LXQu9GPJyxcclxuXHRcdFx0J25leHQtbW9udGgnOiAn0JzQtdGB0Y/RhicsXHJcblx0XHRcdCduZXh0LXllYXInOiAn0JPQvtC0JyxcclxuXHRcdFx0J2xlc3MtdGhhbic6ICfQlNC40LDQv9Cw0LfQvtC9INC90LUg0LzQvtC20LXRgiDQsdGL0YLRjCDQsdC+0LvRjNGI0LUgJWQg0LTQvdC10LknLFxyXG5cdFx0XHQnbW9yZS10aGFuJzogJ9CU0LjQsNC/0LDQt9C+0L0g0L3QtSDQvNC+0LbQtdGCINCx0YvRgtGMINC80LXQvdGM0YjQtSAlZCDQtNC90LXQuScsXHJcblx0XHRcdCdkZWZhdWx0LW1vcmUnOiAn0J/QvtC20LDQu9GD0LnRgdGC0LAg0LLRi9Cx0LXRgNC40YLQtSDQtNC40LDQv9Cw0LfQvtC9INCx0L7Qu9GM0YjQtSAlZCDQtNC90LXQuScsXHJcblx0XHRcdCdkZWZhdWx0LXNpbmdsZSc6ICfQn9C+0LbQsNC70YPQudGB0YLQsCDQstGL0LHQtdGA0LjRgtC1INC00LDRgtGDJyxcclxuXHRcdFx0J2RlZmF1bHQtbGVzcyc6ICfQn9C+0LbQsNC70YPQudGB0YLQsCDQstGL0LHQtdGA0LjRgtC1INC00LjQsNC/0LDQt9C+0L0g0LzQtdC90YzRiNC1ICVkINC00L3QtdC5JyxcclxuXHRcdFx0J2RlZmF1bHQtcmFuZ2UnOiAn0J/QvtC20LDQu9GD0LnRgdGC0LAg0LLRi9Cx0LXRgNC40YLQtSDQtNC40LDQv9Cw0LfQvtC9INC80LXQttC00YMgJWQg0LggJWQg0LTQvdGP0LzQuCcsXHJcblx0XHRcdCdkZWZhdWx0LWRlZmF1bHQnOiAn0J/QvtC20LDQu9GD0LnRgdGC0LAg0LLRi9Cx0LXRgNC40YLQtSDQtNC40LDQv9Cw0LfQvtC9JyxcclxuXHRcdFx0J3RpbWUnOifQktGA0LXQvNGPJyxcclxuXHRcdFx0J2hvdXInOifQp9Cw0YHRiycsXHJcblx0XHRcdCdtaW51dGUnOifQnNC40L3Rg9GC0YsnXHJcblx0XHR9LFxyXG5cdFx0J3BsJzpcclxuXHRcdHtcclxuXHRcdFx0J3NlbGVjdGVkJzogJ1d5YnJhbnk6JyxcclxuXHRcdFx0J2RheSc6J0R6aWXFhCcsXHJcblx0XHRcdCdkYXlzJzogJ0RuaScsXHJcblx0XHRcdCdhcHBseSc6ICdaYW1rbmlqJyxcclxuXHRcdFx0J3dlZWstMScgOiAncG9uJyxcclxuXHRcdFx0J3dlZWstMicgOiAnd3QnLFxyXG5cdFx0XHQnd2Vlay0zJyA6ICfFm3InLFxyXG5cdFx0XHQnd2Vlay00JyA6ICdjencnLFxyXG5cdFx0XHQnd2Vlay01JyA6ICdwdCcsXHJcblx0XHRcdCd3ZWVrLTYnIDogJ3NvJyxcclxuXHRcdFx0J3dlZWstNycgOiAnbmQnLFxyXG5cdFx0XHQnbW9udGgtbmFtZSc6IFsnc3R5Y3plxYQnLCdsdXR5JywnbWFyemVjJywna3dpZWNpZcWEJywnbWFqJywnY3plcndpZWMnLCdsaXBpZWMnLCdzaWVycGllxYQnLCd3cnplc2llxYQnLCdwYcW6ZHppZXJuaWsnLCdsaXN0b3BhZCcsJ2dydWR6aWXFhCddLFxyXG5cdFx0XHQnc2hvcnRjdXRzJyA6ICdTa3LDs3R5JyxcclxuXHRcdFx0J2N1c3RvbS12YWx1ZXMnOiAnTmllc3RhbmRhcmRvd2Ugd2FydG/Fm2NpJyxcclxuXHRcdFx0J3Bhc3QnOiAnUHJ6ZXN6xYJlJyxcclxuXHRcdFx0J2ZvbGxvd2luZyc6J05hc3TEmXBuZScsXHJcblx0XHRcdCdwcmV2aW91cycgOiAnUG9wcnplZG5pZScsXHJcblx0XHRcdCdwcmV2LXdlZWsnIDogJ3R5ZHppZcWEJyxcclxuXHRcdFx0J3ByZXYtbW9udGgnIDogJ21pZXNpxIVjJyxcclxuXHRcdFx0J3ByZXYteWVhcicgOiAncm9rJyxcclxuXHRcdFx0J25leHQnOidOYXN0xJlwbnknLFxyXG5cdFx0XHQnbmV4dC13ZWVrJzondHlkemllxYQnLFxyXG5cdFx0XHQnbmV4dC1tb250aCc6J21pZXNpxIVjJyxcclxuXHRcdFx0J25leHQteWVhcic6J3JvaycsXHJcblx0XHRcdCdsZXNzLXRoYW4nIDogJ09rcmVzIG5pZSBwb3dpbmllbiBiecSHIGTFgnXFvHN6eSBuacW8ICVkIGRuaScsXHJcblx0XHRcdCdtb3JlLXRoYW4nIDogJ09rcmVzIG5pZSBwb3dpbmllbiBiecSHIGtyw7N0c3p5IG5pxbwgICVkIG5pJyxcclxuXHRcdFx0J2RlZmF1bHQtbW9yZScgOiAnV3liaWVyeiBva3JlcyBkxYJ1xbxzenkgbmnFvCAlZCBkbmknLFxyXG5cdFx0XHQnZGVmYXVsdC1zaW5nbGUnIDogJ1d5YmllcnogZGF0xJknLFxyXG5cdFx0XHQnZGVmYXVsdC1sZXNzJyA6ICdXeWJpZXJ6IG9rcmVzIGtyw7N0c3p5IG5pxbwgJWQgZG5pJyxcclxuXHRcdFx0J2RlZmF1bHQtcmFuZ2UnIDogJ1d5Ymllcnogb2tyZXMgdHJ3YWrEhWN5IG9kICVkIGRvICVkIGRuaScsXHJcblx0XHRcdCdkZWZhdWx0LWRlZmF1bHQnOiAnV3liaWVyeiBva3JlcycsXHJcblx0XHRcdCd0aW1lJzonQ3phcycsXHJcblx0XHRcdCdob3VyJzonR29kemluYScsXHJcblx0XHRcdCdtaW51dGUnOidNaW51dGEnXHJcblx0XHR9LFxyXG5cdFx0J3NlJzpcclxuXHRcdHtcclxuXHRcdFx0J3NlbGVjdGVkJzogJ1ZhbGQ6JyxcclxuXHRcdFx0J2RheSc6J2RhZycsXHJcblx0XHRcdCdkYXlzJzogJ2RhZ2FyJyxcclxuXHRcdFx0J2FwcGx5JzogJ2dvZGvDpG5uJyxcclxuXHRcdFx0J3dlZWstMScgOiAnbWEnLFxyXG5cdFx0XHQnd2Vlay0yJyA6ICd0aScsXHJcblx0XHRcdCd3ZWVrLTMnIDogJ29uJyxcclxuXHRcdFx0J3dlZWstNCcgOiAndG8nLFxyXG5cdFx0XHQnd2Vlay01JyA6ICdmcicsXHJcblx0XHRcdCd3ZWVrLTYnIDogJ2zDticsXHJcblx0XHRcdCd3ZWVrLTcnIDogJ3PDticsXHJcblx0XHRcdCdtb250aC1uYW1lJzogWydqYW51YXJpJywnZmVicnVhcmknLCdtYXJzJywnYXByaWwnLCdtYWonLCdqdW5pJywnanVsaScsJ2F1Z3VzdGknLCdzZXB0ZW1iZXInLCdva3RvYmVyJywnbm92ZW1iZXInLCdkZWNlbWJlciddLFxyXG5cdFx0XHQnc2hvcnRjdXRzJyA6ICdnZW52w6RnYXInLFxyXG5cdFx0XHQnY3VzdG9tLXZhbHVlcyc6ICdBbnBhc3NhZGUgdsOkcmRlbicsXHJcblx0XHRcdCdwYXN0JzogJ8O2dmVyJyxcclxuXHRcdFx0J2ZvbGxvd2luZyc6J2bDtmxqYW5kZScsXHJcblx0XHRcdCdwcmV2aW91cycgOiAnZsO2cnJhJyxcclxuXHRcdFx0J3ByZXYtd2VlaycgOiAndmVja2EnLFxyXG5cdFx0XHQncHJldi1tb250aCcgOiAnbcOlbmFkJyxcclxuXHRcdFx0J3ByZXYteWVhcicgOiAnw6VyJyxcclxuXHRcdFx0J25leHQnOiduw6RzdGEnLFxyXG5cdFx0XHQnbmV4dC13ZWVrJzondmVja2EnLFxyXG5cdFx0XHQnbmV4dC1tb250aCc6J23DpW5lZCcsXHJcblx0XHRcdCduZXh0LXllYXInOifDpXInLFxyXG5cdFx0XHQnbGVzcy10aGFuJyA6ICdEYXR1bWludGVydmFsbCBiw7ZyIGludGUgdmFyYSBtaW5kcmUgw6RuICVkIGRhZ2FyJyxcclxuXHRcdFx0J21vcmUtdGhhbicgOiAnRGF0dW1pbnRlcnZhbGwgYsO2ciBpbnRlIHZhcmEgbWVyIMOkbiAlZCBkYWdhcicsXHJcblx0XHRcdCdkZWZhdWx0LW1vcmUnIDogJ1bDpGxqIGV0dCBkYXR1bWludGVydmFsbCBsw6RuZ3JlIMOkbiAlZCBkYWdhcicsXHJcblx0XHRcdCdkZWZhdWx0LXNpbmdsZScgOiAnVsOkbGogZXR0IGRhdHVtJyxcclxuXHRcdFx0J2RlZmF1bHQtbGVzcycgOiAnVsOkbGogZXR0IGRhdHVtaW50ZXJ2YWxsIG1pbmRyZSDDpG4gJWQgZGFnYXInLFxyXG5cdFx0XHQnZGVmYXVsdC1yYW5nZScgOiAnVsOkbGogZXR0IGRhdHVtaW50ZXJ2YWxsIG1lbGxhbiAlZCBvY2ggJWQgZGFnYXInLFxyXG5cdFx0XHQnZGVmYXVsdC1kZWZhdWx0JzogJ1bDpGxqIGV0dCBkYXR1bWludGVydmFsbCcsXHJcblx0XHRcdCd0aW1lJzondGlkJyxcclxuXHRcdFx0J2hvdXInOid0aW1tZScsXHJcblx0XHRcdCdtaW51dGUnOidtaW51dCdcclxuXHRcdH0sXHJcblx0XHQncHQnOiAgLy9Qb3J0dWd1ZXNlIChFdXJvcGVhbilcclxuXHRcdHtcclxuXHRcdFx0J3NlbGVjdGVkJzogJ1NlbGVjaW9uYWRvOicsXHJcblx0XHRcdCdkYXknOidEaWEnLFxyXG5cdFx0XHQnZGF5cyc6ICdEaWFzJyxcclxuXHRcdFx0J2FwcGx5JzogJ0ZlY2hhcicsXHJcblx0XHRcdCd3ZWVrLTEnIDogJ3NlZycsXHJcblx0XHRcdCd3ZWVrLTInIDogJ3RlcicsXHJcblx0XHRcdCd3ZWVrLTMnIDogJ3F1YScsXHJcblx0XHRcdCd3ZWVrLTQnIDogJ3F1aScsXHJcblx0XHRcdCd3ZWVrLTUnIDogJ3NleCcsXHJcblx0XHRcdCd3ZWVrLTYnIDogJ3NhYicsXHJcblx0XHRcdCd3ZWVrLTcnIDogJ2RvbScsXHJcblx0XHRcdCd3ZWVrLW51bWJlcic6ICdOJyxcclxuXHRcdFx0J21vbnRoLW5hbWUnOiBbJ2phbmVpcm8nLCdmZXZlcmVpcm8nLCdtYXLDp28nLCdhYnJpbCcsJ21haW8nLCdqdW5obycsJ2p1bGhvJywnYWdvc3RvJywnc2V0ZW1icm8nLCdvdXR1YnJvJywnbm92ZW1icm8nLCdkZXplbWJybyddLFxyXG5cdFx0XHQnc2hvcnRjdXRzJyA6ICdBdGFsaG9zJyxcclxuXHRcdFx0J2N1c3RvbS12YWx1ZXMnOiAnVmFsb3JlcyBQZXJzb25hbGl6YWRvcycsXHJcblx0XHRcdCdwYXN0JzogJ1Bhc3NhZG8nLFxyXG5cdFx0XHQnZm9sbG93aW5nJzonU2VndWludGUnLFxyXG5cdFx0XHQncHJldmlvdXMnIDogJ0FudGVyaW9yJyxcclxuXHRcdFx0J3ByZXYtd2VlaycgOiAnU2VtYW5hJyxcclxuXHRcdFx0J3ByZXYtbW9udGgnIDogJ03DqnMnLFxyXG5cdFx0XHQncHJldi15ZWFyJyA6ICdBbm8nLFxyXG5cdFx0XHQnbmV4dCc6J1Byw7N4aW1vJyxcclxuXHRcdFx0J25leHQtd2Vlayc6J1Byw7N4aW1hIFNlbWFuYScsXHJcblx0XHRcdCduZXh0LW1vbnRoJzonUHLDs3hpbW8gTcOqcycsXHJcblx0XHRcdCduZXh0LXllYXInOidQcsOzeGltbyBBbm8nLFxyXG5cdFx0XHQnbGVzcy10aGFuJyA6ICdPIHBlcsOtb2RvIHNlbGVjaW9uYWRvIG7Do28gZGV2ZSBzZXIgbWFpb3IgcXVlICVkIGRpYXMnLFxyXG5cdFx0XHQnbW9yZS10aGFuJyA6ICdPIHBlcsOtb2RvIHNlbGVjaW9uYWRvIG7Do28gZGV2ZSBzZXIgbWVub3IgcXVlICVkIGRpYXMnLFxyXG5cdFx0XHQnZGVmYXVsdC1tb3JlJyA6ICdTZWxlY2lvbmUgdW0gcGVyw61vZG8gc3VwZXJpb3IgYSAlZCBkaWFzJyxcclxuXHRcdFx0J2RlZmF1bHQtc2luZ2xlJyA6ICdTZWxlY2lvbmUgdW1hIGRhdGEnLFxyXG5cdFx0XHQnZGVmYXVsdC1sZXNzJyA6ICdTZWxlY2lvbmUgdW0gcGVyw61vZG8gaW5mZXJpb3IgYSAlZCBkaWFzJyxcclxuXHRcdFx0J2RlZmF1bHQtcmFuZ2UnIDogJ1NlbGVjaW9uZSB1bSBwZXLDrW9kbyBkZSAlZCBhICVkIGRpYXMnLFxyXG5cdFx0XHQnZGVmYXVsdC1kZWZhdWx0JzogJ1NlbGVjaW9uZSB1bSBwZXLDrW9kbycsXHJcblx0XHRcdCd0aW1lJzonVGVtcG8nLFxyXG5cdFx0XHQnaG91cic6J0hvcmEnLFxyXG5cdFx0XHQnbWludXRlJzonTWludXRvJ1xyXG5cdFx0fSxcclxuXHRcdCd0Yyc6ICAvLyB0cmFkaXRpb25hbCBjaGluZXNlXHJcblx0XHR7XHJcblx0XHRcdCdzZWxlY3RlZCc6ICflt7Lpgbjmk4c6JyxcclxuXHRcdFx0J2RheSc6J+WkqScsXHJcblx0XHRcdCdkYXlzJzogJ+WkqScsXHJcblx0XHRcdCdhcHBseSc6ICfnorrlrponLFxyXG5cdFx0XHQnd2Vlay0xJyA6ICfkuIAnLFxyXG5cdFx0XHQnd2Vlay0yJyA6ICfkuownLFxyXG5cdFx0XHQnd2Vlay0zJyA6ICfkuIknLFxyXG5cdFx0XHQnd2Vlay00JyA6ICflm5snLFxyXG5cdFx0XHQnd2Vlay01JyA6ICfkupQnLFxyXG5cdFx0XHQnd2Vlay02JyA6ICflha0nLFxyXG5cdFx0XHQnd2Vlay03JyA6ICfml6UnLFxyXG5cdFx0XHQnd2Vlay1udW1iZXInOiAn5ZGoJyxcclxuXHRcdFx0J21vbnRoLW5hbWUnOiBbJ+S4gOaciCcsJ+S6jOaciCcsJ+S4ieaciCcsJ+Wbm+aciCcsJ+S6lOaciCcsJ+WFreaciCcsJ+S4g+aciCcsJ+WFq+aciCcsJ+S5neaciCcsJ+WNgeaciCcsJ+WNgeS4gOaciCcsJ+WNgeS6jOaciCddLFxyXG5cdFx0XHQnc2hvcnRjdXRzJyA6ICflv6vpgJ/pgbjmk4cnLFxyXG5cdFx0XHQncGFzdCc6ICfpgY7ljrsnLFxyXG5cdFx0XHQnZm9sbG93aW5nJzon5bCH5L6GJyxcclxuXHRcdFx0J3ByZXZpb3VzJyA6ICcmbmJzcDsmbmJzcDsmbmJzcDsnLFxyXG5cdFx0XHQncHJldi13ZWVrJyA6ICfkuIrpgLEnLFxyXG5cdFx0XHQncHJldi1tb250aCcgOiAn5LiK5YCL5pyIJyxcclxuXHRcdFx0J3ByZXYteWVhcicgOiAn5Y675bm0JyxcclxuXHRcdFx0J25leHQnOiAnJm5ic3A7Jm5ic3A7Jm5ic3A7JyxcclxuXHRcdFx0J25leHQtd2Vlayc6J+S4i+WRqCcsXHJcblx0XHRcdCduZXh0LW1vbnRoJzon5LiL5YCL5pyIJyxcclxuXHRcdFx0J25leHQteWVhcic6J+aYjuW5tCcsXHJcblx0XHRcdCdsZXNzLXRoYW4nIDogJ+aJgOmBuOaXpeacn+evhOWcjeS4jeiDveWkp+aWvCVk5aSpJyxcclxuXHRcdFx0J21vcmUtdGhhbicgOiAn5omA6YG45pel5pyf56+E5ZyN5LiN6IO95bCP5pa8JWTlpKknLFxyXG5cdFx0XHQnZGVmYXVsdC1tb3JlJyA6ICfoq4vpgbjmk4flpKfmlrwlZOWkqeeahOaXpeacn+evhOWcjScsXHJcblx0XHRcdCdkZWZhdWx0LWxlc3MnIDogJ+iri+mBuOaTh+Wwj+aWvCVk5aSp55qE5pel5pyf56+E5ZyNJyxcclxuXHRcdFx0J2RlZmF1bHQtcmFuZ2UnIDogJ+iri+mBuOaThyVk5aSp5YiwJWTlpKnnmoTml6XmnJ/nr4TlnI0nLFxyXG5cdFx0XHQnZGVmYXVsdC1zaW5nbGUnOifoq4vpgbjmk4fkuIDlgIvml6XmnJ8nLFxyXG5cdFx0XHQnZGVmYXVsdC1kZWZhdWx0JzogJ+iri+mBuOaTh+S4gOWAi+aXpeacn+evhOWcjScsXHJcblx0XHRcdCd0aW1lJzogJ+aXpeacnycsXHJcblx0XHRcdCdob3VyJzogJ+Wwj+aZgicsXHJcblx0XHRcdCdtaW51dGUnOiAn5YiG6ZCYJ1xyXG5cdFx0fSxcclxuXHRcdCdqYSc6XHJcbiAgICAgICAgXHR7XHJcbiAgICAgICAgICAgIFx0XHQnc2VsZWN0ZWQnOiAn6YG45oqe44GX44G+44GX44GfOicsXHJcblx0ICAgICAgICAgICAgXHQnZGF5Jzon5pelJyxcclxuXHQgICAgICAgICAgICBcdCdkYXlzJzogJ+aXpeOAhScsXHJcblx0ICAgICAgICAgICAgXHQnYXBwbHknOiAn6ZaJ44GY44KLJyxcclxuXHQgICAgICAgICAgICBcdCd3ZWVrLTEnIDogJ+aXpScsXHJcblx0ICAgICAgICAgICAgXHQnd2Vlay0yJyA6ICfmnIgnLFxyXG5cdCAgICAgICAgICAgIFx0J3dlZWstMycgOiAn54GrJyxcclxuXHQgICAgICAgICAgICBcdCd3ZWVrLTQnIDogJ+awtCcsXHJcblx0ICAgICAgICAgICAgXHQnd2Vlay01JyA6ICfmnKgnLFxyXG5cdCAgICAgICAgICAgIFx0J3dlZWstNicgOiAn6YeRJyxcclxuXHQgICAgICAgICAgICBcdCd3ZWVrLTcnIDogJ+WcnycsXHJcblx0ICAgICAgICAgICAgXHQnbW9udGgtbmFtZSc6IFsnMeaciCcsICcy5pyIJywgJzPmnIgnLCAnNOaciCcsICc15pyIJywgJzbmnIgnLCAnN+aciCcsICc45pyIJywgJznmnIgnLCAnMTDmnIgnLCAnMTHmnIgnLCAnMTLmnIgnXSxcclxuXHQgICAgICAgICAgICBcdCdzaG9ydGN1dHMnIDogJ+OCr+OCpOODg+OCr+mBuOaKnicsXHJcblx0ICAgICAgICAgICAgXHQncGFzdCc6ICfpgY7ljrsnLFxyXG5cdCAgICAgICAgICAgIFx0J2ZvbGxvd2luZyc6J+WwhuadpScsXHJcblx0ICAgICAgICAgICAgXHQncHJldmlvdXMnIDogJyZuYnNwOyZuYnNwOyZuYnNwOycsXHJcblx0ICAgICAgICAgICAgXHQncHJldi13ZWVrJyA6ICflhYjpgLHjgIEnLFxyXG5cdCAgICAgICAgICAgIFx0J3ByZXYtbW9udGgnIDogJ+WFiOaciCcsXHJcblx0ICAgICAgICAgICAgXHQncHJldi15ZWFyJyA6ICfmmKjlubQnLFxyXG5cdCAgICAgICAgICAgIFx0J25leHQnOiAnJm5ic3A7Jm5ic3A7Jm5ic3A7JyxcclxuXHQgICAgICAgICAgICBcdCduZXh0LXdlZWsnOifmnaXpgLEnLFxyXG5cdCAgICAgICAgICAgIFx0J25leHQtbW9udGgnOifmnaXmnIgnLFxyXG5cdCAgICAgICAgICAgIFx0J25leHQteWVhcic6J+adpeW5tCcsXHJcblx0ICAgICAgICAgICAgXHQnbGVzcy10aGFuJyA6ICfml6Xku5jjga7nr4Tlm7Ljga8g77yFZCDml6Xku6XkuIrjgavjgZnjgbnjgY3jgafjga/jgYLjgorjgb7jgZvjgpMnLFxyXG5cdCAgICAgICAgICAgIFx0J21vcmUtdGhhbicgOiAn5pel5LuY44Gu56+E5Zuy44GvIO+8hWQg5pel44KS5LiL5Zue44Gj44Gm44Gv44GE44GR44G+44Gb44KTJyxcclxuXHQgICAgICAgICAgICBcdCdkZWZhdWx0LW1vcmUnIDogJ++8hWQg5pel44KI44KK44KC6ZW344GE5pyf6ZaT44KS6YG45oqe44GX44Gm44GP44Gg44GV44GEJyxcclxuXHQgICAgICAgICAgICBcdCdkZWZhdWx0LWxlc3MnIDogJ++8hWQg5pel5pyq5rqA44Gu5pyf6ZaT44KS6YG45oqe44GX44Gm44GP44Gg44GV44GEJyxcclxuXHQgICAgICAgICAgICBcdCdkZWZhdWx0LXJhbmdlJyA6ICfvvIVkIOOBqO+8hSBk5pel44Gu6ZaT44Gu5pel5LuY56+E5Zuy44KS6YG45oqe44GX44Gm44GP44Gg44GV44GEJyxcclxuXHQgICAgICAgICAgICBcdCdkZWZhdWx0LXNpbmdsZSc6J+aXpeS7mOOCkumBuOaKnuOBl+OBpuOBj+OBoOOBleOBhCcsXHJcblx0ICAgICAgICAgICAgXHQnZGVmYXVsdC1kZWZhdWx0JzogJ+aXpeS7mOevhOWbsuOCkumBuOaKnuOBl+OBpuOBj+OBoOOBleOBhCcsXHJcblx0ICAgICAgICAgICAgXHQndGltZSc6ICfmmYLplpMnLFxyXG5cdCAgICAgICAgICAgIFx0J2hvdXInOiAn5pmC6ZaTJyxcclxuXHQgICAgICAgICAgICBcdCdtaW51dGUnOiAn5YiGJ1xyXG5cdCAgICAgICAgfSxcclxuXHRcdCdkYSc6XHJcblx0XHR7XHJcblx0XHRcdCdzZWxlY3RlZCc6ICdWYWxndDonLFxyXG5cdFx0XHQnZGF5JzonRGFnJyxcclxuXHRcdFx0J2RheXMnOiAnRGFnZScsXHJcblx0XHRcdCdhcHBseSc6ICdMdWsnLFxyXG5cdFx0XHQnd2Vlay0xJyA6ICdtYScsXHJcblx0XHRcdCd3ZWVrLTInIDogJ3RpJyxcclxuXHRcdFx0J3dlZWstMycgOiAnb24nLFxyXG5cdFx0XHQnd2Vlay00JyA6ICd0bycsXHJcblx0XHRcdCd3ZWVrLTUnIDogJ2ZyJyxcclxuXHRcdFx0J3dlZWstNicgOiAnbMO2JyxcclxuXHRcdFx0J3dlZWstNycgOiAnc8O2JyxcclxuXHRcdFx0J21vbnRoLW5hbWUnOiBbJ2phbnVhcicsJ2ZlYnJ1YXInLCdtYXJ0cycsJ2FwcmlsJywnbWFqJywnanVuaScsJ2p1bGknLCdhdWd1c3QnLCdzZXB0ZW1iZXInLCdva3RvYmVyJywnbm92ZW1iZXInLCdkZWNlbWJlciddLFxyXG5cdFx0XHQnc2hvcnRjdXRzJyA6ICdnZW52ZWplJyxcclxuXHRcdFx0J2N1c3RvbS12YWx1ZXMnOiAnQnJ1Z2VyZGVmaW5lcmVkZSB2w6ZyZGllcicsXHJcblx0XHRcdCdwYXN0JzogJ0ZvcmJpJyxcclxuXHRcdFx0J2ZvbGxvd2luZyc6J0bDuGxnZW5kZScsXHJcblx0XHRcdCdwcmV2aW91cycgOiAnRm9ycmlnZScsXHJcblx0XHRcdCdwcmV2LXdlZWsnIDogJ3VnZScsXHJcblx0XHRcdCdwcmV2LW1vbnRoJyA6ICdtw6VuYWQnLFxyXG5cdFx0XHQncHJldi15ZWFyJyA6ICfDpXInLFxyXG5cdFx0XHQnbmV4dCc6J07DpnN0ZScsXHJcblx0XHRcdCduZXh0LXdlZWsnOidOw6ZzdGUgdWdlJyxcclxuXHRcdFx0J25leHQtbW9udGgnOidOw6ZzdGUgbcOlbmVkJyxcclxuXHRcdFx0J25leHQteWVhcic6J07DpnN0ZSDDpXInLFxyXG5cdFx0XHQnbGVzcy10aGFuJyA6ICdEYXRvIGludGVydmFsIGLDuHIgaWtrZSB2w6ZyZSBtZWQgZW5kICVkIGRhZ2UnLFxyXG5cdFx0XHQnbW9yZS10aGFuJyA6ICdEYXRvIGludGVydmFsIGLDuHIgaWtrZSB2w6ZyZSBtaW5kcmUgZW5kICVkIGRhZ2UnLFxyXG5cdFx0XHQnZGVmYXVsdC1tb3JlJyA6ICdWw6ZsZyBkYXRvaW50ZXJ2YWwgbMOmbmdlcmUgZW5kICVkIGRhZ2UnLFxyXG5cdFx0XHQnZGVmYXVsdC1zaW5nbGUnIDogJ1bDpmxnIGRhdG8nLFxyXG5cdFx0XHQnZGVmYXVsdC1sZXNzJyA6ICdWw6ZsZyBkYXRvaW50ZXJ2YWwgbWluZHJlIGVuZCAlZCBkYWdlJyxcclxuXHRcdFx0J2RlZmF1bHQtcmFuZ2UnIDogJ1bDpmxnIGRhdG9pbnRlcnZhbCBtZWxsZW0gJWQgb2cgJWQgZGFnZScsXHJcblx0XHRcdCdkZWZhdWx0LWRlZmF1bHQnOiAnVsOmbGcgZGF0b2ludGVydmFsJyxcclxuXHRcdFx0J3RpbWUnOid0aWQnLFxyXG5cdFx0XHQnaG91cic6J3RpbWUnLFxyXG5cdFx0XHQnbWludXRlJzonbWludXQnXHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0JC5mbi5kYXRlUmFuZ2VQaWNrZXIgPSBmdW5jdGlvbihvcHQpXHJcblx0e1xyXG5cdFx0aWYgKCFvcHQpIG9wdCA9IHt9O1xyXG5cdFx0b3B0ID0gJC5leHRlbmQodHJ1ZSxcclxuXHRcdHtcclxuXHRcdFx0YXV0b0Nsb3NlOiBmYWxzZSxcclxuXHRcdFx0Zm9ybWF0OiAnWVlZWS1NTS1ERCcsXHJcblx0XHRcdHNlcGFyYXRvcjogJyB0byAnLFxyXG5cdFx0XHRsYW5ndWFnZTogJ2F1dG8nLFxyXG5cdFx0XHRzdGFydE9mV2VlazogJ3N1bmRheScsLy8gb3IgbW9uZGF5XHJcblx0XHRcdGdldFZhbHVlOiBmdW5jdGlvbigpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gJCh0aGlzKS52YWwoKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0c2V0VmFsdWU6IGZ1bmN0aW9uKHMpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZighJCh0aGlzKS5hdHRyKCdyZWFkb25seScpICYmICEkKHRoaXMpLmlzKCc6ZGlzYWJsZWQnKSAmJiBzICE9ICQodGhpcykudmFsKCkpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0JCh0aGlzKS52YWwocyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRzdGFydERhdGU6IGZhbHNlLFxyXG5cdFx0XHRlbmREYXRlOiBmYWxzZSxcclxuXHRcdFx0dGltZToge1xyXG5cdFx0XHRcdGVuYWJsZWQ6IGZhbHNlXHJcblx0XHRcdH0sXHJcblx0XHRcdG1pbkRheXM6IDAsXHJcblx0XHRcdG1heERheXM6IDAsXHJcblx0XHRcdHNob3dTaG9ydGN1dHM6IGZhbHNlLFxyXG5cdFx0XHRzaG9ydGN1dHM6XHJcblx0XHRcdHtcclxuXHRcdFx0XHQvLydwcmV2LWRheXMnOiBbMSwzLDUsN10sXHJcblx0XHRcdFx0Ly8gJ25leHQtZGF5cyc6IFszLDUsN10sXHJcblx0XHRcdFx0Ly8ncHJldicgOiBbJ3dlZWsnLCdtb250aCcsJ3llYXInXSxcclxuXHRcdFx0XHQvLyAnbmV4dCcgOiBbJ3dlZWsnLCdtb250aCcsJ3llYXInXVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRjdXN0b21TaG9ydGN1dHMgOiBbXSxcclxuXHRcdFx0aW5saW5lOmZhbHNlLFxyXG5cdFx0XHRjb250YWluZXI6J2JvZHknLFxyXG5cdFx0XHRhbHdheXNPcGVuOmZhbHNlLFxyXG5cdFx0XHRzaW5nbGVEYXRlOmZhbHNlLFxyXG5cdFx0XHRsb29rQmVoaW5kOiBmYWxzZSxcclxuXHRcdFx0YmF0Y2hNb2RlOiBmYWxzZSxcclxuXHRcdFx0ZHVyYXRpb246IDIwMCxcclxuXHRcdFx0c3RpY2t5TW9udGhzOiBmYWxzZSxcclxuXHRcdFx0ZGF5RGl2QXR0cnM6IFtdLFxyXG5cdFx0XHRkYXlUZEF0dHJzOiBbXSxcclxuXHRcdFx0c2VsZWN0Rm9yd2FyZDogZmFsc2UsXHJcblx0XHRcdHNlbGVjdEJhY2t3YXJkOiBmYWxzZSxcclxuXHRcdFx0YXBwbHlCdG5DbGFzczogJycsXHJcblx0XHRcdHNpbmdsZU1vbnRoOiAnYXV0bycsXHJcblx0XHRcdGhvdmVyaW5nVG9vbHRpcDogZnVuY3Rpb24oZGF5cywgc3RhcnRUaW1lLCBob3ZlcmluZ1RpbWUpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gZGF5cyA+IDEgPyBkYXlzICsgJyAnICsgbGFuZygnZGF5cycpIDogJyc7XHJcblx0XHRcdH0sXHJcblx0XHRcdHNob3dUb3BiYXI6IHRydWUsXHJcblx0XHRcdHN3YXBUaW1lOiBmYWxzZSxcclxuXHRcdFx0c2hvd1dlZWtOdW1iZXJzOiBmYWxzZSxcclxuXHRcdFx0Z2V0V2Vla051bWJlcjogZnVuY3Rpb24oZGF0ZSkgLy9kYXRlIHdpbGwgYmUgdGhlIGZpcnN0IGRheSBvZiBhIHdlZWtcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBtb21lbnQoZGF0ZSkuZm9ybWF0KCd3Jyk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGN1c3RvbU9wZW5BbmltYXRpb246IG51bGwsXHJcblx0XHRcdGN1c3RvbUNsb3NlQW5pbWF0aW9uOiBudWxsLFxyXG4gICAgICAgICAgICBjdXN0b21BcnJvd1ByZXZTeW1ib2w6IG51bGwsXHJcbiAgICAgICAgICAgIGN1c3RvbUFycm93TmV4dFN5bWJvbDogbnVsbFxyXG5cdFx0fSxvcHQpO1xyXG5cclxuXHRcdG9wdC5zdGFydCA9IGZhbHNlO1xyXG5cdFx0b3B0LmVuZCA9IGZhbHNlO1xyXG5cclxuXHRcdG9wdC5zdGFydFdlZWsgPSBmYWxzZTtcclxuXHJcblx0XHQvL2RldGVjdCBhIHRvdWNoIGRldmljZVxyXG5cdFx0b3B0LmlzVG91Y2hEZXZpY2UgPSAnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cgfHwgbmF2aWdhdG9yLm1zTWF4VG91Y2hQb2ludHM7XHJcblxyXG5cdFx0Ly9pZiBpdCBpcyBhIHRvdWNoIGRldmljZSwgaGlkZSBob3ZlcmluZyB0b29sdGlwXHJcblx0XHRpZiAob3B0LmlzVG91Y2hEZXZpY2UpIG9wdC5ob3ZlcmluZ1Rvb2x0aXAgPSBmYWxzZTtcclxuXHJcblx0XHQvL3Nob3cgb25lIG1vbnRoIG9uIG1vYmlsZSBkZXZpY2VzXHJcblx0XHRpZiAob3B0LnNpbmdsZU1vbnRoID09ICdhdXRvJykgb3B0LnNpbmdsZU1vbnRoID0gJCh3aW5kb3cpLndpZHRoKCkgPCA0ODA7XHJcblx0XHRpZiAob3B0LnNpbmdsZU1vbnRoKSBvcHQuc3RpY2t5TW9udGhzID0gZmFsc2U7XHJcblxyXG5cdFx0aWYgKCFvcHQuc2hvd1RvcGJhcikgb3B0LmF1dG9DbG9zZSA9IHRydWU7XHJcblxyXG5cdFx0aWYgKG9wdC5zdGFydERhdGUgJiYgdHlwZW9mIG9wdC5zdGFydERhdGUgPT0gJ3N0cmluZycpIG9wdC5zdGFydERhdGUgPSBtb21lbnQob3B0LnN0YXJ0RGF0ZSxvcHQuZm9ybWF0KS50b0RhdGUoKTtcclxuXHRcdGlmIChvcHQuZW5kRGF0ZSAmJiB0eXBlb2Ygb3B0LmVuZERhdGUgPT0gJ3N0cmluZycpIG9wdC5lbmREYXRlID0gbW9tZW50KG9wdC5lbmREYXRlLG9wdC5mb3JtYXQpLnRvRGF0ZSgpO1xyXG5cclxuXHRcdHZhciBsYW5ncyA9IGdldExhbmd1YWdlcygpO1xyXG5cdFx0dmFyIGJveDtcclxuXHRcdHZhciBpbml0aWF0ZWQgPSBmYWxzZTtcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdHZhciBzZWxmRG9tID0gJChzZWxmKS5nZXQoMCk7XHJcblx0XHR2YXIgZG9tQ2hhbmdlVGltZXI7XHJcblxyXG5cdFx0JCh0aGlzKS51bmJpbmQoJy5kYXRlcGlja2VyJykuYmluZCgnY2xpY2suZGF0ZXBpY2tlcicsZnVuY3Rpb24oZXZ0KVxyXG5cdFx0e1xyXG5cdFx0XHR2YXIgaXNPcGVuID0gYm94LmlzKCc6dmlzaWJsZScpO1xyXG5cdFx0XHRpZighaXNPcGVuKSBvcGVuKG9wdC5kdXJhdGlvbik7XHJcblx0XHR9KS5iaW5kKCdjaGFuZ2UuZGF0ZXBpY2tlcicsIGZ1bmN0aW9uKGV2dClcclxuXHRcdHtcclxuXHRcdFx0Y2hlY2tBbmRTZXREZWZhdWx0VmFsdWUoKTtcclxuXHRcdH0pLmJpbmQoJ2tleXVwLmRhdGVwaWNrZXInLGZ1bmN0aW9uKClcclxuXHRcdHtcclxuXHRcdFx0dHJ5eyBjbGVhclRpbWVvdXQoZG9tQ2hhbmdlVGltZXIpOyB9Y2F0Y2goZSl7fVxyXG5cdFx0XHRkb21DaGFuZ2VUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Y2hlY2tBbmRTZXREZWZhdWx0VmFsdWUoKTtcclxuXHRcdFx0fSwyMDAwKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGluaXRfZGF0ZXBpY2tlci5jYWxsKHRoaXMpO1xyXG5cclxuXHRcdGlmIChvcHQuYWx3YXlzT3BlbilcclxuXHRcdHtcclxuXHRcdFx0b3BlbigwKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBleHBvc2Ugc29tZSBhcGlcclxuXHRcdCQodGhpcykuZGF0YSgnZGF0ZVJhbmdlUGlja2VyJyxcclxuXHRcdHtcclxuXHRcdFx0c2V0U3RhcnQ6IGZ1bmN0aW9uKGQxKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYgKHR5cGVvZiBkMSA9PSAnc3RyaW5nJylcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRkMSA9IG1vbWVudChkMSxvcHQuZm9ybWF0KS50b0RhdGUoKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdG9wdC5lbmQgPSBmYWxzZTtcclxuXHRcdFx0XHRzZXRTaW5nbGVEYXRlKGQxKTtcclxuXHJcblx0XHRcdFx0cmV0dXJuIHRoaXM7XHJcblx0XHRcdH0sXHJcblx0XHRcdHNldEVuZDogZnVuY3Rpb24oZDIsIHNpbGVudClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZhciBzdGFydCA9IG5ldyBEYXRlKCk7XHJcblx0XHRcdFx0c3RhcnQuc2V0VGltZShvcHQuc3RhcnQpO1xyXG5cdFx0XHRcdGlmICh0eXBlb2YgZDIgPT0gJ3N0cmluZycpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0ZDIgPSBtb21lbnQoZDIsb3B0LmZvcm1hdCkudG9EYXRlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHNldERhdGVSYW5nZShzdGFydCwgZDIsIHNpbGVudCk7XHJcblx0XHRcdFx0cmV0dXJuIHRoaXM7XHJcblx0XHRcdH0sXHJcblx0XHRcdHNldERhdGVSYW5nZSA6IGZ1bmN0aW9uKGQxLGQyLHNpbGVudClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGlmICh0eXBlb2YgZDEgPT0gJ3N0cmluZycgJiYgdHlwZW9mIGQyID09ICdzdHJpbmcnKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGQxID0gbW9tZW50KGQxLG9wdC5mb3JtYXQpLnRvRGF0ZSgpO1xyXG5cdFx0XHRcdFx0ZDIgPSBtb21lbnQoZDIsb3B0LmZvcm1hdCkudG9EYXRlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHNldERhdGVSYW5nZShkMSxkMixzaWxlbnQpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRjbGVhcjogY2xlYXJTZWxlY3Rpb24sXHJcblx0XHRcdGNsb3NlOiBjbG9zZURhdGVQaWNrZXIsXHJcblx0XHRcdG9wZW46IG9wZW4sXHJcblx0XHRcdHJlZHJhdzogcmVkcmF3RGF0ZVBpY2tlcixcclxuXHRcdFx0Z2V0RGF0ZVBpY2tlcjogZ2V0RGF0ZVBpY2tlcixcclxuXHRcdFx0cmVzZXRNb250aHNWaWV3OiByZXNldE1vbnRoc1ZpZXcsXHJcblx0XHRcdGRlc3Ryb3k6IGZ1bmN0aW9uKClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdCQoc2VsZikudW5iaW5kKCcuZGF0ZXBpY2tlcicpO1xyXG5cdFx0XHRcdCQoc2VsZikuZGF0YSgnZGF0ZVJhbmdlUGlja2VyJywnJyk7XHJcblx0XHRcdFx0JChzZWxmKS5kYXRhKCdkYXRlLXBpY2tlci1vcGVuZWQnLG51bGwpO1xyXG5cdFx0XHRcdGJveC5yZW1vdmUoKTtcclxuXHRcdFx0XHQkKHdpbmRvdykudW5iaW5kKCdyZXNpemUuZGF0ZXBpY2tlcicsY2FsY1Bvc2l0aW9uKTtcclxuXHRcdFx0XHQkKGRvY3VtZW50KS51bmJpbmQoJ2NsaWNrLmRhdGVwaWNrZXInLGNsb3NlRGF0ZVBpY2tlcik7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdCQod2luZG93KS5iaW5kKCdyZXNpemUuZGF0ZXBpY2tlcicsY2FsY1Bvc2l0aW9uKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHJcblx0XHRmdW5jdGlvbiBJc093bkRhdGVQaWNrZXJDbGlja2VkKGV2dCwgc2VsZk9iailcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuICggc2VsZk9iai5jb250YWlucyhldnQudGFyZ2V0KSB8fCBldnQudGFyZ2V0ID09IHNlbGZPYmogIHx8IChzZWxmT2JqLmNoaWxkTm9kZXMgIT0gdW5kZWZpbmVkICYmICQuaW5BcnJheShldnQudGFyZ2V0LCBzZWxmT2JqLmNoaWxkTm9kZXMpPj0wKSk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gaW5pdF9kYXRlcGlja2VyKClcclxuXHRcdHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdFx0aWYgKCQodGhpcykuZGF0YSgnZGF0ZS1waWNrZXItb3BlbmVkJykpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRjbG9zZURhdGVQaWNrZXIoKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0JCh0aGlzKS5kYXRhKCdkYXRlLXBpY2tlci1vcGVuZWQnLHRydWUpO1xyXG5cclxuXHJcblx0XHRcdGJveCA9IGNyZWF0ZURvbSgpLmhpZGUoKTtcclxuXHRcdFx0Ym94LmFwcGVuZCgnPGRpdiBjbGFzcz1cImRhdGUtcmFuZ2UtbGVuZ3RoLXRpcFwiPjwvZGl2PicpO1xyXG5cclxuXHRcdFx0JChvcHQuY29udGFpbmVyKS5hcHBlbmQoYm94KTtcclxuXHJcblx0XHRcdGlmICghb3B0LmlubGluZSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGNhbGNQb3NpdGlvbigpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGJveC5hZGRDbGFzcygnaW5saW5lLXdyYXBwZXInKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKG9wdC5hbHdheXNPcGVuKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Ym94LmZpbmQoJy5hcHBseS1idG4nKS5oaWRlKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZhciBkZWZhdWx0VGltZSA9IGdldERlZmF1bHRUaW1lKCk7XHJcblx0XHRcdHJlc2V0TW9udGhzVmlldyhkZWZhdWx0VGltZSk7XHJcblxyXG5cdFx0XHRpZiAob3B0LnRpbWUuZW5hYmxlZClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGlmICgob3B0LnN0YXJ0RGF0ZSAmJiBvcHQuZW5kRGF0ZSkgfHwgKG9wdC5zdGFydCAmJiBvcHQuZW5kKSkge1xyXG5cdFx0XHRcdFx0c2hvd1RpbWUobW9tZW50KG9wdC5zdGFydCB8fCBvcHQuc3RhcnREYXRlKS50b0RhdGUoKSwndGltZTEnKTtcclxuXHRcdFx0XHRcdHNob3dUaW1lKG1vbWVudChvcHQuZW5kIHx8IG9wdC5lbmREYXRlKS50b0RhdGUoKSwndGltZTInKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0dmFyIGRlZmF1bHRFbmRUaW1lID0gb3B0LmRlZmF1bHRFbmRUaW1lID8gb3B0LmRlZmF1bHRFbmRUaW1lIDogZGVmYXVsdFRpbWU7XHJcblx0XHRcdFx0XHRzaG93VGltZShkZWZhdWx0VGltZSwndGltZTEnKTtcclxuXHRcdFx0XHRcdHNob3dUaW1lKGRlZmF1bHRFbmRUaW1lLCd0aW1lMicpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly9zaG93U2VsZWN0ZWRJbmZvKCk7XHJcblxyXG5cclxuXHRcdFx0dmFyIGRlZmF1bHRUb3BUZXh0ID0gJyc7XHJcblx0XHRcdGlmIChvcHQuc2luZ2xlRGF0ZSlcclxuXHRcdFx0XHRkZWZhdWx0VG9wVGV4dCA9IGxhbmcoJ2RlZmF1bHQtc2luZ2xlJyk7XHJcblx0XHRcdGVsc2UgaWYgKG9wdC5taW5EYXlzICYmIG9wdC5tYXhEYXlzKVxyXG5cdFx0XHRcdGRlZmF1bHRUb3BUZXh0ID0gbGFuZygnZGVmYXVsdC1yYW5nZScpO1xyXG5cdFx0XHRlbHNlIGlmIChvcHQubWluRGF5cylcclxuXHRcdFx0XHRkZWZhdWx0VG9wVGV4dCA9IGxhbmcoJ2RlZmF1bHQtbW9yZScpO1xyXG5cdFx0XHRlbHNlIGlmIChvcHQubWF4RGF5cylcclxuXHRcdFx0XHRkZWZhdWx0VG9wVGV4dCA9IGxhbmcoJ2RlZmF1bHQtbGVzcycpO1xyXG5cdFx0XHRlbHNlXHJcblx0XHRcdFx0ZGVmYXVsdFRvcFRleHQgPSBsYW5nKCdkZWZhdWx0LWRlZmF1bHQnKTtcclxuXHJcblx0XHRcdGJveC5maW5kKCcuZGVmYXVsdC10b3AnKS5odG1sKCBkZWZhdWx0VG9wVGV4dC5yZXBsYWNlKC9cXCVkLyxvcHQubWluRGF5cykucmVwbGFjZSgvXFwlZC8sb3B0Lm1heERheXMpKTtcclxuXHRcdFx0aWYgKG9wdC5zaW5nbGVNb250aClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGJveC5hZGRDbGFzcygnc2luZ2xlLW1vbnRoJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Ym94LmFkZENsYXNzKCd0d28tbW9udGhzJyk7XHJcblx0XHRcdH1cclxuXHJcblxyXG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHVwZGF0ZUNhbGVuZGFyV2lkdGgoKTtcclxuXHRcdFx0XHRpbml0aWF0ZWQgPSB0cnVlO1xyXG5cdFx0XHR9LDApO1xyXG5cclxuXHRcdFx0Ym94LmNsaWNrKGZ1bmN0aW9uKGV2dClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvL2lmIHVzZXIgY2xpY2sgb3RoZXIgcGxhY2Ugb2YgdGhlIHdlYnBhZ2UsIGNsb3NlIGRhdGUgcmFuZ2UgcGlja2VyIHdpbmRvd1xyXG5cdFx0XHQkKGRvY3VtZW50KS5iaW5kKCdjbGljay5kYXRlcGlja2VyJyxmdW5jdGlvbihldnQpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZiAoIUlzT3duRGF0ZVBpY2tlckNsaWNrZWQoZXZ0LCBzZWxmWzBdKSkge1xyXG5cdFx0XHRcdFx0aWYgKGJveC5pcygnOnZpc2libGUnKSkgY2xvc2VEYXRlUGlja2VyKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdGJveC5maW5kKCcubmV4dCcpLmNsaWNrKGZ1bmN0aW9uKClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGlmKCFvcHQuc3RpY2t5TW9udGhzKVxyXG5cdFx0XHRcdFx0Z290b05leHRNb250aCh0aGlzKTtcclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRnb3RvTmV4dE1vbnRoX3N0aWNraWx5KHRoaXMpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIGdvdG9OZXh0TW9udGgoc2VsZilcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZhciBpc01vbnRoMiA9ICQoc2VsZikucGFyZW50cygndGFibGUnKS5oYXNDbGFzcygnbW9udGgyJyk7XHJcblx0XHRcdFx0dmFyIG1vbnRoID0gaXNNb250aDIgPyBvcHQubW9udGgyIDogb3B0Lm1vbnRoMTtcclxuXHRcdFx0XHRtb250aCA9IG5leHRNb250aChtb250aCk7XHJcblx0XHRcdFx0aWYgKCFvcHQuc2luZ2xlTW9udGggJiYgIW9wdC5zaW5nbGVEYXRlICYmICFpc01vbnRoMiAmJiBjb21wYXJlX21vbnRoKG1vbnRoLG9wdC5tb250aDIpID49IDAgfHwgaXNNb250aE91dE9mQm91bmRzKG1vbnRoKSkgcmV0dXJuO1xyXG5cdFx0XHRcdHNob3dNb250aChtb250aCxpc01vbnRoMiA/ICdtb250aDInIDogJ21vbnRoMScpO1xyXG5cdFx0XHRcdHNob3dHYXAoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZnVuY3Rpb24gZ290b05leHRNb250aF9zdGlja2lseShzZWxmKSB7XHJcblx0XHRcdFx0dmFyIG5leHRNb250aDEgPSBuZXh0TW9udGgob3B0Lm1vbnRoMSk7XHJcblx0XHRcdFx0dmFyIG5leHRNb250aDIgPSBuZXh0TW9udGgob3B0Lm1vbnRoMik7XHJcblx0XHRcdFx0aWYoaXNNb250aE91dE9mQm91bmRzKG5leHRNb250aDIpKSByZXR1cm47XHJcblx0XHRcdFx0aWYgKCFvcHQuc2luZ2xlRGF0ZSAmJiBjb21wYXJlX21vbnRoKG5leHRNb250aDEsbmV4dE1vbnRoMikgPj0gMCkgcmV0dXJuO1xyXG5cdFx0XHRcdHNob3dNb250aChuZXh0TW9udGgxLCAnbW9udGgxJyk7XHJcblx0XHRcdFx0c2hvd01vbnRoKG5leHRNb250aDIsICdtb250aDInKTtcclxuXHRcdFx0XHRzaG93U2VsZWN0ZWREYXlzKCk7XHJcblx0XHRcdH1cclxuXHJcblxyXG5cdFx0XHRib3guZmluZCgnLnByZXYnKS5jbGljayhmdW5jdGlvbigpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZighb3B0LnN0aWNreU1vbnRocylcclxuXHRcdFx0XHRcdGdvdG9QcmV2TW9udGgodGhpcyk7XHJcblx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0Z290b1ByZXZNb250aF9zdGlja2lseSh0aGlzKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBnb3RvUHJldk1vbnRoKHNlbGYpIHtcclxuXHRcdFx0XHR2YXIgaXNNb250aDIgPSAkKHNlbGYpLnBhcmVudHMoJ3RhYmxlJykuaGFzQ2xhc3MoJ21vbnRoMicpO1xyXG5cdFx0XHRcdHZhciBtb250aCA9IGlzTW9udGgyID8gb3B0Lm1vbnRoMiA6IG9wdC5tb250aDE7XHJcblx0XHRcdFx0bW9udGggPSBwcmV2TW9udGgobW9udGgpO1xyXG5cdFx0XHRcdGlmIChpc01vbnRoMiAmJiBjb21wYXJlX21vbnRoKG1vbnRoLG9wdC5tb250aDEpIDw9IDAgfHwgaXNNb250aE91dE9mQm91bmRzKG1vbnRoKSkgcmV0dXJuO1xyXG5cdFx0XHRcdHNob3dNb250aChtb250aCxpc01vbnRoMiA/ICdtb250aDInIDogJ21vbnRoMScpO1xyXG5cdFx0XHRcdHNob3dHYXAoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZnVuY3Rpb24gZ290b1ByZXZNb250aF9zdGlja2lseShzZWxmKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dmFyIHByZXZNb250aDEgPSBwcmV2TW9udGgob3B0Lm1vbnRoMSk7XHJcblx0XHRcdFx0dmFyIHByZXZNb250aDIgPSBwcmV2TW9udGgob3B0Lm1vbnRoMik7XHJcblx0XHRcdFx0aWYoaXNNb250aE91dE9mQm91bmRzKHByZXZNb250aDEpKSByZXR1cm47XHJcblx0XHRcdFx0aWYoIW9wdC5zaW5nbGVEYXRlICYmIGNvbXBhcmVfbW9udGgocHJldk1vbnRoMixwcmV2TW9udGgxKSA8PSAwKSByZXR1cm47XHJcblx0XHRcdFx0c2hvd01vbnRoKHByZXZNb250aDIsICdtb250aDInKTtcclxuXHRcdFx0XHRzaG93TW9udGgocHJldk1vbnRoMSwgJ21vbnRoMScpO1xyXG5cdFx0XHRcdHNob3dTZWxlY3RlZERheXMoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ym94LmF0dHIoJ3Vuc2VsZWN0YWJsZScsICdvbicpXHJcblx0XHRcdC5jc3MoJ3VzZXItc2VsZWN0JywgJ25vbmUnKVxyXG5cdFx0XHQuYmluZCgnc2VsZWN0c3RhcnQnLCBmdW5jdGlvbihlKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpOyByZXR1cm4gZmFsc2U7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ym94LmZpbmQoJy5hcHBseS1idG4nKS5jbGljayhmdW5jdGlvbigpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRjbG9zZURhdGVQaWNrZXIoKTtcclxuXHRcdFx0XHR2YXIgZGF0ZVJhbmdlID0gZ2V0RGF0ZVN0cmluZyhuZXcgRGF0ZShvcHQuc3RhcnQpKSsgb3B0LnNlcGFyYXRvciArZ2V0RGF0ZVN0cmluZyhuZXcgRGF0ZShvcHQuZW5kKSk7XHJcblx0XHRcdFx0JChzZWxmKS50cmlnZ2VyKCdkYXRlcGlja2VyLWFwcGx5JyxcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHQndmFsdWUnOiBkYXRlUmFuZ2UsXHJcblx0XHRcdFx0XHQnZGF0ZTEnIDogbmV3IERhdGUob3B0LnN0YXJ0KSxcclxuXHRcdFx0XHRcdCdkYXRlMicgOiBuZXcgRGF0ZShvcHQuZW5kKVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdGJveC5maW5kKCdbY3VzdG9tXScpLmNsaWNrKGZ1bmN0aW9uKClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZhciB2YWx1ZU5hbWUgPSAkKHRoaXMpLmF0dHIoJ2N1c3RvbScpO1xyXG5cdFx0XHRcdG9wdC5zdGFydCA9IGZhbHNlO1xyXG5cdFx0XHRcdG9wdC5lbmQgPSBmYWxzZTtcclxuXHRcdFx0XHRib3guZmluZCgnLmRheS5jaGVja2VkJykucmVtb3ZlQ2xhc3MoJ2NoZWNrZWQnKTtcclxuXHRcdFx0XHRvcHQuc2V0VmFsdWUuY2FsbChzZWxmRG9tLCB2YWx1ZU5hbWUpO1xyXG5cdFx0XHRcdGNoZWNrU2VsZWN0aW9uVmFsaWQoKTtcclxuXHRcdFx0XHRzaG93U2VsZWN0ZWRJbmZvKHRydWUpO1xyXG5cdFx0XHRcdHNob3dTZWxlY3RlZERheXMoKTtcclxuXHRcdFx0XHRpZiAob3B0LmF1dG9DbG9zZSkgY2xvc2VEYXRlUGlja2VyKCk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ym94LmZpbmQoJ1tzaG9ydGN1dF0nKS5jbGljayhmdW5jdGlvbigpXHJcblx0XHRcdHtcclxuXHRcdFx0XHR2YXIgc2hvcnRjdXQgPSAkKHRoaXMpLmF0dHIoJ3Nob3J0Y3V0Jyk7XHJcblx0XHRcdFx0dmFyIGVuZCA9IG5ldyBEYXRlKCksc3RhcnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHZhciBkaXI7XHJcblx0XHRcdFx0aWYgKHNob3J0Y3V0LmluZGV4T2YoJ2RheScpICE9IC0xKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHZhciBkYXkgPSBwYXJzZUludChzaG9ydGN1dC5zcGxpdCgnLCcsMilbMV0sMTApO1xyXG5cdFx0XHRcdFx0c3RhcnQgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSArIDg2NDAwMDAwKmRheSk7XHJcblx0XHRcdFx0XHRlbmQgPSBuZXcgRGF0ZShlbmQuZ2V0VGltZSgpICsgODY0MDAwMDAqKGRheT4wPzE6LTEpICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2UgaWYgKHNob3J0Y3V0LmluZGV4T2YoJ3dlZWsnKSE9IC0xKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGRpciA9IHNob3J0Y3V0LmluZGV4T2YoJ3ByZXYsJykgIT0gLTEgPyAtMSA6IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3BEYXk7XHJcblx0XHRcdFx0XHRpZiAoZGlyID09IDEpXHJcblx0XHRcdFx0XHRcdCBzdG9wRGF5ID0gb3B0LnN0YXJ0T2ZXZWVrID09ICdtb25kYXknID8gMSA6IDA7XHJcblx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdCBzdG9wRGF5ID0gb3B0LnN0YXJ0T2ZXZWVrID09ICdtb25kYXknID8gMCA6IDY7XHJcblxyXG5cdFx0XHRcdFx0ZW5kID0gbmV3IERhdGUoZW5kLmdldFRpbWUoKSAtIDg2NDAwMDAwKTtcclxuXHRcdFx0XHRcdHdoaWxlKGVuZC5nZXREYXkoKSAhPSBzdG9wRGF5KSBlbmQgPSBuZXcgRGF0ZShlbmQuZ2V0VGltZSgpICsgZGlyKjg2NDAwMDAwKTtcclxuXHRcdFx0XHRcdHN0YXJ0ID0gbmV3IERhdGUoZW5kLmdldFRpbWUoKSArIGRpcio4NjQwMDAwMCo2KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSBpZiAoc2hvcnRjdXQuaW5kZXhPZignbW9udGgnKSAhPSAtMSlcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRkaXIgPSBzaG9ydGN1dC5pbmRleE9mKCdwcmV2LCcpICE9IC0xID8gLTEgOiAxO1xyXG5cdFx0XHRcdFx0aWYgKGRpciA9PSAxKVxyXG5cdFx0XHRcdFx0XHRzdGFydCA9IG5leHRNb250aChlbmQpO1xyXG5cdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHRzdGFydCA9IHByZXZNb250aChlbmQpO1xyXG5cdFx0XHRcdFx0c3RhcnQuc2V0RGF0ZSgxKTtcclxuXHRcdFx0XHRcdGVuZCA9IG5leHRNb250aChzdGFydCk7XHJcblx0XHRcdFx0XHRlbmQuc2V0RGF0ZSgxKTtcclxuXHRcdFx0XHRcdGVuZCA9IG5ldyBEYXRlKGVuZC5nZXRUaW1lKCkgLSA4NjQwMDAwMCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2UgaWYgKHNob3J0Y3V0LmluZGV4T2YoJ3llYXInKSAhPSAtMSlcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRkaXIgPSBzaG9ydGN1dC5pbmRleE9mKCdwcmV2LCcpICE9IC0xID8gLTEgOiAxO1xyXG5cdFx0XHRcdFx0c3RhcnQgPSBuZXcgRGF0ZSgpO1xyXG5cdFx0XHRcdFx0c3RhcnQuc2V0RnVsbFllYXIoZW5kLmdldEZ1bGxZZWFyKCkgKyBkaXIpO1xyXG5cdFx0XHRcdFx0c3RhcnQuc2V0TW9udGgoMCk7XHJcblx0XHRcdFx0XHRzdGFydC5zZXREYXRlKDEpO1xyXG5cdFx0XHRcdFx0ZW5kLnNldEZ1bGxZZWFyKGVuZC5nZXRGdWxsWWVhcigpICsgZGlyKTtcclxuXHRcdFx0XHRcdGVuZC5zZXRNb250aCgxMSk7XHJcblx0XHRcdFx0XHRlbmQuc2V0RGF0ZSgzMSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2UgaWYgKHNob3J0Y3V0ID09ICdjdXN0b20nKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHZhciBuYW1lID0gJCh0aGlzKS5odG1sKCk7XHJcblx0XHRcdFx0XHRpZiAob3B0LmN1c3RvbVNob3J0Y3V0cyAmJiBvcHQuY3VzdG9tU2hvcnRjdXRzLmxlbmd0aCA+IDApXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGZvcih2YXIgaT0wO2k8b3B0LmN1c3RvbVNob3J0Y3V0cy5sZW5ndGg7aSsrKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0dmFyIHNoID0gb3B0LmN1c3RvbVNob3J0Y3V0c1tpXTtcclxuXHRcdFx0XHRcdFx0XHRpZiAoc2gubmFtZSA9PSBuYW1lKVxyXG5cdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdHZhciBkYXRhID0gW107XHJcblx0XHRcdFx0XHRcdFx0XHQvLyB0cnlcclxuXHRcdFx0XHRcdFx0XHRcdC8vIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0ZGF0YSA9IHNoWydkYXRlcyddLmNhbGwoKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vfWNhdGNoKGUpe31cclxuXHRcdFx0XHRcdFx0XHRcdGlmIChkYXRhICYmIGRhdGEubGVuZ3RoID09IDIpXHJcblx0XHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHN0YXJ0ID0gZGF0YVswXTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0ZW5kID0gZGF0YVsxXTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdFx0XHQvLyBpZiBvbmx5IG9uZSBkYXRlIGlzIHNwZWNpZmllZCB0aGVuIGp1c3QgbW92ZSBjYWxlbmRhcnMgdGhlcmVcclxuXHRcdFx0XHRcdFx0XHRcdC8vIG1vdmUgY2FsZW5kYXJzIHRvIHNob3cgdGhpcyBkYXRlJ3MgbW9udGggYW5kIG5leHQgbW9udGhzXHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoZGF0YSAmJiBkYXRhLmxlbmd0aCA9PSAxKVxyXG5cdFx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgbW92ZXRvZGF0ZSA9IGRhdGFbMF07XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNob3dNb250aChtb3ZldG9kYXRlLCdtb250aDEnKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2hvd01vbnRoKG5leHRNb250aChtb3ZldG9kYXRlKSwnbW9udGgyJyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNob3dHYXAoKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKHN0YXJ0ICYmIGVuZClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRzZXREYXRlUmFuZ2Uoc3RhcnQsZW5kKTtcclxuXHRcdFx0XHRcdGNoZWNrU2VsZWN0aW9uVmFsaWQoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ym94LmZpbmQoJy50aW1lMSBpbnB1dFt0eXBlPXJhbmdlXScpLmJpbmQoJ2NoYW5nZSB0b3VjaG1vdmUnLCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHRcdHZhciB0YXJnZXQgPSBlLnRhcmdldCxcclxuXHRcdFx0XHRcdGhvdXIgPSB0YXJnZXQubmFtZSA9PSAnaG91cicgPyAkKHRhcmdldCkudmFsKCkucmVwbGFjZSgvXihcXGR7MX0pJC8sICcwJDEnKSA6IHVuZGVmaW5lZCxcclxuXHRcdFx0XHRcdG1pbiA9IHRhcmdldC5uYW1lID09ICdtaW51dGUnID8gJCh0YXJnZXQpLnZhbCgpLnJlcGxhY2UoL14oXFxkezF9KSQvLCAnMCQxJykgOiB1bmRlZmluZWQ7XHJcblx0XHRcdFx0c2V0VGltZSgndGltZTEnLCBob3VyLCBtaW4pO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdGJveC5maW5kKCcudGltZTIgaW5wdXRbdHlwZT1yYW5nZV0nKS5iaW5kKCdjaGFuZ2UgdG91Y2htb3ZlJywgZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0XHR2YXIgdGFyZ2V0ID0gZS50YXJnZXQsXHJcblx0XHRcdFx0XHRob3VyID0gdGFyZ2V0Lm5hbWUgPT0gJ2hvdXInID8gJCh0YXJnZXQpLnZhbCgpLnJlcGxhY2UoL14oXFxkezF9KSQvLCAnMCQxJykgOiB1bmRlZmluZWQsXHJcblx0XHRcdFx0XHRtaW4gPSB0YXJnZXQubmFtZSA9PSAnbWludXRlJyA/ICQodGFyZ2V0KS52YWwoKS5yZXBsYWNlKC9eKFxcZHsxfSkkLywgJzAkMScpIDogdW5kZWZpbmVkO1xyXG5cdFx0XHRcdHNldFRpbWUoJ3RpbWUyJywgaG91ciwgbWluKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHJcblx0XHRmdW5jdGlvbiBjYWxjUG9zaXRpb24oKVxyXG5cdFx0e1xyXG5cdFx0XHRpZiAoIW9wdC5pbmxpbmUpXHJcblx0XHRcdHtcclxuXHRcdFx0XHR2YXIgb2Zmc2V0ID0gJChzZWxmKS5vZmZzZXQoKTtcclxuXHRcdFx0XHRpZiAoJChvcHQuY29udGFpbmVyKS5jc3MoJ3Bvc2l0aW9uJykgPT0gJ3JlbGF0aXZlJylcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR2YXIgY29udGFpbmVyT2Zmc2V0ID0gJChvcHQuY29udGFpbmVyKS5vZmZzZXQoKTtcclxuXHRcdFx0XHRcdGJveC5jc3MoXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdHRvcDogb2Zmc2V0LnRvcCAtIGNvbnRhaW5lck9mZnNldC50b3AgKyAkKHNlbGYpLm91dGVySGVpZ2h0KCkgKyA0LFxyXG5cdFx0XHRcdFx0XHRsZWZ0OiBvZmZzZXQubGVmdCAtIGNvbnRhaW5lck9mZnNldC5sZWZ0XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGlmIChvZmZzZXQubGVmdCA8IDQ2MCkgLy9sZWZ0IHRvIHJpZ2h0XHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGJveC5jc3MoXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHR0b3A6IG9mZnNldC50b3ArJChzZWxmKS5vdXRlckhlaWdodCgpICsgcGFyc2VJbnQoJCgnYm9keScpLmNzcygnYm9yZGVyLXRvcCcpIHx8IDAsMTAgKSxcclxuXHRcdFx0XHRcdFx0XHRsZWZ0OiBvZmZzZXQubGVmdFxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0Ym94LmNzcyhcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdHRvcDogb2Zmc2V0LnRvcCskKHNlbGYpLm91dGVySGVpZ2h0KCkgKyBwYXJzZUludCgkKCdib2R5JykuY3NzKCdib3JkZXItdG9wJykgfHwgMCwxMCApLFxyXG5cdFx0XHRcdFx0XHRcdGxlZnQ6IG9mZnNldC5sZWZ0ICsgJChzZWxmKS53aWR0aCgpIC0gYm94LndpZHRoKCkgLSAxNlxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBSZXR1cm4gdGhlIGRhdGUgcGlja2VyIHdyYXBwZXIgZWxlbWVudFxyXG5cdFx0ZnVuY3Rpb24gZ2V0RGF0ZVBpY2tlcigpXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiBib3g7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gb3BlbihhbmltYXRpb25UaW1lKVxyXG5cdFx0e1xyXG5cdFx0XHRjYWxjUG9zaXRpb24oKTtcclxuXHRcdFx0cmVkcmF3RGF0ZVBpY2tlcigpO1xyXG5cdFx0XHRjaGVja0FuZFNldERlZmF1bHRWYWx1ZSgpO1xyXG5cdFx0XHRpZiAob3B0LmN1c3RvbU9wZW5BbmltYXRpb24pXHJcblx0XHRcdHtcclxuXHRcdFx0XHRvcHQuY3VzdG9tT3BlbkFuaW1hdGlvbi5jYWxsKGJveC5nZXQoMCksIGZ1bmN0aW9uKClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHQkKHNlbGYpLnRyaWdnZXIoJ2RhdGVwaWNrZXItb3BlbmVkJywge3JlbGF0ZWRUYXJnZXQ6IGJveH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGJveC5zbGlkZURvd24oYW5pbWF0aW9uVGltZSwgZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRcdCQoc2VsZikudHJpZ2dlcignZGF0ZXBpY2tlci1vcGVuZWQnLCB7cmVsYXRlZFRhcmdldDogYm94fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0JChzZWxmKS50cmlnZ2VyKCdkYXRlcGlja2VyLW9wZW4nLCB7cmVsYXRlZFRhcmdldDogYm94fSk7XHJcblx0XHRcdHNob3dHYXAoKTtcclxuXHRcdFx0dXBkYXRlQ2FsZW5kYXJXaWR0aCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGNoZWNrQW5kU2V0RGVmYXVsdFZhbHVlKClcclxuXHRcdHtcclxuXHRcdFx0dmFyIF9fZGVmYXVsdF9zdHJpbmcgPSBvcHQuZ2V0VmFsdWUuY2FsbChzZWxmRG9tKTtcclxuXHRcdFx0dmFyIGRlZmF1bHRzID0gX19kZWZhdWx0X3N0cmluZyA/IF9fZGVmYXVsdF9zdHJpbmcuc3BsaXQoIG9wdC5zZXBhcmF0b3IgKSA6ICcnO1xyXG5cclxuXHRcdFx0aWYgKGRlZmF1bHRzICYmICgoZGVmYXVsdHMubGVuZ3RoPT0xICYmIG9wdC5zaW5nbGVEYXRlKSB8fCBkZWZhdWx0cy5sZW5ndGg+PTIpKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dmFyIF9fX2Zvcm1hdCA9IG9wdC5mb3JtYXQ7XHJcblx0XHRcdFx0aWYgKF9fX2Zvcm1hdC5tYXRjaCgvRG8vKSlcclxuXHRcdFx0XHR7XHJcblxyXG5cdFx0XHRcdFx0X19fZm9ybWF0ID0gX19fZm9ybWF0LnJlcGxhY2UoL0RvLywnRCcpO1xyXG5cdFx0XHRcdFx0ZGVmYXVsdHNbMF0gPSBkZWZhdWx0c1swXS5yZXBsYWNlKC8oXFxkKykodGh8bmR8c3QpLywnJDEnKTtcclxuXHRcdFx0XHRcdGlmKGRlZmF1bHRzLmxlbmd0aCA+PSAyKXtcclxuXHRcdFx0XHRcdFx0ZGVmYXVsdHNbMV0gPSBkZWZhdWx0c1sxXS5yZXBsYWNlKC8oXFxkKykodGh8bmR8c3QpLywnJDEnKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gc2V0IGluaXRpYXRlZCAgdG8gYXZvaWQgdHJpZ2dlcnJpbmcgZGF0ZXBpY2tlci1jaGFuZ2UgZXZlbnRcclxuXHRcdFx0XHRpbml0aWF0ZWQgPSBmYWxzZTtcclxuXHRcdFx0XHRpZihkZWZhdWx0cy5sZW5ndGggPj0gMil7XHJcblx0XHRcdFx0XHRzZXREYXRlUmFuZ2UoZ2V0VmFsaWRWYWx1ZShkZWZhdWx0c1swXSwgX19fZm9ybWF0LCBtb21lbnQubG9jYWxlKG9wdC5sYW5ndWFnZSkpLGdldFZhbGlkVmFsdWUoZGVmYXVsdHNbMV0sIF9fX2Zvcm1hdCwgbW9tZW50LmxvY2FsZShvcHQubGFuZ3VhZ2UpKSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2UgaWYoZGVmYXVsdHMubGVuZ3RoPT0xICYmIG9wdC5zaW5nbGVEYXRlKXtcclxuXHRcdFx0XHRcdHNldFNpbmdsZURhdGUoZ2V0VmFsaWRWYWx1ZShkZWZhdWx0c1swXSwgX19fZm9ybWF0LCBtb21lbnQubG9jYWxlKG9wdC5sYW5ndWFnZSkpKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGluaXRpYXRlZCA9IHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBnZXRWYWxpZFZhbHVlKGRhdGUsIGZvcm1hdCwgbG9jYWxlKSB7XHJcblx0XHRcdGlmIChtb21lbnQoZGF0ZSwgZm9ybWF0LCBsb2NhbGUpLmlzVmFsaWQoKSkge1xyXG5cdFx0XHRcdHJldHVybiBtb21lbnQoZGF0ZSwgZm9ybWF0LCBsb2NhbGUpLnRvRGF0ZSgpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJldHVybiBtb21lbnQoKS50b0RhdGUoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHVwZGF0ZUNhbGVuZGFyV2lkdGgoKVxyXG5cdFx0e1xyXG5cdFx0XHR2YXIgZ2FwTWFyZ2luID0gYm94LmZpbmQoJy5nYXAnKS5jc3MoJ21hcmdpbi1sZWZ0Jyk7XHJcblx0XHRcdGlmIChnYXBNYXJnaW4pIGdhcE1hcmdpbiA9IHBhcnNlSW50KGdhcE1hcmdpbik7XHJcblx0XHRcdHZhciB3MSA9IGJveC5maW5kKCcubW9udGgxJykud2lkdGgoKTtcclxuXHRcdFx0dmFyIHcyID0gYm94LmZpbmQoJy5nYXAnKS53aWR0aCgpICsgKCBnYXBNYXJnaW4gPyBnYXBNYXJnaW4qMiA6IDAgKTtcclxuXHRcdFx0dmFyIHczID0gYm94LmZpbmQoJy5tb250aDInKS53aWR0aCgpO1xyXG5cdFx0XHRib3guZmluZCgnLm1vbnRoLXdyYXBwZXInKS53aWR0aCh3MSArIHcyICsgdzMpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHJlbmRlclRpbWUgKG5hbWUsIGRhdGUpIHtcclxuXHRcdFx0Ym94LmZpbmQoJy4nICsgbmFtZSArICcgaW5wdXRbdHlwZT1yYW5nZV0uaG91ci1yYW5nZScpLnZhbChtb21lbnQoZGF0ZSkuaG91cnMoKSk7XHJcblx0XHRcdGJveC5maW5kKCcuJyArIG5hbWUgKyAnIGlucHV0W3R5cGU9cmFuZ2VdLm1pbnV0ZS1yYW5nZScpLnZhbChtb21lbnQoZGF0ZSkubWludXRlcygpKTtcclxuXHRcdFx0c2V0VGltZShuYW1lLCBtb21lbnQoZGF0ZSkuZm9ybWF0KCdISCcpLCBtb21lbnQoZGF0ZSkuZm9ybWF0KCdtbScpKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBjaGFuZ2VUaW1lIChuYW1lLCBkYXRlKSB7XHJcblx0XHRcdG9wdFtuYW1lXSA9IHBhcnNlSW50KFxyXG5cdFx0XHRcdG1vbWVudChwYXJzZUludChkYXRlKSlcclxuXHRcdFx0XHRcdC5zdGFydE9mKCdkYXknKVxyXG5cdFx0XHRcdFx0LmFkZChtb21lbnQob3B0W25hbWUgKyAnVGltZSddKS5mb3JtYXQoJ0hIJyksICdoJylcclxuXHRcdFx0XHRcdC5hZGQobW9tZW50KG9wdFtuYW1lICsgJ1RpbWUnXSkuZm9ybWF0KCdtbScpLCAnbScpLnZhbHVlT2YoKVxyXG5cdFx0XHRcdCk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gc3dhcFRpbWUgKCkge1xyXG5cdFx0XHRyZW5kZXJUaW1lKCd0aW1lMScsIG9wdC5zdGFydCk7XHJcblx0XHRcdHJlbmRlclRpbWUoJ3RpbWUyJywgb3B0LmVuZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gc2V0VGltZSAobmFtZSwgaG91ciwgbWludXRlKVxyXG5cdFx0e1xyXG5cdFx0XHRob3VyICYmIChib3guZmluZCgnLicgKyBuYW1lICsgJyAuaG91ci12YWwnKS50ZXh0KGhvdXIpKTtcclxuXHRcdFx0bWludXRlICYmIChib3guZmluZCgnLicgKyBuYW1lICsgJyAubWludXRlLXZhbCcpLnRleHQobWludXRlKSk7XHJcblx0XHRcdHN3aXRjaCAobmFtZSkge1xyXG5cdFx0XHRcdGNhc2UgJ3RpbWUxJzpcclxuXHRcdFx0XHRcdGlmIChvcHQuc3RhcnQpIHtcclxuXHRcdFx0XHRcdFx0c2V0UmFuZ2UoJ3N0YXJ0JywgbW9tZW50KG9wdC5zdGFydCkpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0c2V0UmFuZ2UoJ3N0YXJ0VGltZScsIG1vbWVudChvcHQuc3RhcnRUaW1lIHx8IG1vbWVudCgpLnZhbHVlT2YoKSkpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSAndGltZTInOlxyXG5cdFx0XHRcdFx0aWYgKG9wdC5lbmQpIHtcclxuXHRcdFx0XHRcdFx0c2V0UmFuZ2UoJ2VuZCcsIG1vbWVudChvcHQuZW5kKSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRzZXRSYW5nZSgnZW5kVGltZScsIG1vbWVudChvcHQuZW5kVGltZSB8fCBtb21lbnQoKS52YWx1ZU9mKCkpKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHRcdGZ1bmN0aW9uIHNldFJhbmdlKG5hbWUsIHRpbWVQb2ludCkge1xyXG5cdFx0XHRcdHZhciBoID0gdGltZVBvaW50LmZvcm1hdCgnSEgnKSxcclxuXHRcdFx0XHRcdG0gPSB0aW1lUG9pbnQuZm9ybWF0KCdtbScpO1xyXG5cdFx0XHRcdG9wdFtuYW1lXSA9IHRpbWVQb2ludFxyXG5cdFx0XHRcdFx0LnN0YXJ0T2YoJ2RheScpXHJcblx0XHRcdFx0XHQuYWRkKGhvdXIgfHwgaCwgJ2gnKVxyXG5cdFx0XHRcdFx0LmFkZChtaW51dGUgfHwgbSwgJ20nKVxyXG5cdFx0XHRcdFx0LnZhbHVlT2YoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRjaGVja1NlbGVjdGlvblZhbGlkKCk7XHJcblx0XHRcdHNob3dTZWxlY3RlZEluZm8oKTtcclxuXHRcdFx0c2hvd1NlbGVjdGVkRGF5cygpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGNsZWFyU2VsZWN0aW9uKClcclxuXHRcdHtcclxuXHRcdFx0b3B0LnN0YXJ0ID0gZmFsc2U7XHJcblx0XHRcdG9wdC5lbmQgPSBmYWxzZTtcclxuXHRcdFx0Ym94LmZpbmQoJy5kYXkuY2hlY2tlZCcpLnJlbW92ZUNsYXNzKCdjaGVja2VkJyk7XHJcblx0XHRcdGJveC5maW5kKCcuZGF5Lmxhc3QtZGF0ZS1zZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdsYXN0LWRhdGUtc2VsZWN0ZWQnKTtcclxuXHRcdFx0Ym94LmZpbmQoJy5kYXkuZmlyc3QtZGF0ZS1zZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdmaXJzdC1kYXRlLXNlbGVjdGVkJyk7XHJcblx0XHRcdG9wdC5zZXRWYWx1ZS5jYWxsKHNlbGZEb20sICcnKTtcclxuXHRcdFx0Y2hlY2tTZWxlY3Rpb25WYWxpZCgpO1xyXG5cdFx0XHRzaG93U2VsZWN0ZWRJbmZvKCk7XHJcblx0XHRcdHNob3dTZWxlY3RlZERheXMoKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBoYW5kbGVTdGFydCh0aW1lKVxyXG5cdFx0e1xyXG5cdFx0XHR2YXIgciA9IHRpbWU7XHJcblx0XHRcdGlmICAob3B0LmJhdGNoTW9kZSA9PT0gJ3dlZWstcmFuZ2UnKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYgKG9wdC5zdGFydE9mV2VlayA9PT0gJ21vbmRheScpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0ciA9IG1vbWVudChwYXJzZUludCh0aW1lKSkuc3RhcnRPZignaXNvd2VlaycpLnZhbHVlT2YoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHIgPSBtb21lbnQocGFyc2VJbnQodGltZSkpLnN0YXJ0T2YoJ3dlZWsnKS52YWx1ZU9mKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYgKG9wdC5iYXRjaE1vZGUgPT09ICdtb250aC1yYW5nZScpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRyID0gbW9tZW50KHBhcnNlSW50KHRpbWUpKS5zdGFydE9mKCdtb250aCcpLnZhbHVlT2YoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gcjtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBoYW5kbGVFbmQodGltZSlcclxuXHRcdHtcclxuXHRcdFx0dmFyIHIgPSB0aW1lO1xyXG5cdFx0XHRpZiAgKG9wdC5iYXRjaE1vZGUgPT09ICd3ZWVrLXJhbmdlJylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGlmIChvcHQuc3RhcnRPZldlZWsgPT09ICdtb25kYXknKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHIgPSBtb21lbnQocGFyc2VJbnQodGltZSkpLmVuZE9mKCdpc293ZWVrJykudmFsdWVPZigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0ciA9IG1vbWVudChwYXJzZUludCh0aW1lKSkuZW5kT2YoJ3dlZWsnKS52YWx1ZU9mKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYgKG9wdC5iYXRjaE1vZGUgPT09ICdtb250aC1yYW5nZScpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRyID0gbW9tZW50KHBhcnNlSW50KHRpbWUpKS5lbmRPZignbW9udGgnKS52YWx1ZU9mKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIHI7XHJcblx0XHR9XHJcblxyXG5cclxuXHRcdGZ1bmN0aW9uIGRheUNsaWNrZWQoZGF5KVxyXG5cdFx0e1xyXG5cdFx0XHRpZiAoZGF5Lmhhc0NsYXNzKCdpbnZhbGlkJykpIHJldHVybjtcclxuXHRcdFx0dmFyIHRpbWUgPSBkYXkuYXR0cigndGltZScpO1xyXG5cdFx0XHRkYXkuYWRkQ2xhc3MoJ2NoZWNrZWQnKTtcclxuXHRcdFx0aWYgKCBvcHQuc2luZ2xlRGF0ZSApXHJcblx0XHRcdHtcclxuXHRcdFx0XHRvcHQuc3RhcnQgPSB0aW1lO1xyXG5cdFx0XHRcdG9wdC5lbmQgPSBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmICAob3B0LmJhdGNoTW9kZSA9PT0gJ3dlZWsnKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYgKG9wdC5zdGFydE9mV2VlayA9PT0gJ21vbmRheScpIHtcclxuXHRcdFx0XHRcdG9wdC5zdGFydCA9IG1vbWVudChwYXJzZUludCh0aW1lKSkuc3RhcnRPZignaXNvd2VlaycpLnZhbHVlT2YoKTtcclxuXHRcdFx0XHRcdG9wdC5lbmQgPSBtb21lbnQocGFyc2VJbnQodGltZSkpLmVuZE9mKCdpc293ZWVrJykudmFsdWVPZigpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRvcHQuZW5kID0gbW9tZW50KHBhcnNlSW50KHRpbWUpKS5lbmRPZignd2VlaycpLnZhbHVlT2YoKTtcclxuXHRcdFx0XHRcdG9wdC5zdGFydCA9IG1vbWVudChwYXJzZUludCh0aW1lKSkuc3RhcnRPZignd2VlaycpLnZhbHVlT2YoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZiAgKG9wdC5iYXRjaE1vZGUgPT09ICd3b3Jrd2VlaycpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRvcHQuc3RhcnQgPSBtb21lbnQocGFyc2VJbnQodGltZSkpLmRheSgxKS52YWx1ZU9mKCk7XHJcblx0XHRcdFx0b3B0LmVuZCA9IG1vbWVudChwYXJzZUludCh0aW1lKSkuZGF5KDUpLnZhbHVlT2YoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmICAob3B0LmJhdGNoTW9kZSA9PT0gJ3dlZWtlbmQnKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0b3B0LnN0YXJ0ID0gbW9tZW50KHBhcnNlSW50KHRpbWUpKS5kYXkoNikudmFsdWVPZigpO1xyXG5cdFx0XHRcdG9wdC5lbmQgPSBtb21lbnQocGFyc2VJbnQodGltZSkpLmRheSg3KS52YWx1ZU9mKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZiAob3B0LmJhdGNoTW9kZSA9PT0gJ21vbnRoJylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdG9wdC5zdGFydCA9IG1vbWVudChwYXJzZUludCh0aW1lKSkuc3RhcnRPZignbW9udGgnKS52YWx1ZU9mKCk7XHJcblx0XHRcdFx0b3B0LmVuZCA9IG1vbWVudChwYXJzZUludCh0aW1lKSkuZW5kT2YoJ21vbnRoJykudmFsdWVPZigpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYgKChvcHQuc3RhcnQgJiYgb3B0LmVuZCkgfHwgKCFvcHQuc3RhcnQgJiYgIW9wdC5lbmQpIClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdG9wdC5zdGFydCA9IGhhbmRsZVN0YXJ0KHRpbWUpO1xyXG5cdFx0XHRcdG9wdC5lbmQgPSBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmIChvcHQuc3RhcnQpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRvcHQuZW5kID0gaGFuZGxlRW5kKHRpbWUpO1xyXG5cdFx0XHRcdGlmIChvcHQudGltZS5lbmFibGVkKSB7XHJcblx0XHRcdFx0XHRjaGFuZ2VUaW1lKCdlbmQnLCBvcHQuZW5kKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vVXBkYXRlIHRpbWUgaW4gY2FzZSBpdCBpcyBlbmFibGVkIGFuZCB0aW1lc3RhbXBzIGFyZSBhdmFpbGFibGVcclxuXHRcdFx0aWYob3B0LnRpbWUuZW5hYmxlZCkge1xyXG5cdFx0XHRcdGlmKG9wdC5zdGFydCkge1xyXG5cdFx0XHRcdFx0Y2hhbmdlVGltZSgnc3RhcnQnLCBvcHQuc3RhcnQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZihvcHQuZW5kKSB7XHJcblx0XHRcdFx0XHRjaGFuZ2VUaW1lKCdlbmQnLCBvcHQuZW5kKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vSW4gY2FzZSB0aGUgc3RhcnQgaXMgYWZ0ZXIgdGhlIGVuZCwgc3dhcCB0aGUgdGltZXN0YW1wc1xyXG5cdFx0XHRpZiAoIW9wdC5zaW5nbGVEYXRlICYmIG9wdC5zdGFydCAmJiBvcHQuZW5kICYmIG9wdC5zdGFydCA+IG9wdC5lbmQpXHJcblx0XHRcdHtcclxuXHRcdFx0XHR2YXIgdG1wID0gb3B0LmVuZDtcclxuXHRcdFx0XHRvcHQuZW5kID0gaGFuZGxlRW5kKG9wdC5zdGFydCk7XHJcblx0XHRcdFx0b3B0LnN0YXJ0ID0gaGFuZGxlU3RhcnQodG1wKTtcclxuXHRcdFx0XHRpZiAob3B0LnRpbWUuZW5hYmxlZCAmJiBvcHQuc3dhcFRpbWUpIHtcclxuXHRcdFx0XHRcdHN3YXBUaW1lKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRvcHQuc3RhcnQgPSBwYXJzZUludChvcHQuc3RhcnQpO1xyXG5cdFx0XHRvcHQuZW5kID0gcGFyc2VJbnQob3B0LmVuZCk7XHJcblxyXG5cdFx0XHRjbGVhckhvdmVyaW5nKCk7XHJcblx0XHRcdGlmIChvcHQuc3RhcnQgJiYgIW9wdC5lbmQpXHJcblx0XHRcdHtcclxuXHRcdFx0XHQkKHNlbGYpLnRyaWdnZXIoJ2RhdGVwaWNrZXItZmlyc3QtZGF0ZS1zZWxlY3RlZCcsXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0J2RhdGUxJyA6IG5ldyBEYXRlKG9wdC5zdGFydClcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRkYXlIb3ZlcmluZyhkYXkpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHVwZGF0ZVNlbGVjdGFibGVSYW5nZSh0aW1lKTtcclxuXHJcblx0XHRcdGNoZWNrU2VsZWN0aW9uVmFsaWQoKTtcclxuXHRcdFx0c2hvd1NlbGVjdGVkSW5mbygpO1xyXG5cdFx0XHRzaG93U2VsZWN0ZWREYXlzKCk7XHJcblx0XHRcdGF1dG9jbG9zZSgpO1xyXG5cdFx0fVxyXG5cclxuXHJcblx0XHRmdW5jdGlvbiB3ZWVrTnVtYmVyQ2xpY2tlZCh3ZWVrTnVtYmVyRG9tKVxyXG5cdFx0e1xyXG5cdFx0XHR2YXIgdGhpc1RpbWUgPSBwYXJzZUludCh3ZWVrTnVtYmVyRG9tLmF0dHIoJ2RhdGEtc3RhcnQtdGltZScpLDEwKTtcclxuICAgICAgICAgICAgdmFyIGRhdGUxLGRhdGUyO1xyXG5cdFx0XHRpZiAoIW9wdC5zdGFydFdlZWspXHJcblx0XHRcdHtcclxuXHRcdFx0XHRvcHQuc3RhcnRXZWVrID0gdGhpc1RpbWU7XHJcblx0XHRcdFx0d2Vla051bWJlckRvbS5hZGRDbGFzcygnd2Vlay1udW1iZXItc2VsZWN0ZWQnKTtcclxuXHRcdFx0XHRkYXRlMSA9IG5ldyBEYXRlKHRoaXNUaW1lKTtcclxuXHRcdFx0XHRvcHQuc3RhcnQgPSBtb21lbnQoZGF0ZTEpLmRheShvcHQuc3RhcnRPZldlZWsgPT0gJ21vbmRheScgPyAxIDogMCkudmFsdWVPZigpO1xyXG5cdFx0XHRcdG9wdC5lbmQgPSBtb21lbnQoZGF0ZTEpLmRheShvcHQuc3RhcnRPZldlZWsgPT0gJ21vbmRheScgPyA3IDogNikudmFsdWVPZigpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGJveC5maW5kKCcud2Vlay1udW1iZXItc2VsZWN0ZWQnKS5yZW1vdmVDbGFzcygnd2Vlay1udW1iZXItc2VsZWN0ZWQnKTtcclxuXHRcdFx0XHRkYXRlMSA9IG5ldyBEYXRlKHRoaXNUaW1lIDwgb3B0LnN0YXJ0V2VlayA/IHRoaXNUaW1lIDogb3B0LnN0YXJ0V2Vlayk7XHJcblx0XHRcdFx0ZGF0ZTIgPSBuZXcgRGF0ZSh0aGlzVGltZSA8IG9wdC5zdGFydFdlZWsgPyBvcHQuc3RhcnRXZWVrIDogdGhpc1RpbWUpO1xyXG5cdFx0XHRcdG9wdC5zdGFydFdlZWsgPSBmYWxzZTtcclxuXHRcdFx0XHRvcHQuc3RhcnQgPSBtb21lbnQoZGF0ZTEpLmRheShvcHQuc3RhcnRPZldlZWsgPT0gJ21vbmRheScgPyAxIDogMCkudmFsdWVPZigpO1xyXG5cdFx0XHRcdG9wdC5lbmQgPSBtb21lbnQoZGF0ZTIpLmRheShvcHQuc3RhcnRPZldlZWsgPT0gJ21vbmRheScgPyA3IDogNikudmFsdWVPZigpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHVwZGF0ZVNlbGVjdGFibGVSYW5nZSgpO1xyXG5cdFx0XHRjaGVja1NlbGVjdGlvblZhbGlkKCk7XHJcblx0XHRcdHNob3dTZWxlY3RlZEluZm8oKTtcclxuXHRcdFx0c2hvd1NlbGVjdGVkRGF5cygpO1xyXG5cdFx0XHRhdXRvY2xvc2UoKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBpc1ZhbGlkVGltZSh0aW1lKVxyXG5cdFx0e1xyXG5cdFx0XHR0aW1lID0gcGFyc2VJbnQodGltZSwgMTApO1xyXG5cdFx0XHRpZiAob3B0LnN0YXJ0RGF0ZSAmJiBjb21wYXJlX2RheSh0aW1lLCBvcHQuc3RhcnREYXRlKSA8IDApIHJldHVybiBmYWxzZTtcclxuXHRcdFx0aWYgKG9wdC5lbmREYXRlICYmIGNvbXBhcmVfZGF5KHRpbWUsIG9wdC5lbmREYXRlKSA+IDApIHJldHVybiBmYWxzZTtcclxuXHJcblx0XHRcdGlmIChvcHQuc3RhcnQgJiYgIW9wdC5lbmQgJiYgIW9wdC5zaW5nbGVEYXRlKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Ly9jaGVjayBtYXhEYXlzIGFuZCBtaW5EYXlzIHNldHRpbmdcclxuXHRcdFx0XHRpZiAob3B0Lm1heERheXMgPiAwICYmIGNvdW50RGF5cyh0aW1lLCBvcHQuc3RhcnQpID4gb3B0Lm1heERheXMpIHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHRpZiAob3B0Lm1pbkRheXMgPiAwICYmIGNvdW50RGF5cyh0aW1lLCBvcHQuc3RhcnQpIDwgb3B0Lm1pbkRheXMpIHJldHVybiBmYWxzZTtcclxuXHJcblx0XHRcdFx0Ly9jaGVjayBzZWxlY3RGb3J3YXJkIGFuZCBzZWxlY3RCYWNrd2FyZFxyXG5cdFx0XHRcdGlmIChvcHQuc2VsZWN0Rm9yd2FyZCAmJiB0aW1lIDwgb3B0LnN0YXJ0ICkgcmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdGlmIChvcHQuc2VsZWN0QmFja3dhcmQgJiYgdGltZSA+IG9wdC5zdGFydCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdFx0XHQvL2NoZWNrIGRpc2FibGVkIGRheXNcclxuXHRcdFx0XHRpZiAob3B0LmJlZm9yZVNob3dEYXkgJiYgdHlwZW9mIG9wdC5iZWZvcmVTaG93RGF5ID09ICdmdW5jdGlvbicpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dmFyIHZhbGlkID0gdHJ1ZTtcclxuXHRcdFx0XHRcdHZhciB0aW1lVG1wID0gdGltZTtcclxuXHRcdFx0XHRcdHdoaWxlKCBjb3VudERheXModGltZVRtcCwgb3B0LnN0YXJ0KSA+IDEgKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHR2YXIgYXJyID0gb3B0LmJlZm9yZVNob3dEYXkoIG5ldyBEYXRlKHRpbWVUbXApICk7XHJcblx0XHRcdFx0XHRcdGlmICghYXJyWzBdKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0dmFsaWQgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRpZiAoTWF0aC5hYnModGltZVRtcCAtIG9wdC5zdGFydCkgPCA4NjQwMDAwMCkgYnJlYWs7XHJcblx0XHRcdFx0XHRcdGlmICh0aW1lVG1wID4gb3B0LnN0YXJ0KSB0aW1lVG1wIC09IDg2NDAwMDAwO1xyXG5cdFx0XHRcdFx0XHRpZiAodGltZVRtcCA8IG9wdC5zdGFydCkgdGltZVRtcCArPSA4NjQwMDAwMDtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmICghdmFsaWQpIHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblxyXG5cclxuXHRcdGZ1bmN0aW9uIHVwZGF0ZVNlbGVjdGFibGVSYW5nZSgpXHJcblx0XHR7XHJcblx0XHRcdGJveC5maW5kKCcuZGF5LmludmFsaWQudG1wJykucmVtb3ZlQ2xhc3MoJ3RtcCBpbnZhbGlkJykuYWRkQ2xhc3MoJ3ZhbGlkJyk7XHJcblx0XHRcdGlmIChvcHQuc3RhcnQgJiYgIW9wdC5lbmQpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRib3guZmluZCgnLmRheS50b01vbnRoLnZhbGlkJykuZWFjaChmdW5jdGlvbigpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dmFyIHRpbWUgPSBwYXJzZUludCgkKHRoaXMpLmF0dHIoJ3RpbWUnKSwgMTApO1xyXG5cdFx0XHRcdFx0aWYgKCFpc1ZhbGlkVGltZSh0aW1lKSlcclxuXHRcdFx0XHRcdFx0JCh0aGlzKS5hZGRDbGFzcygnaW52YWxpZCB0bXAnKS5yZW1vdmVDbGFzcygndmFsaWQnKTtcclxuXHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0JCh0aGlzKS5hZGRDbGFzcygndmFsaWQgdG1wJykucmVtb3ZlQ2xhc3MoJ2ludmFsaWQnKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblxyXG5cclxuXHRcdGZ1bmN0aW9uIGRheUhvdmVyaW5nKGRheSlcclxuXHRcdHtcclxuXHRcdFx0dmFyIGhvdmVyVGltZSA9IHBhcnNlSW50KGRheS5hdHRyKCd0aW1lJykpO1xyXG5cdFx0XHR2YXIgdG9vbHRpcCA9ICcnO1xyXG5cclxuXHRcdFx0aWYgKGRheS5oYXNDbGFzcygnaGFzLXRvb2x0aXAnKSAmJiBkYXkuYXR0cignZGF0YS10b29sdGlwJykpXHJcblx0XHRcdHtcclxuXHRcdFx0XHR0b29sdGlwID0gJzxzcGFuIHN0eWxlPVwid2hpdGUtc3BhY2U6bm93cmFwXCI+JytkYXkuYXR0cignZGF0YS10b29sdGlwJykrJzwvc3Bhbj4nO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYgKCFkYXkuaGFzQ2xhc3MoJ2ludmFsaWQnKSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGlmIChvcHQuc2luZ2xlRGF0ZSlcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRib3guZmluZCgnLmRheS5ob3ZlcmluZycpLnJlbW92ZUNsYXNzKCdob3ZlcmluZycpO1xyXG5cdFx0XHRcdFx0ZGF5LmFkZENsYXNzKCdob3ZlcmluZycpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0Ym94LmZpbmQoJy5kYXknKS5lYWNoKGZ1bmN0aW9uKClcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0dmFyIHRpbWUgPSBwYXJzZUludCgkKHRoaXMpLmF0dHIoJ3RpbWUnKSksXHJcblx0XHRcdFx0XHRcdFx0c3RhcnQgPSBvcHQuc3RhcnQsXHJcblx0XHRcdFx0XHRcdFx0ZW5kID0gb3B0LmVuZDtcclxuXHJcblx0XHRcdFx0XHRcdGlmICggdGltZSA9PSBob3ZlclRpbWUgKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0JCh0aGlzKS5hZGRDbGFzcygnaG92ZXJpbmcnKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHQkKHRoaXMpLnJlbW92ZUNsYXNzKCdob3ZlcmluZycpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHRpZiAoXHJcblx0XHRcdFx0XHRcdFx0KCBvcHQuc3RhcnQgJiYgIW9wdC5lbmQgKSAmJlxyXG5cdFx0XHRcdFx0XHRcdChcclxuXHRcdFx0XHRcdFx0XHRcdCggb3B0LnN0YXJ0IDwgdGltZSAmJiBob3ZlclRpbWUgPj0gdGltZSApIHx8XHJcblx0XHRcdFx0XHRcdFx0XHQoIG9wdC5zdGFydCA+IHRpbWUgJiYgaG92ZXJUaW1lIDw9IHRpbWUgKVxyXG5cdFx0XHRcdFx0XHRcdClcclxuXHRcdFx0XHRcdFx0KVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0JCh0aGlzKS5hZGRDbGFzcygnaG92ZXJpbmcnKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHQkKHRoaXMpLnJlbW92ZUNsYXNzKCdob3ZlcmluZycpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0XHRpZiAob3B0LnN0YXJ0ICYmICFvcHQuZW5kKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHR2YXIgZGF5cyA9IGNvdW50RGF5cyhob3ZlclRpbWUsIG9wdC5zdGFydCk7XHJcblx0XHRcdFx0XHRcdGlmIChvcHQuaG92ZXJpbmdUb29sdGlwKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0aWYgKHR5cGVvZiBvcHQuaG92ZXJpbmdUb29sdGlwID09ICdmdW5jdGlvbicpXHJcblx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0dG9vbHRpcCA9IG9wdC5ob3ZlcmluZ1Rvb2x0aXAoZGF5cywgb3B0LnN0YXJ0LCBob3ZlclRpbWUpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRlbHNlIGlmIChvcHQuaG92ZXJpbmdUb29sdGlwID09PSB0cnVlICYmIGRheXMgPiAxKVxyXG5cdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdHRvb2x0aXAgPSBkYXlzICsgJyAnICsgbGFuZygnZGF5cycpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKHRvb2x0aXApXHJcblx0XHRcdHtcclxuXHRcdFx0XHR2YXIgcG9zRGF5ID0gZGF5Lm9mZnNldCgpO1xyXG5cdFx0XHRcdHZhciBwb3NCb3ggPSBib3gub2Zmc2V0KCk7XHJcblxyXG5cdFx0XHRcdHZhciBfbGVmdCA9IHBvc0RheS5sZWZ0IC0gcG9zQm94LmxlZnQ7XHJcblx0XHRcdFx0dmFyIF90b3AgPSBwb3NEYXkudG9wIC0gcG9zQm94LnRvcDtcclxuXHRcdFx0XHRfbGVmdCArPSBkYXkud2lkdGgoKS8yO1xyXG5cclxuXHJcblx0XHRcdFx0dmFyICR0aXAgPSBib3guZmluZCgnLmRhdGUtcmFuZ2UtbGVuZ3RoLXRpcCcpO1xyXG5cdFx0XHRcdHZhciB3ID0gJHRpcC5jc3Moeyd2aXNpYmlsaXR5JzonaGlkZGVuJywgJ2Rpc3BsYXknOidub25lJ30pLmh0bWwodG9vbHRpcCkud2lkdGgoKTtcclxuXHRcdFx0XHR2YXIgaCA9ICR0aXAuaGVpZ2h0KCk7XHJcblx0XHRcdFx0X2xlZnQgLT0gdy8yO1xyXG5cdFx0XHRcdF90b3AgLT0gaDtcclxuXHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHQkdGlwLmNzcyh7bGVmdDpfbGVmdCwgdG9wOl90b3AsIGRpc3BsYXk6J2Jsb2NrJywndmlzaWJpbGl0eSc6J3Zpc2libGUnfSk7XHJcblx0XHRcdFx0fSwxMCk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Ym94LmZpbmQoJy5kYXRlLXJhbmdlLWxlbmd0aC10aXAnKS5oaWRlKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBjbGVhckhvdmVyaW5nKClcclxuXHRcdHtcclxuXHRcdFx0Ym94LmZpbmQoJy5kYXkuaG92ZXJpbmcnKS5yZW1vdmVDbGFzcygnaG92ZXJpbmcnKTtcclxuXHRcdFx0Ym94LmZpbmQoJy5kYXRlLXJhbmdlLWxlbmd0aC10aXAnKS5oaWRlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gYXV0b2Nsb3NlICgpIHtcclxuXHRcdFx0aWYgKG9wdC5zaW5nbGVEYXRlID09PSB0cnVlKSB7XHJcblx0XHRcdFx0aWYgKGluaXRpYXRlZCAmJiBvcHQuc3RhcnQgKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGlmIChvcHQuYXV0b0Nsb3NlKSBjbG9zZURhdGVQaWNrZXIoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0aWYgKGluaXRpYXRlZCAmJiBvcHQuc3RhcnQgJiYgb3B0LmVuZClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRpZiAob3B0LmF1dG9DbG9zZSkgY2xvc2VEYXRlUGlja2VyKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gY2hlY2tTZWxlY3Rpb25WYWxpZCgpXHJcblx0XHR7XHJcblx0XHRcdHZhciBkYXlzID0gTWF0aC5jZWlsKCAob3B0LmVuZCAtIG9wdC5zdGFydCkgLyA4NjQwMDAwMCApICsgMTtcclxuXHRcdFx0aWYgKG9wdC5zaW5nbGVEYXRlKSB7IC8vIFZhbGlkYXRlIGlmIG9ubHkgc3RhcnQgaXMgdGhlcmVcclxuXHRcdFx0XHRpZiAob3B0LnN0YXJ0ICYmICFvcHQuZW5kKVxyXG5cdFx0XHRcdFx0Ym94LmZpbmQoJy5kcnBfdG9wLWJhcicpLnJlbW92ZUNsYXNzKCdlcnJvcicpLmFkZENsYXNzKCdub3JtYWwnKTtcclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRib3guZmluZCgnLmRycF90b3AtYmFyJykucmVtb3ZlQ2xhc3MoJ2Vycm9yJykucmVtb3ZlQ2xhc3MoJ25vcm1hbCcpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYgKCBvcHQubWF4RGF5cyAmJiBkYXlzID4gb3B0Lm1heERheXMpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRvcHQuc3RhcnQgPSBmYWxzZTtcclxuXHRcdFx0XHRvcHQuZW5kID0gZmFsc2U7XHJcblx0XHRcdFx0Ym94LmZpbmQoJy5kYXknKS5yZW1vdmVDbGFzcygnY2hlY2tlZCcpO1xyXG5cdFx0XHRcdGJveC5maW5kKCcuZHJwX3RvcC1iYXInKS5yZW1vdmVDbGFzcygnbm9ybWFsJykuYWRkQ2xhc3MoJ2Vycm9yJykuZmluZCgnLmVycm9yLXRvcCcpLmh0bWwoIGxhbmcoJ2xlc3MtdGhhbicpLnJlcGxhY2UoJyVkJyxvcHQubWF4RGF5cykgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmICggb3B0Lm1pbkRheXMgJiYgZGF5cyA8IG9wdC5taW5EYXlzKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0b3B0LnN0YXJ0ID0gZmFsc2U7XHJcblx0XHRcdFx0b3B0LmVuZCA9IGZhbHNlO1xyXG5cdFx0XHRcdGJveC5maW5kKCcuZGF5JykucmVtb3ZlQ2xhc3MoJ2NoZWNrZWQnKTtcclxuXHRcdFx0XHRib3guZmluZCgnLmRycF90b3AtYmFyJykucmVtb3ZlQ2xhc3MoJ25vcm1hbCcpLmFkZENsYXNzKCdlcnJvcicpLmZpbmQoJy5lcnJvci10b3AnKS5odG1sKCBsYW5nKCdtb3JlLXRoYW4nKS5yZXBsYWNlKCclZCcsb3B0Lm1pbkRheXMpICk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYgKG9wdC5zdGFydCB8fCBvcHQuZW5kKVxyXG5cdFx0XHRcdFx0Ym94LmZpbmQoJy5kcnBfdG9wLWJhcicpLnJlbW92ZUNsYXNzKCdlcnJvcicpLmFkZENsYXNzKCdub3JtYWwnKTtcclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRib3guZmluZCgnLmRycF90b3AtYmFyJykucmVtb3ZlQ2xhc3MoJ2Vycm9yJykucmVtb3ZlQ2xhc3MoJ25vcm1hbCcpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIChvcHQuc2luZ2xlRGF0ZSAmJiBvcHQuc3RhcnQgJiYgIW9wdC5lbmQpIHx8ICghb3B0LnNpbmdsZURhdGUgJiYgb3B0LnN0YXJ0ICYmIG9wdC5lbmQpIClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGJveC5maW5kKCcuYXBwbHktYnRuJykucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Ym94LmZpbmQoJy5hcHBseS1idG4nKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKG9wdC5iYXRjaE1vZGUpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZiAoXHJcblx0XHRcdFx0XHQob3B0LnN0YXJ0ICYmIG9wdC5zdGFydERhdGUgJiYgY29tcGFyZV9kYXkob3B0LnN0YXJ0LCBvcHQuc3RhcnREYXRlKSA8IDApIHx8XHJcblx0XHRcdFx0XHQob3B0LmVuZCAmJiBvcHQuZW5kRGF0ZSAmJiBjb21wYXJlX2RheShvcHQuZW5kLCBvcHQuZW5kRGF0ZSkgPiAwKVxyXG5cdFx0XHRcdCkge1xyXG5cdFx0XHRcdFx0b3B0LnN0YXJ0ID0gZmFsc2U7XHJcblx0XHRcdFx0XHRvcHQuZW5kID0gZmFsc2U7XHJcblx0XHRcdFx0XHRib3guZmluZCgnLmRheScpLnJlbW92ZUNsYXNzKCdjaGVja2VkJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gc2hvd1NlbGVjdGVkSW5mbyhmb3JjZVZhbGlkLHNpbGVudClcclxuXHRcdHtcclxuXHRcdFx0Ym94LmZpbmQoJy5zdGFydC1kYXknKS5odG1sKCcuLi4nKTtcclxuXHRcdFx0Ym94LmZpbmQoJy5lbmQtZGF5JykuaHRtbCgnLi4uJyk7XHJcblx0XHRcdGJveC5maW5kKCcuc2VsZWN0ZWQtZGF5cycpLmhpZGUoKTtcclxuXHRcdFx0aWYgKG9wdC5zdGFydClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGJveC5maW5kKCcuc3RhcnQtZGF5JykuaHRtbChnZXREYXRlU3RyaW5nKG5ldyBEYXRlKHBhcnNlSW50KG9wdC5zdGFydCkpKSk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKG9wdC5lbmQpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRib3guZmluZCgnLmVuZC1kYXknKS5odG1sKGdldERhdGVTdHJpbmcobmV3IERhdGUocGFyc2VJbnQob3B0LmVuZCkpKSk7XHJcblx0XHRcdH1cclxuICAgICAgICAgICAgdmFyIGRhdGVSYW5nZTtcclxuXHRcdFx0aWYgKG9wdC5zdGFydCAmJiBvcHQuc2luZ2xlRGF0ZSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGJveC5maW5kKCcuYXBwbHktYnRuJykucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcblx0XHRcdFx0ZGF0ZVJhbmdlID0gZ2V0RGF0ZVN0cmluZyhuZXcgRGF0ZShvcHQuc3RhcnQpKTtcclxuXHRcdFx0XHRvcHQuc2V0VmFsdWUuY2FsbChzZWxmRG9tLCBkYXRlUmFuZ2UsIGdldERhdGVTdHJpbmcobmV3IERhdGUob3B0LnN0YXJ0KSksIGdldERhdGVTdHJpbmcobmV3IERhdGUob3B0LmVuZCkpKTtcclxuXHJcblx0XHRcdFx0aWYgKGluaXRpYXRlZCAmJiAhc2lsZW50KVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdCQoc2VsZikudHJpZ2dlcignZGF0ZXBpY2tlci1jaGFuZ2UnLFxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHQndmFsdWUnOiBkYXRlUmFuZ2UsXHJcblx0XHRcdFx0XHRcdCdkYXRlMScgOiBuZXcgRGF0ZShvcHQuc3RhcnQpXHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZiAob3B0LnN0YXJ0ICYmIG9wdC5lbmQpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRib3guZmluZCgnLnNlbGVjdGVkLWRheXMnKS5zaG93KCkuZmluZCgnLnNlbGVjdGVkLWRheXMtbnVtJykuaHRtbChjb3VudERheXMob3B0LmVuZCwgb3B0LnN0YXJ0KSk7XHJcblx0XHRcdFx0Ym94LmZpbmQoJy5hcHBseS1idG4nKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuXHRcdFx0XHRkYXRlUmFuZ2UgPSBnZXREYXRlU3RyaW5nKG5ldyBEYXRlKG9wdC5zdGFydCkpKyBvcHQuc2VwYXJhdG9yICtnZXREYXRlU3RyaW5nKG5ldyBEYXRlKG9wdC5lbmQpKTtcclxuXHRcdFx0XHRvcHQuc2V0VmFsdWUuY2FsbChzZWxmRG9tLGRhdGVSYW5nZSwgZ2V0RGF0ZVN0cmluZyhuZXcgRGF0ZShvcHQuc3RhcnQpKSwgZ2V0RGF0ZVN0cmluZyhuZXcgRGF0ZShvcHQuZW5kKSkpO1xyXG5cdFx0XHRcdGlmIChpbml0aWF0ZWQgJiYgIXNpbGVudClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHQkKHNlbGYpLnRyaWdnZXIoJ2RhdGVwaWNrZXItY2hhbmdlJyxcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0J3ZhbHVlJzogZGF0ZVJhbmdlLFxyXG5cdFx0XHRcdFx0XHQnZGF0ZTEnIDogbmV3IERhdGUob3B0LnN0YXJ0KSxcclxuXHRcdFx0XHRcdFx0J2RhdGUyJyA6IG5ldyBEYXRlKG9wdC5lbmQpXHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZiAoZm9yY2VWYWxpZClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGJveC5maW5kKCcuYXBwbHktYnRuJykucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Ym94LmZpbmQoJy5hcHBseS1idG4nKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGNvdW50RGF5cyhzdGFydCxlbmQpXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiBNYXRoLmFicyggZGF5c0Zyb20xOTcwKHN0YXJ0KSAtIGRheXNGcm9tMTk3MChlbmQpICkgKyAxO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHNldERhdGVSYW5nZShkYXRlMSxkYXRlMixzaWxlbnQpXHJcblx0XHR7XHJcblx0XHRcdGlmIChkYXRlMS5nZXRUaW1lKCkgPiBkYXRlMi5nZXRUaW1lKCkpXHJcblx0XHRcdHtcclxuXHRcdFx0XHR2YXIgdG1wID0gZGF0ZTI7XHJcblx0XHRcdFx0ZGF0ZTIgPSBkYXRlMTtcclxuXHRcdFx0XHRkYXRlMSA9IHRtcDtcclxuXHRcdFx0XHR0bXAgPSBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHRcdHZhciB2YWxpZCA9IHRydWU7XHJcblx0XHRcdGlmIChvcHQuc3RhcnREYXRlICYmIGNvbXBhcmVfZGF5KGRhdGUxLG9wdC5zdGFydERhdGUpIDwgMCkgdmFsaWQgPSBmYWxzZTtcclxuXHRcdFx0aWYgKG9wdC5lbmREYXRlICYmIGNvbXBhcmVfZGF5KGRhdGUyLG9wdC5lbmREYXRlKSA+IDApIHZhbGlkID0gZmFsc2U7XHJcblx0XHRcdGlmICghdmFsaWQpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRzaG93TW9udGgob3B0LnN0YXJ0RGF0ZSwnbW9udGgxJyk7XHJcblx0XHRcdFx0c2hvd01vbnRoKG5leHRNb250aChvcHQuc3RhcnREYXRlKSwnbW9udGgyJyk7XHJcblx0XHRcdFx0c2hvd0dhcCgpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0b3B0LnN0YXJ0ID0gZGF0ZTEuZ2V0VGltZSgpO1xyXG5cdFx0XHRvcHQuZW5kID0gZGF0ZTIuZ2V0VGltZSgpO1xyXG5cclxuXHRcdFx0aWYgKG9wdC50aW1lLmVuYWJsZWQpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZW5kZXJUaW1lKCd0aW1lMScsIGRhdGUxKTtcclxuXHRcdFx0XHRyZW5kZXJUaW1lKCd0aW1lMicsIGRhdGUyKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKG9wdC5zdGlja3lNb250aHMgfHwgKGNvbXBhcmVfZGF5KGRhdGUxLGRhdGUyKSA+IDAgJiYgY29tcGFyZV9tb250aChkYXRlMSxkYXRlMikgPT09IDApKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYgKG9wdC5sb29rQmVoaW5kKSB7XHJcblx0XHRcdFx0XHRkYXRlMSA9IHByZXZNb250aChkYXRlMik7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGRhdGUyID0gbmV4dE1vbnRoKGRhdGUxKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmKG9wdC5zdGlja3lNb250aHMgJiYgb3B0LmVuZERhdGUgIT09IGZhbHNlICYmIGNvbXBhcmVfbW9udGgoZGF0ZTIsb3B0LmVuZERhdGUpID4gMCkge1xyXG5cdFx0XHRcdGRhdGUxID0gcHJldk1vbnRoKGRhdGUxKTtcclxuXHRcdFx0XHRkYXRlMiA9IHByZXZNb250aChkYXRlMik7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICghb3B0LnN0aWNreU1vbnRocykge1xyXG5cdFx0XHRcdGlmIChjb21wYXJlX21vbnRoKGRhdGUxLGRhdGUyKSA9PT0gMClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRpZiAob3B0Lmxvb2tCZWhpbmQpIHtcclxuXHRcdFx0XHRcdFx0ZGF0ZTEgPSBwcmV2TW9udGgoZGF0ZTIpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0ZGF0ZTIgPSBuZXh0TW9udGgoZGF0ZTEpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0c2hvd01vbnRoKGRhdGUxLCdtb250aDEnKTtcclxuXHRcdFx0c2hvd01vbnRoKGRhdGUyLCdtb250aDInKTtcclxuXHRcdFx0c2hvd0dhcCgpO1xyXG5cdFx0XHRjaGVja1NlbGVjdGlvblZhbGlkKCk7XHJcblx0XHRcdHNob3dTZWxlY3RlZEluZm8oZmFsc2Usc2lsZW50KTtcclxuXHRcdFx0YXV0b2Nsb3NlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gc2V0U2luZ2xlRGF0ZShkYXRlMSlcclxuXHRcdHtcclxuXHJcblx0XHRcdHZhciB2YWxpZCA9IHRydWU7XHJcblx0XHRcdGlmIChvcHQuc3RhcnREYXRlICYmIGNvbXBhcmVfZGF5KGRhdGUxLG9wdC5zdGFydERhdGUpIDwgMCkgdmFsaWQgPSBmYWxzZTtcclxuXHRcdFx0aWYgKG9wdC5lbmREYXRlICYmIGNvbXBhcmVfZGF5KGRhdGUxLG9wdC5lbmREYXRlKSA+IDApIHZhbGlkID0gZmFsc2U7XHJcblx0XHRcdGlmICghdmFsaWQpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRzaG93TW9udGgob3B0LnN0YXJ0RGF0ZSwnbW9udGgxJyk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRvcHQuc3RhcnQgPSBkYXRlMS5nZXRUaW1lKCk7XHJcblxyXG5cclxuXHRcdFx0aWYgKG9wdC50aW1lLmVuYWJsZWQpIHtcclxuXHRcdFx0XHRyZW5kZXJUaW1lKCd0aW1lMScsIGRhdGUxKTtcclxuXHJcblx0XHRcdH1cclxuXHRcdFx0c2hvd01vbnRoKGRhdGUxLCdtb250aDEnKTtcclxuXHRcdFx0aWYgKG9wdC5zaW5nbGVNb250aCAhPT0gdHJ1ZSkge1xyXG4gICAgICBcdFx0XHRcdHZhciBkYXRlMiA9IG5leHRNb250aChkYXRlMSk7XHJcbiAgICAgIFx0XHRcdFx0c2hvd01vbnRoKGRhdGUyLCAnbW9udGgyJyk7XHJcbiAgICBcdFx0XHR9XHJcblx0XHRcdHNob3dHYXAoKTtcclxuXHRcdFx0c2hvd1NlbGVjdGVkSW5mbygpO1xyXG5cdFx0XHRhdXRvY2xvc2UoKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBzaG93U2VsZWN0ZWREYXlzKClcclxuXHRcdHtcclxuXHRcdFx0aWYgKCFvcHQuc3RhcnQgJiYgIW9wdC5lbmQpIHJldHVybjtcclxuXHRcdFx0Ym94LmZpbmQoJy5kYXknKS5lYWNoKGZ1bmN0aW9uKClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZhciB0aW1lID0gcGFyc2VJbnQoJCh0aGlzKS5hdHRyKCd0aW1lJykpLFxyXG5cdFx0XHRcdFx0c3RhcnQgPSBvcHQuc3RhcnQsXHJcblx0XHRcdFx0XHRlbmQgPSBvcHQuZW5kO1xyXG5cdFx0XHRcdGlmIChvcHQudGltZS5lbmFibGVkKSB7XHJcblx0XHRcdFx0XHR0aW1lID0gbW9tZW50KHRpbWUpLnN0YXJ0T2YoJ2RheScpLnZhbHVlT2YoKTtcclxuXHRcdFx0XHRcdHN0YXJ0ID0gbW9tZW50KHN0YXJ0IHx8IG1vbWVudCgpLnZhbHVlT2YoKSkuc3RhcnRPZignZGF5JykudmFsdWVPZigpO1xyXG5cdFx0XHRcdFx0ZW5kID0gbW9tZW50KGVuZCB8fCBtb21lbnQoKS52YWx1ZU9mKCkpLnN0YXJ0T2YoJ2RheScpLnZhbHVlT2YoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKFxyXG5cdFx0XHRcdFx0KG9wdC5zdGFydCAmJiBvcHQuZW5kICYmIGVuZCA+PSB0aW1lICYmIHN0YXJ0IDw9IHRpbWUgKSB8fFxyXG5cdFx0XHRcdFx0KCBvcHQuc3RhcnQgJiYgIW9wdC5lbmQgJiYgbW9tZW50KHN0YXJ0KS5mb3JtYXQoJ1lZWVktTU0tREQnKSA9PSBtb21lbnQodGltZSkuZm9ybWF0KCdZWVlZLU1NLUREJykgKVxyXG5cdFx0XHRcdClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHQkKHRoaXMpLmFkZENsYXNzKCdjaGVja2VkJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2VcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHQkKHRoaXMpLnJlbW92ZUNsYXNzKCdjaGVja2VkJyk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvL2FkZCBmaXJzdC1kYXRlLXNlbGVjdGVkIGNsYXNzIG5hbWUgdG8gdGhlIGZpcnN0IGRhdGUgc2VsZWN0ZWRcclxuXHRcdFx0XHRpZiAoIG9wdC5zdGFydCAmJiBtb21lbnQoc3RhcnQpLmZvcm1hdCgnWVlZWS1NTS1ERCcpID09IG1vbWVudCh0aW1lKS5mb3JtYXQoJ1lZWVktTU0tREQnKSApXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0JCh0aGlzKS5hZGRDbGFzcygnZmlyc3QtZGF0ZS1zZWxlY3RlZCcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0JCh0aGlzKS5yZW1vdmVDbGFzcygnZmlyc3QtZGF0ZS1zZWxlY3RlZCcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvL2FkZCBsYXN0LWRhdGUtc2VsZWN0ZWRcclxuXHRcdFx0XHRpZiAoIG9wdC5lbmQgJiYgbW9tZW50KGVuZCkuZm9ybWF0KCdZWVlZLU1NLUREJykgPT0gbW9tZW50KHRpbWUpLmZvcm1hdCgnWVlZWS1NTS1ERCcpIClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHQkKHRoaXMpLmFkZENsYXNzKCdsYXN0LWRhdGUtc2VsZWN0ZWQnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoJ2xhc3QtZGF0ZS1zZWxlY3RlZCcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRib3guZmluZCgnLndlZWstbnVtYmVyJykuZWFjaChmdW5jdGlvbigpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZiAoJCh0aGlzKS5hdHRyKCdkYXRhLXN0YXJ0LXRpbWUnKSA9PSBvcHQuc3RhcnRXZWVrKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdCQodGhpcykuYWRkQ2xhc3MoJ3dlZWstbnVtYmVyLXNlbGVjdGVkJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBzaG93TW9udGgoZGF0ZSxtb250aClcclxuXHRcdHtcclxuXHRcdFx0ZGF0ZSA9IG1vbWVudChkYXRlKS50b0RhdGUoKTtcclxuXHRcdFx0dmFyIG1vbnRoTmFtZSA9IG5hbWVNb250aChkYXRlLmdldE1vbnRoKCkpO1xyXG5cdFx0XHRib3guZmluZCgnLicrbW9udGgrJyAubW9udGgtbmFtZScpLmh0bWwobW9udGhOYW1lKycgJytkYXRlLmdldEZ1bGxZZWFyKCkpO1xyXG5cdFx0XHRib3guZmluZCgnLicrbW9udGgrJyB0Ym9keScpLmh0bWwoY3JlYXRlTW9udGhIVE1MKGRhdGUpKTtcclxuXHRcdFx0b3B0W21vbnRoXSA9IGRhdGU7XHJcblx0XHRcdHVwZGF0ZVNlbGVjdGFibGVSYW5nZSgpO1xyXG5cdFx0XHRiaW5kRGF5RXZlbnRzKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gYmluZERheUV2ZW50cygpXHJcblx0XHR7XHJcblx0XHQgICAgYm94LmZpbmQoJy5kYXknKS51bmJpbmQoXCJjbGlja1wiKS5jbGljayhmdW5jdGlvbiAoZXZ0KSB7XHJcblx0XHRcdGRheUNsaWNrZWQoJCh0aGlzKSk7XHJcblx0XHQgICAgfSk7XHJcblxyXG5cdFx0ICAgIGJveC5maW5kKCcuZGF5JykudW5iaW5kKFwibW91c2VlbnRlclwiKS5tb3VzZWVudGVyKGZ1bmN0aW9uIChldnQpIHtcclxuXHRcdFx0ZGF5SG92ZXJpbmcoJCh0aGlzKSk7XHJcblx0XHQgICAgfSk7XHJcblxyXG5cdFx0ICAgIGJveC5maW5kKCcuZGF5JykudW5iaW5kKFwibW91c2VsZWF2ZVwiKS5tb3VzZWxlYXZlKGZ1bmN0aW9uIChldnQpIHtcclxuXHRcdFx0Ym94LmZpbmQoJy5kYXRlLXJhbmdlLWxlbmd0aC10aXAnKS5oaWRlKCk7XHJcblx0XHRcdGlmIChvcHQuc2luZ2xlRGF0ZSkge1xyXG5cdFx0XHQgICAgY2xlYXJIb3ZlcmluZygpO1xyXG5cdFx0XHR9XHJcblx0XHQgICAgfSk7XHJcblxyXG5cdFx0ICAgIGJveC5maW5kKCcud2Vlay1udW1iZXInKS51bmJpbmQoXCJjbGlja1wiKS5jbGljayhmdW5jdGlvbiAoZXZ0KSB7XHJcblx0XHRcdHdlZWtOdW1iZXJDbGlja2VkKCQodGhpcykpO1xyXG5cdFx0ICAgIH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHNob3dUaW1lKGRhdGUsbmFtZSlcclxuXHRcdHtcclxuXHRcdFx0Ym94LmZpbmQoJy4nICsgbmFtZSkuYXBwZW5kKGdldFRpbWVIVE1MKCkpO1xyXG5cdFx0XHRyZW5kZXJUaW1lKG5hbWUsIGRhdGUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIG5hbWVNb250aChtKVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gbGFuZygnbW9udGgtbmFtZScpW21dO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGdldERhdGVTdHJpbmcoZClcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuIG1vbWVudChkKS5mb3JtYXQob3B0LmZvcm1hdCk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gc2hvd0dhcCgpXHJcblx0XHR7XHJcblx0XHRcdHNob3dTZWxlY3RlZERheXMoKTtcclxuXHRcdFx0dmFyIG0xID0gcGFyc2VJbnQobW9tZW50KG9wdC5tb250aDEpLmZvcm1hdCgnWVlZWU1NJykpO1xyXG5cdFx0XHR2YXIgbTIgPSBwYXJzZUludChtb21lbnQob3B0Lm1vbnRoMikuZm9ybWF0KCdZWVlZTU0nKSk7XHJcblx0XHRcdHZhciBwID0gTWF0aC5hYnMobTEgLSBtMik7XHJcblx0XHRcdHZhciBzaG91bGRTaG93ID0gKHAgPiAxICYmIHAgIT04OSk7XHJcblx0XHRcdGlmIChzaG91bGRTaG93KVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Ym94LmFkZENsYXNzKCdoYXMtZ2FwJykucmVtb3ZlQ2xhc3MoJ25vLWdhcCcpLmZpbmQoJy5nYXAnKS5jc3MoJ3Zpc2liaWxpdHknLCd2aXNpYmxlJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Ym94LnJlbW92ZUNsYXNzKCdoYXMtZ2FwJykuYWRkQ2xhc3MoJ25vLWdhcCcpLmZpbmQoJy5nYXAnKS5jc3MoJ3Zpc2liaWxpdHknLCdoaWRkZW4nKTtcclxuXHRcdFx0fVxyXG5cdFx0XHR2YXIgaDEgPSBib3guZmluZCgndGFibGUubW9udGgxJykuaGVpZ2h0KCk7XHJcblx0XHRcdHZhciBoMiA9IGJveC5maW5kKCd0YWJsZS5tb250aDInKS5oZWlnaHQoKTtcclxuXHRcdFx0Ym94LmZpbmQoJy5nYXAnKS5oZWlnaHQoTWF0aC5tYXgoaDEsaDIpKzEwKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBjbG9zZURhdGVQaWNrZXIoKVxyXG5cdFx0e1xyXG5cdFx0XHRpZiAob3B0LmFsd2F5c09wZW4pIHJldHVybjtcclxuXHJcblx0XHRcdHZhciBhZnRlckFuaW0gPSBmdW5jdGlvbigpXHJcblx0XHRcdHtcclxuXHRcdFx0XHQkKHNlbGYpLmRhdGEoJ2RhdGUtcGlja2VyLW9wZW5lZCcsZmFsc2UpO1xyXG5cdFx0XHRcdCQoc2VsZikudHJpZ2dlcignZGF0ZXBpY2tlci1jbG9zZWQnLCB7cmVsYXRlZFRhcmdldDogYm94fSk7XHJcblx0XHRcdH07XHJcblx0XHRcdGlmIChvcHQuY3VzdG9tQ2xvc2VBbmltYXRpb24pXHJcblx0XHRcdHtcclxuXHRcdFx0XHRvcHQuY3VzdG9tQ2xvc2VBbmltYXRpb24uY2FsbChib3guZ2V0KDApLCBhZnRlckFuaW0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0e1xyXG5cdFx0XHRcdCQoYm94KS5zbGlkZVVwKG9wdC5kdXJhdGlvbiwgYWZ0ZXJBbmltKTtcclxuXHRcdFx0fVxyXG5cdFx0XHQkKHNlbGYpLnRyaWdnZXIoJ2RhdGVwaWNrZXItY2xvc2UnLCB7cmVsYXRlZFRhcmdldDogYm94fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gcmVkcmF3RGF0ZVBpY2tlcigpXHJcblx0XHR7XHJcblx0XHRcdHNob3dNb250aChvcHQubW9udGgxLCAnbW9udGgxJyk7XHJcblx0XHRcdHNob3dNb250aChvcHQubW9udGgyLCAnbW9udGgyJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gY29tcGFyZV9tb250aChtMSxtMilcclxuXHRcdHtcclxuXHRcdFx0dmFyIHAgPSBwYXJzZUludChtb21lbnQobTEpLmZvcm1hdCgnWVlZWU1NJykpIC0gcGFyc2VJbnQobW9tZW50KG0yKS5mb3JtYXQoJ1lZWVlNTScpKTtcclxuXHRcdFx0aWYgKHAgPiAwICkgcmV0dXJuIDE7XHJcblx0XHRcdGlmIChwID09PSAwKSByZXR1cm4gMDtcclxuXHRcdFx0cmV0dXJuIC0xO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGNvbXBhcmVfZGF5KG0xLG0yKVxyXG5cdFx0e1xyXG5cdFx0XHR2YXIgcCA9IHBhcnNlSW50KG1vbWVudChtMSkuZm9ybWF0KCdZWVlZTU1ERCcpKSAtIHBhcnNlSW50KG1vbWVudChtMikuZm9ybWF0KCdZWVlZTU1ERCcpKTtcclxuXHRcdFx0aWYgKHAgPiAwICkgcmV0dXJuIDE7XHJcblx0XHRcdGlmIChwID09PSAwKSByZXR1cm4gMDtcclxuXHRcdFx0cmV0dXJuIC0xO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIG5leHRNb250aChtb250aClcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuIG1vbWVudChtb250aCkuYWRkKDEsICdtb250aHMnKS50b0RhdGUoKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBwcmV2TW9udGgobW9udGgpXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiBtb21lbnQobW9udGgpLmFkZCgtMSwgJ21vbnRocycpLnRvRGF0ZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGdldFRpbWVIVE1MKClcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuICc8ZGl2PicgK1xyXG5cdFx0XHRcdFx0JzxzcGFuPicrbGFuZygnVGltZScpKyc6IDxzcGFuIGNsYXNzPVwiaG91ci12YWxcIj4wMDwvc3Bhbj46PHNwYW4gY2xhc3M9XCJtaW51dGUtdmFsXCI+MDA8L3NwYW4+PC9zcGFuPicgK1xyXG5cdFx0XHRcdCc8L2Rpdj4nICtcclxuXHRcdFx0XHQnPGRpdiBjbGFzcz1cImhvdXJcIj4nICtcclxuXHRcdFx0XHRcdCc8bGFiZWw+JytsYW5nKCdIb3VyJykrJzogPGlucHV0IHR5cGU9XCJyYW5nZVwiIGNsYXNzPVwiaG91ci1yYW5nZVwiIG5hbWU9XCJob3VyXCIgbWluPVwiMFwiIG1heD1cIjIzXCI+PC9sYWJlbD4nICtcclxuXHRcdFx0XHQnPC9kaXY+JyArXHJcblx0XHRcdFx0JzxkaXYgY2xhc3M9XCJtaW51dGVcIj4nICtcclxuXHRcdFx0XHRcdCc8bGFiZWw+JytsYW5nKCdNaW51dGUnKSsnOiA8aW5wdXQgdHlwZT1cInJhbmdlXCIgY2xhc3M9XCJtaW51dGUtcmFuZ2VcIiBuYW1lPVwibWludXRlXCIgbWluPVwiMFwiIG1heD1cIjU5XCI+PC9sYWJlbD4nICtcclxuXHRcdFx0XHQnPC9kaXY+JztcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBjcmVhdGVEb20oKVxyXG5cdFx0e1xyXG5cdFx0XHR2YXIgaHRtbCA9ICc8ZGl2IGNsYXNzPVwiZGF0ZS1waWNrZXItd3JhcHBlcic7XHJcblx0XHRcdGlmICggb3B0LmV4dHJhQ2xhc3MgKSBodG1sICs9ICcgJytvcHQuZXh0cmFDbGFzcysnICc7XHJcblx0XHRcdGlmICggb3B0LnNpbmdsZURhdGUgKSBodG1sICs9ICcgc2luZ2xlLWRhdGUgJztcclxuXHRcdFx0aWYgKCAhb3B0LnNob3dTaG9ydGN1dHMgKSBodG1sICs9ICcgbm8tc2hvcnRjdXRzICc7XHJcblx0XHRcdGlmICggIW9wdC5zaG93VG9wYmFyICkgaHRtbCArPSAnIG5vLXRvcGJhciAnO1xyXG5cdFx0XHRpZiAoIG9wdC5jdXN0b21Ub3BCYXIpIGh0bWwgKz0gJyBjdXN0b20tdG9wYmFyICc7XHJcblx0XHRcdGh0bWwgKz0gJ1wiPic7XHJcblxyXG5cdFx0XHRpZiAob3B0LnNob3dUb3BiYXIpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRodG1sICs9ICc8ZGl2IGNsYXNzPVwiZHJwX3RvcC1iYXJcIj4nO1xyXG5cclxuXHRcdFx0XHRpZiAob3B0LmN1c3RvbVRvcEJhcilcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRpZiAodHlwZW9mIG9wdC5jdXN0b21Ub3BCYXIgPT0gJ2Z1bmN0aW9uJykgb3B0LmN1c3RvbVRvcEJhciA9IG9wdC5jdXN0b21Ub3BCYXIoKTtcclxuXHRcdFx0XHRcdGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJjdXN0b20tdG9wXCI+JytvcHQuY3VzdG9tVG9wQmFyKyc8L2Rpdj4nO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0aHRtbCArPSAnPGRpdiBjbGFzcz1cIm5vcm1hbC10b3BcIj4nICtcclxuXHRcdFx0XHRcdFx0XHQnPHNwYW4gc3R5bGU9XCJjb2xvcjojMzMzXCI+JytsYW5nKCdzZWxlY3RlZCcpKycgPC9zcGFuPiA8YiBjbGFzcz1cInN0YXJ0LWRheVwiPi4uLjwvYj4nO1xyXG5cdFx0XHRcdFx0aWYgKCAhIG9wdC5zaW5nbGVEYXRlICkge1xyXG5cdFx0XHRcdFx0XHRodG1sICs9ICcgPHNwYW4gY2xhc3M9XCJzZXBhcmF0b3ItZGF5XCI+JytvcHQuc2VwYXJhdG9yKyc8L3NwYW4+IDxiIGNsYXNzPVwiZW5kLWRheVwiPi4uLjwvYj4gPGkgY2xhc3M9XCJzZWxlY3RlZC1kYXlzXCI+KDxzcGFuIGNsYXNzPVwic2VsZWN0ZWQtZGF5cy1udW1cIj4zPC9zcGFuPiAnK2xhbmcoJ2RheXMnKSsnKTwvaT4nO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aHRtbCArPSAnPC9kaXY+JztcclxuXHRcdFx0XHRcdGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJlcnJvci10b3BcIj5lcnJvcjwvZGl2PicgK1xyXG5cdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cImRlZmF1bHQtdG9wXCI+ZGVmYXVsdDwvZGl2Pic7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRodG1sICs9ICc8aW5wdXQgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYXBwbHktYnRuIGRpc2FibGVkJysgZ2V0QXBwbHlCdG5DbGFzcygpICsnXCIgdmFsdWU9XCInK2xhbmcoJ2FwcGx5JykrJ1wiIC8+JztcclxuXHRcdFx0XHRodG1sICs9ICc8L2Rpdj4nO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2YXIgX2NvbHNwYW4gPSBvcHQuc2hvd1dlZWtOdW1iZXJzID8gNiA6IDU7XHJcblxyXG4gICAgICAgICAgICB2YXIgYXJyb3dQcmV2ID0gJyZsdDsnO1xyXG4gICAgICAgICAgICBpZihvcHQuY3VzdG9tQXJyb3dQcmV2U3ltYm9sKSBhcnJvd1ByZXYgPSBvcHQuY3VzdG9tQXJyb3dQcmV2U3ltYm9sO1xyXG5cclxuICAgICAgICAgICAgdmFyIGFycm93TmV4dCA9ICcmZ3Q7JztcclxuICAgICAgICAgICAgaWYob3B0LmN1c3RvbUFycm93TmV4dFN5bWJvbCkgYXJyb3dOZXh0ID0gb3B0LmN1c3RvbUFycm93TmV4dFN5bWJvbDtcclxuXHJcbiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJtb250aC13cmFwcGVyXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJyAgIDx0YWJsZSBjbGFzcz1cIm1vbnRoMVwiIGNlbGxzcGFjaW5nPVwiMFwiIGJvcmRlcj1cIjBcIiBjZWxscGFkZGluZz1cIjBcIj4nK1xyXG4gICAgICAgICAgICAgICAgICAgICcgICAgICAgPHRoZWFkPicrXHJcbiAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgICAgPHRyIGNsYXNzPVwiY2FwdGlvblwiPicrXHJcbiAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgICAgICAgIDx0aCBzdHlsZT1cIndpZHRoOjI3cHg7XCI+JytcclxuICAgICAgICAgICAgICAgICAgICAnICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicHJldlwiPicrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyb3dQcmV2ICtcclxuICAgICAgICAgICAgICAgICAgICAnICAgICAgICAgICAgICAgICAgIDwvc3Bhbj4nK1xyXG4gICAgICAgICAgICAgICAgICAgICcgICAgICAgICAgICAgICA8L3RoPicrXHJcbiAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgICAgICAgIDx0aCBjb2xzcGFuPVwiJyArIF9jb2xzcGFuICsgJ1wiIGNsYXNzPVwibW9udGgtbmFtZVwiPicrXHJcbiAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgICAgICAgIDwvdGg+JytcclxuICAgICAgICAgICAgICAgICAgICAnICAgICAgICAgICAgICAgPHRoIHN0eWxlPVwid2lkdGg6MjdweDtcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG9wdC5zaW5nbGVEYXRlIHx8ICFvcHQuc3RpY2t5TW9udGhzID8gJzxzcGFuIGNsYXNzPVwibmV4dFwiPicgKyBhcnJvd05leHQgKyAnPC9zcGFuPicgOiAnJykgK1xyXG4gICAgICAgICAgICAgICAgICAgICcgICAgICAgICAgICAgICA8L3RoPicrXHJcbiAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgICAgPC90cj4nK1xyXG4gICAgICAgICAgICAgICAgICAgICcgICAgICAgICAgIDx0ciBjbGFzcz1cIndlZWstbmFtZVwiPicgKyBnZXRXZWVrSGVhZCgpICtcclxuICAgICAgICAgICAgICAgICAgICAnICAgICAgIDwvdGhlYWQ+JytcclxuICAgICAgICAgICAgICAgICAgICAnICAgICAgIDx0Ym9keT48L3Rib2R5PicrXHJcbiAgICAgICAgICAgICAgICAgICAgJyAgIDwvdGFibGU+JztcclxuXHJcblx0XHRcdGlmICggaGFzTW9udGgyKCkgKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aHRtbCArPSAnPGRpdiBjbGFzcz1cImdhcFwiPicgKyBnZXRHYXBIVE1MKCkgKyAnPC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8dGFibGUgY2xhc3M9XCJtb250aDJcIiBjZWxsc3BhY2luZz1cIjBcIiBib3JkZXI9XCIwXCIgY2VsbHBhZGRpbmc9XCIwXCI+JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgJyAgIDx0aGVhZD4nK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnICAgPHRyIGNsYXNzPVwiY2FwdGlvblwiPicrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICcgICAgICAgPHRoIHN0eWxlPVwid2lkdGg6MjdweDtcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIW9wdC5zdGlja3lNb250aHMgPyAnPHNwYW4gY2xhc3M9XCJwcmV2XCI+JyArIGFycm93UHJldiArICc8L3NwYW4+JyA6ICcnKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICcgICAgICAgPC90aD4nK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnICAgICAgIDx0aCBjb2xzcGFuPVwiJyArIF9jb2xzcGFuICsgJ1wiIGNsYXNzPVwibW9udGgtbmFtZVwiPicrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICcgICAgICAgPC90aD4nK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnICAgICAgIDx0aCBzdHlsZT1cIndpZHRoOjI3cHg7XCI+JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJuZXh0XCI+JyArIGFycm93TmV4dCArICc8L3NwYW4+JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgJyAgICAgICA8L3RoPicrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICcgICA8L3RyPicrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICcgICA8dHIgY2xhc3M9XCJ3ZWVrLW5hbWVcIj4nICsgZ2V0V2Vla0hlYWQoKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICcgICA8L3RoZWFkPicrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICcgICA8dGJvZHk+PC90Ym9keT4nK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPC90YWJsZT4nO1xyXG5cclxuXHRcdFx0fVxyXG5cdFx0XHRcdC8vKyc8L2Rpdj4nXHJcblx0XHRcdGh0bWwgKz1cdCc8ZGl2IHN0eWxlPVwiY2xlYXI6Ym90aDtoZWlnaHQ6MDtmb250LXNpemU6MDtcIj48L2Rpdj4nICtcclxuXHRcdFx0XHQnPGRpdiBjbGFzcz1cInRpbWVcIj4nICtcclxuXHRcdFx0XHQnPGRpdiBjbGFzcz1cInRpbWUxXCI+PC9kaXY+JztcclxuXHRcdFx0aWYgKCAhIG9wdC5zaW5nbGVEYXRlICkge1xyXG5cdFx0XHRcdGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJ0aW1lMlwiPjwvZGl2Pic7XHJcblx0XHRcdH1cclxuXHRcdFx0aHRtbCArPSAnPC9kaXY+JyArXHJcblx0XHRcdFx0JzxkaXYgc3R5bGU9XCJjbGVhcjpib3RoO2hlaWdodDowO2ZvbnQtc2l6ZTowO1wiPjwvZGl2PicgK1xyXG5cdFx0XHRcdCc8L2Rpdj4nO1xyXG5cclxuXHRcdFx0aHRtbCArPSAnPGRpdiBjbGFzcz1cImZvb3RlclwiPic7XHJcblx0XHRcdGlmIChvcHQuc2hvd1Nob3J0Y3V0cylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJzaG9ydGN1dHNcIj48Yj4nK2xhbmcoJ3Nob3J0Y3V0cycpKyc8L2I+JztcclxuXHJcblx0XHRcdFx0dmFyIGRhdGEgPSBvcHQuc2hvcnRjdXRzO1xyXG5cdFx0XHRcdGlmIChkYXRhKVxyXG5cdFx0XHRcdHsgICB2YXIgbmFtZTtcclxuXHRcdFx0XHRcdGlmIChkYXRhWydwcmV2LWRheXMnXSAmJiBkYXRhWydwcmV2LWRheXMnXS5sZW5ndGggPiAwKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRodG1sICs9ICcmbmJzcDs8c3BhbiBjbGFzcz1cInByZXYtZGF5c1wiPicrbGFuZygncGFzdCcpO1xyXG5cdFx0XHRcdFx0XHRmb3IodmFyIGk9MDtpPGRhdGFbJ3ByZXYtZGF5cyddLmxlbmd0aDsgaSsrKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0bmFtZSA9IGRhdGFbJ3ByZXYtZGF5cyddW2ldO1xyXG5cdFx0XHRcdFx0XHRcdG5hbWUgKz0gKGRhdGFbJ3ByZXYtZGF5cyddW2ldID4gMSkgPyBsYW5nKCdkYXlzJykgOiBsYW5nKCdkYXknKTtcclxuXHRcdFx0XHRcdFx0XHRodG1sICs9ICcgPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiIHNob3J0Y3V0PVwiZGF5LC0nK2RhdGFbJ3ByZXYtZGF5cyddW2ldKydcIj4nK25hbWUrJzwvYT4nO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGh0bWwrPSc8L3NwYW4+JztcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRpZiAoZGF0YVsnbmV4dC1kYXlzJ10gJiYgZGF0YVsnbmV4dC1kYXlzJ10ubGVuZ3RoID4gMClcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0aHRtbCArPSAnJm5ic3A7PHNwYW4gY2xhc3M9XCJuZXh0LWRheXNcIj4nK2xhbmcoJ2ZvbGxvd2luZycpO1xyXG5cdFx0XHRcdFx0XHRmb3IodmFyIGk9MDtpPGRhdGFbJ25leHQtZGF5cyddLmxlbmd0aDsgaSsrKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0bmFtZSA9IGRhdGFbJ25leHQtZGF5cyddW2ldO1xyXG5cdFx0XHRcdFx0XHRcdG5hbWUgKz0gKGRhdGFbJ25leHQtZGF5cyddW2ldID4gMSkgPyBsYW5nKCdkYXlzJykgOiBsYW5nKCdkYXknKTtcclxuXHRcdFx0XHRcdFx0XHRodG1sICs9ICcgPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiIHNob3J0Y3V0PVwiZGF5LCcrZGF0YVsnbmV4dC1kYXlzJ11baV0rJ1wiPicrbmFtZSsnPC9hPic7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0aHRtbCs9ICc8L3NwYW4+JztcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRpZiAoZGF0YS5wcmV2ICYmIGRhdGEucHJldi5sZW5ndGggPiAwKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRodG1sICs9ICcmbmJzcDs8c3BhbiBjbGFzcz1cInByZXYtYnV0dG9uc1wiPicrbGFuZygncHJldmlvdXMnKTtcclxuXHRcdFx0XHRcdFx0Zm9yKHZhciBpPTA7aTxkYXRhLnByZXYubGVuZ3RoOyBpKyspXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRuYW1lID0gbGFuZygncHJldi0nK2RhdGEucHJldltpXSk7XHJcblx0XHRcdFx0XHRcdFx0aHRtbCArPSAnIDxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIiBzaG9ydGN1dD1cInByZXYsJytkYXRhLnByZXZbaV0rJ1wiPicrbmFtZSsnPC9hPic7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0aHRtbCs9Jzwvc3Bhbj4nO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGlmIChkYXRhLm5leHQgJiYgZGF0YS5uZXh0Lmxlbmd0aCA+IDApXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGh0bWwgKz0gJyZuYnNwOzxzcGFuIGNsYXNzPVwibmV4dC1idXR0b25zXCI+JytsYW5nKCduZXh0Jyk7XHJcblx0XHRcdFx0XHRcdGZvcih2YXIgaT0wO2k8ZGF0YS5uZXh0Lmxlbmd0aDsgaSsrKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0bmFtZSA9IGxhbmcoJ25leHQtJytkYXRhLm5leHRbaV0pO1xyXG5cdFx0XHRcdFx0XHRcdGh0bWwgKz0gJyA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCIgc2hvcnRjdXQ9XCJuZXh0LCcrZGF0YS5uZXh0W2ldKydcIj4nK25hbWUrJzwvYT4nO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGh0bWwrPSc8L3NwYW4+JztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmIChvcHQuY3VzdG9tU2hvcnRjdXRzKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGZvcih2YXIgaT0wO2k8b3B0LmN1c3RvbVNob3J0Y3V0cy5sZW5ndGg7IGkrKylcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0dmFyIHNoID0gb3B0LmN1c3RvbVNob3J0Y3V0c1tpXTtcclxuXHRcdFx0XHRcdFx0aHRtbCs9ICcmbmJzcDs8c3BhbiBjbGFzcz1cImN1c3RvbS1zaG9ydGN1dFwiPjxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIiBzaG9ydGN1dD1cImN1c3RvbVwiPicrc2gubmFtZSsnPC9hPjwvc3Bhbj4nO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRodG1sICs9ICc8L2Rpdj4nO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBBZGQgQ3VzdG9tIFZhbHVlcyBEb21cclxuXHRcdFx0aWYgKG9wdC5zaG93Q3VzdG9tVmFsdWVzKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aHRtbCArPSAnPGRpdiBjbGFzcz1cImN1c3RvbVZhbHVlc1wiPjxiPicrKG9wdC5jdXN0b21WYWx1ZUxhYmVsIHx8IGxhbmcoJ2N1c3RvbS12YWx1ZXMnKSkrJzwvYj4nO1xyXG5cclxuXHRcdFx0XHRpZiAob3B0LmN1c3RvbVZhbHVlcylcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRmb3IodmFyIGk9MDtpPG9wdC5jdXN0b21WYWx1ZXMubGVuZ3RoO2krKylcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0dmFyIHZhbCA9IG9wdC5jdXN0b21WYWx1ZXNbaV07XHJcblx0XHRcdFx0XHRcdFx0aHRtbCs9ICcmbmJzcDs8c3BhbiBjbGFzcz1cImN1c3RvbS12YWx1ZVwiPjxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIiBjdXN0b209XCInKyB2YWwudmFsdWUrJ1wiPicrdmFsLm5hbWUrJzwvYT48L3NwYW4+JztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGh0bWwgKz0gJzwvZGl2PjwvZGl2Pic7XHJcblxyXG5cclxuXHRcdFx0cmV0dXJuICQoaHRtbCk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gZ2V0QXBwbHlCdG5DbGFzcygpXHJcblx0XHR7XHJcblx0XHRcdHZhciBrbGFzcyA9ICcnO1xyXG5cdFx0XHRpZiAob3B0LmF1dG9DbG9zZSA9PT0gdHJ1ZSkge1xyXG5cdFx0XHRcdGtsYXNzICs9ICcgaGlkZSc7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKG9wdC5hcHBseUJ0bkNsYXNzICE9PSAnJykge1xyXG5cdFx0XHRcdGtsYXNzICs9ICcgJyArIG9wdC5hcHBseUJ0bkNsYXNzO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBrbGFzcztcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBnZXRXZWVrSGVhZCgpXHJcblx0XHR7XHJcblx0XHRcdHZhciBwcmVwZW5kID0gb3B0LnNob3dXZWVrTnVtYmVycyA/ICc8dGg+JytsYW5nKCd3ZWVrLW51bWJlcicpKyc8L3RoPicgOiAnJztcclxuXHRcdFx0aWYgKG9wdC5zdGFydE9mV2VlayA9PSAnbW9uZGF5JylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBwcmVwZW5kKyc8dGg+JytsYW5nKCd3ZWVrLTEnKSsnPC90aD4nICtcclxuXHRcdFx0XHRcdCc8dGg+JytsYW5nKCd3ZWVrLTInKSsnPC90aD4nICtcclxuXHRcdFx0XHRcdCc8dGg+JytsYW5nKCd3ZWVrLTMnKSsnPC90aD4nICtcclxuXHRcdFx0XHRcdCc8dGg+JytsYW5nKCd3ZWVrLTQnKSsnPC90aD4nICtcclxuXHRcdFx0XHRcdCc8dGg+JytsYW5nKCd3ZWVrLTUnKSsnPC90aD4nICtcclxuXHRcdFx0XHRcdCc8dGg+JytsYW5nKCd3ZWVrLTYnKSsnPC90aD4nICtcclxuXHRcdFx0XHRcdCc8dGg+JytsYW5nKCd3ZWVrLTcnKSsnPC90aD4nO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBwcmVwZW5kKyc8dGg+JytsYW5nKCd3ZWVrLTcnKSsnPC90aD4nICtcclxuXHRcdFx0XHRcdCc8dGg+JytsYW5nKCd3ZWVrLTEnKSsnPC90aD4nICtcclxuXHRcdFx0XHRcdCc8dGg+JytsYW5nKCd3ZWVrLTInKSsnPC90aD4nICtcclxuXHRcdFx0XHRcdCc8dGg+JytsYW5nKCd3ZWVrLTMnKSsnPC90aD4nICtcclxuXHRcdFx0XHRcdCc8dGg+JytsYW5nKCd3ZWVrLTQnKSsnPC90aD4nICtcclxuXHRcdFx0XHRcdCc8dGg+JytsYW5nKCd3ZWVrLTUnKSsnPC90aD4nICtcclxuXHRcdFx0XHRcdCc8dGg+JytsYW5nKCd3ZWVrLTYnKSsnPC90aD4nO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gaXNNb250aE91dE9mQm91bmRzKG1vbnRoKVxyXG5cdFx0e1xyXG5cdFx0XHRtb250aCA9IG1vbWVudChtb250aCk7XHJcblx0XHRcdGlmIChvcHQuc3RhcnREYXRlICYmIG1vbnRoLmVuZE9mKCdtb250aCcpLmlzQmVmb3JlKG9wdC5zdGFydERhdGUpKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKG9wdC5lbmREYXRlICYmIG1vbnRoLnN0YXJ0T2YoJ21vbnRoJykuaXNBZnRlcihvcHQuZW5kRGF0ZSkpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gZ2V0R2FwSFRNTCgpXHJcblx0XHR7XHJcblx0XHRcdHZhciBodG1sID0gWyc8ZGl2IGNsYXNzPVwiZ2FwLXRvcC1tYXNrXCI+PC9kaXY+PGRpdiBjbGFzcz1cImdhcC1ib3R0b20tbWFza1wiPjwvZGl2PjxkaXYgY2xhc3M9XCJnYXAtbGluZXNcIj4nXTtcclxuXHRcdFx0Zm9yKHZhciBpPTA7aTwyMDtpKyspXHJcblx0XHRcdHtcclxuXHRcdFx0XHRodG1sLnB1c2goJzxkaXYgY2xhc3M9XCJnYXAtbGluZVwiPicgK1xyXG5cdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJnYXAtMVwiPjwvZGl2PicgK1xyXG5cdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJnYXAtMlwiPjwvZGl2PicgK1xyXG5cdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJnYXAtM1wiPjwvZGl2PicgK1xyXG5cdFx0XHRcdCc8L2Rpdj4nKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRodG1sLnB1c2goJzwvZGl2PicpO1xyXG5cdFx0XHRyZXR1cm4gaHRtbC5qb2luKCcnKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBoYXNNb250aDIoKVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gKCFvcHQuc2luZ2xlTW9udGgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGF0dHJpYnV0ZXNDYWxsYmFja3MoaW5pdGlhbE9iamVjdCxjYWxsYmFja3NBcnJheSx0b2RheSlcclxuXHRcdHtcclxuXHRcdFx0dmFyIHJlc3VsdE9iamVjdCA9ICQuZXh0ZW5kKHRydWUsIHt9LCBpbml0aWFsT2JqZWN0KTtcclxuXHJcblx0XHRcdCQuZWFjaChjYWxsYmFja3NBcnJheSwgZnVuY3Rpb24oY2JBdHRySW5kZXgsIGNiQXR0cil7XHJcblx0XHRcdFx0dmFyIGFkZEF0dHJpYnV0ZXMgPSBjYkF0dHIodG9kYXkpO1xyXG5cdFx0XHRcdGZvcih2YXIgYXR0ciBpbiBhZGRBdHRyaWJ1dGVzKXtcclxuXHRcdFx0XHRcdGlmKHJlc3VsdE9iamVjdC5oYXNPd25Qcm9wZXJ0eShhdHRyKSl7XHJcblx0XHRcdFx0XHRcdHJlc3VsdE9iamVjdFthdHRyXSArPSBhZGRBdHRyaWJ1dGVzW2F0dHJdO1xyXG5cdFx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHRcdHJlc3VsdE9iamVjdFthdHRyXSA9IGFkZEF0dHJpYnV0ZXNbYXR0cl07XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHZhciBhdHRyU3RyaW5nID0gJyc7XHJcblxyXG5cdFx0XHRmb3IodmFyIGF0dHIgaW4gcmVzdWx0T2JqZWN0KXtcclxuXHRcdFx0XHRpZihyZXN1bHRPYmplY3QuaGFzT3duUHJvcGVydHkoYXR0cikpe1xyXG5cdFx0XHRcdFx0YXR0clN0cmluZyArPSBhdHRyICsgJz1cIicgKyByZXN1bHRPYmplY3RbYXR0cl0gKyAnXCIgJztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBhdHRyU3RyaW5nO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGRheXNGcm9tMTk3MCh0KVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gTWF0aC5mbG9vcih0b0xvY2FsVGltZXN0YW1wKHQpIC8gODY0MDAwMDApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHRvTG9jYWxUaW1lc3RhbXAodClcclxuXHRcdHtcclxuXHRcdFx0aWYgKG1vbWVudC5pc01vbWVudCh0KSkgdCA9IHQudG9EYXRlKCkuZ2V0VGltZSgpO1xyXG5cdFx0XHRpZiAodHlwZW9mIHQgPT0gJ29iamVjdCcgJiYgdC5nZXRUaW1lKSB0ID0gdC5nZXRUaW1lKCk7XHJcblx0XHRcdGlmICh0eXBlb2YgdCA9PSAnc3RyaW5nJyAmJiAhdC5tYXRjaCgvXFxkezEzfS8pKSB0ID0gbW9tZW50KHQsb3B0LmZvcm1hdCkudG9EYXRlKCkuZ2V0VGltZSgpO1xyXG5cdFx0XHR0ID0gcGFyc2VJbnQodCwgMTApIC0gbmV3IERhdGUoKS5nZXRUaW1lem9uZU9mZnNldCgpKjYwKjEwMDA7XHJcblx0XHRcdHJldHVybiB0O1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGNyZWF0ZU1vbnRoSFRNTChkKVxyXG5cdFx0e1xyXG5cdFx0XHR2YXIgZGF5cyA9IFtdO1xyXG5cdFx0XHRkLnNldERhdGUoMSk7XHJcblx0XHRcdHZhciBsYXN0TW9udGggPSBuZXcgRGF0ZShkLmdldFRpbWUoKSAtIDg2NDAwMDAwKTtcclxuXHRcdFx0dmFyIG5vdyA9IG5ldyBEYXRlKCk7XHJcblxyXG5cdFx0XHR2YXIgZGF5T2ZXZWVrID0gZC5nZXREYXkoKTtcclxuXHRcdFx0aWYoKGRheU9mV2VlayA9PT0gMCkgJiYgKG9wdC5zdGFydE9mV2VlayA9PT0gJ21vbmRheScpKSB7XHJcblx0XHRcdFx0Ly8gYWRkIG9uZSB3ZWVrXHJcblx0XHRcdFx0ZGF5T2ZXZWVrID0gNztcclxuXHRcdFx0fVxyXG4gICAgICAgICAgICB2YXIgdG9kYXksdmFsaWQ7XHJcblxyXG5cdFx0XHRpZiAoZGF5T2ZXZWVrID4gMClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGZvciAodmFyIGkgPSBkYXlPZldlZWs7IGkgPiAwOyBpLS0pXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dmFyIGRheSA9IG5ldyBEYXRlKGQuZ2V0VGltZSgpIC0gODY0MDAwMDAqaSk7XHJcblx0XHRcdFx0XHR2YWxpZCA9IGlzVmFsaWRUaW1lKGRheS5nZXRUaW1lKCkpO1xyXG5cdFx0XHRcdFx0aWYgKG9wdC5zdGFydERhdGUgJiYgY29tcGFyZV9kYXkoZGF5LG9wdC5zdGFydERhdGUpIDwgMCkgdmFsaWQgPSBmYWxzZTtcclxuXHRcdFx0XHRcdGlmIChvcHQuZW5kRGF0ZSAmJiBjb21wYXJlX2RheShkYXksb3B0LmVuZERhdGUpID4gMCkgdmFsaWQgPSBmYWxzZTtcclxuXHRcdFx0XHRcdGRheXMucHVzaChcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0ZGF0ZTogZGF5LFxyXG5cdFx0XHRcdFx0XHR0eXBlOidsYXN0TW9udGgnLFxyXG5cdFx0XHRcdFx0XHRkYXk6IGRheS5nZXREYXRlKCksXHJcblx0XHRcdFx0XHRcdHRpbWU6ZGF5LmdldFRpbWUoKSxcclxuXHRcdFx0XHRcdFx0dmFsaWQ6dmFsaWRcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHR2YXIgdG9Nb250aCA9IGQuZ2V0TW9udGgoKTtcclxuXHRcdFx0Zm9yKHZhciBpPTA7IGk8NDA7IGkrKylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHRvZGF5ID0gbW9tZW50KGQpLmFkZChpLCAnZGF5cycpLnRvRGF0ZSgpO1xyXG5cdFx0XHRcdHZhbGlkID0gaXNWYWxpZFRpbWUodG9kYXkuZ2V0VGltZSgpKTtcclxuXHRcdFx0XHRpZiAob3B0LnN0YXJ0RGF0ZSAmJiBjb21wYXJlX2RheSh0b2RheSxvcHQuc3RhcnREYXRlKSA8IDApIHZhbGlkID0gZmFsc2U7XHJcblx0XHRcdFx0aWYgKG9wdC5lbmREYXRlICYmIGNvbXBhcmVfZGF5KHRvZGF5LG9wdC5lbmREYXRlKSA+IDApIHZhbGlkID0gZmFsc2U7XHJcblx0XHRcdFx0ZGF5cy5wdXNoKFxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGRhdGU6IHRvZGF5LFxyXG5cdFx0XHRcdFx0dHlwZTogdG9kYXkuZ2V0TW9udGgoKSA9PSB0b01vbnRoID8gJ3RvTW9udGgnIDogJ25leHRNb250aCcsXHJcblx0XHRcdFx0XHRkYXk6IHRvZGF5LmdldERhdGUoKSxcclxuXHRcdFx0XHRcdHRpbWU6dG9kYXkuZ2V0VGltZSgpLFxyXG5cdFx0XHRcdFx0dmFsaWQ6dmFsaWRcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHR2YXIgaHRtbCA9IFtdO1xyXG5cdFx0XHRmb3IodmFyIHdlZWs9MDsgd2Vlazw2OyB3ZWVrKyspXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZiAoZGF5c1t3ZWVrKjddLnR5cGUgPT0gJ25leHRNb250aCcpIGJyZWFrO1xyXG5cdFx0XHRcdGh0bWwucHVzaCgnPHRyPicpO1xyXG5cclxuXHRcdFx0XHRmb3IodmFyIGRheSA9IDA7IGRheTw3OyBkYXkrKylcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR2YXIgX2RheSA9IChvcHQuc3RhcnRPZldlZWsgPT0gJ21vbmRheScpID8gZGF5KzEgOiBkYXk7XHJcblx0XHRcdFx0XHR0b2RheSA9IGRheXNbd2Vlayo3K19kYXldO1xyXG5cdFx0XHRcdFx0dmFyIGhpZ2hsaWdodFRvZGF5ID0gbW9tZW50KHRvZGF5LnRpbWUpLmZvcm1hdCgnTCcpID09IG1vbWVudChub3cpLmZvcm1hdCgnTCcpO1xyXG5cdFx0XHRcdFx0dG9kYXkuZXh0cmFDbGFzcyA9ICcnO1xyXG5cdFx0XHRcdFx0dG9kYXkudG9vbHRpcCA9ICcnO1xyXG5cdFx0XHRcdFx0aWYodG9kYXkudmFsaWQgJiYgb3B0LmJlZm9yZVNob3dEYXkgJiYgdHlwZW9mIG9wdC5iZWZvcmVTaG93RGF5ID09ICdmdW5jdGlvbicpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdHZhciBfciA9IG9wdC5iZWZvcmVTaG93RGF5KG1vbWVudCh0b2RheS50aW1lKS50b0RhdGUoKSk7XHJcblx0XHRcdFx0XHRcdHRvZGF5LnZhbGlkID0gX3JbMF07XHJcblx0XHRcdFx0XHRcdHRvZGF5LmV4dHJhQ2xhc3MgPSBfclsxXSB8fCAnJztcclxuXHRcdFx0XHRcdFx0dG9kYXkudG9vbHRpcCA9IF9yWzJdIHx8ICcnO1xyXG5cdFx0XHRcdFx0XHRpZiAodG9kYXkudG9vbHRpcCAhPT0gJycpIHRvZGF5LmV4dHJhQ2xhc3MgKz0gJyBoYXMtdG9vbHRpcCAnO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHZhciB0b2RheURpdkF0dHIgPSB7XHJcblx0XHRcdFx0XHRcdHRpbWU6IHRvZGF5LnRpbWUsXHJcblx0XHRcdFx0XHRcdCdkYXRhLXRvb2x0aXAnOiB0b2RheS50b29sdGlwLFxyXG5cdFx0XHRcdFx0XHQnY2xhc3MnOiAnZGF5ICcrdG9kYXkudHlwZSsnICcrdG9kYXkuZXh0cmFDbGFzcysnICcrKHRvZGF5LnZhbGlkID8gJ3ZhbGlkJyA6ICdpbnZhbGlkJykrJyAnKyhoaWdobGlnaHRUb2RheT8ncmVhbC10b2RheSc6JycpXHJcblx0XHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHRcdGlmIChkYXkgPT09IDAgJiYgb3B0LnNob3dXZWVrTnVtYmVycylcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0aHRtbC5wdXNoKCc8dGQ+PGRpdiBjbGFzcz1cIndlZWstbnVtYmVyXCIgZGF0YS1zdGFydC10aW1lPVwiJyt0b2RheS50aW1lKydcIj4nK29wdC5nZXRXZWVrTnVtYmVyKHRvZGF5LmRhdGUpKyc8L2Rpdj48L3RkPicpO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGh0bWwucHVzaCgnPHRkICcgKyBhdHRyaWJ1dGVzQ2FsbGJhY2tzKHt9LG9wdC5kYXlUZEF0dHJzLHRvZGF5KSArICc+PGRpdiAnICsgYXR0cmlidXRlc0NhbGxiYWNrcyh0b2RheURpdkF0dHIsb3B0LmRheURpdkF0dHJzLHRvZGF5KSArICc+JytzaG93RGF5SFRNTCh0b2RheS50aW1lLCB0b2RheS5kYXkpKyc8L2Rpdj48L3RkPicpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRodG1sLnB1c2goJzwvdHI+Jyk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIGh0bWwuam9pbignJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gc2hvd0RheUhUTUwodGltZSwgZGF0ZSlcclxuXHRcdHtcclxuXHRcdFx0aWYgKG9wdC5zaG93RGF0ZUZpbHRlciAmJiB0eXBlb2Ygb3B0LnNob3dEYXRlRmlsdGVyID09ICdmdW5jdGlvbicpIHJldHVybiBvcHQuc2hvd0RhdGVGaWx0ZXIodGltZSwgZGF0ZSk7XHJcblx0XHRcdHJldHVybiBkYXRlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGdldExhbmd1YWdlcygpXHJcblx0XHR7XHJcblx0XHRcdGlmIChvcHQubGFuZ3VhZ2UgPT0gJ2F1dG8nKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dmFyIGxhbmd1YWdlID0gbmF2aWdhdG9yLmxhbmd1YWdlID8gbmF2aWdhdG9yLmxhbmd1YWdlIDogbmF2aWdhdG9yLmJyb3dzZXJMYW5ndWFnZTtcclxuXHRcdFx0XHRpZiAoIWxhbmd1YWdlKSByZXR1cm4gJC5kYXRlUmFuZ2VQaWNrZXJMYW5ndWFnZXNbJ2RlZmF1bHQnXTtcclxuXHRcdFx0XHRsYW5ndWFnZSA9IGxhbmd1YWdlLnRvTG93ZXJDYXNlKCk7XHJcblx0XHRcdFx0Zm9yKHZhciBrZXkgaW4gJC5kYXRlUmFuZ2VQaWNrZXJMYW5ndWFnZXMpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0aWYgKGxhbmd1YWdlLmluZGV4T2Yoa2V5KSAhPT0gLTEpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdHJldHVybiAkLmRhdGVSYW5nZVBpY2tlckxhbmd1YWdlc1trZXldO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gJC5kYXRlUmFuZ2VQaWNrZXJMYW5ndWFnZXNbJ2RlZmF1bHQnXTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmICggb3B0Lmxhbmd1YWdlICYmIG9wdC5sYW5ndWFnZSBpbiAkLmRhdGVSYW5nZVBpY2tlckxhbmd1YWdlcylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiAkLmRhdGVSYW5nZVBpY2tlckxhbmd1YWdlc1tvcHQubGFuZ3VhZ2VdO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiAkLmRhdGVSYW5nZVBpY2tlckxhbmd1YWdlc1snZGVmYXVsdCddO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiB0cmFuc2xhdGUgbGFuZ3VhZ2Ugc3RyaW5nXHJcblx0XHQgKi9cclxuXHRcdGZ1bmN0aW9uIGxhbmcodClcclxuXHRcdHtcclxuXHRcdFx0dmFyIF90ID0gdC50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0XHR2YXIgcmUgPSAodCBpbiBsYW5ncykgPyBsYW5nc1t0XSA6ICggX3QgaW4gbGFuZ3MpID8gbGFuZ3NbX3RdIDogbnVsbDtcclxuXHRcdFx0dmFyIGRlZmF1bHRMYW5ndWFnZSA9ICQuZGF0ZVJhbmdlUGlja2VyTGFuZ3VhZ2VzWydkZWZhdWx0J107XHJcblx0XHRcdGlmIChyZSA9PSBudWxsKSByZSA9ICh0IGluIGRlZmF1bHRMYW5ndWFnZSkgPyBkZWZhdWx0TGFuZ3VhZ2VbdF0gOiAoIF90IGluIGRlZmF1bHRMYW5ndWFnZSkgPyBkZWZhdWx0TGFuZ3VhZ2VbX3RdIDogJyc7XHJcblx0XHRcdHJldHVybiByZTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBnZXREZWZhdWx0VGltZSgpXHJcblx0XHR7XHJcblx0XHRcdHZhciBkZWZhdWx0VGltZSA9IG9wdC5kZWZhdWx0VGltZSA/IG9wdC5kZWZhdWx0VGltZSA6IG5ldyBEYXRlKCk7XHJcblxyXG5cdFx0XHRpZiAob3B0Lmxvb2tCZWhpbmQpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZiAob3B0LnN0YXJ0RGF0ZSAmJiBjb21wYXJlX21vbnRoKGRlZmF1bHRUaW1lLCBvcHQuc3RhcnREYXRlKSA8IDAgKSBkZWZhdWx0VGltZSA9IG5leHRNb250aChtb21lbnQob3B0LnN0YXJ0RGF0ZSkudG9EYXRlKCkpO1xyXG5cdFx0XHRcdGlmIChvcHQuZW5kRGF0ZSAmJiBjb21wYXJlX21vbnRoKGRlZmF1bHRUaW1lLG9wdC5lbmREYXRlKSA+IDAgKSBkZWZhdWx0VGltZSA9IG1vbWVudChvcHQuZW5kRGF0ZSkudG9EYXRlKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYgKG9wdC5zdGFydERhdGUgJiYgY29tcGFyZV9tb250aChkZWZhdWx0VGltZSxvcHQuc3RhcnREYXRlKSA8IDAgKSBkZWZhdWx0VGltZSA9IG1vbWVudChvcHQuc3RhcnREYXRlKS50b0RhdGUoKTtcclxuXHRcdFx0XHRpZiAob3B0LmVuZERhdGUgJiYgY29tcGFyZV9tb250aChuZXh0TW9udGgoZGVmYXVsdFRpbWUpLG9wdC5lbmREYXRlKSA+IDAgKSBkZWZhdWx0VGltZSA9IHByZXZNb250aChtb21lbnQob3B0LmVuZERhdGUpLnRvRGF0ZSgpKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKG9wdC5zaW5nbGVEYXRlKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYgKG9wdC5zdGFydERhdGUgJiYgY29tcGFyZV9tb250aChkZWZhdWx0VGltZSxvcHQuc3RhcnREYXRlKSA8IDAgKSBkZWZhdWx0VGltZSA9IG1vbWVudChvcHQuc3RhcnREYXRlKS50b0RhdGUoKTtcclxuXHRcdFx0XHRpZiAob3B0LmVuZERhdGUgJiYgY29tcGFyZV9tb250aChkZWZhdWx0VGltZSxvcHQuZW5kRGF0ZSkgPiAwICkgZGVmYXVsdFRpbWUgPSBtb21lbnQob3B0LmVuZERhdGUpLnRvRGF0ZSgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gZGVmYXVsdFRpbWU7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gcmVzZXRNb250aHNWaWV3KHRpbWUpXHJcblx0XHR7XHJcblx0XHRcdGlmICghdGltZSkge1xyXG5cdFx0XHRcdHRpbWUgPSBnZXREZWZhdWx0VGltZSgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAob3B0Lmxvb2tCZWhpbmQpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRzaG93TW9udGgocHJldk1vbnRoKHRpbWUpLCdtb250aDEnKTtcclxuXHRcdFx0XHRzaG93TW9udGgodGltZSwnbW9udGgyJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0c2hvd01vbnRoKHRpbWUsJ21vbnRoMScpO1xyXG5cdFx0XHRcdHNob3dNb250aChuZXh0TW9udGgodGltZSksJ21vbnRoMicpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAob3B0LnNpbmdsZURhdGUpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRzaG93TW9udGgodGltZSwnbW9udGgxJyk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHNob3dTZWxlY3RlZERheXMoKTtcclxuXHRcdFx0c2hvd0dhcCgpO1xyXG5cdFx0fVxyXG5cclxuXHR9O1xyXG59KSk7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvZGF0ZXBpY2tlci9qcXVlcnkuZGF0ZXJhbmdlcGlja2VyLmpzXG4vLyBtb2R1bGUgaWQgPSAxOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 19 */
/***/ function(module, exports) {

	eval("// removed by extract-text-webpack-plugin//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9kYXRlcGlja2VyL2RhdGVyYW5nZXBpY2tlci5jc3M/ZTJlOCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiIxOS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy9kYXRlcGlja2VyL2RhdGVyYW5nZXBpY2tlci5jc3Ncbi8vIG1vZHVsZSBpZCA9IDE5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 20 */
/***/ function(module, exports) {

	eval("module.exports = window.moment;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJ3aW5kb3cubW9tZW50XCI/ZDQzMiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiIyMC5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gd2luZG93Lm1vbWVudDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIndpbmRvdy5tb21lbnRcIlxuLy8gbW9kdWxlIGlkID0gMjBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 21 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by jesse on 2017/2/22.\r\n */\r\n\r\n__webpack_require__(22);\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy91cGxvYWQvaW5kZXguanM/ZTVkZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUEiLCJmaWxlIjoiMjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBqZXNzZSBvbiAyMDE3LzIvMjIuXHJcbiAqL1xyXG5cclxucmVxdWlyZSgnLi91cGxvYWQnKTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy91cGxvYWQvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDIxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 22 */
/***/ function(module, exports, __webpack_require__) {

	eval("\r\nvar WebUploader = __webpack_require__(23);\r\n\r\n// 当domReady的时候开始初始化\r\n(function($) {\r\n    var $wrap = $('.x-uploader'),\r\n\r\n    // 图片容器   多文件的时候\r\n        $queue = $( '<ul class=\"x-filelist\"></ul>' )\r\n            .appendTo( $wrap.find( '.x-queueList' ) ),\r\n    // 状态栏，包括进度和控制按钮\r\n        $statusBar = $wrap.find( '.x-statusBar' ),\r\n\r\n    // 文件总体选择信息。\r\n        $info = $statusBar.find( '.x-info' ),\r\n\r\n    // 上传按钮\r\n        $upload = $wrap.find( '.x-uploadBtn' ),\r\n\r\n    // 没选择文件之前的内容。\r\n        $placeHolder = $wrap.find( '.x-placeholder' ),\r\n\r\n        $progress = $statusBar.find( '.progress' ).hide(),\r\n\r\n\r\n    // 添加的文件数量\r\n        fileCount = 0,\r\n\r\n    // 添加的文件总大小\r\n        fileSize = 0,\r\n\r\n    // 优化retina, 在retina下这个值是2\r\n        ratio = window.devicePixelRatio || 1,\r\n\r\n    // 缩略图大小\r\n        thumbnailWidth = 110 * ratio,\r\n        thumbnailHeight = 110 * ratio,\r\n\r\n    // 可能有pedding, ready, uploading, confirm, done.\r\n        state = 'pedding',\r\n\r\n    // 所有文件的进度信息，key为file id\r\n        percentages = {},\r\n    // 判断浏览器是否支持图片的base64\r\n        isSupportBase64 = ( function() {\r\n            var data = new Image();\r\n            var support = true;\r\n            data.onload = data.onerror = function() {\r\n                if( this.width != 1 || this.height != 1 ) {\r\n                    support = false;\r\n                }\r\n            };\r\n            data.src = \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==\";\r\n            return support;\r\n        } )(),\r\n\r\n    //检测是否已经安装flash，检测flash的版本\r\n        flashVersion = ( function() {\r\n            var version;\r\n\r\n            try {\r\n                version = navigator.plugins[ 'Shockwave Flash' ];\r\n                version = version.description;\r\n            } catch ( ex ) {\r\n                try {\r\n                    version = new ActiveXObject('ShockwaveFlash.ShockwaveFlash')\r\n                        .GetVariable('$version');\r\n                } catch ( ex2 ) {\r\n                    version = '0.0';\r\n                }\r\n            }\r\n            version = version.match( /\\d+/g );\r\n            return parseFloat( version[ 0 ] + '.' + version[ 1 ], 10 );\r\n        } )(),\r\n\r\n        supportTransition = (function(){\r\n            var s = document.createElement('p').style,\r\n                r = 'transition' in s ||\r\n                    'WebkitTransition' in s ||\r\n                    'MozTransition' in s ||\r\n                    'msTransition' in s ||\r\n                    'OTransition' in s;\r\n            s = null;\r\n            return r;\r\n        })(),\r\n\r\n    // WebUploader实例\r\n        uploader;\r\n    if ( !WebUploader.Uploader.support('flash') && WebUploader.browser.ie ) {\r\n\r\n        // flash 安装了但是版本过低。\r\n        if (flashVersion) {\r\n            (function(container) {\r\n                window['expressinstallcallback'] = function( state ) {\r\n                    switch(state) {\r\n                        case 'Download.Cancelled':\r\n                            alert('您取消了更新！');\r\n                            break;\r\n\r\n                        case 'Download.Failed':\r\n                            alert('安装失败');\r\n                            break;\r\n\r\n                        default:\r\n                            alert('安装已成功，请刷新！');\r\n                            break;\r\n                    }\r\n                    delete window['expressinstallcallback'];\r\n                };\r\n\r\n                var swf = './expressInstall.swf';\r\n                // insert flash object\r\n                var html = '<object type=\"application/' +\r\n                    'x-shockwave-flash\" data=\"' +  swf + '\" ';\r\n\r\n                if (WebUploader.browser.ie) {\r\n                    html += 'classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" ';\r\n                }\r\n\r\n                html += 'width=\"100%\" height=\"100%\" style=\"outline:0\">'  +\r\n                    '<param name=\"movie\" value=\"' + swf + '\" />' +\r\n                    '<param name=\"wmode\" value=\"transparent\" />' +\r\n                    '<param name=\"allowscriptaccess\" value=\"always\" />' +\r\n                    '</object>';\r\n\r\n                container.html(html);\r\n\r\n            })($wrap);\r\n\r\n            // 压根就没有安转。\r\n        } else {\r\n            $wrap.html('<a href=\"http://www.adobe.com/go/getflashplayer\" target=\"_blank\" border=\"0\"><img alt=\"get flash player\" src=\"http://www.adobe.com/macromedia/style_guide/images/160x41_Get_Flash_Player.jpg\" /></a>');\r\n        }\r\n\r\n        return;\r\n    } else if (!WebUploader.Uploader.support()) {\r\n        alert( 'Web Uploader 不支持您的浏览器！');\r\n        return;\r\n    }\r\n    //图片上传和文件上传区分 参数\r\n    var opt_file = {\r\n        dom:'',\r\n        fileButton: {\r\n            id: '.x-filePicker',\r\n            label: '批量上传'\r\n        },\r\n        addButton:{\r\n            id: '.x-filePicker-add',\r\n            label: '继续添加'\r\n        },\r\n        dnd: '.x-dndArea',\r\n        paste: '.x-uploader',\r\n        swf: '../../dist/Uploader.swf',\r\n        chunked: false,\r\n        chunkSize: 512 * 1024,\r\n        server: '?m=Admin&c=Upload&a=upload',\r\n        compress:false,\r\n        // 禁掉全局的拖拽功能。这样不会出现图片拖进页面的时候，把图片打开。\r\n        disableGlobalDnd: true,\r\n        fileNumLimit: 300,\r\n        fileSizeLimit: 200 * 1024 * 1024,    // 200 M\r\n        fileSingleSizeLimit: 50 * 1024 * 1024    // 50 M\r\n    };\r\n\r\n\r\n    // 实例化\r\n    window.xUpload = function (opt) {\r\n        return new upload(opt);\r\n    };\r\n\r\n    var defaultOption = opt_file;\r\n    var upload=function(opt,dom){\r\n        this.opt = $.extend(true,{},defaultOption,opt);\r\n        this.init(this.opt);\r\n\r\n        return this;\r\n    };\r\n\r\n    upload.prototype ={\r\n        init:function(opt){\r\n            var fileType = opt.fileType;\r\n            var addButton = opt.addButton;\r\n\r\n            opt.pick = opt.fileButton;\r\n\r\n            if(fileType == 1){\r\n                opt['accept'] = {\r\n                    title: 'Images',\r\n                    extensions: 'gif,jpg,jpeg,bmp,png',\r\n                    mimeTypes:'image/gif,image/jpg,image/jpeg,image/bmp,image/png'\r\n                };\r\n                opt['fileButton']['multiple'] = false;\r\n            }\r\n            uploader = WebUploader.create(opt);\r\n            // 添加“添加文件”的按钮，\r\n            uploader.addButton(addButton);\r\n\r\n\r\n            uploader.on('ready', function() {\r\n                window.uploader = uploader;\r\n            });\r\n\r\n            uploader.onUploadProgress = function( file, percentage ) {\r\n                //进度条回调\r\n                if(fileType==2) {\r\n                    var $li = $('#' + file.id),\r\n                        $percent = $li.find('.progress span');\r\n\r\n                    $percent.css('width', percentage * 100 + '%');\r\n                    percentages[file.id][1] = percentage;\r\n                    updateTotalProgress();\r\n                }else if(fileType == 1){\r\n\r\n                    $statusBar.show();\r\n                    this.options.progress(Math.round( percentage * 100 ) + '%');\r\n                }\r\n\r\n            };\r\n\r\n            uploader.onUploadSuccess = function(file){\r\n                //上传成功后调用\r\n                if(fileType ==1){\r\n                    $wrap.find('.x-info').text('头像上传成功，总大小：'+getSize(file.size));\r\n                }\r\n            };\r\n\r\n            uploader.onUploadAccept = function(object,ret){\r\n                this.options.success(object,ret);\r\n            };\r\n\r\n            uploader.onFileQueued = function( file ) {\r\n                //添加到队列\r\n                if(fileType == 2){\r\n                    fileCount++;\r\n                    fileSize += file.size;\r\n\r\n                    if ( fileCount === 1 ) {\r\n                        $placeHolder.addClass( 'element-invisible' );\r\n                        $statusBar.show();\r\n                        //$statusBar.css({'display':'block'})\r\n                    }\r\n                    addFile( file );\r\n                    setState( 'ready' );\r\n                    updateTotalProgress();\r\n                }else if(fileType ==1){\r\n                    //单张图片\r\n\r\n                    addFileImg(file);\r\n                    if ( state === 'ready' ) {\r\n\r\n                        uploader.upload(file);\r\n\r\n                    } else if ( state === 'paused' ) {\r\n                        uploader.upload(file);\r\n                    } else if ( state === 'uploading' ) {\r\n                        uploader.stop(file);\r\n                    }\r\n                }\r\n            };\r\n            uploader.onUploadError = function(file,reason){\r\n                if(reason =='http'){\r\n                    console.log(\"服务器错误\");\r\n                }\r\n                return;\r\n            };\r\n            uploader.onFileDequeued = function( file ) {\r\n                //文件从队列中移除\r\n                if(fileType==2){\r\n                    fileCount--;\r\n                    fileSize -= file.size;\r\n\r\n                    if ( !fileCount ) {\r\n                        setState( 'pedding' );\r\n                    }\r\n\r\n                    removeFile( file );\r\n                    updateTotalProgress();\r\n                }\r\n\r\n\r\n            };\r\n            uploader.onUploadFinished = function(){\r\n                if(fileType == 2){\r\n                    setState( 'confirm' );\r\n                }\r\n            };\r\n            uploader.onStartUpload = function(file){\r\n                setState( 'uploading' );\r\n\r\n            };\r\n            uploader.onStopUpload = function(){\r\n                console.log(\"暂停\");\r\n                setState( 'paused' );\r\n            };\r\n\r\n            uploader.onError = function( code ) {\r\n                //错误信息\r\n                switch (code) {\r\n                    case 'Q_TYPE_DENIED' :\r\n                        alert('不符合的文件类型');\r\n                        break;\r\n                    case 'Q_EXCEED_SIZE_LIMIT':\r\n                        alert('文件总大小超出，请重新设置');\r\n                        break;\r\n                    case 'Q_EXCEED_NUM_LIMIT':\r\n                        alert('文件数量过多，请分批上传');\r\n                        break;\r\n                }\r\n            };\r\n\r\n\r\n\r\n            $upload.on('click', function() {\r\n                //点击上传按钮\r\n                console.log(\"开始上传\");\r\n                if ( $(this).hasClass( 'disabled' ) ) {\r\n                    return false;\r\n                }\r\n\r\n                if ( state === 'ready' ) {\r\n                    uploader.upload();\r\n                } else if ( state === 'paused' ) {\r\n                    uploader.upload();\r\n                } else if ( state === 'uploading' ) {\r\n                    uploader.stop();\r\n                }\r\n            });\r\n\r\n            $wrap.on( 'click', '.retry', function() {\r\n\r\n                uploader.retry();\r\n            } );\r\n\r\n\r\n\r\n            $upload.addClass( 'state-' + state );\r\n            function addFile( file ) {\r\n                //html文件列表\r\n\r\n                var $li = $( '<li id=\"' + file.id + '\">' +\r\n                        '<p class=\"title\">' + file.name + '</p>' +\r\n                        '<p class=\"imgWrap\"></p>'+\r\n                        '<p class=\"progress\"><span></span></p>' +\r\n                        '</li>' ),\r\n\r\n                    $btns = $('<div class=\"file-panel\">' +\r\n                        '<span class=\"cancel\">删除</span>' +\r\n                        '<span class=\"rotateRight\">向右旋转</span>' +\r\n                        '<span class=\"rotateLeft\">向左旋转</span></div>').appendTo( $li ),\r\n                    $prgress = $li.find('p.progress span'),\r\n                    $wrap = $li.find( 'p.imgWrap' ),\r\n                    $info = $('<p class=\"error\"></p>'),\r\n                    text = '',\r\n                    showError = function( code ) {\r\n                        switch( code ) {\r\n                            case 'exceed_size':\r\n                                text = '文件大小超出';\r\n                                break;\r\n\r\n                            case 'interrupt':\r\n                                text = '上传暂停';\r\n                                break;\r\n\r\n                            default:\r\n                                text = '上传失败，请重试';\r\n                                break;\r\n                        }\r\n                        console.log(text);\r\n                        $info.text( text ).appendTo( $li );\r\n                    };\r\n\r\n\r\n                if ( file.getStatus() === 'invalid' ) {\r\n                    showError( file.statusText );\r\n                    console.log(file.getStatus());\r\n                } else {\r\n                    // @todo lazyload\r\n                    $wrap.text( '预览中' );\r\n                    uploader.makeThumb( file, function( error, src ) {\r\n                        var img;\r\n                        if ( error ) {\r\n                            $wrap.text( '不能预览' );\r\n                            return;\r\n                        }\r\n                        if( isSupportBase64 ) {\r\n                            img = $('<img src=\"'+src+'\">');\r\n                            $wrap.empty().append( img );\r\n                        } else {\r\n                            console.log(\"预览出错\");\r\n                        }\r\n                    }, thumbnailWidth, thumbnailHeight );\r\n\r\n                    percentages[ file.id ] = [ file.size, 0 ];\r\n                    file.rotation = 0;\r\n                }\r\n\r\n                file.on('statuschange', function( cur, prev ) {\r\n                    //状态改变\r\n                    if ( prev === 'progress' ) {\r\n                        $prgress.hide().width(0);\r\n                    } else if ( prev === 'queued' ) {\r\n                        $li.off( 'mouseenter mouseleave' );\r\n                        $btns.remove();\r\n                    }\r\n\r\n                    // 成功\r\n                    if ( cur === 'error' || cur === 'invalid' ) {\r\n                        console.log( file.statusText );\r\n                        showError( file.statusText );\r\n                        percentages[ file.id ][ 1 ] = 1;\r\n                    } else if ( cur === 'interrupt' ) {\r\n                        showError( 'interrupt' );\r\n                    } else if ( cur === 'queued' ) {\r\n                        $info.remove();\r\n                        $prgress.css('display', 'block');\r\n                        percentages[ file.id ][ 1 ] = 0;\r\n                    } else if ( cur === 'progress' ) {\r\n                        $info.remove();\r\n                        $prgress.css('display', 'block');\r\n                    } else if ( cur === 'complete' ) {\r\n                        $prgress.hide().width(0);\r\n                        $li.append( '<span class=\"success\"></span>' );\r\n                    }\r\n\r\n                    $li.removeClass( 'state-' + prev ).addClass( 'state-' + cur );\r\n                });\r\n\r\n                $li.on( 'mouseenter', function() {\r\n                    $btns.stop().animate({height: 30});\r\n                });\r\n\r\n                $li.on( 'mouseleave', function() {\r\n                    $btns.stop().animate({height: 0});\r\n                });\r\n\r\n                $btns.on( 'click', 'span', function() {\r\n                    var index = $(this).index(),\r\n                        deg;\r\n                    switch ( index ) {\r\n                        case 0:\r\n                            uploader.removeFile( file );\r\n                            return;\r\n\r\n                        case 1:\r\n                            file.rotation += 90;\r\n                            break;\r\n\r\n                        case 2:\r\n                            file.rotation -= 90;\r\n                            break;\r\n                    }\r\n\r\n                    if ( supportTransition ) {\r\n                        deg = 'rotate(' + file.rotation + 'deg)';\r\n                        $wrap.css({\r\n                            '-webkit-transform': deg,\r\n                            '-mos-transform': deg,\r\n                            '-o-transform': deg,\r\n                            'transform': deg\r\n                        });\r\n                    } else {\r\n                        $wrap.css( 'filter', 'progid:DXImageTransform.Microsoft.BasicImage(rotation='+ (~~((file.rotation/90)%4 + 4)%4) +')');\r\n                    }\r\n\r\n\r\n                });\r\n\r\n                $li.appendTo($queue);\r\n\r\n\r\n\r\n\r\n            }\r\n\r\n            // 负责view的销毁\r\n            function removeFile( file ) {\r\n                var $li = $('#'+file.id);\r\n\r\n                delete percentages[ file.id ];\r\n                updateTotalProgress();\r\n                $li.off().find('.file-panel').off().end().remove();\r\n            }\r\n\r\n            function updateTotalProgress() {\r\n                var loaded = 0,\r\n                    total = 0,\r\n                    spans = $progress.children(),\r\n                    percent;\r\n\r\n                $.each( percentages, function( k, v ) {\r\n                    total += v[ 0 ];\r\n                    loaded += v[ 0 ] * v[ 1 ];\r\n                } );\r\n\r\n                percent = total ? loaded / total : 0;\r\n\r\n                opt.progress(Math.round( percent * 100 ) + '%');\r\n                spans.eq( 0 ).text( Math.round( percent * 100 ) + '%' );\r\n                spans.eq( 1 ).css( 'width', Math.round( percent * 100 ) + '%' );\r\n                if(fileType == 2){\r\n                    updateStatus();\r\n                }\r\n\r\n            }\r\n\r\n            function updateStatus() {\r\n                var text = '', stats;\r\n\r\n                if ( state === 'ready' ) {\r\n                    text = '选中' + fileCount + '个文件，共' +\r\n                        WebUploader.formatSize( fileSize ) + '。';\r\n                } else if ( state === 'confirm' ) {\r\n                    stats = uploader.getStats();\r\n                    if ( stats.uploadFailNum ) {\r\n                        text = '已成功上传' + stats.successNum+ '个文件，'+\r\n                            stats.uploadFailNum + '个文件上传失败，<a class=\"retry\" href=\"#\">重新上传</a>失败文件';\r\n                    }\r\n\r\n                } else {\r\n                    stats = uploader.getStats();\r\n                    text = '共' + fileCount + '张（' +\r\n                        WebUploader.formatSize( fileSize )  +\r\n                        '），已上传' + stats.successNum + '张';\r\n\r\n                    if ( stats.uploadFailNum ) {\r\n                        text += '，失败' + stats.uploadFailNum + '张';\r\n                    }\r\n                }\r\n\r\n                $info.html( text );\r\n            }\r\n\r\n            function setState( val ) {\r\n                var file, stats;\r\n\r\n                if ( val === state ) {\r\n                    return;\r\n                }\r\n\r\n                $upload.removeClass( 'state-' + state );\r\n                $upload.addClass( 'state-' + val );\r\n                state = val;\r\n\r\n                switch ( state ) {\r\n                    case 'pedding':\r\n                        $placeHolder.removeClass( 'element-invisible' );\r\n                        $queue.hide();\r\n                        $statusBar.addClass( 'element-invisible' );\r\n                        uploader.refresh();\r\n                        break;\r\n\r\n                    case 'ready':\r\n                        $placeHolder.addClass( 'element-invisible' );\r\n                        $( addButton.id ).removeClass( 'element-invisible');\r\n                        $queue.show();\r\n                        $statusBar.removeClass('element-invisible');\r\n                        uploader.refresh();\r\n                        break;\r\n\r\n                    case 'uploading':\r\n                        $( addButton.id ).addClass( 'element-invisible' );\r\n                        $progress.show();\r\n                        $upload.text( '暂停上传' );\r\n                        break;\r\n\r\n                    case 'paused':\r\n                        $progress.show();\r\n                        $upload.text( '继续上传' );\r\n                        break;\r\n\r\n                    case 'confirm':\r\n                        $progress.hide();\r\n                        $( addButton.id ).removeClass( 'element-invisible' );\r\n                        $upload.text( '开始上传' );\r\n\r\n                        stats = uploader.getStats();\r\n                        if ( stats.successNum && !stats.uploadFailNum ) {\r\n                            setState( 'finish' );\r\n                            return;\r\n                        }\r\n                        break;\r\n                    case 'finish':\r\n                        stats = uploader.getStats();\r\n                        if ( stats.successNum ) {\r\n                            console.log( '上传成功' );\r\n                        } else {\r\n                            // 没有成功的图片，重设\r\n                            state = 'done';\r\n                            location.reload();\r\n                        }\r\n                        break;\r\n                }\r\n                if(fileType == 2){\r\n                    updateStatus();\r\n                }\r\n            }\r\n            function getSize(size){\r\n                var str;\r\n                if(size/1024>1){\r\n                    size = size/1024;\r\n                    str = 'KB';\r\n                }\r\n\r\n                if(size/1024>1){\r\n                    size = size/1024;\r\n                    str = 'MB';\r\n                }\r\n                if(size/1024 >1){\r\n                    size = size/1024;\r\n                    str = 'GB';\r\n                }\r\n                size =   size.toFixed(2);\r\n                str = size + str;\r\n                return str;\r\n            }\r\n\r\n            function addFileImg(file){\r\n                var html = '<div class=\"imgFile\">' +\r\n                    '<img src=\"\">' +\r\n                    '</div>';\r\n                var img;\r\n                var   $info = $('<p class=\"error\"></p>');\r\n                var   text = '';\r\n                var  showError = function( code ) {\r\n                    switch( code ) {\r\n                        case 'exceed_size':\r\n                            text = '文件大小超出';\r\n                            break;\r\n\r\n                        case 'interrupt':\r\n                            text = '上传暂停';\r\n                            break;\r\n\r\n                        default:\r\n\r\n                            text = '上传失败，请重试 '+'<a class=\"retry\" href=\"#\">重新上传</a>';\r\n                            break;\r\n                    }\r\n\r\n\r\n\r\n                    $info.html( text ).appendTo( $wrap );\r\n\r\n                };\r\n\r\n                if ( file.getStatus() === 'invalid' ) {\r\n                    showError( file.statusText );\r\n                } else {\r\n                    uploader.makeThumb(file, function (error, src) {\r\n\r\n                        if (error) {\r\n                            //$wrap.text( '不能预览' );\r\n                            //return;\r\n                        }\r\n                        if (isSupportBase64) {\r\n                            img = $('<img src=\"' + src + '\"><span class=\"x-fileName\">' + file.name + '</span>');\r\n                            $wrap.find(\".x-imgFile\").append(img);\r\n                        } else {\r\n                            console.log(\"预览出错\");\r\n                        }\r\n                    }, thumbnailWidth, thumbnailHeight);\r\n                }\r\n\r\n\r\n\r\n                file.on('statuschange', function( cur, prev ) {\r\n                    //状态改变\r\n                    // 成功\r\n                    if ( cur === 'error' || cur === 'invalid' ) {\r\n                        console.log( file.statusText );\r\n                        showError( file.statusText );\r\n                    } else if ( cur === 'interrupt' ) {\r\n                        showError( 'interrupt' );\r\n                    } else if ( cur === 'queued' ) {\r\n                        $info.remove();\r\n                    } else if ( cur === 'progress' ) {\r\n                        $info.remove();\r\n                    } else if ( cur === 'complete' ) {\r\n\r\n                    }\r\n\r\n                });\r\n\r\n\r\n\r\n                setState( 'ready' );\r\n\r\n                $(\".x-statusBar .x-upload-btns\").remove();\r\n                //$wrap.append($progress);\r\n                //$(\".x-queueList\").remove();\r\n            }\r\n\r\n            updateTotalProgress();\r\n        }\r\n    };\r\n    //uploader = WebUploader.create(opt_img);\r\n\r\n\r\n    // 当有文件添加进来时执行，负责view的创建\r\n\r\n\r\n\r\n})( $ );\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy91cGxvYWQvdXBsb2FkLmpzPzgxYTgiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxhQUFhOztBQUViO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG1DQUFtQztBQUNuQzs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxrQkFBa0I7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQSxxQkFBcUI7QUFDckI7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGFBQWE7O0FBRWI7O0FBRUE7QUFDQSxhQUFhOzs7O0FBSWI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EscUJBQXFCOztBQUVyQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBLDBDQUEwQyxXQUFXO0FBQ3JELGlCQUFpQjs7QUFFakI7QUFDQSwwQ0FBMEMsVUFBVTtBQUNwRCxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QixxQkFBcUI7QUFDckI7QUFDQTs7O0FBR0EsaUJBQWlCOztBQUVqQjs7Ozs7QUFLQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7OztBQUlBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLHFCQUFxQjs7QUFFckI7O0FBRUEsaUJBQWlCOzs7O0FBSWpCOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7OztBQUlBLENBQUMiLCJmaWxlIjoiMjIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxudmFyIFdlYlVwbG9hZGVyID0gcmVxdWlyZSgnLi93ZWJ1cGxvYWRlci5qcycpO1xyXG5cclxuLy8g5b2TZG9tUmVhZHnnmoTml7blgJnlvIDlp4vliJ3lp4vljJZcclxuKGZ1bmN0aW9uKCQpIHtcclxuICAgIHZhciAkd3JhcCA9ICQoJy54LXVwbG9hZGVyJyksXHJcblxyXG4gICAgLy8g5Zu+54mH5a655ZmoICAg5aSa5paH5Lu255qE5pe25YCZXHJcbiAgICAgICAgJHF1ZXVlID0gJCggJzx1bCBjbGFzcz1cIngtZmlsZWxpc3RcIj48L3VsPicgKVxyXG4gICAgICAgICAgICAuYXBwZW5kVG8oICR3cmFwLmZpbmQoICcueC1xdWV1ZUxpc3QnICkgKSxcclxuICAgIC8vIOeKtuaAgeagj++8jOWMheaLrOi/m+W6puWSjOaOp+WItuaMiemSrlxyXG4gICAgICAgICRzdGF0dXNCYXIgPSAkd3JhcC5maW5kKCAnLngtc3RhdHVzQmFyJyApLFxyXG5cclxuICAgIC8vIOaWh+S7tuaAu+S9k+mAieaLqeS/oeaBr+OAglxyXG4gICAgICAgICRpbmZvID0gJHN0YXR1c0Jhci5maW5kKCAnLngtaW5mbycgKSxcclxuXHJcbiAgICAvLyDkuIrkvKDmjInpkq5cclxuICAgICAgICAkdXBsb2FkID0gJHdyYXAuZmluZCggJy54LXVwbG9hZEJ0bicgKSxcclxuXHJcbiAgICAvLyDmsqHpgInmi6nmlofku7bkuYvliY3nmoTlhoXlrrnjgIJcclxuICAgICAgICAkcGxhY2VIb2xkZXIgPSAkd3JhcC5maW5kKCAnLngtcGxhY2Vob2xkZXInICksXHJcblxyXG4gICAgICAgICRwcm9ncmVzcyA9ICRzdGF0dXNCYXIuZmluZCggJy5wcm9ncmVzcycgKS5oaWRlKCksXHJcblxyXG5cclxuICAgIC8vIOa3u+WKoOeahOaWh+S7tuaVsOmHj1xyXG4gICAgICAgIGZpbGVDb3VudCA9IDAsXHJcblxyXG4gICAgLy8g5re75Yqg55qE5paH5Lu25oC75aSn5bCPXHJcbiAgICAgICAgZmlsZVNpemUgPSAwLFxyXG5cclxuICAgIC8vIOS8mOWMlnJldGluYSwg5ZyocmV0aW5h5LiL6L+Z5Liq5YC85pivMlxyXG4gICAgICAgIHJhdGlvID0gd2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMSxcclxuXHJcbiAgICAvLyDnvKnnlaXlm77lpKflsI9cclxuICAgICAgICB0aHVtYm5haWxXaWR0aCA9IDExMCAqIHJhdGlvLFxyXG4gICAgICAgIHRodW1ibmFpbEhlaWdodCA9IDExMCAqIHJhdGlvLFxyXG5cclxuICAgIC8vIOWPr+iDveaciXBlZGRpbmcsIHJlYWR5LCB1cGxvYWRpbmcsIGNvbmZpcm0sIGRvbmUuXHJcbiAgICAgICAgc3RhdGUgPSAncGVkZGluZycsXHJcblxyXG4gICAgLy8g5omA5pyJ5paH5Lu255qE6L+b5bqm5L+h5oGv77yMa2V55Li6ZmlsZSBpZFxyXG4gICAgICAgIHBlcmNlbnRhZ2VzID0ge30sXHJcbiAgICAvLyDliKTmlq3mtY/op4jlmajmmK/lkKbmlK/mjIHlm77niYfnmoRiYXNlNjRcclxuICAgICAgICBpc1N1cHBvcnRCYXNlNjQgPSAoIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgICAgICB2YXIgc3VwcG9ydCA9IHRydWU7XHJcbiAgICAgICAgICAgIGRhdGEub25sb2FkID0gZGF0YS5vbmVycm9yID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiggdGhpcy53aWR0aCAhPSAxIHx8IHRoaXMuaGVpZ2h0ICE9IDEgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VwcG9ydCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBkYXRhLnNyYyA9IFwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFJQUFBQUFBQVAvLy95d0FBQUFBQVFBQkFBQUNBVXdBT3c9PVwiO1xyXG4gICAgICAgICAgICByZXR1cm4gc3VwcG9ydDtcclxuICAgICAgICB9ICkoKSxcclxuXHJcbiAgICAvL+ajgOa1i+aYr+WQpuW3sue7j+WuieijhWZsYXNo77yM5qOA5rWLZmxhc2jnmoTniYjmnKxcclxuICAgICAgICBmbGFzaFZlcnNpb24gPSAoIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgdmVyc2lvbjtcclxuXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB2ZXJzaW9uID0gbmF2aWdhdG9yLnBsdWdpbnNbICdTaG9ja3dhdmUgRmxhc2gnIF07XHJcbiAgICAgICAgICAgICAgICB2ZXJzaW9uID0gdmVyc2lvbi5kZXNjcmlwdGlvbjtcclxuICAgICAgICAgICAgfSBjYXRjaCAoIGV4ICkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uID0gbmV3IEFjdGl2ZVhPYmplY3QoJ1Nob2Nrd2F2ZUZsYXNoLlNob2Nrd2F2ZUZsYXNoJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLkdldFZhcmlhYmxlKCckdmVyc2lvbicpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoIGV4MiApIHtcclxuICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uID0gJzAuMCc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmVyc2lvbiA9IHZlcnNpb24ubWF0Y2goIC9cXGQrL2cgKTtcclxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoIHZlcnNpb25bIDAgXSArICcuJyArIHZlcnNpb25bIDEgXSwgMTAgKTtcclxuICAgICAgICB9ICkoKSxcclxuXHJcbiAgICAgICAgc3VwcG9ydFRyYW5zaXRpb24gPSAoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdmFyIHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJykuc3R5bGUsXHJcbiAgICAgICAgICAgICAgICByID0gJ3RyYW5zaXRpb24nIGluIHMgfHxcclxuICAgICAgICAgICAgICAgICAgICAnV2Via2l0VHJhbnNpdGlvbicgaW4gcyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICdNb3pUcmFuc2l0aW9uJyBpbiBzIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgJ21zVHJhbnNpdGlvbicgaW4gcyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICdPVHJhbnNpdGlvbicgaW4gcztcclxuICAgICAgICAgICAgcyA9IG51bGw7XHJcbiAgICAgICAgICAgIHJldHVybiByO1xyXG4gICAgICAgIH0pKCksXHJcblxyXG4gICAgLy8gV2ViVXBsb2FkZXLlrp7kvotcclxuICAgICAgICB1cGxvYWRlcjtcclxuICAgIGlmICggIVdlYlVwbG9hZGVyLlVwbG9hZGVyLnN1cHBvcnQoJ2ZsYXNoJykgJiYgV2ViVXBsb2FkZXIuYnJvd3Nlci5pZSApIHtcclxuXHJcbiAgICAgICAgLy8gZmxhc2gg5a6J6KOF5LqG5L2G5piv54mI5pys6L+H5L2O44CCXHJcbiAgICAgICAgaWYgKGZsYXNoVmVyc2lvbikge1xyXG4gICAgICAgICAgICAoZnVuY3Rpb24oY29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3dbJ2V4cHJlc3NpbnN0YWxsY2FsbGJhY2snXSA9IGZ1bmN0aW9uKCBzdGF0ZSApIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2goc3RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnRG93bmxvYWQuQ2FuY2VsbGVkJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfmgqjlj5bmtojkuobmm7TmlrDvvIEnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnRG93bmxvYWQuRmFpbGVkJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCflronoo4XlpLHotKUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCflronoo4Xlt7LmiJDlip/vvIzor7fliLfmlrDvvIEnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgd2luZG93WydleHByZXNzaW5zdGFsbGNhbGxiYWNrJ107XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBzd2YgPSAnLi9leHByZXNzSW5zdGFsbC5zd2YnO1xyXG4gICAgICAgICAgICAgICAgLy8gaW5zZXJ0IGZsYXNoIG9iamVjdFxyXG4gICAgICAgICAgICAgICAgdmFyIGh0bWwgPSAnPG9iamVjdCB0eXBlPVwiYXBwbGljYXRpb24vJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJ3gtc2hvY2t3YXZlLWZsYXNoXCIgZGF0YT1cIicgKyAgc3dmICsgJ1wiICc7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKFdlYlVwbG9hZGVyLmJyb3dzZXIuaWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBodG1sICs9ICdjbGFzc2lkPVwiY2xzaWQ6ZDI3Y2RiNmUtYWU2ZC0xMWNmLTk2YjgtNDQ0NTUzNTQwMDAwXCIgJztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBodG1sICs9ICd3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCIgc3R5bGU9XCJvdXRsaW5lOjBcIj4nICArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxwYXJhbSBuYW1lPVwibW92aWVcIiB2YWx1ZT1cIicgKyBzd2YgKyAnXCIgLz4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPHBhcmFtIG5hbWU9XCJ3bW9kZVwiIHZhbHVlPVwidHJhbnNwYXJlbnRcIiAvPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8cGFyYW0gbmFtZT1cImFsbG93c2NyaXB0YWNjZXNzXCIgdmFsdWU9XCJhbHdheXNcIiAvPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L29iamVjdD4nO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5odG1sKGh0bWwpO1xyXG5cclxuICAgICAgICAgICAgfSkoJHdyYXApO1xyXG5cclxuICAgICAgICAgICAgLy8g5Y6L5qC55bCx5rKh5pyJ5a6J6L2s44CCXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJHdyYXAuaHRtbCgnPGEgaHJlZj1cImh0dHA6Ly93d3cuYWRvYmUuY29tL2dvL2dldGZsYXNocGxheWVyXCIgdGFyZ2V0PVwiX2JsYW5rXCIgYm9yZGVyPVwiMFwiPjxpbWcgYWx0PVwiZ2V0IGZsYXNoIHBsYXllclwiIHNyYz1cImh0dHA6Ly93d3cuYWRvYmUuY29tL21hY3JvbWVkaWEvc3R5bGVfZ3VpZGUvaW1hZ2VzLzE2MHg0MV9HZXRfRmxhc2hfUGxheWVyLmpwZ1wiIC8+PC9hPicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfSBlbHNlIGlmICghV2ViVXBsb2FkZXIuVXBsb2FkZXIuc3VwcG9ydCgpKSB7XHJcbiAgICAgICAgYWxlcnQoICdXZWIgVXBsb2FkZXIg5LiN5pSv5oyB5oKo55qE5rWP6KeI5Zmo77yBJyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy/lm77niYfkuIrkvKDlkozmlofku7bkuIrkvKDljLrliIYg5Y+C5pWwXHJcbiAgICB2YXIgb3B0X2ZpbGUgPSB7XHJcbiAgICAgICAgZG9tOicnLFxyXG4gICAgICAgIGZpbGVCdXR0b246IHtcclxuICAgICAgICAgICAgaWQ6ICcueC1maWxlUGlja2VyJyxcclxuICAgICAgICAgICAgbGFiZWw6ICfmibnph4/kuIrkvKAnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBhZGRCdXR0b246e1xyXG4gICAgICAgICAgICBpZDogJy54LWZpbGVQaWNrZXItYWRkJyxcclxuICAgICAgICAgICAgbGFiZWw6ICfnu6fnu63mt7vliqAnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkbmQ6ICcueC1kbmRBcmVhJyxcclxuICAgICAgICBwYXN0ZTogJy54LXVwbG9hZGVyJyxcclxuICAgICAgICBzd2Y6ICcuLi8uLi9kaXN0L1VwbG9hZGVyLnN3ZicsXHJcbiAgICAgICAgY2h1bmtlZDogZmFsc2UsXHJcbiAgICAgICAgY2h1bmtTaXplOiA1MTIgKiAxMDI0LFxyXG4gICAgICAgIHNlcnZlcjogJz9tPUFkbWluJmM9VXBsb2FkJmE9dXBsb2FkJyxcclxuICAgICAgICBjb21wcmVzczpmYWxzZSxcclxuICAgICAgICAvLyDnpoHmjonlhajlsYDnmoTmi5bmi73lip/og73jgILov5nmoLfkuI3kvJrlh7rnjrDlm77niYfmi5bov5vpobXpnaLnmoTml7blgJnvvIzmiorlm77niYfmiZPlvIDjgIJcclxuICAgICAgICBkaXNhYmxlR2xvYmFsRG5kOiB0cnVlLFxyXG4gICAgICAgIGZpbGVOdW1MaW1pdDogMzAwLFxyXG4gICAgICAgIGZpbGVTaXplTGltaXQ6IDIwMCAqIDEwMjQgKiAxMDI0LCAgICAvLyAyMDAgTVxyXG4gICAgICAgIGZpbGVTaW5nbGVTaXplTGltaXQ6IDUwICogMTAyNCAqIDEwMjQgICAgLy8gNTAgTVxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8g5a6e5L6L5YyWXHJcbiAgICB3aW5kb3cueFVwbG9hZCA9IGZ1bmN0aW9uIChvcHQpIHtcclxuICAgICAgICByZXR1cm4gbmV3IHVwbG9hZChvcHQpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgZGVmYXVsdE9wdGlvbiA9IG9wdF9maWxlO1xyXG4gICAgdmFyIHVwbG9hZD1mdW5jdGlvbihvcHQsZG9tKXtcclxuICAgICAgICB0aGlzLm9wdCA9ICQuZXh0ZW5kKHRydWUse30sZGVmYXVsdE9wdGlvbixvcHQpO1xyXG4gICAgICAgIHRoaXMuaW5pdCh0aGlzLm9wdCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuXHJcbiAgICB1cGxvYWQucHJvdG90eXBlID17XHJcbiAgICAgICAgaW5pdDpmdW5jdGlvbihvcHQpe1xyXG4gICAgICAgICAgICB2YXIgZmlsZVR5cGUgPSBvcHQuZmlsZVR5cGU7XHJcbiAgICAgICAgICAgIHZhciBhZGRCdXR0b24gPSBvcHQuYWRkQnV0dG9uO1xyXG5cclxuICAgICAgICAgICAgb3B0LnBpY2sgPSBvcHQuZmlsZUJ1dHRvbjtcclxuXHJcbiAgICAgICAgICAgIGlmKGZpbGVUeXBlID09IDEpe1xyXG4gICAgICAgICAgICAgICAgb3B0WydhY2NlcHQnXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0ltYWdlcycsXHJcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW5zaW9uczogJ2dpZixqcGcsanBlZyxibXAscG5nJyxcclxuICAgICAgICAgICAgICAgICAgICBtaW1lVHlwZXM6J2ltYWdlL2dpZixpbWFnZS9qcGcsaW1hZ2UvanBlZyxpbWFnZS9ibXAsaW1hZ2UvcG5nJ1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIG9wdFsnZmlsZUJ1dHRvbiddWydtdWx0aXBsZSddID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdXBsb2FkZXIgPSBXZWJVcGxvYWRlci5jcmVhdGUob3B0KTtcclxuICAgICAgICAgICAgLy8g5re75Yqg4oCc5re75Yqg5paH5Lu24oCd55qE5oyJ6ZKu77yMXHJcbiAgICAgICAgICAgIHVwbG9hZGVyLmFkZEJ1dHRvbihhZGRCdXR0b24pO1xyXG5cclxuXHJcbiAgICAgICAgICAgIHVwbG9hZGVyLm9uKCdyZWFkeScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LnVwbG9hZGVyID0gdXBsb2FkZXI7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdXBsb2FkZXIub25VcGxvYWRQcm9ncmVzcyA9IGZ1bmN0aW9uKCBmaWxlLCBwZXJjZW50YWdlICkge1xyXG4gICAgICAgICAgICAgICAgLy/ov5vluqbmnaHlm57osINcclxuICAgICAgICAgICAgICAgIGlmKGZpbGVUeXBlPT0yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyICRsaSA9ICQoJyMnICsgZmlsZS5pZCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRwZXJjZW50ID0gJGxpLmZpbmQoJy5wcm9ncmVzcyBzcGFuJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRwZXJjZW50LmNzcygnd2lkdGgnLCBwZXJjZW50YWdlICogMTAwICsgJyUnKTtcclxuICAgICAgICAgICAgICAgICAgICBwZXJjZW50YWdlc1tmaWxlLmlkXVsxXSA9IHBlcmNlbnRhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlVG90YWxQcm9ncmVzcygpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2UgaWYoZmlsZVR5cGUgPT0gMSl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRzdGF0dXNCYXIuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5wcm9ncmVzcyhNYXRoLnJvdW5kKCBwZXJjZW50YWdlICogMTAwICkgKyAnJScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHVwbG9hZGVyLm9uVXBsb2FkU3VjY2VzcyA9IGZ1bmN0aW9uKGZpbGUpe1xyXG4gICAgICAgICAgICAgICAgLy/kuIrkvKDmiJDlip/lkI7osIPnlKhcclxuICAgICAgICAgICAgICAgIGlmKGZpbGVUeXBlID09MSl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHdyYXAuZmluZCgnLngtaW5mbycpLnRleHQoJ+WktOWDj+S4iuS8oOaIkOWKn++8jOaAu+Wkp+Wwj++8micrZ2V0U2l6ZShmaWxlLnNpemUpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHVwbG9hZGVyLm9uVXBsb2FkQWNjZXB0ID0gZnVuY3Rpb24ob2JqZWN0LHJldCl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuc3VjY2VzcyhvYmplY3QscmV0KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHVwbG9hZGVyLm9uRmlsZVF1ZXVlZCA9IGZ1bmN0aW9uKCBmaWxlICkge1xyXG4gICAgICAgICAgICAgICAgLy/mt7vliqDliLDpmJ/liJdcclxuICAgICAgICAgICAgICAgIGlmKGZpbGVUeXBlID09IDIpe1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbGVDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbGVTaXplICs9IGZpbGUuc2l6ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBmaWxlQ291bnQgPT09IDEgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRwbGFjZUhvbGRlci5hZGRDbGFzcyggJ2VsZW1lbnQtaW52aXNpYmxlJyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc3RhdHVzQmFyLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8kc3RhdHVzQmFyLmNzcyh7J2Rpc3BsYXknOidibG9jayd9KVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBhZGRGaWxlKCBmaWxlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0U3RhdGUoICdyZWFkeScgKTtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVUb3RhbFByb2dyZXNzKCk7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZihmaWxlVHlwZSA9PTEpe1xyXG4gICAgICAgICAgICAgICAgICAgIC8v5Y2V5byg5Zu+54mHXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGFkZEZpbGVJbWcoZmlsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBzdGF0ZSA9PT0gJ3JlYWR5JyApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwbG9hZGVyLnVwbG9hZChmaWxlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggc3RhdGUgPT09ICdwYXVzZWQnICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGxvYWRlci51cGxvYWQoZmlsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggc3RhdGUgPT09ICd1cGxvYWRpbmcnICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGxvYWRlci5zdG9wKGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdXBsb2FkZXIub25VcGxvYWRFcnJvciA9IGZ1bmN0aW9uKGZpbGUscmVhc29uKXtcclxuICAgICAgICAgICAgICAgIGlmKHJlYXNvbiA9PSdodHRwJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLmnI3liqHlmajplJnor69cIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHVwbG9hZGVyLm9uRmlsZURlcXVldWVkID0gZnVuY3Rpb24oIGZpbGUgKSB7XHJcbiAgICAgICAgICAgICAgICAvL+aWh+S7tuS7jumYn+WIl+S4reenu+mZpFxyXG4gICAgICAgICAgICAgICAgaWYoZmlsZVR5cGU9PTIpe1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbGVDb3VudC0tO1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbGVTaXplIC09IGZpbGUuc2l6ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhZmlsZUNvdW50ICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRTdGF0ZSggJ3BlZGRpbmcnICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZW1vdmVGaWxlKCBmaWxlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlVG90YWxQcm9ncmVzcygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHVwbG9hZGVyLm9uVXBsb2FkRmluaXNoZWQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgaWYoZmlsZVR5cGUgPT0gMil7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0U3RhdGUoICdjb25maXJtJyApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB1cGxvYWRlci5vblN0YXJ0VXBsb2FkID0gZnVuY3Rpb24oZmlsZSl7XHJcbiAgICAgICAgICAgICAgICBzZXRTdGF0ZSggJ3VwbG9hZGluZycgKTtcclxuXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHVwbG9hZGVyLm9uU3RvcFVwbG9hZCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuaaguWBnFwiKTtcclxuICAgICAgICAgICAgICAgIHNldFN0YXRlKCAncGF1c2VkJyApO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdXBsb2FkZXIub25FcnJvciA9IGZ1bmN0aW9uKCBjb2RlICkge1xyXG4gICAgICAgICAgICAgICAgLy/plJnor6/kv6Hmga9cclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoY29kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1FfVFlQRV9ERU5JRUQnIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ+S4jeespuWQiOeahOaWh+S7tuexu+WeiycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdRX0VYQ0VFRF9TSVpFX0xJTUlUJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ+aWh+S7tuaAu+Wkp+Wwj+i2heWHuu+8jOivt+mHjeaWsOiuvue9ricpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdRX0VYQ0VFRF9OVU1fTElNSVQnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgn5paH5Lu25pWw6YeP6L+H5aSa77yM6K+35YiG5om55LiK5LygJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAkdXBsb2FkLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgLy/ngrnlh7vkuIrkvKDmjInpkq5cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5byA5aeL5LiK5LygXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCAkKHRoaXMpLmhhc0NsYXNzKCAnZGlzYWJsZWQnICkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICggc3RhdGUgPT09ICdyZWFkeScgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBsb2FkZXIudXBsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBzdGF0ZSA9PT0gJ3BhdXNlZCcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBsb2FkZXIudXBsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBzdGF0ZSA9PT0gJ3VwbG9hZGluZycgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBsb2FkZXIuc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICR3cmFwLm9uKCAnY2xpY2snLCAnLnJldHJ5JywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdXBsb2FkZXIucmV0cnkoKTtcclxuICAgICAgICAgICAgfSApO1xyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAkdXBsb2FkLmFkZENsYXNzKCAnc3RhdGUtJyArIHN0YXRlICk7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGFkZEZpbGUoIGZpbGUgKSB7XHJcbiAgICAgICAgICAgICAgICAvL2h0bWzmlofku7bliJfooahcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgJGxpID0gJCggJzxsaSBpZD1cIicgKyBmaWxlLmlkICsgJ1wiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPHAgY2xhc3M9XCJ0aXRsZVwiPicgKyBmaWxlLm5hbWUgKyAnPC9wPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPHAgY2xhc3M9XCJpbWdXcmFwXCI+PC9wPicrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8cCBjbGFzcz1cInByb2dyZXNzXCI+PHNwYW4+PC9zcGFuPjwvcD4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzwvbGk+JyApLFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAkYnRucyA9ICQoJzxkaXYgY2xhc3M9XCJmaWxlLXBhbmVsXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cImNhbmNlbFwiPuWIoOmZpDwvc3Bhbj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwicm90YXRlUmlnaHRcIj7lkJHlj7Pml4vovaw8L3NwYW4+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cInJvdGF0ZUxlZnRcIj7lkJHlt6bml4vovaw8L3NwYW4+PC9kaXY+JykuYXBwZW5kVG8oICRsaSApLFxyXG4gICAgICAgICAgICAgICAgICAgICRwcmdyZXNzID0gJGxpLmZpbmQoJ3AucHJvZ3Jlc3Mgc3BhbicpLFxyXG4gICAgICAgICAgICAgICAgICAgICR3cmFwID0gJGxpLmZpbmQoICdwLmltZ1dyYXAnICksXHJcbiAgICAgICAgICAgICAgICAgICAgJGluZm8gPSAkKCc8cCBjbGFzcz1cImVycm9yXCI+PC9wPicpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQgPSAnJyxcclxuICAgICAgICAgICAgICAgICAgICBzaG93RXJyb3IgPSBmdW5jdGlvbiggY29kZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKCBjb2RlICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZXhjZWVkX3NpemUnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSAn5paH5Lu25aSn5bCP6LaF5Ye6JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdpbnRlcnJ1cHQnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSAn5LiK5Lyg5pqC5YGcJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSAn5LiK5Lyg5aSx6LSl77yM6K+36YeN6K+VJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0ZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGluZm8udGV4dCggdGV4dCApLmFwcGVuZFRvKCAkbGkgKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIGZpbGUuZ2V0U3RhdHVzKCkgPT09ICdpbnZhbGlkJyApIHtcclxuICAgICAgICAgICAgICAgICAgICBzaG93RXJyb3IoIGZpbGUuc3RhdHVzVGV4dCApO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGZpbGUuZ2V0U3RhdHVzKCkpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBAdG9kbyBsYXp5bG9hZFxyXG4gICAgICAgICAgICAgICAgICAgICR3cmFwLnRleHQoICfpooTop4jkuK0nICk7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBsb2FkZXIubWFrZVRodW1iKCBmaWxlLCBmdW5jdGlvbiggZXJyb3IsIHNyYyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBlcnJvciApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR3cmFwLnRleHQoICfkuI3og73pooTop4gnICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIGlzU3VwcG9ydEJhc2U2NCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZyA9ICQoJzxpbWcgc3JjPVwiJytzcmMrJ1wiPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHdyYXAuZW1wdHkoKS5hcHBlbmQoIGltZyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLpooTop4jlh7rplJlcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LCB0aHVtYm5haWxXaWR0aCwgdGh1bWJuYWlsSGVpZ2h0ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHBlcmNlbnRhZ2VzWyBmaWxlLmlkIF0gPSBbIGZpbGUuc2l6ZSwgMCBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbGUucm90YXRpb24gPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZpbGUub24oJ3N0YXR1c2NoYW5nZScsIGZ1bmN0aW9uKCBjdXIsIHByZXYgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/nirbmgIHmlLnlj5hcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIHByZXYgPT09ICdwcm9ncmVzcycgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRwcmdyZXNzLmhpZGUoKS53aWR0aCgwKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBwcmV2ID09PSAncXVldWVkJyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGxpLm9mZiggJ21vdXNlZW50ZXIgbW91c2VsZWF2ZScgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGJ0bnMucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyDmiJDlip9cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGN1ciA9PT0gJ2Vycm9yJyB8fCBjdXIgPT09ICdpbnZhbGlkJyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIGZpbGUuc3RhdHVzVGV4dCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93RXJyb3IoIGZpbGUuc3RhdHVzVGV4dCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJjZW50YWdlc1sgZmlsZS5pZCBdWyAxIF0gPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIGN1ciA9PT0gJ2ludGVycnVwdCcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dFcnJvciggJ2ludGVycnVwdCcgKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBjdXIgPT09ICdxdWV1ZWQnICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkaW5mby5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHByZ3Jlc3MuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcmNlbnRhZ2VzWyBmaWxlLmlkIF1bIDEgXSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggY3VyID09PSAncHJvZ3Jlc3MnICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkaW5mby5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHByZ3Jlc3MuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggY3VyID09PSAnY29tcGxldGUnICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkcHJncmVzcy5oaWRlKCkud2lkdGgoMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRsaS5hcHBlbmQoICc8c3BhbiBjbGFzcz1cInN1Y2Nlc3NcIj48L3NwYW4+JyApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJGxpLnJlbW92ZUNsYXNzKCAnc3RhdGUtJyArIHByZXYgKS5hZGRDbGFzcyggJ3N0YXRlLScgKyBjdXIgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICRsaS5vbiggJ21vdXNlZW50ZXInLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAkYnRucy5zdG9wKCkuYW5pbWF0ZSh7aGVpZ2h0OiAzMH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgJGxpLm9uKCAnbW91c2VsZWF2ZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRidG5zLnN0b3AoKS5hbmltYXRlKHtoZWlnaHQ6IDB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICRidG5zLm9uKCAnY2xpY2snLCAnc3BhbicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9ICQodGhpcykuaW5kZXgoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVnO1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGluZGV4ICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGxvYWRlci5yZW1vdmVGaWxlKCBmaWxlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlLnJvdGF0aW9uICs9IDkwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlLnJvdGF0aW9uIC09IDkwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIHN1cHBvcnRUcmFuc2l0aW9uICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWcgPSAncm90YXRlKCcgKyBmaWxlLnJvdGF0aW9uICsgJ2RlZyknO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkd3JhcC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogZGVnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJy1tb3MtdHJhbnNmb3JtJzogZGVnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJy1vLXRyYW5zZm9ybSc6IGRlZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiBkZWdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHdyYXAuY3NzKCAnZmlsdGVyJywgJ3Byb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5CYXNpY0ltYWdlKHJvdGF0aW9uPScrICh+figoZmlsZS5yb3RhdGlvbi85MCklNCArIDQpJTQpICsnKScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgJGxpLmFwcGVuZFRvKCRxdWV1ZSk7XHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyDotJ/otKN2aWV355qE6ZSA5q+BXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlbW92ZUZpbGUoIGZpbGUgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgJGxpID0gJCgnIycrZmlsZS5pZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHBlcmNlbnRhZ2VzWyBmaWxlLmlkIF07XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVUb3RhbFByb2dyZXNzKCk7XHJcbiAgICAgICAgICAgICAgICAkbGkub2ZmKCkuZmluZCgnLmZpbGUtcGFuZWwnKS5vZmYoKS5lbmQoKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlVG90YWxQcm9ncmVzcygpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsb2FkZWQgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsID0gMCxcclxuICAgICAgICAgICAgICAgICAgICBzcGFucyA9ICRwcm9ncmVzcy5jaGlsZHJlbigpLFxyXG4gICAgICAgICAgICAgICAgICAgIHBlcmNlbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgJC5lYWNoKCBwZXJjZW50YWdlcywgZnVuY3Rpb24oIGssIHYgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG90YWwgKz0gdlsgMCBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGxvYWRlZCArPSB2WyAwIF0gKiB2WyAxIF07XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgcGVyY2VudCA9IHRvdGFsID8gbG9hZGVkIC8gdG90YWwgOiAwO1xyXG5cclxuICAgICAgICAgICAgICAgIG9wdC5wcm9ncmVzcyhNYXRoLnJvdW5kKCBwZXJjZW50ICogMTAwICkgKyAnJScpO1xyXG4gICAgICAgICAgICAgICAgc3BhbnMuZXEoIDAgKS50ZXh0KCBNYXRoLnJvdW5kKCBwZXJjZW50ICogMTAwICkgKyAnJScgKTtcclxuICAgICAgICAgICAgICAgIHNwYW5zLmVxKCAxICkuY3NzKCAnd2lkdGgnLCBNYXRoLnJvdW5kKCBwZXJjZW50ICogMTAwICkgKyAnJScgKTtcclxuICAgICAgICAgICAgICAgIGlmKGZpbGVUeXBlID09IDIpe1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVN0YXR1cygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlU3RhdHVzKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRleHQgPSAnJywgc3RhdHM7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCBzdGF0ZSA9PT0gJ3JlYWR5JyApIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gJ+mAieS4rScgKyBmaWxlQ291bnQgKyAn5Liq5paH5Lu277yM5YWxJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFdlYlVwbG9hZGVyLmZvcm1hdFNpemUoIGZpbGVTaXplICkgKyAn44CCJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHN0YXRlID09PSAnY29uZmlybScgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHMgPSB1cGxvYWRlci5nZXRTdGF0cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICggc3RhdHMudXBsb2FkRmFpbE51bSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA9ICflt7LmiJDlip/kuIrkvKAnICsgc3RhdHMuc3VjY2Vzc051bSsgJ+S4quaWh+S7tu+8jCcrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0cy51cGxvYWRGYWlsTnVtICsgJ+S4quaWh+S7tuS4iuS8oOWksei0pe+8jDxhIGNsYXNzPVwicmV0cnlcIiBocmVmPVwiI1wiPumHjeaWsOS4iuS8oDwvYT7lpLHotKXmlofku7YnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRzID0gdXBsb2FkZXIuZ2V0U3RhdHMoKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gJ+WFsScgKyBmaWxlQ291bnQgKyAn5byg77yIJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFdlYlVwbG9hZGVyLmZvcm1hdFNpemUoIGZpbGVTaXplICkgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ++8ie+8jOW3suS4iuS8oCcgKyBzdGF0cy5zdWNjZXNzTnVtICsgJ+W8oCc7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggc3RhdHMudXBsb2FkRmFpbE51bSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCArPSAn77yM5aSx6LSlJyArIHN0YXRzLnVwbG9hZEZhaWxOdW0gKyAn5bygJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgJGluZm8uaHRtbCggdGV4dCApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBzZXRTdGF0ZSggdmFsICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZpbGUsIHN0YXRzO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggdmFsID09PSBzdGF0ZSApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgJHVwbG9hZC5yZW1vdmVDbGFzcyggJ3N0YXRlLScgKyBzdGF0ZSApO1xyXG4gICAgICAgICAgICAgICAgJHVwbG9hZC5hZGRDbGFzcyggJ3N0YXRlLScgKyB2YWwgKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlID0gdmFsO1xyXG5cclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoIHN0YXRlICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BlZGRpbmcnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkcGxhY2VIb2xkZXIucmVtb3ZlQ2xhc3MoICdlbGVtZW50LWludmlzaWJsZScgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHF1ZXVlLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHN0YXR1c0Jhci5hZGRDbGFzcyggJ2VsZW1lbnQtaW52aXNpYmxlJyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGxvYWRlci5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdyZWFkeSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRwbGFjZUhvbGRlci5hZGRDbGFzcyggJ2VsZW1lbnQtaW52aXNpYmxlJyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCBhZGRCdXR0b24uaWQgKS5yZW1vdmVDbGFzcyggJ2VsZW1lbnQtaW52aXNpYmxlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRxdWV1ZS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzdGF0dXNCYXIucmVtb3ZlQ2xhc3MoJ2VsZW1lbnQtaW52aXNpYmxlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwbG9hZGVyLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3VwbG9hZGluZyc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoIGFkZEJ1dHRvbi5pZCApLmFkZENsYXNzKCAnZWxlbWVudC1pbnZpc2libGUnICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRwcm9ncmVzcy5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR1cGxvYWQudGV4dCggJ+aaguWBnOS4iuS8oCcgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BhdXNlZCc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRwcm9ncmVzcy5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR1cGxvYWQudGV4dCggJ+e7p+e7reS4iuS8oCcgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvbmZpcm0nOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkcHJvZ3Jlc3MuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCBhZGRCdXR0b24uaWQgKS5yZW1vdmVDbGFzcyggJ2VsZW1lbnQtaW52aXNpYmxlJyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkdXBsb2FkLnRleHQoICflvIDlp4vkuIrkvKAnICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0cyA9IHVwbG9hZGVyLmdldFN0YXRzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggc3RhdHMuc3VjY2Vzc051bSAmJiAhc3RhdHMudXBsb2FkRmFpbE51bSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFN0YXRlKCAnZmluaXNoJyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2ZpbmlzaCc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzID0gdXBsb2FkZXIuZ2V0U3RhdHMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBzdGF0cy5zdWNjZXNzTnVtICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coICfkuIrkvKDmiJDlip8nICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDmsqHmnInmiJDlip/nmoTlm77niYfvvIzph43orr5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0gJ2RvbmUnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZihmaWxlVHlwZSA9PSAyKXtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVTdGF0dXMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRTaXplKHNpemUpe1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0cjtcclxuICAgICAgICAgICAgICAgIGlmKHNpemUvMTAyND4xKXtcclxuICAgICAgICAgICAgICAgICAgICBzaXplID0gc2l6ZS8xMDI0O1xyXG4gICAgICAgICAgICAgICAgICAgIHN0ciA9ICdLQic7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoc2l6ZS8xMDI0PjEpe1xyXG4gICAgICAgICAgICAgICAgICAgIHNpemUgPSBzaXplLzEwMjQ7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyID0gJ01CJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKHNpemUvMTAyNCA+MSl7XHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZSA9IHNpemUvMTAyNDtcclxuICAgICAgICAgICAgICAgICAgICBzdHIgPSAnR0InO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc2l6ZSA9ICAgc2l6ZS50b0ZpeGVkKDIpO1xyXG4gICAgICAgICAgICAgICAgc3RyID0gc2l6ZSArIHN0cjtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdHI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGFkZEZpbGVJbWcoZmlsZSl7XHJcbiAgICAgICAgICAgICAgICB2YXIgaHRtbCA9ICc8ZGl2IGNsYXNzPVwiaW1nRmlsZVwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8aW1nIHNyYz1cIlwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nO1xyXG4gICAgICAgICAgICAgICAgdmFyIGltZztcclxuICAgICAgICAgICAgICAgIHZhciAgICRpbmZvID0gJCgnPHAgY2xhc3M9XCJlcnJvclwiPjwvcD4nKTtcclxuICAgICAgICAgICAgICAgIHZhciAgIHRleHQgPSAnJztcclxuICAgICAgICAgICAgICAgIHZhciAgc2hvd0Vycm9yID0gZnVuY3Rpb24oIGNvZGUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoKCBjb2RlICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdleGNlZWRfc2l6ZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gJ+aWh+S7tuWkp+Wwj+i2heWHuic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2ludGVycnVwdCc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gJ+S4iuS8oOaaguWBnCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA9ICfkuIrkvKDlpLHotKXvvIzor7fph43or5UgJysnPGEgY2xhc3M9XCJyZXRyeVwiIGhyZWY9XCIjXCI+6YeN5paw5LiK5LygPC9hPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJGluZm8uaHRtbCggdGV4dCApLmFwcGVuZFRvKCAkd3JhcCApO1xyXG5cclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCBmaWxlLmdldFN0YXR1cygpID09PSAnaW52YWxpZCcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd0Vycm9yKCBmaWxlLnN0YXR1c1RleHQgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBsb2FkZXIubWFrZVRodW1iKGZpbGUsIGZ1bmN0aW9uIChlcnJvciwgc3JjKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vJHdyYXAudGV4dCggJ+S4jeiDvemihOiniCcgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1N1cHBvcnRCYXNlNjQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZyA9ICQoJzxpbWcgc3JjPVwiJyArIHNyYyArICdcIj48c3BhbiBjbGFzcz1cIngtZmlsZU5hbWVcIj4nICsgZmlsZS5uYW1lICsgJzwvc3Bhbj4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR3cmFwLmZpbmQoXCIueC1pbWdGaWxlXCIpLmFwcGVuZChpbWcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLpooTop4jlh7rplJlcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LCB0aHVtYm5haWxXaWR0aCwgdGh1bWJuYWlsSGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGZpbGUub24oJ3N0YXR1c2NoYW5nZScsIGZ1bmN0aW9uKCBjdXIsIHByZXYgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/nirbmgIHmlLnlj5hcclxuICAgICAgICAgICAgICAgICAgICAvLyDmiJDlip9cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGN1ciA9PT0gJ2Vycm9yJyB8fCBjdXIgPT09ICdpbnZhbGlkJyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIGZpbGUuc3RhdHVzVGV4dCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93RXJyb3IoIGZpbGUuc3RhdHVzVGV4dCApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIGN1ciA9PT0gJ2ludGVycnVwdCcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dFcnJvciggJ2ludGVycnVwdCcgKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBjdXIgPT09ICdxdWV1ZWQnICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkaW5mby5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBjdXIgPT09ICdwcm9ncmVzcycgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbmZvLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIGN1ciA9PT0gJ2NvbXBsZXRlJyApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgc2V0U3RhdGUoICdyZWFkeScgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkKFwiLngtc3RhdHVzQmFyIC54LXVwbG9hZC1idG5zXCIpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgLy8kd3JhcC5hcHBlbmQoJHByb2dyZXNzKTtcclxuICAgICAgICAgICAgICAgIC8vJChcIi54LXF1ZXVlTGlzdFwiKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdXBkYXRlVG90YWxQcm9ncmVzcygpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvL3VwbG9hZGVyID0gV2ViVXBsb2FkZXIuY3JlYXRlKG9wdF9pbWcpO1xyXG5cclxuXHJcbiAgICAvLyDlvZPmnInmlofku7bmt7vliqDov5vmnaXml7bmiafooYzvvIzotJ/otKN2aWV355qE5Yib5bu6XHJcblxyXG5cclxuXHJcbn0pKCAkICk7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvdXBsb2FkL3VwbG9hZC5qc1xuLy8gbW9kdWxlIGlkID0gMjJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 23 */
/***/ function(module, exports, __webpack_require__) {

	eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*! WebUploader 0.1.6 */\r\n\r\n\r\n/**\r\n * @fileOverview 让内部各个部件的代码可以用[amd](https://github.com/amdjs/amdjs-api/wiki/AMD)模块定义方式组织起来。\r\n *\r\n * AMD API 内部的简单不完全实现，请忽略。只有当WebUploader被合并成一个文件的时候才会引入。\r\n */\r\n(function( root, factory ) {\r\n    var modules = {},\r\n\r\n        // 内部require, 简单不完全实现。\r\n        // https://github.com/amdjs/amdjs-api/wiki/require\r\n        _require = function( deps, callback ) {\r\n            var args, len, i;\r\n\r\n            // 如果deps不是数组，则直接返回指定module\r\n            if ( typeof deps === 'string' ) {\r\n                return getModule( deps );\r\n            } else {\r\n                args = [];\r\n                for( len = deps.length, i = 0; i < len; i++ ) {\r\n                    args.push( getModule( deps[ i ] ) );\r\n                }\r\n\r\n                return callback.apply( null, args );\r\n            }\r\n        },\r\n\r\n        // 内部define，暂时不支持不指定id.\r\n        _define = function( id, deps, factory ) {\r\n            if ( arguments.length === 2 ) {\r\n                factory = deps;\r\n                deps = null;\r\n            }\r\n\r\n            _require( deps || [], function() {\r\n                setModule( id, factory, arguments );\r\n            });\r\n        },\r\n\r\n        // 设置module, 兼容CommonJs写法。\r\n        setModule = function( id, factory, args ) {\r\n            var module = {\r\n                    exports: factory\r\n                },\r\n                returned;\r\n\r\n            if ( typeof factory === 'function' ) {\r\n                args.length || (args = [ _require, module.exports, module ]);\r\n                returned = factory.apply( null, args );\r\n                returned !== undefined && (module.exports = returned);\r\n            }\r\n\r\n            modules[ id ] = module.exports;\r\n        },\r\n\r\n        // 根据id获取module\r\n        getModule = function( id ) {\r\n            var module = modules[ id ] || root[ id ];\r\n\r\n            if ( !module ) {\r\n                throw new Error( '`' + id + '` is undefined' );\r\n            }\r\n\r\n            return module;\r\n        },\r\n\r\n        // 将所有modules，将路径ids装换成对象。\r\n        exportsTo = function( obj ) {\r\n            var key, host, parts, part, last, ucFirst;\r\n\r\n            // make the first character upper case.\r\n            ucFirst = function( str ) {\r\n                return str && (str.charAt( 0 ).toUpperCase() + str.substr( 1 ));\r\n            };\r\n\r\n            for ( key in modules ) {\r\n                host = obj;\r\n\r\n                if ( !modules.hasOwnProperty( key ) ) {\r\n                    continue;\r\n                }\r\n\r\n                parts = key.split('/');\r\n                last = ucFirst( parts.pop() );\r\n\r\n                while( (part = ucFirst( parts.shift() )) ) {\r\n                    host[ part ] = host[ part ] || {};\r\n                    host = host[ part ];\r\n                }\r\n\r\n                host[ last ] = modules[ key ];\r\n            }\r\n\r\n            return obj;\r\n        },\r\n\r\n        makeExport = function( dollar ) {\r\n            root.__dollar = dollar;\r\n\r\n            // exports every module.\r\n            return exportsTo( factory( root, _define, _require ) );\r\n        },\r\n\r\n        origin;\r\n\r\n    if ( typeof module === 'object' && typeof module.exports === 'object' ) {\r\n\r\n        // For CommonJS and CommonJS-like environments where a proper window is present,\r\n        module.exports = makeExport();\r\n    } else if ( true ) {\r\n\r\n        // Allow using this built library as an AMD module\r\n        // in another project. That other project will only\r\n        // see this AMD call, not the internal modules in\r\n        // the closure below.\r\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(13) ], __WEBPACK_AMD_DEFINE_FACTORY__ = (makeExport), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n    } else {\r\n\r\n        // Browser globals case. Just assign the\r\n        // result to a property on the global.\r\n        origin = root.WebUploader;\r\n        root.WebUploader = makeExport();\r\n        root.WebUploader.noConflict = function() {\r\n            root.WebUploader = origin;\r\n        };\r\n    }\r\n})( window, function( window, define, require ) {\r\n\r\n\r\n    /**\r\n     * @fileOverview jQuery or Zepto\r\n     * @require \"jquery\"\r\n     * @require \"zepto\"\r\n     */\r\n    define('dollar-third',[],function() {\r\n        var req = window.require;\r\n        var $ = window.__dollar || \r\n            window.jQuery || \r\n            window.Zepto || \r\n            req('jquery') || \r\n            req('zepto');\r\n    \r\n        if ( !$ ) {\r\n            throw new Error('jQuery or Zepto not found!');\r\n        }\r\n    \r\n        return $;\r\n    });\r\n    \r\n    /**\r\n     * @fileOverview Dom 操作相关\r\n     */\r\n    define('dollar',[\r\n        'dollar-third'\r\n    ], function( _ ) {\r\n        return _;\r\n    });\r\n    /**\r\n     * @fileOverview 使用jQuery的Promise\r\n     */\r\n    define('promise-third',[\r\n        'dollar'\r\n    ], function( $ ) {\r\n        return {\r\n            Deferred: $.Deferred,\r\n            when: $.when,\r\n    \r\n            isPromise: function( anything ) {\r\n                return anything && typeof anything.then === 'function';\r\n            }\r\n        };\r\n    });\r\n    /**\r\n     * @fileOverview Promise/A+\r\n     */\r\n    define('promise',[\r\n        'promise-third'\r\n    ], function( _ ) {\r\n        return _;\r\n    });\r\n    /**\r\n     * @fileOverview 基础类方法。\r\n     */\r\n    \r\n    /**\r\n     * Web Uploader内部类的详细说明，以下提及的功能类，都可以在`WebUploader`这个变量中访问到。\r\n     *\r\n     * As you know, Web Uploader的每个文件都是用过[AMD](https://github.com/amdjs/amdjs-api/wiki/AMD)规范中的`define`组织起来的, 每个Module都会有个module id.\r\n     * 默认module id为该文件的路径，而此路径将会转化成名字空间存放在WebUploader中。如：\r\n     *\r\n     * * module `base`：WebUploader.Base\r\n     * * module `file`: WebUploader.File\r\n     * * module `lib/dnd`: WebUploader.Lib.Dnd\r\n     * * module `runtime/html5/dnd`: WebUploader.Runtime.Html5.Dnd\r\n     *\r\n     *\r\n     * 以下文档中对类的使用可能省略掉了`WebUploader`前缀。\r\n     * @module WebUploader\r\n     * @title WebUploader API文档\r\n     */\r\n    define('base',[\r\n        'dollar',\r\n        'promise'\r\n    ], function( $, promise ) {\r\n    \r\n        var noop = function() {},\r\n            call = Function.call;\r\n    \r\n        // http://jsperf.com/uncurrythis\r\n        // 反科里化\r\n        function uncurryThis( fn ) {\r\n            return function() {\r\n                return call.apply( fn, arguments );\r\n            };\r\n        }\r\n    \r\n        function bindFn( fn, context ) {\r\n            return function() {\r\n                return fn.apply( context, arguments );\r\n            };\r\n        }\r\n    \r\n        function createObject( proto ) {\r\n            var f;\r\n    \r\n            if ( Object.create ) {\r\n                return Object.create( proto );\r\n            } else {\r\n                f = function() {};\r\n                f.prototype = proto;\r\n                return new f();\r\n            }\r\n        }\r\n    \r\n    \r\n        /**\r\n         * 基础类，提供一些简单常用的方法。\r\n         * @class Base\r\n         */\r\n        return {\r\n    \r\n            /**\r\n             * @property {String} version 当前版本号。\r\n             */\r\n            version: '0.1.6',\r\n    \r\n            /**\r\n             * @property {jQuery|Zepto} $ 引用依赖的jQuery或者Zepto对象。\r\n             */\r\n            $: $,\r\n    \r\n            Deferred: promise.Deferred,\r\n    \r\n            isPromise: promise.isPromise,\r\n    \r\n            when: promise.when,\r\n    \r\n            /**\r\n             * @description  简单的浏览器检查结果。\r\n             *\r\n             * * `webkit`  webkit版本号，如果浏览器为非webkit内核，此属性为`undefined`。\r\n             * * `chrome`  chrome浏览器版本号，如果浏览器为chrome，此属性为`undefined`。\r\n             * * `ie`  ie浏览器版本号，如果浏览器为非ie，此属性为`undefined`。**暂不支持ie10+**\r\n             * * `firefox`  firefox浏览器版本号，如果浏览器为非firefox，此属性为`undefined`。\r\n             * * `safari`  safari浏览器版本号，如果浏览器为非safari，此属性为`undefined`。\r\n             * * `opera`  opera浏览器版本号，如果浏览器为非opera，此属性为`undefined`。\r\n             *\r\n             * @property {Object} [browser]\r\n             */\r\n            browser: (function( ua ) {\r\n                var ret = {},\r\n                    webkit = ua.match( /WebKit\\/([\\d.]+)/ ),\r\n                    chrome = ua.match( /Chrome\\/([\\d.]+)/ ) ||\r\n                        ua.match( /CriOS\\/([\\d.]+)/ ),\r\n    \r\n                    ie = ua.match( /MSIE\\s([\\d\\.]+)/ ) ||\r\n                        ua.match( /(?:trident)(?:.*rv:([\\w.]+))?/i ),\r\n                    firefox = ua.match( /Firefox\\/([\\d.]+)/ ),\r\n                    safari = ua.match( /Safari\\/([\\d.]+)/ ),\r\n                    opera = ua.match( /OPR\\/([\\d.]+)/ );\r\n    \r\n                webkit && (ret.webkit = parseFloat( webkit[ 1 ] ));\r\n                chrome && (ret.chrome = parseFloat( chrome[ 1 ] ));\r\n                ie && (ret.ie = parseFloat( ie[ 1 ] ));\r\n                firefox && (ret.firefox = parseFloat( firefox[ 1 ] ));\r\n                safari && (ret.safari = parseFloat( safari[ 1 ] ));\r\n                opera && (ret.opera = parseFloat( opera[ 1 ] ));\r\n    \r\n                return ret;\r\n            })( navigator.userAgent ),\r\n    \r\n            /**\r\n             * @description  操作系统检查结果。\r\n             *\r\n             * * `android`  如果在android浏览器环境下，此值为对应的android版本号，否则为`undefined`。\r\n             * * `ios` 如果在ios浏览器环境下，此值为对应的ios版本号，否则为`undefined`。\r\n             * @property {Object} [os]\r\n             */\r\n            os: (function( ua ) {\r\n                var ret = {},\r\n    \r\n                    // osx = !!ua.match( /\\(Macintosh\\; Intel / ),\r\n                    android = ua.match( /(?:Android);?[\\s\\/]+([\\d.]+)?/ ),\r\n                    ios = ua.match( /(?:iPad|iPod|iPhone).*OS\\s([\\d_]+)/ );\r\n    \r\n                // osx && (ret.osx = true);\r\n                android && (ret.android = parseFloat( android[ 1 ] ));\r\n                ios && (ret.ios = parseFloat( ios[ 1 ].replace( /_/g, '.' ) ));\r\n    \r\n                return ret;\r\n            })( navigator.userAgent ),\r\n    \r\n            /**\r\n             * 实现类与类之间的继承。\r\n             * @method inherits\r\n             * @grammar Base.inherits( super ) => child\r\n             * @grammar Base.inherits( super, protos ) => child\r\n             * @grammar Base.inherits( super, protos, statics ) => child\r\n             * @param  {Class} super 父类\r\n             * @param  {Object | Function} [protos] 子类或者对象。如果对象中包含constructor，子类将是用此属性值。\r\n             * @param  {Function} [protos.constructor] 子类构造器，不指定的话将创建个临时的直接执行父类构造器的方法。\r\n             * @param  {Object} [statics] 静态属性或方法。\r\n             * @return {Class} 返回子类。\r\n             * @example\r\n             * function Person() {\r\n             *     console.log( 'Super' );\r\n             * }\r\n             * Person.prototype.hello = function() {\r\n             *     console.log( 'hello' );\r\n             * };\r\n             *\r\n             * var Manager = Base.inherits( Person, {\r\n             *     world: function() {\r\n             *         console.log( 'World' );\r\n             *     }\r\n             * });\r\n             *\r\n             * // 因为没有指定构造器，父类的构造器将会执行。\r\n             * var instance = new Manager();    // => Super\r\n             *\r\n             * // 继承子父类的方法\r\n             * instance.hello();    // => hello\r\n             * instance.world();    // => World\r\n             *\r\n             * // 子类的__super__属性指向父类\r\n             * console.log( Manager.__super__ === Person );    // => true\r\n             */\r\n            inherits: function( Super, protos, staticProtos ) {\r\n                var child;\r\n    \r\n                if ( typeof protos === 'function' ) {\r\n                    child = protos;\r\n                    protos = null;\r\n                } else if ( protos && protos.hasOwnProperty('constructor') ) {\r\n                    child = protos.constructor;\r\n                } else {\r\n                    child = function() {\r\n                        return Super.apply( this, arguments );\r\n                    };\r\n                }\r\n    \r\n                // 复制静态方法\r\n                $.extend( true, child, Super, staticProtos || {} );\r\n    \r\n                /* jshint camelcase: false */\r\n    \r\n                // 让子类的__super__属性指向父类。\r\n                child.__super__ = Super.prototype;\r\n    \r\n                // 构建原型，添加原型方法或属性。\r\n                // 暂时用Object.create实现。\r\n                child.prototype = createObject( Super.prototype );\r\n                protos && $.extend( true, child.prototype, protos );\r\n    \r\n                return child;\r\n            },\r\n    \r\n            /**\r\n             * 一个不做任何事情的方法。可以用来赋值给默认的callback.\r\n             * @method noop\r\n             */\r\n            noop: noop,\r\n    \r\n            /**\r\n             * 返回一个新的方法，此方法将已指定的`context`来执行。\r\n             * @grammar Base.bindFn( fn, context ) => Function\r\n             * @method bindFn\r\n             * @example\r\n             * var doSomething = function() {\r\n             *         console.log( this.name );\r\n             *     },\r\n             *     obj = {\r\n             *         name: 'Object Name'\r\n             *     },\r\n             *     aliasFn = Base.bind( doSomething, obj );\r\n             *\r\n             *  aliasFn();    // => Object Name\r\n             *\r\n             */\r\n            bindFn: bindFn,\r\n    \r\n            /**\r\n             * 引用Console.log如果存在的话，否则引用一个[空函数noop](#WebUploader:Base.noop)。\r\n             * @grammar Base.log( args... ) => undefined\r\n             * @method log\r\n             */\r\n            log: (function() {\r\n                if ( window.console ) {\r\n                    return bindFn( console.log, console );\r\n                }\r\n                return noop;\r\n            })(),\r\n    \r\n            nextTick: (function() {\r\n    \r\n                return function( cb ) {\r\n                    setTimeout( cb, 1 );\r\n                };\r\n    \r\n                // @bug 当浏览器不在当前窗口时就停了。\r\n                // var next = window.requestAnimationFrame ||\r\n                //     window.webkitRequestAnimationFrame ||\r\n                //     window.mozRequestAnimationFrame ||\r\n                //     function( cb ) {\r\n                //         window.setTimeout( cb, 1000 / 60 );\r\n                //     };\r\n    \r\n                // // fix: Uncaught TypeError: Illegal invocation\r\n                // return bindFn( next, window );\r\n            })(),\r\n    \r\n            /**\r\n             * 被[uncurrythis](http://www.2ality.com/2011/11/uncurrying-this.html)的数组slice方法。\r\n             * 将用来将非数组对象转化成数组对象。\r\n             * @grammar Base.slice( target, start[, end] ) => Array\r\n             * @method slice\r\n             * @example\r\n             * function doSomthing() {\r\n             *     var args = Base.slice( arguments, 1 );\r\n             *     console.log( args );\r\n             * }\r\n             *\r\n             * doSomthing( 'ignored', 'arg2', 'arg3' );    // => Array [\"arg2\", \"arg3\"]\r\n             */\r\n            slice: uncurryThis( [].slice ),\r\n    \r\n            /**\r\n             * 生成唯一的ID\r\n             * @method guid\r\n             * @grammar Base.guid() => String\r\n             * @grammar Base.guid( prefx ) => String\r\n             */\r\n            guid: (function() {\r\n                var counter = 0;\r\n    \r\n                return function( prefix ) {\r\n                    var guid = (+new Date()).toString( 32 ),\r\n                        i = 0;\r\n    \r\n                    for ( ; i < 5; i++ ) {\r\n                        guid += Math.floor( Math.random() * 65535 ).toString( 32 );\r\n                    }\r\n    \r\n                    return (prefix || 'wu_') + guid + (counter++).toString( 32 );\r\n                };\r\n            })(),\r\n    \r\n            /**\r\n             * 格式化文件大小, 输出成带单位的字符串\r\n             * @method formatSize\r\n             * @grammar Base.formatSize( size ) => String\r\n             * @grammar Base.formatSize( size, pointLength ) => String\r\n             * @grammar Base.formatSize( size, pointLength, units ) => String\r\n             * @param {Number} size 文件大小\r\n             * @param {Number} [pointLength=2] 精确到的小数点数。\r\n             * @param {Array} [units=[ 'B', 'K', 'M', 'G', 'TB' ]] 单位数组。从字节，到千字节，一直往上指定。如果单位数组里面只指定了到了K(千字节)，同时文件大小大于M, 此方法的输出将还是显示成多少K.\r\n             * @example\r\n             * console.log( Base.formatSize( 100 ) );    // => 100B\r\n             * console.log( Base.formatSize( 1024 ) );    // => 1.00K\r\n             * console.log( Base.formatSize( 1024, 0 ) );    // => 1K\r\n             * console.log( Base.formatSize( 1024 * 1024 ) );    // => 1.00M\r\n             * console.log( Base.formatSize( 1024 * 1024 * 1024 ) );    // => 1.00G\r\n             * console.log( Base.formatSize( 1024 * 1024 * 1024, 0, ['B', 'KB', 'MB'] ) );    // => 1024MB\r\n             */\r\n            formatSize: function( size, pointLength, units ) {\r\n                var unit;\r\n    \r\n                units = units || [ 'B', 'K', 'M', 'G', 'TB' ];\r\n    \r\n                while ( (unit = units.shift()) && size > 1024 ) {\r\n                    size = size / 1024;\r\n                }\r\n    \r\n                return (unit === 'B' ? size : size.toFixed( pointLength || 2 )) +\r\n                        unit;\r\n            }\r\n        };\r\n    });\r\n    /**\r\n     * 事件处理类，可以独立使用，也可以扩展给对象使用。\r\n     * @fileOverview Mediator\r\n     */\r\n    define('mediator',[\r\n        'base'\r\n    ], function( Base ) {\r\n        var $ = Base.$,\r\n            slice = [].slice,\r\n            separator = /\\s+/,\r\n            protos;\r\n    \r\n        // 根据条件过滤出事件handlers.\r\n        function findHandlers( arr, name, callback, context ) {\r\n            return $.grep( arr, function( handler ) {\r\n                return handler &&\r\n                        (!name || handler.e === name) &&\r\n                        (!callback || handler.cb === callback ||\r\n                        handler.cb._cb === callback) &&\r\n                        (!context || handler.ctx === context);\r\n            });\r\n        }\r\n    \r\n        function eachEvent( events, callback, iterator ) {\r\n            // 不支持对象，只支持多个event用空格隔开\r\n            $.each( (events || '').split( separator ), function( _, key ) {\r\n                iterator( key, callback );\r\n            });\r\n        }\r\n    \r\n        function triggerHanders( events, args ) {\r\n            var stoped = false,\r\n                i = -1,\r\n                len = events.length,\r\n                handler;\r\n    \r\n            while ( ++i < len ) {\r\n                handler = events[ i ];\r\n    \r\n                if ( handler.cb.apply( handler.ctx2, args ) === false ) {\r\n                    stoped = true;\r\n                    break;\r\n                }\r\n            }\r\n    \r\n            return !stoped;\r\n        }\r\n    \r\n        protos = {\r\n    \r\n            /**\r\n             * 绑定事件。\r\n             *\r\n             * `callback`方法在执行时，arguments将会来源于trigger的时候携带的参数。如\r\n             * ```javascript\r\n             * var obj = {};\r\n             *\r\n             * // 使得obj有事件行为\r\n             * Mediator.installTo( obj );\r\n             *\r\n             * obj.on( 'testa', function( arg1, arg2 ) {\r\n             *     console.log( arg1, arg2 ); // => 'arg1', 'arg2'\r\n             * });\r\n             *\r\n             * obj.trigger( 'testa', 'arg1', 'arg2' );\r\n             * ```\r\n             *\r\n             * 如果`callback`中，某一个方法`return false`了，则后续的其他`callback`都不会被执行到。\r\n             * 切会影响到`trigger`方法的返回值，为`false`。\r\n             *\r\n             * `on`还可以用来添加一个特殊事件`all`, 这样所有的事件触发都会响应到。同时此类`callback`中的arguments有一个不同处，\r\n             * 就是第一个参数为`type`，记录当前是什么事件在触发。此类`callback`的优先级比脚低，会再正常`callback`执行完后触发。\r\n             * ```javascript\r\n             * obj.on( 'all', function( type, arg1, arg2 ) {\r\n             *     console.log( type, arg1, arg2 ); // => 'testa', 'arg1', 'arg2'\r\n             * });\r\n             * ```\r\n             *\r\n             * @method on\r\n             * @grammar on( name, callback[, context] ) => self\r\n             * @param  {String}   name     事件名，支持多个事件用空格隔开\r\n             * @param  {Function} callback 事件处理器\r\n             * @param  {Object}   [context]  事件处理器的上下文。\r\n             * @return {self} 返回自身，方便链式\r\n             * @chainable\r\n             * @class Mediator\r\n             */\r\n            on: function( name, callback, context ) {\r\n                var me = this,\r\n                    set;\r\n    \r\n                if ( !callback ) {\r\n                    return this;\r\n                }\r\n    \r\n                set = this._events || (this._events = []);\r\n    \r\n                eachEvent( name, callback, function( name, callback ) {\r\n                    var handler = { e: name };\r\n    \r\n                    handler.cb = callback;\r\n                    handler.ctx = context;\r\n                    handler.ctx2 = context || me;\r\n                    handler.id = set.length;\r\n    \r\n                    set.push( handler );\r\n                });\r\n    \r\n                return this;\r\n            },\r\n    \r\n            /**\r\n             * 绑定事件，且当handler执行完后，自动解除绑定。\r\n             * @method once\r\n             * @grammar once( name, callback[, context] ) => self\r\n             * @param  {String}   name     事件名\r\n             * @param  {Function} callback 事件处理器\r\n             * @param  {Object}   [context]  事件处理器的上下文。\r\n             * @return {self} 返回自身，方便链式\r\n             * @chainable\r\n             */\r\n            once: function( name, callback, context ) {\r\n                var me = this;\r\n    \r\n                if ( !callback ) {\r\n                    return me;\r\n                }\r\n    \r\n                eachEvent( name, callback, function( name, callback ) {\r\n                    var once = function() {\r\n                            me.off( name, once );\r\n                            return callback.apply( context || me, arguments );\r\n                        };\r\n    \r\n                    once._cb = callback;\r\n                    me.on( name, once, context );\r\n                });\r\n    \r\n                return me;\r\n            },\r\n    \r\n            /**\r\n             * 解除事件绑定\r\n             * @method off\r\n             * @grammar off( [name[, callback[, context] ] ] ) => self\r\n             * @param  {String}   [name]     事件名\r\n             * @param  {Function} [callback] 事件处理器\r\n             * @param  {Object}   [context]  事件处理器的上下文。\r\n             * @return {self} 返回自身，方便链式\r\n             * @chainable\r\n             */\r\n            off: function( name, cb, ctx ) {\r\n                var events = this._events;\r\n    \r\n                if ( !events ) {\r\n                    return this;\r\n                }\r\n    \r\n                if ( !name && !cb && !ctx ) {\r\n                    this._events = [];\r\n                    return this;\r\n                }\r\n    \r\n                eachEvent( name, cb, function( name, cb ) {\r\n                    $.each( findHandlers( events, name, cb, ctx ), function() {\r\n                        delete events[ this.id ];\r\n                    });\r\n                });\r\n    \r\n                return this;\r\n            },\r\n    \r\n            /**\r\n             * 触发事件\r\n             * @method trigger\r\n             * @grammar trigger( name[, args...] ) => self\r\n             * @param  {String}   type     事件名\r\n             * @param  {*} [...] 任意参数\r\n             * @return {Boolean} 如果handler中return false了，则返回false, 否则返回true\r\n             */\r\n            trigger: function( type ) {\r\n                var args, events, allEvents;\r\n    \r\n                if ( !this._events || !type ) {\r\n                    return this;\r\n                }\r\n    \r\n                args = slice.call( arguments, 1 );\r\n                events = findHandlers( this._events, type );\r\n                allEvents = findHandlers( this._events, 'all' );\r\n    \r\n                return triggerHanders( events, args ) &&\r\n                        triggerHanders( allEvents, arguments );\r\n            }\r\n        };\r\n    \r\n        /**\r\n         * 中介者，它本身是个单例，但可以通过[installTo](#WebUploader:Mediator:installTo)方法，使任何对象具备事件行为。\r\n         * 主要目的是负责模块与模块之间的合作，降低耦合度。\r\n         *\r\n         * @class Mediator\r\n         */\r\n        return $.extend({\r\n    \r\n            /**\r\n             * 可以通过这个接口，使任何对象具备事件功能。\r\n             * @method installTo\r\n             * @param  {Object} obj 需要具备事件行为的对象。\r\n             * @return {Object} 返回obj.\r\n             */\r\n            installTo: function( obj ) {\r\n                return $.extend( obj, protos );\r\n            }\r\n    \r\n        }, protos );\r\n    });\r\n    /**\r\n     * @fileOverview Uploader上传类\r\n     */\r\n    define('uploader',[\r\n        'base',\r\n        'mediator'\r\n    ], function( Base, Mediator ) {\r\n    \r\n        var $ = Base.$;\r\n    \r\n        /**\r\n         * 上传入口类。\r\n         * @class Uploader\r\n         * @constructor\r\n         * @grammar new Uploader( opts ) => Uploader\r\n         * @example\r\n         * var uploader = WebUploader.Uploader({\r\n         *     swf: 'path_of_swf/Uploader.swf',\r\n         *\r\n         *     // 开起分片上传。\r\n         *     chunked: true\r\n         * });\r\n         */\r\n        function Uploader( opts ) {\r\n            this.options = $.extend( true, {}, Uploader.options, opts );\r\n            this._init( this.options );\r\n        }\r\n    \r\n        // default Options\r\n        // widgets中有相应扩展\r\n        Uploader.options = {};\r\n        Mediator.installTo( Uploader.prototype );\r\n    \r\n        // 批量添加纯命令式方法。\r\n        $.each({\r\n            upload: 'start-upload',\r\n            stop: 'stop-upload',\r\n            getFile: 'get-file',\r\n            getFiles: 'get-files',\r\n            addFile: 'add-file',\r\n            addFiles: 'add-file',\r\n            sort: 'sort-files',\r\n            removeFile: 'remove-file',\r\n            cancelFile: 'cancel-file',\r\n            skipFile: 'skip-file',\r\n            retry: 'retry',\r\n            isInProgress: 'is-in-progress',\r\n            makeThumb: 'make-thumb',\r\n            md5File: 'md5-file',\r\n            getDimension: 'get-dimension',\r\n            addButton: 'add-btn',\r\n            predictRuntimeType: 'predict-runtime-type',\r\n            refresh: 'refresh',\r\n            disable: 'disable',\r\n            enable: 'enable',\r\n            reset: 'reset'\r\n        }, function( fn, command ) {\r\n            Uploader.prototype[ fn ] = function() {\r\n                return this.request( command, arguments );\r\n            };\r\n        });\r\n    \r\n        $.extend( Uploader.prototype, {\r\n            state: 'pending',\r\n    \r\n            _init: function( opts ) {\r\n                var me = this;\r\n    \r\n                me.request( 'init', opts, function() {\r\n                    me.state = 'ready';\r\n                    me.trigger('ready');\r\n                });\r\n            },\r\n    \r\n            /**\r\n             * 获取或者设置Uploader配置项。\r\n             * @method option\r\n             * @grammar option( key ) => *\r\n             * @grammar option( key, val ) => self\r\n             * @example\r\n             *\r\n             * // 初始状态图片上传前不会压缩\r\n             * var uploader = new WebUploader.Uploader({\r\n             *     compress: null;\r\n             * });\r\n             *\r\n             * // 修改后图片上传前，尝试将图片压缩到1600 * 1600\r\n             * uploader.option( 'compress', {\r\n             *     width: 1600,\r\n             *     height: 1600\r\n             * });\r\n             */\r\n            option: function( key, val ) {\r\n                var opts = this.options;\r\n    \r\n                // setter\r\n                if ( arguments.length > 1 ) {\r\n    \r\n                    if ( $.isPlainObject( val ) &&\r\n                            $.isPlainObject( opts[ key ] ) ) {\r\n                        $.extend( opts[ key ], val );\r\n                    } else {\r\n                        opts[ key ] = val;\r\n                    }\r\n    \r\n                } else {    // getter\r\n                    return key ? opts[ key ] : opts;\r\n                }\r\n            },\r\n    \r\n            /**\r\n             * 获取文件统计信息。返回一个包含一下信息的对象。\r\n             * * `successNum` 上传成功的文件数\r\n             * * `progressNum` 上传中的文件数\r\n             * * `cancelNum` 被删除的文件数\r\n             * * `invalidNum` 无效的文件数\r\n             * * `uploadFailNum` 上传失败的文件数\r\n             * * `queueNum` 还在队列中的文件数\r\n             * * `interruptNum` 被暂停的文件数\r\n             * @method getStats\r\n             * @grammar getStats() => Object\r\n             */\r\n            getStats: function() {\r\n                // return this._mgr.getStats.apply( this._mgr, arguments );\r\n                var stats = this.request('get-stats');\r\n    \r\n                return stats ? {\r\n                    successNum: stats.numOfSuccess,\r\n                    progressNum: stats.numOfProgress,\r\n    \r\n                    // who care?\r\n                    // queueFailNum: 0,\r\n                    cancelNum: stats.numOfCancel,\r\n                    invalidNum: stats.numOfInvalid,\r\n                    uploadFailNum: stats.numOfUploadFailed,\r\n                    queueNum: stats.numOfQueue,\r\n                    interruptNum: stats.numofInterrupt\r\n                } : {};\r\n            },\r\n    \r\n            // 需要重写此方法来来支持opts.onEvent和instance.onEvent的处理器\r\n            trigger: function( type/*, args...*/ ) {\r\n                var args = [].slice.call( arguments, 1 ),\r\n                    opts = this.options,\r\n                    name = 'on' + type.substring( 0, 1 ).toUpperCase() +\r\n                        type.substring( 1 );\r\n    \r\n                if (\r\n                        // 调用通过on方法注册的handler.\r\n                        Mediator.trigger.apply( this, arguments ) === false ||\r\n    \r\n                        // 调用opts.onEvent\r\n                        $.isFunction( opts[ name ] ) &&\r\n                        opts[ name ].apply( this, args ) === false ||\r\n    \r\n                        // 调用this.onEvent\r\n                        $.isFunction( this[ name ] ) &&\r\n                        this[ name ].apply( this, args ) === false ||\r\n    \r\n                        // 广播所有uploader的事件。\r\n                        Mediator.trigger.apply( Mediator,\r\n                        [ this, type ].concat( args ) ) === false ) {\r\n    \r\n                    return false;\r\n                }\r\n    \r\n                return true;\r\n            },\r\n    \r\n            /**\r\n             * 销毁 webuploader 实例\r\n             * @method destroy\r\n             * @grammar destroy() => undefined\r\n             */\r\n            destroy: function() {\r\n                this.request( 'destroy', arguments );\r\n                this.off();\r\n            },\r\n    \r\n            // widgets/widget.js将补充此方法的详细文档。\r\n            request: Base.noop\r\n        });\r\n    \r\n        /**\r\n         * 创建Uploader实例，等同于new Uploader( opts );\r\n         * @method create\r\n         * @class Base\r\n         * @static\r\n         * @grammar Base.create( opts ) => Uploader\r\n         */\r\n        Base.create = Uploader.create = function( opts ) {\r\n            return new Uploader( opts );\r\n        };\r\n    \r\n        // 暴露Uploader，可以通过它来扩展业务逻辑。\r\n        Base.Uploader = Uploader;\r\n    \r\n        return Uploader;\r\n    });\r\n    /**\r\n     * @fileOverview Runtime管理器，负责Runtime的选择, 连接\r\n     */\r\n    define('runtime/runtime',[\r\n        'base',\r\n        'mediator'\r\n    ], function( Base, Mediator ) {\r\n    \r\n        var $ = Base.$,\r\n            factories = {},\r\n    \r\n            // 获取对象的第一个key\r\n            getFirstKey = function( obj ) {\r\n                for ( var key in obj ) {\r\n                    if ( obj.hasOwnProperty( key ) ) {\r\n                        return key;\r\n                    }\r\n                }\r\n                return null;\r\n            };\r\n    \r\n        // 接口类。\r\n        function Runtime( options ) {\r\n            this.options = $.extend({\r\n                container: document.body\r\n            }, options );\r\n            this.uid = Base.guid('rt_');\r\n        }\r\n    \r\n        $.extend( Runtime.prototype, {\r\n    \r\n            getContainer: function() {\r\n                var opts = this.options,\r\n                    parent, container;\r\n    \r\n                if ( this._container ) {\r\n                    return this._container;\r\n                }\r\n    \r\n                parent = $( opts.container || document.body );\r\n                container = $( document.createElement('div') );\r\n    \r\n                container.attr( 'id', 'rt_' + this.uid );\r\n                container.css({\r\n                    position: 'absolute',\r\n                    top: '0px',\r\n                    left: '0px',\r\n                    width: '1px',\r\n                    height: '1px',\r\n                    overflow: 'hidden'\r\n                });\r\n    \r\n                parent.append( container );\r\n                parent.addClass('webuploader-container');\r\n                this._container = container;\r\n                this._parent = parent;\r\n                return container;\r\n            },\r\n    \r\n            init: Base.noop,\r\n            exec: Base.noop,\r\n    \r\n            destroy: function() {\r\n                this._container && this._container.remove();\r\n                this._parent && this._parent.removeClass('webuploader-container');\r\n                this.off();\r\n            }\r\n        });\r\n    \r\n        Runtime.orders = 'html5,flash';\r\n    \r\n    \r\n        /**\r\n         * 添加Runtime实现。\r\n         * @param {String} type    类型\r\n         * @param {Runtime} factory 具体Runtime实现。\r\n         */\r\n        Runtime.addRuntime = function( type, factory ) {\r\n            factories[ type ] = factory;\r\n        };\r\n    \r\n        Runtime.hasRuntime = function( type ) {\r\n            return !!(type ? factories[ type ] : getFirstKey( factories ));\r\n        };\r\n    \r\n        Runtime.create = function( opts, orders ) {\r\n            var type, runtime;\r\n    \r\n            orders = orders || Runtime.orders;\r\n            $.each( orders.split( /\\s*,\\s*/g ), function() {\r\n                if ( factories[ this ] ) {\r\n                    type = this;\r\n                    return false;\r\n                }\r\n            });\r\n    \r\n            type = type || getFirstKey( factories );\r\n    \r\n            if ( !type ) {\r\n                throw new Error('Runtime Error');\r\n            }\r\n    \r\n            runtime = new factories[ type ]( opts );\r\n            return runtime;\r\n        };\r\n    \r\n        Mediator.installTo( Runtime.prototype );\r\n        return Runtime;\r\n    });\r\n    \r\n    /**\r\n     * @fileOverview Runtime管理器，负责Runtime的选择, 连接\r\n     */\r\n    define('runtime/client',[\r\n        'base',\r\n        'mediator',\r\n        'runtime/runtime'\r\n    ], function( Base, Mediator, Runtime ) {\r\n    \r\n        var cache;\r\n    \r\n        cache = (function() {\r\n            var obj = {};\r\n    \r\n            return {\r\n                add: function( runtime ) {\r\n                    obj[ runtime.uid ] = runtime;\r\n                },\r\n    \r\n                get: function( ruid, standalone ) {\r\n                    var i;\r\n    \r\n                    if ( ruid ) {\r\n                        return obj[ ruid ];\r\n                    }\r\n    \r\n                    for ( i in obj ) {\r\n                        // 有些类型不能重用，比如filepicker.\r\n                        if ( standalone && obj[ i ].__standalone ) {\r\n                            continue;\r\n                        }\r\n    \r\n                        return obj[ i ];\r\n                    }\r\n    \r\n                    return null;\r\n                },\r\n    \r\n                remove: function( runtime ) {\r\n                    delete obj[ runtime.uid ];\r\n                }\r\n            };\r\n        })();\r\n    \r\n        function RuntimeClient( component, standalone ) {\r\n            var deferred = Base.Deferred(),\r\n                runtime;\r\n    \r\n            this.uid = Base.guid('client_');\r\n    \r\n            // 允许runtime没有初始化之前，注册一些方法在初始化后执行。\r\n            this.runtimeReady = function( cb ) {\r\n                return deferred.done( cb );\r\n            };\r\n    \r\n            this.connectRuntime = function( opts, cb ) {\r\n    \r\n                // already connected.\r\n                if ( runtime ) {\r\n                    throw new Error('already connected!');\r\n                }\r\n    \r\n                deferred.done( cb );\r\n    \r\n                if ( typeof opts === 'string' && cache.get( opts ) ) {\r\n                    runtime = cache.get( opts );\r\n                }\r\n    \r\n                // 像filePicker只能独立存在，不能公用。\r\n                runtime = runtime || cache.get( null, standalone );\r\n    \r\n                // 需要创建\r\n                if ( !runtime ) {\r\n                    runtime = Runtime.create( opts, opts.runtimeOrder );\r\n                    runtime.__promise = deferred.promise();\r\n                    runtime.once( 'ready', deferred.resolve );\r\n                    runtime.init();\r\n                    cache.add( runtime );\r\n                    runtime.__client = 1;\r\n                } else {\r\n                    // 来自cache\r\n                    Base.$.extend( runtime.options, opts );\r\n                    runtime.__promise.then( deferred.resolve );\r\n                    runtime.__client++;\r\n                }\r\n    \r\n                standalone && (runtime.__standalone = standalone);\r\n                return runtime;\r\n            };\r\n    \r\n            this.getRuntime = function() {\r\n                return runtime;\r\n            };\r\n    \r\n            this.disconnectRuntime = function() {\r\n                if ( !runtime ) {\r\n                    return;\r\n                }\r\n    \r\n                runtime.__client--;\r\n    \r\n                if ( runtime.__client <= 0 ) {\r\n                    cache.remove( runtime );\r\n                    delete runtime.__promise;\r\n                    runtime.destroy();\r\n                }\r\n    \r\n                runtime = null;\r\n            };\r\n    \r\n            this.exec = function() {\r\n                if ( !runtime ) {\r\n                    return;\r\n                }\r\n    \r\n                var args = Base.slice( arguments );\r\n                component && args.unshift( component );\r\n    \r\n                return runtime.exec.apply( this, args );\r\n            };\r\n    \r\n            this.getRuid = function() {\r\n                return runtime && runtime.uid;\r\n            };\r\n    \r\n            this.destroy = (function( destroy ) {\r\n                return function() {\r\n                    destroy && destroy.apply( this, arguments );\r\n                    this.trigger('destroy');\r\n                    this.off();\r\n                    this.exec('destroy');\r\n                    this.disconnectRuntime();\r\n                };\r\n            })( this.destroy );\r\n        }\r\n    \r\n        Mediator.installTo( RuntimeClient.prototype );\r\n        return RuntimeClient;\r\n    });\r\n    /**\r\n     * @fileOverview 错误信息\r\n     */\r\n    define('lib/dnd',[\r\n        'base',\r\n        'mediator',\r\n        'runtime/client'\r\n    ], function( Base, Mediator, RuntimeClent ) {\r\n    \r\n        var $ = Base.$;\r\n    \r\n        function DragAndDrop( opts ) {\r\n            opts = this.options = $.extend({}, DragAndDrop.options, opts );\r\n    \r\n            opts.container = $( opts.container );\r\n    \r\n            if ( !opts.container.length ) {\r\n                return;\r\n            }\r\n    \r\n            RuntimeClent.call( this, 'DragAndDrop' );\r\n        }\r\n    \r\n        DragAndDrop.options = {\r\n            accept: null,\r\n            disableGlobalDnd: false\r\n        };\r\n    \r\n        Base.inherits( RuntimeClent, {\r\n            constructor: DragAndDrop,\r\n    \r\n            init: function() {\r\n                var me = this;\r\n    \r\n                me.connectRuntime( me.options, function() {\r\n                    me.exec('init');\r\n                    me.trigger('ready');\r\n                });\r\n            }\r\n        });\r\n    \r\n        Mediator.installTo( DragAndDrop.prototype );\r\n    \r\n        return DragAndDrop;\r\n    });\r\n    /**\r\n     * @fileOverview 组件基类。\r\n     */\r\n    define('widgets/widget',[\r\n        'base',\r\n        'uploader'\r\n    ], function( Base, Uploader ) {\r\n    \r\n        var $ = Base.$,\r\n            _init = Uploader.prototype._init,\r\n            _destroy = Uploader.prototype.destroy,\r\n            IGNORE = {},\r\n            widgetClass = [];\r\n    \r\n        function isArrayLike( obj ) {\r\n            if ( !obj ) {\r\n                return false;\r\n            }\r\n    \r\n            var length = obj.length,\r\n                type = $.type( obj );\r\n    \r\n            if ( obj.nodeType === 1 && length ) {\r\n                return true;\r\n            }\r\n    \r\n            return type === 'array' || type !== 'function' && type !== 'string' &&\r\n                    (length === 0 || typeof length === 'number' && length > 0 &&\r\n                    (length - 1) in obj);\r\n        }\r\n    \r\n        function Widget( uploader ) {\r\n            this.owner = uploader;\r\n            this.options = uploader.options;\r\n        }\r\n    \r\n        $.extend( Widget.prototype, {\r\n    \r\n            init: Base.noop,\r\n    \r\n            // 类Backbone的事件监听声明，监听uploader实例上的事件\r\n            // widget直接无法监听事件，事件只能通过uploader来传递\r\n            invoke: function( apiName, args ) {\r\n    \r\n                /*\r\n                    {\r\n                        'make-thumb': 'makeThumb'\r\n                    }\r\n                 */\r\n                var map = this.responseMap;\r\n    \r\n                // 如果无API响应声明则忽略\r\n                if ( !map || !(apiName in map) || !(map[ apiName ] in this) ||\r\n                        !$.isFunction( this[ map[ apiName ] ] ) ) {\r\n    \r\n                    return IGNORE;\r\n                }\r\n    \r\n                return this[ map[ apiName ] ].apply( this, args );\r\n    \r\n            },\r\n    \r\n            /**\r\n             * 发送命令。当传入`callback`或者`handler`中返回`promise`时。返回一个当所有`handler`中的promise都完成后完成的新`promise`。\r\n             * @method request\r\n             * @grammar request( command, args ) => * | Promise\r\n             * @grammar request( command, args, callback ) => Promise\r\n             * @for  Uploader\r\n             */\r\n            request: function() {\r\n                return this.owner.request.apply( this.owner, arguments );\r\n            }\r\n        });\r\n    \r\n        // 扩展Uploader.\r\n        $.extend( Uploader.prototype, {\r\n    \r\n            /**\r\n             * @property {String | Array} [disableWidgets=undefined]\r\n             * @namespace options\r\n             * @for Uploader\r\n             * @description 默认所有 Uploader.register 了的 widget 都会被加载，如果禁用某一部分，请通过此 option 指定黑名单。\r\n             */\r\n    \r\n            // 覆写_init用来初始化widgets\r\n            _init: function() {\r\n                var me = this,\r\n                    widgets = me._widgets = [],\r\n                    deactives = me.options.disableWidgets || '';\r\n    \r\n                $.each( widgetClass, function( _, klass ) {\r\n                    (!deactives || !~deactives.indexOf( klass._name )) &&\r\n                        widgets.push( new klass( me ) );\r\n                });\r\n    \r\n                return _init.apply( me, arguments );\r\n            },\r\n    \r\n            request: function( apiName, args, callback ) {\r\n                var i = 0,\r\n                    widgets = this._widgets,\r\n                    len = widgets && widgets.length,\r\n                    rlts = [],\r\n                    dfds = [],\r\n                    widget, rlt, promise, key;\r\n    \r\n                args = isArrayLike( args ) ? args : [ args ];\r\n    \r\n                for ( ; i < len; i++ ) {\r\n                    widget = widgets[ i ];\r\n                    rlt = widget.invoke( apiName, args );\r\n    \r\n                    if ( rlt !== IGNORE ) {\r\n    \r\n                        // Deferred对象\r\n                        if ( Base.isPromise( rlt ) ) {\r\n                            dfds.push( rlt );\r\n                        } else {\r\n                            rlts.push( rlt );\r\n                        }\r\n                    }\r\n                }\r\n    \r\n                // 如果有callback，则用异步方式。\r\n                if ( callback || dfds.length ) {\r\n                    promise = Base.when.apply( Base, dfds );\r\n                    key = promise.pipe ? 'pipe' : 'then';\r\n    \r\n                    // 很重要不能删除。删除了会死循环。\r\n                    // 保证执行顺序。让callback总是在下一个 tick 中执行。\r\n                    return promise[ key ](function() {\r\n                                var deferred = Base.Deferred(),\r\n                                    args = arguments;\r\n    \r\n                                if ( args.length === 1 ) {\r\n                                    args = args[ 0 ];\r\n                                }\r\n    \r\n                                setTimeout(function() {\r\n                                    deferred.resolve( args );\r\n                                }, 1 );\r\n    \r\n                                return deferred.promise();\r\n                            })[ callback ? key : 'done' ]( callback || Base.noop );\r\n                } else {\r\n                    return rlts[ 0 ];\r\n                }\r\n            },\r\n    \r\n            destroy: function() {\r\n                _destroy.apply( this, arguments );\r\n                this._widgets = null;\r\n            }\r\n        });\r\n    \r\n        /**\r\n         * 添加组件\r\n         * @grammar Uploader.register(proto);\r\n         * @grammar Uploader.register(map, proto);\r\n         * @param  {object} responseMap API 名称与函数实现的映射\r\n         * @param  {object} proto 组件原型，构造函数通过 constructor 属性定义\r\n         * @method Uploader.register\r\n         * @for Uploader\r\n         * @example\r\n         * Uploader.register({\r\n         *     'make-thumb': 'makeThumb'\r\n         * }, {\r\n         *     init: function( options ) {},\r\n         *     makeThumb: function() {}\r\n         * });\r\n         *\r\n         * Uploader.register({\r\n         *     'make-thumb': function() {\r\n         *         \r\n         *     }\r\n         * });\r\n         */\r\n        Uploader.register = Widget.register = function( responseMap, widgetProto ) {\r\n            var map = { init: 'init', destroy: 'destroy', name: 'anonymous' },\r\n                klass;\r\n    \r\n            if ( arguments.length === 1 ) {\r\n                widgetProto = responseMap;\r\n    \r\n                // 自动生成 map 表。\r\n                $.each(widgetProto, function(key) {\r\n                    if ( key[0] === '_' || key === 'name' ) {\r\n                        key === 'name' && (map.name = widgetProto.name);\r\n                        return;\r\n                    }\r\n    \r\n                    map[key.replace(/[A-Z]/g, '-$&').toLowerCase()] = key;\r\n                });\r\n    \r\n            } else {\r\n                map = $.extend( map, responseMap );\r\n            }\r\n    \r\n            widgetProto.responseMap = map;\r\n            klass = Base.inherits( Widget, widgetProto );\r\n            klass._name = map.name;\r\n            widgetClass.push( klass );\r\n    \r\n            return klass;\r\n        };\r\n    \r\n        /**\r\n         * 删除插件，只有在注册时指定了名字的才能被删除。\r\n         * @grammar Uploader.unRegister(name);\r\n         * @param  {string} name 组件名字\r\n         * @method Uploader.unRegister\r\n         * @for Uploader\r\n         * @example\r\n         *\r\n         * Uploader.register({\r\n         *     name: 'custom',\r\n         *     \r\n         *     'make-thumb': function() {\r\n         *         \r\n         *     }\r\n         * });\r\n         *\r\n         * Uploader.unRegister('custom');\r\n         */\r\n        Uploader.unRegister = Widget.unRegister = function( name ) {\r\n            if ( !name || name === 'anonymous' ) {\r\n                return;\r\n            }\r\n            \r\n            // 删除指定的插件。\r\n            for ( var i = widgetClass.length; i--; ) {\r\n                if ( widgetClass[i]._name === name ) {\r\n                    widgetClass.splice(i, 1)\r\n                }\r\n            }\r\n        };\r\n    \r\n        return Widget;\r\n    });\r\n    /**\r\n     * @fileOverview DragAndDrop Widget。\r\n     */\r\n    define('widgets/filednd',[\r\n        'base',\r\n        'uploader',\r\n        'lib/dnd',\r\n        'widgets/widget'\r\n    ], function( Base, Uploader, Dnd ) {\r\n        var $ = Base.$;\r\n    \r\n        Uploader.options.dnd = '';\r\n    \r\n        /**\r\n         * @property {Selector} [dnd=undefined]  指定Drag And Drop拖拽的容器，如果不指定，则不启动。\r\n         * @namespace options\r\n         * @for Uploader\r\n         */\r\n        \r\n        /**\r\n         * @property {Selector} [disableGlobalDnd=false]  是否禁掉整个页面的拖拽功能，如果不禁用，图片拖进来的时候会默认被浏览器打开。\r\n         * @namespace options\r\n         * @for Uploader\r\n         */\r\n    \r\n        /**\r\n         * @event dndAccept\r\n         * @param {DataTransferItemList} items DataTransferItem\r\n         * @description 阻止此事件可以拒绝某些类型的文件拖入进来。目前只有 chrome 提供这样的 API，且只能通过 mime-type 验证。\r\n         * @for  Uploader\r\n         */\r\n        return Uploader.register({\r\n            name: 'dnd',\r\n            \r\n            init: function( opts ) {\r\n    \r\n                if ( !opts.dnd ||\r\n                        this.request('predict-runtime-type') !== 'html5' ) {\r\n                    return;\r\n                }\r\n    \r\n                var me = this,\r\n                    deferred = Base.Deferred(),\r\n                    options = $.extend({}, {\r\n                        disableGlobalDnd: opts.disableGlobalDnd,\r\n                        container: opts.dnd,\r\n                        accept: opts.accept\r\n                    }),\r\n                    dnd;\r\n    \r\n                this.dnd = dnd = new Dnd( options );\r\n    \r\n                dnd.once( 'ready', deferred.resolve );\r\n                dnd.on( 'drop', function( files ) {\r\n                    me.request( 'add-file', [ files ]);\r\n                });\r\n    \r\n                // 检测文件是否全部允许添加。\r\n                dnd.on( 'accept', function( items ) {\r\n                    return me.owner.trigger( 'dndAccept', items );\r\n                });\r\n    \r\n                dnd.init();\r\n    \r\n                return deferred.promise();\r\n            },\r\n    \r\n            destroy: function() {\r\n                this.dnd && this.dnd.destroy();\r\n            }\r\n        });\r\n    });\r\n    \r\n    /**\r\n     * @fileOverview 错误信息\r\n     */\r\n    define('lib/filepaste',[\r\n        'base',\r\n        'mediator',\r\n        'runtime/client'\r\n    ], function( Base, Mediator, RuntimeClent ) {\r\n    \r\n        var $ = Base.$;\r\n    \r\n        function FilePaste( opts ) {\r\n            opts = this.options = $.extend({}, opts );\r\n            opts.container = $( opts.container || document.body );\r\n            RuntimeClent.call( this, 'FilePaste' );\r\n        }\r\n    \r\n        Base.inherits( RuntimeClent, {\r\n            constructor: FilePaste,\r\n    \r\n            init: function() {\r\n                var me = this;\r\n    \r\n                me.connectRuntime( me.options, function() {\r\n                    me.exec('init');\r\n                    me.trigger('ready');\r\n                });\r\n            }\r\n        });\r\n    \r\n        Mediator.installTo( FilePaste.prototype );\r\n    \r\n        return FilePaste;\r\n    });\r\n    /**\r\n     * @fileOverview 组件基类。\r\n     */\r\n    define('widgets/filepaste',[\r\n        'base',\r\n        'uploader',\r\n        'lib/filepaste',\r\n        'widgets/widget'\r\n    ], function( Base, Uploader, FilePaste ) {\r\n        var $ = Base.$;\r\n    \r\n        /**\r\n         * @property {Selector} [paste=undefined]  指定监听paste事件的容器，如果不指定，不启用此功能。此功能为通过粘贴来添加截屏的图片。建议设置为`document.body`.\r\n         * @namespace options\r\n         * @for Uploader\r\n         */\r\n        return Uploader.register({\r\n            name: 'paste',\r\n            \r\n            init: function( opts ) {\r\n    \r\n                if ( !opts.paste ||\r\n                        this.request('predict-runtime-type') !== 'html5' ) {\r\n                    return;\r\n                }\r\n    \r\n                var me = this,\r\n                    deferred = Base.Deferred(),\r\n                    options = $.extend({}, {\r\n                        container: opts.paste,\r\n                        accept: opts.accept\r\n                    }),\r\n                    paste;\r\n    \r\n                this.paste = paste = new FilePaste( options );\r\n    \r\n                paste.once( 'ready', deferred.resolve );\r\n                paste.on( 'paste', function( files ) {\r\n                    me.owner.request( 'add-file', [ files ]);\r\n                });\r\n                paste.init();\r\n    \r\n                return deferred.promise();\r\n            },\r\n    \r\n            destroy: function() {\r\n                this.paste && this.paste.destroy();\r\n            }\r\n        });\r\n    });\r\n    /**\r\n     * @fileOverview Blob\r\n     */\r\n    define('lib/blob',[\r\n        'base',\r\n        'runtime/client'\r\n    ], function( Base, RuntimeClient ) {\r\n    \r\n        function Blob( ruid, source ) {\r\n            var me = this;\r\n    \r\n            me.source = source;\r\n            me.ruid = ruid;\r\n            this.size = source.size || 0;\r\n    \r\n            // 如果没有指定 mimetype, 但是知道文件后缀。\r\n            if ( !source.type && this.ext &&\r\n                    ~'jpg,jpeg,png,gif,bmp'.indexOf( this.ext ) ) {\r\n                this.type = 'image/' + (this.ext === 'jpg' ? 'jpeg' : this.ext);\r\n            } else {\r\n                this.type = source.type || 'application/octet-stream';\r\n            }\r\n    \r\n            RuntimeClient.call( me, 'Blob' );\r\n            this.uid = source.uid || this.uid;\r\n    \r\n            if ( ruid ) {\r\n                me.connectRuntime( ruid );\r\n            }\r\n        }\r\n    \r\n        Base.inherits( RuntimeClient, {\r\n            constructor: Blob,\r\n    \r\n            slice: function( start, end ) {\r\n                return this.exec( 'slice', start, end );\r\n            },\r\n    \r\n            getSource: function() {\r\n                return this.source;\r\n            }\r\n        });\r\n    \r\n        return Blob;\r\n    });\r\n    /**\r\n     * 为了统一化Flash的File和HTML5的File而存在。\r\n     * 以至于要调用Flash里面的File，也可以像调用HTML5版本的File一下。\r\n     * @fileOverview File\r\n     */\r\n    define('lib/file',[\r\n        'base',\r\n        'lib/blob'\r\n    ], function( Base, Blob ) {\r\n    \r\n        var uid = 1,\r\n            rExt = /\\.([^.]+)$/;\r\n    \r\n        function File( ruid, file ) {\r\n            var ext;\r\n    \r\n            this.name = file.name || ('untitled' + uid++);\r\n            ext = rExt.exec( file.name ) ? RegExp.$1.toLowerCase() : '';\r\n    \r\n            // todo 支持其他类型文件的转换。\r\n            // 如果有 mimetype, 但是文件名里面没有找出后缀规律\r\n            if ( !ext && file.type ) {\r\n                ext = /\\/(jpg|jpeg|png|gif|bmp)$/i.exec( file.type ) ?\r\n                        RegExp.$1.toLowerCase() : '';\r\n                this.name += '.' + ext;\r\n            }\r\n    \r\n            this.ext = ext;\r\n            this.lastModifiedDate = file.lastModifiedDate ||\r\n                    (new Date()).toLocaleString();\r\n    \r\n            Blob.apply( this, arguments );\r\n        }\r\n    \r\n        return Base.inherits( Blob, File );\r\n    });\r\n    \r\n    /**\r\n     * @fileOverview 错误信息\r\n     */\r\n    define('lib/filepicker',[\r\n        'base',\r\n        'runtime/client',\r\n        'lib/file'\r\n    ], function( Base, RuntimeClient, File ) {\r\n    \r\n        var $ = Base.$;\r\n    \r\n        function FilePicker( opts ) {\r\n            opts = this.options = $.extend({}, FilePicker.options, opts );\r\n    \r\n            opts.container = $( opts.id );\r\n    \r\n            if ( !opts.container.length ) {\r\n                throw new Error('按钮指定错误');\r\n            }\r\n    \r\n            opts.innerHTML = opts.innerHTML || opts.label ||\r\n                    opts.container.html() || '';\r\n    \r\n            opts.button = $( opts.button || document.createElement('div') );\r\n            opts.button.html( opts.innerHTML );\r\n            opts.container.html( opts.button );\r\n    \r\n            RuntimeClient.call( this, 'FilePicker', true );\r\n        }\r\n    \r\n        FilePicker.options = {\r\n            button: null,\r\n            container: null,\r\n            label: null,\r\n            innerHTML: null,\r\n            multiple: true,\r\n            accept: null,\r\n            name: 'file',\r\n            style: 'webuploader-pick'   //pick element class attribute, default is \"webuploader-pick\"\r\n        };\r\n    \r\n        Base.inherits( RuntimeClient, {\r\n            constructor: FilePicker,\r\n    \r\n            init: function() {\r\n                var me = this,\r\n                    opts = me.options,\r\n                    button = opts.button,\r\n                    style = opts.style;\r\n    \r\n                if (style)\r\n                    button.addClass('webuploader-pick');\r\n    \r\n                me.on( 'all', function( type ) {\r\n                    var files;\r\n    \r\n                    switch ( type ) {\r\n                        case 'mouseenter':\r\n                            if (style)\r\n                                button.addClass('webuploader-pick-hover');\r\n                            break;\r\n    \r\n                        case 'mouseleave':\r\n                            if (style)\r\n                                button.removeClass('webuploader-pick-hover');\r\n                            break;\r\n    \r\n                        case 'change':\r\n                            files = me.exec('getFiles');\r\n                            me.trigger( 'select', $.map( files, function( file ) {\r\n                                file = new File( me.getRuid(), file );\r\n    \r\n                                // 记录来源。\r\n                                file._refer = opts.container;\r\n                                return file;\r\n                            }), opts.container );\r\n                            break;\r\n                    }\r\n                });\r\n    \r\n                me.connectRuntime( opts, function() {\r\n                    me.refresh();\r\n                    me.exec( 'init', opts );\r\n                    me.trigger('ready');\r\n                });\r\n    \r\n                this._resizeHandler = Base.bindFn( this.refresh, this );\r\n                $( window ).on( 'resize', this._resizeHandler );\r\n            },\r\n    \r\n            refresh: function() {\r\n                var shimContainer = this.getRuntime().getContainer(),\r\n                    button = this.options.button,\r\n                    width = button.outerWidth ?\r\n                            button.outerWidth() : button.width(),\r\n    \r\n                    height = button.outerHeight ?\r\n                            button.outerHeight() : button.height(),\r\n    \r\n                    pos = button.offset();\r\n    \r\n                width && height && shimContainer.css({\r\n                    bottom: 'auto',\r\n                    right: 'auto',\r\n                    width: width + 'px',\r\n                    height: height + 'px'\r\n                }).offset( pos );\r\n            },\r\n    \r\n            enable: function() {\r\n                var btn = this.options.button;\r\n    \r\n                btn.removeClass('webuploader-pick-disable');\r\n                this.refresh();\r\n            },\r\n    \r\n            disable: function() {\r\n                var btn = this.options.button;\r\n    \r\n                this.getRuntime().getContainer().css({\r\n                    top: '-99999px'\r\n                });\r\n    \r\n                btn.addClass('webuploader-pick-disable');\r\n            },\r\n    \r\n            destroy: function() {\r\n                var btn = this.options.button;\r\n                $( window ).off( 'resize', this._resizeHandler );\r\n                btn.removeClass('webuploader-pick-disable webuploader-pick-hover ' +\r\n                    'webuploader-pick');\r\n            }\r\n        });\r\n    \r\n        return FilePicker;\r\n    });\r\n    \r\n    /**\r\n     * @fileOverview 文件选择相关\r\n     */\r\n    define('widgets/filepicker',[\r\n        'base',\r\n        'uploader',\r\n        'lib/filepicker',\r\n        'widgets/widget'\r\n    ], function( Base, Uploader, FilePicker ) {\r\n        var $ = Base.$;\r\n    \r\n        $.extend( Uploader.options, {\r\n    \r\n            /**\r\n             * @property {Selector | Object} [pick=undefined]\r\n             * @namespace options\r\n             * @for Uploader\r\n             * @description 指定选择文件的按钮容器，不指定则不创建按钮。\r\n             *\r\n             * * `id` {Seletor|dom} 指定选择文件的按钮容器，不指定则不创建按钮。**注意** 这里虽然写的是 id, 但是不是只支持 id, 还支持 class, 或者 dom 节点。\r\n             * * `label` {String} 请采用 `innerHTML` 代替\r\n             * * `innerHTML` {String} 指定按钮文字。不指定时优先从指定的容器中看是否自带文字。\r\n             * * `multiple` {Boolean} 是否开起同时选择多个文件能力。\r\n             */\r\n            pick: null,\r\n    \r\n            /**\r\n             * @property {Arroy} [accept=null]\r\n             * @namespace options\r\n             * @for Uploader\r\n             * @description 指定接受哪些类型的文件。 由于目前还有ext转mimeType表，所以这里需要分开指定。\r\n             *\r\n             * * `title` {String} 文字描述\r\n             * * `extensions` {String} 允许的文件后缀，不带点，多个用逗号分割。\r\n             * * `mimeTypes` {String} 多个用逗号分割。\r\n             *\r\n             * 如：\r\n             *\r\n             * ```\r\n             * {\r\n             *     title: 'Images',\r\n             *     extensions: 'gif,jpg,jpeg,bmp,png',\r\n             *     mimeTypes: 'image/*'\r\n             * }\r\n             * ```\r\n             */\r\n            accept: null/*{\r\n                title: 'Images',\r\n                extensions: 'gif,jpg,jpeg,bmp,png',\r\n                mimeTypes: 'image/*'\r\n            }*/\r\n        });\r\n    \r\n        return Uploader.register({\r\n            name: 'picker',\r\n    \r\n            init: function( opts ) {\r\n                this.pickers = [];\r\n                return opts.pick && this.addBtn( opts.pick );\r\n            },\r\n    \r\n            refresh: function() {\r\n                $.each( this.pickers, function() {\r\n                    this.refresh();\r\n                });\r\n            },\r\n    \r\n            /**\r\n             * @method addBtn\r\n             * @for Uploader\r\n             * @grammar addBtn( pick ) => Promise\r\n             * @description\r\n             * 添加文件选择按钮，如果一个按钮不够，需要调用此方法来添加。参数跟[options.pick](#WebUploader:Uploader:options)一致。\r\n             * @example\r\n             * uploader.addBtn({\r\n             *     id: '#btnContainer',\r\n             *     innerHTML: '选择文件'\r\n             * });\r\n             */\r\n            addBtn: function( pick ) {\r\n                var me = this,\r\n                    opts = me.options,\r\n                    accept = opts.accept,\r\n                    promises = [];\r\n    \r\n                if ( !pick ) {\r\n                    return;\r\n                }\r\n    \r\n                $.isPlainObject( pick ) || (pick = {\r\n                    id: pick\r\n                });\r\n    \r\n                $( pick.id ).each(function() {\r\n                    var options, picker, deferred;\r\n    \r\n                    deferred = Base.Deferred();\r\n    \r\n                    options = $.extend({}, pick, {\r\n                        accept: $.isPlainObject( accept ) ? [ accept ] : accept,\r\n                        swf: opts.swf,\r\n                        runtimeOrder: opts.runtimeOrder,\r\n                        id: this\r\n                    });\r\n    \r\n                    picker = new FilePicker( options );\r\n    \r\n                    picker.once( 'ready', deferred.resolve );\r\n                    picker.on( 'select', function( files ) {\r\n                        me.owner.request( 'add-file', [ files ]);\r\n                    });\r\n                    picker.on('dialogopen', function() {\r\n                        me.owner.trigger('dialogOpen', picker.button);\r\n                    });\r\n                    picker.init();\r\n    \r\n                    me.pickers.push( picker );\r\n    \r\n                    promises.push( deferred.promise() );\r\n                });\r\n    \r\n                return Base.when.apply( Base, promises );\r\n            },\r\n    \r\n            disable: function() {\r\n                $.each( this.pickers, function() {\r\n                    this.disable();\r\n                });\r\n            },\r\n    \r\n            enable: function() {\r\n                $.each( this.pickers, function() {\r\n                    this.enable();\r\n                });\r\n            },\r\n    \r\n            destroy: function() {\r\n                $.each( this.pickers, function() {\r\n                    this.destroy();\r\n                });\r\n                this.pickers = null;\r\n            }\r\n        });\r\n    });\r\n    /**\r\n     * @fileOverview Image\r\n     */\r\n    define('lib/image',[\r\n        'base',\r\n        'runtime/client',\r\n        'lib/blob'\r\n    ], function( Base, RuntimeClient, Blob ) {\r\n        var $ = Base.$;\r\n    \r\n        // 构造器。\r\n        function Image( opts ) {\r\n            this.options = $.extend({}, Image.options, opts );\r\n            RuntimeClient.call( this, 'Image' );\r\n    \r\n            this.on( 'load', function() {\r\n                this._info = this.exec('info');\r\n                this._meta = this.exec('meta');\r\n            });\r\n        }\r\n    \r\n        // 默认选项。\r\n        Image.options = {\r\n    \r\n            // 默认的图片处理质量\r\n            quality: 90,\r\n    \r\n            // 是否裁剪\r\n            crop: false,\r\n    \r\n            // 是否保留头部信息\r\n            preserveHeaders: false,\r\n    \r\n            // 是否允许放大。\r\n            allowMagnify: false\r\n        };\r\n    \r\n        // 继承RuntimeClient.\r\n        Base.inherits( RuntimeClient, {\r\n            constructor: Image,\r\n    \r\n            info: function( val ) {\r\n    \r\n                // setter\r\n                if ( val ) {\r\n                    this._info = val;\r\n                    return this;\r\n                }\r\n    \r\n                // getter\r\n                return this._info;\r\n            },\r\n    \r\n            meta: function( val ) {\r\n    \r\n                // setter\r\n                if ( val ) {\r\n                    this._meta = val;\r\n                    return this;\r\n                }\r\n    \r\n                // getter\r\n                return this._meta;\r\n            },\r\n    \r\n            loadFromBlob: function( blob ) {\r\n                var me = this,\r\n                    ruid = blob.getRuid();\r\n    \r\n                this.connectRuntime( ruid, function() {\r\n                    me.exec( 'init', me.options );\r\n                    me.exec( 'loadFromBlob', blob );\r\n                });\r\n            },\r\n    \r\n            resize: function() {\r\n                var args = Base.slice( arguments );\r\n                return this.exec.apply( this, [ 'resize' ].concat( args ) );\r\n            },\r\n    \r\n            crop: function() {\r\n                var args = Base.slice( arguments );\r\n                return this.exec.apply( this, [ 'crop' ].concat( args ) );\r\n            },\r\n    \r\n            getAsDataUrl: function( type ) {\r\n                return this.exec( 'getAsDataUrl', type );\r\n            },\r\n    \r\n            getAsBlob: function( type ) {\r\n                var blob = this.exec( 'getAsBlob', type );\r\n    \r\n                return new Blob( this.getRuid(), blob );\r\n            }\r\n        });\r\n    \r\n        return Image;\r\n    });\r\n    /**\r\n     * @fileOverview 图片操作, 负责预览图片和上传前压缩图片\r\n     */\r\n    define('widgets/image',[\r\n        'base',\r\n        'uploader',\r\n        'lib/image',\r\n        'widgets/widget'\r\n    ], function( Base, Uploader, Image ) {\r\n    \r\n        var $ = Base.$,\r\n            throttle;\r\n    \r\n        // 根据要处理的文件大小来节流，一次不能处理太多，会卡。\r\n        throttle = (function( max ) {\r\n            var occupied = 0,\r\n                waiting = [],\r\n                tick = function() {\r\n                    var item;\r\n    \r\n                    while ( waiting.length && occupied < max ) {\r\n                        item = waiting.shift();\r\n                        occupied += item[ 0 ];\r\n                        item[ 1 ]();\r\n                    }\r\n                };\r\n    \r\n            return function( emiter, size, cb ) {\r\n                waiting.push([ size, cb ]);\r\n                emiter.once( 'destroy', function() {\r\n                    occupied -= size;\r\n                    setTimeout( tick, 1 );\r\n                });\r\n                setTimeout( tick, 1 );\r\n            };\r\n        })( 5 * 1024 * 1024 );\r\n    \r\n        $.extend( Uploader.options, {\r\n    \r\n            /**\r\n             * @property {Object} [thumb]\r\n             * @namespace options\r\n             * @for Uploader\r\n             * @description 配置生成缩略图的选项。\r\n             *\r\n             * 默认为：\r\n             *\r\n             * ```javascript\r\n             * {\r\n             *     width: 110,\r\n             *     height: 110,\r\n             *\r\n             *     // 图片质量，只有type为`image/jpeg`的时候才有效。\r\n             *     quality: 70,\r\n             *\r\n             *     // 是否允许放大，如果想要生成小图的时候不失真，此选项应该设置为false.\r\n             *     allowMagnify: true,\r\n             *\r\n             *     // 是否允许裁剪。\r\n             *     crop: true,\r\n             *\r\n             *     // 为空的话则保留原有图片格式。\r\n             *     // 否则强制转换成指定的类型。\r\n             *     type: 'image/jpeg'\r\n             * }\r\n             * ```\r\n             */\r\n            thumb: {\r\n                width: 110,\r\n                height: 110,\r\n                quality: 70,\r\n                allowMagnify: true,\r\n                crop: true,\r\n                preserveHeaders: false,\r\n    \r\n                // 为空的话则保留原有图片格式。\r\n                // 否则强制转换成指定的类型。\r\n                // IE 8下面 base64 大小不能超过 32K 否则预览失败，而非 jpeg 编码的图片很可\r\n                // 能会超过 32k, 所以这里设置成预览的时候都是 image/jpeg\r\n                type: 'image/jpeg'\r\n            },\r\n    \r\n            /**\r\n             * @property {Object} [compress]\r\n             * @namespace options\r\n             * @for Uploader\r\n             * @description 配置压缩的图片的选项。如果此选项为`false`, 则图片在上传前不进行压缩。\r\n             *\r\n             * 默认为：\r\n             *\r\n             * ```javascript\r\n             * {\r\n             *     width: 1600,\r\n             *     height: 1600,\r\n             *\r\n             *     // 图片质量，只有type为`image/jpeg`的时候才有效。\r\n             *     quality: 90,\r\n             *\r\n             *     // 是否允许放大，如果想要生成小图的时候不失真，此选项应该设置为false.\r\n             *     allowMagnify: false,\r\n             *\r\n             *     // 是否允许裁剪。\r\n             *     crop: false,\r\n             *\r\n             *     // 是否保留头部meta信息。\r\n             *     preserveHeaders: true,\r\n             *\r\n             *     // 如果发现压缩后文件大小比原来还大，则使用原来图片\r\n             *     // 此属性可能会影响图片自动纠正功能\r\n             *     noCompressIfLarger: false,\r\n             *\r\n             *     // 单位字节，如果图片大小小于此值，不会采用压缩。\r\n             *     compressSize: 0\r\n             * }\r\n             * ```\r\n             */\r\n            compress: {\r\n                width: 1600,\r\n                height: 1600,\r\n                quality: 90,\r\n                allowMagnify: false,\r\n                crop: false,\r\n                preserveHeaders: true\r\n            }\r\n        });\r\n    \r\n        return Uploader.register({\r\n    \r\n            name: 'image',\r\n    \r\n    \r\n            /**\r\n             * 生成缩略图，此过程为异步，所以需要传入`callback`。\r\n             * 通常情况在图片加入队里后调用此方法来生成预览图以增强交互效果。\r\n             *\r\n             * 当 width 或者 height 的值介于 0 - 1 时，被当成百分比使用。\r\n             *\r\n             * `callback`中可以接收到两个参数。\r\n             * * 第一个为error，如果生成缩略图有错误，此error将为真。\r\n             * * 第二个为ret, 缩略图的Data URL值。\r\n             *\r\n             * **注意**\r\n             * Date URL在IE6/7中不支持，所以不用调用此方法了，直接显示一张暂不支持预览图片好了。\r\n             * 也可以借助服务端，将 base64 数据传给服务端，生成一个临时文件供预览。\r\n             *\r\n             * @method makeThumb\r\n             * @grammar makeThumb( file, callback ) => undefined\r\n             * @grammar makeThumb( file, callback, width, height ) => undefined\r\n             * @for Uploader\r\n             * @example\r\n             *\r\n             * uploader.on( 'fileQueued', function( file ) {\r\n             *     var $li = ...;\r\n             *\r\n             *     uploader.makeThumb( file, function( error, ret ) {\r\n             *         if ( error ) {\r\n             *             $li.text('预览错误');\r\n             *         } else {\r\n             *             $li.append('<img alt=\"\" src=\"' + ret + '\" />');\r\n             *         }\r\n             *     });\r\n             *\r\n             * });\r\n             */\r\n            makeThumb: function( file, cb, width, height ) {\r\n                var opts, image;\r\n    \r\n                file = this.request( 'get-file', file );\r\n    \r\n                // 只预览图片格式。\r\n                if ( !file.type.match( /^image/ ) ) {\r\n                    cb( true );\r\n                    return;\r\n                }\r\n    \r\n                opts = $.extend({}, this.options.thumb );\r\n    \r\n                // 如果传入的是object.\r\n                if ( $.isPlainObject( width ) ) {\r\n                    opts = $.extend( opts, width );\r\n                    width = null;\r\n                }\r\n    \r\n                width = width || opts.width;\r\n                height = height || opts.height;\r\n    \r\n                image = new Image( opts );\r\n    \r\n                image.once( 'load', function() {\r\n                    file._info = file._info || image.info();\r\n                    file._meta = file._meta || image.meta();\r\n    \r\n                    // 如果 width 的值介于 0 - 1\r\n                    // 说明设置的是百分比。\r\n                    if ( width <= 1 && width > 0 ) {\r\n                        width = file._info.width * width;\r\n                    }\r\n    \r\n                    // 同样的规则应用于 height\r\n                    if ( height <= 1 && height > 0 ) {\r\n                        height = file._info.height * height;\r\n                    }\r\n    \r\n                    image.resize( width, height );\r\n                });\r\n    \r\n                // 当 resize 完后\r\n                image.once( 'complete', function() {\r\n                    cb( false, image.getAsDataUrl( opts.type ) );\r\n                    image.destroy();\r\n                });\r\n    \r\n                image.once( 'error', function( reason ) {\r\n                    cb( reason || true );\r\n                    image.destroy();\r\n                });\r\n    \r\n                throttle( image, file.source.size, function() {\r\n                    file._info && image.info( file._info );\r\n                    file._meta && image.meta( file._meta );\r\n                    image.loadFromBlob( file.source );\r\n                });\r\n            },\r\n    \r\n            beforeSendFile: function( file ) {\r\n                var opts = this.options.compress || this.options.resize,\r\n                    compressSize = opts && opts.compressSize || 0,\r\n                    noCompressIfLarger = opts && opts.noCompressIfLarger || false,\r\n                    image, deferred;\r\n    \r\n                file = this.request( 'get-file', file );\r\n    \r\n                // 只压缩 jpeg 图片格式。\r\n                // gif 可能会丢失针\r\n                // bmp png 基本上尺寸都不大，且压缩比比较小。\r\n                if ( !opts || !~'image/jpeg,image/jpg'.indexOf( file.type ) ||\r\n                        file.size < compressSize ||\r\n                        file._compressed ) {\r\n                    return;\r\n                }\r\n    \r\n                opts = $.extend({}, opts );\r\n                deferred = Base.Deferred();\r\n    \r\n                image = new Image( opts );\r\n    \r\n                deferred.always(function() {\r\n                    image.destroy();\r\n                    image = null;\r\n                });\r\n                image.once( 'error', deferred.reject );\r\n                image.once( 'load', function() {\r\n                    var width = opts.width,\r\n                        height = opts.height;\r\n    \r\n                    file._info = file._info || image.info();\r\n                    file._meta = file._meta || image.meta();\r\n    \r\n                    // 如果 width 的值介于 0 - 1\r\n                    // 说明设置的是百分比。\r\n                    if ( width <= 1 && width > 0 ) {\r\n                        width = file._info.width * width;\r\n                    }\r\n    \r\n                    // 同样的规则应用于 height\r\n                    if ( height <= 1 && height > 0 ) {\r\n                        height = file._info.height * height;\r\n                    }\r\n    \r\n                    image.resize( width, height );\r\n                });\r\n    \r\n                image.once( 'complete', function() {\r\n                    var blob, size;\r\n    \r\n                    // 移动端 UC / qq 浏览器的无图模式下\r\n                    // ctx.getImageData 处理大图的时候会报 Exception\r\n                    // INDEX_SIZE_ERR: DOM Exception 1\r\n                    try {\r\n                        blob = image.getAsBlob( opts.type );\r\n    \r\n                        size = file.size;\r\n    \r\n                        // 如果压缩后，比原来还大则不用压缩后的。\r\n                        if ( !noCompressIfLarger || blob.size < size ) {\r\n                            // file.source.destroy && file.source.destroy();\r\n                            file.source = blob;\r\n                            file.size = blob.size;\r\n    \r\n                            file.trigger( 'resize', blob.size, size );\r\n                        }\r\n    \r\n                        // 标记，避免重复压缩。\r\n                        file._compressed = true;\r\n                        deferred.resolve();\r\n                    } catch ( e ) {\r\n                        // 出错了直接继续，让其上传原始图片\r\n                        deferred.resolve();\r\n                    }\r\n                });\r\n    \r\n                file._info && image.info( file._info );\r\n                file._meta && image.meta( file._meta );\r\n    \r\n                image.loadFromBlob( file.source );\r\n                return deferred.promise();\r\n            }\r\n        });\r\n    });\r\n    /**\r\n     * @fileOverview 文件属性封装\r\n     */\r\n    define('file',[\r\n        'base',\r\n        'mediator'\r\n    ], function( Base, Mediator ) {\r\n    \r\n        var $ = Base.$,\r\n            idPrefix = 'WU_FILE_',\r\n            idSuffix = 0,\r\n            rExt = /\\.([^.]+)$/,\r\n            statusMap = {};\r\n    \r\n        function gid() {\r\n            return idPrefix + idSuffix++;\r\n        }\r\n    \r\n        /**\r\n         * 文件类\r\n         * @class File\r\n         * @constructor 构造函数\r\n         * @grammar new File( source ) => File\r\n         * @param {Lib.File} source [lib.File](#Lib.File)实例, 此source对象是带有Runtime信息的。\r\n         */\r\n        function WUFile( source ) {\r\n    \r\n            /**\r\n             * 文件名，包括扩展名（后缀）\r\n             * @property name\r\n             * @type {string}\r\n             */\r\n            this.name = source.name || 'Untitled';\r\n    \r\n            /**\r\n             * 文件体积（字节）\r\n             * @property size\r\n             * @type {uint}\r\n             * @default 0\r\n             */\r\n            this.size = source.size || 0;\r\n    \r\n            /**\r\n             * 文件MIMETYPE类型，与文件类型的对应关系请参考[http://t.cn/z8ZnFny](http://t.cn/z8ZnFny)\r\n             * @property type\r\n             * @type {string}\r\n             * @default 'application/octet-stream'\r\n             */\r\n            this.type = source.type || 'application/octet-stream';\r\n    \r\n            /**\r\n             * 文件最后修改日期\r\n             * @property lastModifiedDate\r\n             * @type {int}\r\n             * @default 当前时间戳\r\n             */\r\n            this.lastModifiedDate = source.lastModifiedDate || (new Date() * 1);\r\n    \r\n            /**\r\n             * 文件ID，每个对象具有唯一ID，与文件名无关\r\n             * @property id\r\n             * @type {string}\r\n             */\r\n            this.id = gid();\r\n    \r\n            /**\r\n             * 文件扩展名，通过文件名获取，例如test.png的扩展名为png\r\n             * @property ext\r\n             * @type {string}\r\n             */\r\n            this.ext = rExt.exec( this.name ) ? RegExp.$1 : '';\r\n    \r\n    \r\n            /**\r\n             * 状态文字说明。在不同的status语境下有不同的用途。\r\n             * @property statusText\r\n             * @type {string}\r\n             */\r\n            this.statusText = '';\r\n    \r\n            // 存储文件状态，防止通过属性直接修改\r\n            statusMap[ this.id ] = WUFile.Status.INITED;\r\n    \r\n            this.source = source;\r\n            this.loaded = 0;\r\n    \r\n            this.on( 'error', function( msg ) {\r\n                this.setStatus( WUFile.Status.ERROR, msg );\r\n            });\r\n        }\r\n    \r\n        $.extend( WUFile.prototype, {\r\n    \r\n            /**\r\n             * 设置状态，状态变化时会触发`change`事件。\r\n             * @method setStatus\r\n             * @grammar setStatus( status[, statusText] );\r\n             * @param {File.Status|String} status [文件状态值](#WebUploader:File:File.Status)\r\n             * @param {String} [statusText=''] 状态说明，常在error时使用，用http, abort,server等来标记是由于什么原因导致文件错误。\r\n             */\r\n            setStatus: function( status, text ) {\r\n    \r\n                var prevStatus = statusMap[ this.id ];\r\n    \r\n                typeof text !== 'undefined' && (this.statusText = text);\r\n    \r\n                if ( status !== prevStatus ) {\r\n                    statusMap[ this.id ] = status;\r\n                    /**\r\n                     * 文件状态变化\r\n                     * @event statuschange\r\n                     */\r\n                    this.trigger( 'statuschange', status, prevStatus );\r\n                }\r\n    \r\n            },\r\n    \r\n            /**\r\n             * 获取文件状态\r\n             * @return {File.Status}\r\n             * @example\r\n                     文件状态具体包括以下几种类型：\r\n                     {\r\n                         // 初始化\r\n                        INITED:     0,\r\n                        // 已入队列\r\n                        QUEUED:     1,\r\n                        // 正在上传\r\n                        PROGRESS:     2,\r\n                        // 上传出错\r\n                        ERROR:         3,\r\n                        // 上传成功\r\n                        COMPLETE:     4,\r\n                        // 上传取消\r\n                        CANCELLED:     5\r\n                    }\r\n             */\r\n            getStatus: function() {\r\n                return statusMap[ this.id ];\r\n            },\r\n    \r\n            /**\r\n             * 获取文件原始信息。\r\n             * @return {*}\r\n             */\r\n            getSource: function() {\r\n                return this.source;\r\n            },\r\n    \r\n            destroy: function() {\r\n                this.off();\r\n                delete statusMap[ this.id ];\r\n            }\r\n        });\r\n    \r\n        Mediator.installTo( WUFile.prototype );\r\n    \r\n        /**\r\n         * 文件状态值，具体包括以下几种类型：\r\n         * * `inited` 初始状态\r\n         * * `queued` 已经进入队列, 等待上传\r\n         * * `progress` 上传中\r\n         * * `complete` 上传完成。\r\n         * * `error` 上传出错，可重试\r\n         * * `interrupt` 上传中断，可续传。\r\n         * * `invalid` 文件不合格，不能重试上传。会自动从队列中移除。\r\n         * * `cancelled` 文件被移除。\r\n         * @property {Object} Status\r\n         * @namespace File\r\n         * @class File\r\n         * @static\r\n         */\r\n        WUFile.Status = {\r\n            INITED:     'inited',    // 初始状态\r\n            QUEUED:     'queued',    // 已经进入队列, 等待上传\r\n            PROGRESS:   'progress',    // 上传中\r\n            ERROR:      'error',    // 上传出错，可重试\r\n            COMPLETE:   'complete',    // 上传完成。\r\n            CANCELLED:  'cancelled',    // 上传取消。\r\n            INTERRUPT:  'interrupt',    // 上传中断，可续传。\r\n            INVALID:    'invalid'    // 文件不合格，不能重试上传。\r\n        };\r\n    \r\n        return WUFile;\r\n    });\r\n    \r\n    /**\r\n     * @fileOverview 文件队列\r\n     */\r\n    define('queue',[\r\n        'base',\r\n        'mediator',\r\n        'file'\r\n    ], function( Base, Mediator, WUFile ) {\r\n    \r\n        var $ = Base.$,\r\n            STATUS = WUFile.Status;\r\n    \r\n        /**\r\n         * 文件队列, 用来存储各个状态中的文件。\r\n         * @class Queue\r\n         * @extends Mediator\r\n         */\r\n        function Queue() {\r\n    \r\n            /**\r\n             * 统计文件数。\r\n             * * `numOfQueue` 队列中的文件数。\r\n             * * `numOfSuccess` 上传成功的文件数\r\n             * * `numOfCancel` 被取消的文件数\r\n             * * `numOfProgress` 正在上传中的文件数\r\n             * * `numOfUploadFailed` 上传错误的文件数。\r\n             * * `numOfInvalid` 无效的文件数。\r\n             * * `numofDeleted` 被移除的文件数。\r\n             * @property {Object} stats\r\n             */\r\n            this.stats = {\r\n                numOfQueue: 0,\r\n                numOfSuccess: 0,\r\n                numOfCancel: 0,\r\n                numOfProgress: 0,\r\n                numOfUploadFailed: 0,\r\n                numOfInvalid: 0,\r\n                numofDeleted: 0,\r\n                numofInterrupt: 0\r\n            };\r\n    \r\n            // 上传队列，仅包括等待上传的文件\r\n            this._queue = [];\r\n    \r\n            // 存储所有文件\r\n            this._map = {};\r\n        }\r\n    \r\n        $.extend( Queue.prototype, {\r\n    \r\n            /**\r\n             * 将新文件加入对队列尾部\r\n             *\r\n             * @method append\r\n             * @param  {File} file   文件对象\r\n             */\r\n            append: function( file ) {\r\n                this._queue.push( file );\r\n                this._fileAdded( file );\r\n                return this;\r\n            },\r\n    \r\n            /**\r\n             * 将新文件加入对队列头部\r\n             *\r\n             * @method prepend\r\n             * @param  {File} file   文件对象\r\n             */\r\n            prepend: function( file ) {\r\n                this._queue.unshift( file );\r\n                this._fileAdded( file );\r\n                return this;\r\n            },\r\n    \r\n            /**\r\n             * 获取文件对象\r\n             *\r\n             * @method getFile\r\n             * @param  {String} fileId   文件ID\r\n             * @return {File}\r\n             */\r\n            getFile: function( fileId ) {\r\n                if ( typeof fileId !== 'string' ) {\r\n                    return fileId;\r\n                }\r\n                return this._map[ fileId ];\r\n            },\r\n    \r\n            /**\r\n             * 从队列中取出一个指定状态的文件。\r\n             * @grammar fetch( status ) => File\r\n             * @method fetch\r\n             * @param {String} status [文件状态值](#WebUploader:File:File.Status)\r\n             * @return {File} [File](#WebUploader:File)\r\n             */\r\n            fetch: function( status ) {\r\n                var len = this._queue.length,\r\n                    i, file;\r\n    \r\n                status = status || STATUS.QUEUED;\r\n    \r\n                for ( i = 0; i < len; i++ ) {\r\n                    file = this._queue[ i ];\r\n    \r\n                    if ( status === file.getStatus() ) {\r\n                        return file;\r\n                    }\r\n                }\r\n    \r\n                return null;\r\n            },\r\n    \r\n            /**\r\n             * 对队列进行排序，能够控制文件上传顺序。\r\n             * @grammar sort( fn ) => undefined\r\n             * @method sort\r\n             * @param {Function} fn 排序方法\r\n             */\r\n            sort: function( fn ) {\r\n                if ( typeof fn === 'function' ) {\r\n                    this._queue.sort( fn );\r\n                }\r\n            },\r\n    \r\n            /**\r\n             * 获取指定类型的文件列表, 列表中每一个成员为[File](#WebUploader:File)对象。\r\n             * @grammar getFiles( [status1[, status2 ...]] ) => Array\r\n             * @method getFiles\r\n             * @param {String} [status] [文件状态值](#WebUploader:File:File.Status)\r\n             */\r\n            getFiles: function() {\r\n                var sts = [].slice.call( arguments, 0 ),\r\n                    ret = [],\r\n                    i = 0,\r\n                    len = this._queue.length,\r\n                    file;\r\n    \r\n                for ( ; i < len; i++ ) {\r\n                    file = this._queue[ i ];\r\n    \r\n                    if ( sts.length && !~$.inArray( file.getStatus(), sts ) ) {\r\n                        continue;\r\n                    }\r\n    \r\n                    ret.push( file );\r\n                }\r\n    \r\n                return ret;\r\n            },\r\n    \r\n            /**\r\n             * 在队列中删除文件。\r\n             * @grammar removeFile( file ) => Array\r\n             * @method removeFile\r\n             * @param {File} 文件对象。\r\n             */\r\n            removeFile: function( file ) {\r\n                var me = this,\r\n                    existing = this._map[ file.id ];\r\n    \r\n                if ( existing ) {\r\n                    delete this._map[ file.id ];\r\n                    file.destroy();\r\n                    this.stats.numofDeleted++;\r\n                }\r\n            },\r\n    \r\n            _fileAdded: function( file ) {\r\n                var me = this,\r\n                    existing = this._map[ file.id ];\r\n    \r\n                if ( !existing ) {\r\n                    this._map[ file.id ] = file;\r\n    \r\n                    file.on( 'statuschange', function( cur, pre ) {\r\n                        me._onFileStatusChange( cur, pre );\r\n                    });\r\n                }\r\n            },\r\n    \r\n            _onFileStatusChange: function( curStatus, preStatus ) {\r\n                var stats = this.stats;\r\n    \r\n                switch ( preStatus ) {\r\n                    case STATUS.PROGRESS:\r\n                        stats.numOfProgress--;\r\n                        break;\r\n    \r\n                    case STATUS.QUEUED:\r\n                        stats.numOfQueue --;\r\n                        break;\r\n    \r\n                    case STATUS.ERROR:\r\n                        stats.numOfUploadFailed--;\r\n                        break;\r\n    \r\n                    case STATUS.INVALID:\r\n                        stats.numOfInvalid--;\r\n                        break;\r\n    \r\n                    case STATUS.INTERRUPT:\r\n                        stats.numofInterrupt--;\r\n                        break;\r\n                }\r\n    \r\n                switch ( curStatus ) {\r\n                    case STATUS.QUEUED:\r\n                        stats.numOfQueue++;\r\n                        break;\r\n    \r\n                    case STATUS.PROGRESS:\r\n                        stats.numOfProgress++;\r\n                        break;\r\n    \r\n                    case STATUS.ERROR:\r\n                        stats.numOfUploadFailed++;\r\n                        break;\r\n    \r\n                    case STATUS.COMPLETE:\r\n                        stats.numOfSuccess++;\r\n                        break;\r\n    \r\n                    case STATUS.CANCELLED:\r\n                        stats.numOfCancel++;\r\n                        break;\r\n    \r\n    \r\n                    case STATUS.INVALID:\r\n                        stats.numOfInvalid++;\r\n                        break;\r\n    \r\n                    case STATUS.INTERRUPT:\r\n                        stats.numofInterrupt++;\r\n                        break;\r\n                }\r\n            }\r\n    \r\n        });\r\n    \r\n        Mediator.installTo( Queue.prototype );\r\n    \r\n        return Queue;\r\n    });\r\n    /**\r\n     * @fileOverview 队列\r\n     */\r\n    define('widgets/queue',[\r\n        'base',\r\n        'uploader',\r\n        'queue',\r\n        'file',\r\n        'lib/file',\r\n        'runtime/client',\r\n        'widgets/widget'\r\n    ], function( Base, Uploader, Queue, WUFile, File, RuntimeClient ) {\r\n    \r\n        var $ = Base.$,\r\n            rExt = /\\.\\w+$/,\r\n            Status = WUFile.Status;\r\n    \r\n        return Uploader.register({\r\n            name: 'queue',\r\n    \r\n            init: function( opts ) {\r\n                var me = this,\r\n                    deferred, len, i, item, arr, accept, runtime;\r\n    \r\n                if ( $.isPlainObject( opts.accept ) ) {\r\n                    opts.accept = [ opts.accept ];\r\n                }\r\n    \r\n                // accept中的中生成匹配正则。\r\n                if ( opts.accept ) {\r\n                    arr = [];\r\n    \r\n                    for ( i = 0, len = opts.accept.length; i < len; i++ ) {\r\n                        item = opts.accept[ i ].extensions;\r\n                        item && arr.push( item );\r\n                    }\r\n    \r\n                    if ( arr.length ) {\r\n                        accept = '\\\\.' + arr.join(',')\r\n                                .replace( /,/g, '$|\\\\.' )\r\n                                .replace( /\\*/g, '.*' ) + '$';\r\n                    }\r\n    \r\n                    me.accept = new RegExp( accept, 'i' );\r\n                }\r\n    \r\n                me.queue = new Queue();\r\n                me.stats = me.queue.stats;\r\n    \r\n                // 如果当前不是html5运行时，那就算了。\r\n                // 不执行后续操作\r\n                if ( this.request('predict-runtime-type') !== 'html5' ) {\r\n                    return;\r\n                }\r\n    \r\n                // 创建一个 html5 运行时的 placeholder\r\n                // 以至于外部添加原生 File 对象的时候能正确包裹一下供 webuploader 使用。\r\n                deferred = Base.Deferred();\r\n                this.placeholder = runtime = new RuntimeClient('Placeholder');\r\n                runtime.connectRuntime({\r\n                    runtimeOrder: 'html5'\r\n                }, function() {\r\n                    me._ruid = runtime.getRuid();\r\n                    deferred.resolve();\r\n                });\r\n                return deferred.promise();\r\n            },\r\n    \r\n    \r\n            // 为了支持外部直接添加一个原生File对象。\r\n            _wrapFile: function( file ) {\r\n                if ( !(file instanceof WUFile) ) {\r\n    \r\n                    if ( !(file instanceof File) ) {\r\n                        if ( !this._ruid ) {\r\n                            throw new Error('Can\\'t add external files.');\r\n                        }\r\n                        file = new File( this._ruid, file );\r\n                    }\r\n    \r\n                    file = new WUFile( file );\r\n                }\r\n    \r\n                return file;\r\n            },\r\n    \r\n            // 判断文件是否可以被加入队列\r\n            acceptFile: function( file ) {\r\n                var invalid = !file || !file.size || this.accept &&\r\n    \r\n                        // 如果名字中有后缀，才做后缀白名单处理。\r\n                        rExt.exec( file.name ) && !this.accept.test( file.name );\r\n    \r\n                return !invalid;\r\n            },\r\n    \r\n    \r\n            /**\r\n             * @event beforeFileQueued\r\n             * @param {File} file File对象\r\n             * @description 当文件被加入队列之前触发，此事件的handler返回值为`false`，则此文件不会被添加进入队列。\r\n             * @for  Uploader\r\n             */\r\n    \r\n            /**\r\n             * @event fileQueued\r\n             * @param {File} file File对象\r\n             * @description 当文件被加入队列以后触发。\r\n             * @for  Uploader\r\n             */\r\n    \r\n            _addFile: function( file ) {\r\n                var me = this;\r\n    \r\n                file = me._wrapFile( file );\r\n    \r\n                // 不过类型判断允许不允许，先派送 `beforeFileQueued`\r\n                if ( !me.owner.trigger( 'beforeFileQueued', file ) ) {\r\n                    return;\r\n                }\r\n    \r\n                // 类型不匹配，则派送错误事件，并返回。\r\n                if ( !me.acceptFile( file ) ) {\r\n                    me.owner.trigger( 'error', 'Q_TYPE_DENIED', file );\r\n                    return;\r\n                }\r\n    \r\n                me.queue.append( file );\r\n                me.owner.trigger( 'fileQueued', file );\r\n                return file;\r\n            },\r\n    \r\n            getFile: function( fileId ) {\r\n                return this.queue.getFile( fileId );\r\n            },\r\n    \r\n            /**\r\n             * @event filesQueued\r\n             * @param {File} files 数组，内容为原始File(lib/File）对象。\r\n             * @description 当一批文件添加进队列以后触发。\r\n             * @for  Uploader\r\n             */\r\n            \r\n            /**\r\n             * @property {Boolean} [auto=false]\r\n             * @namespace options\r\n             * @for Uploader\r\n             * @description 设置为 true 后，不需要手动调用上传，有文件选择即开始上传。\r\n             * \r\n             */\r\n    \r\n            /**\r\n             * @method addFiles\r\n             * @grammar addFiles( file ) => undefined\r\n             * @grammar addFiles( [file1, file2 ...] ) => undefined\r\n             * @param {Array of File or File} [files] Files 对象 数组\r\n             * @description 添加文件到队列\r\n             * @for  Uploader\r\n             */\r\n            addFile: function( files ) {\r\n                var me = this;\r\n    \r\n                if ( !files.length ) {\r\n                    files = [ files ];\r\n                }\r\n    \r\n                files = $.map( files, function( file ) {\r\n                    return me._addFile( file );\r\n                });\r\n    \t\t\t\r\n    \t\t\tif ( files.length ) {\r\n    \r\n                    me.owner.trigger( 'filesQueued', files );\r\n    \r\n    \t\t\t\tif ( me.options.auto ) {\r\n    \t\t\t\t\tsetTimeout(function() {\r\n    \t\t\t\t\t\tme.request('start-upload');\r\n    \t\t\t\t\t}, 20 );\r\n    \t\t\t\t}\r\n                }\r\n            },\r\n    \r\n            getStats: function() {\r\n                return this.stats;\r\n            },\r\n    \r\n            /**\r\n             * @event fileDequeued\r\n             * @param {File} file File对象\r\n             * @description 当文件被移除队列后触发。\r\n             * @for  Uploader\r\n             */\r\n    \r\n             /**\r\n             * @method removeFile\r\n             * @grammar removeFile( file ) => undefined\r\n             * @grammar removeFile( id ) => undefined\r\n             * @grammar removeFile( file, true ) => undefined\r\n             * @grammar removeFile( id, true ) => undefined\r\n             * @param {File|id} file File对象或这File对象的id\r\n             * @description 移除某一文件, 默认只会标记文件状态为已取消，如果第二个参数为 `true` 则会从 queue 中移除。\r\n             * @for  Uploader\r\n             * @example\r\n             *\r\n             * $li.on('click', '.remove-this', function() {\r\n             *     uploader.removeFile( file );\r\n             * })\r\n             */\r\n            removeFile: function( file, remove ) {\r\n                var me = this;\r\n    \r\n                file = file.id ? file : me.queue.getFile( file );\r\n    \r\n                this.request( 'cancel-file', file );\r\n    \r\n                if ( remove ) {\r\n                    this.queue.removeFile( file );\r\n                }\r\n            },\r\n    \r\n            /**\r\n             * @method getFiles\r\n             * @grammar getFiles() => Array\r\n             * @grammar getFiles( status1, status2, status... ) => Array\r\n             * @description 返回指定状态的文件集合，不传参数将返回所有状态的文件。\r\n             * @for  Uploader\r\n             * @example\r\n             * console.log( uploader.getFiles() );    // => all files\r\n             * console.log( uploader.getFiles('error') )    // => all error files.\r\n             */\r\n            getFiles: function() {\r\n                return this.queue.getFiles.apply( this.queue, arguments );\r\n            },\r\n    \r\n            fetchFile: function() {\r\n                return this.queue.fetch.apply( this.queue, arguments );\r\n            },\r\n    \r\n            /**\r\n             * @method retry\r\n             * @grammar retry() => undefined\r\n             * @grammar retry( file ) => undefined\r\n             * @description 重试上传，重试指定文件，或者从出错的文件开始重新上传。\r\n             * @for  Uploader\r\n             * @example\r\n             * function retry() {\r\n             *     uploader.retry();\r\n             * }\r\n             */\r\n            retry: function( file, noForceStart ) {\r\n                var me = this,\r\n                    files, i, len;\r\n    \r\n                if ( file ) {\r\n                    file = file.id ? file : me.queue.getFile( file );\r\n                    file.setStatus( Status.QUEUED );\r\n                    noForceStart || me.request('start-upload');\r\n                    return;\r\n                }\r\n    \r\n                files = me.queue.getFiles( Status.ERROR );\r\n                i = 0;\r\n                len = files.length;\r\n    \r\n                for ( ; i < len; i++ ) {\r\n                    file = files[ i ];\r\n                    file.setStatus( Status.QUEUED );\r\n                }\r\n    \r\n                me.request('start-upload');\r\n            },\r\n    \r\n            /**\r\n             * @method sort\r\n             * @grammar sort( fn ) => undefined\r\n             * @description 排序队列中的文件，在上传之前调整可以控制上传顺序。\r\n             * @for  Uploader\r\n             */\r\n            sortFiles: function() {\r\n                return this.queue.sort.apply( this.queue, arguments );\r\n            },\r\n    \r\n            /**\r\n             * @event reset\r\n             * @description 当 uploader 被重置的时候触发。\r\n             * @for  Uploader\r\n             */\r\n    \r\n            /**\r\n             * @method reset\r\n             * @grammar reset() => undefined\r\n             * @description 重置uploader。目前只重置了队列。\r\n             * @for  Uploader\r\n             * @example\r\n             * uploader.reset();\r\n             */\r\n            reset: function() {\r\n                this.owner.trigger('reset');\r\n                this.queue = new Queue();\r\n                this.stats = this.queue.stats;\r\n            },\r\n    \r\n            destroy: function() {\r\n                this.reset();\r\n                this.placeholder && this.placeholder.destroy();\r\n            }\r\n        });\r\n    \r\n    });\r\n    /**\r\n     * @fileOverview 添加获取Runtime相关信息的方法。\r\n     */\r\n    define('widgets/runtime',[\r\n        'uploader',\r\n        'runtime/runtime',\r\n        'widgets/widget'\r\n    ], function( Uploader, Runtime ) {\r\n    \r\n        Uploader.support = function() {\r\n            return Runtime.hasRuntime.apply( Runtime, arguments );\r\n        };\r\n    \r\n        /**\r\n         * @property {Object} [runtimeOrder=html5,flash]\r\n         * @namespace options\r\n         * @for Uploader\r\n         * @description 指定运行时启动顺序。默认会想尝试 html5 是否支持，如果支持则使用 html5, 否则则使用 flash.\r\n         *\r\n         * 可以将此值设置成 `flash`，来强制使用 flash 运行时。\r\n         */\r\n    \r\n        return Uploader.register({\r\n            name: 'runtime',\r\n    \r\n            init: function() {\r\n                if ( !this.predictRuntimeType() ) {\r\n                    throw Error('Runtime Error');\r\n                }\r\n            },\r\n    \r\n            /**\r\n             * 预测Uploader将采用哪个`Runtime`\r\n             * @grammar predictRuntimeType() => String\r\n             * @method predictRuntimeType\r\n             * @for  Uploader\r\n             */\r\n            predictRuntimeType: function() {\r\n                var orders = this.options.runtimeOrder || Runtime.orders,\r\n                    type = this.type,\r\n                    i, len;\r\n    \r\n                if ( !type ) {\r\n                    orders = orders.split( /\\s*,\\s*/g );\r\n    \r\n                    for ( i = 0, len = orders.length; i < len; i++ ) {\r\n                        if ( Runtime.hasRuntime( orders[ i ] ) ) {\r\n                            this.type = type = orders[ i ];\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n    \r\n                return type;\r\n            }\r\n        });\r\n    });\r\n    /**\r\n     * @fileOverview Transport\r\n     */\r\n    define('lib/transport',[\r\n        'base',\r\n        'runtime/client',\r\n        'mediator'\r\n    ], function( Base, RuntimeClient, Mediator ) {\r\n    \r\n        var $ = Base.$;\r\n    \r\n        function Transport( opts ) {\r\n            var me = this;\r\n    \r\n            opts = me.options = $.extend( true, {}, Transport.options, opts || {} );\r\n            RuntimeClient.call( this, 'Transport' );\r\n    \r\n            this._blob = null;\r\n            this._formData = opts.formData || {};\r\n            this._headers = opts.headers || {};\r\n    \r\n            this.on( 'progress', this._timeout );\r\n            this.on( 'load error', function() {\r\n                me.trigger( 'progress', 1 );\r\n                clearTimeout( me._timer );\r\n            });\r\n        }\r\n    \r\n        Transport.options = {\r\n            server: '',\r\n            method: 'POST',\r\n    \r\n            // 跨域时，是否允许携带cookie, 只有html5 runtime才有效\r\n            withCredentials: false,\r\n            fileVal: 'file',\r\n            timeout: 2 * 60 * 1000,    // 2分钟\r\n            formData: {},\r\n            headers: {},\r\n            sendAsBinary: false\r\n        };\r\n    \r\n        $.extend( Transport.prototype, {\r\n    \r\n            // 添加Blob, 只能添加一次，最后一次有效。\r\n            appendBlob: function( key, blob, filename ) {\r\n                var me = this,\r\n                    opts = me.options;\r\n    \r\n                if ( me.getRuid() ) {\r\n                    me.disconnectRuntime();\r\n                }\r\n    \r\n                // 连接到blob归属的同一个runtime.\r\n                me.connectRuntime( blob.ruid, function() {\r\n                    me.exec('init');\r\n                });\r\n    \r\n                me._blob = blob;\r\n                opts.fileVal = key || opts.fileVal;\r\n                opts.filename = filename || opts.filename;\r\n            },\r\n    \r\n            // 添加其他字段\r\n            append: function( key, value ) {\r\n                if ( typeof key === 'object' ) {\r\n                    $.extend( this._formData, key );\r\n                } else {\r\n                    this._formData[ key ] = value;\r\n                }\r\n            },\r\n    \r\n            setRequestHeader: function( key, value ) {\r\n                if ( typeof key === 'object' ) {\r\n                    $.extend( this._headers, key );\r\n                } else {\r\n                    this._headers[ key ] = value;\r\n                }\r\n            },\r\n    \r\n            send: function( method ) {\r\n                this.exec( 'send', method );\r\n                this._timeout();\r\n            },\r\n    \r\n            abort: function() {\r\n                clearTimeout( this._timer );\r\n                return this.exec('abort');\r\n            },\r\n    \r\n            destroy: function() {\r\n                this.trigger('destroy');\r\n                this.off();\r\n                this.exec('destroy');\r\n                this.disconnectRuntime();\r\n            },\r\n    \r\n            getResponse: function() {\r\n                return this.exec('getResponse');\r\n            },\r\n    \r\n            getResponseAsJson: function() {\r\n                return this.exec('getResponseAsJson');\r\n            },\r\n    \r\n            getStatus: function() {\r\n                return this.exec('getStatus');\r\n            },\r\n    \r\n            _timeout: function() {\r\n                var me = this,\r\n                    duration = me.options.timeout;\r\n    \r\n                if ( !duration ) {\r\n                    return;\r\n                }\r\n    \r\n                clearTimeout( me._timer );\r\n                me._timer = setTimeout(function() {\r\n                    me.abort();\r\n                    me.trigger( 'error', 'timeout' );\r\n                }, duration );\r\n            }\r\n    \r\n        });\r\n    \r\n        // 让Transport具备事件功能。\r\n        Mediator.installTo( Transport.prototype );\r\n    \r\n        return Transport;\r\n    });\r\n    /**\r\n     * @fileOverview 负责文件上传相关。\r\n     */\r\n    define('widgets/upload',[\r\n        'base',\r\n        'uploader',\r\n        'file',\r\n        'lib/transport',\r\n        'widgets/widget'\r\n    ], function( Base, Uploader, WUFile, Transport ) {\r\n    \r\n        var $ = Base.$,\r\n            isPromise = Base.isPromise,\r\n            Status = WUFile.Status;\r\n    \r\n        // 添加默认配置项\r\n        $.extend( Uploader.options, {\r\n    \r\n    \r\n            /**\r\n             * @property {Boolean} [prepareNextFile=false]\r\n             * @namespace options\r\n             * @for Uploader\r\n             * @description 是否允许在文件传输时提前把下一个文件准备好。\r\n             * 对于一个文件的准备工作比较耗时，比如图片压缩，md5序列化。\r\n             * 如果能提前在当前文件传输期处理，可以节省总体耗时。\r\n             */\r\n            prepareNextFile: false,\r\n    \r\n            /**\r\n             * @property {Boolean} [chunked=false]\r\n             * @namespace options\r\n             * @for Uploader\r\n             * @description 是否要分片处理大文件上传。\r\n             */\r\n            chunked: false,\r\n    \r\n            /**\r\n             * @property {Boolean} [chunkSize=5242880]\r\n             * @namespace options\r\n             * @for Uploader\r\n             * @description 如果要分片，分多大一片？ 默认大小为5M.\r\n             */\r\n            chunkSize: 5 * 1024 * 1024,\r\n    \r\n            /**\r\n             * @property {Boolean} [chunkRetry=2]\r\n             * @namespace options\r\n             * @for Uploader\r\n             * @description 如果某个分片由于网络问题出错，允许自动重传多少次？\r\n             */\r\n            chunkRetry: 2,\r\n    \r\n            /**\r\n             * @property {Boolean} [threads=3]\r\n             * @namespace options\r\n             * @for Uploader\r\n             * @description 上传并发数。允许同时最大上传进程数。\r\n             */\r\n            threads: 3,\r\n    \r\n    \r\n            /**\r\n             * @property {Object} [formData={}]\r\n             * @namespace options\r\n             * @for Uploader\r\n             * @description 文件上传请求的参数表，每次发送都会发送此对象中的参数。\r\n             */\r\n            formData: {}\r\n    \r\n            /**\r\n             * @property {Object} [fileVal='file']\r\n             * @namespace options\r\n             * @for Uploader\r\n             * @description 设置文件上传域的name。\r\n             */\r\n    \r\n            /**\r\n             * @property {Object} [sendAsBinary=false]\r\n             * @namespace options\r\n             * @for Uploader\r\n             * @description 是否已二进制的流的方式发送文件，这样整个上传内容`php://input`都为文件内容，\r\n             * 其他参数在$_GET数组中。\r\n             */\r\n        });\r\n    \r\n        // 负责将文件切片。\r\n        function CuteFile( file, chunkSize ) {\r\n            var pending = [],\r\n                blob = file.source,\r\n                total = blob.size,\r\n                chunks = chunkSize ? Math.ceil( total / chunkSize ) : 1,\r\n                start = 0,\r\n                index = 0,\r\n                len, api;\r\n    \r\n            api = {\r\n                file: file,\r\n    \r\n                has: function() {\r\n                    return !!pending.length;\r\n                },\r\n    \r\n                shift: function() {\r\n                    return pending.shift();\r\n                },\r\n    \r\n                unshift: function( block ) {\r\n                    pending.unshift( block );\r\n                }\r\n            };\r\n    \r\n            while ( index < chunks ) {\r\n                len = Math.min( chunkSize, total - start );\r\n    \r\n                pending.push({\r\n                    file: file,\r\n                    start: start,\r\n                    end: chunkSize ? (start + len) : total,\r\n                    total: total,\r\n                    chunks: chunks,\r\n                    chunk: index++,\r\n                    cuted: api\r\n                });\r\n                start += len;\r\n            }\r\n    \r\n            file.blocks = pending.concat();\r\n            file.remaning = pending.length;\r\n    \r\n            return api;\r\n        }\r\n    \r\n        Uploader.register({\r\n            name: 'upload',\r\n    \r\n            init: function() {\r\n                var owner = this.owner,\r\n                    me = this;\r\n    \r\n                this.runing = false;\r\n                this.progress = false;\r\n    \r\n                owner\r\n                    .on( 'startUpload', function() {\r\n                        me.progress = true;\r\n                    })\r\n                    .on( 'uploadFinished', function() {\r\n                        me.progress = false;\r\n                    });\r\n    \r\n                // 记录当前正在传的数据，跟threads相关\r\n                this.pool = [];\r\n    \r\n                // 缓存分好片的文件。\r\n                this.stack = [];\r\n    \r\n                // 缓存即将上传的文件。\r\n                this.pending = [];\r\n    \r\n                // 跟踪还有多少分片在上传中但是没有完成上传。\r\n                this.remaning = 0;\r\n                this.__tick = Base.bindFn( this._tick, this );\r\n    \r\n                // 销毁上传相关的属性。\r\n                owner.on( 'uploadComplete', function( file ) {\r\n    \r\n                    // 把其他块取消了。\r\n                    file.blocks && $.each( file.blocks, function( _, v ) {\r\n                        v.transport && (v.transport.abort(), v.transport.destroy());\r\n                        delete v.transport;\r\n                    });\r\n    \r\n                    delete file.blocks;\r\n                    delete file.remaning;\r\n                });\r\n            },\r\n    \r\n            reset: function() {\r\n                this.request( 'stop-upload', true );\r\n                this.runing = false;\r\n                this.pool = [];\r\n                this.stack = [];\r\n                this.pending = [];\r\n                this.remaning = 0;\r\n                this._trigged = false;\r\n                this._promise = null;\r\n            },\r\n    \r\n            /**\r\n             * @event startUpload\r\n             * @description 当开始上传流程时触发。\r\n             * @for  Uploader\r\n             */\r\n    \r\n            /**\r\n             * 开始上传。此方法可以从初始状态调用开始上传流程，也可以从暂停状态调用，继续上传流程。\r\n             *\r\n             * 可以指定开始某一个文件。\r\n             * @grammar upload() => undefined\r\n             * @grammar upload( file | fileId) => undefined\r\n             * @method upload\r\n             * @for  Uploader\r\n             */\r\n            startUpload: function(file) {\r\n                var me = this;\r\n    \r\n                // 移出invalid的文件\r\n                $.each( me.request( 'get-files', Status.INVALID ), function() {\r\n                    me.request( 'remove-file', this );\r\n                });\r\n    \r\n                // 如果指定了开始某个文件，则只开始指定的文件。\r\n                if ( file ) {\r\n                    file = file.id ? file : me.request( 'get-file', file );\r\n    \r\n                    if (file.getStatus() === Status.INTERRUPT) {\r\n                        file.setStatus( Status.QUEUED );\r\n    \r\n                        $.each( me.pool, function( _, v ) {\r\n    \r\n                            // 之前暂停过。\r\n                            if (v.file !== file) {\r\n                                return;\r\n                            }\r\n    \r\n                            v.transport && v.transport.send();\r\n                            file.setStatus( Status.PROGRESS );\r\n                        });\r\n    \r\n                        \r\n                    } else if (file.getStatus() !== Status.PROGRESS) {\r\n                        file.setStatus( Status.QUEUED );\r\n                    }\r\n                } else {\r\n                    $.each( me.request( 'get-files', [ Status.INITED ] ), function() {\r\n                        this.setStatus( Status.QUEUED );\r\n                    });\r\n                }\r\n    \r\n                if ( me.runing ) {\r\n                    return Base.nextTick( me.__tick );\r\n                }\r\n    \r\n                me.runing = true;\r\n                var files = [];\r\n    \r\n                // 如果有暂停的，则续传\r\n                file || $.each( me.pool, function( _, v ) {\r\n                    var file = v.file;\r\n    \r\n                    if ( file.getStatus() === Status.INTERRUPT ) {\r\n                        me._trigged = false;\r\n                        files.push(file);\r\n                        v.transport && v.transport.send();\r\n                    }\r\n                });\r\n    \r\n                $.each(files, function() {\r\n                    this.setStatus( Status.PROGRESS );\r\n                });\r\n    \r\n                file || $.each( me.request( 'get-files',\r\n                        Status.INTERRUPT ), function() {\r\n                    this.setStatus( Status.PROGRESS );\r\n                });\r\n    \r\n                me._trigged = false;\r\n                Base.nextTick( me.__tick );\r\n                me.owner.trigger('startUpload');\r\n            },\r\n    \r\n            /**\r\n             * @event stopUpload\r\n             * @description 当开始上传流程暂停时触发。\r\n             * @for  Uploader\r\n             */\r\n    \r\n            /**\r\n             * 暂停上传。第一个参数为是否中断上传当前正在上传的文件。\r\n             *\r\n             * 如果第一个参数是文件，则只暂停指定文件。\r\n             * @grammar stop() => undefined\r\n             * @grammar stop( true ) => undefined\r\n             * @grammar stop( file ) => undefined\r\n             * @method stop\r\n             * @for  Uploader\r\n             */\r\n            stopUpload: function( file, interrupt ) {\r\n                var me = this,\r\n                    block;\r\n    \r\n                if (file === true) {\r\n                    interrupt = file;\r\n                    file = null;\r\n                }\r\n    \r\n                if ( me.runing === false ) {\r\n                    return;\r\n                }\r\n    \r\n                // 如果只是暂停某个文件。\r\n                if ( file ) {\r\n                    file = file.id ? file : me.request( 'get-file', file );\r\n    \r\n                    if ( file.getStatus() !== Status.PROGRESS &&\r\n                            file.getStatus() !== Status.QUEUED ) {\r\n                        return;\r\n                    }\r\n    \r\n                    file.setStatus( Status.INTERRUPT );\r\n    \r\n    \r\n                    $.each( me.pool, function( _, v ) {\r\n    \r\n                        // 只 abort 指定的文件。\r\n                        if (v.file === file) {\r\n                            block = v;\r\n                            return false;\r\n                        }\r\n                    });\r\n    \r\n                    block.transport && block.transport.abort();\r\n    \r\n                    if (interrupt) {\r\n                        me._putback(block);\r\n                        me._popBlock(block);\r\n                    }\r\n    \r\n                    return Base.nextTick( me.__tick );\r\n                }\r\n    \r\n                me.runing = false;\r\n    \r\n                // 正在准备中的文件。\r\n                if (this._promise && this._promise.file) {\r\n                    this._promise.file.setStatus( Status.INTERRUPT );\r\n                }\r\n    \r\n                interrupt && $.each( me.pool, function( _, v ) {\r\n                    v.transport && v.transport.abort();\r\n                    v.file.setStatus( Status.INTERRUPT );\r\n                });\r\n    \r\n                me.owner.trigger('stopUpload');\r\n            },\r\n    \r\n            /**\r\n             * @method cancelFile\r\n             * @grammar cancelFile( file ) => undefined\r\n             * @grammar cancelFile( id ) => undefined\r\n             * @param {File|id} file File对象或这File对象的id\r\n             * @description 标记文件状态为已取消, 同时将中断文件传输。\r\n             * @for  Uploader\r\n             * @example\r\n             *\r\n             * $li.on('click', '.remove-this', function() {\r\n             *     uploader.cancelFile( file );\r\n             * })\r\n             */\r\n            cancelFile: function( file ) {\r\n                file = file.id ? file : this.request( 'get-file', file );\r\n    \r\n                // 如果正在上传。\r\n                file.blocks && $.each( file.blocks, function( _, v ) {\r\n                    var _tr = v.transport;\r\n    \r\n                    if ( _tr ) {\r\n                        _tr.abort();\r\n                        _tr.destroy();\r\n                        delete v.transport;\r\n                    }\r\n                });\r\n    \r\n                file.setStatus( Status.CANCELLED );\r\n                this.owner.trigger( 'fileDequeued', file );\r\n            },\r\n    \r\n            /**\r\n             * 判断`Uplaode`r是否正在上传中。\r\n             * @grammar isInProgress() => Boolean\r\n             * @method isInProgress\r\n             * @for  Uploader\r\n             */\r\n            isInProgress: function() {\r\n                return !!this.progress;\r\n            },\r\n    \r\n            _getStats: function() {\r\n                return this.request('get-stats');\r\n            },\r\n    \r\n            /**\r\n             * 掉过一个文件上传，直接标记指定文件为已上传状态。\r\n             * @grammar skipFile( file ) => undefined\r\n             * @method skipFile\r\n             * @for  Uploader\r\n             */\r\n            skipFile: function( file, status ) {\r\n                file = file.id ? file : this.request( 'get-file', file );\r\n    \r\n                file.setStatus( status || Status.COMPLETE );\r\n                file.skipped = true;\r\n    \r\n                // 如果正在上传。\r\n                file.blocks && $.each( file.blocks, function( _, v ) {\r\n                    var _tr = v.transport;\r\n    \r\n                    if ( _tr ) {\r\n                        _tr.abort();\r\n                        _tr.destroy();\r\n                        delete v.transport;\r\n                    }\r\n                });\r\n    \r\n                this.owner.trigger( 'uploadSkip', file );\r\n            },\r\n    \r\n            /**\r\n             * @event uploadFinished\r\n             * @description 当所有文件上传结束时触发。\r\n             * @for  Uploader\r\n             */\r\n            _tick: function() {\r\n                var me = this,\r\n                    opts = me.options,\r\n                    fn, val;\r\n    \r\n                // 上一个promise还没有结束，则等待完成后再执行。\r\n                if ( me._promise ) {\r\n                    return me._promise.always( me.__tick );\r\n                }\r\n    \r\n                // 还有位置，且还有文件要处理的话。\r\n                if ( me.pool.length < opts.threads && (val = me._nextBlock()) ) {\r\n                    me._trigged = false;\r\n    \r\n                    fn = function( val ) {\r\n                        me._promise = null;\r\n    \r\n                        // 有可能是reject过来的，所以要检测val的类型。\r\n                        val && val.file && me._startSend( val );\r\n                        Base.nextTick( me.__tick );\r\n                    };\r\n    \r\n                    me._promise = isPromise( val ) ? val.always( fn ) : fn( val );\r\n    \r\n                // 没有要上传的了，且没有正在传输的了。\r\n                } else if ( !me.remaning && !me._getStats().numOfQueue &&\r\n                    !me._getStats().numofInterrupt ) {\r\n                    me.runing = false;\r\n    \r\n                    me._trigged || Base.nextTick(function() {\r\n                        me.owner.trigger('uploadFinished');\r\n                    });\r\n                    me._trigged = true;\r\n                }\r\n            },\r\n    \r\n            _putback: function(block) {\r\n                var idx;\r\n    \r\n                block.cuted.unshift(block);\r\n                idx = this.stack.indexOf(block.cuted);\r\n    \r\n                if (!~idx) {\r\n                    this.stack.unshift(block.cuted);\r\n                }\r\n            },\r\n    \r\n            _getStack: function() {\r\n                var i = 0,\r\n                    act;\r\n    \r\n                while ( (act = this.stack[ i++ ]) ) {\r\n                    if ( act.has() && act.file.getStatus() === Status.PROGRESS ) {\r\n                        return act;\r\n                    } else if (!act.has() ||\r\n                            act.file.getStatus() !== Status.PROGRESS &&\r\n                            act.file.getStatus() !== Status.INTERRUPT ) {\r\n    \r\n                        // 把已经处理完了的，或者，状态为非 progress（上传中）、\r\n                        // interupt（暂停中） 的移除。\r\n                        this.stack.splice( --i, 1 );\r\n                    }\r\n                }\r\n    \r\n                return null;\r\n            },\r\n    \r\n            _nextBlock: function() {\r\n                var me = this,\r\n                    opts = me.options,\r\n                    act, next, done, preparing;\r\n    \r\n                // 如果当前文件还有没有需要传输的，则直接返回剩下的。\r\n                if ( (act = this._getStack()) ) {\r\n    \r\n                    // 是否提前准备下一个文件\r\n                    if ( opts.prepareNextFile && !me.pending.length ) {\r\n                        me._prepareNextFile();\r\n                    }\r\n    \r\n                    return act.shift();\r\n    \r\n                // 否则，如果正在运行，则准备下一个文件，并等待完成后返回下个分片。\r\n                } else if ( me.runing ) {\r\n    \r\n                    // 如果缓存中有，则直接在缓存中取，没有则去queue中取。\r\n                    if ( !me.pending.length && me._getStats().numOfQueue ) {\r\n                        me._prepareNextFile();\r\n                    }\r\n    \r\n                    next = me.pending.shift();\r\n                    done = function( file ) {\r\n                        if ( !file ) {\r\n                            return null;\r\n                        }\r\n    \r\n                        act = CuteFile( file, opts.chunked ? opts.chunkSize : 0 );\r\n                        me.stack.push(act);\r\n                        return act.shift();\r\n                    };\r\n    \r\n                    // 文件可能还在prepare中，也有可能已经完全准备好了。\r\n                    if ( isPromise( next) ) {\r\n                        preparing = next.file;\r\n                        next = next[ next.pipe ? 'pipe' : 'then' ]( done );\r\n                        next.file = preparing;\r\n                        return next;\r\n                    }\r\n    \r\n                    return done( next );\r\n                }\r\n            },\r\n    \r\n    \r\n            /**\r\n             * @event uploadStart\r\n             * @param {File} file File对象\r\n             * @description 某个文件开始上传前触发，一个文件只会触发一次。\r\n             * @for  Uploader\r\n             */\r\n            _prepareNextFile: function() {\r\n                var me = this,\r\n                    file = me.request('fetch-file'),\r\n                    pending = me.pending,\r\n                    promise;\r\n    \r\n                if ( file ) {\r\n                    promise = me.request( 'before-send-file', file, function() {\r\n    \r\n                        // 有可能文件被skip掉了。文件被skip掉后，状态坑定不是Queued.\r\n                        if ( file.getStatus() === Status.PROGRESS ||\r\n                            file.getStatus() === Status.INTERRUPT ) {\r\n                            return file;\r\n                        }\r\n    \r\n                        return me._finishFile( file );\r\n                    });\r\n    \r\n                    me.owner.trigger( 'uploadStart', file );\r\n                    file.setStatus( Status.PROGRESS );\r\n    \r\n                    promise.file = file;\r\n    \r\n                    // 如果还在pending中，则替换成文件本身。\r\n                    promise.done(function() {\r\n                        var idx = $.inArray( promise, pending );\r\n    \r\n                        ~idx && pending.splice( idx, 1, file );\r\n                    });\r\n    \r\n                    // befeore-send-file的钩子就有错误发生。\r\n                    promise.fail(function( reason ) {\r\n                        file.setStatus( Status.ERROR, reason );\r\n                        me.owner.trigger( 'uploadError', file, reason );\r\n                        me.owner.trigger( 'uploadComplete', file );\r\n                    });\r\n    \r\n                    pending.push( promise );\r\n                }\r\n            },\r\n    \r\n            // 让出位置了，可以让其他分片开始上传\r\n            _popBlock: function( block ) {\r\n                var idx = $.inArray( block, this.pool );\r\n    \r\n                this.pool.splice( idx, 1 );\r\n                block.file.remaning--;\r\n                this.remaning--;\r\n            },\r\n    \r\n            // 开始上传，可以被掉过。如果promise被reject了，则表示跳过此分片。\r\n            _startSend: function( block ) {\r\n                var me = this,\r\n                    file = block.file,\r\n                    promise;\r\n    \r\n                // 有可能在 before-send-file 的 promise 期间改变了文件状态。\r\n                // 如：暂停，取消\r\n                // 我们不能中断 promise, 但是可以在 promise 完后，不做上传操作。\r\n                if ( file.getStatus() !== Status.PROGRESS ) {\r\n    \r\n                    // 如果是中断，则还需要放回去。\r\n                    if (file.getStatus() === Status.INTERRUPT) {\r\n                        me._putback(block);\r\n                    }\r\n    \r\n                    return;\r\n                }\r\n    \r\n                me.pool.push( block );\r\n                me.remaning++;\r\n    \r\n                // 如果没有分片，则直接使用原始的。\r\n                // 不会丢失content-type信息。\r\n                block.blob = block.chunks === 1 ? file.source :\r\n                        file.source.slice( block.start, block.end );\r\n    \r\n                // hook, 每个分片发送之前可能要做些异步的事情。\r\n                promise = me.request( 'before-send', block, function() {\r\n    \r\n                    // 有可能文件已经上传出错了，所以不需要再传输了。\r\n                    if ( file.getStatus() === Status.PROGRESS ) {\r\n                        me._doSend( block );\r\n                    } else {\r\n                        me._popBlock( block );\r\n                        Base.nextTick( me.__tick );\r\n                    }\r\n                });\r\n    \r\n                // 如果为fail了，则跳过此分片。\r\n                promise.fail(function() {\r\n                    if ( file.remaning === 1 ) {\r\n                        me._finishFile( file ).always(function() {\r\n                            block.percentage = 1;\r\n                            me._popBlock( block );\r\n                            me.owner.trigger( 'uploadComplete', file );\r\n                            Base.nextTick( me.__tick );\r\n                        });\r\n                    } else {\r\n                        block.percentage = 1;\r\n                        me.updateFileProgress( file );\r\n                        me._popBlock( block );\r\n                        Base.nextTick( me.__tick );\r\n                    }\r\n                });\r\n            },\r\n    \r\n    \r\n            /**\r\n             * @event uploadBeforeSend\r\n             * @param {Object} object\r\n             * @param {Object} data 默认的上传参数，可以扩展此对象来控制上传参数。\r\n             * @param {Object} headers 可以扩展此对象来控制上传头部。\r\n             * @description 当某个文件的分块在发送前触发，主要用来询问是否要添加附带参数，大文件在开起分片上传的前提下此事件可能会触发多次。\r\n             * @for  Uploader\r\n             */\r\n    \r\n            /**\r\n             * @event uploadAccept\r\n             * @param {Object} object\r\n             * @param {Object} ret 服务端的返回数据，json格式，如果服务端不是json格式，从ret._raw中取数据，自行解析。\r\n             * @description 当某个文件上传到服务端响应后，会派送此事件来询问服务端响应是否有效。如果此事件handler返回值为`false`, 则此文件将派送`server`类型的`uploadError`事件。\r\n             * @for  Uploader\r\n             */\r\n    \r\n            /**\r\n             * @event uploadProgress\r\n             * @param {File} file File对象\r\n             * @param {Number} percentage 上传进度\r\n             * @description 上传过程中触发，携带上传进度。\r\n             * @for  Uploader\r\n             */\r\n    \r\n    \r\n            /**\r\n             * @event uploadError\r\n             * @param {File} file File对象\r\n             * @param {String} reason 出错的code\r\n             * @description 当文件上传出错时触发。\r\n             * @for  Uploader\r\n             */\r\n    \r\n            /**\r\n             * @event uploadSuccess\r\n             * @param {File} file File对象\r\n             * @param {Object} response 服务端返回的数据\r\n             * @description 当文件上传成功时触发。\r\n             * @for  Uploader\r\n             */\r\n    \r\n            /**\r\n             * @event uploadComplete\r\n             * @param {File} [file] File对象\r\n             * @description 不管成功或者失败，文件上传完成时触发。\r\n             * @for  Uploader\r\n             */\r\n    \r\n            // 做上传操作。\r\n            _doSend: function( block ) {\r\n                var me = this,\r\n                    owner = me.owner,\r\n                    opts = me.options,\r\n                    file = block.file,\r\n                    tr = new Transport( opts ),\r\n                    data = $.extend({}, opts.formData ),\r\n                    headers = $.extend({}, opts.headers ),\r\n                    requestAccept, ret;\r\n    \r\n                block.transport = tr;\r\n    \r\n                tr.on( 'destroy', function() {\r\n                    delete block.transport;\r\n                    me._popBlock( block );\r\n                    Base.nextTick( me.__tick );\r\n                });\r\n    \r\n                // 广播上传进度。以文件为单位。\r\n                tr.on( 'progress', function( percentage ) {\r\n                    block.percentage = percentage;\r\n                    me.updateFileProgress( file );\r\n                });\r\n    \r\n                // 用来询问，是否返回的结果是有错误的。\r\n                requestAccept = function( reject ) {\r\n                    var fn;\r\n    \r\n                    ret = tr.getResponseAsJson() || {};\r\n                    ret._raw = tr.getResponse();\r\n                    fn = function( value ) {\r\n                        reject = value;\r\n                    };\r\n    \r\n                    // 服务端响应了，不代表成功了，询问是否响应正确。\r\n                    if ( !owner.trigger( 'uploadAccept', block, ret, fn ) ) {\r\n                        reject = reject || 'server';\r\n                    }\r\n    \r\n                    return reject;\r\n                };\r\n    \r\n                // 尝试重试，然后广播文件上传出错。\r\n                tr.on( 'error', function( type, flag ) {\r\n                    block.retried = block.retried || 0;\r\n    \r\n                    // 自动重试\r\n                    if ( block.chunks > 1 && ~'http,abort'.indexOf( type ) &&\r\n                            block.retried < opts.chunkRetry ) {\r\n    \r\n                        block.retried++;\r\n                        tr.send();\r\n    \r\n                    } else {\r\n    \r\n                        // http status 500 ~ 600\r\n                        if ( !flag && type === 'server' ) {\r\n                            type = requestAccept( type );\r\n                        }\r\n    \r\n                        file.setStatus( Status.ERROR, type );\r\n                        owner.trigger( 'uploadError', file, type );\r\n                        owner.trigger( 'uploadComplete', file );\r\n                    }\r\n                });\r\n    \r\n                // 上传成功\r\n                tr.on( 'load', function() {\r\n                    var reason;\r\n    \r\n                    // 如果非预期，转向上传出错。\r\n                    if ( (reason = requestAccept()) ) {\r\n                        tr.trigger( 'error', reason, true );\r\n                        return;\r\n                    }\r\n    \r\n                    // 全部上传完成。\r\n                    if ( file.remaning === 1 ) {\r\n                        me._finishFile( file, ret );\r\n                    } else {\r\n                        tr.destroy();\r\n                    }\r\n                });\r\n    \r\n                // 配置默认的上传字段。\r\n                data = $.extend( data, {\r\n                    id: file.id,\r\n                    name: file.name,\r\n                    type: file.type,\r\n                    lastModifiedDate: file.lastModifiedDate,\r\n                    size: file.size\r\n                });\r\n    \r\n                block.chunks > 1 && $.extend( data, {\r\n                    chunks: block.chunks,\r\n                    chunk: block.chunk\r\n                });\r\n    \r\n                // 在发送之间可以添加字段什么的。。。\r\n                // 如果默认的字段不够使用，可以通过监听此事件来扩展\r\n                owner.trigger( 'uploadBeforeSend', block, data, headers );\r\n    \r\n                // 开始发送。\r\n                tr.appendBlob( opts.fileVal, block.blob, file.name );\r\n                tr.append( data );\r\n                tr.setRequestHeader( headers );\r\n                tr.send();\r\n            },\r\n    \r\n            // 完成上传。\r\n            _finishFile: function( file, ret, hds ) {\r\n                var owner = this.owner;\r\n    \r\n                return owner\r\n                        .request( 'after-send-file', arguments, function() {\r\n                            file.setStatus( Status.COMPLETE );\r\n                            owner.trigger( 'uploadSuccess', file, ret, hds );\r\n                        })\r\n                        .fail(function( reason ) {\r\n    \r\n                            // 如果外部已经标记为invalid什么的，不再改状态。\r\n                            if ( file.getStatus() === Status.PROGRESS ) {\r\n                                file.setStatus( Status.ERROR, reason );\r\n                            }\r\n    \r\n                            owner.trigger( 'uploadError', file, reason );\r\n                        })\r\n                        .always(function() {\r\n                            owner.trigger( 'uploadComplete', file );\r\n                        });\r\n            },\r\n    \r\n            updateFileProgress: function(file) {\r\n                var totalPercent = 0,\r\n                    uploaded = 0;\r\n    \r\n                if (!file.blocks) {\r\n                    return;\r\n                }\r\n    \r\n                $.each( file.blocks, function( _, v ) {\r\n                    uploaded += (v.percentage || 0) * (v.end - v.start);\r\n                });\r\n    \r\n                totalPercent = uploaded / file.size;\r\n                this.owner.trigger( 'uploadProgress', file, totalPercent || 0 );\r\n            }\r\n    \r\n        });\r\n    });\r\n    \r\n    /**\r\n     * @fileOverview 各种验证，包括文件总大小是否超出、单文件是否超出和文件是否重复。\r\n     */\r\n    \r\n    define('widgets/validator',[\r\n        'base',\r\n        'uploader',\r\n        'file',\r\n        'widgets/widget'\r\n    ], function( Base, Uploader, WUFile ) {\r\n    \r\n        var $ = Base.$,\r\n            validators = {},\r\n            api;\r\n    \r\n        /**\r\n         * @event error\r\n         * @param {String} type 错误类型。\r\n         * @description 当validate不通过时，会以派送错误事件的形式通知调用者。通过`upload.on('error', handler)`可以捕获到此类错误，目前有以下错误会在特定的情况下派送错来。\r\n         *\r\n         * * `Q_EXCEED_NUM_LIMIT` 在设置了`fileNumLimit`且尝试给`uploader`添加的文件数量超出这个值时派送。\r\n         * * `Q_EXCEED_SIZE_LIMIT` 在设置了`Q_EXCEED_SIZE_LIMIT`且尝试给`uploader`添加的文件总大小超出这个值时派送。\r\n         * * `Q_TYPE_DENIED` 当文件类型不满足时触发。。\r\n         * @for  Uploader\r\n         */\r\n    \r\n        // 暴露给外面的api\r\n        api = {\r\n    \r\n            // 添加验证器\r\n            addValidator: function( type, cb ) {\r\n                validators[ type ] = cb;\r\n            },\r\n    \r\n            // 移除验证器\r\n            removeValidator: function( type ) {\r\n                delete validators[ type ];\r\n            }\r\n        };\r\n    \r\n        // 在Uploader初始化的时候启动Validators的初始化\r\n        Uploader.register({\r\n            name: 'validator',\r\n    \r\n            init: function() {\r\n                var me = this;\r\n                Base.nextTick(function() {\r\n                    $.each( validators, function() {\r\n                        this.call( me.owner );\r\n                    });\r\n                });\r\n            }\r\n        });\r\n    \r\n        /**\r\n         * @property {int} [fileNumLimit=undefined]\r\n         * @namespace options\r\n         * @for Uploader\r\n         * @description 验证文件总数量, 超出则不允许加入队列。\r\n         */\r\n        api.addValidator( 'fileNumLimit', function() {\r\n            var uploader = this,\r\n                opts = uploader.options,\r\n                count = 0,\r\n                max = parseInt( opts.fileNumLimit, 10 ),\r\n                flag = true;\r\n    \r\n            if ( !max ) {\r\n                return;\r\n            }\r\n    \r\n            uploader.on( 'beforeFileQueued', function( file ) {\r\n    \r\n                if ( count >= max && flag ) {\r\n                    flag = false;\r\n                    this.trigger( 'error', 'Q_EXCEED_NUM_LIMIT', max, file );\r\n                    setTimeout(function() {\r\n                        flag = true;\r\n                    }, 1 );\r\n                }\r\n    \r\n                return count >= max ? false : true;\r\n            });\r\n    \r\n            uploader.on( 'fileQueued', function() {\r\n                count++;\r\n            });\r\n    \r\n            uploader.on( 'fileDequeued', function() {\r\n                count--;\r\n            });\r\n    \r\n            uploader.on( 'reset', function() {\r\n                count = 0;\r\n            });\r\n        });\r\n    \r\n    \r\n        /**\r\n         * @property {int} [fileSizeLimit=undefined]\r\n         * @namespace options\r\n         * @for Uploader\r\n         * @description 验证文件总大小是否超出限制, 超出则不允许加入队列。\r\n         */\r\n        api.addValidator( 'fileSizeLimit', function() {\r\n            var uploader = this,\r\n                opts = uploader.options,\r\n                count = 0,\r\n                max = parseInt( opts.fileSizeLimit, 10 ),\r\n                flag = true;\r\n    \r\n            if ( !max ) {\r\n                return;\r\n            }\r\n    \r\n            uploader.on( 'beforeFileQueued', function( file ) {\r\n                var invalid = count + file.size > max;\r\n    \r\n                if ( invalid && flag ) {\r\n                    flag = false;\r\n                    this.trigger( 'error', 'Q_EXCEED_SIZE_LIMIT', max, file );\r\n                    setTimeout(function() {\r\n                        flag = true;\r\n                    }, 1 );\r\n                }\r\n    \r\n                return invalid ? false : true;\r\n            });\r\n    \r\n            uploader.on( 'fileQueued', function( file ) {\r\n                count += file.size;\r\n            });\r\n    \r\n            uploader.on( 'fileDequeued', function( file ) {\r\n                count -= file.size;\r\n            });\r\n    \r\n            uploader.on( 'reset', function() {\r\n                count = 0;\r\n            });\r\n        });\r\n    \r\n        /**\r\n         * @property {int} [fileSingleSizeLimit=undefined]\r\n         * @namespace options\r\n         * @for Uploader\r\n         * @description 验证单个文件大小是否超出限制, 超出则不允许加入队列。\r\n         */\r\n        api.addValidator( 'fileSingleSizeLimit', function() {\r\n            var uploader = this,\r\n                opts = uploader.options,\r\n                max = opts.fileSingleSizeLimit;\r\n    \r\n            if ( !max ) {\r\n                return;\r\n            }\r\n    \r\n            uploader.on( 'beforeFileQueued', function( file ) {\r\n    \r\n                if ( file.size > max ) {\r\n                    file.setStatus( WUFile.Status.INVALID, 'exceed_size' );\r\n                    this.trigger( 'error', 'F_EXCEED_SIZE', max, file );\r\n                    return false;\r\n                }\r\n    \r\n            });\r\n    \r\n        });\r\n    \r\n        /**\r\n         * @property {Boolean} [duplicate=undefined]\r\n         * @namespace options\r\n         * @for Uploader\r\n         * @description 去重， 根据文件名字、文件大小和最后修改时间来生成hash Key.\r\n         */\r\n        api.addValidator( 'duplicate', function() {\r\n            var uploader = this,\r\n                opts = uploader.options,\r\n                mapping = {};\r\n    \r\n            if ( opts.duplicate ) {\r\n                return;\r\n            }\r\n    \r\n            function hashString( str ) {\r\n                var hash = 0,\r\n                    i = 0,\r\n                    len = str.length,\r\n                    _char;\r\n    \r\n                for ( ; i < len; i++ ) {\r\n                    _char = str.charCodeAt( i );\r\n                    hash = _char + (hash << 6) + (hash << 16) - hash;\r\n                }\r\n    \r\n                return hash;\r\n            }\r\n    \r\n            uploader.on( 'beforeFileQueued', function( file ) {\r\n                var hash = file.__hash || (file.__hash = hashString( file.name +\r\n                        file.size + file.lastModifiedDate ));\r\n    \r\n                // 已经重复了\r\n                if ( mapping[ hash ] ) {\r\n                    this.trigger( 'error', 'F_DUPLICATE', file );\r\n                    return false;\r\n                }\r\n            });\r\n    \r\n            uploader.on( 'fileQueued', function( file ) {\r\n                var hash = file.__hash;\r\n    \r\n                hash && (mapping[ hash ] = true);\r\n            });\r\n    \r\n            uploader.on( 'fileDequeued', function( file ) {\r\n                var hash = file.__hash;\r\n    \r\n                hash && (delete mapping[ hash ]);\r\n            });\r\n    \r\n            uploader.on( 'reset', function() {\r\n                mapping = {};\r\n            });\r\n        });\r\n    \r\n        return api;\r\n    });\r\n    \r\n    /**\r\n     * @fileOverview Md5\r\n     */\r\n    define('lib/md5',[\r\n        'runtime/client',\r\n        'mediator'\r\n    ], function( RuntimeClient, Mediator ) {\r\n    \r\n        function Md5() {\r\n            RuntimeClient.call( this, 'Md5' );\r\n        }\r\n    \r\n        // 让 Md5 具备事件功能。\r\n        Mediator.installTo( Md5.prototype );\r\n    \r\n        Md5.prototype.loadFromBlob = function( blob ) {\r\n            var me = this;\r\n    \r\n            if ( me.getRuid() ) {\r\n                me.disconnectRuntime();\r\n            }\r\n    \r\n            // 连接到blob归属的同一个runtime.\r\n            me.connectRuntime( blob.ruid, function() {\r\n                me.exec('init');\r\n                me.exec( 'loadFromBlob', blob );\r\n            });\r\n        };\r\n    \r\n        Md5.prototype.getResult = function() {\r\n            return this.exec('getResult');\r\n        };\r\n    \r\n        return Md5;\r\n    });\r\n    /**\r\n     * @fileOverview 图片操作, 负责预览图片和上传前压缩图片\r\n     */\r\n    define('widgets/md5',[\r\n        'base',\r\n        'uploader',\r\n        'lib/md5',\r\n        'lib/blob',\r\n        'widgets/widget'\r\n    ], function( Base, Uploader, Md5, Blob ) {\r\n    \r\n        return Uploader.register({\r\n            name: 'md5',\r\n    \r\n    \r\n            /**\r\n             * 计算文件 md5 值，返回一个 promise 对象，可以监听 progress 进度。\r\n             *\r\n             *\r\n             * @method md5File\r\n             * @grammar md5File( file[, start[, end]] ) => promise\r\n             * @for Uploader\r\n             * @example\r\n             *\r\n             * uploader.on( 'fileQueued', function( file ) {\r\n             *     var $li = ...;\r\n             *\r\n             *     uploader.md5File( file )\r\n             *\r\n             *         // 及时显示进度\r\n             *         .progress(function(percentage) {\r\n             *             console.log('Percentage:', percentage);\r\n             *         })\r\n             *\r\n             *         // 完成\r\n             *         .then(function(val) {\r\n             *             console.log('md5 result:', val);\r\n             *         });\r\n             *\r\n             * });\r\n             */\r\n            md5File: function( file, start, end ) {\r\n                var md5 = new Md5(),\r\n                    deferred = Base.Deferred(),\r\n                    blob = (file instanceof Blob) ? file :\r\n                        this.request( 'get-file', file ).source;\r\n    \r\n                md5.on( 'progress load', function( e ) {\r\n                    e = e || {};\r\n                    deferred.notify( e.total ? e.loaded / e.total : 1 );\r\n                });\r\n    \r\n                md5.on( 'complete', function() {\r\n                    deferred.resolve( md5.getResult() );\r\n                });\r\n    \r\n                md5.on( 'error', function( reason ) {\r\n                    deferred.reject( reason );\r\n                });\r\n    \r\n                if ( arguments.length > 1 ) {\r\n                    start = start || 0;\r\n                    end = end || 0;\r\n                    start < 0 && (start = blob.size + start);\r\n                    end < 0 && (end = blob.size + end);\r\n                    end = Math.min( end, blob.size );\r\n                    blob = blob.slice( start, end );\r\n                }\r\n    \r\n                md5.loadFromBlob( blob );\r\n    \r\n                return deferred.promise();\r\n            }\r\n        });\r\n    });\r\n    /**\r\n     * @fileOverview Runtime管理器，负责Runtime的选择, 连接\r\n     */\r\n    define('runtime/compbase',[],function() {\r\n    \r\n        function CompBase( owner, runtime ) {\r\n    \r\n            this.owner = owner;\r\n            this.options = owner.options;\r\n    \r\n            this.getRuntime = function() {\r\n                return runtime;\r\n            };\r\n    \r\n            this.getRuid = function() {\r\n                return runtime.uid;\r\n            };\r\n    \r\n            this.trigger = function() {\r\n                return owner.trigger.apply( owner, arguments );\r\n            };\r\n        }\r\n    \r\n        return CompBase;\r\n    });\r\n    /**\r\n     * @fileOverview Html5Runtime\r\n     */\r\n    define('runtime/html5/runtime',[\r\n        'base',\r\n        'runtime/runtime',\r\n        'runtime/compbase'\r\n    ], function( Base, Runtime, CompBase ) {\r\n    \r\n        var type = 'html5',\r\n            components = {};\r\n    \r\n        function Html5Runtime() {\r\n            var pool = {},\r\n                me = this,\r\n                destroy = this.destroy;\r\n    \r\n            Runtime.apply( me, arguments );\r\n            me.type = type;\r\n    \r\n    \r\n            // 这个方法的调用者，实际上是RuntimeClient\r\n            me.exec = function( comp, fn/*, args...*/) {\r\n                var client = this,\r\n                    uid = client.uid,\r\n                    args = Base.slice( arguments, 2 ),\r\n                    instance;\r\n    \r\n                if ( components[ comp ] ) {\r\n                    instance = pool[ uid ] = pool[ uid ] ||\r\n                            new components[ comp ]( client, me );\r\n    \r\n                    if ( instance[ fn ] ) {\r\n                        return instance[ fn ].apply( instance, args );\r\n                    }\r\n                }\r\n            };\r\n    \r\n            me.destroy = function() {\r\n                // @todo 删除池子中的所有实例\r\n                return destroy && destroy.apply( this, arguments );\r\n            };\r\n        }\r\n    \r\n        Base.inherits( Runtime, {\r\n            constructor: Html5Runtime,\r\n    \r\n            // 不需要连接其他程序，直接执行callback\r\n            init: function() {\r\n                var me = this;\r\n                setTimeout(function() {\r\n                    me.trigger('ready');\r\n                }, 1 );\r\n            }\r\n    \r\n        });\r\n    \r\n        // 注册Components\r\n        Html5Runtime.register = function( name, component ) {\r\n            var klass = components[ name ] = Base.inherits( CompBase, component );\r\n            return klass;\r\n        };\r\n    \r\n        // 注册html5运行时。\r\n        // 只有在支持的前提下注册。\r\n        if ( window.Blob && window.FileReader && window.DataView ) {\r\n            Runtime.addRuntime( type, Html5Runtime );\r\n        }\r\n    \r\n        return Html5Runtime;\r\n    });\r\n    /**\r\n     * @fileOverview Blob Html实现\r\n     */\r\n    define('runtime/html5/blob',[\r\n        'runtime/html5/runtime',\r\n        'lib/blob'\r\n    ], function( Html5Runtime, Blob ) {\r\n    \r\n        return Html5Runtime.register( 'Blob', {\r\n            slice: function( start, end ) {\r\n                var blob = this.owner.source,\r\n                    slice = blob.slice || blob.webkitSlice || blob.mozSlice;\r\n    \r\n                blob = slice.call( blob, start, end );\r\n    \r\n                return new Blob( this.getRuid(), blob );\r\n            }\r\n        });\r\n    });\r\n    /**\r\n     * @fileOverview FilePaste\r\n     */\r\n    define('runtime/html5/dnd',[\r\n        'base',\r\n        'runtime/html5/runtime',\r\n        'lib/file'\r\n    ], function( Base, Html5Runtime, File ) {\r\n    \r\n        var $ = Base.$,\r\n            prefix = 'webuploader-dnd-';\r\n    \r\n        return Html5Runtime.register( 'DragAndDrop', {\r\n            init: function() {\r\n                var elem = this.elem = this.options.container;\r\n    \r\n                this.dragEnterHandler = Base.bindFn( this._dragEnterHandler, this );\r\n                this.dragOverHandler = Base.bindFn( this._dragOverHandler, this );\r\n                this.dragLeaveHandler = Base.bindFn( this._dragLeaveHandler, this );\r\n                this.dropHandler = Base.bindFn( this._dropHandler, this );\r\n                this.dndOver = false;\r\n    \r\n                elem.on( 'dragenter', this.dragEnterHandler );\r\n                elem.on( 'dragover', this.dragOverHandler );\r\n                elem.on( 'dragleave', this.dragLeaveHandler );\r\n                elem.on( 'drop', this.dropHandler );\r\n    \r\n                if ( this.options.disableGlobalDnd ) {\r\n                    $( document ).on( 'dragover', this.dragOverHandler );\r\n                    $( document ).on( 'drop', this.dropHandler );\r\n                }\r\n            },\r\n    \r\n            _dragEnterHandler: function( e ) {\r\n                var me = this,\r\n                    denied = me._denied || false,\r\n                    items;\r\n    \r\n                e = e.originalEvent || e;\r\n    \r\n                if ( !me.dndOver ) {\r\n                    me.dndOver = true;\r\n    \r\n                    // 注意只有 chrome 支持。\r\n                    items = e.dataTransfer.items;\r\n    \r\n                    if ( items && items.length ) {\r\n                        me._denied = denied = !me.trigger( 'accept', items );\r\n                    }\r\n    \r\n                    me.elem.addClass( prefix + 'over' );\r\n                    me.elem[ denied ? 'addClass' :\r\n                            'removeClass' ]( prefix + 'denied' );\r\n                }\r\n    \r\n                e.dataTransfer.dropEffect = denied ? 'none' : 'copy';\r\n    \r\n                return false;\r\n            },\r\n    \r\n            _dragOverHandler: function( e ) {\r\n                // 只处理框内的。\r\n                var parentElem = this.elem.parent().get( 0 );\r\n                if ( parentElem && !$.contains( parentElem, e.currentTarget ) ) {\r\n                    return false;\r\n                }\r\n    \r\n                clearTimeout( this._leaveTimer );\r\n                this._dragEnterHandler.call( this, e );\r\n    \r\n                return false;\r\n            },\r\n    \r\n            _dragLeaveHandler: function() {\r\n                var me = this,\r\n                    handler;\r\n    \r\n                handler = function() {\r\n                    me.dndOver = false;\r\n                    me.elem.removeClass( prefix + 'over ' + prefix + 'denied' );\r\n                };\r\n    \r\n                clearTimeout( me._leaveTimer );\r\n                me._leaveTimer = setTimeout( handler, 100 );\r\n                return false;\r\n            },\r\n    \r\n            _dropHandler: function( e ) {\r\n                var me = this,\r\n                    ruid = me.getRuid(),\r\n                    parentElem = me.elem.parent().get( 0 ),\r\n                    dataTransfer, data;\r\n    \r\n                // 只处理框内的。\r\n                if ( parentElem && !$.contains( parentElem, e.currentTarget ) ) {\r\n                    return false;\r\n                }\r\n    \r\n                e = e.originalEvent || e;\r\n                dataTransfer = e.dataTransfer;\r\n    \r\n                // 如果是页面内拖拽，还不能处理，不阻止事件。\r\n                // 此处 ie11 下会报参数错误，\r\n                try {\r\n                    data = dataTransfer.getData('text/html');\r\n                } catch( err ) {\r\n                }\r\n    \r\n                me.dndOver = false;\r\n                me.elem.removeClass( prefix + 'over' );\r\n    \r\n                if ( data ) {\r\n                    return;\r\n                }\r\n    \r\n                me._getTansferFiles( dataTransfer, function( results ) {\r\n                    me.trigger( 'drop', $.map( results, function( file ) {\r\n                        return new File( ruid, file );\r\n                    }) );\r\n                });\r\n    \r\n                return false;\r\n            },\r\n    \r\n            // 如果传入 callback 则去查看文件夹，否则只管当前文件夹。\r\n            _getTansferFiles: function( dataTransfer, callback ) {\r\n                var results  = [],\r\n                    promises = [],\r\n                    items, files, file, item, i, len, canAccessFolder;\r\n    \r\n                items = dataTransfer.items;\r\n                files = dataTransfer.files;\r\n    \r\n                canAccessFolder = !!(items && items[ 0 ].webkitGetAsEntry);\r\n    \r\n                for ( i = 0, len = files.length; i < len; i++ ) {\r\n                    file = files[ i ];\r\n                    item = items && items[ i ];\r\n    \r\n                    if ( canAccessFolder && item.webkitGetAsEntry().isDirectory ) {\r\n    \r\n                        promises.push( this._traverseDirectoryTree(\r\n                                item.webkitGetAsEntry(), results ) );\r\n                    } else {\r\n                        results.push( file );\r\n                    }\r\n                }\r\n    \r\n                Base.when.apply( Base, promises ).done(function() {\r\n    \r\n                    if ( !results.length ) {\r\n                        return;\r\n                    }\r\n    \r\n                    callback( results );\r\n                });\r\n            },\r\n    \r\n            _traverseDirectoryTree: function( entry, results ) {\r\n                var deferred = Base.Deferred(),\r\n                    me = this;\r\n    \r\n                if ( entry.isFile ) {\r\n                    entry.file(function( file ) {\r\n                        results.push( file );\r\n                        deferred.resolve();\r\n                    });\r\n                } else if ( entry.isDirectory ) {\r\n                    entry.createReader().readEntries(function( entries ) {\r\n                        var len = entries.length,\r\n                            promises = [],\r\n                            arr = [],    // 为了保证顺序。\r\n                            i;\r\n    \r\n                        for ( i = 0; i < len; i++ ) {\r\n                            promises.push( me._traverseDirectoryTree(\r\n                                    entries[ i ], arr ) );\r\n                        }\r\n    \r\n                        Base.when.apply( Base, promises ).then(function() {\r\n                            results.push.apply( results, arr );\r\n                            deferred.resolve();\r\n                        }, deferred.reject );\r\n                    });\r\n                }\r\n    \r\n                return deferred.promise();\r\n            },\r\n    \r\n            destroy: function() {\r\n                var elem = this.elem;\r\n    \r\n                // 还没 init 就调用 destroy\r\n                if (!elem) {\r\n                    return;\r\n                }\r\n    \r\n                elem.off( 'dragenter', this.dragEnterHandler );\r\n                elem.off( 'dragover', this.dragOverHandler );\r\n                elem.off( 'dragleave', this.dragLeaveHandler );\r\n                elem.off( 'drop', this.dropHandler );\r\n    \r\n                if ( this.options.disableGlobalDnd ) {\r\n                    $( document ).off( 'dragover', this.dragOverHandler );\r\n                    $( document ).off( 'drop', this.dropHandler );\r\n                }\r\n            }\r\n        });\r\n    });\r\n    \r\n    /**\r\n     * @fileOverview FilePaste\r\n     */\r\n    define('runtime/html5/filepaste',[\r\n        'base',\r\n        'runtime/html5/runtime',\r\n        'lib/file'\r\n    ], function( Base, Html5Runtime, File ) {\r\n    \r\n        return Html5Runtime.register( 'FilePaste', {\r\n            init: function() {\r\n                var opts = this.options,\r\n                    elem = this.elem = opts.container,\r\n                    accept = '.*',\r\n                    arr, i, len, item;\r\n    \r\n                // accetp的mimeTypes中生成匹配正则。\r\n                if ( opts.accept ) {\r\n                    arr = [];\r\n    \r\n                    for ( i = 0, len = opts.accept.length; i < len; i++ ) {\r\n                        item = opts.accept[ i ].mimeTypes;\r\n                        item && arr.push( item );\r\n                    }\r\n    \r\n                    if ( arr.length ) {\r\n                        accept = arr.join(',');\r\n                        accept = accept.replace( /,/g, '|' ).replace( /\\*/g, '.*' );\r\n                    }\r\n                }\r\n                this.accept = accept = new RegExp( accept, 'i' );\r\n                this.hander = Base.bindFn( this._pasteHander, this );\r\n                elem.on( 'paste', this.hander );\r\n            },\r\n    \r\n            _pasteHander: function( e ) {\r\n                var allowed = [],\r\n                    ruid = this.getRuid(),\r\n                    items, item, blob, i, len;\r\n    \r\n                e = e.originalEvent || e;\r\n                items = e.clipboardData.items;\r\n    \r\n                for ( i = 0, len = items.length; i < len; i++ ) {\r\n                    item = items[ i ];\r\n    \r\n                    if ( item.kind !== 'file' || !(blob = item.getAsFile()) ) {\r\n                        continue;\r\n                    }\r\n    \r\n                    allowed.push( new File( ruid, blob ) );\r\n                }\r\n    \r\n                if ( allowed.length ) {\r\n                    // 不阻止非文件粘贴（文字粘贴）的事件冒泡\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n                    this.trigger( 'paste', allowed );\r\n                }\r\n            },\r\n    \r\n            destroy: function() {\r\n                this.elem.off( 'paste', this.hander );\r\n            }\r\n        });\r\n    });\r\n    \r\n    /**\r\n     * @fileOverview FilePicker\r\n     */\r\n    define('runtime/html5/filepicker',[\r\n        'base',\r\n        'runtime/html5/runtime'\r\n    ], function( Base, Html5Runtime ) {\r\n    \r\n        var $ = Base.$;\r\n    \r\n        return Html5Runtime.register( 'FilePicker', {\r\n            init: function() {\r\n                var container = this.getRuntime().getContainer(),\r\n                    me = this,\r\n                    owner = me.owner,\r\n                    opts = me.options,\r\n                    label = this.label = $( document.createElement('label') ),\r\n                    input =  this.input = $( document.createElement('input') ),\r\n                    arr, i, len, mouseHandler;\r\n    \r\n                input.attr( 'type', 'file' );\r\n                input.attr( 'capture', 'camera');\r\n                input.attr( 'name', opts.name );\r\n                input.addClass('webuploader-element-invisible');\r\n    \r\n                label.on( 'click', function(e) {\r\n                    input.trigger('click');\r\n                    e.stopPropagation();\r\n                    owner.trigger('dialogopen');\r\n                });\r\n    \r\n                label.css({\r\n                    opacity: 0,\r\n                    width: '100%',\r\n                    height: '100%',\r\n                    display: 'block',\r\n                    cursor: 'pointer',\r\n                    background: '#ffffff'\r\n                });\r\n    \r\n                if ( opts.multiple ) {\r\n                    input.attr( 'multiple', 'multiple' );\r\n                }\r\n    \r\n                // @todo Firefox不支持单独指定后缀\r\n                if ( opts.accept && opts.accept.length > 0 ) {\r\n                    arr = [];\r\n    \r\n                    for ( i = 0, len = opts.accept.length; i < len; i++ ) {\r\n                        arr.push( opts.accept[ i ].mimeTypes );\r\n                    }\r\n    \r\n                    input.attr( 'accept', arr.join(',') );\r\n                }\r\n    \r\n                container.append( input );\r\n                container.append( label );\r\n    \r\n                mouseHandler = function( e ) {\r\n                    owner.trigger( e.type );\r\n                };\r\n    \r\n                input.on( 'change', function( e ) {\r\n                    var fn = arguments.callee,\r\n                        clone;\r\n    \r\n                    me.files = e.target.files;\r\n    \r\n                    // reset input\r\n                    clone = this.cloneNode( true );\r\n                    clone.value = null;\r\n                    this.parentNode.replaceChild( clone, this );\r\n    \r\n                    input.off();\r\n                    input = $( clone ).on( 'change', fn )\r\n                            .on( 'mouseenter mouseleave', mouseHandler );\r\n    \r\n                    owner.trigger('change');\r\n                });\r\n    \r\n                label.on( 'mouseenter mouseleave', mouseHandler );\r\n    \r\n            },\r\n    \r\n    \r\n            getFiles: function() {\r\n                return this.files;\r\n            },\r\n    \r\n            destroy: function() {\r\n                this.input.off();\r\n                this.label.off();\r\n            }\r\n        });\r\n    });\r\n    \r\n    /**\r\n     * Terms:\r\n     *\r\n     * Uint8Array, FileReader, BlobBuilder, atob, ArrayBuffer\r\n     * @fileOverview Image控件\r\n     */\r\n    define('runtime/html5/util',[\r\n        'base'\r\n    ], function( Base ) {\r\n    \r\n        var urlAPI = window.createObjectURL && window ||\r\n                window.URL && URL.revokeObjectURL && URL ||\r\n                window.webkitURL,\r\n            createObjectURL = Base.noop,\r\n            revokeObjectURL = createObjectURL;\r\n    \r\n        if ( urlAPI ) {\r\n    \r\n            // 更安全的方式调用，比如android里面就能把context改成其他的对象。\r\n            createObjectURL = function() {\r\n                return urlAPI.createObjectURL.apply( urlAPI, arguments );\r\n            };\r\n    \r\n            revokeObjectURL = function() {\r\n                return urlAPI.revokeObjectURL.apply( urlAPI, arguments );\r\n            };\r\n        }\r\n    \r\n        return {\r\n            createObjectURL: createObjectURL,\r\n            revokeObjectURL: revokeObjectURL,\r\n    \r\n            dataURL2Blob: function( dataURI ) {\r\n                var byteStr, intArray, ab, i, mimetype, parts;\r\n    \r\n                parts = dataURI.split(',');\r\n    \r\n                if ( ~parts[ 0 ].indexOf('base64') ) {\r\n                    byteStr = atob( parts[ 1 ] );\r\n                } else {\r\n                    byteStr = decodeURIComponent( parts[ 1 ] );\r\n                }\r\n    \r\n                ab = new ArrayBuffer( byteStr.length );\r\n                intArray = new Uint8Array( ab );\r\n    \r\n                for ( i = 0; i < byteStr.length; i++ ) {\r\n                    intArray[ i ] = byteStr.charCodeAt( i );\r\n                }\r\n    \r\n                mimetype = parts[ 0 ].split(':')[ 1 ].split(';')[ 0 ];\r\n    \r\n                return this.arrayBufferToBlob( ab, mimetype );\r\n            },\r\n    \r\n            dataURL2ArrayBuffer: function( dataURI ) {\r\n                var byteStr, intArray, i, parts;\r\n    \r\n                parts = dataURI.split(',');\r\n    \r\n                if ( ~parts[ 0 ].indexOf('base64') ) {\r\n                    byteStr = atob( parts[ 1 ] );\r\n                } else {\r\n                    byteStr = decodeURIComponent( parts[ 1 ] );\r\n                }\r\n    \r\n                intArray = new Uint8Array( byteStr.length );\r\n    \r\n                for ( i = 0; i < byteStr.length; i++ ) {\r\n                    intArray[ i ] = byteStr.charCodeAt( i );\r\n                }\r\n    \r\n                return intArray.buffer;\r\n            },\r\n    \r\n            arrayBufferToBlob: function( buffer, type ) {\r\n                var builder = window.BlobBuilder || window.WebKitBlobBuilder,\r\n                    bb;\r\n    \r\n                // android不支持直接new Blob, 只能借助blobbuilder.\r\n                if ( builder ) {\r\n                    bb = new builder();\r\n                    bb.append( buffer );\r\n                    return bb.getBlob( type );\r\n                }\r\n    \r\n                return new Blob([ buffer ], type ? { type: type } : {} );\r\n            },\r\n    \r\n            // 抽出来主要是为了解决android下面canvas.toDataUrl不支持jpeg.\r\n            // 你得到的结果是png.\r\n            canvasToDataUrl: function( canvas, type, quality ) {\r\n                return canvas.toDataURL( type, quality / 100 );\r\n            },\r\n    \r\n            // imagemeat会复写这个方法，如果用户选择加载那个文件了的话。\r\n            parseMeta: function( blob, callback ) {\r\n                callback( false, {});\r\n            },\r\n    \r\n            // imagemeat会复写这个方法，如果用户选择加载那个文件了的话。\r\n            updateImageHead: function( data ) {\r\n                return data;\r\n            }\r\n        };\r\n    });\r\n    /**\r\n     * Terms:\r\n     *\r\n     * Uint8Array, FileReader, BlobBuilder, atob, ArrayBuffer\r\n     * @fileOverview Image控件\r\n     */\r\n    define('runtime/html5/imagemeta',[\r\n        'runtime/html5/util'\r\n    ], function( Util ) {\r\n    \r\n        var api;\r\n    \r\n        api = {\r\n            parsers: {\r\n                0xffe1: []\r\n            },\r\n    \r\n            maxMetaDataSize: 262144,\r\n    \r\n            parse: function( blob, cb ) {\r\n                var me = this,\r\n                    fr = new FileReader();\r\n    \r\n                fr.onload = function() {\r\n                    cb( false, me._parse( this.result ) );\r\n                    fr = fr.onload = fr.onerror = null;\r\n                };\r\n    \r\n                fr.onerror = function( e ) {\r\n                    cb( e.message );\r\n                    fr = fr.onload = fr.onerror = null;\r\n                };\r\n    \r\n                blob = blob.slice( 0, me.maxMetaDataSize );\r\n                fr.readAsArrayBuffer( blob.getSource() );\r\n            },\r\n    \r\n            _parse: function( buffer, noParse ) {\r\n                if ( buffer.byteLength < 6 ) {\r\n                    return;\r\n                }\r\n    \r\n                var dataview = new DataView( buffer ),\r\n                    offset = 2,\r\n                    maxOffset = dataview.byteLength - 4,\r\n                    headLength = offset,\r\n                    ret = {},\r\n                    markerBytes, markerLength, parsers, i;\r\n    \r\n                if ( dataview.getUint16( 0 ) === 0xffd8 ) {\r\n    \r\n                    while ( offset < maxOffset ) {\r\n                        markerBytes = dataview.getUint16( offset );\r\n    \r\n                        if ( markerBytes >= 0xffe0 && markerBytes <= 0xffef ||\r\n                                markerBytes === 0xfffe ) {\r\n    \r\n                            markerLength = dataview.getUint16( offset + 2 ) + 2;\r\n    \r\n                            if ( offset + markerLength > dataview.byteLength ) {\r\n                                break;\r\n                            }\r\n    \r\n                            parsers = api.parsers[ markerBytes ];\r\n    \r\n                            if ( !noParse && parsers ) {\r\n                                for ( i = 0; i < parsers.length; i += 1 ) {\r\n                                    parsers[ i ].call( api, dataview, offset,\r\n                                            markerLength, ret );\r\n                                }\r\n                            }\r\n    \r\n                            offset += markerLength;\r\n                            headLength = offset;\r\n                        } else {\r\n                            break;\r\n                        }\r\n                    }\r\n    \r\n                    if ( headLength > 6 ) {\r\n                        if ( buffer.slice ) {\r\n                            ret.imageHead = buffer.slice( 2, headLength );\r\n                        } else {\r\n                            // Workaround for IE10, which does not yet\r\n                            // support ArrayBuffer.slice:\r\n                            ret.imageHead = new Uint8Array( buffer )\r\n                                    .subarray( 2, headLength );\r\n                        }\r\n                    }\r\n                }\r\n    \r\n                return ret;\r\n            },\r\n    \r\n            updateImageHead: function( buffer, head ) {\r\n                var data = this._parse( buffer, true ),\r\n                    buf1, buf2, bodyoffset;\r\n    \r\n    \r\n                bodyoffset = 2;\r\n                if ( data.imageHead ) {\r\n                    bodyoffset = 2 + data.imageHead.byteLength;\r\n                }\r\n    \r\n                if ( buffer.slice ) {\r\n                    buf2 = buffer.slice( bodyoffset );\r\n                } else {\r\n                    buf2 = new Uint8Array( buffer ).subarray( bodyoffset );\r\n                }\r\n    \r\n                buf1 = new Uint8Array( head.byteLength + 2 + buf2.byteLength );\r\n    \r\n                buf1[ 0 ] = 0xFF;\r\n                buf1[ 1 ] = 0xD8;\r\n                buf1.set( new Uint8Array( head ), 2 );\r\n                buf1.set( new Uint8Array( buf2 ), head.byteLength + 2 );\r\n    \r\n                return buf1.buffer;\r\n            }\r\n        };\r\n    \r\n        Util.parseMeta = function() {\r\n            return api.parse.apply( api, arguments );\r\n        };\r\n    \r\n        Util.updateImageHead = function() {\r\n            return api.updateImageHead.apply( api, arguments );\r\n        };\r\n    \r\n        return api;\r\n    });\r\n    /**\r\n     * 代码来自于：https://github.com/blueimp/JavaScript-Load-Image\r\n     * 暂时项目中只用了orientation.\r\n     *\r\n     * 去除了 Exif Sub IFD Pointer, GPS Info IFD Pointer, Exif Thumbnail.\r\n     * @fileOverview EXIF解析\r\n     */\r\n    \r\n    // Sample\r\n    // ====================================\r\n    // Make : Apple\r\n    // Model : iPhone 4S\r\n    // Orientation : 1\r\n    // XResolution : 72 [72/1]\r\n    // YResolution : 72 [72/1]\r\n    // ResolutionUnit : 2\r\n    // Software : QuickTime 7.7.1\r\n    // DateTime : 2013:09:01 22:53:55\r\n    // ExifIFDPointer : 190\r\n    // ExposureTime : 0.058823529411764705 [1/17]\r\n    // FNumber : 2.4 [12/5]\r\n    // ExposureProgram : Normal program\r\n    // ISOSpeedRatings : 800\r\n    // ExifVersion : 0220\r\n    // DateTimeOriginal : 2013:09:01 22:52:51\r\n    // DateTimeDigitized : 2013:09:01 22:52:51\r\n    // ComponentsConfiguration : YCbCr\r\n    // ShutterSpeedValue : 4.058893515764426\r\n    // ApertureValue : 2.5260688216892597 [4845/1918]\r\n    // BrightnessValue : -0.3126686601998395\r\n    // MeteringMode : Pattern\r\n    // Flash : Flash did not fire, compulsory flash mode\r\n    // FocalLength : 4.28 [107/25]\r\n    // SubjectArea : [4 values]\r\n    // FlashpixVersion : 0100\r\n    // ColorSpace : 1\r\n    // PixelXDimension : 2448\r\n    // PixelYDimension : 3264\r\n    // SensingMethod : One-chip color area sensor\r\n    // ExposureMode : 0\r\n    // WhiteBalance : Auto white balance\r\n    // FocalLengthIn35mmFilm : 35\r\n    // SceneCaptureType : Standard\r\n    define('runtime/html5/imagemeta/exif',[\r\n        'base',\r\n        'runtime/html5/imagemeta'\r\n    ], function( Base, ImageMeta ) {\r\n    \r\n        var EXIF = {};\r\n    \r\n        EXIF.ExifMap = function() {\r\n            return this;\r\n        };\r\n    \r\n        EXIF.ExifMap.prototype.map = {\r\n            'Orientation': 0x0112\r\n        };\r\n    \r\n        EXIF.ExifMap.prototype.get = function( id ) {\r\n            return this[ id ] || this[ this.map[ id ] ];\r\n        };\r\n    \r\n        EXIF.exifTagTypes = {\r\n            // byte, 8-bit unsigned int:\r\n            1: {\r\n                getValue: function( dataView, dataOffset ) {\r\n                    return dataView.getUint8( dataOffset );\r\n                },\r\n                size: 1\r\n            },\r\n    \r\n            // ascii, 8-bit byte:\r\n            2: {\r\n                getValue: function( dataView, dataOffset ) {\r\n                    return String.fromCharCode( dataView.getUint8( dataOffset ) );\r\n                },\r\n                size: 1,\r\n                ascii: true\r\n            },\r\n    \r\n            // short, 16 bit int:\r\n            3: {\r\n                getValue: function( dataView, dataOffset, littleEndian ) {\r\n                    return dataView.getUint16( dataOffset, littleEndian );\r\n                },\r\n                size: 2\r\n            },\r\n    \r\n            // long, 32 bit int:\r\n            4: {\r\n                getValue: function( dataView, dataOffset, littleEndian ) {\r\n                    return dataView.getUint32( dataOffset, littleEndian );\r\n                },\r\n                size: 4\r\n            },\r\n    \r\n            // rational = two long values,\r\n            // first is numerator, second is denominator:\r\n            5: {\r\n                getValue: function( dataView, dataOffset, littleEndian ) {\r\n                    return dataView.getUint32( dataOffset, littleEndian ) /\r\n                        dataView.getUint32( dataOffset + 4, littleEndian );\r\n                },\r\n                size: 8\r\n            },\r\n    \r\n            // slong, 32 bit signed int:\r\n            9: {\r\n                getValue: function( dataView, dataOffset, littleEndian ) {\r\n                    return dataView.getInt32( dataOffset, littleEndian );\r\n                },\r\n                size: 4\r\n            },\r\n    \r\n            // srational, two slongs, first is numerator, second is denominator:\r\n            10: {\r\n                getValue: function( dataView, dataOffset, littleEndian ) {\r\n                    return dataView.getInt32( dataOffset, littleEndian ) /\r\n                        dataView.getInt32( dataOffset + 4, littleEndian );\r\n                },\r\n                size: 8\r\n            }\r\n        };\r\n    \r\n        // undefined, 8-bit byte, value depending on field:\r\n        EXIF.exifTagTypes[ 7 ] = EXIF.exifTagTypes[ 1 ];\r\n    \r\n        EXIF.getExifValue = function( dataView, tiffOffset, offset, type, length,\r\n                littleEndian ) {\r\n    \r\n            var tagType = EXIF.exifTagTypes[ type ],\r\n                tagSize, dataOffset, values, i, str, c;\r\n    \r\n            if ( !tagType ) {\r\n                Base.log('Invalid Exif data: Invalid tag type.');\r\n                return;\r\n            }\r\n    \r\n            tagSize = tagType.size * length;\r\n    \r\n            // Determine if the value is contained in the dataOffset bytes,\r\n            // or if the value at the dataOffset is a pointer to the actual data:\r\n            dataOffset = tagSize > 4 ? tiffOffset + dataView.getUint32( offset + 8,\r\n                    littleEndian ) : (offset + 8);\r\n    \r\n            if ( dataOffset + tagSize > dataView.byteLength ) {\r\n                Base.log('Invalid Exif data: Invalid data offset.');\r\n                return;\r\n            }\r\n    \r\n            if ( length === 1 ) {\r\n                return tagType.getValue( dataView, dataOffset, littleEndian );\r\n            }\r\n    \r\n            values = [];\r\n    \r\n            for ( i = 0; i < length; i += 1 ) {\r\n                values[ i ] = tagType.getValue( dataView,\r\n                        dataOffset + i * tagType.size, littleEndian );\r\n            }\r\n    \r\n            if ( tagType.ascii ) {\r\n                str = '';\r\n    \r\n                // Concatenate the chars:\r\n                for ( i = 0; i < values.length; i += 1 ) {\r\n                    c = values[ i ];\r\n    \r\n                    // Ignore the terminating NULL byte(s):\r\n                    if ( c === '\\u0000' ) {\r\n                        break;\r\n                    }\r\n                    str += c;\r\n                }\r\n    \r\n                return str;\r\n            }\r\n            return values;\r\n        };\r\n    \r\n        EXIF.parseExifTag = function( dataView, tiffOffset, offset, littleEndian,\r\n                data ) {\r\n    \r\n            var tag = dataView.getUint16( offset, littleEndian );\r\n            data.exif[ tag ] = EXIF.getExifValue( dataView, tiffOffset, offset,\r\n                    dataView.getUint16( offset + 2, littleEndian ),    // tag type\r\n                    dataView.getUint32( offset + 4, littleEndian ),    // tag length\r\n                    littleEndian );\r\n        };\r\n    \r\n        EXIF.parseExifTags = function( dataView, tiffOffset, dirOffset,\r\n                littleEndian, data ) {\r\n    \r\n            var tagsNumber, dirEndOffset, i;\r\n    \r\n            if ( dirOffset + 6 > dataView.byteLength ) {\r\n                Base.log('Invalid Exif data: Invalid directory offset.');\r\n                return;\r\n            }\r\n    \r\n            tagsNumber = dataView.getUint16( dirOffset, littleEndian );\r\n            dirEndOffset = dirOffset + 2 + 12 * tagsNumber;\r\n    \r\n            if ( dirEndOffset + 4 > dataView.byteLength ) {\r\n                Base.log('Invalid Exif data: Invalid directory size.');\r\n                return;\r\n            }\r\n    \r\n            for ( i = 0; i < tagsNumber; i += 1 ) {\r\n                this.parseExifTag( dataView, tiffOffset,\r\n                        dirOffset + 2 + 12 * i,    // tag offset\r\n                        littleEndian, data );\r\n            }\r\n    \r\n            // Return the offset to the next directory:\r\n            return dataView.getUint32( dirEndOffset, littleEndian );\r\n        };\r\n    \r\n        // EXIF.getExifThumbnail = function(dataView, offset, length) {\r\n        //     var hexData,\r\n        //         i,\r\n        //         b;\r\n        //     if (!length || offset + length > dataView.byteLength) {\r\n        //         Base.log('Invalid Exif data: Invalid thumbnail data.');\r\n        //         return;\r\n        //     }\r\n        //     hexData = [];\r\n        //     for (i = 0; i < length; i += 1) {\r\n        //         b = dataView.getUint8(offset + i);\r\n        //         hexData.push((b < 16 ? '0' : '') + b.toString(16));\r\n        //     }\r\n        //     return 'data:image/jpeg,%' + hexData.join('%');\r\n        // };\r\n    \r\n        EXIF.parseExifData = function( dataView, offset, length, data ) {\r\n    \r\n            var tiffOffset = offset + 10,\r\n                littleEndian, dirOffset;\r\n    \r\n            // Check for the ASCII code for \"Exif\" (0x45786966):\r\n            if ( dataView.getUint32( offset + 4 ) !== 0x45786966 ) {\r\n                // No Exif data, might be XMP data instead\r\n                return;\r\n            }\r\n            if ( tiffOffset + 8 > dataView.byteLength ) {\r\n                Base.log('Invalid Exif data: Invalid segment size.');\r\n                return;\r\n            }\r\n    \r\n            // Check for the two null bytes:\r\n            if ( dataView.getUint16( offset + 8 ) !== 0x0000 ) {\r\n                Base.log('Invalid Exif data: Missing byte alignment offset.');\r\n                return;\r\n            }\r\n    \r\n            // Check the byte alignment:\r\n            switch ( dataView.getUint16( tiffOffset ) ) {\r\n                case 0x4949:\r\n                    littleEndian = true;\r\n                    break;\r\n    \r\n                case 0x4D4D:\r\n                    littleEndian = false;\r\n                    break;\r\n    \r\n                default:\r\n                    Base.log('Invalid Exif data: Invalid byte alignment marker.');\r\n                    return;\r\n            }\r\n    \r\n            // Check for the TIFF tag marker (0x002A):\r\n            if ( dataView.getUint16( tiffOffset + 2, littleEndian ) !== 0x002A ) {\r\n                Base.log('Invalid Exif data: Missing TIFF marker.');\r\n                return;\r\n            }\r\n    \r\n            // Retrieve the directory offset bytes, usually 0x00000008 or 8 decimal:\r\n            dirOffset = dataView.getUint32( tiffOffset + 4, littleEndian );\r\n            // Create the exif object to store the tags:\r\n            data.exif = new EXIF.ExifMap();\r\n            // Parse the tags of the main image directory and retrieve the\r\n            // offset to the next directory, usually the thumbnail directory:\r\n            dirOffset = EXIF.parseExifTags( dataView, tiffOffset,\r\n                    tiffOffset + dirOffset, littleEndian, data );\r\n    \r\n            // 尝试读取缩略图\r\n            // if ( dirOffset ) {\r\n            //     thumbnailData = {exif: {}};\r\n            //     dirOffset = EXIF.parseExifTags(\r\n            //         dataView,\r\n            //         tiffOffset,\r\n            //         tiffOffset + dirOffset,\r\n            //         littleEndian,\r\n            //         thumbnailData\r\n            //     );\r\n    \r\n            //     // Check for JPEG Thumbnail offset:\r\n            //     if (thumbnailData.exif[0x0201]) {\r\n            //         data.exif.Thumbnail = EXIF.getExifThumbnail(\r\n            //             dataView,\r\n            //             tiffOffset + thumbnailData.exif[0x0201],\r\n            //             thumbnailData.exif[0x0202] // Thumbnail data length\r\n            //         );\r\n            //     }\r\n            // }\r\n        };\r\n    \r\n        ImageMeta.parsers[ 0xffe1 ].push( EXIF.parseExifData );\r\n        return EXIF;\r\n    });\r\n    /**\r\n     * 这个方式性能不行，但是可以解决android里面的toDataUrl的bug\r\n     * android里面toDataUrl('image/jpege')得到的结果却是png.\r\n     *\r\n     * 所以这里没辙，只能借助这个工具\r\n     * @fileOverview jpeg encoder\r\n     */\r\n    define('runtime/html5/jpegencoder',[], function( require, exports, module ) {\r\n    \r\n        /*\r\n          Copyright (c) 2008, Adobe Systems Incorporated\r\n          All rights reserved.\r\n    \r\n          Redistribution and use in source and binary forms, with or without\r\n          modification, are permitted provided that the following conditions are\r\n          met:\r\n    \r\n          * Redistributions of source code must retain the above copyright notice,\r\n            this list of conditions and the following disclaimer.\r\n    \r\n          * Redistributions in binary form must reproduce the above copyright\r\n            notice, this list of conditions and the following disclaimer in the\r\n            documentation and/or other materials provided with the distribution.\r\n    \r\n          * Neither the name of Adobe Systems Incorporated nor the names of its\r\n            contributors may be used to endorse or promote products derived from\r\n            this software without specific prior written permission.\r\n    \r\n          THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS\r\n          IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,\r\n          THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\r\n          PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR\r\n          CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\r\n          EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\r\n          PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\r\n          PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\r\n          LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\r\n          NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n          SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n        */\r\n        /*\r\n        JPEG encoder ported to JavaScript and optimized by Andreas Ritter, www.bytestrom.eu, 11/2009\r\n    \r\n        Basic GUI blocking jpeg encoder\r\n        */\r\n    \r\n        function JPEGEncoder(quality) {\r\n          var self = this;\r\n            var fround = Math.round;\r\n            var ffloor = Math.floor;\r\n            var YTable = new Array(64);\r\n            var UVTable = new Array(64);\r\n            var fdtbl_Y = new Array(64);\r\n            var fdtbl_UV = new Array(64);\r\n            var YDC_HT;\r\n            var UVDC_HT;\r\n            var YAC_HT;\r\n            var UVAC_HT;\r\n    \r\n            var bitcode = new Array(65535);\r\n            var category = new Array(65535);\r\n            var outputfDCTQuant = new Array(64);\r\n            var DU = new Array(64);\r\n            var byteout = [];\r\n            var bytenew = 0;\r\n            var bytepos = 7;\r\n    \r\n            var YDU = new Array(64);\r\n            var UDU = new Array(64);\r\n            var VDU = new Array(64);\r\n            var clt = new Array(256);\r\n            var RGB_YUV_TABLE = new Array(2048);\r\n            var currentQuality;\r\n    \r\n            var ZigZag = [\r\n                     0, 1, 5, 6,14,15,27,28,\r\n                     2, 4, 7,13,16,26,29,42,\r\n                     3, 8,12,17,25,30,41,43,\r\n                     9,11,18,24,31,40,44,53,\r\n                    10,19,23,32,39,45,52,54,\r\n                    20,22,33,38,46,51,55,60,\r\n                    21,34,37,47,50,56,59,61,\r\n                    35,36,48,49,57,58,62,63\r\n                ];\r\n    \r\n            var std_dc_luminance_nrcodes = [0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0];\r\n            var std_dc_luminance_values = [0,1,2,3,4,5,6,7,8,9,10,11];\r\n            var std_ac_luminance_nrcodes = [0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,0x7d];\r\n            var std_ac_luminance_values = [\r\n                    0x01,0x02,0x03,0x00,0x04,0x11,0x05,0x12,\r\n                    0x21,0x31,0x41,0x06,0x13,0x51,0x61,0x07,\r\n                    0x22,0x71,0x14,0x32,0x81,0x91,0xa1,0x08,\r\n                    0x23,0x42,0xb1,0xc1,0x15,0x52,0xd1,0xf0,\r\n                    0x24,0x33,0x62,0x72,0x82,0x09,0x0a,0x16,\r\n                    0x17,0x18,0x19,0x1a,0x25,0x26,0x27,0x28,\r\n                    0x29,0x2a,0x34,0x35,0x36,0x37,0x38,0x39,\r\n                    0x3a,0x43,0x44,0x45,0x46,0x47,0x48,0x49,\r\n                    0x4a,0x53,0x54,0x55,0x56,0x57,0x58,0x59,\r\n                    0x5a,0x63,0x64,0x65,0x66,0x67,0x68,0x69,\r\n                    0x6a,0x73,0x74,0x75,0x76,0x77,0x78,0x79,\r\n                    0x7a,0x83,0x84,0x85,0x86,0x87,0x88,0x89,\r\n                    0x8a,0x92,0x93,0x94,0x95,0x96,0x97,0x98,\r\n                    0x99,0x9a,0xa2,0xa3,0xa4,0xa5,0xa6,0xa7,\r\n                    0xa8,0xa9,0xaa,0xb2,0xb3,0xb4,0xb5,0xb6,\r\n                    0xb7,0xb8,0xb9,0xba,0xc2,0xc3,0xc4,0xc5,\r\n                    0xc6,0xc7,0xc8,0xc9,0xca,0xd2,0xd3,0xd4,\r\n                    0xd5,0xd6,0xd7,0xd8,0xd9,0xda,0xe1,0xe2,\r\n                    0xe3,0xe4,0xe5,0xe6,0xe7,0xe8,0xe9,0xea,\r\n                    0xf1,0xf2,0xf3,0xf4,0xf5,0xf6,0xf7,0xf8,\r\n                    0xf9,0xfa\r\n                ];\r\n    \r\n            var std_dc_chrominance_nrcodes = [0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0];\r\n            var std_dc_chrominance_values = [0,1,2,3,4,5,6,7,8,9,10,11];\r\n            var std_ac_chrominance_nrcodes = [0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,0x77];\r\n            var std_ac_chrominance_values = [\r\n                    0x00,0x01,0x02,0x03,0x11,0x04,0x05,0x21,\r\n                    0x31,0x06,0x12,0x41,0x51,0x07,0x61,0x71,\r\n                    0x13,0x22,0x32,0x81,0x08,0x14,0x42,0x91,\r\n                    0xa1,0xb1,0xc1,0x09,0x23,0x33,0x52,0xf0,\r\n                    0x15,0x62,0x72,0xd1,0x0a,0x16,0x24,0x34,\r\n                    0xe1,0x25,0xf1,0x17,0x18,0x19,0x1a,0x26,\r\n                    0x27,0x28,0x29,0x2a,0x35,0x36,0x37,0x38,\r\n                    0x39,0x3a,0x43,0x44,0x45,0x46,0x47,0x48,\r\n                    0x49,0x4a,0x53,0x54,0x55,0x56,0x57,0x58,\r\n                    0x59,0x5a,0x63,0x64,0x65,0x66,0x67,0x68,\r\n                    0x69,0x6a,0x73,0x74,0x75,0x76,0x77,0x78,\r\n                    0x79,0x7a,0x82,0x83,0x84,0x85,0x86,0x87,\r\n                    0x88,0x89,0x8a,0x92,0x93,0x94,0x95,0x96,\r\n                    0x97,0x98,0x99,0x9a,0xa2,0xa3,0xa4,0xa5,\r\n                    0xa6,0xa7,0xa8,0xa9,0xaa,0xb2,0xb3,0xb4,\r\n                    0xb5,0xb6,0xb7,0xb8,0xb9,0xba,0xc2,0xc3,\r\n                    0xc4,0xc5,0xc6,0xc7,0xc8,0xc9,0xca,0xd2,\r\n                    0xd3,0xd4,0xd5,0xd6,0xd7,0xd8,0xd9,0xda,\r\n                    0xe2,0xe3,0xe4,0xe5,0xe6,0xe7,0xe8,0xe9,\r\n                    0xea,0xf2,0xf3,0xf4,0xf5,0xf6,0xf7,0xf8,\r\n                    0xf9,0xfa\r\n                ];\r\n    \r\n            function initQuantTables(sf){\r\n                    var YQT = [\r\n                        16, 11, 10, 16, 24, 40, 51, 61,\r\n                        12, 12, 14, 19, 26, 58, 60, 55,\r\n                        14, 13, 16, 24, 40, 57, 69, 56,\r\n                        14, 17, 22, 29, 51, 87, 80, 62,\r\n                        18, 22, 37, 56, 68,109,103, 77,\r\n                        24, 35, 55, 64, 81,104,113, 92,\r\n                        49, 64, 78, 87,103,121,120,101,\r\n                        72, 92, 95, 98,112,100,103, 99\r\n                    ];\r\n    \r\n                    for (var i = 0; i < 64; i++) {\r\n                        var t = ffloor((YQT[i]*sf+50)/100);\r\n                        if (t < 1) {\r\n                            t = 1;\r\n                        } else if (t > 255) {\r\n                            t = 255;\r\n                        }\r\n                        YTable[ZigZag[i]] = t;\r\n                    }\r\n                    var UVQT = [\r\n                        17, 18, 24, 47, 99, 99, 99, 99,\r\n                        18, 21, 26, 66, 99, 99, 99, 99,\r\n                        24, 26, 56, 99, 99, 99, 99, 99,\r\n                        47, 66, 99, 99, 99, 99, 99, 99,\r\n                        99, 99, 99, 99, 99, 99, 99, 99,\r\n                        99, 99, 99, 99, 99, 99, 99, 99,\r\n                        99, 99, 99, 99, 99, 99, 99, 99,\r\n                        99, 99, 99, 99, 99, 99, 99, 99\r\n                    ];\r\n                    for (var j = 0; j < 64; j++) {\r\n                        var u = ffloor((UVQT[j]*sf+50)/100);\r\n                        if (u < 1) {\r\n                            u = 1;\r\n                        } else if (u > 255) {\r\n                            u = 255;\r\n                        }\r\n                        UVTable[ZigZag[j]] = u;\r\n                    }\r\n                    var aasf = [\r\n                        1.0, 1.387039845, 1.306562965, 1.175875602,\r\n                        1.0, 0.785694958, 0.541196100, 0.275899379\r\n                    ];\r\n                    var k = 0;\r\n                    for (var row = 0; row < 8; row++)\r\n                    {\r\n                        for (var col = 0; col < 8; col++)\r\n                        {\r\n                            fdtbl_Y[k]  = (1.0 / (YTable [ZigZag[k]] * aasf[row] * aasf[col] * 8.0));\r\n                            fdtbl_UV[k] = (1.0 / (UVTable[ZigZag[k]] * aasf[row] * aasf[col] * 8.0));\r\n                            k++;\r\n                        }\r\n                    }\r\n                }\r\n    \r\n                function computeHuffmanTbl(nrcodes, std_table){\r\n                    var codevalue = 0;\r\n                    var pos_in_table = 0;\r\n                    var HT = new Array();\r\n                    for (var k = 1; k <= 16; k++) {\r\n                        for (var j = 1; j <= nrcodes[k]; j++) {\r\n                            HT[std_table[pos_in_table]] = [];\r\n                            HT[std_table[pos_in_table]][0] = codevalue;\r\n                            HT[std_table[pos_in_table]][1] = k;\r\n                            pos_in_table++;\r\n                            codevalue++;\r\n                        }\r\n                        codevalue*=2;\r\n                    }\r\n                    return HT;\r\n                }\r\n    \r\n                function initHuffmanTbl()\r\n                {\r\n                    YDC_HT = computeHuffmanTbl(std_dc_luminance_nrcodes,std_dc_luminance_values);\r\n                    UVDC_HT = computeHuffmanTbl(std_dc_chrominance_nrcodes,std_dc_chrominance_values);\r\n                    YAC_HT = computeHuffmanTbl(std_ac_luminance_nrcodes,std_ac_luminance_values);\r\n                    UVAC_HT = computeHuffmanTbl(std_ac_chrominance_nrcodes,std_ac_chrominance_values);\r\n                }\r\n    \r\n                function initCategoryNumber()\r\n                {\r\n                    var nrlower = 1;\r\n                    var nrupper = 2;\r\n                    for (var cat = 1; cat <= 15; cat++) {\r\n                        //Positive numbers\r\n                        for (var nr = nrlower; nr<nrupper; nr++) {\r\n                            category[32767+nr] = cat;\r\n                            bitcode[32767+nr] = [];\r\n                            bitcode[32767+nr][1] = cat;\r\n                            bitcode[32767+nr][0] = nr;\r\n                        }\r\n                        //Negative numbers\r\n                        for (var nrneg =-(nrupper-1); nrneg<=-nrlower; nrneg++) {\r\n                            category[32767+nrneg] = cat;\r\n                            bitcode[32767+nrneg] = [];\r\n                            bitcode[32767+nrneg][1] = cat;\r\n                            bitcode[32767+nrneg][0] = nrupper-1+nrneg;\r\n                        }\r\n                        nrlower <<= 1;\r\n                        nrupper <<= 1;\r\n                    }\r\n                }\r\n    \r\n                function initRGBYUVTable() {\r\n                    for(var i = 0; i < 256;i++) {\r\n                        RGB_YUV_TABLE[i]            =  19595 * i;\r\n                        RGB_YUV_TABLE[(i+ 256)>>0]  =  38470 * i;\r\n                        RGB_YUV_TABLE[(i+ 512)>>0]  =   7471 * i + 0x8000;\r\n                        RGB_YUV_TABLE[(i+ 768)>>0]  = -11059 * i;\r\n                        RGB_YUV_TABLE[(i+1024)>>0]  = -21709 * i;\r\n                        RGB_YUV_TABLE[(i+1280)>>0]  =  32768 * i + 0x807FFF;\r\n                        RGB_YUV_TABLE[(i+1536)>>0]  = -27439 * i;\r\n                        RGB_YUV_TABLE[(i+1792)>>0]  = - 5329 * i;\r\n                    }\r\n                }\r\n    \r\n                // IO functions\r\n                function writeBits(bs)\r\n                {\r\n                    var value = bs[0];\r\n                    var posval = bs[1]-1;\r\n                    while ( posval >= 0 ) {\r\n                        if (value & (1 << posval) ) {\r\n                            bytenew |= (1 << bytepos);\r\n                        }\r\n                        posval--;\r\n                        bytepos--;\r\n                        if (bytepos < 0) {\r\n                            if (bytenew == 0xFF) {\r\n                                writeByte(0xFF);\r\n                                writeByte(0);\r\n                            }\r\n                            else {\r\n                                writeByte(bytenew);\r\n                            }\r\n                            bytepos=7;\r\n                            bytenew=0;\r\n                        }\r\n                    }\r\n                }\r\n    \r\n                function writeByte(value)\r\n                {\r\n                    byteout.push(clt[value]); // write char directly instead of converting later\r\n                }\r\n    \r\n                function writeWord(value)\r\n                {\r\n                    writeByte((value>>8)&0xFF);\r\n                    writeByte((value   )&0xFF);\r\n                }\r\n    \r\n                // DCT & quantization core\r\n                function fDCTQuant(data, fdtbl)\r\n                {\r\n                    var d0, d1, d2, d3, d4, d5, d6, d7;\r\n                    /* Pass 1: process rows. */\r\n                    var dataOff=0;\r\n                    var i;\r\n                    var I8 = 8;\r\n                    var I64 = 64;\r\n                    for (i=0; i<I8; ++i)\r\n                    {\r\n                        d0 = data[dataOff];\r\n                        d1 = data[dataOff+1];\r\n                        d2 = data[dataOff+2];\r\n                        d3 = data[dataOff+3];\r\n                        d4 = data[dataOff+4];\r\n                        d5 = data[dataOff+5];\r\n                        d6 = data[dataOff+6];\r\n                        d7 = data[dataOff+7];\r\n    \r\n                        var tmp0 = d0 + d7;\r\n                        var tmp7 = d0 - d7;\r\n                        var tmp1 = d1 + d6;\r\n                        var tmp6 = d1 - d6;\r\n                        var tmp2 = d2 + d5;\r\n                        var tmp5 = d2 - d5;\r\n                        var tmp3 = d3 + d4;\r\n                        var tmp4 = d3 - d4;\r\n    \r\n                        /* Even part */\r\n                        var tmp10 = tmp0 + tmp3;    /* phase 2 */\r\n                        var tmp13 = tmp0 - tmp3;\r\n                        var tmp11 = tmp1 + tmp2;\r\n                        var tmp12 = tmp1 - tmp2;\r\n    \r\n                        data[dataOff] = tmp10 + tmp11; /* phase 3 */\r\n                        data[dataOff+4] = tmp10 - tmp11;\r\n    \r\n                        var z1 = (tmp12 + tmp13) * 0.707106781; /* c4 */\r\n                        data[dataOff+2] = tmp13 + z1; /* phase 5 */\r\n                        data[dataOff+6] = tmp13 - z1;\r\n    \r\n                        /* Odd part */\r\n                        tmp10 = tmp4 + tmp5; /* phase 2 */\r\n                        tmp11 = tmp5 + tmp6;\r\n                        tmp12 = tmp6 + tmp7;\r\n    \r\n                        /* The rotator is modified from fig 4-8 to avoid extra negations. */\r\n                        var z5 = (tmp10 - tmp12) * 0.382683433; /* c6 */\r\n                        var z2 = 0.541196100 * tmp10 + z5; /* c2-c6 */\r\n                        var z4 = 1.306562965 * tmp12 + z5; /* c2+c6 */\r\n                        var z3 = tmp11 * 0.707106781; /* c4 */\r\n    \r\n                        var z11 = tmp7 + z3;    /* phase 5 */\r\n                        var z13 = tmp7 - z3;\r\n    \r\n                        data[dataOff+5] = z13 + z2; /* phase 6 */\r\n                        data[dataOff+3] = z13 - z2;\r\n                        data[dataOff+1] = z11 + z4;\r\n                        data[dataOff+7] = z11 - z4;\r\n    \r\n                        dataOff += 8; /* advance pointer to next row */\r\n                    }\r\n    \r\n                    /* Pass 2: process columns. */\r\n                    dataOff = 0;\r\n                    for (i=0; i<I8; ++i)\r\n                    {\r\n                        d0 = data[dataOff];\r\n                        d1 = data[dataOff + 8];\r\n                        d2 = data[dataOff + 16];\r\n                        d3 = data[dataOff + 24];\r\n                        d4 = data[dataOff + 32];\r\n                        d5 = data[dataOff + 40];\r\n                        d6 = data[dataOff + 48];\r\n                        d7 = data[dataOff + 56];\r\n    \r\n                        var tmp0p2 = d0 + d7;\r\n                        var tmp7p2 = d0 - d7;\r\n                        var tmp1p2 = d1 + d6;\r\n                        var tmp6p2 = d1 - d6;\r\n                        var tmp2p2 = d2 + d5;\r\n                        var tmp5p2 = d2 - d5;\r\n                        var tmp3p2 = d3 + d4;\r\n                        var tmp4p2 = d3 - d4;\r\n    \r\n                        /* Even part */\r\n                        var tmp10p2 = tmp0p2 + tmp3p2;  /* phase 2 */\r\n                        var tmp13p2 = tmp0p2 - tmp3p2;\r\n                        var tmp11p2 = tmp1p2 + tmp2p2;\r\n                        var tmp12p2 = tmp1p2 - tmp2p2;\r\n    \r\n                        data[dataOff] = tmp10p2 + tmp11p2; /* phase 3 */\r\n                        data[dataOff+32] = tmp10p2 - tmp11p2;\r\n    \r\n                        var z1p2 = (tmp12p2 + tmp13p2) * 0.707106781; /* c4 */\r\n                        data[dataOff+16] = tmp13p2 + z1p2; /* phase 5 */\r\n                        data[dataOff+48] = tmp13p2 - z1p2;\r\n    \r\n                        /* Odd part */\r\n                        tmp10p2 = tmp4p2 + tmp5p2; /* phase 2 */\r\n                        tmp11p2 = tmp5p2 + tmp6p2;\r\n                        tmp12p2 = tmp6p2 + tmp7p2;\r\n    \r\n                        /* The rotator is modified from fig 4-8 to avoid extra negations. */\r\n                        var z5p2 = (tmp10p2 - tmp12p2) * 0.382683433; /* c6 */\r\n                        var z2p2 = 0.541196100 * tmp10p2 + z5p2; /* c2-c6 */\r\n                        var z4p2 = 1.306562965 * tmp12p2 + z5p2; /* c2+c6 */\r\n                        var z3p2 = tmp11p2 * 0.707106781; /* c4 */\r\n    \r\n                        var z11p2 = tmp7p2 + z3p2;  /* phase 5 */\r\n                        var z13p2 = tmp7p2 - z3p2;\r\n    \r\n                        data[dataOff+40] = z13p2 + z2p2; /* phase 6 */\r\n                        data[dataOff+24] = z13p2 - z2p2;\r\n                        data[dataOff+ 8] = z11p2 + z4p2;\r\n                        data[dataOff+56] = z11p2 - z4p2;\r\n    \r\n                        dataOff++; /* advance pointer to next column */\r\n                    }\r\n    \r\n                    // Quantize/descale the coefficients\r\n                    var fDCTQuant;\r\n                    for (i=0; i<I64; ++i)\r\n                    {\r\n                        // Apply the quantization and scaling factor & Round to nearest integer\r\n                        fDCTQuant = data[i]*fdtbl[i];\r\n                        outputfDCTQuant[i] = (fDCTQuant > 0.0) ? ((fDCTQuant + 0.5)|0) : ((fDCTQuant - 0.5)|0);\r\n                        //outputfDCTQuant[i] = fround(fDCTQuant);\r\n    \r\n                    }\r\n                    return outputfDCTQuant;\r\n                }\r\n    \r\n                function writeAPP0()\r\n                {\r\n                    writeWord(0xFFE0); // marker\r\n                    writeWord(16); // length\r\n                    writeByte(0x4A); // J\r\n                    writeByte(0x46); // F\r\n                    writeByte(0x49); // I\r\n                    writeByte(0x46); // F\r\n                    writeByte(0); // = \"JFIF\",'\\0'\r\n                    writeByte(1); // versionhi\r\n                    writeByte(1); // versionlo\r\n                    writeByte(0); // xyunits\r\n                    writeWord(1); // xdensity\r\n                    writeWord(1); // ydensity\r\n                    writeByte(0); // thumbnwidth\r\n                    writeByte(0); // thumbnheight\r\n                }\r\n    \r\n                function writeSOF0(width, height)\r\n                {\r\n                    writeWord(0xFFC0); // marker\r\n                    writeWord(17);   // length, truecolor YUV JPG\r\n                    writeByte(8);    // precision\r\n                    writeWord(height);\r\n                    writeWord(width);\r\n                    writeByte(3);    // nrofcomponents\r\n                    writeByte(1);    // IdY\r\n                    writeByte(0x11); // HVY\r\n                    writeByte(0);    // QTY\r\n                    writeByte(2);    // IdU\r\n                    writeByte(0x11); // HVU\r\n                    writeByte(1);    // QTU\r\n                    writeByte(3);    // IdV\r\n                    writeByte(0x11); // HVV\r\n                    writeByte(1);    // QTV\r\n                }\r\n    \r\n                function writeDQT()\r\n                {\r\n                    writeWord(0xFFDB); // marker\r\n                    writeWord(132);    // length\r\n                    writeByte(0);\r\n                    for (var i=0; i<64; i++) {\r\n                        writeByte(YTable[i]);\r\n                    }\r\n                    writeByte(1);\r\n                    for (var j=0; j<64; j++) {\r\n                        writeByte(UVTable[j]);\r\n                    }\r\n                }\r\n    \r\n                function writeDHT()\r\n                {\r\n                    writeWord(0xFFC4); // marker\r\n                    writeWord(0x01A2); // length\r\n    \r\n                    writeByte(0); // HTYDCinfo\r\n                    for (var i=0; i<16; i++) {\r\n                        writeByte(std_dc_luminance_nrcodes[i+1]);\r\n                    }\r\n                    for (var j=0; j<=11; j++) {\r\n                        writeByte(std_dc_luminance_values[j]);\r\n                    }\r\n    \r\n                    writeByte(0x10); // HTYACinfo\r\n                    for (var k=0; k<16; k++) {\r\n                        writeByte(std_ac_luminance_nrcodes[k+1]);\r\n                    }\r\n                    for (var l=0; l<=161; l++) {\r\n                        writeByte(std_ac_luminance_values[l]);\r\n                    }\r\n    \r\n                    writeByte(1); // HTUDCinfo\r\n                    for (var m=0; m<16; m++) {\r\n                        writeByte(std_dc_chrominance_nrcodes[m+1]);\r\n                    }\r\n                    for (var n=0; n<=11; n++) {\r\n                        writeByte(std_dc_chrominance_values[n]);\r\n                    }\r\n    \r\n                    writeByte(0x11); // HTUACinfo\r\n                    for (var o=0; o<16; o++) {\r\n                        writeByte(std_ac_chrominance_nrcodes[o+1]);\r\n                    }\r\n                    for (var p=0; p<=161; p++) {\r\n                        writeByte(std_ac_chrominance_values[p]);\r\n                    }\r\n                }\r\n    \r\n                function writeSOS()\r\n                {\r\n                    writeWord(0xFFDA); // marker\r\n                    writeWord(12); // length\r\n                    writeByte(3); // nrofcomponents\r\n                    writeByte(1); // IdY\r\n                    writeByte(0); // HTY\r\n                    writeByte(2); // IdU\r\n                    writeByte(0x11); // HTU\r\n                    writeByte(3); // IdV\r\n                    writeByte(0x11); // HTV\r\n                    writeByte(0); // Ss\r\n                    writeByte(0x3f); // Se\r\n                    writeByte(0); // Bf\r\n                }\r\n    \r\n                function processDU(CDU, fdtbl, DC, HTDC, HTAC){\r\n                    var EOB = HTAC[0x00];\r\n                    var M16zeroes = HTAC[0xF0];\r\n                    var pos;\r\n                    var I16 = 16;\r\n                    var I63 = 63;\r\n                    var I64 = 64;\r\n                    var DU_DCT = fDCTQuant(CDU, fdtbl);\r\n                    //ZigZag reorder\r\n                    for (var j=0;j<I64;++j) {\r\n                        DU[ZigZag[j]]=DU_DCT[j];\r\n                    }\r\n                    var Diff = DU[0] - DC; DC = DU[0];\r\n                    //Encode DC\r\n                    if (Diff==0) {\r\n                        writeBits(HTDC[0]); // Diff might be 0\r\n                    } else {\r\n                        pos = 32767+Diff;\r\n                        writeBits(HTDC[category[pos]]);\r\n                        writeBits(bitcode[pos]);\r\n                    }\r\n                    //Encode ACs\r\n                    var end0pos = 63; // was const... which is crazy\r\n                    for (; (end0pos>0)&&(DU[end0pos]==0); end0pos--) {};\r\n                    //end0pos = first element in reverse order !=0\r\n                    if ( end0pos == 0) {\r\n                        writeBits(EOB);\r\n                        return DC;\r\n                    }\r\n                    var i = 1;\r\n                    var lng;\r\n                    while ( i <= end0pos ) {\r\n                        var startpos = i;\r\n                        for (; (DU[i]==0) && (i<=end0pos); ++i) {}\r\n                        var nrzeroes = i-startpos;\r\n                        if ( nrzeroes >= I16 ) {\r\n                            lng = nrzeroes>>4;\r\n                            for (var nrmarker=1; nrmarker <= lng; ++nrmarker)\r\n                                writeBits(M16zeroes);\r\n                            nrzeroes = nrzeroes&0xF;\r\n                        }\r\n                        pos = 32767+DU[i];\r\n                        writeBits(HTAC[(nrzeroes<<4)+category[pos]]);\r\n                        writeBits(bitcode[pos]);\r\n                        i++;\r\n                    }\r\n                    if ( end0pos != I63 ) {\r\n                        writeBits(EOB);\r\n                    }\r\n                    return DC;\r\n                }\r\n    \r\n                function initCharLookupTable(){\r\n                    var sfcc = String.fromCharCode;\r\n                    for(var i=0; i < 256; i++){ ///// ACHTUNG // 255\r\n                        clt[i] = sfcc(i);\r\n                    }\r\n                }\r\n    \r\n                this.encode = function(image,quality) // image data object\r\n                {\r\n                    // var time_start = new Date().getTime();\r\n    \r\n                    if(quality) setQuality(quality);\r\n    \r\n                    // Initialize bit writer\r\n                    byteout = new Array();\r\n                    bytenew=0;\r\n                    bytepos=7;\r\n    \r\n                    // Add JPEG headers\r\n                    writeWord(0xFFD8); // SOI\r\n                    writeAPP0();\r\n                    writeDQT();\r\n                    writeSOF0(image.width,image.height);\r\n                    writeDHT();\r\n                    writeSOS();\r\n    \r\n    \r\n                    // Encode 8x8 macroblocks\r\n                    var DCY=0;\r\n                    var DCU=0;\r\n                    var DCV=0;\r\n    \r\n                    bytenew=0;\r\n                    bytepos=7;\r\n    \r\n    \r\n                    this.encode.displayName = \"_encode_\";\r\n    \r\n                    var imageData = image.data;\r\n                    var width = image.width;\r\n                    var height = image.height;\r\n    \r\n                    var quadWidth = width*4;\r\n                    var tripleWidth = width*3;\r\n    \r\n                    var x, y = 0;\r\n                    var r, g, b;\r\n                    var start,p, col,row,pos;\r\n                    while(y < height){\r\n                        x = 0;\r\n                        while(x < quadWidth){\r\n                        start = quadWidth * y + x;\r\n                        p = start;\r\n                        col = -1;\r\n                        row = 0;\r\n    \r\n                        for(pos=0; pos < 64; pos++){\r\n                            row = pos >> 3;// /8\r\n                            col = ( pos & 7 ) * 4; // %8\r\n                            p = start + ( row * quadWidth ) + col;\r\n    \r\n                            if(y+row >= height){ // padding bottom\r\n                                p-= (quadWidth*(y+1+row-height));\r\n                            }\r\n    \r\n                            if(x+col >= quadWidth){ // padding right\r\n                                p-= ((x+col) - quadWidth +4)\r\n                            }\r\n    \r\n                            r = imageData[ p++ ];\r\n                            g = imageData[ p++ ];\r\n                            b = imageData[ p++ ];\r\n    \r\n    \r\n                            /* // calculate YUV values dynamically\r\n                            YDU[pos]=((( 0.29900)*r+( 0.58700)*g+( 0.11400)*b))-128; //-0x80\r\n                            UDU[pos]=(((-0.16874)*r+(-0.33126)*g+( 0.50000)*b));\r\n                            VDU[pos]=((( 0.50000)*r+(-0.41869)*g+(-0.08131)*b));\r\n                            */\r\n    \r\n                            // use lookup table (slightly faster)\r\n                            YDU[pos] = ((RGB_YUV_TABLE[r]             + RGB_YUV_TABLE[(g +  256)>>0] + RGB_YUV_TABLE[(b +  512)>>0]) >> 16)-128;\r\n                            UDU[pos] = ((RGB_YUV_TABLE[(r +  768)>>0] + RGB_YUV_TABLE[(g + 1024)>>0] + RGB_YUV_TABLE[(b + 1280)>>0]) >> 16)-128;\r\n                            VDU[pos] = ((RGB_YUV_TABLE[(r + 1280)>>0] + RGB_YUV_TABLE[(g + 1536)>>0] + RGB_YUV_TABLE[(b + 1792)>>0]) >> 16)-128;\r\n    \r\n                        }\r\n    \r\n                        DCY = processDU(YDU, fdtbl_Y, DCY, YDC_HT, YAC_HT);\r\n                        DCU = processDU(UDU, fdtbl_UV, DCU, UVDC_HT, UVAC_HT);\r\n                        DCV = processDU(VDU, fdtbl_UV, DCV, UVDC_HT, UVAC_HT);\r\n                        x+=32;\r\n                        }\r\n                        y+=8;\r\n                    }\r\n    \r\n    \r\n                    ////////////////////////////////////////////////////////////////\r\n    \r\n                    // Do the bit alignment of the EOI marker\r\n                    if ( bytepos >= 0 ) {\r\n                        var fillbits = [];\r\n                        fillbits[1] = bytepos+1;\r\n                        fillbits[0] = (1<<(bytepos+1))-1;\r\n                        writeBits(fillbits);\r\n                    }\r\n    \r\n                    writeWord(0xFFD9); //EOI\r\n    \r\n                    var jpegDataUri = 'data:image/jpeg;base64,' + btoa(byteout.join(''));\r\n    \r\n                    byteout = [];\r\n    \r\n                    // benchmarking\r\n                    // var duration = new Date().getTime() - time_start;\r\n                    // console.log('Encoding time: '+ currentQuality + 'ms');\r\n                    //\r\n    \r\n                    return jpegDataUri\r\n            }\r\n    \r\n            function setQuality(quality){\r\n                if (quality <= 0) {\r\n                    quality = 1;\r\n                }\r\n                if (quality > 100) {\r\n                    quality = 100;\r\n                }\r\n    \r\n                if(currentQuality == quality) return // don't recalc if unchanged\r\n    \r\n                var sf = 0;\r\n                if (quality < 50) {\r\n                    sf = Math.floor(5000 / quality);\r\n                } else {\r\n                    sf = Math.floor(200 - quality*2);\r\n                }\r\n    \r\n                initQuantTables(sf);\r\n                currentQuality = quality;\r\n                // console.log('Quality set to: '+quality +'%');\r\n            }\r\n    \r\n            function init(){\r\n                // var time_start = new Date().getTime();\r\n                if(!quality) quality = 50;\r\n                // Create tables\r\n                initCharLookupTable()\r\n                initHuffmanTbl();\r\n                initCategoryNumber();\r\n                initRGBYUVTable();\r\n    \r\n                setQuality(quality);\r\n                // var duration = new Date().getTime() - time_start;\r\n                // console.log('Initialization '+ duration + 'ms');\r\n            }\r\n    \r\n            init();\r\n    \r\n        };\r\n    \r\n        JPEGEncoder.encode = function( data, quality ) {\r\n            var encoder = new JPEGEncoder( quality );\r\n    \r\n            return encoder.encode( data );\r\n        }\r\n    \r\n        return JPEGEncoder;\r\n    });\r\n    /**\r\n     * @fileOverview Fix android canvas.toDataUrl bug.\r\n     */\r\n    define('runtime/html5/androidpatch',[\r\n        'runtime/html5/util',\r\n        'runtime/html5/jpegencoder',\r\n        'base'\r\n    ], function( Util, encoder, Base ) {\r\n        var origin = Util.canvasToDataUrl,\r\n            supportJpeg;\r\n    \r\n        Util.canvasToDataUrl = function( canvas, type, quality ) {\r\n            var ctx, w, h, fragement, parts;\r\n    \r\n            // 非android手机直接跳过。\r\n            if ( !Base.os.android ) {\r\n                return origin.apply( null, arguments );\r\n            }\r\n    \r\n            // 检测是否canvas支持jpeg导出，根据数据格式来判断。\r\n            // JPEG 前两位分别是：255, 216\r\n            if ( type === 'image/jpeg' && typeof supportJpeg === 'undefined' ) {\r\n                fragement = origin.apply( null, arguments );\r\n    \r\n                parts = fragement.split(',');\r\n    \r\n                if ( ~parts[ 0 ].indexOf('base64') ) {\r\n                    fragement = atob( parts[ 1 ] );\r\n                } else {\r\n                    fragement = decodeURIComponent( parts[ 1 ] );\r\n                }\r\n    \r\n                fragement = fragement.substring( 0, 2 );\r\n    \r\n                supportJpeg = fragement.charCodeAt( 0 ) === 255 &&\r\n                        fragement.charCodeAt( 1 ) === 216;\r\n            }\r\n    \r\n            // 只有在android环境下才修复\r\n            if ( type === 'image/jpeg' && !supportJpeg ) {\r\n                w = canvas.width;\r\n                h = canvas.height;\r\n                ctx = canvas.getContext('2d');\r\n    \r\n                return encoder.encode( ctx.getImageData( 0, 0, w, h ), quality );\r\n            }\r\n    \r\n            return origin.apply( null, arguments );\r\n        };\r\n    });\r\n    /**\r\n     * @fileOverview Image\r\n     */\r\n    define('runtime/html5/image',[\r\n        'base',\r\n        'runtime/html5/runtime',\r\n        'runtime/html5/util'\r\n    ], function( Base, Html5Runtime, Util ) {\r\n    \r\n        var BLANK = 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D';\r\n    \r\n        return Html5Runtime.register( 'Image', {\r\n    \r\n            // flag: 标记是否被修改过。\r\n            modified: false,\r\n    \r\n            init: function() {\r\n                var me = this,\r\n                    img = new Image();\r\n    \r\n                img.onload = function() {\r\n    \r\n                    me._info = {\r\n                        type: me.type,\r\n                        width: this.width,\r\n                        height: this.height\r\n                    };\r\n    \r\n                    //debugger;\r\n    \r\n                    // 读取meta信息。\r\n                    if ( !me._metas && 'image/jpeg' === me.type ) {\r\n                        Util.parseMeta( me._blob, function( error, ret ) {\r\n                            me._metas = ret;\r\n                            me.owner.trigger('load');\r\n                        });\r\n                    } else {\r\n                        me.owner.trigger('load');\r\n                    }\r\n                };\r\n    \r\n                img.onerror = function() {\r\n                    me.owner.trigger('error');\r\n                };\r\n    \r\n                me._img = img;\r\n            },\r\n    \r\n            loadFromBlob: function( blob ) {\r\n                var me = this,\r\n                    img = me._img;\r\n    \r\n                me._blob = blob;\r\n                me.type = blob.type;\r\n                img.src = Util.createObjectURL( blob.getSource() );\r\n                me.owner.once( 'load', function() {\r\n                    Util.revokeObjectURL( img.src );\r\n                });\r\n            },\r\n    \r\n            resize: function( width, height ) {\r\n                var canvas = this._canvas ||\r\n                        (this._canvas = document.createElement('canvas'));\r\n    \r\n                this._resize( this._img, canvas, width, height );\r\n                this._blob = null;    // 没用了，可以删掉了。\r\n                this.modified = true;\r\n                this.owner.trigger( 'complete', 'resize' );\r\n            },\r\n    \r\n            crop: function( x, y, w, h, s ) {\r\n                var cvs = this._canvas ||\r\n                        (this._canvas = document.createElement('canvas')),\r\n                    opts = this.options,\r\n                    img = this._img,\r\n                    iw = img.naturalWidth,\r\n                    ih = img.naturalHeight,\r\n                    orientation = this.getOrientation();\r\n    \r\n                s = s || 1;\r\n    \r\n                // todo 解决 orientation 的问题。\r\n                // values that require 90 degree rotation\r\n                // if ( ~[ 5, 6, 7, 8 ].indexOf( orientation ) ) {\r\n    \r\n                //     switch ( orientation ) {\r\n                //         case 6:\r\n                //             tmp = x;\r\n                //             x = y;\r\n                //             y = iw * s - tmp - w;\r\n                //             console.log(ih * s, tmp, w)\r\n                //             break;\r\n                //     }\r\n    \r\n                //     (w ^= h, h ^= w, w ^= h);\r\n                // }\r\n    \r\n                cvs.width = w;\r\n                cvs.height = h;\r\n    \r\n                opts.preserveHeaders || this._rotate2Orientaion( cvs, orientation );\r\n                this._renderImageToCanvas( cvs, img, -x, -y, iw * s, ih * s );\r\n    \r\n                this._blob = null;    // 没用了，可以删掉了。\r\n                this.modified = true;\r\n                this.owner.trigger( 'complete', 'crop' );\r\n            },\r\n    \r\n            getAsBlob: function( type ) {\r\n                var blob = this._blob,\r\n                    opts = this.options,\r\n                    canvas;\r\n    \r\n                type = type || this.type;\r\n    \r\n                // blob需要重新生成。\r\n                if ( this.modified || this.type !== type ) {\r\n                    canvas = this._canvas;\r\n    \r\n                    if ( type === 'image/jpeg' ) {\r\n    \r\n                        blob = Util.canvasToDataUrl( canvas, type, opts.quality );\r\n    \r\n                        if ( opts.preserveHeaders && this._metas &&\r\n                                this._metas.imageHead ) {\r\n    \r\n                            blob = Util.dataURL2ArrayBuffer( blob );\r\n                            blob = Util.updateImageHead( blob,\r\n                                    this._metas.imageHead );\r\n                            blob = Util.arrayBufferToBlob( blob, type );\r\n                            return blob;\r\n                        }\r\n                    } else {\r\n                        blob = Util.canvasToDataUrl( canvas, type );\r\n                    }\r\n    \r\n                    blob = Util.dataURL2Blob( blob );\r\n                }\r\n    \r\n                return blob;\r\n            },\r\n    \r\n            getAsDataUrl: function( type ) {\r\n                var opts = this.options;\r\n    \r\n                type = type || this.type;\r\n    \r\n                if ( type === 'image/jpeg' ) {\r\n                    return Util.canvasToDataUrl( this._canvas, type, opts.quality );\r\n                } else {\r\n                    return this._canvas.toDataURL( type );\r\n                }\r\n            },\r\n    \r\n            getOrientation: function() {\r\n                return this._metas && this._metas.exif &&\r\n                        this._metas.exif.get('Orientation') || 1;\r\n            },\r\n    \r\n            info: function( val ) {\r\n    \r\n                // setter\r\n                if ( val ) {\r\n                    this._info = val;\r\n                    return this;\r\n                }\r\n    \r\n                // getter\r\n                return this._info;\r\n            },\r\n    \r\n            meta: function( val ) {\r\n    \r\n                // setter\r\n                if ( val ) {\r\n                    this._metas = val;\r\n                    return this;\r\n                }\r\n    \r\n                // getter\r\n                return this._metas;\r\n            },\r\n    \r\n            destroy: function() {\r\n                var canvas = this._canvas;\r\n                this._img.onload = null;\r\n    \r\n                if ( canvas ) {\r\n                    canvas.getContext('2d')\r\n                            .clearRect( 0, 0, canvas.width, canvas.height );\r\n                    canvas.width = canvas.height = 0;\r\n                    this._canvas = null;\r\n                }\r\n    \r\n                // 释放内存。非常重要，否则释放不了image的内存。\r\n                this._img.src = BLANK;\r\n                this._img = this._blob = null;\r\n            },\r\n    \r\n            _resize: function( img, cvs, width, height ) {\r\n                var opts = this.options,\r\n                    naturalWidth = img.width,\r\n                    naturalHeight = img.height,\r\n                    orientation = this.getOrientation(),\r\n                    scale, w, h, x, y;\r\n    \r\n                // values that require 90 degree rotation\r\n                if ( ~[ 5, 6, 7, 8 ].indexOf( orientation ) ) {\r\n    \r\n                    // 交换width, height的值。\r\n                    width ^= height;\r\n                    height ^= width;\r\n                    width ^= height;\r\n                }\r\n    \r\n                scale = Math[ opts.crop ? 'max' : 'min' ]( width / naturalWidth,\r\n                        height / naturalHeight );\r\n    \r\n                // 不允许放大。\r\n                opts.allowMagnify || (scale = Math.min( 1, scale ));\r\n    \r\n                w = naturalWidth * scale;\r\n                h = naturalHeight * scale;\r\n    \r\n                if ( opts.crop ) {\r\n                    cvs.width = width;\r\n                    cvs.height = height;\r\n                } else {\r\n                    cvs.width = w;\r\n                    cvs.height = h;\r\n                }\r\n    \r\n                x = (cvs.width - w) / 2;\r\n                y = (cvs.height - h) / 2;\r\n    \r\n                opts.preserveHeaders || this._rotate2Orientaion( cvs, orientation );\r\n    \r\n                this._renderImageToCanvas( cvs, img, x, y, w, h );\r\n            },\r\n    \r\n            _rotate2Orientaion: function( canvas, orientation ) {\r\n                var width = canvas.width,\r\n                    height = canvas.height,\r\n                    ctx = canvas.getContext('2d');\r\n    \r\n                switch ( orientation ) {\r\n                    case 5:\r\n                    case 6:\r\n                    case 7:\r\n                    case 8:\r\n                        canvas.width = height;\r\n                        canvas.height = width;\r\n                        break;\r\n                }\r\n    \r\n                switch ( orientation ) {\r\n                    case 2:    // horizontal flip\r\n                        ctx.translate( width, 0 );\r\n                        ctx.scale( -1, 1 );\r\n                        break;\r\n    \r\n                    case 3:    // 180 rotate left\r\n                        ctx.translate( width, height );\r\n                        ctx.rotate( Math.PI );\r\n                        break;\r\n    \r\n                    case 4:    // vertical flip\r\n                        ctx.translate( 0, height );\r\n                        ctx.scale( 1, -1 );\r\n                        break;\r\n    \r\n                    case 5:    // vertical flip + 90 rotate right\r\n                        ctx.rotate( 0.5 * Math.PI );\r\n                        ctx.scale( 1, -1 );\r\n                        break;\r\n    \r\n                    case 6:    // 90 rotate right\r\n                        ctx.rotate( 0.5 * Math.PI );\r\n                        ctx.translate( 0, -height );\r\n                        break;\r\n    \r\n                    case 7:    // horizontal flip + 90 rotate right\r\n                        ctx.rotate( 0.5 * Math.PI );\r\n                        ctx.translate( width, -height );\r\n                        ctx.scale( -1, 1 );\r\n                        break;\r\n    \r\n                    case 8:    // 90 rotate left\r\n                        ctx.rotate( -0.5 * Math.PI );\r\n                        ctx.translate( -width, 0 );\r\n                        break;\r\n                }\r\n            },\r\n    \r\n            // https://github.com/stomita/ios-imagefile-megapixel/\r\n            // blob/master/src/megapix-image.js\r\n            _renderImageToCanvas: (function() {\r\n    \r\n                // 如果不是ios, 不需要这么复杂！\r\n                if ( !Base.os.ios ) {\r\n                    return function( canvas ) {\r\n                        var args = Base.slice( arguments, 1 ),\r\n                            ctx = canvas.getContext('2d');\r\n    \r\n                        ctx.drawImage.apply( ctx, args );\r\n                    };\r\n                }\r\n    \r\n                /**\r\n                 * Detecting vertical squash in loaded image.\r\n                 * Fixes a bug which squash image vertically while drawing into\r\n                 * canvas for some images.\r\n                 */\r\n                function detectVerticalSquash( img, iw, ih ) {\r\n                    var canvas = document.createElement('canvas'),\r\n                        ctx = canvas.getContext('2d'),\r\n                        sy = 0,\r\n                        ey = ih,\r\n                        py = ih,\r\n                        data, alpha, ratio;\r\n    \r\n    \r\n                    canvas.width = 1;\r\n                    canvas.height = ih;\r\n                    ctx.drawImage( img, 0, 0 );\r\n                    data = ctx.getImageData( 0, 0, 1, ih ).data;\r\n    \r\n                    // search image edge pixel position in case\r\n                    // it is squashed vertically.\r\n                    while ( py > sy ) {\r\n                        alpha = data[ (py - 1) * 4 + 3 ];\r\n    \r\n                        if ( alpha === 0 ) {\r\n                            ey = py;\r\n                        } else {\r\n                            sy = py;\r\n                        }\r\n    \r\n                        py = (ey + sy) >> 1;\r\n                    }\r\n    \r\n                    ratio = (py / ih);\r\n                    return (ratio === 0) ? 1 : ratio;\r\n                }\r\n    \r\n                // fix ie7 bug\r\n                // http://stackoverflow.com/questions/11929099/\r\n                // html5-canvas-drawimage-ratio-bug-ios\r\n                if ( Base.os.ios >= 7 ) {\r\n                    return function( canvas, img, x, y, w, h ) {\r\n                        var iw = img.naturalWidth,\r\n                            ih = img.naturalHeight,\r\n                            vertSquashRatio = detectVerticalSquash( img, iw, ih );\r\n    \r\n                        return canvas.getContext('2d').drawImage( img, 0, 0,\r\n                                iw * vertSquashRatio, ih * vertSquashRatio,\r\n                                x, y, w, h );\r\n                    };\r\n                }\r\n    \r\n                /**\r\n                 * Detect subsampling in loaded image.\r\n                 * In iOS, larger images than 2M pixels may be\r\n                 * subsampled in rendering.\r\n                 */\r\n                function detectSubsampling( img ) {\r\n                    var iw = img.naturalWidth,\r\n                        ih = img.naturalHeight,\r\n                        canvas, ctx;\r\n    \r\n                    // subsampling may happen overmegapixel image\r\n                    if ( iw * ih > 1024 * 1024 ) {\r\n                        canvas = document.createElement('canvas');\r\n                        canvas.width = canvas.height = 1;\r\n                        ctx = canvas.getContext('2d');\r\n                        ctx.drawImage( img, -iw + 1, 0 );\r\n    \r\n                        // subsampled image becomes half smaller in rendering size.\r\n                        // check alpha channel value to confirm image is covering\r\n                        // edge pixel or not. if alpha value is 0\r\n                        // image is not covering, hence subsampled.\r\n                        return ctx.getImageData( 0, 0, 1, 1 ).data[ 3 ] === 0;\r\n                    } else {\r\n                        return false;\r\n                    }\r\n                }\r\n    \r\n    \r\n                return function( canvas, img, x, y, width, height ) {\r\n                    var iw = img.naturalWidth,\r\n                        ih = img.naturalHeight,\r\n                        ctx = canvas.getContext('2d'),\r\n                        subsampled = detectSubsampling( img ),\r\n                        doSquash = this.type === 'image/jpeg',\r\n                        d = 1024,\r\n                        sy = 0,\r\n                        dy = 0,\r\n                        tmpCanvas, tmpCtx, vertSquashRatio, dw, dh, sx, dx;\r\n    \r\n                    if ( subsampled ) {\r\n                        iw /= 2;\r\n                        ih /= 2;\r\n                    }\r\n    \r\n                    ctx.save();\r\n                    tmpCanvas = document.createElement('canvas');\r\n                    tmpCanvas.width = tmpCanvas.height = d;\r\n    \r\n                    tmpCtx = tmpCanvas.getContext('2d');\r\n                    vertSquashRatio = doSquash ?\r\n                            detectVerticalSquash( img, iw, ih ) : 1;\r\n    \r\n                    dw = Math.ceil( d * width / iw );\r\n                    dh = Math.ceil( d * height / ih / vertSquashRatio );\r\n    \r\n                    while ( sy < ih ) {\r\n                        sx = 0;\r\n                        dx = 0;\r\n                        while ( sx < iw ) {\r\n                            tmpCtx.clearRect( 0, 0, d, d );\r\n                            tmpCtx.drawImage( img, -sx, -sy );\r\n                            ctx.drawImage( tmpCanvas, 0, 0, d, d,\r\n                                    x + dx, y + dy, dw, dh );\r\n                            sx += d;\r\n                            dx += dw;\r\n                        }\r\n                        sy += d;\r\n                        dy += dh;\r\n                    }\r\n                    ctx.restore();\r\n                    tmpCanvas = tmpCtx = null;\r\n                };\r\n            })()\r\n        });\r\n    });\r\n    \r\n    /**\r\n     * @fileOverview Transport\r\n     * @todo 支持chunked传输，优势：\r\n     * 可以将大文件分成小块，挨个传输，可以提高大文件成功率，当失败的时候，也只需要重传那小部分，\r\n     * 而不需要重头再传一次。另外断点续传也需要用chunked方式。\r\n     */\r\n    define('runtime/html5/transport',[\r\n        'base',\r\n        'runtime/html5/runtime'\r\n    ], function( Base, Html5Runtime ) {\r\n    \r\n        var noop = Base.noop,\r\n            $ = Base.$;\r\n    \r\n        return Html5Runtime.register( 'Transport', {\r\n            init: function() {\r\n                this._status = 0;\r\n                this._response = null;\r\n            },\r\n    \r\n            send: function() {\r\n                var owner = this.owner,\r\n                    opts = this.options,\r\n                    xhr = this._initAjax(),\r\n                    blob = owner._blob,\r\n                    server = opts.server,\r\n                    formData, binary, fr;\r\n    \r\n                if ( opts.sendAsBinary ) {\r\n                    server += (/\\?/.test( server ) ? '&' : '?') +\r\n                            $.param( owner._formData );\r\n    \r\n                    binary = blob.getSource();\r\n                } else {\r\n                    formData = new FormData();\r\n                    $.each( owner._formData, function( k, v ) {\r\n                        formData.append( k, v );\r\n                    });\r\n    \r\n                    formData.append( opts.fileVal, blob.getSource(),\r\n                            opts.filename || owner._formData.name || '' );\r\n                }\r\n    \r\n                if ( opts.withCredentials && 'withCredentials' in xhr ) {\r\n                    xhr.open( opts.method, server, true );\r\n                    xhr.withCredentials = true;\r\n                } else {\r\n                    xhr.open( opts.method, server );\r\n                }\r\n    \r\n                this._setRequestHeader( xhr, opts.headers );\r\n    \r\n                if ( binary ) {\r\n                    // 强制设置成 content-type 为文件流。\r\n                    xhr.overrideMimeType &&\r\n                            xhr.overrideMimeType('application/octet-stream');\r\n    \r\n                    // android直接发送blob会导致服务端接收到的是空文件。\r\n                    // bug详情。\r\n                    // https://code.google.com/p/android/issues/detail?id=39882\r\n                    // 所以先用fileReader读取出来再通过arraybuffer的方式发送。\r\n                    if ( Base.os.android ) {\r\n                        fr = new FileReader();\r\n    \r\n                        fr.onload = function() {\r\n                            xhr.send( this.result );\r\n                            fr = fr.onload = null;\r\n                        };\r\n    \r\n                        fr.readAsArrayBuffer( binary );\r\n                    } else {\r\n                        xhr.send( binary );\r\n                    }\r\n                } else {\r\n                    xhr.send( formData );\r\n                }\r\n            },\r\n    \r\n            getResponse: function() {\r\n                return this._response;\r\n            },\r\n    \r\n            getResponseAsJson: function() {\r\n                return this._parseJson( this._response );\r\n            },\r\n    \r\n            getStatus: function() {\r\n                return this._status;\r\n            },\r\n    \r\n            abort: function() {\r\n                var xhr = this._xhr;\r\n    \r\n                if ( xhr ) {\r\n                    xhr.upload.onprogress = noop;\r\n                    xhr.onreadystatechange = noop;\r\n                    xhr.abort();\r\n    \r\n                    this._xhr = xhr = null;\r\n                }\r\n            },\r\n    \r\n            destroy: function() {\r\n                this.abort();\r\n            },\r\n    \r\n            _initAjax: function() {\r\n                var me = this,\r\n                    xhr = new XMLHttpRequest(),\r\n                    opts = this.options;\r\n    \r\n                if ( opts.withCredentials && !('withCredentials' in xhr) &&\r\n                        typeof XDomainRequest !== 'undefined' ) {\r\n                    xhr = new XDomainRequest();\r\n                }\r\n    \r\n                xhr.upload.onprogress = function( e ) {\r\n                    var percentage = 0;\r\n    \r\n                    if ( e.lengthComputable ) {\r\n                        percentage = e.loaded / e.total;\r\n                    }\r\n    \r\n                    return me.trigger( 'progress', percentage );\r\n                };\r\n    \r\n                xhr.onreadystatechange = function() {\r\n    \r\n                    if ( xhr.readyState !== 4 ) {\r\n                        return;\r\n                    }\r\n    \r\n                    xhr.upload.onprogress = noop;\r\n                    xhr.onreadystatechange = noop;\r\n                    me._xhr = null;\r\n                    me._status = xhr.status;\r\n    \r\n                    if ( xhr.status >= 200 && xhr.status < 300 ) {\r\n                        me._response = xhr.responseText;\r\n                        return me.trigger('load');\r\n                    } else if ( xhr.status >= 500 && xhr.status < 600 ) {\r\n                        me._response = xhr.responseText;\r\n                        return me.trigger( 'error', 'server' );\r\n                    }\r\n    \r\n    \r\n                    return me.trigger( 'error', me._status ? 'http' : 'abort' );\r\n                };\r\n    \r\n                me._xhr = xhr;\r\n                return xhr;\r\n            },\r\n    \r\n            _setRequestHeader: function( xhr, headers ) {\r\n                $.each( headers, function( key, val ) {\r\n                    xhr.setRequestHeader( key, val );\r\n                });\r\n            },\r\n    \r\n            _parseJson: function( str ) {\r\n                var json;\r\n    \r\n                try {\r\n                    json = JSON.parse( str );\r\n                } catch ( ex ) {\r\n                    json = {};\r\n                }\r\n    \r\n                return json;\r\n            }\r\n        });\r\n    });\r\n    /**\r\n     * @fileOverview  Transport flash实现\r\n     */\r\n    define('runtime/html5/md5',[\r\n        'runtime/html5/runtime'\r\n    ], function( FlashRuntime ) {\r\n    \r\n        /*\r\n         * Fastest md5 implementation around (JKM md5)\r\n         * Credits: Joseph Myers\r\n         *\r\n         * @see http://www.myersdaily.org/joseph/javascript/md5-text.html\r\n         * @see http://jsperf.com/md5-shootout/7\r\n         */\r\n    \r\n        /* this function is much faster,\r\n          so if possible we use it. Some IEs\r\n          are the only ones I know of that\r\n          need the idiotic second function,\r\n          generated by an if clause.  */\r\n        var add32 = function (a, b) {\r\n            return (a + b) & 0xFFFFFFFF;\r\n        },\r\n    \r\n        cmn = function (q, a, b, x, s, t) {\r\n            a = add32(add32(a, q), add32(x, t));\r\n            return add32((a << s) | (a >>> (32 - s)), b);\r\n        },\r\n    \r\n        ff = function (a, b, c, d, x, s, t) {\r\n            return cmn((b & c) | ((~b) & d), a, b, x, s, t);\r\n        },\r\n    \r\n        gg = function (a, b, c, d, x, s, t) {\r\n            return cmn((b & d) | (c & (~d)), a, b, x, s, t);\r\n        },\r\n    \r\n        hh = function (a, b, c, d, x, s, t) {\r\n            return cmn(b ^ c ^ d, a, b, x, s, t);\r\n        },\r\n    \r\n        ii = function (a, b, c, d, x, s, t) {\r\n            return cmn(c ^ (b | (~d)), a, b, x, s, t);\r\n        },\r\n    \r\n        md5cycle = function (x, k) {\r\n            var a = x[0],\r\n                b = x[1],\r\n                c = x[2],\r\n                d = x[3];\r\n    \r\n            a = ff(a, b, c, d, k[0], 7, -680876936);\r\n            d = ff(d, a, b, c, k[1], 12, -389564586);\r\n            c = ff(c, d, a, b, k[2], 17, 606105819);\r\n            b = ff(b, c, d, a, k[3], 22, -1044525330);\r\n            a = ff(a, b, c, d, k[4], 7, -176418897);\r\n            d = ff(d, a, b, c, k[5], 12, 1200080426);\r\n            c = ff(c, d, a, b, k[6], 17, -1473231341);\r\n            b = ff(b, c, d, a, k[7], 22, -45705983);\r\n            a = ff(a, b, c, d, k[8], 7, 1770035416);\r\n            d = ff(d, a, b, c, k[9], 12, -1958414417);\r\n            c = ff(c, d, a, b, k[10], 17, -42063);\r\n            b = ff(b, c, d, a, k[11], 22, -1990404162);\r\n            a = ff(a, b, c, d, k[12], 7, 1804603682);\r\n            d = ff(d, a, b, c, k[13], 12, -40341101);\r\n            c = ff(c, d, a, b, k[14], 17, -1502002290);\r\n            b = ff(b, c, d, a, k[15], 22, 1236535329);\r\n    \r\n            a = gg(a, b, c, d, k[1], 5, -165796510);\r\n            d = gg(d, a, b, c, k[6], 9, -1069501632);\r\n            c = gg(c, d, a, b, k[11], 14, 643717713);\r\n            b = gg(b, c, d, a, k[0], 20, -373897302);\r\n            a = gg(a, b, c, d, k[5], 5, -701558691);\r\n            d = gg(d, a, b, c, k[10], 9, 38016083);\r\n            c = gg(c, d, a, b, k[15], 14, -660478335);\r\n            b = gg(b, c, d, a, k[4], 20, -405537848);\r\n            a = gg(a, b, c, d, k[9], 5, 568446438);\r\n            d = gg(d, a, b, c, k[14], 9, -1019803690);\r\n            c = gg(c, d, a, b, k[3], 14, -187363961);\r\n            b = gg(b, c, d, a, k[8], 20, 1163531501);\r\n            a = gg(a, b, c, d, k[13], 5, -1444681467);\r\n            d = gg(d, a, b, c, k[2], 9, -51403784);\r\n            c = gg(c, d, a, b, k[7], 14, 1735328473);\r\n            b = gg(b, c, d, a, k[12], 20, -1926607734);\r\n    \r\n            a = hh(a, b, c, d, k[5], 4, -378558);\r\n            d = hh(d, a, b, c, k[8], 11, -2022574463);\r\n            c = hh(c, d, a, b, k[11], 16, 1839030562);\r\n            b = hh(b, c, d, a, k[14], 23, -35309556);\r\n            a = hh(a, b, c, d, k[1], 4, -1530992060);\r\n            d = hh(d, a, b, c, k[4], 11, 1272893353);\r\n            c = hh(c, d, a, b, k[7], 16, -155497632);\r\n            b = hh(b, c, d, a, k[10], 23, -1094730640);\r\n            a = hh(a, b, c, d, k[13], 4, 681279174);\r\n            d = hh(d, a, b, c, k[0], 11, -358537222);\r\n            c = hh(c, d, a, b, k[3], 16, -722521979);\r\n            b = hh(b, c, d, a, k[6], 23, 76029189);\r\n            a = hh(a, b, c, d, k[9], 4, -640364487);\r\n            d = hh(d, a, b, c, k[12], 11, -421815835);\r\n            c = hh(c, d, a, b, k[15], 16, 530742520);\r\n            b = hh(b, c, d, a, k[2], 23, -995338651);\r\n    \r\n            a = ii(a, b, c, d, k[0], 6, -198630844);\r\n            d = ii(d, a, b, c, k[7], 10, 1126891415);\r\n            c = ii(c, d, a, b, k[14], 15, -1416354905);\r\n            b = ii(b, c, d, a, k[5], 21, -57434055);\r\n            a = ii(a, b, c, d, k[12], 6, 1700485571);\r\n            d = ii(d, a, b, c, k[3], 10, -1894986606);\r\n            c = ii(c, d, a, b, k[10], 15, -1051523);\r\n            b = ii(b, c, d, a, k[1], 21, -2054922799);\r\n            a = ii(a, b, c, d, k[8], 6, 1873313359);\r\n            d = ii(d, a, b, c, k[15], 10, -30611744);\r\n            c = ii(c, d, a, b, k[6], 15, -1560198380);\r\n            b = ii(b, c, d, a, k[13], 21, 1309151649);\r\n            a = ii(a, b, c, d, k[4], 6, -145523070);\r\n            d = ii(d, a, b, c, k[11], 10, -1120210379);\r\n            c = ii(c, d, a, b, k[2], 15, 718787259);\r\n            b = ii(b, c, d, a, k[9], 21, -343485551);\r\n    \r\n            x[0] = add32(a, x[0]);\r\n            x[1] = add32(b, x[1]);\r\n            x[2] = add32(c, x[2]);\r\n            x[3] = add32(d, x[3]);\r\n        },\r\n    \r\n        /* there needs to be support for Unicode here,\r\n           * unless we pretend that we can redefine the MD-5\r\n           * algorithm for multi-byte characters (perhaps\r\n           * by adding every four 16-bit characters and\r\n           * shortening the sum to 32 bits). Otherwise\r\n           * I suggest performing MD-5 as if every character\r\n           * was two bytes--e.g., 0040 0025 = @%--but then\r\n           * how will an ordinary MD-5 sum be matched?\r\n           * There is no way to standardize text to something\r\n           * like UTF-8 before transformation; speed cost is\r\n           * utterly prohibitive. The JavaScript standard\r\n           * itself needs to look at this: it should start\r\n           * providing access to strings as preformed UTF-8\r\n           * 8-bit unsigned value arrays.\r\n           */\r\n        md5blk = function (s) {\r\n            var md5blks = [],\r\n                i; /* Andy King said do it this way. */\r\n    \r\n            for (i = 0; i < 64; i += 4) {\r\n                md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);\r\n            }\r\n            return md5blks;\r\n        },\r\n    \r\n        md5blk_array = function (a) {\r\n            var md5blks = [],\r\n                i; /* Andy King said do it this way. */\r\n    \r\n            for (i = 0; i < 64; i += 4) {\r\n                md5blks[i >> 2] = a[i] + (a[i + 1] << 8) + (a[i + 2] << 16) + (a[i + 3] << 24);\r\n            }\r\n            return md5blks;\r\n        },\r\n    \r\n        md51 = function (s) {\r\n            var n = s.length,\r\n                state = [1732584193, -271733879, -1732584194, 271733878],\r\n                i,\r\n                length,\r\n                tail,\r\n                tmp,\r\n                lo,\r\n                hi;\r\n    \r\n            for (i = 64; i <= n; i += 64) {\r\n                md5cycle(state, md5blk(s.substring(i - 64, i)));\r\n            }\r\n            s = s.substring(i - 64);\r\n            length = s.length;\r\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\r\n            for (i = 0; i < length; i += 1) {\r\n                tail[i >> 2] |= s.charCodeAt(i) << ((i % 4) << 3);\r\n            }\r\n            tail[i >> 2] |= 0x80 << ((i % 4) << 3);\r\n            if (i > 55) {\r\n                md5cycle(state, tail);\r\n                for (i = 0; i < 16; i += 1) {\r\n                    tail[i] = 0;\r\n                }\r\n            }\r\n    \r\n            // Beware that the final length might not fit in 32 bits so we take care of that\r\n            tmp = n * 8;\r\n            tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\r\n            lo = parseInt(tmp[2], 16);\r\n            hi = parseInt(tmp[1], 16) || 0;\r\n    \r\n            tail[14] = lo;\r\n            tail[15] = hi;\r\n    \r\n            md5cycle(state, tail);\r\n            return state;\r\n        },\r\n    \r\n        md51_array = function (a) {\r\n            var n = a.length,\r\n                state = [1732584193, -271733879, -1732584194, 271733878],\r\n                i,\r\n                length,\r\n                tail,\r\n                tmp,\r\n                lo,\r\n                hi;\r\n    \r\n            for (i = 64; i <= n; i += 64) {\r\n                md5cycle(state, md5blk_array(a.subarray(i - 64, i)));\r\n            }\r\n    \r\n            // Not sure if it is a bug, however IE10 will always produce a sub array of length 1\r\n            // containing the last element of the parent array if the sub array specified starts\r\n            // beyond the length of the parent array - weird.\r\n            // https://connect.microsoft.com/IE/feedback/details/771452/typed-array-subarray-issue\r\n            a = (i - 64) < n ? a.subarray(i - 64) : new Uint8Array(0);\r\n    \r\n            length = a.length;\r\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\r\n            for (i = 0; i < length; i += 1) {\r\n                tail[i >> 2] |= a[i] << ((i % 4) << 3);\r\n            }\r\n    \r\n            tail[i >> 2] |= 0x80 << ((i % 4) << 3);\r\n            if (i > 55) {\r\n                md5cycle(state, tail);\r\n                for (i = 0; i < 16; i += 1) {\r\n                    tail[i] = 0;\r\n                }\r\n            }\r\n    \r\n            // Beware that the final length might not fit in 32 bits so we take care of that\r\n            tmp = n * 8;\r\n            tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\r\n            lo = parseInt(tmp[2], 16);\r\n            hi = parseInt(tmp[1], 16) || 0;\r\n    \r\n            tail[14] = lo;\r\n            tail[15] = hi;\r\n    \r\n            md5cycle(state, tail);\r\n    \r\n            return state;\r\n        },\r\n    \r\n        hex_chr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'],\r\n    \r\n        rhex = function (n) {\r\n            var s = '',\r\n                j;\r\n            for (j = 0; j < 4; j += 1) {\r\n                s += hex_chr[(n >> (j * 8 + 4)) & 0x0F] + hex_chr[(n >> (j * 8)) & 0x0F];\r\n            }\r\n            return s;\r\n        },\r\n    \r\n        hex = function (x) {\r\n            var i;\r\n            for (i = 0; i < x.length; i += 1) {\r\n                x[i] = rhex(x[i]);\r\n            }\r\n            return x.join('');\r\n        },\r\n    \r\n        md5 = function (s) {\r\n            return hex(md51(s));\r\n        },\r\n    \r\n    \r\n    \r\n        ////////////////////////////////////////////////////////////////////////////\r\n    \r\n        /**\r\n         * SparkMD5 OOP implementation.\r\n         *\r\n         * Use this class to perform an incremental md5, otherwise use the\r\n         * static methods instead.\r\n         */\r\n        SparkMD5 = function () {\r\n            // call reset to init the instance\r\n            this.reset();\r\n        };\r\n    \r\n    \r\n        // In some cases the fast add32 function cannot be used..\r\n        if (md5('hello') !== '5d41402abc4b2a76b9719d911017c592') {\r\n            add32 = function (x, y) {\r\n                var lsw = (x & 0xFFFF) + (y & 0xFFFF),\r\n                    msw = (x >> 16) + (y >> 16) + (lsw >> 16);\r\n                return (msw << 16) | (lsw & 0xFFFF);\r\n            };\r\n        }\r\n    \r\n    \r\n        /**\r\n         * Appends a string.\r\n         * A conversion will be applied if an utf8 string is detected.\r\n         *\r\n         * @param {String} str The string to be appended\r\n         *\r\n         * @return {SparkMD5} The instance itself\r\n         */\r\n        SparkMD5.prototype.append = function (str) {\r\n            // converts the string to utf8 bytes if necessary\r\n            if (/[\\u0080-\\uFFFF]/.test(str)) {\r\n                str = unescape(encodeURIComponent(str));\r\n            }\r\n    \r\n            // then append as binary\r\n            this.appendBinary(str);\r\n    \r\n            return this;\r\n        };\r\n    \r\n        /**\r\n         * Appends a binary string.\r\n         *\r\n         * @param {String} contents The binary string to be appended\r\n         *\r\n         * @return {SparkMD5} The instance itself\r\n         */\r\n        SparkMD5.prototype.appendBinary = function (contents) {\r\n            this._buff += contents;\r\n            this._length += contents.length;\r\n    \r\n            var length = this._buff.length,\r\n                i;\r\n    \r\n            for (i = 64; i <= length; i += 64) {\r\n                md5cycle(this._state, md5blk(this._buff.substring(i - 64, i)));\r\n            }\r\n    \r\n            this._buff = this._buff.substr(i - 64);\r\n    \r\n            return this;\r\n        };\r\n    \r\n        /**\r\n         * Finishes the incremental computation, reseting the internal state and\r\n         * returning the result.\r\n         * Use the raw parameter to obtain the raw result instead of the hex one.\r\n         *\r\n         * @param {Boolean} raw True to get the raw result, false to get the hex result\r\n         *\r\n         * @return {String|Array} The result\r\n         */\r\n        SparkMD5.prototype.end = function (raw) {\r\n            var buff = this._buff,\r\n                length = buff.length,\r\n                i,\r\n                tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n                ret;\r\n    \r\n            for (i = 0; i < length; i += 1) {\r\n                tail[i >> 2] |= buff.charCodeAt(i) << ((i % 4) << 3);\r\n            }\r\n    \r\n            this._finish(tail, length);\r\n            ret = !!raw ? this._state : hex(this._state);\r\n    \r\n            this.reset();\r\n    \r\n            return ret;\r\n        };\r\n    \r\n        /**\r\n         * Finish the final calculation based on the tail.\r\n         *\r\n         * @param {Array}  tail   The tail (will be modified)\r\n         * @param {Number} length The length of the remaining buffer\r\n         */\r\n        SparkMD5.prototype._finish = function (tail, length) {\r\n            var i = length,\r\n                tmp,\r\n                lo,\r\n                hi;\r\n    \r\n            tail[i >> 2] |= 0x80 << ((i % 4) << 3);\r\n            if (i > 55) {\r\n                md5cycle(this._state, tail);\r\n                for (i = 0; i < 16; i += 1) {\r\n                    tail[i] = 0;\r\n                }\r\n            }\r\n    \r\n            // Do the final computation based on the tail and length\r\n            // Beware that the final length may not fit in 32 bits so we take care of that\r\n            tmp = this._length * 8;\r\n            tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\r\n            lo = parseInt(tmp[2], 16);\r\n            hi = parseInt(tmp[1], 16) || 0;\r\n    \r\n            tail[14] = lo;\r\n            tail[15] = hi;\r\n            md5cycle(this._state, tail);\r\n        };\r\n    \r\n        /**\r\n         * Resets the internal state of the computation.\r\n         *\r\n         * @return {SparkMD5} The instance itself\r\n         */\r\n        SparkMD5.prototype.reset = function () {\r\n            this._buff = \"\";\r\n            this._length = 0;\r\n            this._state = [1732584193, -271733879, -1732584194, 271733878];\r\n    \r\n            return this;\r\n        };\r\n    \r\n        /**\r\n         * Releases memory used by the incremental buffer and other aditional\r\n         * resources. If you plan to use the instance again, use reset instead.\r\n         */\r\n        SparkMD5.prototype.destroy = function () {\r\n            delete this._state;\r\n            delete this._buff;\r\n            delete this._length;\r\n        };\r\n    \r\n    \r\n        /**\r\n         * Performs the md5 hash on a string.\r\n         * A conversion will be applied if utf8 string is detected.\r\n         *\r\n         * @param {String}  str The string\r\n         * @param {Boolean} raw True to get the raw result, false to get the hex result\r\n         *\r\n         * @return {String|Array} The result\r\n         */\r\n        SparkMD5.hash = function (str, raw) {\r\n            // converts the string to utf8 bytes if necessary\r\n            if (/[\\u0080-\\uFFFF]/.test(str)) {\r\n                str = unescape(encodeURIComponent(str));\r\n            }\r\n    \r\n            var hash = md51(str);\r\n    \r\n            return !!raw ? hash : hex(hash);\r\n        };\r\n    \r\n        /**\r\n         * Performs the md5 hash on a binary string.\r\n         *\r\n         * @param {String}  content The binary string\r\n         * @param {Boolean} raw     True to get the raw result, false to get the hex result\r\n         *\r\n         * @return {String|Array} The result\r\n         */\r\n        SparkMD5.hashBinary = function (content, raw) {\r\n            var hash = md51(content);\r\n    \r\n            return !!raw ? hash : hex(hash);\r\n        };\r\n    \r\n        /**\r\n         * SparkMD5 OOP implementation for array buffers.\r\n         *\r\n         * Use this class to perform an incremental md5 ONLY for array buffers.\r\n         */\r\n        SparkMD5.ArrayBuffer = function () {\r\n            // call reset to init the instance\r\n            this.reset();\r\n        };\r\n    \r\n        ////////////////////////////////////////////////////////////////////////////\r\n    \r\n        /**\r\n         * Appends an array buffer.\r\n         *\r\n         * @param {ArrayBuffer} arr The array to be appended\r\n         *\r\n         * @return {SparkMD5.ArrayBuffer} The instance itself\r\n         */\r\n        SparkMD5.ArrayBuffer.prototype.append = function (arr) {\r\n            // TODO: we could avoid the concatenation here but the algorithm would be more complex\r\n            //       if you find yourself needing extra performance, please make a PR.\r\n            var buff = this._concatArrayBuffer(this._buff, arr),\r\n                length = buff.length,\r\n                i;\r\n    \r\n            this._length += arr.byteLength;\r\n    \r\n            for (i = 64; i <= length; i += 64) {\r\n                md5cycle(this._state, md5blk_array(buff.subarray(i - 64, i)));\r\n            }\r\n    \r\n            // Avoids IE10 weirdness (documented above)\r\n            this._buff = (i - 64) < length ? buff.subarray(i - 64) : new Uint8Array(0);\r\n    \r\n            return this;\r\n        };\r\n    \r\n        /**\r\n         * Finishes the incremental computation, reseting the internal state and\r\n         * returning the result.\r\n         * Use the raw parameter to obtain the raw result instead of the hex one.\r\n         *\r\n         * @param {Boolean} raw True to get the raw result, false to get the hex result\r\n         *\r\n         * @return {String|Array} The result\r\n         */\r\n        SparkMD5.ArrayBuffer.prototype.end = function (raw) {\r\n            var buff = this._buff,\r\n                length = buff.length,\r\n                tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n                i,\r\n                ret;\r\n    \r\n            for (i = 0; i < length; i += 1) {\r\n                tail[i >> 2] |= buff[i] << ((i % 4) << 3);\r\n            }\r\n    \r\n            this._finish(tail, length);\r\n            ret = !!raw ? this._state : hex(this._state);\r\n    \r\n            this.reset();\r\n    \r\n            return ret;\r\n        };\r\n    \r\n        SparkMD5.ArrayBuffer.prototype._finish = SparkMD5.prototype._finish;\r\n    \r\n        /**\r\n         * Resets the internal state of the computation.\r\n         *\r\n         * @return {SparkMD5.ArrayBuffer} The instance itself\r\n         */\r\n        SparkMD5.ArrayBuffer.prototype.reset = function () {\r\n            this._buff = new Uint8Array(0);\r\n            this._length = 0;\r\n            this._state = [1732584193, -271733879, -1732584194, 271733878];\r\n    \r\n            return this;\r\n        };\r\n    \r\n        /**\r\n         * Releases memory used by the incremental buffer and other aditional\r\n         * resources. If you plan to use the instance again, use reset instead.\r\n         */\r\n        SparkMD5.ArrayBuffer.prototype.destroy = SparkMD5.prototype.destroy;\r\n    \r\n        /**\r\n         * Concats two array buffers, returning a new one.\r\n         *\r\n         * @param  {ArrayBuffer} first  The first array buffer\r\n         * @param  {ArrayBuffer} second The second array buffer\r\n         *\r\n         * @return {ArrayBuffer} The new array buffer\r\n         */\r\n        SparkMD5.ArrayBuffer.prototype._concatArrayBuffer = function (first, second) {\r\n            var firstLength = first.length,\r\n                result = new Uint8Array(firstLength + second.byteLength);\r\n    \r\n            result.set(first);\r\n            result.set(new Uint8Array(second), firstLength);\r\n    \r\n            return result;\r\n        };\r\n    \r\n        /**\r\n         * Performs the md5 hash on an array buffer.\r\n         *\r\n         * @param {ArrayBuffer} arr The array buffer\r\n         * @param {Boolean}     raw True to get the raw result, false to get the hex result\r\n         *\r\n         * @return {String|Array} The result\r\n         */\r\n        SparkMD5.ArrayBuffer.hash = function (arr, raw) {\r\n            var hash = md51_array(new Uint8Array(arr));\r\n    \r\n            return !!raw ? hash : hex(hash);\r\n        };\r\n        \r\n        return FlashRuntime.register( 'Md5', {\r\n            init: function() {\r\n                // do nothing.\r\n            },\r\n    \r\n            loadFromBlob: function( file ) {\r\n                var blob = file.getSource(),\r\n                    chunkSize = 2 * 1024 * 1024,\r\n                    chunks = Math.ceil( blob.size / chunkSize ),\r\n                    chunk = 0,\r\n                    owner = this.owner,\r\n                    spark = new SparkMD5.ArrayBuffer(),\r\n                    me = this,\r\n                    blobSlice = blob.mozSlice || blob.webkitSlice || blob.slice,\r\n                    loadNext, fr;\r\n    \r\n                fr = new FileReader();\r\n    \r\n                loadNext = function() {\r\n                    var start, end;\r\n    \r\n                    start = chunk * chunkSize;\r\n                    end = Math.min( start + chunkSize, blob.size );\r\n    \r\n                    fr.onload = function( e ) {\r\n                        spark.append( e.target.result );\r\n                        owner.trigger( 'progress', {\r\n                            total: file.size,\r\n                            loaded: end\r\n                        });\r\n                    };\r\n    \r\n                    fr.onloadend = function() {\r\n                        fr.onloadend = fr.onload = null;\r\n    \r\n                        if ( ++chunk < chunks ) {\r\n                            setTimeout( loadNext, 1 );\r\n                        } else {\r\n                            setTimeout(function(){\r\n                                owner.trigger('load');\r\n                                me.result = spark.end();\r\n                                loadNext = file = blob = spark = null;\r\n                                owner.trigger('complete');\r\n                            }, 50 );\r\n                        }\r\n                    };\r\n    \r\n                    fr.readAsArrayBuffer( blobSlice.call( blob, start, end ) );\r\n                };\r\n    \r\n                loadNext();\r\n            },\r\n    \r\n            getResult: function() {\r\n                return this.result;\r\n            }\r\n        });\r\n    });\r\n    /**\r\n     * @fileOverview FlashRuntime\r\n     */\r\n    define('runtime/flash/runtime',[\r\n        'base',\r\n        'runtime/runtime',\r\n        'runtime/compbase'\r\n    ], function( Base, Runtime, CompBase ) {\r\n    \r\n        var $ = Base.$,\r\n            type = 'flash',\r\n            components = {};\r\n    \r\n    \r\n        function getFlashVersion() {\r\n            var version;\r\n    \r\n            try {\r\n                version = navigator.plugins[ 'Shockwave Flash' ];\r\n                version = version.description;\r\n            } catch ( ex ) {\r\n                try {\r\n                    version = new ActiveXObject('ShockwaveFlash.ShockwaveFlash')\r\n                            .GetVariable('$version');\r\n                } catch ( ex2 ) {\r\n                    version = '0.0';\r\n                }\r\n            }\r\n            version = version.match( /\\d+/g );\r\n            return parseFloat( version[ 0 ] + '.' + version[ 1 ], 10 );\r\n        }\r\n    \r\n        function FlashRuntime() {\r\n            var pool = {},\r\n                clients = {},\r\n                destroy = this.destroy,\r\n                me = this,\r\n                jsreciver = Base.guid('webuploader_');\r\n    \r\n            Runtime.apply( me, arguments );\r\n            me.type = type;\r\n    \r\n    \r\n            // 这个方法的调用者，实际上是RuntimeClient\r\n            me.exec = function( comp, fn/*, args...*/ ) {\r\n                var client = this,\r\n                    uid = client.uid,\r\n                    args = Base.slice( arguments, 2 ),\r\n                    instance;\r\n    \r\n                clients[ uid ] = client;\r\n    \r\n                if ( components[ comp ] ) {\r\n                    if ( !pool[ uid ] ) {\r\n                        pool[ uid ] = new components[ comp ]( client, me );\r\n                    }\r\n    \r\n                    instance = pool[ uid ];\r\n    \r\n                    if ( instance[ fn ] ) {\r\n                        return instance[ fn ].apply( instance, args );\r\n                    }\r\n                }\r\n    \r\n                return me.flashExec.apply( client, arguments );\r\n            };\r\n    \r\n            function handler( evt, obj ) {\r\n                var type = evt.type || evt,\r\n                    parts, uid;\r\n    \r\n                parts = type.split('::');\r\n                uid = parts[ 0 ];\r\n                type = parts[ 1 ];\r\n    \r\n                // console.log.apply( console, arguments );\r\n    \r\n                if ( type === 'Ready' && uid === me.uid ) {\r\n                    me.trigger('ready');\r\n                } else if ( clients[ uid ] ) {\r\n                    clients[ uid ].trigger( type.toLowerCase(), evt, obj );\r\n                }\r\n    \r\n                // Base.log( evt, obj );\r\n            }\r\n    \r\n            // flash的接受器。\r\n            window[ jsreciver ] = function() {\r\n                var args = arguments;\r\n    \r\n                // 为了能捕获得到。\r\n                setTimeout(function() {\r\n                    handler.apply( null, args );\r\n                }, 1 );\r\n            };\r\n    \r\n            this.jsreciver = jsreciver;\r\n    \r\n            this.destroy = function() {\r\n                // @todo 删除池子中的所有实例\r\n                return destroy && destroy.apply( this, arguments );\r\n            };\r\n    \r\n            this.flashExec = function( comp, fn ) {\r\n                var flash = me.getFlash(),\r\n                    args = Base.slice( arguments, 2 );\r\n    \r\n                return flash.exec( this.uid, comp, fn, args );\r\n            };\r\n    \r\n            // @todo\r\n        }\r\n    \r\n        Base.inherits( Runtime, {\r\n            constructor: FlashRuntime,\r\n    \r\n            init: function() {\r\n                var container = this.getContainer(),\r\n                    opts = this.options,\r\n                    html;\r\n    \r\n                // if not the minimal height, shims are not initialized\r\n                // in older browsers (e.g FF3.6, IE6,7,8, Safari 4.0,5.0, etc)\r\n                container.css({\r\n                    position: 'absolute',\r\n                    top: '-8px',\r\n                    left: '-8px',\r\n                    width: '9px',\r\n                    height: '9px',\r\n                    overflow: 'hidden'\r\n                });\r\n    \r\n                // insert flash object\r\n                html = '<object id=\"' + this.uid + '\" type=\"application/' +\r\n                        'x-shockwave-flash\" data=\"' +  opts.swf + '\" ';\r\n    \r\n                if ( Base.browser.ie ) {\r\n                    html += 'classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" ';\r\n                }\r\n    \r\n                html += 'width=\"100%\" height=\"100%\" style=\"outline:0\">'  +\r\n                    '<param name=\"movie\" value=\"' + opts.swf + '\" />' +\r\n                    '<param name=\"flashvars\" value=\"uid=' + this.uid +\r\n                    '&jsreciver=' + this.jsreciver + '\" />' +\r\n                    '<param name=\"wmode\" value=\"transparent\" />' +\r\n                    '<param name=\"allowscriptaccess\" value=\"always\" />' +\r\n                '</object>';\r\n    \r\n                container.html( html );\r\n            },\r\n    \r\n            getFlash: function() {\r\n                if ( this._flash ) {\r\n                    return this._flash;\r\n                }\r\n    \r\n                this._flash = $( '#' + this.uid ).get( 0 );\r\n                return this._flash;\r\n            }\r\n    \r\n        });\r\n    \r\n        FlashRuntime.register = function( name, component ) {\r\n            component = components[ name ] = Base.inherits( CompBase, $.extend({\r\n    \r\n                // @todo fix this later\r\n                flashExec: function() {\r\n                    var owner = this.owner,\r\n                        runtime = this.getRuntime();\r\n    \r\n                    return runtime.flashExec.apply( owner, arguments );\r\n                }\r\n            }, component ) );\r\n    \r\n            return component;\r\n        };\r\n    \r\n        if ( getFlashVersion() >= 11.4 ) {\r\n            Runtime.addRuntime( type, FlashRuntime );\r\n        }\r\n    \r\n        return FlashRuntime;\r\n    });\r\n    /**\r\n     * @fileOverview FilePicker\r\n     */\r\n    define('runtime/flash/filepicker',[\r\n        'base',\r\n        'runtime/flash/runtime'\r\n    ], function( Base, FlashRuntime ) {\r\n        var $ = Base.$;\r\n    \r\n        return FlashRuntime.register( 'FilePicker', {\r\n            init: function( opts ) {\r\n                var copy = $.extend({}, opts ),\r\n                    len, i;\r\n    \r\n                // 修复Flash再没有设置title的情况下无法弹出flash文件选择框的bug.\r\n                len = copy.accept && copy.accept.length;\r\n                for (  i = 0; i < len; i++ ) {\r\n                    if ( !copy.accept[ i ].title ) {\r\n                        copy.accept[ i ].title = 'Files';\r\n                    }\r\n                }\r\n    \r\n                delete copy.button;\r\n                delete copy.id;\r\n                delete copy.container;\r\n    \r\n                this.flashExec( 'FilePicker', 'init', copy );\r\n            },\r\n    \r\n            destroy: function() {\r\n                this.flashExec( 'FilePicker', 'destroy' );\r\n            }\r\n        });\r\n    });\r\n    /**\r\n     * @fileOverview 图片压缩\r\n     */\r\n    define('runtime/flash/image',[\r\n        'runtime/flash/runtime'\r\n    ], function( FlashRuntime ) {\r\n    \r\n        return FlashRuntime.register( 'Image', {\r\n            // init: function( options ) {\r\n            //     var owner = this.owner;\r\n    \r\n            //     this.flashExec( 'Image', 'init', options );\r\n            //     owner.on( 'load', function() {\r\n            //         debugger;\r\n            //     });\r\n            // },\r\n    \r\n            loadFromBlob: function( blob ) {\r\n                var owner = this.owner;\r\n    \r\n                owner.info() && this.flashExec( 'Image', 'info', owner.info() );\r\n                owner.meta() && this.flashExec( 'Image', 'meta', owner.meta() );\r\n    \r\n                this.flashExec( 'Image', 'loadFromBlob', blob.uid );\r\n            }\r\n        });\r\n    });\r\n    /**\r\n     * @fileOverview  Transport flash实现\r\n     */\r\n    define('runtime/flash/transport',[\r\n        'base',\r\n        'runtime/flash/runtime',\r\n        'runtime/client'\r\n    ], function( Base, FlashRuntime, RuntimeClient ) {\r\n        var $ = Base.$;\r\n    \r\n        return FlashRuntime.register( 'Transport', {\r\n            init: function() {\r\n                this._status = 0;\r\n                this._response = null;\r\n                this._responseJson = null;\r\n            },\r\n    \r\n            send: function() {\r\n                var owner = this.owner,\r\n                    opts = this.options,\r\n                    xhr = this._initAjax(),\r\n                    blob = owner._blob,\r\n                    server = opts.server,\r\n                    binary;\r\n    \r\n                xhr.connectRuntime( blob.ruid );\r\n    \r\n                if ( opts.sendAsBinary ) {\r\n                    server += (/\\?/.test( server ) ? '&' : '?') +\r\n                            $.param( owner._formData );\r\n    \r\n                    binary = blob.uid;\r\n                } else {\r\n                    $.each( owner._formData, function( k, v ) {\r\n                        xhr.exec( 'append', k, v );\r\n                    });\r\n    \r\n                    xhr.exec( 'appendBlob', opts.fileVal, blob.uid,\r\n                            opts.filename || owner._formData.name || '' );\r\n                }\r\n    \r\n                this._setRequestHeader( xhr, opts.headers );\r\n                xhr.exec( 'send', {\r\n                    method: opts.method,\r\n                    url: server,\r\n                    forceURLStream: opts.forceURLStream,\r\n                    mimeType: 'application/octet-stream'\r\n                }, binary );\r\n            },\r\n    \r\n            getStatus: function() {\r\n                return this._status;\r\n            },\r\n    \r\n            getResponse: function() {\r\n                return this._response || '';\r\n            },\r\n    \r\n            getResponseAsJson: function() {\r\n                return this._responseJson;\r\n            },\r\n    \r\n            abort: function() {\r\n                var xhr = this._xhr;\r\n    \r\n                if ( xhr ) {\r\n                    xhr.exec('abort');\r\n                    xhr.destroy();\r\n                    this._xhr = xhr = null;\r\n                }\r\n            },\r\n    \r\n            destroy: function() {\r\n                this.abort();\r\n            },\r\n    \r\n            _initAjax: function() {\r\n                var me = this,\r\n                    xhr = new RuntimeClient('XMLHttpRequest');\r\n    \r\n                xhr.on( 'uploadprogress progress', function( e ) {\r\n                    var percent = e.loaded / e.total;\r\n                    percent = Math.min( 1, Math.max( 0, percent ) );\r\n                    return me.trigger( 'progress', percent );\r\n                });\r\n    \r\n                xhr.on( 'load', function() {\r\n                    var status = xhr.exec('getStatus'),\r\n                        readBody = false,\r\n                        err = '',\r\n                        p;\r\n    \r\n                    xhr.off();\r\n                    me._xhr = null;\r\n    \r\n                    if ( status >= 200 && status < 300 ) {\r\n                        readBody = true;\r\n                    } else if ( status >= 500 && status < 600 ) {\r\n                        readBody = true;\r\n                        err = 'server';\r\n                    } else {\r\n                        err = 'http';\r\n                    }\r\n    \r\n                    if ( readBody ) {\r\n                        me._response = xhr.exec('getResponse');\r\n                        me._response = decodeURIComponent( me._response );\r\n    \r\n                        // flash 处理可能存在 bug, 没辙只能靠 js 了\r\n                        // try {\r\n                        //     me._responseJson = xhr.exec('getResponseAsJson');\r\n                        // } catch ( error ) {\r\n    \r\n                        p = function( s ) {\r\n                            try {\r\n                                if (window.JSON && window.JSON.parse) {\r\n                                    return JSON.parse(s);\r\n                                }\r\n    \r\n                                return new Function('return ' + s).call();\r\n                            } catch ( err ) {\r\n                                return {};\r\n                            }\r\n                        };\r\n                        me._responseJson  = me._response ? p(me._response) : {};\r\n    \r\n                        // }\r\n                    }\r\n    \r\n                    xhr.destroy();\r\n                    xhr = null;\r\n    \r\n                    return err ? me.trigger( 'error', err ) : me.trigger('load');\r\n                });\r\n    \r\n                xhr.on( 'error', function() {\r\n                    xhr.off();\r\n                    me._xhr = null;\r\n                    me.trigger( 'error', 'http' );\r\n                });\r\n    \r\n                me._xhr = xhr;\r\n                return xhr;\r\n            },\r\n    \r\n            _setRequestHeader: function( xhr, headers ) {\r\n                $.each( headers, function( key, val ) {\r\n                    xhr.exec( 'setRequestHeader', key, val );\r\n                });\r\n            }\r\n        });\r\n    });\r\n    \r\n    /**\r\n     * @fileOverview Blob Html实现\r\n     */\r\n    define('runtime/flash/blob',[\r\n        'runtime/flash/runtime',\r\n        'lib/blob'\r\n    ], function( FlashRuntime, Blob ) {\r\n    \r\n        return FlashRuntime.register( 'Blob', {\r\n            slice: function( start, end ) {\r\n                var blob = this.flashExec( 'Blob', 'slice', start, end );\r\n    \r\n                return new Blob( this.getRuid(), blob );\r\n            }\r\n        });\r\n    });\r\n    /**\r\n     * @fileOverview  Md5 flash实现\r\n     */\r\n    define('runtime/flash/md5',[\r\n        'runtime/flash/runtime'\r\n    ], function( FlashRuntime ) {\r\n        \r\n        return FlashRuntime.register( 'Md5', {\r\n            init: function() {\r\n                // do nothing.\r\n            },\r\n    \r\n            loadFromBlob: function( blob ) {\r\n                return this.flashExec( 'Md5', 'loadFromBlob', blob.uid );\r\n            }\r\n        });\r\n    });\r\n    /**\r\n     * @fileOverview 完全版本。\r\n     */\r\n    define('preset/all',[\r\n        'base',\r\n    \r\n        // widgets\r\n        'widgets/filednd',\r\n        'widgets/filepaste',\r\n        'widgets/filepicker',\r\n        'widgets/image',\r\n        'widgets/queue',\r\n        'widgets/runtime',\r\n        'widgets/upload',\r\n        'widgets/validator',\r\n        'widgets/md5',\r\n    \r\n        // runtimes\r\n        // html5\r\n        'runtime/html5/blob',\r\n        'runtime/html5/dnd',\r\n        'runtime/html5/filepaste',\r\n        'runtime/html5/filepicker',\r\n        'runtime/html5/imagemeta/exif',\r\n        'runtime/html5/androidpatch',\r\n        'runtime/html5/image',\r\n        'runtime/html5/transport',\r\n        'runtime/html5/md5',\r\n    \r\n        // flash\r\n        'runtime/flash/filepicker',\r\n        'runtime/flash/image',\r\n        'runtime/flash/transport',\r\n        'runtime/flash/blob',\r\n        'runtime/flash/md5'\r\n    ], function( Base ) {\r\n        return Base;\r\n    });\r\n    /**\r\n     * @fileOverview 日志组件，主要用来收集错误信息，可以帮助 webuploader 更好的定位问题和发展。\r\n     *\r\n     * 如果您不想要启用此功能，请在打包的时候去掉 log 模块。\r\n     *\r\n     * 或者可以在初始化的时候通过 options.disableWidgets 属性禁用。\r\n     *\r\n     * 如：\r\n     * WebUploader.create({\r\n     *     ...\r\n     *\r\n     *     disableWidgets: 'log',\r\n     *\r\n     *     ...\r\n     * })\r\n     */\r\n    define('widgets/log',[\r\n        'base',\r\n        'uploader',\r\n        'widgets/widget'\r\n    ], function( Base, Uploader ) {\r\n        var $ = Base.$,\r\n            logUrl = ' http://static.tieba.baidu.com/tb/pms/img/st.gif??',\r\n            product = (location.hostname || location.host || 'protected').toLowerCase(),\r\n    \r\n            // 只针对 baidu 内部产品用户做统计功能。\r\n            enable = product && /baidu/i.exec(product),\r\n            base;\r\n    \r\n        if (!enable) {\r\n            return;\r\n        }\r\n    \r\n        base = {\r\n            dv: 3,\r\n            master: 'webuploader',\r\n            online: /test/.exec(product) ? 0 : 1,\r\n            module: '',\r\n            product: product,\r\n            type: 0\r\n        };\r\n    \r\n        function send(data) {\r\n            var obj = $.extend({}, base, data),\r\n                url = logUrl.replace(/^(.*)\\?/, '$1' + $.param( obj )),\r\n                image = new Image();\r\n    \r\n            image.src = url;\r\n        }\r\n    \r\n        return Uploader.register({\r\n            name: 'log',\r\n    \r\n            init: function() {\r\n                var owner = this.owner,\r\n                    count = 0,\r\n                    size = 0;\r\n    \r\n                owner\r\n                    .on('error', function(code) {\r\n                        send({\r\n                            type: 2,\r\n                            c_error_code: code\r\n                        });\r\n                    })\r\n                    .on('uploadError', function(file, reason) {\r\n                        send({\r\n                            type: 2,\r\n                            c_error_code: 'UPLOAD_ERROR',\r\n                            c_reason: '' + reason\r\n                        });\r\n                    })\r\n                    .on('uploadComplete', function(file) {\r\n                        count++;\r\n                        size += file.size;\r\n                    }).\r\n                    on('uploadFinished', function() {\r\n                        send({\r\n                            c_count: count,\r\n                            c_size: size\r\n                        });\r\n                        count = size = 0;\r\n                    });\r\n    \r\n                send({\r\n                    c_usage: 1\r\n                });\r\n            }\r\n        });\r\n    });\r\n    /**\r\n     * @fileOverview Uploader上传类\r\n     */\r\n    define('webuploader',[\r\n        'preset/all',\r\n        'widgets/log'\r\n    ], function( preset ) {\r\n        return preset;\r\n    });\r\n    return require('webuploader');\r\n});\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy91cGxvYWQvd2VidXBsb2FkZXIuanM/ZTA0ZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9COztBQUVwQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSw4Q0FBOEMsU0FBUztBQUN2RDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7O0FBR0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGdDQUFnQztBQUNoQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMEJBQTBCLE9BQU87QUFDakM7QUFDQTs7QUFFQTtBQUNBLDBCQUEwQixhQUFhO0FBQ3ZDO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsT0FBTztBQUNqQztBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixPQUFPO0FBQ2pDO0FBQ0E7QUFDQSw0QkFBNEI7O0FBRTVCLHVEQUF1RDtBQUN2RCxxREFBcUQ7QUFDckQ7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsTUFBTTtBQUM5Qix3QkFBd0Isa0JBQWtCO0FBQzFDLHdCQUF3QixTQUFTO0FBQ2pDLHdCQUF3QixPQUFPO0FBQy9CLHdCQUF3QixNQUFNO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEMsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQSwyREFBMkQ7QUFDM0Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdFQUFnRTs7QUFFaEU7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RDtBQUN2RDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLDJCQUEyQixPQUFPO0FBQ2xDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLE9BQU87QUFDOUIsdUJBQXVCLE9BQU87QUFDOUIsdUJBQXVCLE1BQU07QUFDN0I7QUFDQSxxREFBcUQ7QUFDckQsc0RBQXNEO0FBQ3RELHlEQUF5RDtBQUN6RCw2REFBNkQ7QUFDN0Qsb0VBQW9FO0FBQ3BFLDBGQUEwRjtBQUMxRjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0MsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQ7QUFDbkQsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLE9BQU87QUFDL0Isd0JBQXdCLFNBQVM7QUFDakMsd0JBQXdCLE9BQU87QUFDL0Isd0JBQXdCLEtBQUs7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLG1DQUFtQzs7QUFFbkM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixPQUFPO0FBQy9CLHdCQUF3QixTQUFTO0FBQ2pDLHdCQUF3QixPQUFPO0FBQy9CLHdCQUF3QixLQUFLO0FBQzdCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixPQUFPO0FBQy9CLHdCQUF3QixTQUFTO0FBQ2pDLHdCQUF3QixPQUFPO0FBQy9CLHdCQUF3QixLQUFLO0FBQzdCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsaUJBQWlCOztBQUVqQjtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsT0FBTztBQUMvQix3QkFBd0IsRUFBRTtBQUMxQix3QkFBd0IsUUFBUTtBQUNoQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsT0FBTztBQUMvQix3QkFBd0IsT0FBTztBQUMvQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTs7QUFFQSxpQkFBaUIsT0FBTztBQUN4QjtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMEJBQTBCOztBQUUxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDs7O0FBR0E7QUFDQTtBQUNBLG1CQUFtQixPQUFPO0FBQzFCLG1CQUFtQixRQUFRO0FBQzNCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSw2Q0FBNkM7O0FBRTdDOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxTQUFTOztBQUVUOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7O0FBRUE7QUFDQSwwQkFBMEIsZUFBZTtBQUN6QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLHVCQUF1QixTQUFTO0FBQ2hDO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQ0FBaUM7O0FBRWpDO0FBQ0EsNkJBQTZCO0FBQzdCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsT0FBTztBQUMzQixvQkFBb0IsT0FBTztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaLDJDQUEyQztBQUMzQztBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQSx1QkFBdUIsc0RBQXNEO0FBQzdFOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCOztBQUVqQixhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixPQUFPO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsNkNBQTZDLEtBQUs7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLHNCQUFzQixTQUFTO0FBQy9CO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHNCQUFzQixTQUFTO0FBQy9CO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsbUJBQW1CLHFCQUFxQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjs7QUFFQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLFNBQVM7O0FBRVQ7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxzQkFBc0IsU0FBUztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7O0FBRUE7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSw2Q0FBNkM7O0FBRTdDOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7O0FBRWI7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLDBCQUEwQixrQkFBa0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsWUFBWTtBQUNuQywwQkFBMEIsT0FBTztBQUNqQyw4QkFBOEIsT0FBTztBQUNyQyw2QkFBNkIsUUFBUTtBQUNyQztBQUNBOztBQUVBO0FBQ0EsMEJBQTBCLE1BQU07QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsT0FBTztBQUNqQywrQkFBK0IsT0FBTztBQUN0Qyw4QkFBOEIsT0FBTztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBOztBQUVBOztBQUVBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjs7QUFFckI7O0FBRUE7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7O0FBRUE7O0FBRUE7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhOztBQUViOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsU0FBUzs7QUFFVDs7QUFFQTtBQUNBLDBCQUEwQixPQUFPO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBLDBCQUEwQixPQUFPO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDs7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGtDQUFrQzs7QUFFbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxrQ0FBa0M7QUFDbEM7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixTQUFTO0FBQzVCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYTtBQUNiOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG1CQUFtQjtBQUMxQyx1QkFBdUIsT0FBTztBQUM5QjtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsYUFBYTs7QUFFYjtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLE9BQU87QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsT0FBTztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLEtBQUs7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsS0FBSztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixPQUFPO0FBQy9CLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLE9BQU87QUFDOUIsd0JBQXdCLEtBQUs7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsNEJBQTRCLFNBQVM7QUFDckM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLFNBQVM7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsT0FBTztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx1QkFBdUIsU0FBUztBQUNoQzs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsS0FBSztBQUM1QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsYUFBYTs7QUFFYjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBUzs7QUFFVDs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsMERBQTBELFNBQVM7QUFDbkU7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxhQUFhOzs7QUFHYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsYUFBYTs7O0FBR2I7QUFDQTtBQUNBLHVCQUF1QixLQUFLO0FBQzVCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUJBQXVCLEtBQUs7QUFDNUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQSx1QkFBdUIsS0FBSztBQUM1QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwwQkFBMEIsUUFBUTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBLHVCQUF1QixLQUFLO0FBQzVCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsUUFBUTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0Q7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSx1QkFBdUIsU0FBUztBQUNoQztBQUNBO0FBQ0E7O0FBRUE7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0JBQXNCLE9BQU87QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEscURBQXFELFNBQVM7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSxrREFBa0QsK0JBQStCO0FBQ2pGOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEIsdUJBQXVCO0FBQ3ZCO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7O0FBRUEsU0FBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBLDBCQUEwQixRQUFRO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMEJBQTBCLFFBQVE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDBCQUEwQixRQUFRO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwwQkFBMEIsUUFBUTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMEJBQTBCLFFBQVE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQSwwQkFBMEIsT0FBTyxhQUFhO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwwQkFBMEIsT0FBTztBQUNqQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDBCQUEwQixPQUFPO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EscUJBQXFCOztBQUVyQjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjs7QUFFckI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHlCQUF5Qjs7O0FBR3pCLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7OztBQUdBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7O0FBRXJCOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsUUFBUTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTs7QUFFQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhOzs7QUFHYjtBQUNBO0FBQ0EsdUJBQXVCLEtBQUs7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxxQkFBcUI7O0FBRXJCO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EscUJBQXFCOztBQUVyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCOztBQUVyQjtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTs7O0FBR2I7QUFDQTtBQUNBLHVCQUF1QixPQUFPO0FBQzlCLHVCQUF1QixPQUFPO0FBQzlCLHVCQUF1QixPQUFPO0FBQzlCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUJBQXVCLE9BQU87QUFDOUIsdUJBQXVCLE9BQU87QUFDOUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx1QkFBdUIsS0FBSztBQUM1Qix1QkFBdUIsT0FBTztBQUM5QjtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQSx1QkFBdUIsS0FBSztBQUM1Qix1QkFBdUIsT0FBTztBQUM5QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVCQUF1QixLQUFLO0FBQzVCLHVCQUF1QixPQUFPO0FBQzlCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUJBQXVCLEtBQUs7QUFDNUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDLHlDQUF5QztBQUN6Qzs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLHFCQUFxQjs7QUFFckI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTs7QUFFQSxTQUFTO0FBQ1QsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMkJBQTJCO0FBQzNCOztBQUVBO0FBQ0E7QUFDQSxtQkFBbUIsT0FBTztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakI7QUFDQSxTQUFTOztBQUVUO0FBQ0Esc0JBQXNCLElBQUk7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7O0FBRUE7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUzs7O0FBR1Q7QUFDQSxzQkFBc0IsSUFBSTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCOztBQUVBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7O0FBRVQ7QUFDQSxzQkFBc0IsSUFBSTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGFBQWE7O0FBRWIsU0FBUzs7QUFFVDtBQUNBLHNCQUFzQixRQUFRO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsdUJBQXVCLFNBQVM7QUFDaEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7O0FBRUE7QUFDQSxhQUFhOztBQUViO0FBQ0E7O0FBRUE7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUzs7QUFFVDtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCOztBQUVBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsaUJBQWlCOztBQUVqQjtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBLGdEQUFnRCxTQUFTO0FBQ3pEO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7O0FBRWI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG9DQUFvQyxTQUFTO0FBQzdDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIscUJBQXFCO0FBQ3JCOztBQUVBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsMERBQTBELFNBQVM7QUFDbkU7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsZ0RBQWdELFNBQVM7QUFDekQ7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLDBEQUEwRCxTQUFTO0FBQ25FO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCOztBQUVqQjs7QUFFQSxhQUFhOzs7QUFHYjtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTs7QUFFQTtBQUNBOztBQUVBLDRCQUE0QixvQkFBb0I7QUFDaEQ7QUFDQTs7QUFFQSw4REFBOEQ7O0FBRTlEO0FBQ0EsYUFBYTs7QUFFYjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTs7QUFFQTs7QUFFQSw0QkFBNEIsb0JBQW9CO0FBQ2hEO0FBQ0E7O0FBRUE7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsb0RBQW9ELGFBQWEsS0FBSztBQUN0RSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLDRDQUE0QyxvQkFBb0I7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsd0JBQXdCLFlBQVk7QUFDcEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSw0QkFBNEIsbUJBQW1CO0FBQy9DOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsd0JBQXdCLGdCQUFnQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLFlBQVk7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0Q7QUFDdEQsa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsbUNBQW1DLFFBQVE7QUFDM0M7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsUUFBUTtBQUMzQztBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLFNBQVM7QUFDOUM7QUFDQSx5Q0FBeUMsU0FBUztBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxTQUFTO0FBQzVDLHVDQUF1QyxpQkFBaUI7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsV0FBVztBQUNoRDtBQUNBLDhDQUE4QyxZQUFZO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxpQkFBaUI7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0NBQWtDLFNBQVM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsTUFBTTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdEQUFnRDtBQUNoRDtBQUNBO0FBQ0E7O0FBRUEsc0RBQXNEO0FBQ3REOztBQUVBLCtEQUErRDtBQUMvRCxxREFBcUQ7QUFDckQ7O0FBRUE7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTs7QUFFQTtBQUNBLCtEQUErRDtBQUMvRCwwREFBMEQ7QUFDMUQsMERBQTBEO0FBQzFELHFEQUFxRDs7QUFFckQsNENBQTRDO0FBQzVDOztBQUVBLG1EQUFtRDtBQUNuRDtBQUNBO0FBQ0E7O0FBRUEscUNBQXFDO0FBQ3JDOztBQUVBO0FBQ0E7QUFDQSw2QkFBNkIsTUFBTTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHNEQUFzRDtBQUN0RDtBQUNBO0FBQ0E7O0FBRUEsMERBQTBEO0FBQzFEOztBQUVBLHFFQUFxRTtBQUNyRSwwREFBMEQ7QUFDMUQ7O0FBRUE7QUFDQSxrREFBa0Q7QUFDbEQ7QUFDQTs7QUFFQTtBQUNBLHFFQUFxRTtBQUNyRSxnRUFBZ0U7QUFDaEUsZ0VBQWdFO0FBQ2hFLHlEQUF5RDs7QUFFekQsa0RBQWtEO0FBQ2xEOztBQUVBLHdEQUF3RDtBQUN4RDtBQUNBO0FBQ0E7O0FBRUEsa0NBQWtDO0FBQ2xDOztBQUVBO0FBQ0E7QUFDQSw2QkFBNkIsT0FBTztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDLGtDQUFrQztBQUNsQyxvQ0FBb0M7QUFDcEMsb0NBQW9DO0FBQ3BDLG9DQUFvQztBQUNwQyxvQ0FBb0M7QUFDcEMsaUNBQWlDO0FBQ2pDLGlDQUFpQztBQUNqQyxpQ0FBaUM7QUFDakMsaUNBQWlDO0FBQ2pDLGlDQUFpQztBQUNqQyxpQ0FBaUM7QUFDakMsaUNBQWlDO0FBQ2pDLGlDQUFpQztBQUNqQzs7QUFFQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDLGtDQUFrQztBQUNsQyxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBLGlDQUFpQztBQUNqQyxpQ0FBaUM7QUFDakMsb0NBQW9DO0FBQ3BDLGlDQUFpQztBQUNqQyxpQ0FBaUM7QUFDakMsb0NBQW9DO0FBQ3BDLGlDQUFpQztBQUNqQyxpQ0FBaUM7QUFDakMsb0NBQW9DO0FBQ3BDLGlDQUFpQztBQUNqQzs7QUFFQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDLG1DQUFtQztBQUNuQztBQUNBLGlDQUFpQyxNQUFNO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxNQUFNO0FBQ3ZDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDLHNDQUFzQzs7QUFFdEMsaUNBQWlDO0FBQ2pDLGlDQUFpQyxNQUFNO0FBQ3ZDO0FBQ0E7QUFDQSxpQ0FBaUMsT0FBTztBQUN4QztBQUNBOztBQUVBLG9DQUFvQztBQUNwQyxpQ0FBaUMsTUFBTTtBQUN2QztBQUNBO0FBQ0EsaUNBQWlDLFFBQVE7QUFDekM7QUFDQTs7QUFFQSxpQ0FBaUM7QUFDakMsaUNBQWlDLE1BQU07QUFDdkM7QUFDQTtBQUNBLGlDQUFpQyxPQUFPO0FBQ3hDO0FBQ0E7O0FBRUEsb0NBQW9DO0FBQ3BDLGlDQUFpQyxNQUFNO0FBQ3ZDO0FBQ0E7QUFDQSxpQ0FBaUMsUUFBUTtBQUN6QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHNDQUFzQztBQUN0QyxrQ0FBa0M7QUFDbEMsaUNBQWlDO0FBQ2pDLGlDQUFpQztBQUNqQyxpQ0FBaUM7QUFDakMsaUNBQWlDO0FBQ2pDLG9DQUFvQztBQUNwQyxpQ0FBaUM7QUFDakMsb0NBQW9DO0FBQ3BDLGlDQUFpQztBQUNqQyxvQ0FBb0M7QUFDcEMsaUNBQWlDO0FBQ2pDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxNQUFNO0FBQ3ZDO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBLDJDQUEyQztBQUMzQyxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQywwQkFBMEIsK0JBQStCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qiw0QkFBNEI7QUFDMUQ7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELGlCQUFpQjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0NBQWdDLFNBQVMsTUFBTTtBQUMvQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGtDQUFrQyxVQUFVO0FBQzVDLDJDQUEyQztBQUMzQyxrREFBa0Q7QUFDbEQ7O0FBRUEsZ0RBQWdEO0FBQ2hEO0FBQ0E7O0FBRUEsbURBQW1EO0FBQ25EO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBLG9GQUFvRjtBQUNwRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHNDQUFzQzs7QUFFdEMsdURBQXVEOztBQUV2RDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG9DQUFvQzs7QUFFcEM7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhOztBQUViO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhOztBQUViOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNULEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjs7QUFFckI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTs7QUFFYjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCOztBQUVsQix1QkFBdUIsUUFBUTtBQUMvQjtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQSxrQkFBa0I7O0FBRWxCLHVCQUF1QixRQUFRO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHdCQUF3QixRQUFRO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsWUFBWTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLFFBQVE7QUFDbkM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrREFBa0QsSUFBSTtBQUN0RDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHdCQUF3QixRQUFRO0FBQ2hDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUJBQXVCLFlBQVk7QUFDbkM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsUUFBUTtBQUNuQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGtEQUFrRCxJQUFJO0FBQ3REO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLFNBQVM7O0FBRVQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLE9BQU87QUFDOUI7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0EsdUJBQXVCLGNBQWM7QUFDckM7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0EsU0FBUzs7OztBQUlUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixPQUFPO0FBQzFCO0FBQ0Esb0JBQW9CLFNBQVM7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsT0FBTztBQUMxQjtBQUNBLG9CQUFvQixTQUFTO0FBQzdCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsd0JBQXdCLGFBQWE7QUFDckM7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsUUFBUTtBQUMzQjtBQUNBLG9CQUFvQixhQUFhO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHVCQUF1QixZQUFZO0FBQ25DO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixNQUFNO0FBQ3pCLG1CQUFtQixPQUFPO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsUUFBUTtBQUNuQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELElBQUk7QUFDdEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsU0FBUztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixPQUFPO0FBQzFCLG1CQUFtQixRQUFRO0FBQzNCO0FBQ0Esb0JBQW9CLGFBQWE7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLE9BQU87QUFDMUIsbUJBQW1CLFFBQVE7QUFDM0I7QUFDQSxvQkFBb0IsYUFBYTtBQUNqQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLFlBQVk7QUFDL0I7QUFDQSxvQkFBb0IscUJBQXFCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLHdCQUF3QixhQUFhO0FBQ3JDO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsUUFBUTtBQUMzQjtBQUNBLG9CQUFvQixhQUFhO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHVCQUF1QixZQUFZO0FBQ25DO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixxQkFBcUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFlBQVk7QUFDaEMsb0JBQW9CLFlBQVk7QUFDaEM7QUFDQSxvQkFBb0IsWUFBWTtBQUNoQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLFlBQVk7QUFDL0IsbUJBQW1CLFFBQVE7QUFDM0I7QUFDQSxvQkFBb0IsYUFBYTtBQUNqQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHlCQUF5QjtBQUN6Qiw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsU0FBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHNDQUFzQztBQUN0Qzs7QUFFQTtBQUNBO0FBQ0EsNkJBQTZCLFNBQVM7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCLGdCQUFnQjs7QUFFaEI7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLHFCQUFxQjs7QUFFckI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhOztBQUViO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qjs7QUFFNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxTQUFTO0FBQ1QsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QixxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QixxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0EscUJBQXFCOztBQUVyQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQyIsImZpbGUiOiIyMy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qISBXZWJVcGxvYWRlciAwLjEuNiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAZmlsZU92ZXJ2aWV3IOiuqeWGhemDqOWQhOS4qumDqOS7tueahOS7o+eggeWPr+S7peeUqFthbWRdKGh0dHBzOi8vZ2l0aHViLmNvbS9hbWRqcy9hbWRqcy1hcGkvd2lraS9BTUQp5qih5Z2X5a6a5LmJ5pa55byP57uE57uH6LW35p2l44CCXHJcbiAqXHJcbiAqIEFNRCBBUEkg5YaF6YOo55qE566A5Y2V5LiN5a6M5YWo5a6e546w77yM6K+35b+955Wl44CC5Y+q5pyJ5b2TV2ViVXBsb2FkZXLooqvlkIjlubbmiJDkuIDkuKrmlofku7bnmoTml7blgJnmiY3kvJrlvJXlhaXjgIJcclxuICovXHJcbihmdW5jdGlvbiggcm9vdCwgZmFjdG9yeSApIHtcclxuICAgIHZhciBtb2R1bGVzID0ge30sXHJcblxyXG4gICAgICAgIC8vIOWGhemDqHJlcXVpcmUsIOeugOWNleS4jeWujOWFqOWunueOsOOAglxyXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbWRqcy9hbWRqcy1hcGkvd2lraS9yZXF1aXJlXHJcbiAgICAgICAgX3JlcXVpcmUgPSBmdW5jdGlvbiggZGVwcywgY2FsbGJhY2sgKSB7XHJcbiAgICAgICAgICAgIHZhciBhcmdzLCBsZW4sIGk7XHJcblxyXG4gICAgICAgICAgICAvLyDlpoLmnpxkZXBz5LiN5piv5pWw57uE77yM5YiZ55u05o6l6L+U5Zue5oyH5a6abW9kdWxlXHJcbiAgICAgICAgICAgIGlmICggdHlwZW9mIGRlcHMgPT09ICdzdHJpbmcnICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldE1vZHVsZSggZGVwcyApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYXJncyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yKCBsZW4gPSBkZXBzLmxlbmd0aCwgaSA9IDA7IGkgPCBsZW47IGkrKyApIHtcclxuICAgICAgICAgICAgICAgICAgICBhcmdzLnB1c2goIGdldE1vZHVsZSggZGVwc1sgaSBdICkgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2suYXBwbHkoIG51bGwsIGFyZ3MgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8vIOWGhemDqGRlZmluZe+8jOaaguaXtuS4jeaUr+aMgeS4jeaMh+WummlkLlxyXG4gICAgICAgIF9kZWZpbmUgPSBmdW5jdGlvbiggaWQsIGRlcHMsIGZhY3RvcnkgKSB7XHJcbiAgICAgICAgICAgIGlmICggYXJndW1lbnRzLmxlbmd0aCA9PT0gMiApIHtcclxuICAgICAgICAgICAgICAgIGZhY3RvcnkgPSBkZXBzO1xyXG4gICAgICAgICAgICAgICAgZGVwcyA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIF9yZXF1aXJlKCBkZXBzIHx8IFtdLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHNldE1vZHVsZSggaWQsIGZhY3RvcnksIGFyZ3VtZW50cyApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvLyDorr7nva5tb2R1bGUsIOWFvOWuuUNvbW1vbkpz5YaZ5rOV44CCXHJcbiAgICAgICAgc2V0TW9kdWxlID0gZnVuY3Rpb24oIGlkLCBmYWN0b3J5LCBhcmdzICkge1xyXG4gICAgICAgICAgICB2YXIgbW9kdWxlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cG9ydHM6IGZhY3RvcnlcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICByZXR1cm5lZDtcclxuXHJcbiAgICAgICAgICAgIGlmICggdHlwZW9mIGZhY3RvcnkgPT09ICdmdW5jdGlvbicgKSB7XHJcbiAgICAgICAgICAgICAgICBhcmdzLmxlbmd0aCB8fCAoYXJncyA9IFsgX3JlcXVpcmUsIG1vZHVsZS5leHBvcnRzLCBtb2R1bGUgXSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm5lZCA9IGZhY3RvcnkuYXBwbHkoIG51bGwsIGFyZ3MgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybmVkICE9PSB1bmRlZmluZWQgJiYgKG1vZHVsZS5leHBvcnRzID0gcmV0dXJuZWQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBtb2R1bGVzWyBpZCBdID0gbW9kdWxlLmV4cG9ydHM7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLy8g5qC55o2uaWTojrflj5Ztb2R1bGVcclxuICAgICAgICBnZXRNb2R1bGUgPSBmdW5jdGlvbiggaWQgKSB7XHJcbiAgICAgICAgICAgIHZhciBtb2R1bGUgPSBtb2R1bGVzWyBpZCBdIHx8IHJvb3RbIGlkIF07XHJcblxyXG4gICAgICAgICAgICBpZiAoICFtb2R1bGUgKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoICdgJyArIGlkICsgJ2AgaXMgdW5kZWZpbmVkJyApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbW9kdWxlO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8vIOWwhuaJgOaciW1vZHVsZXPvvIzlsIbot6/lvoRpZHPoo4XmjaLmiJDlr7nosaHjgIJcclxuICAgICAgICBleHBvcnRzVG8gPSBmdW5jdGlvbiggb2JqICkge1xyXG4gICAgICAgICAgICB2YXIga2V5LCBob3N0LCBwYXJ0cywgcGFydCwgbGFzdCwgdWNGaXJzdDtcclxuXHJcbiAgICAgICAgICAgIC8vIG1ha2UgdGhlIGZpcnN0IGNoYXJhY3RlciB1cHBlciBjYXNlLlxyXG4gICAgICAgICAgICB1Y0ZpcnN0ID0gZnVuY3Rpb24oIHN0ciApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdHIgJiYgKHN0ci5jaGFyQXQoIDAgKS50b1VwcGVyQ2FzZSgpICsgc3RyLnN1YnN0ciggMSApKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoIGtleSBpbiBtb2R1bGVzICkge1xyXG4gICAgICAgICAgICAgICAgaG9zdCA9IG9iajtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoICFtb2R1bGVzLmhhc093blByb3BlcnR5KCBrZXkgKSApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBwYXJ0cyA9IGtleS5zcGxpdCgnLycpO1xyXG4gICAgICAgICAgICAgICAgbGFzdCA9IHVjRmlyc3QoIHBhcnRzLnBvcCgpICk7XHJcblxyXG4gICAgICAgICAgICAgICAgd2hpbGUoIChwYXJ0ID0gdWNGaXJzdCggcGFydHMuc2hpZnQoKSApKSApIHtcclxuICAgICAgICAgICAgICAgICAgICBob3N0WyBwYXJ0IF0gPSBob3N0WyBwYXJ0IF0gfHwge307XHJcbiAgICAgICAgICAgICAgICAgICAgaG9zdCA9IGhvc3RbIHBhcnQgXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBob3N0WyBsYXN0IF0gPSBtb2R1bGVzWyBrZXkgXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG9iajtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBtYWtlRXhwb3J0ID0gZnVuY3Rpb24oIGRvbGxhciApIHtcclxuICAgICAgICAgICAgcm9vdC5fX2RvbGxhciA9IGRvbGxhcjtcclxuXHJcbiAgICAgICAgICAgIC8vIGV4cG9ydHMgZXZlcnkgbW9kdWxlLlxyXG4gICAgICAgICAgICByZXR1cm4gZXhwb3J0c1RvKCBmYWN0b3J5KCByb290LCBfZGVmaW5lLCBfcmVxdWlyZSApICk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgb3JpZ2luO1xyXG5cclxuICAgIGlmICggdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSAnb2JqZWN0JyApIHtcclxuXHJcbiAgICAgICAgLy8gRm9yIENvbW1vbkpTIGFuZCBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB3aGVyZSBhIHByb3BlciB3aW5kb3cgaXMgcHJlc2VudCxcclxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IG1ha2VFeHBvcnQoKTtcclxuICAgIH0gZWxzZSBpZiAoIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCApIHtcclxuXHJcbiAgICAgICAgLy8gQWxsb3cgdXNpbmcgdGhpcyBidWlsdCBsaWJyYXJ5IGFzIGFuIEFNRCBtb2R1bGVcclxuICAgICAgICAvLyBpbiBhbm90aGVyIHByb2plY3QuIFRoYXQgb3RoZXIgcHJvamVjdCB3aWxsIG9ubHlcclxuICAgICAgICAvLyBzZWUgdGhpcyBBTUQgY2FsbCwgbm90IHRoZSBpbnRlcm5hbCBtb2R1bGVzIGluXHJcbiAgICAgICAgLy8gdGhlIGNsb3N1cmUgYmVsb3cuXHJcbiAgICAgICAgZGVmaW5lKFsgJ2pxdWVyeScgXSwgbWFrZUV4cG9ydCApO1xyXG4gICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgLy8gQnJvd3NlciBnbG9iYWxzIGNhc2UuIEp1c3QgYXNzaWduIHRoZVxyXG4gICAgICAgIC8vIHJlc3VsdCB0byBhIHByb3BlcnR5IG9uIHRoZSBnbG9iYWwuXHJcbiAgICAgICAgb3JpZ2luID0gcm9vdC5XZWJVcGxvYWRlcjtcclxuICAgICAgICByb290LldlYlVwbG9hZGVyID0gbWFrZUV4cG9ydCgpO1xyXG4gICAgICAgIHJvb3QuV2ViVXBsb2FkZXIubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByb290LldlYlVwbG9hZGVyID0gb3JpZ2luO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn0pKCB3aW5kb3csIGZ1bmN0aW9uKCB3aW5kb3csIGRlZmluZSwgcmVxdWlyZSApIHtcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IGpRdWVyeSBvciBaZXB0b1xyXG4gICAgICogQHJlcXVpcmUgXCJqcXVlcnlcIlxyXG4gICAgICogQHJlcXVpcmUgXCJ6ZXB0b1wiXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgnZG9sbGFyLXRoaXJkJyxbXSxmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgcmVxID0gd2luZG93LnJlcXVpcmU7XHJcbiAgICAgICAgdmFyICQgPSB3aW5kb3cuX19kb2xsYXIgfHwgXHJcbiAgICAgICAgICAgIHdpbmRvdy5qUXVlcnkgfHwgXHJcbiAgICAgICAgICAgIHdpbmRvdy5aZXB0byB8fCBcclxuICAgICAgICAgICAgcmVxKCdqcXVlcnknKSB8fCBcclxuICAgICAgICAgICAgcmVxKCd6ZXB0bycpO1xyXG4gICAgXHJcbiAgICAgICAgaWYgKCAhJCApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdqUXVlcnkgb3IgWmVwdG8gbm90IGZvdW5kIScpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIHJldHVybiAkO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyBEb20g5pON5L2c55u45YWzXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgnZG9sbGFyJyxbXHJcbiAgICAgICAgJ2RvbGxhci10aGlyZCdcclxuICAgIF0sIGZ1bmN0aW9uKCBfICkge1xyXG4gICAgICAgIHJldHVybiBfO1xyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIEBmaWxlT3ZlcnZpZXcg5L2/55SoalF1ZXJ555qEUHJvbWlzZVxyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ3Byb21pc2UtdGhpcmQnLFtcclxuICAgICAgICAnZG9sbGFyJ1xyXG4gICAgXSwgZnVuY3Rpb24oICQgKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgRGVmZXJyZWQ6ICQuRGVmZXJyZWQsXHJcbiAgICAgICAgICAgIHdoZW46ICQud2hlbixcclxuICAgIFxyXG4gICAgICAgICAgICBpc1Byb21pc2U6IGZ1bmN0aW9uKCBhbnl0aGluZyApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhbnl0aGluZyAmJiB0eXBlb2YgYW55dGhpbmcudGhlbiA9PT0gJ2Z1bmN0aW9uJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyBQcm9taXNlL0ErXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgncHJvbWlzZScsW1xyXG4gICAgICAgICdwcm9taXNlLXRoaXJkJ1xyXG4gICAgXSwgZnVuY3Rpb24oIF8gKSB7XHJcbiAgICAgICAgcmV0dXJuIF87XHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyDln7rnoYDnsbvmlrnms5XjgIJcclxuICAgICAqL1xyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFdlYiBVcGxvYWRlcuWGhemDqOexu+eahOivpue7huivtOaYju+8jOS7peS4i+aPkOWPiueahOWKn+iDveexu++8jOmDveWPr+S7peWcqGBXZWJVcGxvYWRlcmDov5nkuKrlj5jph4/kuK3orr/pl67liLDjgIJcclxuICAgICAqXHJcbiAgICAgKiBBcyB5b3Uga25vdywgV2ViIFVwbG9hZGVy55qE5q+P5Liq5paH5Lu26YO95piv55So6L+HW0FNRF0oaHR0cHM6Ly9naXRodWIuY29tL2FtZGpzL2FtZGpzLWFwaS93aWtpL0FNRCnop4TojIPkuK3nmoRgZGVmaW5lYOe7hOe7h+i1t+adpeeahCwg5q+P5LiqTW9kdWxl6YO95Lya5pyJ5LiqbW9kdWxlIGlkLlxyXG4gICAgICog6buY6K6kbW9kdWxlIGlk5Li66K+l5paH5Lu255qE6Lev5b6E77yM6ICM5q2k6Lev5b6E5bCG5Lya6L2s5YyW5oiQ5ZCN5a2X56m66Ze05a2Y5pS+5ZyoV2ViVXBsb2FkZXLkuK3jgILlpoLvvJpcclxuICAgICAqXHJcbiAgICAgKiAqIG1vZHVsZSBgYmFzZWDvvJpXZWJVcGxvYWRlci5CYXNlXHJcbiAgICAgKiAqIG1vZHVsZSBgZmlsZWA6IFdlYlVwbG9hZGVyLkZpbGVcclxuICAgICAqICogbW9kdWxlIGBsaWIvZG5kYDogV2ViVXBsb2FkZXIuTGliLkRuZFxyXG4gICAgICogKiBtb2R1bGUgYHJ1bnRpbWUvaHRtbDUvZG5kYDogV2ViVXBsb2FkZXIuUnVudGltZS5IdG1sNS5EbmRcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICog5Lul5LiL5paH5qGj5Lit5a+557G755qE5L2/55So5Y+v6IO955yB55Wl5o6J5LqGYFdlYlVwbG9hZGVyYOWJjee8gOOAglxyXG4gICAgICogQG1vZHVsZSBXZWJVcGxvYWRlclxyXG4gICAgICogQHRpdGxlIFdlYlVwbG9hZGVyIEFQSeaWh+aho1xyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ2Jhc2UnLFtcclxuICAgICAgICAnZG9sbGFyJyxcclxuICAgICAgICAncHJvbWlzZSdcclxuICAgIF0sIGZ1bmN0aW9uKCAkLCBwcm9taXNlICkge1xyXG4gICAgXHJcbiAgICAgICAgdmFyIG5vb3AgPSBmdW5jdGlvbigpIHt9LFxyXG4gICAgICAgICAgICBjYWxsID0gRnVuY3Rpb24uY2FsbDtcclxuICAgIFxyXG4gICAgICAgIC8vIGh0dHA6Ly9qc3BlcmYuY29tL3VuY3Vycnl0aGlzXHJcbiAgICAgICAgLy8g5Y+N56eR6YeM5YyWXHJcbiAgICAgICAgZnVuY3Rpb24gdW5jdXJyeVRoaXMoIGZuICkge1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbC5hcHBseSggZm4sIGFyZ3VtZW50cyApO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGJpbmRGbiggZm4sIGNvbnRleHQgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSggY29udGV4dCwgYXJndW1lbnRzICk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlT2JqZWN0KCBwcm90byApIHtcclxuICAgICAgICAgICAgdmFyIGY7XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKCBPYmplY3QuY3JlYXRlICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5jcmVhdGUoIHByb3RvICk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmID0gZnVuY3Rpb24oKSB7fTtcclxuICAgICAgICAgICAgICAgIGYucHJvdG90eXBlID0gcHJvdG87XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGYoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5Z+656GA57G777yM5o+Q5L6b5LiA5Lqb566A5Y2V5bi455So55qE5pa55rOV44CCXHJcbiAgICAgICAgICogQGNsYXNzIEJhc2VcclxuICAgICAgICAgKi9cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge1N0cmluZ30gdmVyc2lvbiDlvZPliY3niYjmnKzlj7fjgIJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHZlcnNpb246ICcwLjEuNicsXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7alF1ZXJ5fFplcHRvfSAkIOW8leeUqOS+nei1lueahGpRdWVyeeaIluiAhVplcHRv5a+56LGh44CCXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAkOiAkLFxyXG4gICAgXHJcbiAgICAgICAgICAgIERlZmVycmVkOiBwcm9taXNlLkRlZmVycmVkLFxyXG4gICAgXHJcbiAgICAgICAgICAgIGlzUHJvbWlzZTogcHJvbWlzZS5pc1Byb21pc2UsXHJcbiAgICBcclxuICAgICAgICAgICAgd2hlbjogcHJvbWlzZS53aGVuLFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24gIOeugOWNleeahOa1j+iniOWZqOajgOafpee7k+aenOOAglxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiAqIGB3ZWJraXRgICB3ZWJraXTniYjmnKzlj7fvvIzlpoLmnpzmtY/op4jlmajkuLrpnZ53ZWJraXTlhoXmoLjvvIzmraTlsZ7mgKfkuLpgdW5kZWZpbmVkYOOAglxyXG4gICAgICAgICAgICAgKiAqIGBjaHJvbWVgICBjaHJvbWXmtY/op4jlmajniYjmnKzlj7fvvIzlpoLmnpzmtY/op4jlmajkuLpjaHJvbWXvvIzmraTlsZ7mgKfkuLpgdW5kZWZpbmVkYOOAglxyXG4gICAgICAgICAgICAgKiAqIGBpZWAgIGll5rWP6KeI5Zmo54mI5pys5Y+377yM5aaC5p6c5rWP6KeI5Zmo5Li66Z2eaWXvvIzmraTlsZ7mgKfkuLpgdW5kZWZpbmVkYOOAgioq5pqC5LiN5pSv5oyBaWUxMCsqKlxyXG4gICAgICAgICAgICAgKiAqIGBmaXJlZm94YCAgZmlyZWZveOa1j+iniOWZqOeJiOacrOWPt++8jOWmguaenOa1j+iniOWZqOS4uumdnmZpcmVmb3jvvIzmraTlsZ7mgKfkuLpgdW5kZWZpbmVkYOOAglxyXG4gICAgICAgICAgICAgKiAqIGBzYWZhcmlgICBzYWZhcmnmtY/op4jlmajniYjmnKzlj7fvvIzlpoLmnpzmtY/op4jlmajkuLrpnZ5zYWZhcmnvvIzmraTlsZ7mgKfkuLpgdW5kZWZpbmVkYOOAglxyXG4gICAgICAgICAgICAgKiAqIGBvcGVyYWAgIG9wZXJh5rWP6KeI5Zmo54mI5pys5Y+377yM5aaC5p6c5rWP6KeI5Zmo5Li66Z2eb3BlcmHvvIzmraTlsZ7mgKfkuLpgdW5kZWZpbmVkYOOAglxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge09iamVjdH0gW2Jyb3dzZXJdXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBicm93c2VyOiAoZnVuY3Rpb24oIHVhICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJldCA9IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgIHdlYmtpdCA9IHVhLm1hdGNoKCAvV2ViS2l0XFwvKFtcXGQuXSspLyApLFxyXG4gICAgICAgICAgICAgICAgICAgIGNocm9tZSA9IHVhLm1hdGNoKCAvQ2hyb21lXFwvKFtcXGQuXSspLyApIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVhLm1hdGNoKCAvQ3JpT1NcXC8oW1xcZC5dKykvICksXHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZSA9IHVhLm1hdGNoKCAvTVNJRVxccyhbXFxkXFwuXSspLyApIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVhLm1hdGNoKCAvKD86dHJpZGVudCkoPzouKnJ2OihbXFx3Ll0rKSk/L2kgKSxcclxuICAgICAgICAgICAgICAgICAgICBmaXJlZm94ID0gdWEubWF0Y2goIC9GaXJlZm94XFwvKFtcXGQuXSspLyApLFxyXG4gICAgICAgICAgICAgICAgICAgIHNhZmFyaSA9IHVhLm1hdGNoKCAvU2FmYXJpXFwvKFtcXGQuXSspLyApLFxyXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhID0gdWEubWF0Y2goIC9PUFJcXC8oW1xcZC5dKykvICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHdlYmtpdCAmJiAocmV0LndlYmtpdCA9IHBhcnNlRmxvYXQoIHdlYmtpdFsgMSBdICkpO1xyXG4gICAgICAgICAgICAgICAgY2hyb21lICYmIChyZXQuY2hyb21lID0gcGFyc2VGbG9hdCggY2hyb21lWyAxIF0gKSk7XHJcbiAgICAgICAgICAgICAgICBpZSAmJiAocmV0LmllID0gcGFyc2VGbG9hdCggaWVbIDEgXSApKTtcclxuICAgICAgICAgICAgICAgIGZpcmVmb3ggJiYgKHJldC5maXJlZm94ID0gcGFyc2VGbG9hdCggZmlyZWZveFsgMSBdICkpO1xyXG4gICAgICAgICAgICAgICAgc2FmYXJpICYmIChyZXQuc2FmYXJpID0gcGFyc2VGbG9hdCggc2FmYXJpWyAxIF0gKSk7XHJcbiAgICAgICAgICAgICAgICBvcGVyYSAmJiAocmV0Lm9wZXJhID0gcGFyc2VGbG9hdCggb3BlcmFbIDEgXSApKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgICAgICAgfSkoIG5hdmlnYXRvci51c2VyQWdlbnQgKSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQGRlc2NyaXB0aW9uICDmk43kvZzns7vnu5/mo4Dmn6Xnu5PmnpzjgIJcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogKiBgYW5kcm9pZGAgIOWmguaenOWcqGFuZHJvaWTmtY/op4jlmajnjq/looPkuIvvvIzmraTlgLzkuLrlr7nlupTnmoRhbmRyb2lk54mI5pys5Y+377yM5ZCm5YiZ5Li6YHVuZGVmaW5lZGDjgIJcclxuICAgICAgICAgICAgICogKiBgaW9zYCDlpoLmnpzlnKhpb3PmtY/op4jlmajnjq/looPkuIvvvIzmraTlgLzkuLrlr7nlupTnmoRpb3PniYjmnKzlj7fvvIzlkKbliJnkuLpgdW5kZWZpbmVkYOOAglxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge09iamVjdH0gW29zXVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgb3M6IChmdW5jdGlvbiggdWEgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmV0ID0ge30sXHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBvc3ggPSAhIXVhLm1hdGNoKCAvXFwoTWFjaW50b3NoXFw7IEludGVsIC8gKSxcclxuICAgICAgICAgICAgICAgICAgICBhbmRyb2lkID0gdWEubWF0Y2goIC8oPzpBbmRyb2lkKTs/W1xcc1xcL10rKFtcXGQuXSspPy8gKSxcclxuICAgICAgICAgICAgICAgICAgICBpb3MgPSB1YS5tYXRjaCggLyg/OmlQYWR8aVBvZHxpUGhvbmUpLipPU1xccyhbXFxkX10rKS8gKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gb3N4ICYmIChyZXQub3N4ID0gdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBhbmRyb2lkICYmIChyZXQuYW5kcm9pZCA9IHBhcnNlRmxvYXQoIGFuZHJvaWRbIDEgXSApKTtcclxuICAgICAgICAgICAgICAgIGlvcyAmJiAocmV0LmlvcyA9IHBhcnNlRmxvYXQoIGlvc1sgMSBdLnJlcGxhY2UoIC9fL2csICcuJyApICkpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgICAgICAgICB9KSggbmF2aWdhdG9yLnVzZXJBZ2VudCApLFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiDlrp7njrDnsbvkuI7nsbvkuYvpl7TnmoTnu6fmib/jgIJcclxuICAgICAgICAgICAgICogQG1ldGhvZCBpbmhlcml0c1xyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBCYXNlLmluaGVyaXRzKCBzdXBlciApID0+IGNoaWxkXHJcbiAgICAgICAgICAgICAqIEBncmFtbWFyIEJhc2UuaW5oZXJpdHMoIHN1cGVyLCBwcm90b3MgKSA9PiBjaGlsZFxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBCYXNlLmluaGVyaXRzKCBzdXBlciwgcHJvdG9zLCBzdGF0aWNzICkgPT4gY2hpbGRcclxuICAgICAgICAgICAgICogQHBhcmFtICB7Q2xhc3N9IHN1cGVyIOeItuexu1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0gIHtPYmplY3QgfCBGdW5jdGlvbn0gW3Byb3Rvc10g5a2Q57G75oiW6ICF5a+56LGh44CC5aaC5p6c5a+56LGh5Lit5YyF5ZCrY29uc3RydWN0b3LvvIzlrZDnsbvlsIbmmK/nlKjmraTlsZ7mgKflgLzjgIJcclxuICAgICAgICAgICAgICogQHBhcmFtICB7RnVuY3Rpb259IFtwcm90b3MuY29uc3RydWN0b3JdIOWtkOexu+aehOmAoOWZqO+8jOS4jeaMh+WumueahOivneWwhuWIm+W7uuS4quS4tOaXtueahOebtOaOpeaJp+ihjOeItuexu+aehOmAoOWZqOeahOaWueazleOAglxyXG4gICAgICAgICAgICAgKiBAcGFyYW0gIHtPYmplY3R9IFtzdGF0aWNzXSDpnZnmgIHlsZ7mgKfmiJbmlrnms5XjgIJcclxuICAgICAgICAgICAgICogQHJldHVybiB7Q2xhc3N9IOi/lOWbnuWtkOexu+OAglxyXG4gICAgICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAgICAgKiBmdW5jdGlvbiBQZXJzb24oKSB7XHJcbiAgICAgICAgICAgICAqICAgICBjb25zb2xlLmxvZyggJ1N1cGVyJyApO1xyXG4gICAgICAgICAgICAgKiB9XHJcbiAgICAgICAgICAgICAqIFBlcnNvbi5wcm90b3R5cGUuaGVsbG8gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICogICAgIGNvbnNvbGUubG9nKCAnaGVsbG8nICk7XHJcbiAgICAgICAgICAgICAqIH07XHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIHZhciBNYW5hZ2VyID0gQmFzZS5pbmhlcml0cyggUGVyc29uLCB7XHJcbiAgICAgICAgICAgICAqICAgICB3b3JsZDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAqICAgICAgICAgY29uc29sZS5sb2coICdXb3JsZCcgKTtcclxuICAgICAgICAgICAgICogICAgIH1cclxuICAgICAgICAgICAgICogfSk7XHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIC8vIOWboOS4uuayoeacieaMh+WumuaehOmAoOWZqO+8jOeItuexu+eahOaehOmAoOWZqOWwhuS8muaJp+ihjOOAglxyXG4gICAgICAgICAgICAgKiB2YXIgaW5zdGFuY2UgPSBuZXcgTWFuYWdlcigpOyAgICAvLyA9PiBTdXBlclxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiAvLyDnu6fmib/lrZDniLbnsbvnmoTmlrnms5VcclxuICAgICAgICAgICAgICogaW5zdGFuY2UuaGVsbG8oKTsgICAgLy8gPT4gaGVsbG9cclxuICAgICAgICAgICAgICogaW5zdGFuY2Uud29ybGQoKTsgICAgLy8gPT4gV29ybGRcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogLy8g5a2Q57G755qEX19zdXBlcl9f5bGe5oCn5oyH5ZCR54i257G7XHJcbiAgICAgICAgICAgICAqIGNvbnNvbGUubG9nKCBNYW5hZ2VyLl9fc3VwZXJfXyA9PT0gUGVyc29uICk7ICAgIC8vID0+IHRydWVcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGluaGVyaXRzOiBmdW5jdGlvbiggU3VwZXIsIHByb3Rvcywgc3RhdGljUHJvdG9zICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIHR5cGVvZiBwcm90b3MgPT09ICdmdW5jdGlvbicgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQgPSBwcm90b3M7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvdG9zID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHByb3RvcyAmJiBwcm90b3MuaGFzT3duUHJvcGVydHkoJ2NvbnN0cnVjdG9yJykgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQgPSBwcm90b3MuY29uc3RydWN0b3I7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBTdXBlci5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g5aSN5Yi26Z2Z5oCB5pa55rOVXHJcbiAgICAgICAgICAgICAgICAkLmV4dGVuZCggdHJ1ZSwgY2hpbGQsIFN1cGVyLCBzdGF0aWNQcm90b3MgfHwge30gKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLyoganNoaW50IGNhbWVsY2FzZTogZmFsc2UgKi9cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g6K6p5a2Q57G755qEX19zdXBlcl9f5bGe5oCn5oyH5ZCR54i257G744CCXHJcbiAgICAgICAgICAgICAgICBjaGlsZC5fX3N1cGVyX18gPSBTdXBlci5wcm90b3R5cGU7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOaehOW7uuWOn+Wei++8jOa3u+WKoOWOn+Wei+aWueazleaIluWxnuaAp+OAglxyXG4gICAgICAgICAgICAgICAgLy8g5pqC5pe255SoT2JqZWN0LmNyZWF0ZeWunueOsOOAglxyXG4gICAgICAgICAgICAgICAgY2hpbGQucHJvdG90eXBlID0gY3JlYXRlT2JqZWN0KCBTdXBlci5wcm90b3R5cGUgKTtcclxuICAgICAgICAgICAgICAgIHByb3RvcyAmJiAkLmV4dGVuZCggdHJ1ZSwgY2hpbGQucHJvdG90eXBlLCBwcm90b3MgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiDkuIDkuKrkuI3lgZrku7vkvZXkuovmg4XnmoTmlrnms5XjgILlj6/ku6XnlKjmnaXotYvlgLznu5npu5jorqTnmoRjYWxsYmFjay5cclxuICAgICAgICAgICAgICogQG1ldGhvZCBub29wXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBub29wOiBub29wLFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiDov5Tlm57kuIDkuKrmlrDnmoTmlrnms5XvvIzmraTmlrnms5XlsIblt7LmjIflrprnmoRgY29udGV4dGDmnaXmiafooYzjgIJcclxuICAgICAgICAgICAgICogQGdyYW1tYXIgQmFzZS5iaW5kRm4oIGZuLCBjb250ZXh0ICkgPT4gRnVuY3Rpb25cclxuICAgICAgICAgICAgICogQG1ldGhvZCBiaW5kRm5cclxuICAgICAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgICAgICogdmFyIGRvU29tZXRoaW5nID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAqICAgICAgICAgY29uc29sZS5sb2coIHRoaXMubmFtZSApO1xyXG4gICAgICAgICAgICAgKiAgICAgfSxcclxuICAgICAgICAgICAgICogICAgIG9iaiA9IHtcclxuICAgICAgICAgICAgICogICAgICAgICBuYW1lOiAnT2JqZWN0IE5hbWUnXHJcbiAgICAgICAgICAgICAqICAgICB9LFxyXG4gICAgICAgICAgICAgKiAgICAgYWxpYXNGbiA9IEJhc2UuYmluZCggZG9Tb21ldGhpbmcsIG9iaiApO1xyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiAgYWxpYXNGbigpOyAgICAvLyA9PiBPYmplY3QgTmFtZVxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgYmluZEZuOiBiaW5kRm4sXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOW8leeUqENvbnNvbGUubG9n5aaC5p6c5a2Y5Zyo55qE6K+d77yM5ZCm5YiZ5byV55So5LiA5LiqW+epuuWHveaVsG5vb3BdKCNXZWJVcGxvYWRlcjpCYXNlLm5vb3Ap44CCXHJcbiAgICAgICAgICAgICAqIEBncmFtbWFyIEJhc2UubG9nKCBhcmdzLi4uICkgPT4gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAqIEBtZXRob2QgbG9nXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBsb2c6IChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGlmICggd2luZG93LmNvbnNvbGUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJpbmRGbiggY29uc29sZS5sb2csIGNvbnNvbGUgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBub29wO1xyXG4gICAgICAgICAgICB9KSgpLFxyXG4gICAgXHJcbiAgICAgICAgICAgIG5leHRUaWNrOiAoZnVuY3Rpb24oKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiggY2IgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggY2IsIDEgKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIEBidWcg5b2T5rWP6KeI5Zmo5LiN5Zyo5b2T5YmN56qX5Y+j5pe25bCx5YGc5LqG44CCXHJcbiAgICAgICAgICAgICAgICAvLyB2YXIgbmV4dCA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcclxuICAgICAgICAgICAgICAgIC8vICAgICB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgd2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxyXG4gICAgICAgICAgICAgICAgLy8gICAgIGZ1bmN0aW9uKCBjYiApIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoIGNiLCAxMDAwIC8gNjAgKTtcclxuICAgICAgICAgICAgICAgIC8vICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyAvLyBmaXg6IFVuY2F1Z2h0IFR5cGVFcnJvcjogSWxsZWdhbCBpbnZvY2F0aW9uXHJcbiAgICAgICAgICAgICAgICAvLyByZXR1cm4gYmluZEZuKCBuZXh0LCB3aW5kb3cgKTtcclxuICAgICAgICAgICAgfSkoKSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICog6KKrW3VuY3Vycnl0aGlzXShodHRwOi8vd3d3LjJhbGl0eS5jb20vMjAxMS8xMS91bmN1cnJ5aW5nLXRoaXMuaHRtbCnnmoTmlbDnu4RzbGljZeaWueazleOAglxyXG4gICAgICAgICAgICAgKiDlsIbnlKjmnaXlsIbpnZ7mlbDnu4Tlr7nosaHovazljJbmiJDmlbDnu4Tlr7nosaHjgIJcclxuICAgICAgICAgICAgICogQGdyYW1tYXIgQmFzZS5zbGljZSggdGFyZ2V0LCBzdGFydFssIGVuZF0gKSA9PiBBcnJheVxyXG4gICAgICAgICAgICAgKiBAbWV0aG9kIHNsaWNlXHJcbiAgICAgICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICAgICAqIGZ1bmN0aW9uIGRvU29tdGhpbmcoKSB7XHJcbiAgICAgICAgICAgICAqICAgICB2YXIgYXJncyA9IEJhc2Uuc2xpY2UoIGFyZ3VtZW50cywgMSApO1xyXG4gICAgICAgICAgICAgKiAgICAgY29uc29sZS5sb2coIGFyZ3MgKTtcclxuICAgICAgICAgICAgICogfVxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBkb1NvbXRoaW5nKCAnaWdub3JlZCcsICdhcmcyJywgJ2FyZzMnICk7ICAgIC8vID0+IEFycmF5IFtcImFyZzJcIiwgXCJhcmczXCJdXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBzbGljZTogdW5jdXJyeVRoaXMoIFtdLnNsaWNlICksXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOeUn+aIkOWUr+S4gOeahElEXHJcbiAgICAgICAgICAgICAqIEBtZXRob2QgZ3VpZFxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBCYXNlLmd1aWQoKSA9PiBTdHJpbmdcclxuICAgICAgICAgICAgICogQGdyYW1tYXIgQmFzZS5ndWlkKCBwcmVmeCApID0+IFN0cmluZ1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZ3VpZDogKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvdW50ZXIgPSAwO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oIHByZWZpeCApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZ3VpZCA9ICgrbmV3IERhdGUoKSkudG9TdHJpbmcoIDMyICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAwO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICggOyBpIDwgNTsgaSsrICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBndWlkICs9IE1hdGguZmxvb3IoIE1hdGgucmFuZG9tKCkgKiA2NTUzNSApLnRvU3RyaW5nKCAzMiApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAocHJlZml4IHx8ICd3dV8nKSArIGd1aWQgKyAoY291bnRlcisrKS50b1N0cmluZyggMzIgKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pKCksXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOagvOW8j+WMluaWh+S7tuWkp+Wwjywg6L6T5Ye65oiQ5bim5Y2V5L2N55qE5a2X56ym5LiyXHJcbiAgICAgICAgICAgICAqIEBtZXRob2QgZm9ybWF0U2l6ZVxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBCYXNlLmZvcm1hdFNpemUoIHNpemUgKSA9PiBTdHJpbmdcclxuICAgICAgICAgICAgICogQGdyYW1tYXIgQmFzZS5mb3JtYXRTaXplKCBzaXplLCBwb2ludExlbmd0aCApID0+IFN0cmluZ1xyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBCYXNlLmZvcm1hdFNpemUoIHNpemUsIHBvaW50TGVuZ3RoLCB1bml0cyApID0+IFN0cmluZ1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc2l6ZSDmlofku7blpKflsI9cclxuICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IFtwb2ludExlbmd0aD0yXSDnsr7noa7liLDnmoTlsI/mlbDngrnmlbDjgIJcclxuICAgICAgICAgICAgICogQHBhcmFtIHtBcnJheX0gW3VuaXRzPVsgJ0InLCAnSycsICdNJywgJ0cnLCAnVEInIF1dIOWNleS9jeaVsOe7hOOAguS7juWtl+iKgu+8jOWIsOWNg+Wtl+iKgu+8jOS4gOebtOW+gOS4iuaMh+WumuOAguWmguaenOWNleS9jeaVsOe7hOmHjOmdouWPquaMh+WumuS6huWIsOS6hkso5Y2D5a2X6IqCKe+8jOWQjOaXtuaWh+S7tuWkp+Wwj+Wkp+S6jk0sIOatpOaWueazleeahOi+k+WHuuWwhui/mOaYr+aYvuekuuaIkOWkmuWwkUsuXHJcbiAgICAgICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICAgICAqIGNvbnNvbGUubG9nKCBCYXNlLmZvcm1hdFNpemUoIDEwMCApICk7ICAgIC8vID0+IDEwMEJcclxuICAgICAgICAgICAgICogY29uc29sZS5sb2coIEJhc2UuZm9ybWF0U2l6ZSggMTAyNCApICk7ICAgIC8vID0+IDEuMDBLXHJcbiAgICAgICAgICAgICAqIGNvbnNvbGUubG9nKCBCYXNlLmZvcm1hdFNpemUoIDEwMjQsIDAgKSApOyAgICAvLyA9PiAxS1xyXG4gICAgICAgICAgICAgKiBjb25zb2xlLmxvZyggQmFzZS5mb3JtYXRTaXplKCAxMDI0ICogMTAyNCApICk7ICAgIC8vID0+IDEuMDBNXHJcbiAgICAgICAgICAgICAqIGNvbnNvbGUubG9nKCBCYXNlLmZvcm1hdFNpemUoIDEwMjQgKiAxMDI0ICogMTAyNCApICk7ICAgIC8vID0+IDEuMDBHXHJcbiAgICAgICAgICAgICAqIGNvbnNvbGUubG9nKCBCYXNlLmZvcm1hdFNpemUoIDEwMjQgKiAxMDI0ICogMTAyNCwgMCwgWydCJywgJ0tCJywgJ01CJ10gKSApOyAgICAvLyA9PiAxMDI0TUJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGZvcm1hdFNpemU6IGZ1bmN0aW9uKCBzaXplLCBwb2ludExlbmd0aCwgdW5pdHMgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdW5pdDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdW5pdHMgPSB1bml0cyB8fCBbICdCJywgJ0snLCAnTScsICdHJywgJ1RCJyBdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoICh1bml0ID0gdW5pdHMuc2hpZnQoKSkgJiYgc2l6ZSA+IDEwMjQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZSA9IHNpemUgLyAxMDI0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHVuaXQgPT09ICdCJyA/IHNpemUgOiBzaXplLnRvRml4ZWQoIHBvaW50TGVuZ3RoIHx8IDIgKSkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bml0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiDkuovku7blpITnkIbnsbvvvIzlj6/ku6Xni6znq4vkvb/nlKjvvIzkuZ/lj6/ku6XmianlsZXnu5nlr7nosaHkvb/nlKjjgIJcclxuICAgICAqIEBmaWxlT3ZlcnZpZXcgTWVkaWF0b3JcclxuICAgICAqL1xyXG4gICAgZGVmaW5lKCdtZWRpYXRvcicsW1xyXG4gICAgICAgICdiYXNlJ1xyXG4gICAgXSwgZnVuY3Rpb24oIEJhc2UgKSB7XHJcbiAgICAgICAgdmFyICQgPSBCYXNlLiQsXHJcbiAgICAgICAgICAgIHNsaWNlID0gW10uc2xpY2UsXHJcbiAgICAgICAgICAgIHNlcGFyYXRvciA9IC9cXHMrLyxcclxuICAgICAgICAgICAgcHJvdG9zO1xyXG4gICAgXHJcbiAgICAgICAgLy8g5qC55o2u5p2h5Lu26L+H5ruk5Ye65LqL5Lu2aGFuZGxlcnMuXHJcbiAgICAgICAgZnVuY3Rpb24gZmluZEhhbmRsZXJzKCBhcnIsIG5hbWUsIGNhbGxiYWNrLCBjb250ZXh0ICkge1xyXG4gICAgICAgICAgICByZXR1cm4gJC5ncmVwKCBhcnIsIGZ1bmN0aW9uKCBoYW5kbGVyICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZXIgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgKCFuYW1lIHx8IGhhbmRsZXIuZSA9PT0gbmFtZSkgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgKCFjYWxsYmFjayB8fCBoYW5kbGVyLmNiID09PSBjYWxsYmFjayB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLmNiLl9jYiA9PT0gY2FsbGJhY2spICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICghY29udGV4dCB8fCBoYW5kbGVyLmN0eCA9PT0gY29udGV4dCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGVhY2hFdmVudCggZXZlbnRzLCBjYWxsYmFjaywgaXRlcmF0b3IgKSB7XHJcbiAgICAgICAgICAgIC8vIOS4jeaUr+aMgeWvueixoe+8jOWPquaUr+aMgeWkmuS4qmV2ZW5055So56m65qC86ZqU5byAXHJcbiAgICAgICAgICAgICQuZWFjaCggKGV2ZW50cyB8fCAnJykuc3BsaXQoIHNlcGFyYXRvciApLCBmdW5jdGlvbiggXywga2V5ICkge1xyXG4gICAgICAgICAgICAgICAgaXRlcmF0b3IoIGtleSwgY2FsbGJhY2sgKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gdHJpZ2dlckhhbmRlcnMoIGV2ZW50cywgYXJncyApIHtcclxuICAgICAgICAgICAgdmFyIHN0b3BlZCA9IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgaSA9IC0xLFxyXG4gICAgICAgICAgICAgICAgbGVuID0gZXZlbnRzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIGhhbmRsZXI7XHJcbiAgICBcclxuICAgICAgICAgICAgd2hpbGUgKCArK2kgPCBsZW4gKSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVyID0gZXZlbnRzWyBpIF07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmICggaGFuZGxlci5jYi5hcHBseSggaGFuZGxlci5jdHgyLCBhcmdzICkgPT09IGZhbHNlICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0b3BlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gIXN0b3BlZDtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBwcm90b3MgPSB7XHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOe7keWumuS6i+S7tuOAglxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBgY2FsbGJhY2tg5pa55rOV5Zyo5omn6KGM5pe277yMYXJndW1lbnRz5bCG5Lya5p2l5rqQ5LqOdHJpZ2dlcueahOaXtuWAmeaQuuW4pueahOWPguaVsOOAguWmglxyXG4gICAgICAgICAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgICAgICAgICAqIHZhciBvYmogPSB7fTtcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogLy8g5L2/5b6Xb2Jq5pyJ5LqL5Lu26KGM5Li6XHJcbiAgICAgICAgICAgICAqIE1lZGlhdG9yLmluc3RhbGxUbyggb2JqICk7XHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIG9iai5vbiggJ3Rlc3RhJywgZnVuY3Rpb24oIGFyZzEsIGFyZzIgKSB7XHJcbiAgICAgICAgICAgICAqICAgICBjb25zb2xlLmxvZyggYXJnMSwgYXJnMiApOyAvLyA9PiAnYXJnMScsICdhcmcyJ1xyXG4gICAgICAgICAgICAgKiB9KTtcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogb2JqLnRyaWdnZXIoICd0ZXN0YScsICdhcmcxJywgJ2FyZzInICk7XHJcbiAgICAgICAgICAgICAqIGBgYFxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiDlpoLmnpxgY2FsbGJhY2tg5Lit77yM5p+Q5LiA5Liq5pa55rOVYHJldHVybiBmYWxzZWDkuobvvIzliJnlkI7nu63nmoTlhbbku5ZgY2FsbGJhY2tg6YO95LiN5Lya6KKr5omn6KGM5Yiw44CCXHJcbiAgICAgICAgICAgICAqIOWIh+S8muW9seWTjeWIsGB0cmlnZ2VyYOaWueazleeahOi/lOWbnuWAvO+8jOS4umBmYWxzZWDjgIJcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogYG9uYOi/mOWPr+S7peeUqOadpea3u+WKoOS4gOS4queJueauiuS6i+S7tmBhbGxgLCDov5nmoLfmiYDmnInnmoTkuovku7bop6blj5Hpg73kvJrlk43lupTliLDjgILlkIzml7bmraTnsbtgY2FsbGJhY2tg5Lit55qEYXJndW1lbnRz5pyJ5LiA5Liq5LiN5ZCM5aSE77yMXHJcbiAgICAgICAgICAgICAqIOWwseaYr+esrOS4gOS4quWPguaVsOS4umB0eXBlYO+8jOiusOW9leW9k+WJjeaYr+S7gOS5iOS6i+S7tuWcqOinpuWPkeOAguatpOexu2BjYWxsYmFja2DnmoTkvJjlhYjnuqfmr5TohJrkvY7vvIzkvJrlho3mraPluLhgY2FsbGJhY2tg5omn6KGM5a6M5ZCO6Kem5Y+R44CCXHJcbiAgICAgICAgICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAgICAgICAgICogb2JqLm9uKCAnYWxsJywgZnVuY3Rpb24oIHR5cGUsIGFyZzEsIGFyZzIgKSB7XHJcbiAgICAgICAgICAgICAqICAgICBjb25zb2xlLmxvZyggdHlwZSwgYXJnMSwgYXJnMiApOyAvLyA9PiAndGVzdGEnLCAnYXJnMScsICdhcmcyJ1xyXG4gICAgICAgICAgICAgKiB9KTtcclxuICAgICAgICAgICAgICogYGBgXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIEBtZXRob2Qgb25cclxuICAgICAgICAgICAgICogQGdyYW1tYXIgb24oIG5hbWUsIGNhbGxiYWNrWywgY29udGV4dF0gKSA9PiBzZWxmXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSAge1N0cmluZ30gICBuYW1lICAgICDkuovku7blkI3vvIzmlK/mjIHlpJrkuKrkuovku7bnlKjnqbrmoLzpmpTlvIBcclxuICAgICAgICAgICAgICogQHBhcmFtICB7RnVuY3Rpb259IGNhbGxiYWNrIOS6i+S7tuWkhOeQhuWZqFxyXG4gICAgICAgICAgICAgKiBAcGFyYW0gIHtPYmplY3R9ICAgW2NvbnRleHRdICDkuovku7blpITnkIblmajnmoTkuIrkuIvmlofjgIJcclxuICAgICAgICAgICAgICogQHJldHVybiB7c2VsZn0g6L+U5Zue6Ieq6Lqr77yM5pa55L6/6ZO+5byPXHJcbiAgICAgICAgICAgICAqIEBjaGFpbmFibGVcclxuICAgICAgICAgICAgICogQGNsYXNzIE1lZGlhdG9yXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBvbjogZnVuY3Rpb24oIG5hbWUsIGNhbGxiYWNrLCBjb250ZXh0ICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICBzZXQ7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmICggIWNhbGxiYWNrICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBzZXQgPSB0aGlzLl9ldmVudHMgfHwgKHRoaXMuX2V2ZW50cyA9IFtdKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZWFjaEV2ZW50KCBuYW1lLCBjYWxsYmFjaywgZnVuY3Rpb24oIG5hbWUsIGNhbGxiYWNrICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBoYW5kbGVyID0geyBlOiBuYW1lIH07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLmNiID0gY2FsbGJhY2s7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlci5jdHggPSBjb250ZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXIuY3R4MiA9IGNvbnRleHQgfHwgbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlci5pZCA9IHNldC5sZW5ndGg7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBzZXQucHVzaCggaGFuZGxlciApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiDnu5Hlrprkuovku7bvvIzkuJTlvZNoYW5kbGVy5omn6KGM5a6M5ZCO77yM6Ieq5Yqo6Kej6Zmk57uR5a6a44CCXHJcbiAgICAgICAgICAgICAqIEBtZXRob2Qgb25jZVxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBvbmNlKCBuYW1lLCBjYWxsYmFja1ssIGNvbnRleHRdICkgPT4gc2VsZlxyXG4gICAgICAgICAgICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgbmFtZSAgICAg5LqL5Lu25ZCNXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBjYWxsYmFjayDkuovku7blpITnkIblmahcclxuICAgICAgICAgICAgICogQHBhcmFtICB7T2JqZWN0fSAgIFtjb250ZXh0XSAg5LqL5Lu25aSE55CG5Zmo55qE5LiK5LiL5paH44CCXHJcbiAgICAgICAgICAgICAqIEByZXR1cm4ge3NlbGZ9IOi/lOWbnuiHqui6q++8jOaWueS+v+mTvuW8j1xyXG4gICAgICAgICAgICAgKiBAY2hhaW5hYmxlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBvbmNlOiBmdW5jdGlvbiggbmFtZSwgY2FsbGJhY2ssIGNvbnRleHQgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoICFjYWxsYmFjayApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGVhY2hFdmVudCggbmFtZSwgY2FsbGJhY2ssIGZ1bmN0aW9uKCBuYW1lLCBjYWxsYmFjayApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb25jZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUub2ZmKCBuYW1lLCBvbmNlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2suYXBwbHkoIGNvbnRleHQgfHwgbWUsIGFyZ3VtZW50cyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgb25jZS5fY2IgPSBjYWxsYmFjaztcclxuICAgICAgICAgICAgICAgICAgICBtZS5vbiggbmFtZSwgb25jZSwgY29udGV4dCApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBtZTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICog6Kej6Zmk5LqL5Lu257uR5a6aXHJcbiAgICAgICAgICAgICAqIEBtZXRob2Qgb2ZmXHJcbiAgICAgICAgICAgICAqIEBncmFtbWFyIG9mZiggW25hbWVbLCBjYWxsYmFja1ssIGNvbnRleHRdIF0gXSApID0+IHNlbGZcclxuICAgICAgICAgICAgICogQHBhcmFtICB7U3RyaW5nfSAgIFtuYW1lXSAgICAg5LqL5Lu25ZCNXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIOS6i+S7tuWkhOeQhuWZqFxyXG4gICAgICAgICAgICAgKiBAcGFyYW0gIHtPYmplY3R9ICAgW2NvbnRleHRdICDkuovku7blpITnkIblmajnmoTkuIrkuIvmlofjgIJcclxuICAgICAgICAgICAgICogQHJldHVybiB7c2VsZn0g6L+U5Zue6Ieq6Lqr77yM5pa55L6/6ZO+5byPXHJcbiAgICAgICAgICAgICAqIEBjaGFpbmFibGVcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIG9mZjogZnVuY3Rpb24oIG5hbWUsIGNiLCBjdHggKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoICFldmVudHMgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmICggIW5hbWUgJiYgIWNiICYmICFjdHggKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGVhY2hFdmVudCggbmFtZSwgY2IsIGZ1bmN0aW9uKCBuYW1lLCBjYiApIHtcclxuICAgICAgICAgICAgICAgICAgICAkLmVhY2goIGZpbmRIYW5kbGVycyggZXZlbnRzLCBuYW1lLCBjYiwgY3R4ICksIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZXZlbnRzWyB0aGlzLmlkIF07XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOinpuWPkeS6i+S7tlxyXG4gICAgICAgICAgICAgKiBAbWV0aG9kIHRyaWdnZXJcclxuICAgICAgICAgICAgICogQGdyYW1tYXIgdHJpZ2dlciggbmFtZVssIGFyZ3MuLi5dICkgPT4gc2VsZlxyXG4gICAgICAgICAgICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgdHlwZSAgICAg5LqL5Lu25ZCNXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSAgeyp9IFsuLi5dIOS7u+aEj+WPguaVsFxyXG4gICAgICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSDlpoLmnpxoYW5kbGVy5LitcmV0dXJuIGZhbHNl5LqG77yM5YiZ6L+U5ZueZmFsc2UsIOWQpuWImei/lOWbnnRydWVcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHRyaWdnZXI6IGZ1bmN0aW9uKCB0eXBlICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MsIGV2ZW50cywgYWxsRXZlbnRzO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoICF0aGlzLl9ldmVudHMgfHwgIXR5cGUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGFyZ3MgPSBzbGljZS5jYWxsKCBhcmd1bWVudHMsIDEgKTtcclxuICAgICAgICAgICAgICAgIGV2ZW50cyA9IGZpbmRIYW5kbGVycyggdGhpcy5fZXZlbnRzLCB0eXBlICk7XHJcbiAgICAgICAgICAgICAgICBhbGxFdmVudHMgPSBmaW5kSGFuZGxlcnMoIHRoaXMuX2V2ZW50cywgJ2FsbCcgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyaWdnZXJIYW5kZXJzKCBldmVudHMsIGFyZ3MgKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VySGFuZGVycyggYWxsRXZlbnRzLCBhcmd1bWVudHMgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDkuK3ku4vogIXvvIzlroPmnKzouqvmmK/kuKrljZXkvovvvIzkvYblj6/ku6XpgJrov4dbaW5zdGFsbFRvXSgjV2ViVXBsb2FkZXI6TWVkaWF0b3I6aW5zdGFsbFRvKeaWueazle+8jOS9v+S7u+S9leWvueixoeWFt+Wkh+S6i+S7tuihjOS4uuOAglxyXG4gICAgICAgICAqIOS4u+imgeebrueahOaYr+i0n+i0o+aooeWdl+S4juaooeWdl+S5i+mXtOeahOWQiOS9nO+8jOmZjeS9juiApuWQiOW6puOAglxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGNsYXNzIE1lZGlhdG9yXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcmV0dXJuICQuZXh0ZW5kKHtcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICog5Y+v5Lul6YCa6L+H6L+Z5Liq5o6l5Y+j77yM5L2/5Lu75L2V5a+56LGh5YW35aSH5LqL5Lu25Yqf6IO944CCXHJcbiAgICAgICAgICAgICAqIEBtZXRob2QgaW5zdGFsbFRvXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSAge09iamVjdH0gb2JqIOmcgOimgeWFt+Wkh+S6i+S7tuihjOS4uueahOWvueixoeOAglxyXG4gICAgICAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IOi/lOWbnm9iai5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGluc3RhbGxUbzogZnVuY3Rpb24oIG9iaiApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAkLmV4dGVuZCggb2JqLCBwcm90b3MgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgfSwgcHJvdG9zICk7XHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyBVcGxvYWRlcuS4iuS8oOexu1xyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ3VwbG9hZGVyJyxbXHJcbiAgICAgICAgJ2Jhc2UnLFxyXG4gICAgICAgICdtZWRpYXRvcidcclxuICAgIF0sIGZ1bmN0aW9uKCBCYXNlLCBNZWRpYXRvciApIHtcclxuICAgIFxyXG4gICAgICAgIHZhciAkID0gQmFzZS4kO1xyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5LiK5Lyg5YWl5Y+j57G744CCXHJcbiAgICAgICAgICogQGNsYXNzIFVwbG9hZGVyXHJcbiAgICAgICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICogQGdyYW1tYXIgbmV3IFVwbG9hZGVyKCBvcHRzICkgPT4gVXBsb2FkZXJcclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIHZhciB1cGxvYWRlciA9IFdlYlVwbG9hZGVyLlVwbG9hZGVyKHtcclxuICAgICAgICAgKiAgICAgc3dmOiAncGF0aF9vZl9zd2YvVXBsb2FkZXIuc3dmJyxcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqICAgICAvLyDlvIDotbfliIbniYfkuIrkvKDjgIJcclxuICAgICAgICAgKiAgICAgY2h1bmtlZDogdHJ1ZVxyXG4gICAgICAgICAqIH0pO1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIFVwbG9hZGVyKCBvcHRzICkge1xyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCggdHJ1ZSwge30sIFVwbG9hZGVyLm9wdGlvbnMsIG9wdHMgKTtcclxuICAgICAgICAgICAgdGhpcy5faW5pdCggdGhpcy5vcHRpb25zICk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLy8gZGVmYXVsdCBPcHRpb25zXHJcbiAgICAgICAgLy8gd2lkZ2V0c+S4reacieebuOW6lOaJqeWxlVxyXG4gICAgICAgIFVwbG9hZGVyLm9wdGlvbnMgPSB7fTtcclxuICAgICAgICBNZWRpYXRvci5pbnN0YWxsVG8oIFVwbG9hZGVyLnByb3RvdHlwZSApO1xyXG4gICAgXHJcbiAgICAgICAgLy8g5om56YeP5re75Yqg57qv5ZG95Luk5byP5pa55rOV44CCXHJcbiAgICAgICAgJC5lYWNoKHtcclxuICAgICAgICAgICAgdXBsb2FkOiAnc3RhcnQtdXBsb2FkJyxcclxuICAgICAgICAgICAgc3RvcDogJ3N0b3AtdXBsb2FkJyxcclxuICAgICAgICAgICAgZ2V0RmlsZTogJ2dldC1maWxlJyxcclxuICAgICAgICAgICAgZ2V0RmlsZXM6ICdnZXQtZmlsZXMnLFxyXG4gICAgICAgICAgICBhZGRGaWxlOiAnYWRkLWZpbGUnLFxyXG4gICAgICAgICAgICBhZGRGaWxlczogJ2FkZC1maWxlJyxcclxuICAgICAgICAgICAgc29ydDogJ3NvcnQtZmlsZXMnLFxyXG4gICAgICAgICAgICByZW1vdmVGaWxlOiAncmVtb3ZlLWZpbGUnLFxyXG4gICAgICAgICAgICBjYW5jZWxGaWxlOiAnY2FuY2VsLWZpbGUnLFxyXG4gICAgICAgICAgICBza2lwRmlsZTogJ3NraXAtZmlsZScsXHJcbiAgICAgICAgICAgIHJldHJ5OiAncmV0cnknLFxyXG4gICAgICAgICAgICBpc0luUHJvZ3Jlc3M6ICdpcy1pbi1wcm9ncmVzcycsXHJcbiAgICAgICAgICAgIG1ha2VUaHVtYjogJ21ha2UtdGh1bWInLFxyXG4gICAgICAgICAgICBtZDVGaWxlOiAnbWQ1LWZpbGUnLFxyXG4gICAgICAgICAgICBnZXREaW1lbnNpb246ICdnZXQtZGltZW5zaW9uJyxcclxuICAgICAgICAgICAgYWRkQnV0dG9uOiAnYWRkLWJ0bicsXHJcbiAgICAgICAgICAgIHByZWRpY3RSdW50aW1lVHlwZTogJ3ByZWRpY3QtcnVudGltZS10eXBlJyxcclxuICAgICAgICAgICAgcmVmcmVzaDogJ3JlZnJlc2gnLFxyXG4gICAgICAgICAgICBkaXNhYmxlOiAnZGlzYWJsZScsXHJcbiAgICAgICAgICAgIGVuYWJsZTogJ2VuYWJsZScsXHJcbiAgICAgICAgICAgIHJlc2V0OiAncmVzZXQnXHJcbiAgICAgICAgfSwgZnVuY3Rpb24oIGZuLCBjb21tYW5kICkge1xyXG4gICAgICAgICAgICBVcGxvYWRlci5wcm90b3R5cGVbIGZuIF0gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3QoIGNvbW1hbmQsIGFyZ3VtZW50cyApO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgJC5leHRlbmQoIFVwbG9hZGVyLnByb3RvdHlwZSwge1xyXG4gICAgICAgICAgICBzdGF0ZTogJ3BlbmRpbmcnLFxyXG4gICAgXHJcbiAgICAgICAgICAgIF9pbml0OiBmdW5jdGlvbiggb3B0cyApIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG1lLnJlcXVlc3QoICdpbml0Jywgb3B0cywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWUuc3RhdGUgPSAncmVhZHknO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLnRyaWdnZXIoJ3JlYWR5Jyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICog6I635Y+W5oiW6ICF6K6+572uVXBsb2FkZXLphY3nva7pobnjgIJcclxuICAgICAgICAgICAgICogQG1ldGhvZCBvcHRpb25cclxuICAgICAgICAgICAgICogQGdyYW1tYXIgb3B0aW9uKCBrZXkgKSA9PiAqXHJcbiAgICAgICAgICAgICAqIEBncmFtbWFyIG9wdGlvbigga2V5LCB2YWwgKSA9PiBzZWxmXHJcbiAgICAgICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIC8vIOWIneWni+eKtuaAgeWbvueJh+S4iuS8oOWJjeS4jeS8muWOi+e8qVxyXG4gICAgICAgICAgICAgKiB2YXIgdXBsb2FkZXIgPSBuZXcgV2ViVXBsb2FkZXIuVXBsb2FkZXIoe1xyXG4gICAgICAgICAgICAgKiAgICAgY29tcHJlc3M6IG51bGw7XHJcbiAgICAgICAgICAgICAqIH0pO1xyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiAvLyDkv67mlLnlkI7lm77niYfkuIrkvKDliY3vvIzlsJ3or5XlsIblm77niYfljovnvKnliLAxNjAwICogMTYwMFxyXG4gICAgICAgICAgICAgKiB1cGxvYWRlci5vcHRpb24oICdjb21wcmVzcycsIHtcclxuICAgICAgICAgICAgICogICAgIHdpZHRoOiAxNjAwLFxyXG4gICAgICAgICAgICAgKiAgICAgaGVpZ2h0OiAxNjAwXHJcbiAgICAgICAgICAgICAqIH0pO1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgb3B0aW9uOiBmdW5jdGlvbigga2V5LCB2YWwgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gc2V0dGVyXHJcbiAgICAgICAgICAgICAgICBpZiAoIGFyZ3VtZW50cy5sZW5ndGggPiAxICkge1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAkLmlzUGxhaW5PYmplY3QoIHZhbCApICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmlzUGxhaW5PYmplY3QoIG9wdHNbIGtleSBdICkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQuZXh0ZW5kKCBvcHRzWyBrZXkgXSwgdmFsICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0c1sga2V5IF0gPSB2YWw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgeyAgICAvLyBnZXR0ZXJcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5ID8gb3B0c1sga2V5IF0gOiBvcHRzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiDojrflj5bmlofku7bnu5/orqHkv6Hmga/jgILov5Tlm57kuIDkuKrljIXlkKvkuIDkuIvkv6Hmga/nmoTlr7nosaHjgIJcclxuICAgICAgICAgICAgICogKiBgc3VjY2Vzc051bWAg5LiK5Lyg5oiQ5Yqf55qE5paH5Lu25pWwXHJcbiAgICAgICAgICAgICAqICogYHByb2dyZXNzTnVtYCDkuIrkvKDkuK3nmoTmlofku7bmlbBcclxuICAgICAgICAgICAgICogKiBgY2FuY2VsTnVtYCDooqvliKDpmaTnmoTmlofku7bmlbBcclxuICAgICAgICAgICAgICogKiBgaW52YWxpZE51bWAg5peg5pWI55qE5paH5Lu25pWwXHJcbiAgICAgICAgICAgICAqICogYHVwbG9hZEZhaWxOdW1gIOS4iuS8oOWksei0peeahOaWh+S7tuaVsFxyXG4gICAgICAgICAgICAgKiAqIGBxdWV1ZU51bWAg6L+Y5Zyo6Zif5YiX5Lit55qE5paH5Lu25pWwXHJcbiAgICAgICAgICAgICAqICogYGludGVycnVwdE51bWAg6KKr5pqC5YGc55qE5paH5Lu25pWwXHJcbiAgICAgICAgICAgICAqIEBtZXRob2QgZ2V0U3RhdHNcclxuICAgICAgICAgICAgICogQGdyYW1tYXIgZ2V0U3RhdHMoKSA9PiBPYmplY3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGdldFN0YXRzOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIC8vIHJldHVybiB0aGlzLl9tZ3IuZ2V0U3RhdHMuYXBwbHkoIHRoaXMuX21nciwgYXJndW1lbnRzICk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RhdHMgPSB0aGlzLnJlcXVlc3QoJ2dldC1zdGF0cycpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhdHMgPyB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc051bTogc3RhdHMubnVtT2ZTdWNjZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb2dyZXNzTnVtOiBzdGF0cy5udW1PZlByb2dyZXNzLFxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2hvIGNhcmU/XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcXVldWVGYWlsTnVtOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbE51bTogc3RhdHMubnVtT2ZDYW5jZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZE51bTogc3RhdHMubnVtT2ZJbnZhbGlkLFxyXG4gICAgICAgICAgICAgICAgICAgIHVwbG9hZEZhaWxOdW06IHN0YXRzLm51bU9mVXBsb2FkRmFpbGVkLFxyXG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlTnVtOiBzdGF0cy5udW1PZlF1ZXVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVycnVwdE51bTogc3RhdHMubnVtb2ZJbnRlcnJ1cHRcclxuICAgICAgICAgICAgICAgIH0gOiB7fTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvLyDpnIDopoHph43lhpnmraTmlrnms5XmnaXmnaXmlK/mjIFvcHRzLm9uRXZlbnTlkoxpbnN0YW5jZS5vbkV2ZW5055qE5aSE55CG5ZmoXHJcbiAgICAgICAgICAgIHRyaWdnZXI6IGZ1bmN0aW9uKCB0eXBlLyosIGFyZ3MuLi4qLyApIHtcclxuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbCggYXJndW1lbnRzLCAxICksXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cyA9IHRoaXMub3B0aW9ucyxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lID0gJ29uJyArIHR5cGUuc3Vic3RyaW5nKCAwLCAxICkudG9VcHBlckNhc2UoKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUuc3Vic3RyaW5nKCAxICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g6LCD55So6YCa6L+Hb27mlrnms5Xms6jlhoznmoRoYW5kbGVyLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBNZWRpYXRvci50cmlnZ2VyLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKSA9PT0gZmFsc2UgfHxcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDosIPnlKhvcHRzLm9uRXZlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgJC5pc0Z1bmN0aW9uKCBvcHRzWyBuYW1lIF0gKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRzWyBuYW1lIF0uYXBwbHkoIHRoaXMsIGFyZ3MgKSA9PT0gZmFsc2UgfHxcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDosIPnlKh0aGlzLm9uRXZlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgJC5pc0Z1bmN0aW9uKCB0aGlzWyBuYW1lIF0gKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzWyBuYW1lIF0uYXBwbHkoIHRoaXMsIGFyZ3MgKSA9PT0gZmFsc2UgfHxcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDlub/mkq3miYDmnIl1cGxvYWRlcueahOS6i+S7tuOAglxyXG4gICAgICAgICAgICAgICAgICAgICAgICBNZWRpYXRvci50cmlnZ2VyLmFwcGx5KCBNZWRpYXRvcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgWyB0aGlzLCB0eXBlIF0uY29uY2F0KCBhcmdzICkgKSA9PT0gZmFsc2UgKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiDplIDmr4Egd2VidXBsb2FkZXIg5a6e5L6LXHJcbiAgICAgICAgICAgICAqIEBtZXRob2QgZGVzdHJveVxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBkZXN0cm95KCkgPT4gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdCggJ2Rlc3Ryb3knLCBhcmd1bWVudHMgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub2ZmKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLy8gd2lkZ2V0cy93aWRnZXQuanPlsIbooaXlhYXmraTmlrnms5XnmoTor6bnu4bmlofmoaPjgIJcclxuICAgICAgICAgICAgcmVxdWVzdDogQmFzZS5ub29wXHJcbiAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDliJvlu7pVcGxvYWRlcuWunuS+i++8jOetieWQjOS6jm5ldyBVcGxvYWRlciggb3B0cyApO1xyXG4gICAgICAgICAqIEBtZXRob2QgY3JlYXRlXHJcbiAgICAgICAgICogQGNsYXNzIEJhc2VcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQGdyYW1tYXIgQmFzZS5jcmVhdGUoIG9wdHMgKSA9PiBVcGxvYWRlclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIEJhc2UuY3JlYXRlID0gVXBsb2FkZXIuY3JlYXRlID0gZnVuY3Rpb24oIG9wdHMgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVXBsb2FkZXIoIG9wdHMgKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgLy8g5pq06ZyyVXBsb2FkZXLvvIzlj6/ku6XpgJrov4flroPmnaXmianlsZXkuJrliqHpgLvovpHjgIJcclxuICAgICAgICBCYXNlLlVwbG9hZGVyID0gVXBsb2FkZXI7XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gVXBsb2FkZXI7XHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyBSdW50aW1l566h55CG5Zmo77yM6LSf6LSjUnVudGltZeeahOmAieaLqSwg6L+e5o6lXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgncnVudGltZS9ydW50aW1lJyxbXHJcbiAgICAgICAgJ2Jhc2UnLFxyXG4gICAgICAgICdtZWRpYXRvcidcclxuICAgIF0sIGZ1bmN0aW9uKCBCYXNlLCBNZWRpYXRvciApIHtcclxuICAgIFxyXG4gICAgICAgIHZhciAkID0gQmFzZS4kLFxyXG4gICAgICAgICAgICBmYWN0b3JpZXMgPSB7fSxcclxuICAgIFxyXG4gICAgICAgICAgICAvLyDojrflj5blr7nosaHnmoTnrKzkuIDkuKprZXlcclxuICAgICAgICAgICAgZ2V0Rmlyc3RLZXkgPSBmdW5jdGlvbiggb2JqICkge1xyXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGtleSBpbiBvYmogKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBvYmouaGFzT3duUHJvcGVydHkoIGtleSApICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgLy8g5o6l5Y+j57G744CCXHJcbiAgICAgICAgZnVuY3Rpb24gUnVudGltZSggb3B0aW9ucyApIHtcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyOiBkb2N1bWVudC5ib2R5XHJcbiAgICAgICAgICAgIH0sIG9wdGlvbnMgKTtcclxuICAgICAgICAgICAgdGhpcy51aWQgPSBCYXNlLmd1aWQoJ3J0XycpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICQuZXh0ZW5kKCBSdW50aW1lLnByb3RvdHlwZSwge1xyXG4gICAgXHJcbiAgICAgICAgICAgIGdldENvbnRhaW5lcjogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucyxcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQsIGNvbnRhaW5lcjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCB0aGlzLl9jb250YWluZXIgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRhaW5lcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcGFyZW50ID0gJCggb3B0cy5jb250YWluZXIgfHwgZG9jdW1lbnQuYm9keSApO1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyID0gJCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmF0dHIoICdpZCcsICdydF8nICsgdGhpcy51aWQgKTtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvcDogJzBweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogJzBweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcxcHgnLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogJzFweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcGFyZW50LmFwcGVuZCggY29udGFpbmVyICk7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnQuYWRkQ2xhc3MoJ3dlYnVwbG9hZGVyLWNvbnRhaW5lcicpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGFyZW50ID0gcGFyZW50O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBpbml0OiBCYXNlLm5vb3AsXHJcbiAgICAgICAgICAgIGV4ZWM6IEJhc2Uubm9vcCxcclxuICAgIFxyXG4gICAgICAgICAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbnRhaW5lciAmJiB0aGlzLl9jb250YWluZXIucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wYXJlbnQgJiYgdGhpcy5fcGFyZW50LnJlbW92ZUNsYXNzKCd3ZWJ1cGxvYWRlci1jb250YWluZXInKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub2ZmKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgIFJ1bnRpbWUub3JkZXJzID0gJ2h0bWw1LGZsYXNoJztcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5re75YqgUnVudGltZeWunueOsOOAglxyXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlICAgIOexu+Wei1xyXG4gICAgICAgICAqIEBwYXJhbSB7UnVudGltZX0gZmFjdG9yeSDlhbfkvZNSdW50aW1l5a6e546w44CCXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgUnVudGltZS5hZGRSdW50aW1lID0gZnVuY3Rpb24oIHR5cGUsIGZhY3RvcnkgKSB7XHJcbiAgICAgICAgICAgIGZhY3Rvcmllc1sgdHlwZSBdID0gZmFjdG9yeTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgUnVudGltZS5oYXNSdW50aW1lID0gZnVuY3Rpb24oIHR5cGUgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhISh0eXBlID8gZmFjdG9yaWVzWyB0eXBlIF0gOiBnZXRGaXJzdEtleSggZmFjdG9yaWVzICkpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBSdW50aW1lLmNyZWF0ZSA9IGZ1bmN0aW9uKCBvcHRzLCBvcmRlcnMgKSB7XHJcbiAgICAgICAgICAgIHZhciB0eXBlLCBydW50aW1lO1xyXG4gICAgXHJcbiAgICAgICAgICAgIG9yZGVycyA9IG9yZGVycyB8fCBSdW50aW1lLm9yZGVycztcclxuICAgICAgICAgICAgJC5lYWNoKCBvcmRlcnMuc3BsaXQoIC9cXHMqLFxccyovZyApLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGlmICggZmFjdG9yaWVzWyB0aGlzIF0gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICB0eXBlID0gdHlwZSB8fCBnZXRGaXJzdEtleSggZmFjdG9yaWVzICk7XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKCAhdHlwZSApIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUnVudGltZSBFcnJvcicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgcnVudGltZSA9IG5ldyBmYWN0b3JpZXNbIHR5cGUgXSggb3B0cyApO1xyXG4gICAgICAgICAgICByZXR1cm4gcnVudGltZTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgTWVkaWF0b3IuaW5zdGFsbFRvKCBSdW50aW1lLnByb3RvdHlwZSApO1xyXG4gICAgICAgIHJldHVybiBSdW50aW1lO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyBSdW50aW1l566h55CG5Zmo77yM6LSf6LSjUnVudGltZeeahOmAieaLqSwg6L+e5o6lXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgncnVudGltZS9jbGllbnQnLFtcclxuICAgICAgICAnYmFzZScsXHJcbiAgICAgICAgJ21lZGlhdG9yJyxcclxuICAgICAgICAncnVudGltZS9ydW50aW1lJ1xyXG4gICAgXSwgZnVuY3Rpb24oIEJhc2UsIE1lZGlhdG9yLCBSdW50aW1lICkge1xyXG4gICAgXHJcbiAgICAgICAgdmFyIGNhY2hlO1xyXG4gICAgXHJcbiAgICAgICAgY2FjaGUgPSAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBvYmogPSB7fTtcclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgYWRkOiBmdW5jdGlvbiggcnVudGltZSApIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmpbIHJ1bnRpbWUudWlkIF0gPSBydW50aW1lO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiggcnVpZCwgc3RhbmRhbG9uZSApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggcnVpZCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9ialsgcnVpZCBdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIGkgaW4gb2JqICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDmnInkupvnsbvlnovkuI3og73ph43nlKjvvIzmr5TlpoJmaWxlcGlja2VyLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHN0YW5kYWxvbmUgJiYgb2JqWyBpIF0uX19zdGFuZGFsb25lICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqWyBpIF07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uKCBydW50aW1lICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvYmpbIHJ1bnRpbWUudWlkIF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSkoKTtcclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIFJ1bnRpbWVDbGllbnQoIGNvbXBvbmVudCwgc3RhbmRhbG9uZSApIHtcclxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gQmFzZS5EZWZlcnJlZCgpLFxyXG4gICAgICAgICAgICAgICAgcnVudGltZTtcclxuICAgIFxyXG4gICAgICAgICAgICB0aGlzLnVpZCA9IEJhc2UuZ3VpZCgnY2xpZW50XycpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIOWFgeiuuHJ1bnRpbWXmsqHmnInliJ3lp4vljJbkuYvliY3vvIzms6jlhozkuIDkupvmlrnms5XlnKjliJ3lp4vljJblkI7miafooYzjgIJcclxuICAgICAgICAgICAgdGhpcy5ydW50aW1lUmVhZHkgPSBmdW5jdGlvbiggY2IgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQuZG9uZSggY2IgKTtcclxuICAgICAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3RSdW50aW1lID0gZnVuY3Rpb24oIG9wdHMsIGNiICkge1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBhbHJlYWR5IGNvbm5lY3RlZC5cclxuICAgICAgICAgICAgICAgIGlmICggcnVudGltZSApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2FscmVhZHkgY29ubmVjdGVkIScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5kb25lKCBjYiApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIHR5cGVvZiBvcHRzID09PSAnc3RyaW5nJyAmJiBjYWNoZS5nZXQoIG9wdHMgKSApIHtcclxuICAgICAgICAgICAgICAgICAgICBydW50aW1lID0gY2FjaGUuZ2V0KCBvcHRzICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOWDj2ZpbGVQaWNrZXLlj6rog73ni6znq4vlrZjlnKjvvIzkuI3og73lhaznlKjjgIJcclxuICAgICAgICAgICAgICAgIHJ1bnRpbWUgPSBydW50aW1lIHx8IGNhY2hlLmdldCggbnVsbCwgc3RhbmRhbG9uZSApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDpnIDopoHliJvlu7pcclxuICAgICAgICAgICAgICAgIGlmICggIXJ1bnRpbWUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcnVudGltZSA9IFJ1bnRpbWUuY3JlYXRlKCBvcHRzLCBvcHRzLnJ1bnRpbWVPcmRlciApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJ1bnRpbWUuX19wcm9taXNlID0gZGVmZXJyZWQucHJvbWlzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJ1bnRpbWUub25jZSggJ3JlYWR5JywgZGVmZXJyZWQucmVzb2x2ZSApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJ1bnRpbWUuaW5pdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlLmFkZCggcnVudGltZSApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJ1bnRpbWUuX19jbGllbnQgPSAxO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDmnaXoh6pjYWNoZVxyXG4gICAgICAgICAgICAgICAgICAgIEJhc2UuJC5leHRlbmQoIHJ1bnRpbWUub3B0aW9ucywgb3B0cyApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJ1bnRpbWUuX19wcm9taXNlLnRoZW4oIGRlZmVycmVkLnJlc29sdmUgKTtcclxuICAgICAgICAgICAgICAgICAgICBydW50aW1lLl9fY2xpZW50Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHN0YW5kYWxvbmUgJiYgKHJ1bnRpbWUuX19zdGFuZGFsb25lID0gc3RhbmRhbG9uZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcnVudGltZTtcclxuICAgICAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgICAgICB0aGlzLmdldFJ1bnRpbWUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBydW50aW1lO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgICAgIHRoaXMuZGlzY29ubmVjdFJ1bnRpbWUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGlmICggIXJ1bnRpbWUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBydW50aW1lLl9fY2xpZW50LS07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmICggcnVudGltZS5fX2NsaWVudCA8PSAwICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlLnJlbW92ZSggcnVudGltZSApO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBydW50aW1lLl9fcHJvbWlzZTtcclxuICAgICAgICAgICAgICAgICAgICBydW50aW1lLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcnVudGltZSA9IG51bGw7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgdGhpcy5leGVjID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoICFydW50aW1lICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBCYXNlLnNsaWNlKCBhcmd1bWVudHMgKTtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudCAmJiBhcmdzLnVuc2hpZnQoIGNvbXBvbmVudCApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcnVudGltZS5leGVjLmFwcGx5KCB0aGlzLCBhcmdzICk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgdGhpcy5nZXRSdWlkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcnVudGltZSAmJiBydW50aW1lLnVpZDtcclxuICAgICAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3kgPSAoZnVuY3Rpb24oIGRlc3Ryb3kgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVzdHJveSAmJiBkZXN0cm95LmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2Rlc3Ryb3knKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9mZigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhlYygnZGVzdHJveScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzY29ubmVjdFJ1bnRpbWUoKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pKCB0aGlzLmRlc3Ryb3kgKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBNZWRpYXRvci5pbnN0YWxsVG8oIFJ1bnRpbWVDbGllbnQucHJvdG90eXBlICk7XHJcbiAgICAgICAgcmV0dXJuIFJ1bnRpbWVDbGllbnQ7XHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyDplJnor6/kv6Hmga9cclxuICAgICAqL1xyXG4gICAgZGVmaW5lKCdsaWIvZG5kJyxbXHJcbiAgICAgICAgJ2Jhc2UnLFxyXG4gICAgICAgICdtZWRpYXRvcicsXHJcbiAgICAgICAgJ3J1bnRpbWUvY2xpZW50J1xyXG4gICAgXSwgZnVuY3Rpb24oIEJhc2UsIE1lZGlhdG9yLCBSdW50aW1lQ2xlbnQgKSB7XHJcbiAgICBcclxuICAgICAgICB2YXIgJCA9IEJhc2UuJDtcclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIERyYWdBbmREcm9wKCBvcHRzICkge1xyXG4gICAgICAgICAgICBvcHRzID0gdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sIERyYWdBbmREcm9wLm9wdGlvbnMsIG9wdHMgKTtcclxuICAgIFxyXG4gICAgICAgICAgICBvcHRzLmNvbnRhaW5lciA9ICQoIG9wdHMuY29udGFpbmVyICk7XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKCAhb3B0cy5jb250YWluZXIubGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgUnVudGltZUNsZW50LmNhbGwoIHRoaXMsICdEcmFnQW5kRHJvcCcgKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBEcmFnQW5kRHJvcC5vcHRpb25zID0ge1xyXG4gICAgICAgICAgICBhY2NlcHQ6IG51bGwsXHJcbiAgICAgICAgICAgIGRpc2FibGVHbG9iYWxEbmQ6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIEJhc2UuaW5oZXJpdHMoIFJ1bnRpbWVDbGVudCwge1xyXG4gICAgICAgICAgICBjb25zdHJ1Y3RvcjogRHJhZ0FuZERyb3AsXHJcbiAgICBcclxuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBtZS5jb25uZWN0UnVudGltZSggbWUub3B0aW9ucywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWUuZXhlYygnaW5pdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLnRyaWdnZXIoJ3JlYWR5Jyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgTWVkaWF0b3IuaW5zdGFsbFRvKCBEcmFnQW5kRHJvcC5wcm90b3R5cGUgKTtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBEcmFnQW5kRHJvcDtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IOe7hOS7tuWfuuexu+OAglxyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ3dpZGdldHMvd2lkZ2V0JyxbXHJcbiAgICAgICAgJ2Jhc2UnLFxyXG4gICAgICAgICd1cGxvYWRlcidcclxuICAgIF0sIGZ1bmN0aW9uKCBCYXNlLCBVcGxvYWRlciApIHtcclxuICAgIFxyXG4gICAgICAgIHZhciAkID0gQmFzZS4kLFxyXG4gICAgICAgICAgICBfaW5pdCA9IFVwbG9hZGVyLnByb3RvdHlwZS5faW5pdCxcclxuICAgICAgICAgICAgX2Rlc3Ryb3kgPSBVcGxvYWRlci5wcm90b3R5cGUuZGVzdHJveSxcclxuICAgICAgICAgICAgSUdOT1JFID0ge30sXHJcbiAgICAgICAgICAgIHdpZGdldENsYXNzID0gW107XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBpc0FycmF5TGlrZSggb2JqICkge1xyXG4gICAgICAgICAgICBpZiAoICFvYmogKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gb2JqLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIHR5cGUgPSAkLnR5cGUoIG9iaiApO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICggb2JqLm5vZGVUeXBlID09PSAxICYmIGxlbmd0aCApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHR5cGUgPT09ICdhcnJheScgfHwgdHlwZSAhPT0gJ2Z1bmN0aW9uJyAmJiB0eXBlICE9PSAnc3RyaW5nJyAmJlxyXG4gICAgICAgICAgICAgICAgICAgIChsZW5ndGggPT09IDAgfHwgdHlwZW9mIGxlbmd0aCA9PT0gJ251bWJlcicgJiYgbGVuZ3RoID4gMCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIChsZW5ndGggLSAxKSBpbiBvYmopO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIFdpZGdldCggdXBsb2FkZXIgKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3duZXIgPSB1cGxvYWRlcjtcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gdXBsb2FkZXIub3B0aW9ucztcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAkLmV4dGVuZCggV2lkZ2V0LnByb3RvdHlwZSwge1xyXG4gICAgXHJcbiAgICAgICAgICAgIGluaXQ6IEJhc2Uubm9vcCxcclxuICAgIFxyXG4gICAgICAgICAgICAvLyDnsbtCYWNrYm9uZeeahOS6i+S7tuebkeWQrOWjsOaYju+8jOebkeWQrHVwbG9hZGVy5a6e5L6L5LiK55qE5LqL5Lu2XHJcbiAgICAgICAgICAgIC8vIHdpZGdldOebtOaOpeaXoOazleebkeWQrOS6i+S7tu+8jOS6i+S7tuWPquiDvemAmui/h3VwbG9hZGVy5p2l5Lyg6YCSXHJcbiAgICAgICAgICAgIGludm9rZTogZnVuY3Rpb24oIGFwaU5hbWUsIGFyZ3MgKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnbWFrZS10aHVtYic6ICdtYWtlVGh1bWInXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICB2YXIgbWFwID0gdGhpcy5yZXNwb25zZU1hcDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c5pegQVBJ5ZON5bqU5aOw5piO5YiZ5b+955WlXHJcbiAgICAgICAgICAgICAgICBpZiAoICFtYXAgfHwgIShhcGlOYW1lIGluIG1hcCkgfHwgIShtYXBbIGFwaU5hbWUgXSBpbiB0aGlzKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAhJC5pc0Z1bmN0aW9uKCB0aGlzWyBtYXBbIGFwaU5hbWUgXSBdICkgKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSUdOT1JFO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpc1sgbWFwWyBhcGlOYW1lIF0gXS5hcHBseSggdGhpcywgYXJncyApO1xyXG4gICAgXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOWPkemAgeWRveS7pOOAguW9k+S8oOWFpWBjYWxsYmFja2DmiJbogIVgaGFuZGxlcmDkuK3ov5Tlm55gcHJvbWlzZWDml7bjgILov5Tlm57kuIDkuKrlvZPmiYDmnIlgaGFuZGxlcmDkuK3nmoRwcm9taXNl6YO95a6M5oiQ5ZCO5a6M5oiQ55qE5pawYHByb21pc2Vg44CCXHJcbiAgICAgICAgICAgICAqIEBtZXRob2QgcmVxdWVzdFxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciByZXF1ZXN0KCBjb21tYW5kLCBhcmdzICkgPT4gKiB8IFByb21pc2VcclxuICAgICAgICAgICAgICogQGdyYW1tYXIgcmVxdWVzdCggY29tbWFuZCwgYXJncywgY2FsbGJhY2sgKSA9PiBQcm9taXNlXHJcbiAgICAgICAgICAgICAqIEBmb3IgIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICByZXF1ZXN0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm93bmVyLnJlcXVlc3QuYXBwbHkoIHRoaXMub3duZXIsIGFyZ3VtZW50cyApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAvLyDmianlsZVVcGxvYWRlci5cclxuICAgICAgICAkLmV4dGVuZCggVXBsb2FkZXIucHJvdG90eXBlLCB7XHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7U3RyaW5nIHwgQXJyYXl9IFtkaXNhYmxlV2lkZ2V0cz11bmRlZmluZWRdXHJcbiAgICAgICAgICAgICAqIEBuYW1lc3BhY2Ugb3B0aW9uc1xyXG4gICAgICAgICAgICAgKiBAZm9yIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiDpu5jorqTmiYDmnIkgVXBsb2FkZXIucmVnaXN0ZXIg5LqG55qEIHdpZGdldCDpg73kvJrooqvliqDovb3vvIzlpoLmnpznpoHnlKjmn5DkuIDpg6jliIbvvIzor7fpgJrov4fmraQgb3B0aW9uIOaMh+Wumum7keWQjeWNleOAglxyXG4gICAgICAgICAgICAgKi9cclxuICAgIFxyXG4gICAgICAgICAgICAvLyDopoblhplfaW5pdOeUqOadpeWIneWni+WMlndpZGdldHNcclxuICAgICAgICAgICAgX2luaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICB3aWRnZXRzID0gbWUuX3dpZGdldHMgPSBbXSxcclxuICAgICAgICAgICAgICAgICAgICBkZWFjdGl2ZXMgPSBtZS5vcHRpb25zLmRpc2FibGVXaWRnZXRzIHx8ICcnO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAkLmVhY2goIHdpZGdldENsYXNzLCBmdW5jdGlvbiggXywga2xhc3MgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgKCFkZWFjdGl2ZXMgfHwgIX5kZWFjdGl2ZXMuaW5kZXhPZigga2xhc3MuX25hbWUgKSkgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0cy5wdXNoKCBuZXcga2xhc3MoIG1lICkgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX2luaXQuYXBwbHkoIG1lLCBhcmd1bWVudHMgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICByZXF1ZXN0OiBmdW5jdGlvbiggYXBpTmFtZSwgYXJncywgY2FsbGJhY2sgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaSA9IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0cyA9IHRoaXMuX3dpZGdldHMsXHJcbiAgICAgICAgICAgICAgICAgICAgbGVuID0gd2lkZ2V0cyAmJiB3aWRnZXRzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICBybHRzID0gW10sXHJcbiAgICAgICAgICAgICAgICAgICAgZGZkcyA9IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZGdldCwgcmx0LCBwcm9taXNlLCBrZXk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGFyZ3MgPSBpc0FycmF5TGlrZSggYXJncyApID8gYXJncyA6IFsgYXJncyBdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcclxuICAgICAgICAgICAgICAgICAgICB3aWRnZXQgPSB3aWRnZXRzWyBpIF07XHJcbiAgICAgICAgICAgICAgICAgICAgcmx0ID0gd2lkZ2V0Lmludm9rZSggYXBpTmFtZSwgYXJncyApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBybHQgIT09IElHTk9SRSApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEZWZlcnJlZOWvueixoVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIEJhc2UuaXNQcm9taXNlKCBybHQgKSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRmZHMucHVzaCggcmx0ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBybHRzLnB1c2goIHJsdCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzmnIljYWxsYmFja++8jOWImeeUqOW8guatpeaWueW8j+OAglxyXG4gICAgICAgICAgICAgICAgaWYgKCBjYWxsYmFjayB8fCBkZmRzLmxlbmd0aCApIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlID0gQmFzZS53aGVuLmFwcGx5KCBCYXNlLCBkZmRzICk7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5ID0gcHJvbWlzZS5waXBlID8gJ3BpcGUnIDogJ3RoZW4nO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5b6I6YeN6KaB5LiN6IO95Yig6Zmk44CC5Yig6Zmk5LqG5Lya5q275b6q546v44CCXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5L+d6K+B5omn6KGM6aG65bqP44CC6K6pY2FsbGJhY2vmgLvmmK/lnKjkuIvkuIDkuKogdGljayDkuK3miafooYzjgIJcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZVsga2V5IF0oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gQmFzZS5EZWZlcnJlZCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBhcmdzLmxlbmd0aCA9PT0gMSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncyA9IGFyZ3NbIDAgXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCBhcmdzICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMSApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pWyBjYWxsYmFjayA/IGtleSA6ICdkb25lJyBdKCBjYWxsYmFjayB8fCBCYXNlLm5vb3AgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJsdHNbIDAgXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIF9kZXN0cm95LmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3dpZGdldHMgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDmt7vliqDnu4Tku7ZcclxuICAgICAgICAgKiBAZ3JhbW1hciBVcGxvYWRlci5yZWdpc3Rlcihwcm90byk7XHJcbiAgICAgICAgICogQGdyYW1tYXIgVXBsb2FkZXIucmVnaXN0ZXIobWFwLCBwcm90byk7XHJcbiAgICAgICAgICogQHBhcmFtICB7b2JqZWN0fSByZXNwb25zZU1hcCBBUEkg5ZCN56ew5LiO5Ye95pWw5a6e546w55qE5pig5bCEXHJcbiAgICAgICAgICogQHBhcmFtICB7b2JqZWN0fSBwcm90byDnu4Tku7bljp/lnovvvIzmnoTpgKDlh73mlbDpgJrov4cgY29uc3RydWN0b3Ig5bGe5oCn5a6a5LmJXHJcbiAgICAgICAgICogQG1ldGhvZCBVcGxvYWRlci5yZWdpc3RlclxyXG4gICAgICAgICAqIEBmb3IgVXBsb2FkZXJcclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIFVwbG9hZGVyLnJlZ2lzdGVyKHtcclxuICAgICAgICAgKiAgICAgJ21ha2UtdGh1bWInOiAnbWFrZVRodW1iJ1xyXG4gICAgICAgICAqIH0sIHtcclxuICAgICAgICAgKiAgICAgaW5pdDogZnVuY3Rpb24oIG9wdGlvbnMgKSB7fSxcclxuICAgICAgICAgKiAgICAgbWFrZVRodW1iOiBmdW5jdGlvbigpIHt9XHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBVcGxvYWRlci5yZWdpc3Rlcih7XHJcbiAgICAgICAgICogICAgICdtYWtlLXRodW1iJzogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICogICAgICAgICBcclxuICAgICAgICAgKiAgICAgfVxyXG4gICAgICAgICAqIH0pO1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFVwbG9hZGVyLnJlZ2lzdGVyID0gV2lkZ2V0LnJlZ2lzdGVyID0gZnVuY3Rpb24oIHJlc3BvbnNlTWFwLCB3aWRnZXRQcm90byApIHtcclxuICAgICAgICAgICAgdmFyIG1hcCA9IHsgaW5pdDogJ2luaXQnLCBkZXN0cm95OiAnZGVzdHJveScsIG5hbWU6ICdhbm9ueW1vdXMnIH0sXHJcbiAgICAgICAgICAgICAgICBrbGFzcztcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgKSB7XHJcbiAgICAgICAgICAgICAgICB3aWRnZXRQcm90byA9IHJlc3BvbnNlTWFwO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDoh6rliqjnlJ/miJAgbWFwIOihqOOAglxyXG4gICAgICAgICAgICAgICAgJC5lYWNoKHdpZGdldFByb3RvLCBmdW5jdGlvbihrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGtleVswXSA9PT0gJ18nIHx8IGtleSA9PT0gJ25hbWUnICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXkgPT09ICduYW1lJyAmJiAobWFwLm5hbWUgPSB3aWRnZXRQcm90by5uYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcFtrZXkucmVwbGFjZSgvW0EtWl0vZywgJy0kJicpLnRvTG93ZXJDYXNlKCldID0ga2V5O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG1hcCA9ICQuZXh0ZW5kKCBtYXAsIHJlc3BvbnNlTWFwICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICB3aWRnZXRQcm90by5yZXNwb25zZU1hcCA9IG1hcDtcclxuICAgICAgICAgICAga2xhc3MgPSBCYXNlLmluaGVyaXRzKCBXaWRnZXQsIHdpZGdldFByb3RvICk7XHJcbiAgICAgICAgICAgIGtsYXNzLl9uYW1lID0gbWFwLm5hbWU7XHJcbiAgICAgICAgICAgIHdpZGdldENsYXNzLnB1c2goIGtsYXNzICk7XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIGtsYXNzO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDliKDpmaTmj5Lku7bvvIzlj6rmnInlnKjms6jlhozml7bmjIflrprkuoblkI3lrZfnmoTmiY3og73ooqvliKDpmaTjgIJcclxuICAgICAgICAgKiBAZ3JhbW1hciBVcGxvYWRlci51blJlZ2lzdGVyKG5hbWUpO1xyXG4gICAgICAgICAqIEBwYXJhbSAge3N0cmluZ30gbmFtZSDnu4Tku7blkI3lrZdcclxuICAgICAgICAgKiBAbWV0aG9kIFVwbG9hZGVyLnVuUmVnaXN0ZXJcclxuICAgICAgICAgKiBAZm9yIFVwbG9hZGVyXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFVwbG9hZGVyLnJlZ2lzdGVyKHtcclxuICAgICAgICAgKiAgICAgbmFtZTogJ2N1c3RvbScsXHJcbiAgICAgICAgICogICAgIFxyXG4gICAgICAgICAqICAgICAnbWFrZS10aHVtYic6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAqICAgICAgICAgXHJcbiAgICAgICAgICogICAgIH1cclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFVwbG9hZGVyLnVuUmVnaXN0ZXIoJ2N1c3RvbScpO1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFVwbG9hZGVyLnVuUmVnaXN0ZXIgPSBXaWRnZXQudW5SZWdpc3RlciA9IGZ1bmN0aW9uKCBuYW1lICkge1xyXG4gICAgICAgICAgICBpZiAoICFuYW1lIHx8IG5hbWUgPT09ICdhbm9ueW1vdXMnICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyDliKDpmaTmjIflrprnmoTmj5Lku7bjgIJcclxuICAgICAgICAgICAgZm9yICggdmFyIGkgPSB3aWRnZXRDbGFzcy5sZW5ndGg7IGktLTsgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHdpZGdldENsYXNzW2ldLl9uYW1lID09PSBuYW1lICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpZGdldENsYXNzLnNwbGljZShpLCAxKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBXaWRnZXQ7XHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyBEcmFnQW5kRHJvcCBXaWRnZXTjgIJcclxuICAgICAqL1xyXG4gICAgZGVmaW5lKCd3aWRnZXRzL2ZpbGVkbmQnLFtcclxuICAgICAgICAnYmFzZScsXHJcbiAgICAgICAgJ3VwbG9hZGVyJyxcclxuICAgICAgICAnbGliL2RuZCcsXHJcbiAgICAgICAgJ3dpZGdldHMvd2lkZ2V0J1xyXG4gICAgXSwgZnVuY3Rpb24oIEJhc2UsIFVwbG9hZGVyLCBEbmQgKSB7XHJcbiAgICAgICAgdmFyICQgPSBCYXNlLiQ7XHJcbiAgICBcclxuICAgICAgICBVcGxvYWRlci5vcHRpb25zLmRuZCA9ICcnO1xyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHByb3BlcnR5IHtTZWxlY3Rvcn0gW2RuZD11bmRlZmluZWRdICDmjIflrppEcmFnIEFuZCBEcm9w5ouW5ou955qE5a655Zmo77yM5aaC5p6c5LiN5oyH5a6a77yM5YiZ5LiN5ZCv5Yqo44CCXHJcbiAgICAgICAgICogQG5hbWVzcGFjZSBvcHRpb25zXHJcbiAgICAgICAgICogQGZvciBVcGxvYWRlclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7U2VsZWN0b3J9IFtkaXNhYmxlR2xvYmFsRG5kPWZhbHNlXSAg5piv5ZCm56aB5o6J5pW05Liq6aG16Z2i55qE5ouW5ou95Yqf6IO977yM5aaC5p6c5LiN56aB55So77yM5Zu+54mH5ouW6L+b5p2l55qE5pe25YCZ5Lya6buY6K6k6KKr5rWP6KeI5Zmo5omT5byA44CCXHJcbiAgICAgICAgICogQG5hbWVzcGFjZSBvcHRpb25zXHJcbiAgICAgICAgICogQGZvciBVcGxvYWRlclxyXG4gICAgICAgICAqL1xyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGV2ZW50IGRuZEFjY2VwdFxyXG4gICAgICAgICAqIEBwYXJhbSB7RGF0YVRyYW5zZmVySXRlbUxpc3R9IGl0ZW1zIERhdGFUcmFuc2Zlckl0ZW1cclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24g6Zi75q2i5q2k5LqL5Lu25Y+v5Lul5ouS57ud5p+Q5Lqb57G75Z6L55qE5paH5Lu25ouW5YWl6L+b5p2l44CC55uu5YmN5Y+q5pyJIGNocm9tZSDmj5Dkvpvov5nmoLfnmoQgQVBJ77yM5LiU5Y+q6IO96YCa6L+HIG1pbWUtdHlwZSDpqozor4HjgIJcclxuICAgICAgICAgKiBAZm9yICBVcGxvYWRlclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHJldHVybiBVcGxvYWRlci5yZWdpc3Rlcih7XHJcbiAgICAgICAgICAgIG5hbWU6ICdkbmQnLFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oIG9wdHMgKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmICggIW9wdHMuZG5kIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdCgncHJlZGljdC1ydW50aW1lLXR5cGUnKSAhPT0gJ2h0bWw1JyApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHZhciBtZSA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQgPSBCYXNlLkRlZmVycmVkKCksXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVHbG9iYWxEbmQ6IG9wdHMuZGlzYWJsZUdsb2JhbERuZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyOiBvcHRzLmRuZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXB0OiBvcHRzLmFjY2VwdFxyXG4gICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgIGRuZDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5kbmQgPSBkbmQgPSBuZXcgRG5kKCBvcHRpb25zICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGRuZC5vbmNlKCAncmVhZHknLCBkZWZlcnJlZC5yZXNvbHZlICk7XHJcbiAgICAgICAgICAgICAgICBkbmQub24oICdkcm9wJywgZnVuY3Rpb24oIGZpbGVzICkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLnJlcXVlc3QoICdhZGQtZmlsZScsIFsgZmlsZXMgXSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g5qOA5rWL5paH5Lu25piv5ZCm5YWo6YOo5YWB6K645re75Yqg44CCXHJcbiAgICAgICAgICAgICAgICBkbmQub24oICdhY2NlcHQnLCBmdW5jdGlvbiggaXRlbXMgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lLm93bmVyLnRyaWdnZXIoICdkbmRBY2NlcHQnLCBpdGVtcyApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGRuZC5pbml0KCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRuZCAmJiB0aGlzLmRuZC5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEBmaWxlT3ZlcnZpZXcg6ZSZ6K+v5L+h5oGvXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgnbGliL2ZpbGVwYXN0ZScsW1xyXG4gICAgICAgICdiYXNlJyxcclxuICAgICAgICAnbWVkaWF0b3InLFxyXG4gICAgICAgICdydW50aW1lL2NsaWVudCdcclxuICAgIF0sIGZ1bmN0aW9uKCBCYXNlLCBNZWRpYXRvciwgUnVudGltZUNsZW50ICkge1xyXG4gICAgXHJcbiAgICAgICAgdmFyICQgPSBCYXNlLiQ7XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBGaWxlUGFzdGUoIG9wdHMgKSB7XHJcbiAgICAgICAgICAgIG9wdHMgPSB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgb3B0cyApO1xyXG4gICAgICAgICAgICBvcHRzLmNvbnRhaW5lciA9ICQoIG9wdHMuY29udGFpbmVyIHx8IGRvY3VtZW50LmJvZHkgKTtcclxuICAgICAgICAgICAgUnVudGltZUNsZW50LmNhbGwoIHRoaXMsICdGaWxlUGFzdGUnICk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgQmFzZS5pbmhlcml0cyggUnVudGltZUNsZW50LCB7XHJcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yOiBGaWxlUGFzdGUsXHJcbiAgICBcclxuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBtZS5jb25uZWN0UnVudGltZSggbWUub3B0aW9ucywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWUuZXhlYygnaW5pdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLnRyaWdnZXIoJ3JlYWR5Jyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgTWVkaWF0b3IuaW5zdGFsbFRvKCBGaWxlUGFzdGUucHJvdG90eXBlICk7XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gRmlsZVBhc3RlO1xyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIEBmaWxlT3ZlcnZpZXcg57uE5Lu25Z+657G744CCXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgnd2lkZ2V0cy9maWxlcGFzdGUnLFtcclxuICAgICAgICAnYmFzZScsXHJcbiAgICAgICAgJ3VwbG9hZGVyJyxcclxuICAgICAgICAnbGliL2ZpbGVwYXN0ZScsXHJcbiAgICAgICAgJ3dpZGdldHMvd2lkZ2V0J1xyXG4gICAgXSwgZnVuY3Rpb24oIEJhc2UsIFVwbG9hZGVyLCBGaWxlUGFzdGUgKSB7XHJcbiAgICAgICAgdmFyICQgPSBCYXNlLiQ7XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcHJvcGVydHkge1NlbGVjdG9yfSBbcGFzdGU9dW5kZWZpbmVkXSAg5oyH5a6a55uR5ZCscGFzdGXkuovku7bnmoTlrrnlmajvvIzlpoLmnpzkuI3mjIflrprvvIzkuI3lkK/nlKjmraTlip/og73jgILmraTlip/og73kuLrpgJrov4fnspjotLTmnaXmt7vliqDmiKrlsY/nmoTlm77niYfjgILlu7rorq7orr7nva7kuLpgZG9jdW1lbnQuYm9keWAuXHJcbiAgICAgICAgICogQG5hbWVzcGFjZSBvcHRpb25zXHJcbiAgICAgICAgICogQGZvciBVcGxvYWRlclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHJldHVybiBVcGxvYWRlci5yZWdpc3Rlcih7XHJcbiAgICAgICAgICAgIG5hbWU6ICdwYXN0ZScsXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpbml0OiBmdW5jdGlvbiggb3B0cyApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCAhb3B0cy5wYXN0ZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlcXVlc3QoJ3ByZWRpY3QtcnVudGltZS10eXBlJykgIT09ICdodG1sNScgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB2YXIgbWUgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkID0gQmFzZS5EZWZlcnJlZCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXI6IG9wdHMucGFzdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY2VwdDogb3B0cy5hY2NlcHRcclxuICAgICAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgICAgICBwYXN0ZTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5wYXN0ZSA9IHBhc3RlID0gbmV3IEZpbGVQYXN0ZSggb3B0aW9ucyApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBwYXN0ZS5vbmNlKCAncmVhZHknLCBkZWZlcnJlZC5yZXNvbHZlICk7XHJcbiAgICAgICAgICAgICAgICBwYXN0ZS5vbiggJ3Bhc3RlJywgZnVuY3Rpb24oIGZpbGVzICkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLm93bmVyLnJlcXVlc3QoICdhZGQtZmlsZScsIFsgZmlsZXMgXSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHBhc3RlLmluaXQoKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFzdGUgJiYgdGhpcy5wYXN0ZS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IEJsb2JcclxuICAgICAqL1xyXG4gICAgZGVmaW5lKCdsaWIvYmxvYicsW1xyXG4gICAgICAgICdiYXNlJyxcclxuICAgICAgICAncnVudGltZS9jbGllbnQnXHJcbiAgICBdLCBmdW5jdGlvbiggQmFzZSwgUnVudGltZUNsaWVudCApIHtcclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIEJsb2IoIHJ1aWQsIHNvdXJjZSApIHtcclxuICAgICAgICAgICAgdmFyIG1lID0gdGhpcztcclxuICAgIFxyXG4gICAgICAgICAgICBtZS5zb3VyY2UgPSBzb3VyY2U7XHJcbiAgICAgICAgICAgIG1lLnJ1aWQgPSBydWlkO1xyXG4gICAgICAgICAgICB0aGlzLnNpemUgPSBzb3VyY2Uuc2l6ZSB8fCAwO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIOWmguaenOayoeacieaMh+WumiBtaW1ldHlwZSwg5L2G5piv55+l6YGT5paH5Lu25ZCO57yA44CCXHJcbiAgICAgICAgICAgIGlmICggIXNvdXJjZS50eXBlICYmIHRoaXMuZXh0ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgfidqcGcsanBlZyxwbmcsZ2lmLGJtcCcuaW5kZXhPZiggdGhpcy5leHQgKSApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudHlwZSA9ICdpbWFnZS8nICsgKHRoaXMuZXh0ID09PSAnanBnJyA/ICdqcGVnJyA6IHRoaXMuZXh0KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudHlwZSA9IHNvdXJjZS50eXBlIHx8ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgUnVudGltZUNsaWVudC5jYWxsKCBtZSwgJ0Jsb2InICk7XHJcbiAgICAgICAgICAgIHRoaXMudWlkID0gc291cmNlLnVpZCB8fCB0aGlzLnVpZDtcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoIHJ1aWQgKSB7XHJcbiAgICAgICAgICAgICAgICBtZS5jb25uZWN0UnVudGltZSggcnVpZCApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgQmFzZS5pbmhlcml0cyggUnVudGltZUNsaWVudCwge1xyXG4gICAgICAgICAgICBjb25zdHJ1Y3RvcjogQmxvYixcclxuICAgIFxyXG4gICAgICAgICAgICBzbGljZTogZnVuY3Rpb24oIHN0YXJ0LCBlbmQgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5leGVjKCAnc2xpY2UnLCBzdGFydCwgZW5kICk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgZ2V0U291cmNlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNvdXJjZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIEJsb2I7XHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICog5Li65LqG57uf5LiA5YyWRmxhc2jnmoRGaWxl5ZKMSFRNTDXnmoRGaWxl6ICM5a2Y5Zyo44CCXHJcbiAgICAgKiDku6Xoh7Pkuo7opoHosIPnlKhGbGFzaOmHjOmdoueahEZpbGXvvIzkuZ/lj6/ku6Xlg4/osIPnlKhIVE1MNeeJiOacrOeahEZpbGXkuIDkuIvjgIJcclxuICAgICAqIEBmaWxlT3ZlcnZpZXcgRmlsZVxyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ2xpYi9maWxlJyxbXHJcbiAgICAgICAgJ2Jhc2UnLFxyXG4gICAgICAgICdsaWIvYmxvYidcclxuICAgIF0sIGZ1bmN0aW9uKCBCYXNlLCBCbG9iICkge1xyXG4gICAgXHJcbiAgICAgICAgdmFyIHVpZCA9IDEsXHJcbiAgICAgICAgICAgIHJFeHQgPSAvXFwuKFteLl0rKSQvO1xyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gRmlsZSggcnVpZCwgZmlsZSApIHtcclxuICAgICAgICAgICAgdmFyIGV4dDtcclxuICAgIFxyXG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBmaWxlLm5hbWUgfHwgKCd1bnRpdGxlZCcgKyB1aWQrKyk7XHJcbiAgICAgICAgICAgIGV4dCA9IHJFeHQuZXhlYyggZmlsZS5uYW1lICkgPyBSZWdFeHAuJDEudG9Mb3dlckNhc2UoKSA6ICcnO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIHRvZG8g5pSv5oyB5YW25LuW57G75Z6L5paH5Lu255qE6L2s5o2i44CCXHJcbiAgICAgICAgICAgIC8vIOWmguaenOaciSBtaW1ldHlwZSwg5L2G5piv5paH5Lu25ZCN6YeM6Z2i5rKh5pyJ5om+5Ye65ZCO57yA6KeE5b6LXHJcbiAgICAgICAgICAgIGlmICggIWV4dCAmJiBmaWxlLnR5cGUgKSB7XHJcbiAgICAgICAgICAgICAgICBleHQgPSAvXFwvKGpwZ3xqcGVnfHBuZ3xnaWZ8Ym1wKSQvaS5leGVjKCBmaWxlLnR5cGUgKSA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlZ0V4cC4kMS50b0xvd2VyQ2FzZSgpIDogJyc7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5hbWUgKz0gJy4nICsgZXh0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgdGhpcy5leHQgPSBleHQ7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdE1vZGlmaWVkRGF0ZSA9IGZpbGUubGFzdE1vZGlmaWVkRGF0ZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIChuZXcgRGF0ZSgpKS50b0xvY2FsZVN0cmluZygpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIEJsb2IuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIHJldHVybiBCYXNlLmluaGVyaXRzKCBCbG9iLCBGaWxlICk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IOmUmeivr+S/oeaBr1xyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ2xpYi9maWxlcGlja2VyJyxbXHJcbiAgICAgICAgJ2Jhc2UnLFxyXG4gICAgICAgICdydW50aW1lL2NsaWVudCcsXHJcbiAgICAgICAgJ2xpYi9maWxlJ1xyXG4gICAgXSwgZnVuY3Rpb24oIEJhc2UsIFJ1bnRpbWVDbGllbnQsIEZpbGUgKSB7XHJcbiAgICBcclxuICAgICAgICB2YXIgJCA9IEJhc2UuJDtcclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIEZpbGVQaWNrZXIoIG9wdHMgKSB7XHJcbiAgICAgICAgICAgIG9wdHMgPSB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgRmlsZVBpY2tlci5vcHRpb25zLCBvcHRzICk7XHJcbiAgICBcclxuICAgICAgICAgICAgb3B0cy5jb250YWluZXIgPSAkKCBvcHRzLmlkICk7XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKCAhb3B0cy5jb250YWluZXIubGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfmjInpkq7mjIflrprplJnor68nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIG9wdHMuaW5uZXJIVE1MID0gb3B0cy5pbm5lckhUTUwgfHwgb3B0cy5sYWJlbCB8fFxyXG4gICAgICAgICAgICAgICAgICAgIG9wdHMuY29udGFpbmVyLmh0bWwoKSB8fCAnJztcclxuICAgIFxyXG4gICAgICAgICAgICBvcHRzLmJ1dHRvbiA9ICQoIG9wdHMuYnV0dG9uIHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpICk7XHJcbiAgICAgICAgICAgIG9wdHMuYnV0dG9uLmh0bWwoIG9wdHMuaW5uZXJIVE1MICk7XHJcbiAgICAgICAgICAgIG9wdHMuY29udGFpbmVyLmh0bWwoIG9wdHMuYnV0dG9uICk7XHJcbiAgICBcclxuICAgICAgICAgICAgUnVudGltZUNsaWVudC5jYWxsKCB0aGlzLCAnRmlsZVBpY2tlcicsIHRydWUgKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBGaWxlUGlja2VyLm9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGJ1dHRvbjogbnVsbCxcclxuICAgICAgICAgICAgY29udGFpbmVyOiBudWxsLFxyXG4gICAgICAgICAgICBsYWJlbDogbnVsbCxcclxuICAgICAgICAgICAgaW5uZXJIVE1MOiBudWxsLFxyXG4gICAgICAgICAgICBtdWx0aXBsZTogdHJ1ZSxcclxuICAgICAgICAgICAgYWNjZXB0OiBudWxsLFxyXG4gICAgICAgICAgICBuYW1lOiAnZmlsZScsXHJcbiAgICAgICAgICAgIHN0eWxlOiAnd2VidXBsb2FkZXItcGljaycgICAvL3BpY2sgZWxlbWVudCBjbGFzcyBhdHRyaWJ1dGUsIGRlZmF1bHQgaXMgXCJ3ZWJ1cGxvYWRlci1waWNrXCJcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgQmFzZS5pbmhlcml0cyggUnVudGltZUNsaWVudCwge1xyXG4gICAgICAgICAgICBjb25zdHJ1Y3RvcjogRmlsZVBpY2tlcixcclxuICAgIFxyXG4gICAgICAgICAgICBpbml0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZSA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cyA9IG1lLm9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uID0gb3B0cy5idXR0b24sXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUgPSBvcHRzLnN0eWxlO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoc3R5bGUpXHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmFkZENsYXNzKCd3ZWJ1cGxvYWRlci1waWNrJyk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG1lLm9uKCAnYWxsJywgZnVuY3Rpb24oIHR5cGUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVzO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggdHlwZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbW91c2VlbnRlcic6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3R5bGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmFkZENsYXNzKCd3ZWJ1cGxvYWRlci1waWNrLWhvdmVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdtb3VzZWxlYXZlJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHlsZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b24ucmVtb3ZlQ2xhc3MoJ3dlYnVwbG9hZGVyLXBpY2staG92ZXInKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NoYW5nZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlcyA9IG1lLmV4ZWMoJ2dldEZpbGVzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZS50cmlnZ2VyKCAnc2VsZWN0JywgJC5tYXAoIGZpbGVzLCBmdW5jdGlvbiggZmlsZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlID0gbmV3IEZpbGUoIG1lLmdldFJ1aWQoKSwgZmlsZSApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g6K6w5b2V5p2l5rqQ44CCXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZS5fcmVmZXIgPSBvcHRzLmNvbnRhaW5lcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBvcHRzLmNvbnRhaW5lciApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG1lLmNvbm5lY3RSdW50aW1lKCBvcHRzLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZS5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWUuZXhlYyggJ2luaXQnLCBvcHRzICk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWUudHJpZ2dlcigncmVhZHknKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZXNpemVIYW5kbGVyID0gQmFzZS5iaW5kRm4oIHRoaXMucmVmcmVzaCwgdGhpcyApO1xyXG4gICAgICAgICAgICAgICAgJCggd2luZG93ICkub24oICdyZXNpemUnLCB0aGlzLl9yZXNpemVIYW5kbGVyICk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgcmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2hpbUNvbnRhaW5lciA9IHRoaXMuZ2V0UnVudGltZSgpLmdldENvbnRhaW5lcigpLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbiA9IHRoaXMub3B0aW9ucy5idXR0b24sXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGggPSBidXR0b24ub3V0ZXJXaWR0aCA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b24ub3V0ZXJXaWR0aCgpIDogYnV0dG9uLndpZHRoKCksXHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQgPSBidXR0b24ub3V0ZXJIZWlnaHQgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLm91dGVySGVpZ2h0KCkgOiBidXR0b24uaGVpZ2h0KCksXHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBwb3MgPSBidXR0b24ub2Zmc2V0KCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHdpZHRoICYmIGhlaWdodCAmJiBzaGltQ29udGFpbmVyLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tOiAnYXV0bycsXHJcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6ICdhdXRvJyxcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogd2lkdGggKyAncHgnLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0ICsgJ3B4J1xyXG4gICAgICAgICAgICAgICAgfSkub2Zmc2V0KCBwb3MgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBlbmFibGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJ0biA9IHRoaXMub3B0aW9ucy5idXR0b247XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGJ0bi5yZW1vdmVDbGFzcygnd2VidXBsb2FkZXItcGljay1kaXNhYmxlJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBkaXNhYmxlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBidG4gPSB0aGlzLm9wdGlvbnMuYnV0dG9uO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldFJ1bnRpbWUoKS5nZXRDb250YWluZXIoKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIHRvcDogJy05OTk5OXB4J1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGJ0bi5hZGRDbGFzcygnd2VidXBsb2FkZXItcGljay1kaXNhYmxlJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYnRuID0gdGhpcy5vcHRpb25zLmJ1dHRvbjtcclxuICAgICAgICAgICAgICAgICQoIHdpbmRvdyApLm9mZiggJ3Jlc2l6ZScsIHRoaXMuX3Jlc2l6ZUhhbmRsZXIgKTtcclxuICAgICAgICAgICAgICAgIGJ0bi5yZW1vdmVDbGFzcygnd2VidXBsb2FkZXItcGljay1kaXNhYmxlIHdlYnVwbG9hZGVyLXBpY2staG92ZXIgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJ3dlYnVwbG9hZGVyLXBpY2snKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIEZpbGVQaWNrZXI7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IOaWh+S7tumAieaLqeebuOWFs1xyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ3dpZGdldHMvZmlsZXBpY2tlcicsW1xyXG4gICAgICAgICdiYXNlJyxcclxuICAgICAgICAndXBsb2FkZXInLFxyXG4gICAgICAgICdsaWIvZmlsZXBpY2tlcicsXHJcbiAgICAgICAgJ3dpZGdldHMvd2lkZ2V0J1xyXG4gICAgXSwgZnVuY3Rpb24oIEJhc2UsIFVwbG9hZGVyLCBGaWxlUGlja2VyICkge1xyXG4gICAgICAgIHZhciAkID0gQmFzZS4kO1xyXG4gICAgXHJcbiAgICAgICAgJC5leHRlbmQoIFVwbG9hZGVyLm9wdGlvbnMsIHtcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtTZWxlY3RvciB8IE9iamVjdH0gW3BpY2s9dW5kZWZpbmVkXVxyXG4gICAgICAgICAgICAgKiBAbmFtZXNwYWNlIG9wdGlvbnNcclxuICAgICAgICAgICAgICogQGZvciBVcGxvYWRlclxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g5oyH5a6a6YCJ5oup5paH5Lu255qE5oyJ6ZKu5a655Zmo77yM5LiN5oyH5a6a5YiZ5LiN5Yib5bu65oyJ6ZKu44CCXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqICogYGlkYCB7U2VsZXRvcnxkb219IOaMh+WumumAieaLqeaWh+S7tueahOaMiemSruWuueWZqO+8jOS4jeaMh+WumuWImeS4jeWIm+W7uuaMiemSruOAgioq5rOo5oSPKiog6L+Z6YeM6Jm954S25YaZ55qE5pivIGlkLCDkvYbmmK/kuI3mmK/lj6rmlK/mjIEgaWQsIOi/mOaUr+aMgSBjbGFzcywg5oiW6ICFIGRvbSDoioLngrnjgIJcclxuICAgICAgICAgICAgICogKiBgbGFiZWxgIHtTdHJpbmd9IOivt+mHh+eUqCBgaW5uZXJIVE1MYCDku6Pmm79cclxuICAgICAgICAgICAgICogKiBgaW5uZXJIVE1MYCB7U3RyaW5nfSDmjIflrprmjInpkq7mloflrZfjgILkuI3mjIflrprml7bkvJjlhYjku47mjIflrprnmoTlrrnlmajkuK3nnIvmmK/lkKboh6rluKbmloflrZfjgIJcclxuICAgICAgICAgICAgICogKiBgbXVsdGlwbGVgIHtCb29sZWFufSDmmK/lkKblvIDotbflkIzml7bpgInmi6nlpJrkuKrmlofku7bog73lipvjgIJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHBpY2s6IG51bGwsXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyb3l9IFthY2NlcHQ9bnVsbF1cclxuICAgICAgICAgICAgICogQG5hbWVzcGFjZSBvcHRpb25zXHJcbiAgICAgICAgICAgICAqIEBmb3IgVXBsb2FkZXJcclxuICAgICAgICAgICAgICogQGRlc2NyaXB0aW9uIOaMh+WumuaOpeWPl+WTquS6m+exu+Wei+eahOaWh+S7tuOAgiDnlLHkuo7nm67liY3ov5jmnIlleHTovaxtaW1lVHlwZeihqO+8jOaJgOS7pei/memHjOmcgOimgeWIhuW8gOaMh+WumuOAglxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiAqIGB0aXRsZWAge1N0cmluZ30g5paH5a2X5o+P6L+wXHJcbiAgICAgICAgICAgICAqICogYGV4dGVuc2lvbnNgIHtTdHJpbmd9IOWFgeiuuOeahOaWh+S7tuWQjue8gO+8jOS4jeW4pueCue+8jOWkmuS4queUqOmAl+WPt+WIhuWJsuOAglxyXG4gICAgICAgICAgICAgKiAqIGBtaW1lVHlwZXNgIHtTdHJpbmd9IOWkmuS4queUqOmAl+WPt+WIhuWJsuOAglxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiDlpoLvvJpcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogYGBgXHJcbiAgICAgICAgICAgICAqIHtcclxuICAgICAgICAgICAgICogICAgIHRpdGxlOiAnSW1hZ2VzJyxcclxuICAgICAgICAgICAgICogICAgIGV4dGVuc2lvbnM6ICdnaWYsanBnLGpwZWcsYm1wLHBuZycsXHJcbiAgICAgICAgICAgICAqICAgICBtaW1lVHlwZXM6ICdpbWFnZS8qJ1xyXG4gICAgICAgICAgICAgKiB9XHJcbiAgICAgICAgICAgICAqIGBgYFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgYWNjZXB0OiBudWxsLyp7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogJ0ltYWdlcycsXHJcbiAgICAgICAgICAgICAgICBleHRlbnNpb25zOiAnZ2lmLGpwZyxqcGVnLGJtcCxwbmcnLFxyXG4gICAgICAgICAgICAgICAgbWltZVR5cGVzOiAnaW1hZ2UvKidcclxuICAgICAgICAgICAgfSovXHJcbiAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gVXBsb2FkZXIucmVnaXN0ZXIoe1xyXG4gICAgICAgICAgICBuYW1lOiAncGlja2VyJyxcclxuICAgIFxyXG4gICAgICAgICAgICBpbml0OiBmdW5jdGlvbiggb3B0cyApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGlja2VycyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9wdHMucGljayAmJiB0aGlzLmFkZEJ0biggb3B0cy5waWNrICk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgcmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAkLmVhY2goIHRoaXMucGlja2VycywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQG1ldGhvZCBhZGRCdG5cclxuICAgICAgICAgICAgICogQGZvciBVcGxvYWRlclxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBhZGRCdG4oIHBpY2sgKSA9PiBQcm9taXNlXHJcbiAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAgICAgKiDmt7vliqDmlofku7bpgInmi6nmjInpkq7vvIzlpoLmnpzkuIDkuKrmjInpkq7kuI3lpJ/vvIzpnIDopoHosIPnlKjmraTmlrnms5XmnaXmt7vliqDjgILlj4LmlbDot59bb3B0aW9ucy5waWNrXSgjV2ViVXBsb2FkZXI6VXBsb2FkZXI6b3B0aW9ucynkuIDoh7TjgIJcclxuICAgICAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgICAgICogdXBsb2FkZXIuYWRkQnRuKHtcclxuICAgICAgICAgICAgICogICAgIGlkOiAnI2J0bkNvbnRhaW5lcicsXHJcbiAgICAgICAgICAgICAqICAgICBpbm5lckhUTUw6ICfpgInmi6nmlofku7YnXHJcbiAgICAgICAgICAgICAqIH0pO1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgYWRkQnRuOiBmdW5jdGlvbiggcGljayApIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZSA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cyA9IG1lLm9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjZXB0ID0gb3B0cy5hY2NlcHQsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXMgPSBbXTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCAhcGljayApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICQuaXNQbGFpbk9iamVjdCggcGljayApIHx8IChwaWNrID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBwaWNrXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgJCggcGljay5pZCApLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMsIHBpY2tlciwgZGVmZXJyZWQ7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZCA9IEJhc2UuRGVmZXJyZWQoKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgcGljaywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NlcHQ6ICQuaXNQbGFpbk9iamVjdCggYWNjZXB0ICkgPyBbIGFjY2VwdCBdIDogYWNjZXB0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2Y6IG9wdHMuc3dmLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBydW50aW1lT3JkZXI6IG9wdHMucnVudGltZU9yZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgcGlja2VyID0gbmV3IEZpbGVQaWNrZXIoIG9wdGlvbnMgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHBpY2tlci5vbmNlKCAncmVhZHknLCBkZWZlcnJlZC5yZXNvbHZlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgcGlja2VyLm9uKCAnc2VsZWN0JywgZnVuY3Rpb24oIGZpbGVzICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZS5vd25lci5yZXF1ZXN0KCAnYWRkLWZpbGUnLCBbIGZpbGVzIF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHBpY2tlci5vbignZGlhbG9nb3BlbicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZS5vd25lci50cmlnZ2VyKCdkaWFsb2dPcGVuJywgcGlja2VyLmJ1dHRvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcGlja2VyLmluaXQoKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIG1lLnBpY2tlcnMucHVzaCggcGlja2VyICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKCBkZWZlcnJlZC5wcm9taXNlKCkgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQmFzZS53aGVuLmFwcGx5KCBCYXNlLCBwcm9taXNlcyApO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIGRpc2FibGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgJC5lYWNoKCB0aGlzLnBpY2tlcnMsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgZW5hYmxlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICQuZWFjaCggdGhpcy5waWNrZXJzLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAkLmVhY2goIHRoaXMucGlja2VycywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGlja2VycyA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IEltYWdlXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgnbGliL2ltYWdlJyxbXHJcbiAgICAgICAgJ2Jhc2UnLFxyXG4gICAgICAgICdydW50aW1lL2NsaWVudCcsXHJcbiAgICAgICAgJ2xpYi9ibG9iJ1xyXG4gICAgXSwgZnVuY3Rpb24oIEJhc2UsIFJ1bnRpbWVDbGllbnQsIEJsb2IgKSB7XHJcbiAgICAgICAgdmFyICQgPSBCYXNlLiQ7XHJcbiAgICBcclxuICAgICAgICAvLyDmnoTpgKDlmajjgIJcclxuICAgICAgICBmdW5jdGlvbiBJbWFnZSggb3B0cyApIHtcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sIEltYWdlLm9wdGlvbnMsIG9wdHMgKTtcclxuICAgICAgICAgICAgUnVudGltZUNsaWVudC5jYWxsKCB0aGlzLCAnSW1hZ2UnICk7XHJcbiAgICBcclxuICAgICAgICAgICAgdGhpcy5vbiggJ2xvYWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2luZm8gPSB0aGlzLmV4ZWMoJ2luZm8nKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21ldGEgPSB0aGlzLmV4ZWMoJ21ldGEnKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLy8g6buY6K6k6YCJ6aG544CCXHJcbiAgICAgICAgSW1hZ2Uub3B0aW9ucyA9IHtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyDpu5jorqTnmoTlm77niYflpITnkIbotKjph49cclxuICAgICAgICAgICAgcXVhbGl0eTogOTAsXHJcbiAgICBcclxuICAgICAgICAgICAgLy8g5piv5ZCm6KOB5YmqXHJcbiAgICAgICAgICAgIGNyb3A6IGZhbHNlLFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIOaYr+WQpuS/neeVmeWktOmDqOS/oeaBr1xyXG4gICAgICAgICAgICBwcmVzZXJ2ZUhlYWRlcnM6IGZhbHNlLFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIOaYr+WQpuWFgeiuuOaUvuWkp+OAglxyXG4gICAgICAgICAgICBhbGxvd01hZ25pZnk6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIC8vIOe7p+aJv1J1bnRpbWVDbGllbnQuXHJcbiAgICAgICAgQmFzZS5pbmhlcml0cyggUnVudGltZUNsaWVudCwge1xyXG4gICAgICAgICAgICBjb25zdHJ1Y3RvcjogSW1hZ2UsXHJcbiAgICBcclxuICAgICAgICAgICAgaW5mbzogZnVuY3Rpb24oIHZhbCApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gc2V0dGVyXHJcbiAgICAgICAgICAgICAgICBpZiAoIHZhbCApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pbmZvID0gdmFsO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBnZXR0ZXJcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9pbmZvO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIG1ldGE6IGZ1bmN0aW9uKCB2YWwgKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIHNldHRlclxyXG4gICAgICAgICAgICAgICAgaWYgKCB2YWwgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWV0YSA9IHZhbDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gZ2V0dGVyXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fbWV0YTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBsb2FkRnJvbUJsb2I6IGZ1bmN0aW9uKCBibG9iICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICBydWlkID0gYmxvYi5nZXRSdWlkKCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdFJ1bnRpbWUoIHJ1aWQsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLmV4ZWMoICdpbml0JywgbWUub3B0aW9ucyApO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLmV4ZWMoICdsb2FkRnJvbUJsb2InLCBibG9iICk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBCYXNlLnNsaWNlKCBhcmd1bWVudHMgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmV4ZWMuYXBwbHkoIHRoaXMsIFsgJ3Jlc2l6ZScgXS5jb25jYXQoIGFyZ3MgKSApO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIGNyb3A6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBCYXNlLnNsaWNlKCBhcmd1bWVudHMgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmV4ZWMuYXBwbHkoIHRoaXMsIFsgJ2Nyb3AnIF0uY29uY2F0KCBhcmdzICkgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBnZXRBc0RhdGFVcmw6IGZ1bmN0aW9uKCB0eXBlICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhlYyggJ2dldEFzRGF0YVVybCcsIHR5cGUgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBnZXRBc0Jsb2I6IGZ1bmN0aW9uKCB0eXBlICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJsb2IgPSB0aGlzLmV4ZWMoICdnZXRBc0Jsb2InLCB0eXBlICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQmxvYiggdGhpcy5nZXRSdWlkKCksIGJsb2IgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIEltYWdlO1xyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIEBmaWxlT3ZlcnZpZXcg5Zu+54mH5pON5L2cLCDotJ/otKPpooTop4jlm77niYflkozkuIrkvKDliY3ljovnvKnlm77niYdcclxuICAgICAqL1xyXG4gICAgZGVmaW5lKCd3aWRnZXRzL2ltYWdlJyxbXHJcbiAgICAgICAgJ2Jhc2UnLFxyXG4gICAgICAgICd1cGxvYWRlcicsXHJcbiAgICAgICAgJ2xpYi9pbWFnZScsXHJcbiAgICAgICAgJ3dpZGdldHMvd2lkZ2V0J1xyXG4gICAgXSwgZnVuY3Rpb24oIEJhc2UsIFVwbG9hZGVyLCBJbWFnZSApIHtcclxuICAgIFxyXG4gICAgICAgIHZhciAkID0gQmFzZS4kLFxyXG4gICAgICAgICAgICB0aHJvdHRsZTtcclxuICAgIFxyXG4gICAgICAgIC8vIOagueaNruimgeWkhOeQhueahOaWh+S7tuWkp+Wwj+adpeiKgua1ge+8jOS4gOasoeS4jeiDveWkhOeQhuWkquWkmu+8jOS8muWNoeOAglxyXG4gICAgICAgIHRocm90dGxlID0gKGZ1bmN0aW9uKCBtYXggKSB7XHJcbiAgICAgICAgICAgIHZhciBvY2N1cGllZCA9IDAsXHJcbiAgICAgICAgICAgICAgICB3YWl0aW5nID0gW10sXHJcbiAgICAgICAgICAgICAgICB0aWNrID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoIHdhaXRpbmcubGVuZ3RoICYmIG9jY3VwaWVkIDwgbWF4ICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gd2FpdGluZy5zaGlmdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvY2N1cGllZCArPSBpdGVtWyAwIF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1bIDEgXSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCBlbWl0ZXIsIHNpemUsIGNiICkge1xyXG4gICAgICAgICAgICAgICAgd2FpdGluZy5wdXNoKFsgc2l6ZSwgY2IgXSk7XHJcbiAgICAgICAgICAgICAgICBlbWl0ZXIub25jZSggJ2Rlc3Ryb3knLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBvY2N1cGllZCAtPSBzaXplO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIHRpY2ssIDEgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggdGljaywgMSApO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pKCA1ICogMTAyNCAqIDEwMjQgKTtcclxuICAgIFxyXG4gICAgICAgICQuZXh0ZW5kKCBVcGxvYWRlci5vcHRpb25zLCB7XHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBbdGh1bWJdXHJcbiAgICAgICAgICAgICAqIEBuYW1lc3BhY2Ugb3B0aW9uc1xyXG4gICAgICAgICAgICAgKiBAZm9yIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiDphY3nva7nlJ/miJDnvKnnlaXlm77nmoTpgInpobnjgIJcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICog6buY6K6k5Li677yaXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAgICAgICAgICoge1xyXG4gICAgICAgICAgICAgKiAgICAgd2lkdGg6IDExMCxcclxuICAgICAgICAgICAgICogICAgIGhlaWdodDogMTEwLFxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiAgICAgLy8g5Zu+54mH6LSo6YeP77yM5Y+q5pyJdHlwZeS4umBpbWFnZS9qcGVnYOeahOaXtuWAmeaJjeacieaViOOAglxyXG4gICAgICAgICAgICAgKiAgICAgcXVhbGl0eTogNzAsXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqICAgICAvLyDmmK/lkKblhYHorrjmlL7lpKfvvIzlpoLmnpzmg7PopoHnlJ/miJDlsI/lm77nmoTml7blgJnkuI3lpLHnnJ/vvIzmraTpgInpobnlupTor6Xorr7nva7kuLpmYWxzZS5cclxuICAgICAgICAgICAgICogICAgIGFsbG93TWFnbmlmeTogdHJ1ZSxcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogICAgIC8vIOaYr+WQpuWFgeiuuOijgeWJquOAglxyXG4gICAgICAgICAgICAgKiAgICAgY3JvcDogdHJ1ZSxcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogICAgIC8vIOS4uuepuueahOivneWImeS/neeVmeWOn+acieWbvueJh+agvOW8j+OAglxyXG4gICAgICAgICAgICAgKiAgICAgLy8g5ZCm5YiZ5by65Yi26L2s5o2i5oiQ5oyH5a6a55qE57G75Z6L44CCXHJcbiAgICAgICAgICAgICAqICAgICB0eXBlOiAnaW1hZ2UvanBlZydcclxuICAgICAgICAgICAgICogfVxyXG4gICAgICAgICAgICAgKiBgYGBcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHRodW1iOiB7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMTEwLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMTAsXHJcbiAgICAgICAgICAgICAgICBxdWFsaXR5OiA3MCxcclxuICAgICAgICAgICAgICAgIGFsbG93TWFnbmlmeTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNyb3A6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBwcmVzZXJ2ZUhlYWRlcnM6IGZhbHNlLFxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDkuLrnqbrnmoTor53liJnkv53nlZnljp/mnInlm77niYfmoLzlvI/jgIJcclxuICAgICAgICAgICAgICAgIC8vIOWQpuWImeW8uuWItui9rOaNouaIkOaMh+WumueahOexu+Wei+OAglxyXG4gICAgICAgICAgICAgICAgLy8gSUUgOOS4i+mdoiBiYXNlNjQg5aSn5bCP5LiN6IO96LaF6L+HIDMySyDlkKbliJnpooTop4jlpLHotKXvvIzogIzpnZ4ganBlZyDnvJbnoIHnmoTlm77niYflvojlj69cclxuICAgICAgICAgICAgICAgIC8vIOiDveS8mui2hei/hyAzMmssIOaJgOS7pei/memHjOiuvue9ruaIkOmihOiniOeahOaXtuWAmemDveaYryBpbWFnZS9qcGVnXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnaW1hZ2UvanBlZydcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtPYmplY3R9IFtjb21wcmVzc11cclxuICAgICAgICAgICAgICogQG5hbWVzcGFjZSBvcHRpb25zXHJcbiAgICAgICAgICAgICAqIEBmb3IgVXBsb2FkZXJcclxuICAgICAgICAgICAgICogQGRlc2NyaXB0aW9uIOmFjee9ruWOi+e8qeeahOWbvueJh+eahOmAiemhueOAguWmguaenOatpOmAiemhueS4umBmYWxzZWAsIOWImeWbvueJh+WcqOS4iuS8oOWJjeS4jei/m+ihjOWOi+e8qeOAglxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiDpu5jorqTkuLrvvJpcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICAgICAgICAgKiB7XHJcbiAgICAgICAgICAgICAqICAgICB3aWR0aDogMTYwMCxcclxuICAgICAgICAgICAgICogICAgIGhlaWdodDogMTYwMCxcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogICAgIC8vIOWbvueJh+i0qOmHj++8jOWPquaciXR5cGXkuLpgaW1hZ2UvanBlZ2DnmoTml7blgJnmiY3mnInmlYjjgIJcclxuICAgICAgICAgICAgICogICAgIHF1YWxpdHk6IDkwLFxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiAgICAgLy8g5piv5ZCm5YWB6K645pS+5aSn77yM5aaC5p6c5oOz6KaB55Sf5oiQ5bCP5Zu+55qE5pe25YCZ5LiN5aSx55yf77yM5q2k6YCJ6aG55bqU6K+l6K6+572u5Li6ZmFsc2UuXHJcbiAgICAgICAgICAgICAqICAgICBhbGxvd01hZ25pZnk6IGZhbHNlLFxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiAgICAgLy8g5piv5ZCm5YWB6K646KOB5Ymq44CCXHJcbiAgICAgICAgICAgICAqICAgICBjcm9wOiBmYWxzZSxcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogICAgIC8vIOaYr+WQpuS/neeVmeWktOmDqG1ldGHkv6Hmga/jgIJcclxuICAgICAgICAgICAgICogICAgIHByZXNlcnZlSGVhZGVyczogdHJ1ZSxcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogICAgIC8vIOWmguaenOWPkeeOsOWOi+e8qeWQjuaWh+S7tuWkp+Wwj+avlOWOn+adpei/mOWkp++8jOWImeS9v+eUqOWOn+adpeWbvueJh1xyXG4gICAgICAgICAgICAgKiAgICAgLy8g5q2k5bGe5oCn5Y+v6IO95Lya5b2x5ZON5Zu+54mH6Ieq5Yqo57qg5q2j5Yqf6IO9XHJcbiAgICAgICAgICAgICAqICAgICBub0NvbXByZXNzSWZMYXJnZXI6IGZhbHNlLFxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiAgICAgLy8g5Y2V5L2N5a2X6IqC77yM5aaC5p6c5Zu+54mH5aSn5bCP5bCP5LqO5q2k5YC877yM5LiN5Lya6YeH55So5Y6L57yp44CCXHJcbiAgICAgICAgICAgICAqICAgICBjb21wcmVzc1NpemU6IDBcclxuICAgICAgICAgICAgICogfVxyXG4gICAgICAgICAgICAgKiBgYGBcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGNvbXByZXNzOiB7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMTYwMCxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMTYwMCxcclxuICAgICAgICAgICAgICAgIHF1YWxpdHk6IDkwLFxyXG4gICAgICAgICAgICAgICAgYWxsb3dNYWduaWZ5OiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGNyb3A6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgcHJlc2VydmVIZWFkZXJzOiB0cnVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBVcGxvYWRlci5yZWdpc3Rlcih7XHJcbiAgICBcclxuICAgICAgICAgICAgbmFtZTogJ2ltYWdlJyxcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiDnlJ/miJDnvKnnlaXlm77vvIzmraTov4fnqIvkuLrlvILmraXvvIzmiYDku6XpnIDopoHkvKDlhaVgY2FsbGJhY2tg44CCXHJcbiAgICAgICAgICAgICAqIOmAmuW4uOaDheWGteWcqOWbvueJh+WKoOWFpemYn+mHjOWQjuiwg+eUqOatpOaWueazleadpeeUn+aIkOmihOiniOWbvuS7peWinuW8uuS6pOS6kuaViOaenOOAglxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiDlvZMgd2lkdGgg5oiW6ICFIGhlaWdodCDnmoTlgLzku4vkuo4gMCAtIDEg5pe277yM6KKr5b2T5oiQ55m+5YiG5q+U5L2/55So44CCXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIGBjYWxsYmFja2DkuK3lj6/ku6XmjqXmlLbliLDkuKTkuKrlj4LmlbDjgIJcclxuICAgICAgICAgICAgICogKiDnrKzkuIDkuKrkuLplcnJvcu+8jOWmguaenOeUn+aIkOe8qeeVpeWbvuaciemUmeivr++8jOatpGVycm9y5bCG5Li655yf44CCXHJcbiAgICAgICAgICAgICAqICog56ys5LqM5Liq5Li6cmV0LCDnvKnnlaXlm77nmoREYXRhIFVSTOWAvOOAglxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiAqKuazqOaEjyoqXHJcbiAgICAgICAgICAgICAqIERhdGUgVVJM5ZyoSUU2LzfkuK3kuI3mlK/mjIHvvIzmiYDku6XkuI3nlKjosIPnlKjmraTmlrnms5XkuobvvIznm7TmjqXmmL7npLrkuIDlvKDmmoLkuI3mlK/mjIHpooTop4jlm77niYflpb3kuobjgIJcclxuICAgICAgICAgICAgICog5Lmf5Y+v5Lul5YCf5Yqp5pyN5Yqh56uv77yM5bCGIGJhc2U2NCDmlbDmja7kvKDnu5nmnI3liqHnq6/vvIznlJ/miJDkuIDkuKrkuLTml7bmlofku7bkvpvpooTop4jjgIJcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogQG1ldGhvZCBtYWtlVGh1bWJcclxuICAgICAgICAgICAgICogQGdyYW1tYXIgbWFrZVRodW1iKCBmaWxlLCBjYWxsYmFjayApID0+IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBtYWtlVGh1bWIoIGZpbGUsIGNhbGxiYWNrLCB3aWR0aCwgaGVpZ2h0ICkgPT4gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAqIEBmb3IgVXBsb2FkZXJcclxuICAgICAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogdXBsb2FkZXIub24oICdmaWxlUXVldWVkJywgZnVuY3Rpb24oIGZpbGUgKSB7XHJcbiAgICAgICAgICAgICAqICAgICB2YXIgJGxpID0gLi4uO1xyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiAgICAgdXBsb2FkZXIubWFrZVRodW1iKCBmaWxlLCBmdW5jdGlvbiggZXJyb3IsIHJldCApIHtcclxuICAgICAgICAgICAgICogICAgICAgICBpZiAoIGVycm9yICkge1xyXG4gICAgICAgICAgICAgKiAgICAgICAgICAgICAkbGkudGV4dCgn6aKE6KeI6ZSZ6K+vJyk7XHJcbiAgICAgICAgICAgICAqICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICogICAgICAgICAgICAgJGxpLmFwcGVuZCgnPGltZyBhbHQ9XCJcIiBzcmM9XCInICsgcmV0ICsgJ1wiIC8+Jyk7XHJcbiAgICAgICAgICAgICAqICAgICAgICAgfVxyXG4gICAgICAgICAgICAgKiAgICAgfSk7XHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIH0pO1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgbWFrZVRodW1iOiBmdW5jdGlvbiggZmlsZSwgY2IsIHdpZHRoLCBoZWlnaHQgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3B0cywgaW1hZ2U7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZpbGUgPSB0aGlzLnJlcXVlc3QoICdnZXQtZmlsZScsIGZpbGUgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g5Y+q6aKE6KeI5Zu+54mH5qC85byP44CCXHJcbiAgICAgICAgICAgICAgICBpZiAoICFmaWxlLnR5cGUubWF0Y2goIC9eaW1hZ2UvICkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2IoIHRydWUgKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG9wdHMgPSAkLmV4dGVuZCh7fSwgdGhpcy5vcHRpb25zLnRodW1iICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOWmguaenOS8oOWFpeeahOaYr29iamVjdC5cclxuICAgICAgICAgICAgICAgIGlmICggJC5pc1BsYWluT2JqZWN0KCB3aWR0aCApICkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdHMgPSAkLmV4dGVuZCggb3B0cywgd2lkdGggKTtcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHdpZHRoID0gd2lkdGggfHwgb3B0cy53aWR0aDtcclxuICAgICAgICAgICAgICAgIGhlaWdodCA9IGhlaWdodCB8fCBvcHRzLmhlaWdodDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaW1hZ2UgPSBuZXcgSW1hZ2UoIG9wdHMgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaW1hZ2Uub25jZSggJ2xvYWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlLl9pbmZvID0gZmlsZS5faW5mbyB8fCBpbWFnZS5pbmZvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZS5fbWV0YSA9IGZpbGUuX21ldGEgfHwgaW1hZ2UubWV0YSgpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6cIHdpZHRoIOeahOWAvOS7i+S6jiAwIC0gMVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOivtOaYjuiuvue9rueahOaYr+eZvuWIhuavlOOAglxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggd2lkdGggPD0gMSAmJiB3aWR0aCA+IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoID0gZmlsZS5faW5mby53aWR0aCAqIHdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWQjOagt+eahOinhOWImeW6lOeUqOS6jiBoZWlnaHRcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGhlaWdodCA8PSAxICYmIGhlaWdodCA+IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodCA9IGZpbGUuX2luZm8uaGVpZ2h0ICogaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlLnJlc2l6ZSggd2lkdGgsIGhlaWdodCApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOW9kyByZXNpemUg5a6M5ZCOXHJcbiAgICAgICAgICAgICAgICBpbWFnZS5vbmNlKCAnY29tcGxldGUnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYiggZmFsc2UsIGltYWdlLmdldEFzRGF0YVVybCggb3B0cy50eXBlICkgKTtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaW1hZ2Uub25jZSggJ2Vycm9yJywgZnVuY3Rpb24oIHJlYXNvbiApIHtcclxuICAgICAgICAgICAgICAgICAgICBjYiggcmVhc29uIHx8IHRydWUgKTtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdGhyb3R0bGUoIGltYWdlLCBmaWxlLnNvdXJjZS5zaXplLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlLl9pbmZvICYmIGltYWdlLmluZm8oIGZpbGUuX2luZm8gKTtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlLl9tZXRhICYmIGltYWdlLm1ldGEoIGZpbGUuX21ldGEgKTtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZS5sb2FkRnJvbUJsb2IoIGZpbGUuc291cmNlICk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBiZWZvcmVTZW5kRmlsZTogZnVuY3Rpb24oIGZpbGUgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucy5jb21wcmVzcyB8fCB0aGlzLm9wdGlvbnMucmVzaXplLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbXByZXNzU2l6ZSA9IG9wdHMgJiYgb3B0cy5jb21wcmVzc1NpemUgfHwgMCxcclxuICAgICAgICAgICAgICAgICAgICBub0NvbXByZXNzSWZMYXJnZXIgPSBvcHRzICYmIG9wdHMubm9Db21wcmVzc0lmTGFyZ2VyIHx8IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlLCBkZWZlcnJlZDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZmlsZSA9IHRoaXMucmVxdWVzdCggJ2dldC1maWxlJywgZmlsZSApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDlj6rljovnvKkganBlZyDlm77niYfmoLzlvI/jgIJcclxuICAgICAgICAgICAgICAgIC8vIGdpZiDlj6/og73kvJrkuKLlpLHpkohcclxuICAgICAgICAgICAgICAgIC8vIGJtcCBwbmcg5Z+65pys5LiK5bC65a+46YO95LiN5aSn77yM5LiU5Y6L57yp5q+U5q+U6L6D5bCP44CCXHJcbiAgICAgICAgICAgICAgICBpZiAoICFvcHRzIHx8ICF+J2ltYWdlL2pwZWcsaW1hZ2UvanBnJy5pbmRleE9mKCBmaWxlLnR5cGUgKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlLnNpemUgPCBjb21wcmVzc1NpemUgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZS5fY29tcHJlc3NlZCApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG9wdHMgPSAkLmV4dGVuZCh7fSwgb3B0cyApO1xyXG4gICAgICAgICAgICAgICAgZGVmZXJyZWQgPSBCYXNlLkRlZmVycmVkKCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGltYWdlID0gbmV3IEltYWdlKCBvcHRzICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGRlZmVycmVkLmFsd2F5cyhmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2UgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpbWFnZS5vbmNlKCAnZXJyb3InLCBkZWZlcnJlZC5yZWplY3QgKTtcclxuICAgICAgICAgICAgICAgIGltYWdlLm9uY2UoICdsb2FkJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gb3B0cy53aWR0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ID0gb3B0cy5oZWlnaHQ7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBmaWxlLl9pbmZvID0gZmlsZS5faW5mbyB8fCBpbWFnZS5pbmZvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZS5fbWV0YSA9IGZpbGUuX21ldGEgfHwgaW1hZ2UubWV0YSgpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6cIHdpZHRoIOeahOWAvOS7i+S6jiAwIC0gMVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOivtOaYjuiuvue9rueahOaYr+eZvuWIhuavlOOAglxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggd2lkdGggPD0gMSAmJiB3aWR0aCA+IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoID0gZmlsZS5faW5mby53aWR0aCAqIHdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWQjOagt+eahOinhOWImeW6lOeUqOS6jiBoZWlnaHRcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGhlaWdodCA8PSAxICYmIGhlaWdodCA+IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodCA9IGZpbGUuX2luZm8uaGVpZ2h0ICogaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlLnJlc2l6ZSggd2lkdGgsIGhlaWdodCApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGltYWdlLm9uY2UoICdjb21wbGV0ZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBibG9iLCBzaXplO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g56e75Yqo56uvIFVDIC8gcXEg5rWP6KeI5Zmo55qE5peg5Zu+5qih5byP5LiLXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY3R4LmdldEltYWdlRGF0YSDlpITnkIblpKflm77nmoTml7blgJnkvJrmiqUgRXhjZXB0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSU5ERVhfU0laRV9FUlI6IERPTSBFeGNlcHRpb24gMVxyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2IgPSBpbWFnZS5nZXRBc0Jsb2IoIG9wdHMudHlwZSApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemUgPSBmaWxlLnNpemU7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c5Y6L57yp5ZCO77yM5q+U5Y6f5p2l6L+Y5aSn5YiZ5LiN55So5Y6L57yp5ZCO55qE44CCXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggIW5vQ29tcHJlc3NJZkxhcmdlciB8fCBibG9iLnNpemUgPCBzaXplICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmlsZS5zb3VyY2UuZGVzdHJveSAmJiBmaWxlLnNvdXJjZS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlLnNvdXJjZSA9IGJsb2I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlLnNpemUgPSBibG9iLnNpemU7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUudHJpZ2dlciggJ3Jlc2l6ZScsIGJsb2Iuc2l6ZSwgc2l6ZSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5qCH6K6w77yM6YG/5YWN6YeN5aSN5Y6L57yp44CCXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUuX2NvbXByZXNzZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoIGUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWHuumUmeS6huebtOaOpee7p+e7re+8jOiuqeWFtuS4iuS8oOWOn+Wni+WbvueJh1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZpbGUuX2luZm8gJiYgaW1hZ2UuaW5mbyggZmlsZS5faW5mbyApO1xyXG4gICAgICAgICAgICAgICAgZmlsZS5fbWV0YSAmJiBpbWFnZS5tZXRhKCBmaWxlLl9tZXRhICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGltYWdlLmxvYWRGcm9tQmxvYiggZmlsZS5zb3VyY2UgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IOaWh+S7tuWxnuaAp+WwgeijhVxyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ2ZpbGUnLFtcclxuICAgICAgICAnYmFzZScsXHJcbiAgICAgICAgJ21lZGlhdG9yJ1xyXG4gICAgXSwgZnVuY3Rpb24oIEJhc2UsIE1lZGlhdG9yICkge1xyXG4gICAgXHJcbiAgICAgICAgdmFyICQgPSBCYXNlLiQsXHJcbiAgICAgICAgICAgIGlkUHJlZml4ID0gJ1dVX0ZJTEVfJyxcclxuICAgICAgICAgICAgaWRTdWZmaXggPSAwLFxyXG4gICAgICAgICAgICByRXh0ID0gL1xcLihbXi5dKykkLyxcclxuICAgICAgICAgICAgc3RhdHVzTWFwID0ge307XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBnaWQoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpZFByZWZpeCArIGlkU3VmZml4Kys7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5paH5Lu257G7XHJcbiAgICAgICAgICogQGNsYXNzIEZpbGVcclxuICAgICAgICAgKiBAY29uc3RydWN0b3Ig5p6E6YCg5Ye95pWwXHJcbiAgICAgICAgICogQGdyYW1tYXIgbmV3IEZpbGUoIHNvdXJjZSApID0+IEZpbGVcclxuICAgICAgICAgKiBAcGFyYW0ge0xpYi5GaWxlfSBzb3VyY2UgW2xpYi5GaWxlXSgjTGliLkZpbGUp5a6e5L6LLCDmraRzb3VyY2Xlr7nosaHmmK/luKbmnIlSdW50aW1l5L+h5oGv55qE44CCXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gV1VGaWxlKCBzb3VyY2UgKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOaWh+S7tuWQje+8jOWMheaLrOaJqeWxleWQje+8iOWQjue8gO+8iVxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkgbmFtZVxyXG4gICAgICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdGhpcy5uYW1lID0gc291cmNlLm5hbWUgfHwgJ1VudGl0bGVkJztcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICog5paH5Lu25L2T56ev77yI5a2X6IqC77yJXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSBzaXplXHJcbiAgICAgICAgICAgICAqIEB0eXBlIHt1aW50fVxyXG4gICAgICAgICAgICAgKiBAZGVmYXVsdCAwXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICB0aGlzLnNpemUgPSBzb3VyY2Uuc2l6ZSB8fCAwO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiDmlofku7ZNSU1FVFlQReexu+Wei++8jOS4juaWh+S7tuexu+Wei+eahOWvueW6lOWFs+ezu+ivt+WPguiAg1todHRwOi8vdC5jbi96OFpuRm55XShodHRwOi8vdC5jbi96OFpuRm55KVxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkgdHlwZVxyXG4gICAgICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxyXG4gICAgICAgICAgICAgKiBAZGVmYXVsdCAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJ1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdGhpcy50eXBlID0gc291cmNlLnR5cGUgfHwgJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSc7XHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOaWh+S7tuacgOWQjuS/ruaUueaXpeacn1xyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkgbGFzdE1vZGlmaWVkRGF0ZVxyXG4gICAgICAgICAgICAgKiBAdHlwZSB7aW50fVxyXG4gICAgICAgICAgICAgKiBAZGVmYXVsdCDlvZPliY3ml7bpl7TmiLNcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHRoaXMubGFzdE1vZGlmaWVkRGF0ZSA9IHNvdXJjZS5sYXN0TW9kaWZpZWREYXRlIHx8IChuZXcgRGF0ZSgpICogMSk7XHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOaWh+S7tklE77yM5q+P5Liq5a+56LGh5YW35pyJ5ZSv5LiASUTvvIzkuI7mlofku7blkI3ml6DlhbNcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IGlkXHJcbiAgICAgICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICB0aGlzLmlkID0gZ2lkKCk7XHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOaWh+S7tuaJqeWxleWQje+8jOmAmui/h+aWh+S7tuWQjeiOt+WPlu+8jOS+i+WmgnRlc3QucG5n55qE5omp5bGV5ZCN5Li6cG5nXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSBleHRcclxuICAgICAgICAgICAgICogQHR5cGUge3N0cmluZ31cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHRoaXMuZXh0ID0gckV4dC5leGVjKCB0aGlzLm5hbWUgKSA/IFJlZ0V4cC4kMSA6ICcnO1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOeKtuaAgeaWh+Wtl+ivtOaYjuOAguWcqOS4jeWQjOeahHN0YXR1c+ivreWig+S4i+acieS4jeWQjOeahOeUqOmAlOOAglxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkgc3RhdHVzVGV4dFxyXG4gICAgICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdGhpcy5zdGF0dXNUZXh0ID0gJyc7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8g5a2Y5YKo5paH5Lu254q25oCB77yM6Ziy5q2i6YCa6L+H5bGe5oCn55u05o6l5L+u5pS5XHJcbiAgICAgICAgICAgIHN0YXR1c01hcFsgdGhpcy5pZCBdID0gV1VGaWxlLlN0YXR1cy5JTklURUQ7XHJcbiAgICBcclxuICAgICAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZGVkID0gMDtcclxuICAgIFxyXG4gICAgICAgICAgICB0aGlzLm9uKCAnZXJyb3InLCBmdW5jdGlvbiggbXNnICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0dXMoIFdVRmlsZS5TdGF0dXMuRVJST1IsIG1zZyApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAkLmV4dGVuZCggV1VGaWxlLnByb3RvdHlwZSwge1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiDorr7nva7nirbmgIHvvIznirbmgIHlj5jljJbml7bkvJrop6blj5FgY2hhbmdlYOS6i+S7tuOAglxyXG4gICAgICAgICAgICAgKiBAbWV0aG9kIHNldFN0YXR1c1xyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBzZXRTdGF0dXMoIHN0YXR1c1ssIHN0YXR1c1RleHRdICk7XHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZS5TdGF0dXN8U3RyaW5nfSBzdGF0dXMgW+aWh+S7tueKtuaAgeWAvF0oI1dlYlVwbG9hZGVyOkZpbGU6RmlsZS5TdGF0dXMpXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbc3RhdHVzVGV4dD0nJ10g54q25oCB6K+05piO77yM5bi45ZyoZXJyb3Lml7bkvb/nlKjvvIznlKhodHRwLCBhYm9ydCxzZXJ2ZXLnrYnmnaXmoIforrDmmK/nlLHkuo7ku4DkuYjljp/lm6Dlr7zoh7Tmlofku7bplJnor6/jgIJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHNldFN0YXR1czogZnVuY3Rpb24oIHN0YXR1cywgdGV4dCApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdmFyIHByZXZTdGF0dXMgPSBzdGF0dXNNYXBbIHRoaXMuaWQgXTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdHlwZW9mIHRleHQgIT09ICd1bmRlZmluZWQnICYmICh0aGlzLnN0YXR1c1RleHQgPSB0ZXh0KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCBzdGF0dXMgIT09IHByZXZTdGF0dXMgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzTWFwWyB0aGlzLmlkIF0gPSBzdGF0dXM7XHJcbiAgICAgICAgICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAgICAgICAgICog5paH5Lu254q25oCB5Y+Y5YyWXHJcbiAgICAgICAgICAgICAgICAgICAgICogQGV2ZW50IHN0YXR1c2NoYW5nZVxyXG4gICAgICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlciggJ3N0YXR1c2NoYW5nZScsIHN0YXR1cywgcHJldlN0YXR1cyApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOiOt+WPluaWh+S7tueKtuaAgVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJuIHtGaWxlLlN0YXR1c31cclxuICAgICAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgICAgICAgICAgICAg5paH5Lu254q25oCB5YW35L2T5YyF5ous5Lul5LiL5Yeg56eN57G75Z6L77yaXHJcbiAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWIneWni+WMllxyXG4gICAgICAgICAgICAgICAgICAgICAgICBJTklURUQ6ICAgICAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDlt7LlhaXpmJ/liJdcclxuICAgICAgICAgICAgICAgICAgICAgICAgUVVFVUVEOiAgICAgMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5q2j5Zyo5LiK5LygXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFBST0dSRVNTOiAgICAgMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5LiK5Lyg5Ye66ZSZXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEVSUk9SOiAgICAgICAgIDMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOS4iuS8oOaIkOWKn1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDT01QTEVURTogICAgIDQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOS4iuS8oOWPlua2iFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBDQU5DRUxMRUQ6ICAgICA1XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZ2V0U3RhdHVzOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdGF0dXNNYXBbIHRoaXMuaWQgXTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICog6I635Y+W5paH5Lu25Y6f5aeL5L+h5oGv44CCXHJcbiAgICAgICAgICAgICAqIEByZXR1cm4geyp9XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBnZXRTb3VyY2U6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vZmYoKTtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBzdGF0dXNNYXBbIHRoaXMuaWQgXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgTWVkaWF0b3IuaW5zdGFsbFRvKCBXVUZpbGUucHJvdG90eXBlICk7XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDmlofku7bnirbmgIHlgLzvvIzlhbfkvZPljIXmi6zku6XkuIvlh6Dnp43nsbvlnovvvJpcclxuICAgICAgICAgKiAqIGBpbml0ZWRgIOWIneWni+eKtuaAgVxyXG4gICAgICAgICAqICogYHF1ZXVlZGAg5bey57uP6L+b5YWl6Zif5YiXLCDnrYnlvoXkuIrkvKBcclxuICAgICAgICAgKiAqIGBwcm9ncmVzc2Ag5LiK5Lyg5LitXHJcbiAgICAgICAgICogKiBgY29tcGxldGVgIOS4iuS8oOWujOaIkOOAglxyXG4gICAgICAgICAqICogYGVycm9yYCDkuIrkvKDlh7rplJnvvIzlj6/ph43or5VcclxuICAgICAgICAgKiAqIGBpbnRlcnJ1cHRgIOS4iuS8oOS4reaWre+8jOWPr+e7reS8oOOAglxyXG4gICAgICAgICAqICogYGludmFsaWRgIOaWh+S7tuS4jeWQiOagvO+8jOS4jeiDvemHjeivleS4iuS8oOOAguS8muiHquWKqOS7jumYn+WIl+S4reenu+mZpOOAglxyXG4gICAgICAgICAqICogYGNhbmNlbGxlZGAg5paH5Lu26KKr56e76Zmk44CCXHJcbiAgICAgICAgICogQHByb3BlcnR5IHtPYmplY3R9IFN0YXR1c1xyXG4gICAgICAgICAqIEBuYW1lc3BhY2UgRmlsZVxyXG4gICAgICAgICAqIEBjbGFzcyBGaWxlXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFdVRmlsZS5TdGF0dXMgPSB7XHJcbiAgICAgICAgICAgIElOSVRFRDogICAgICdpbml0ZWQnLCAgICAvLyDliJ3lp4vnirbmgIFcclxuICAgICAgICAgICAgUVVFVUVEOiAgICAgJ3F1ZXVlZCcsICAgIC8vIOW3sue7j+i/m+WFpemYn+WIlywg562J5b6F5LiK5LygXHJcbiAgICAgICAgICAgIFBST0dSRVNTOiAgICdwcm9ncmVzcycsICAgIC8vIOS4iuS8oOS4rVxyXG4gICAgICAgICAgICBFUlJPUjogICAgICAnZXJyb3InLCAgICAvLyDkuIrkvKDlh7rplJnvvIzlj6/ph43or5VcclxuICAgICAgICAgICAgQ09NUExFVEU6ICAgJ2NvbXBsZXRlJywgICAgLy8g5LiK5Lyg5a6M5oiQ44CCXHJcbiAgICAgICAgICAgIENBTkNFTExFRDogICdjYW5jZWxsZWQnLCAgICAvLyDkuIrkvKDlj5bmtojjgIJcclxuICAgICAgICAgICAgSU5URVJSVVBUOiAgJ2ludGVycnVwdCcsICAgIC8vIOS4iuS8oOS4reaWre+8jOWPr+e7reS8oOOAglxyXG4gICAgICAgICAgICBJTlZBTElEOiAgICAnaW52YWxpZCcgICAgLy8g5paH5Lu25LiN5ZCI5qC877yM5LiN6IO96YeN6K+V5LiK5Lyg44CCXHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBXVUZpbGU7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IOaWh+S7tumYn+WIl1xyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ3F1ZXVlJyxbXHJcbiAgICAgICAgJ2Jhc2UnLFxyXG4gICAgICAgICdtZWRpYXRvcicsXHJcbiAgICAgICAgJ2ZpbGUnXHJcbiAgICBdLCBmdW5jdGlvbiggQmFzZSwgTWVkaWF0b3IsIFdVRmlsZSApIHtcclxuICAgIFxyXG4gICAgICAgIHZhciAkID0gQmFzZS4kLFxyXG4gICAgICAgICAgICBTVEFUVVMgPSBXVUZpbGUuU3RhdHVzO1xyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5paH5Lu26Zif5YiXLCDnlKjmnaXlrZjlgqjlkITkuKrnirbmgIHkuK3nmoTmlofku7bjgIJcclxuICAgICAgICAgKiBAY2xhc3MgUXVldWVcclxuICAgICAgICAgKiBAZXh0ZW5kcyBNZWRpYXRvclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIFF1ZXVlKCkge1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiDnu5/orqHmlofku7bmlbDjgIJcclxuICAgICAgICAgICAgICogKiBgbnVtT2ZRdWV1ZWAg6Zif5YiX5Lit55qE5paH5Lu25pWw44CCXHJcbiAgICAgICAgICAgICAqICogYG51bU9mU3VjY2Vzc2Ag5LiK5Lyg5oiQ5Yqf55qE5paH5Lu25pWwXHJcbiAgICAgICAgICAgICAqICogYG51bU9mQ2FuY2VsYCDooqvlj5bmtojnmoTmlofku7bmlbBcclxuICAgICAgICAgICAgICogKiBgbnVtT2ZQcm9ncmVzc2Ag5q2j5Zyo5LiK5Lyg5Lit55qE5paH5Lu25pWwXHJcbiAgICAgICAgICAgICAqICogYG51bU9mVXBsb2FkRmFpbGVkYCDkuIrkvKDplJnor6/nmoTmlofku7bmlbDjgIJcclxuICAgICAgICAgICAgICogKiBgbnVtT2ZJbnZhbGlkYCDml6DmlYjnmoTmlofku7bmlbDjgIJcclxuICAgICAgICAgICAgICogKiBgbnVtb2ZEZWxldGVkYCDooqvnp7vpmaTnmoTmlofku7bmlbDjgIJcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtPYmplY3R9IHN0YXRzXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRzID0ge1xyXG4gICAgICAgICAgICAgICAgbnVtT2ZRdWV1ZTogMCxcclxuICAgICAgICAgICAgICAgIG51bU9mU3VjY2VzczogMCxcclxuICAgICAgICAgICAgICAgIG51bU9mQ2FuY2VsOiAwLFxyXG4gICAgICAgICAgICAgICAgbnVtT2ZQcm9ncmVzczogMCxcclxuICAgICAgICAgICAgICAgIG51bU9mVXBsb2FkRmFpbGVkOiAwLFxyXG4gICAgICAgICAgICAgICAgbnVtT2ZJbnZhbGlkOiAwLFxyXG4gICAgICAgICAgICAgICAgbnVtb2ZEZWxldGVkOiAwLFxyXG4gICAgICAgICAgICAgICAgbnVtb2ZJbnRlcnJ1cHQ6IDBcclxuICAgICAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyDkuIrkvKDpmJ/liJfvvIzku4XljIXmi6znrYnlvoXkuIrkvKDnmoTmlofku7ZcclxuICAgICAgICAgICAgdGhpcy5fcXVldWUgPSBbXTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyDlrZjlgqjmiYDmnInmlofku7ZcclxuICAgICAgICAgICAgdGhpcy5fbWFwID0ge307XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgJC5leHRlbmQoIFF1ZXVlLnByb3RvdHlwZSwge1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiDlsIbmlrDmlofku7bliqDlhaXlr7npmJ/liJflsL7pg6hcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogQG1ldGhvZCBhcHBlbmRcclxuICAgICAgICAgICAgICogQHBhcmFtICB7RmlsZX0gZmlsZSAgIOaWh+S7tuWvueixoVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgYXBwZW5kOiBmdW5jdGlvbiggZmlsZSApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3F1ZXVlLnB1c2goIGZpbGUgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2ZpbGVBZGRlZCggZmlsZSApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOWwhuaWsOaWh+S7tuWKoOWFpeWvuemYn+WIl+WktOmDqFxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBAbWV0aG9kIHByZXBlbmRcclxuICAgICAgICAgICAgICogQHBhcmFtICB7RmlsZX0gZmlsZSAgIOaWh+S7tuWvueixoVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgcHJlcGVuZDogZnVuY3Rpb24oIGZpbGUgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9xdWV1ZS51bnNoaWZ0KCBmaWxlICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9maWxlQWRkZWQoIGZpbGUgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiDojrflj5bmlofku7blr7nosaFcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogQG1ldGhvZCBnZXRGaWxlXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSAge1N0cmluZ30gZmlsZUlkICAg5paH5Lu2SURcclxuICAgICAgICAgICAgICogQHJldHVybiB7RmlsZX1cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGdldEZpbGU6IGZ1bmN0aW9uKCBmaWxlSWQgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHR5cGVvZiBmaWxlSWQgIT09ICdzdHJpbmcnICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWxlSWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fbWFwWyBmaWxlSWQgXTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICog5LuO6Zif5YiX5Lit5Y+W5Ye65LiA5Liq5oyH5a6a54q25oCB55qE5paH5Lu244CCXHJcbiAgICAgICAgICAgICAqIEBncmFtbWFyIGZldGNoKCBzdGF0dXMgKSA9PiBGaWxlXHJcbiAgICAgICAgICAgICAqIEBtZXRob2QgZmV0Y2hcclxuICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHN0YXR1cyBb5paH5Lu254q25oCB5YC8XSgjV2ViVXBsb2FkZXI6RmlsZTpGaWxlLlN0YXR1cylcclxuICAgICAgICAgICAgICogQHJldHVybiB7RmlsZX0gW0ZpbGVdKCNXZWJVcGxvYWRlcjpGaWxlKVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZmV0Y2g6IGZ1bmN0aW9uKCBzdGF0dXMgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGVuID0gdGhpcy5fcXVldWUubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgIGksIGZpbGU7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHN0YXR1cyA9IHN0YXR1cyB8fCBTVEFUVVMuUVVFVUVEO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbGUgPSB0aGlzLl9xdWV1ZVsgaSBdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBzdGF0dXMgPT09IGZpbGUuZ2V0U3RhdHVzKCkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWxlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOWvuemYn+WIl+i/m+ihjOaOkuW6j++8jOiDveWkn+aOp+WItuaWh+S7tuS4iuS8oOmhuuW6j+OAglxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBzb3J0KCBmbiApID0+IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgKiBAbWV0aG9kIHNvcnRcclxuICAgICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4g5o6S5bqP5pa55rOVXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBzb3J0OiBmdW5jdGlvbiggZm4gKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJyApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9xdWV1ZS5zb3J0KCBmbiApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiDojrflj5bmjIflrprnsbvlnovnmoTmlofku7bliJfooagsIOWIl+ihqOS4reavj+S4gOS4quaIkOWRmOS4ultGaWxlXSgjV2ViVXBsb2FkZXI6RmlsZSnlr7nosaHjgIJcclxuICAgICAgICAgICAgICogQGdyYW1tYXIgZ2V0RmlsZXMoIFtzdGF0dXMxWywgc3RhdHVzMiAuLi5dXSApID0+IEFycmF5XHJcbiAgICAgICAgICAgICAqIEBtZXRob2QgZ2V0RmlsZXNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IFtzdGF0dXNdIFvmlofku7bnirbmgIHlgLxdKCNXZWJVcGxvYWRlcjpGaWxlOkZpbGUuU3RhdHVzKVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZ2V0RmlsZXM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0cyA9IFtdLnNsaWNlLmNhbGwoIGFyZ3VtZW50cywgMCApLFxyXG4gICAgICAgICAgICAgICAgICAgIHJldCA9IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIGkgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGxlbiA9IHRoaXMuX3F1ZXVlLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICBmaWxlO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlID0gdGhpcy5fcXVldWVbIGkgXTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggc3RzLmxlbmd0aCAmJiAhfiQuaW5BcnJheSggZmlsZS5nZXRTdGF0dXMoKSwgc3RzICkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldC5wdXNoKCBmaWxlICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOWcqOmYn+WIl+S4reWIoOmZpOaWh+S7tuOAglxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciByZW1vdmVGaWxlKCBmaWxlICkgPT4gQXJyYXlcclxuICAgICAgICAgICAgICogQG1ldGhvZCByZW1vdmVGaWxlXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZX0g5paH5Lu25a+56LGh44CCXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICByZW1vdmVGaWxlOiBmdW5jdGlvbiggZmlsZSApIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZSA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcgPSB0aGlzLl9tYXBbIGZpbGUuaWQgXTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCBleGlzdGluZyApIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fbWFwWyBmaWxlLmlkIF07XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0cy5udW1vZkRlbGV0ZWQrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBfZmlsZUFkZGVkOiBmdW5jdGlvbiggZmlsZSApIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZSA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcgPSB0aGlzLl9tYXBbIGZpbGUuaWQgXTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCAhZXhpc3RpbmcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFwWyBmaWxlLmlkIF0gPSBmaWxlO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZS5vbiggJ3N0YXR1c2NoYW5nZScsIGZ1bmN0aW9uKCBjdXIsIHByZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWUuX29uRmlsZVN0YXR1c0NoYW5nZSggY3VyLCBwcmUgKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBfb25GaWxlU3RhdHVzQ2hhbmdlOiBmdW5jdGlvbiggY3VyU3RhdHVzLCBwcmVTdGF0dXMgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RhdHMgPSB0aGlzLnN0YXRzO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKCBwcmVTdGF0dXMgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBTVEFUVVMuUFJPR1JFU1M6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzLm51bU9mUHJvZ3Jlc3MtLTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFNUQVRVUy5RVUVVRUQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzLm51bU9mUXVldWUgLS07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBTVEFUVVMuRVJST1I6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzLm51bU9mVXBsb2FkRmFpbGVkLS07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBTVEFUVVMuSU5WQUxJRDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHMubnVtT2ZJbnZhbGlkLS07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBTVEFUVVMuSU5URVJSVVBUOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0cy5udW1vZkludGVycnVwdC0tO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgc3dpdGNoICggY3VyU3RhdHVzICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgU1RBVFVTLlFVRVVFRDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHMubnVtT2ZRdWV1ZSsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgU1RBVFVTLlBST0dSRVNTOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0cy5udW1PZlByb2dyZXNzKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBTVEFUVVMuRVJST1I6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzLm51bU9mVXBsb2FkRmFpbGVkKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBTVEFUVVMuQ09NUExFVEU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzLm51bU9mU3VjY2VzcysrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgU1RBVFVTLkNBTkNFTExFRDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHMubnVtT2ZDYW5jZWwrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgU1RBVFVTLklOVkFMSUQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzLm51bU9mSW52YWxpZCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgU1RBVFVTLklOVEVSUlVQVDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHMubnVtb2ZJbnRlcnJ1cHQrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgTWVkaWF0b3IuaW5zdGFsbFRvKCBRdWV1ZS5wcm90b3R5cGUgKTtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBRdWV1ZTtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IOmYn+WIl1xyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ3dpZGdldHMvcXVldWUnLFtcclxuICAgICAgICAnYmFzZScsXHJcbiAgICAgICAgJ3VwbG9hZGVyJyxcclxuICAgICAgICAncXVldWUnLFxyXG4gICAgICAgICdmaWxlJyxcclxuICAgICAgICAnbGliL2ZpbGUnLFxyXG4gICAgICAgICdydW50aW1lL2NsaWVudCcsXHJcbiAgICAgICAgJ3dpZGdldHMvd2lkZ2V0J1xyXG4gICAgXSwgZnVuY3Rpb24oIEJhc2UsIFVwbG9hZGVyLCBRdWV1ZSwgV1VGaWxlLCBGaWxlLCBSdW50aW1lQ2xpZW50ICkge1xyXG4gICAgXHJcbiAgICAgICAgdmFyICQgPSBCYXNlLiQsXHJcbiAgICAgICAgICAgIHJFeHQgPSAvXFwuXFx3KyQvLFxyXG4gICAgICAgICAgICBTdGF0dXMgPSBXVUZpbGUuU3RhdHVzO1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIFVwbG9hZGVyLnJlZ2lzdGVyKHtcclxuICAgICAgICAgICAgbmFtZTogJ3F1ZXVlJyxcclxuICAgIFxyXG4gICAgICAgICAgICBpbml0OiBmdW5jdGlvbiggb3B0cyApIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZSA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQsIGxlbiwgaSwgaXRlbSwgYXJyLCBhY2NlcHQsIHJ1bnRpbWU7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmICggJC5pc1BsYWluT2JqZWN0KCBvcHRzLmFjY2VwdCApICkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdHMuYWNjZXB0ID0gWyBvcHRzLmFjY2VwdCBdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBhY2NlcHTkuK3nmoTkuK3nlJ/miJDljLnphY3mraPliJnjgIJcclxuICAgICAgICAgICAgICAgIGlmICggb3B0cy5hY2NlcHQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyID0gW107XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKCBpID0gMCwgbGVuID0gb3B0cy5hY2NlcHQubGVuZ3RoOyBpIDwgbGVuOyBpKysgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBvcHRzLmFjY2VwdFsgaSBdLmV4dGVuc2lvbnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gJiYgYXJyLnB1c2goIGl0ZW0gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGFyci5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY2VwdCA9ICdcXFxcLicgKyBhcnIuam9pbignLCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoIC8sL2csICckfFxcXFwuJyApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoIC9cXCovZywgJy4qJyApICsgJyQnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIG1lLmFjY2VwdCA9IG5ldyBSZWdFeHAoIGFjY2VwdCwgJ2knICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG1lLnF1ZXVlID0gbmV3IFF1ZXVlKCk7XHJcbiAgICAgICAgICAgICAgICBtZS5zdGF0cyA9IG1lLnF1ZXVlLnN0YXRzO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzlvZPliY3kuI3mmK9odG1sNei/kOihjOaXtu+8jOmCo+Wwseeul+S6huOAglxyXG4gICAgICAgICAgICAgICAgLy8g5LiN5omn6KGM5ZCO57ut5pON5L2cXHJcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMucmVxdWVzdCgncHJlZGljdC1ydW50aW1lLXR5cGUnKSAhPT0gJ2h0bWw1JyApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOWIm+W7uuS4gOS4qiBodG1sNSDov5DooYzml7bnmoQgcGxhY2Vob2xkZXJcclxuICAgICAgICAgICAgICAgIC8vIOS7peiHs+S6juWklumDqOa3u+WKoOWOn+eUnyBGaWxlIOWvueixoeeahOaXtuWAmeiDveato+ehruWMheijueS4gOS4i+S+myB3ZWJ1cGxvYWRlciDkvb/nlKjjgIJcclxuICAgICAgICAgICAgICAgIGRlZmVycmVkID0gQmFzZS5EZWZlcnJlZCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbGFjZWhvbGRlciA9IHJ1bnRpbWUgPSBuZXcgUnVudGltZUNsaWVudCgnUGxhY2Vob2xkZXInKTtcclxuICAgICAgICAgICAgICAgIHJ1bnRpbWUuY29ubmVjdFJ1bnRpbWUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHJ1bnRpbWVPcmRlcjogJ2h0bWw1J1xyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWUuX3J1aWQgPSBydW50aW1lLmdldFJ1aWQoKTtcclxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgICAgICAvLyDkuLrkuobmlK/mjIHlpJbpg6jnm7TmjqXmt7vliqDkuIDkuKrljp/nlJ9GaWxl5a+56LGh44CCXHJcbiAgICAgICAgICAgIF93cmFwRmlsZTogZnVuY3Rpb24oIGZpbGUgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoICEoZmlsZSBpbnN0YW5jZW9mIFdVRmlsZSkgKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoICEoZmlsZSBpbnN0YW5jZW9mIEZpbGUpICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoICF0aGlzLl9ydWlkICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5cXCd0IGFkZCBleHRlcm5hbCBmaWxlcy4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlID0gbmV3IEZpbGUoIHRoaXMuX3J1aWQsIGZpbGUgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBmaWxlID0gbmV3IFdVRmlsZSggZmlsZSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlsZTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvLyDliKTmlq3mlofku7bmmK/lkKblj6/ku6XooqvliqDlhaXpmJ/liJdcclxuICAgICAgICAgICAgYWNjZXB0RmlsZTogZnVuY3Rpb24oIGZpbGUgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW52YWxpZCA9ICFmaWxlIHx8ICFmaWxlLnNpemUgfHwgdGhpcy5hY2NlcHQgJiZcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpzlkI3lrZfkuK3mnInlkI7nvIDvvIzmiY3lgZrlkI7nvIDnmb3lkI3ljZXlpITnkIbjgIJcclxuICAgICAgICAgICAgICAgICAgICAgICAgckV4dC5leGVjKCBmaWxlLm5hbWUgKSAmJiAhdGhpcy5hY2NlcHQudGVzdCggZmlsZS5uYW1lICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiAhaW52YWxpZDtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBAZXZlbnQgYmVmb3JlRmlsZVF1ZXVlZFxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGV9IGZpbGUgRmlsZeWvueixoVxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g5b2T5paH5Lu26KKr5Yqg5YWl6Zif5YiX5LmL5YmN6Kem5Y+R77yM5q2k5LqL5Lu255qEaGFuZGxlcui/lOWbnuWAvOS4umBmYWxzZWDvvIzliJnmraTmlofku7bkuI3kvJrooqvmt7vliqDov5vlhaXpmJ/liJfjgIJcclxuICAgICAgICAgICAgICogQGZvciAgVXBsb2FkZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEBldmVudCBmaWxlUXVldWVkXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZX0gZmlsZSBGaWxl5a+56LGhXHJcbiAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiDlvZPmlofku7booqvliqDlhaXpmJ/liJfku6XlkI7op6blj5HjgIJcclxuICAgICAgICAgICAgICogQGZvciAgVXBsb2FkZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICBcclxuICAgICAgICAgICAgX2FkZEZpbGU6IGZ1bmN0aW9uKCBmaWxlICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lID0gdGhpcztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZmlsZSA9IG1lLl93cmFwRmlsZSggZmlsZSApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDkuI3ov4fnsbvlnovliKTmlq3lhYHorrjkuI3lhYHorrjvvIzlhYjmtL7pgIEgYGJlZm9yZUZpbGVRdWV1ZWRgXHJcbiAgICAgICAgICAgICAgICBpZiAoICFtZS5vd25lci50cmlnZ2VyKCAnYmVmb3JlRmlsZVF1ZXVlZCcsIGZpbGUgKSApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOexu+Wei+S4jeWMuemFje+8jOWImea0vumAgemUmeivr+S6i+S7tu+8jOW5tui/lOWbnuOAglxyXG4gICAgICAgICAgICAgICAgaWYgKCAhbWUuYWNjZXB0RmlsZSggZmlsZSApICkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLm93bmVyLnRyaWdnZXIoICdlcnJvcicsICdRX1RZUEVfREVOSUVEJywgZmlsZSApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgbWUucXVldWUuYXBwZW5kKCBmaWxlICk7XHJcbiAgICAgICAgICAgICAgICBtZS5vd25lci50cmlnZ2VyKCAnZmlsZVF1ZXVlZCcsIGZpbGUgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmaWxlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIGdldEZpbGU6IGZ1bmN0aW9uKCBmaWxlSWQgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5nZXRGaWxlKCBmaWxlSWQgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQGV2ZW50IGZpbGVzUXVldWVkXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZX0gZmlsZXMg5pWw57uE77yM5YaF5a655Li65Y6f5aeLRmlsZShsaWIvRmlsZe+8ieWvueixoeOAglxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g5b2T5LiA5om55paH5Lu25re75Yqg6L+b6Zif5YiX5Lul5ZCO6Kem5Y+R44CCXHJcbiAgICAgICAgICAgICAqIEBmb3IgIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gW2F1dG89ZmFsc2VdXHJcbiAgICAgICAgICAgICAqIEBuYW1lc3BhY2Ugb3B0aW9uc1xyXG4gICAgICAgICAgICAgKiBAZm9yIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiDorr7nva7kuLogdHJ1ZSDlkI7vvIzkuI3pnIDopoHmiYvliqjosIPnlKjkuIrkvKDvvIzmnInmlofku7bpgInmi6nljbPlvIDlp4vkuIrkvKDjgIJcclxuICAgICAgICAgICAgICogXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBAbWV0aG9kIGFkZEZpbGVzXHJcbiAgICAgICAgICAgICAqIEBncmFtbWFyIGFkZEZpbGVzKCBmaWxlICkgPT4gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAqIEBncmFtbWFyIGFkZEZpbGVzKCBbZmlsZTEsIGZpbGUyIC4uLl0gKSA9PiB1bmRlZmluZWRcclxuICAgICAgICAgICAgICogQHBhcmFtIHtBcnJheSBvZiBGaWxlIG9yIEZpbGV9IFtmaWxlc10gRmlsZXMg5a+56LGhIOaVsOe7hFxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g5re75Yqg5paH5Lu25Yiw6Zif5YiXXHJcbiAgICAgICAgICAgICAqIEBmb3IgIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBhZGRGaWxlOiBmdW5jdGlvbiggZmlsZXMgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoICFmaWxlcy5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZXMgPSBbIGZpbGVzIF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZpbGVzID0gJC5tYXAoIGZpbGVzLCBmdW5jdGlvbiggZmlsZSApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWUuX2FkZEZpbGUoIGZpbGUgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHRcdFx0XHJcbiAgICBcdFx0XHRpZiAoIGZpbGVzLmxlbmd0aCApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIG1lLm93bmVyLnRyaWdnZXIoICdmaWxlc1F1ZXVlZCcsIGZpbGVzICk7XHJcbiAgICBcclxuICAgIFx0XHRcdFx0aWYgKCBtZS5vcHRpb25zLmF1dG8gKSB7XHJcbiAgICBcdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgIFx0XHRcdFx0XHRcdG1lLnJlcXVlc3QoJ3N0YXJ0LXVwbG9hZCcpO1xyXG4gICAgXHRcdFx0XHRcdH0sIDIwICk7XHJcbiAgICBcdFx0XHRcdH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBnZXRTdGF0czogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0cztcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQGV2ZW50IGZpbGVEZXF1ZXVlZFxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGV9IGZpbGUgRmlsZeWvueixoVxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g5b2T5paH5Lu26KKr56e76Zmk6Zif5YiX5ZCO6Kem5Y+R44CCXHJcbiAgICAgICAgICAgICAqIEBmb3IgIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgXHJcbiAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQG1ldGhvZCByZW1vdmVGaWxlXHJcbiAgICAgICAgICAgICAqIEBncmFtbWFyIHJlbW92ZUZpbGUoIGZpbGUgKSA9PiB1bmRlZmluZWRcclxuICAgICAgICAgICAgICogQGdyYW1tYXIgcmVtb3ZlRmlsZSggaWQgKSA9PiB1bmRlZmluZWRcclxuICAgICAgICAgICAgICogQGdyYW1tYXIgcmVtb3ZlRmlsZSggZmlsZSwgdHJ1ZSApID0+IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciByZW1vdmVGaWxlKCBpZCwgdHJ1ZSApID0+IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGV8aWR9IGZpbGUgRmlsZeWvueixoeaIlui/mUZpbGXlr7nosaHnmoRpZFxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g56e76Zmk5p+Q5LiA5paH5Lu2LCDpu5jorqTlj6rkvJrmoIforrDmlofku7bnirbmgIHkuLrlt7Llj5bmtojvvIzlpoLmnpznrKzkuozkuKrlj4LmlbDkuLogYHRydWVgIOWImeS8muS7jiBxdWV1ZSDkuK3np7vpmaTjgIJcclxuICAgICAgICAgICAgICogQGZvciAgVXBsb2FkZXJcclxuICAgICAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogJGxpLm9uKCdjbGljaycsICcucmVtb3ZlLXRoaXMnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICogICAgIHVwbG9hZGVyLnJlbW92ZUZpbGUoIGZpbGUgKTtcclxuICAgICAgICAgICAgICogfSlcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHJlbW92ZUZpbGU6IGZ1bmN0aW9uKCBmaWxlLCByZW1vdmUgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmaWxlID0gZmlsZS5pZCA/IGZpbGUgOiBtZS5xdWV1ZS5nZXRGaWxlKCBmaWxlICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdCggJ2NhbmNlbC1maWxlJywgZmlsZSApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIHJlbW92ZSApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlLnJlbW92ZUZpbGUoIGZpbGUgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQG1ldGhvZCBnZXRGaWxlc1xyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBnZXRGaWxlcygpID0+IEFycmF5XHJcbiAgICAgICAgICAgICAqIEBncmFtbWFyIGdldEZpbGVzKCBzdGF0dXMxLCBzdGF0dXMyLCBzdGF0dXMuLi4gKSA9PiBBcnJheVxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g6L+U5Zue5oyH5a6a54q25oCB55qE5paH5Lu26ZuG5ZCI77yM5LiN5Lyg5Y+C5pWw5bCG6L+U5Zue5omA5pyJ54q25oCB55qE5paH5Lu244CCXHJcbiAgICAgICAgICAgICAqIEBmb3IgIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICAgICAqIGNvbnNvbGUubG9nKCB1cGxvYWRlci5nZXRGaWxlcygpICk7ICAgIC8vID0+IGFsbCBmaWxlc1xyXG4gICAgICAgICAgICAgKiBjb25zb2xlLmxvZyggdXBsb2FkZXIuZ2V0RmlsZXMoJ2Vycm9yJykgKSAgICAvLyA9PiBhbGwgZXJyb3IgZmlsZXMuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBnZXRGaWxlczogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5nZXRGaWxlcy5hcHBseSggdGhpcy5xdWV1ZSwgYXJndW1lbnRzICk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgZmV0Y2hGaWxlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXVlLmZldGNoLmFwcGx5KCB0aGlzLnF1ZXVlLCBhcmd1bWVudHMgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQG1ldGhvZCByZXRyeVxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciByZXRyeSgpID0+IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciByZXRyeSggZmlsZSApID0+IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g6YeN6K+V5LiK5Lyg77yM6YeN6K+V5oyH5a6a5paH5Lu277yM5oiW6ICF5LuO5Ye66ZSZ55qE5paH5Lu25byA5aeL6YeN5paw5LiK5Lyg44CCXHJcbiAgICAgICAgICAgICAqIEBmb3IgIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICAgICAqIGZ1bmN0aW9uIHJldHJ5KCkge1xyXG4gICAgICAgICAgICAgKiAgICAgdXBsb2FkZXIucmV0cnkoKTtcclxuICAgICAgICAgICAgICogfVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgcmV0cnk6IGZ1bmN0aW9uKCBmaWxlLCBub0ZvcmNlU3RhcnQgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWUgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGVzLCBpLCBsZW47XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmICggZmlsZSApIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlID0gZmlsZS5pZCA/IGZpbGUgOiBtZS5xdWV1ZS5nZXRGaWxlKCBmaWxlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZS5zZXRTdGF0dXMoIFN0YXR1cy5RVUVVRUQgKTtcclxuICAgICAgICAgICAgICAgICAgICBub0ZvcmNlU3RhcnQgfHwgbWUucmVxdWVzdCgnc3RhcnQtdXBsb2FkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmaWxlcyA9IG1lLnF1ZXVlLmdldEZpbGVzKCBTdGF0dXMuRVJST1IgKTtcclxuICAgICAgICAgICAgICAgIGkgPSAwO1xyXG4gICAgICAgICAgICAgICAgbGVuID0gZmlsZXMubGVuZ3RoO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlID0gZmlsZXNbIGkgXTtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlLnNldFN0YXR1cyggU3RhdHVzLlFVRVVFRCApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBtZS5yZXF1ZXN0KCdzdGFydC11cGxvYWQnKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQG1ldGhvZCBzb3J0XHJcbiAgICAgICAgICAgICAqIEBncmFtbWFyIHNvcnQoIGZuICkgPT4gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiDmjpLluo/pmJ/liJfkuK3nmoTmlofku7bvvIzlnKjkuIrkvKDkuYvliY3osIPmlbTlj6/ku6XmjqfliLbkuIrkvKDpobrluo/jgIJcclxuICAgICAgICAgICAgICogQGZvciAgVXBsb2FkZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHNvcnRGaWxlczogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5zb3J0LmFwcGx5KCB0aGlzLnF1ZXVlLCBhcmd1bWVudHMgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQGV2ZW50IHJlc2V0XHJcbiAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiDlvZMgdXBsb2FkZXIg6KKr6YeN572u55qE5pe25YCZ6Kem5Y+R44CCXHJcbiAgICAgICAgICAgICAqIEBmb3IgIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBAbWV0aG9kIHJlc2V0XHJcbiAgICAgICAgICAgICAqIEBncmFtbWFyIHJlc2V0KCkgPT4gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiDph43nva51cGxvYWRlcuOAguebruWJjeWPqumHjee9ruS6humYn+WIl+OAglxyXG4gICAgICAgICAgICAgKiBAZm9yICBVcGxvYWRlclxyXG4gICAgICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAgICAgKiB1cGxvYWRlci5yZXNldCgpO1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgcmVzZXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vd25lci50cmlnZ2VyKCdyZXNldCcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5xdWV1ZSA9IG5ldyBRdWV1ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0cyA9IHRoaXMucXVldWUuc3RhdHM7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYWNlaG9sZGVyICYmIHRoaXMucGxhY2Vob2xkZXIuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICBcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IOa3u+WKoOiOt+WPllJ1bnRpbWXnm7jlhbPkv6Hmga/nmoTmlrnms5XjgIJcclxuICAgICAqL1xyXG4gICAgZGVmaW5lKCd3aWRnZXRzL3J1bnRpbWUnLFtcclxuICAgICAgICAndXBsb2FkZXInLFxyXG4gICAgICAgICdydW50aW1lL3J1bnRpbWUnLFxyXG4gICAgICAgICd3aWRnZXRzL3dpZGdldCdcclxuICAgIF0sIGZ1bmN0aW9uKCBVcGxvYWRlciwgUnVudGltZSApIHtcclxuICAgIFxyXG4gICAgICAgIFVwbG9hZGVyLnN1cHBvcnQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFJ1bnRpbWUuaGFzUnVudGltZS5hcHBseSggUnVudGltZSwgYXJndW1lbnRzICk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBbcnVudGltZU9yZGVyPWh0bWw1LGZsYXNoXVxyXG4gICAgICAgICAqIEBuYW1lc3BhY2Ugb3B0aW9uc1xyXG4gICAgICAgICAqIEBmb3IgVXBsb2FkZXJcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24g5oyH5a6a6L+Q6KGM5pe25ZCv5Yqo6aG65bqP44CC6buY6K6k5Lya5oOz5bCd6K+VIGh0bWw1IOaYr+WQpuaUr+aMge+8jOWmguaenOaUr+aMgeWImeS9v+eUqCBodG1sNSwg5ZCm5YiZ5YiZ5L2/55SoIGZsYXNoLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICog5Y+v5Lul5bCG5q2k5YC86K6+572u5oiQIGBmbGFzaGDvvIzmnaXlvLrliLbkvb/nlKggZmxhc2gg6L+Q6KGM5pe244CCXHJcbiAgICAgICAgICovXHJcbiAgICBcclxuICAgICAgICByZXR1cm4gVXBsb2FkZXIucmVnaXN0ZXIoe1xyXG4gICAgICAgICAgICBuYW1lOiAncnVudGltZScsXHJcbiAgICBcclxuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoICF0aGlzLnByZWRpY3RSdW50aW1lVHlwZSgpICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IEVycm9yKCdSdW50aW1lIEVycm9yJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOmihOa1i1VwbG9hZGVy5bCG6YeH55So5ZOq5LiqYFJ1bnRpbWVgXHJcbiAgICAgICAgICAgICAqIEBncmFtbWFyIHByZWRpY3RSdW50aW1lVHlwZSgpID0+IFN0cmluZ1xyXG4gICAgICAgICAgICAgKiBAbWV0aG9kIHByZWRpY3RSdW50aW1lVHlwZVxyXG4gICAgICAgICAgICAgKiBAZm9yICBVcGxvYWRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgcHJlZGljdFJ1bnRpbWVUeXBlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvcmRlcnMgPSB0aGlzLm9wdGlvbnMucnVudGltZU9yZGVyIHx8IFJ1bnRpbWUub3JkZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSB0aGlzLnR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgaSwgbGVuO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoICF0eXBlICkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVycyA9IG9yZGVycy5zcGxpdCggL1xccyosXFxzKi9nICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKCBpID0gMCwgbGVuID0gb3JkZXJzLmxlbmd0aDsgaSA8IGxlbjsgaSsrICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIFJ1bnRpbWUuaGFzUnVudGltZSggb3JkZXJzWyBpIF0gKSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHlwZSA9IHR5cGUgPSBvcmRlcnNbIGkgXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIEBmaWxlT3ZlcnZpZXcgVHJhbnNwb3J0XHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgnbGliL3RyYW5zcG9ydCcsW1xyXG4gICAgICAgICdiYXNlJyxcclxuICAgICAgICAncnVudGltZS9jbGllbnQnLFxyXG4gICAgICAgICdtZWRpYXRvcidcclxuICAgIF0sIGZ1bmN0aW9uKCBCYXNlLCBSdW50aW1lQ2xpZW50LCBNZWRpYXRvciApIHtcclxuICAgIFxyXG4gICAgICAgIHZhciAkID0gQmFzZS4kO1xyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gVHJhbnNwb3J0KCBvcHRzICkge1xyXG4gICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgXHJcbiAgICAgICAgICAgIG9wdHMgPSBtZS5vcHRpb25zID0gJC5leHRlbmQoIHRydWUsIHt9LCBUcmFuc3BvcnQub3B0aW9ucywgb3B0cyB8fCB7fSApO1xyXG4gICAgICAgICAgICBSdW50aW1lQ2xpZW50LmNhbGwoIHRoaXMsICdUcmFuc3BvcnQnICk7XHJcbiAgICBcclxuICAgICAgICAgICAgdGhpcy5fYmxvYiA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuX2Zvcm1EYXRhID0gb3B0cy5mb3JtRGF0YSB8fCB7fTtcclxuICAgICAgICAgICAgdGhpcy5faGVhZGVycyA9IG9wdHMuaGVhZGVycyB8fCB7fTtcclxuICAgIFxyXG4gICAgICAgICAgICB0aGlzLm9uKCAncHJvZ3Jlc3MnLCB0aGlzLl90aW1lb3V0ICk7XHJcbiAgICAgICAgICAgIHRoaXMub24oICdsb2FkIGVycm9yJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBtZS50cmlnZ2VyKCAncHJvZ3Jlc3MnLCAxICk7XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoIG1lLl90aW1lciApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBUcmFuc3BvcnQub3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgc2VydmVyOiAnJyxcclxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICBcclxuICAgICAgICAgICAgLy8g6Leo5Z+f5pe277yM5piv5ZCm5YWB6K645pC65bimY29va2llLCDlj6rmnIlodG1sNSBydW50aW1l5omN5pyJ5pWIXHJcbiAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogZmFsc2UsXHJcbiAgICAgICAgICAgIGZpbGVWYWw6ICdmaWxlJyxcclxuICAgICAgICAgICAgdGltZW91dDogMiAqIDYwICogMTAwMCwgICAgLy8gMuWIhumSn1xyXG4gICAgICAgICAgICBmb3JtRGF0YToge30sXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHt9LFxyXG4gICAgICAgICAgICBzZW5kQXNCaW5hcnk6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgICQuZXh0ZW5kKCBUcmFuc3BvcnQucHJvdG90eXBlLCB7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8g5re75YqgQmxvYiwg5Y+q6IO95re75Yqg5LiA5qyh77yM5pyA5ZCO5LiA5qyh5pyJ5pWI44CCXHJcbiAgICAgICAgICAgIGFwcGVuZEJsb2I6IGZ1bmN0aW9uKCBrZXksIGJsb2IsIGZpbGVuYW1lICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICBvcHRzID0gbWUub3B0aW9ucztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCBtZS5nZXRSdWlkKCkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWUuZGlzY29ubmVjdFJ1bnRpbWUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g6L+e5o6l5YiwYmxvYuW9kuWxnueahOWQjOS4gOS4qnJ1bnRpbWUuXHJcbiAgICAgICAgICAgICAgICBtZS5jb25uZWN0UnVudGltZSggYmxvYi5ydWlkLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZS5leGVjKCdpbml0Jyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgbWUuX2Jsb2IgPSBibG9iO1xyXG4gICAgICAgICAgICAgICAgb3B0cy5maWxlVmFsID0ga2V5IHx8IG9wdHMuZmlsZVZhbDtcclxuICAgICAgICAgICAgICAgIG9wdHMuZmlsZW5hbWUgPSBmaWxlbmFtZSB8fCBvcHRzLmZpbGVuYW1lO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIOa3u+WKoOWFtuS7luWtl+autVxyXG4gICAgICAgICAgICBhcHBlbmQ6IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCB0eXBlb2Yga2V5ID09PSAnb2JqZWN0JyApIHtcclxuICAgICAgICAgICAgICAgICAgICAkLmV4dGVuZCggdGhpcy5fZm9ybURhdGEsIGtleSApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9mb3JtRGF0YVsga2V5IF0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBzZXRSZXF1ZXN0SGVhZGVyOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHtcclxuICAgICAgICAgICAgICAgIGlmICggdHlwZW9mIGtleSA9PT0gJ29iamVjdCcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5leHRlbmQoIHRoaXMuX2hlYWRlcnMsIGtleSApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9oZWFkZXJzWyBrZXkgXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIHNlbmQ6IGZ1bmN0aW9uKCBtZXRob2QgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV4ZWMoICdzZW5kJywgbWV0aG9kICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90aW1lb3V0KCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgYWJvcnQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KCB0aGlzLl90aW1lciApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhlYygnYWJvcnQnKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignZGVzdHJveScpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vZmYoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXhlYygnZGVzdHJveScpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0UnVudGltZSgpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIGdldFJlc3BvbnNlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmV4ZWMoJ2dldFJlc3BvbnNlJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgZ2V0UmVzcG9uc2VBc0pzb246IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhlYygnZ2V0UmVzcG9uc2VBc0pzb24nKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBnZXRTdGF0dXM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhlYygnZ2V0U3RhdHVzJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgX3RpbWVvdXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbiA9IG1lLm9wdGlvbnMudGltZW91dDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCAhZHVyYXRpb24gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoIG1lLl90aW1lciApO1xyXG4gICAgICAgICAgICAgICAgbWUuX3RpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZS5hYm9ydCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLnRyaWdnZXIoICdlcnJvcicsICd0aW1lb3V0JyApO1xyXG4gICAgICAgICAgICAgICAgfSwgZHVyYXRpb24gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAvLyDorqlUcmFuc3BvcnTlhbflpIfkuovku7blip/og73jgIJcclxuICAgICAgICBNZWRpYXRvci5pbnN0YWxsVG8oIFRyYW5zcG9ydC5wcm90b3R5cGUgKTtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBUcmFuc3BvcnQ7XHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyDotJ/otKPmlofku7bkuIrkvKDnm7jlhbPjgIJcclxuICAgICAqL1xyXG4gICAgZGVmaW5lKCd3aWRnZXRzL3VwbG9hZCcsW1xyXG4gICAgICAgICdiYXNlJyxcclxuICAgICAgICAndXBsb2FkZXInLFxyXG4gICAgICAgICdmaWxlJyxcclxuICAgICAgICAnbGliL3RyYW5zcG9ydCcsXHJcbiAgICAgICAgJ3dpZGdldHMvd2lkZ2V0J1xyXG4gICAgXSwgZnVuY3Rpb24oIEJhc2UsIFVwbG9hZGVyLCBXVUZpbGUsIFRyYW5zcG9ydCApIHtcclxuICAgIFxyXG4gICAgICAgIHZhciAkID0gQmFzZS4kLFxyXG4gICAgICAgICAgICBpc1Byb21pc2UgPSBCYXNlLmlzUHJvbWlzZSxcclxuICAgICAgICAgICAgU3RhdHVzID0gV1VGaWxlLlN0YXR1cztcclxuICAgIFxyXG4gICAgICAgIC8vIOa3u+WKoOm7mOiupOmFjee9rumhuVxyXG4gICAgICAgICQuZXh0ZW5kKCBVcGxvYWRlci5vcHRpb25zLCB7XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtCb29sZWFufSBbcHJlcGFyZU5leHRGaWxlPWZhbHNlXVxyXG4gICAgICAgICAgICAgKiBAbmFtZXNwYWNlIG9wdGlvbnNcclxuICAgICAgICAgICAgICogQGZvciBVcGxvYWRlclxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g5piv5ZCm5YWB6K645Zyo5paH5Lu25Lyg6L6T5pe25o+Q5YmN5oqK5LiL5LiA5Liq5paH5Lu25YeG5aSH5aW944CCXHJcbiAgICAgICAgICAgICAqIOWvueS6juS4gOS4quaWh+S7tueahOWHhuWkh+W3peS9nOavlOi+g+iAl+aXtu+8jOavlOWmguWbvueJh+WOi+e8qe+8jG1kNeW6j+WIl+WMluOAglxyXG4gICAgICAgICAgICAgKiDlpoLmnpzog73mj5DliY3lnKjlvZPliY3mlofku7bkvKDovpPmnJ/lpITnkIbvvIzlj6/ku6XoioLnnIHmgLvkvZPogJfml7bjgIJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHByZXBhcmVOZXh0RmlsZTogZmFsc2UsXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gW2NodW5rZWQ9ZmFsc2VdXHJcbiAgICAgICAgICAgICAqIEBuYW1lc3BhY2Ugb3B0aW9uc1xyXG4gICAgICAgICAgICAgKiBAZm9yIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiDmmK/lkKbopoHliIbniYflpITnkIblpKfmlofku7bkuIrkvKDjgIJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGNodW5rZWQ6IGZhbHNlLFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge0Jvb2xlYW59IFtjaHVua1NpemU9NTI0Mjg4MF1cclxuICAgICAgICAgICAgICogQG5hbWVzcGFjZSBvcHRpb25zXHJcbiAgICAgICAgICAgICAqIEBmb3IgVXBsb2FkZXJcclxuICAgICAgICAgICAgICogQGRlc2NyaXB0aW9uIOWmguaenOimgeWIhueJh++8jOWIhuWkmuWkp+S4gOeJh++8nyDpu5jorqTlpKflsI/kuLo1TS5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGNodW5rU2l6ZTogNSAqIDEwMjQgKiAxMDI0LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge0Jvb2xlYW59IFtjaHVua1JldHJ5PTJdXHJcbiAgICAgICAgICAgICAqIEBuYW1lc3BhY2Ugb3B0aW9uc1xyXG4gICAgICAgICAgICAgKiBAZm9yIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiDlpoLmnpzmn5DkuKrliIbniYfnlLHkuo7nvZHnu5zpl67popjlh7rplJnvvIzlhYHorrjoh6rliqjph43kvKDlpJrlsJHmrKHvvJ9cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGNodW5rUmV0cnk6IDIsXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gW3RocmVhZHM9M11cclxuICAgICAgICAgICAgICogQG5hbWVzcGFjZSBvcHRpb25zXHJcbiAgICAgICAgICAgICAqIEBmb3IgVXBsb2FkZXJcclxuICAgICAgICAgICAgICogQGRlc2NyaXB0aW9uIOS4iuS8oOW5tuWPkeaVsOOAguWFgeiuuOWQjOaXtuacgOWkp+S4iuS8oOi/m+eoi+aVsOOAglxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdGhyZWFkczogMyxcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge09iamVjdH0gW2Zvcm1EYXRhPXt9XVxyXG4gICAgICAgICAgICAgKiBAbmFtZXNwYWNlIG9wdGlvbnNcclxuICAgICAgICAgICAgICogQGZvciBVcGxvYWRlclxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g5paH5Lu25LiK5Lyg6K+35rGC55qE5Y+C5pWw6KGo77yM5q+P5qyh5Y+R6YCB6YO95Lya5Y+R6YCB5q2k5a+56LGh5Lit55qE5Y+C5pWw44CCXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBmb3JtRGF0YToge31cclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtPYmplY3R9IFtmaWxlVmFsPSdmaWxlJ11cclxuICAgICAgICAgICAgICogQG5hbWVzcGFjZSBvcHRpb25zXHJcbiAgICAgICAgICAgICAqIEBmb3IgVXBsb2FkZXJcclxuICAgICAgICAgICAgICogQGRlc2NyaXB0aW9uIOiuvue9ruaWh+S7tuS4iuS8oOWfn+eahG5hbWXjgIJcclxuICAgICAgICAgICAgICovXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBbc2VuZEFzQmluYXJ5PWZhbHNlXVxyXG4gICAgICAgICAgICAgKiBAbmFtZXNwYWNlIG9wdGlvbnNcclxuICAgICAgICAgICAgICogQGZvciBVcGxvYWRlclxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g5piv5ZCm5bey5LqM6L+b5Yi255qE5rWB55qE5pa55byP5Y+R6YCB5paH5Lu277yM6L+Z5qC35pW05Liq5LiK5Lyg5YaF5a65YHBocDovL2lucHV0YOmDveS4uuaWh+S7tuWGheWuue+8jFxyXG4gICAgICAgICAgICAgKiDlhbbku5blj4LmlbDlnKgkX0dFVOaVsOe7hOS4reOAglxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgIC8vIOi0n+i0o+WwhuaWh+S7tuWIh+eJh+OAglxyXG4gICAgICAgIGZ1bmN0aW9uIEN1dGVGaWxlKCBmaWxlLCBjaHVua1NpemUgKSB7XHJcbiAgICAgICAgICAgIHZhciBwZW5kaW5nID0gW10sXHJcbiAgICAgICAgICAgICAgICBibG9iID0gZmlsZS5zb3VyY2UsXHJcbiAgICAgICAgICAgICAgICB0b3RhbCA9IGJsb2Iuc2l6ZSxcclxuICAgICAgICAgICAgICAgIGNodW5rcyA9IGNodW5rU2l6ZSA/IE1hdGguY2VpbCggdG90YWwgLyBjaHVua1NpemUgKSA6IDEsXHJcbiAgICAgICAgICAgICAgICBzdGFydCA9IDAsXHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IDAsXHJcbiAgICAgICAgICAgICAgICBsZW4sIGFwaTtcclxuICAgIFxyXG4gICAgICAgICAgICBhcGkgPSB7XHJcbiAgICAgICAgICAgICAgICBmaWxlOiBmaWxlLFxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBoYXM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhIXBlbmRpbmcubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgc2hpZnQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwZW5kaW5nLnNoaWZ0KCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB1bnNoaWZ0OiBmdW5jdGlvbiggYmxvY2sgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZy51bnNoaWZ0KCBibG9jayApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgICAgIHdoaWxlICggaW5kZXggPCBjaHVua3MgKSB7XHJcbiAgICAgICAgICAgICAgICBsZW4gPSBNYXRoLm1pbiggY2h1bmtTaXplLCB0b3RhbCAtIHN0YXJ0ICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHBlbmRpbmcucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZTogZmlsZSxcclxuICAgICAgICAgICAgICAgICAgICBzdGFydDogc3RhcnQsXHJcbiAgICAgICAgICAgICAgICAgICAgZW5kOiBjaHVua1NpemUgPyAoc3RhcnQgKyBsZW4pIDogdG90YWwsXHJcbiAgICAgICAgICAgICAgICAgICAgdG90YWw6IHRvdGFsLFxyXG4gICAgICAgICAgICAgICAgICAgIGNodW5rczogY2h1bmtzLFxyXG4gICAgICAgICAgICAgICAgICAgIGNodW5rOiBpbmRleCsrLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1dGVkOiBhcGlcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgc3RhcnQgKz0gbGVuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgZmlsZS5ibG9ja3MgPSBwZW5kaW5nLmNvbmNhdCgpO1xyXG4gICAgICAgICAgICBmaWxlLnJlbWFuaW5nID0gcGVuZGluZy5sZW5ndGg7XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIGFwaTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBVcGxvYWRlci5yZWdpc3Rlcih7XHJcbiAgICAgICAgICAgIG5hbWU6ICd1cGxvYWQnLFxyXG4gICAgXHJcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG93bmVyID0gdGhpcy5vd25lcixcclxuICAgICAgICAgICAgICAgICAgICBtZSA9IHRoaXM7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHRoaXMucnVuaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gZmFsc2U7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG93bmVyXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uKCAnc3RhcnRVcGxvYWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWUucHJvZ3Jlc3MgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uKCAndXBsb2FkRmluaXNoZWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWUucHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g6K6w5b2V5b2T5YmN5q2j5Zyo5Lyg55qE5pWw5o2u77yM6LefdGhyZWFkc+ebuOWFs1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wb29sID0gW107XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOe8k+WtmOWIhuWlveeJh+eahOaWh+S7tuOAglxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFjayA9IFtdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDnvJPlrZjljbPlsIbkuIrkvKDnmoTmlofku7bjgIJcclxuICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZyA9IFtdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDot5/ouKrov5jmnInlpJrlsJHliIbniYflnKjkuIrkvKDkuK3kvYbmmK/msqHmnInlrozmiJDkuIrkvKDjgIJcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtYW5pbmcgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fX3RpY2sgPSBCYXNlLmJpbmRGbiggdGhpcy5fdGljaywgdGhpcyApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDplIDmr4HkuIrkvKDnm7jlhbPnmoTlsZ7mgKfjgIJcclxuICAgICAgICAgICAgICAgIG93bmVyLm9uKCAndXBsb2FkQ29tcGxldGUnLCBmdW5jdGlvbiggZmlsZSApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOaKiuWFtuS7luWdl+WPlua2iOS6huOAglxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGUuYmxvY2tzICYmICQuZWFjaCggZmlsZS5ibG9ja3MsIGZ1bmN0aW9uKCBfLCB2ICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2LnRyYW5zcG9ydCAmJiAodi50cmFuc3BvcnQuYWJvcnQoKSwgdi50cmFuc3BvcnQuZGVzdHJveSgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHYudHJhbnNwb3J0O1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGZpbGUuYmxvY2tzO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBmaWxlLnJlbWFuaW5nO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgcmVzZXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXF1ZXN0KCAnc3RvcC11cGxvYWQnLCB0cnVlICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJ1bmluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wb29sID0gW107XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YWNrID0gW107XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmcgPSBbXTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtYW5pbmcgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdHJpZ2dlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvbWlzZSA9IG51bGw7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEBldmVudCBzdGFydFVwbG9hZFxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g5b2T5byA5aeL5LiK5Lyg5rWB56iL5pe26Kem5Y+R44CCXHJcbiAgICAgICAgICAgICAqIEBmb3IgIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiDlvIDlp4vkuIrkvKDjgILmraTmlrnms5Xlj6/ku6Xku47liJ3lp4vnirbmgIHosIPnlKjlvIDlp4vkuIrkvKDmtYHnqIvvvIzkuZ/lj6/ku6Xku47mmoLlgZznirbmgIHosIPnlKjvvIznu6fnu63kuIrkvKDmtYHnqIvjgIJcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICog5Y+v5Lul5oyH5a6a5byA5aeL5p+Q5LiA5Liq5paH5Lu244CCXHJcbiAgICAgICAgICAgICAqIEBncmFtbWFyIHVwbG9hZCgpID0+IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciB1cGxvYWQoIGZpbGUgfCBmaWxlSWQpID0+IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgKiBAbWV0aG9kIHVwbG9hZFxyXG4gICAgICAgICAgICAgKiBAZm9yICBVcGxvYWRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgc3RhcnRVcGxvYWQ6IGZ1bmN0aW9uKGZpbGUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOenu+WHumludmFsaWTnmoTmlofku7ZcclxuICAgICAgICAgICAgICAgICQuZWFjaCggbWUucmVxdWVzdCggJ2dldC1maWxlcycsIFN0YXR1cy5JTlZBTElEICksIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLnJlcXVlc3QoICdyZW1vdmUtZmlsZScsIHRoaXMgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzmjIflrprkuoblvIDlp4vmn5DkuKrmlofku7bvvIzliJnlj6rlvIDlp4vmjIflrprnmoTmlofku7bjgIJcclxuICAgICAgICAgICAgICAgIGlmICggZmlsZSApIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlID0gZmlsZS5pZCA/IGZpbGUgOiBtZS5yZXF1ZXN0KCAnZ2V0LWZpbGUnLCBmaWxlICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZS5nZXRTdGF0dXMoKSA9PT0gU3RhdHVzLklOVEVSUlVQVCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlLnNldFN0YXR1cyggU3RhdHVzLlFVRVVFRCApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQuZWFjaCggbWUucG9vbCwgZnVuY3Rpb24oIF8sIHYgKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOS5i+WJjeaaguWBnOi/h+OAglxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYuZmlsZSAhPT0gZmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdi50cmFuc3BvcnQgJiYgdi50cmFuc3BvcnQuc2VuZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZS5zZXRTdGF0dXMoIFN0YXR1cy5QUk9HUkVTUyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGZpbGUuZ2V0U3RhdHVzKCkgIT09IFN0YXR1cy5QUk9HUkVTUykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlLnNldFN0YXR1cyggU3RhdHVzLlFVRVVFRCApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKCBtZS5yZXF1ZXN0KCAnZ2V0LWZpbGVzJywgWyBTdGF0dXMuSU5JVEVEIF0gKSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdHVzKCBTdGF0dXMuUVVFVUVEICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmICggbWUucnVuaW5nICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBCYXNlLm5leHRUaWNrKCBtZS5fX3RpY2sgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgbWUucnVuaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHZhciBmaWxlcyA9IFtdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzmnInmmoLlgZznmoTvvIzliJnnu63kvKBcclxuICAgICAgICAgICAgICAgIGZpbGUgfHwgJC5lYWNoKCBtZS5wb29sLCBmdW5jdGlvbiggXywgdiApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZSA9IHYuZmlsZTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggZmlsZS5nZXRTdGF0dXMoKSA9PT0gU3RhdHVzLklOVEVSUlVQVCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWUuX3RyaWdnZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZXMucHVzaChmaWxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdi50cmFuc3BvcnQgJiYgdi50cmFuc3BvcnQuc2VuZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAkLmVhY2goZmlsZXMsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdHVzKCBTdGF0dXMuUFJPR1JFU1MgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmaWxlIHx8ICQuZWFjaCggbWUucmVxdWVzdCggJ2dldC1maWxlcycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXR1cy5JTlRFUlJVUFQgKSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0dXMoIFN0YXR1cy5QUk9HUkVTUyApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG1lLl90cmlnZ2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBCYXNlLm5leHRUaWNrKCBtZS5fX3RpY2sgKTtcclxuICAgICAgICAgICAgICAgIG1lLm93bmVyLnRyaWdnZXIoJ3N0YXJ0VXBsb2FkJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEBldmVudCBzdG9wVXBsb2FkXHJcbiAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiDlvZPlvIDlp4vkuIrkvKDmtYHnqIvmmoLlgZzml7bop6blj5HjgIJcclxuICAgICAgICAgICAgICogQGZvciAgVXBsb2FkZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOaaguWBnOS4iuS8oOOAguesrOS4gOS4quWPguaVsOS4uuaYr+WQpuS4reaWreS4iuS8oOW9k+WJjeato+WcqOS4iuS8oOeahOaWh+S7tuOAglxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiDlpoLmnpznrKzkuIDkuKrlj4LmlbDmmK/mlofku7bvvIzliJnlj6rmmoLlgZzmjIflrprmlofku7bjgIJcclxuICAgICAgICAgICAgICogQGdyYW1tYXIgc3RvcCgpID0+IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBzdG9wKCB0cnVlICkgPT4gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAqIEBncmFtbWFyIHN0b3AoIGZpbGUgKSA9PiB1bmRlZmluZWRcclxuICAgICAgICAgICAgICogQG1ldGhvZCBzdG9wXHJcbiAgICAgICAgICAgICAqIEBmb3IgIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBzdG9wVXBsb2FkOiBmdW5jdGlvbiggZmlsZSwgaW50ZXJydXB0ICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICBibG9jaztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnRlcnJ1cHQgPSBmaWxlO1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbGUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIG1lLnJ1bmluZyA9PT0gZmFsc2UgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzlj6rmmK/mmoLlgZzmn5DkuKrmlofku7bjgIJcclxuICAgICAgICAgICAgICAgIGlmICggZmlsZSApIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlID0gZmlsZS5pZCA/IGZpbGUgOiBtZS5yZXF1ZXN0KCAnZ2V0LWZpbGUnLCBmaWxlICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGZpbGUuZ2V0U3RhdHVzKCkgIT09IFN0YXR1cy5QUk9HUkVTUyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZS5nZXRTdGF0dXMoKSAhPT0gU3RhdHVzLlFVRVVFRCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGUuc2V0U3RhdHVzKCBTdGF0dXMuSU5URVJSVVBUICk7XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICQuZWFjaCggbWUucG9vbCwgZnVuY3Rpb24oIF8sIHYgKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Y+qIGFib3J0IOaMh+WumueahOaWh+S7tuOAglxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodi5maWxlID09PSBmaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayA9IHY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGJsb2NrLnRyYW5zcG9ydCAmJiBibG9jay50cmFuc3BvcnQuYWJvcnQoKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnRlcnJ1cHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWUuX3B1dGJhY2soYmxvY2spO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZS5fcG9wQmxvY2soYmxvY2spO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBCYXNlLm5leHRUaWNrKCBtZS5fX3RpY2sgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgbWUucnVuaW5nID0gZmFsc2U7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOato+WcqOWHhuWkh+S4reeahOaWh+S7tuOAglxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3Byb21pc2UgJiYgdGhpcy5fcHJvbWlzZS5maWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJvbWlzZS5maWxlLnNldFN0YXR1cyggU3RhdHVzLklOVEVSUlVQVCApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpbnRlcnJ1cHQgJiYgJC5lYWNoKCBtZS5wb29sLCBmdW5jdGlvbiggXywgdiApIHtcclxuICAgICAgICAgICAgICAgICAgICB2LnRyYW5zcG9ydCAmJiB2LnRyYW5zcG9ydC5hYm9ydCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHYuZmlsZS5zZXRTdGF0dXMoIFN0YXR1cy5JTlRFUlJVUFQgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBtZS5vd25lci50cmlnZ2VyKCdzdG9wVXBsb2FkJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEBtZXRob2QgY2FuY2VsRmlsZVxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBjYW5jZWxGaWxlKCBmaWxlICkgPT4gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAqIEBncmFtbWFyIGNhbmNlbEZpbGUoIGlkICkgPT4gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZXxpZH0gZmlsZSBGaWxl5a+56LGh5oiW6L+ZRmlsZeWvueixoeeahGlkXHJcbiAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiDmoIforrDmlofku7bnirbmgIHkuLrlt7Llj5bmtogsIOWQjOaXtuWwhuS4reaWreaWh+S7tuS8oOi+k+OAglxyXG4gICAgICAgICAgICAgKiBAZm9yICBVcGxvYWRlclxyXG4gICAgICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiAkbGkub24oJ2NsaWNrJywgJy5yZW1vdmUtdGhpcycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgKiAgICAgdXBsb2FkZXIuY2FuY2VsRmlsZSggZmlsZSApO1xyXG4gICAgICAgICAgICAgKiB9KVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgY2FuY2VsRmlsZTogZnVuY3Rpb24oIGZpbGUgKSB7XHJcbiAgICAgICAgICAgICAgICBmaWxlID0gZmlsZS5pZCA/IGZpbGUgOiB0aGlzLnJlcXVlc3QoICdnZXQtZmlsZScsIGZpbGUgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c5q2j5Zyo5LiK5Lyg44CCXHJcbiAgICAgICAgICAgICAgICBmaWxlLmJsb2NrcyAmJiAkLmVhY2goIGZpbGUuYmxvY2tzLCBmdW5jdGlvbiggXywgdiApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgX3RyID0gdi50cmFuc3BvcnQ7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIF90ciApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RyLmFib3J0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90ci5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB2LnRyYW5zcG9ydDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZmlsZS5zZXRTdGF0dXMoIFN0YXR1cy5DQU5DRUxMRUQgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub3duZXIudHJpZ2dlciggJ2ZpbGVEZXF1ZXVlZCcsIGZpbGUgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICog5Yik5patYFVwbGFvZGVgcuaYr+WQpuato+WcqOS4iuS8oOS4reOAglxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBpc0luUHJvZ3Jlc3MoKSA9PiBCb29sZWFuXHJcbiAgICAgICAgICAgICAqIEBtZXRob2QgaXNJblByb2dyZXNzXHJcbiAgICAgICAgICAgICAqIEBmb3IgIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBpc0luUHJvZ3Jlc3M6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5wcm9ncmVzcztcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBfZ2V0U3RhdHM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCgnZ2V0LXN0YXRzJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOaOiei/h+S4gOS4quaWh+S7tuS4iuS8oO+8jOebtOaOpeagh+iusOaMh+WumuaWh+S7tuS4uuW3suS4iuS8oOeKtuaAgeOAglxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBza2lwRmlsZSggZmlsZSApID0+IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgKiBAbWV0aG9kIHNraXBGaWxlXHJcbiAgICAgICAgICAgICAqIEBmb3IgIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBza2lwRmlsZTogZnVuY3Rpb24oIGZpbGUsIHN0YXR1cyApIHtcclxuICAgICAgICAgICAgICAgIGZpbGUgPSBmaWxlLmlkID8gZmlsZSA6IHRoaXMucmVxdWVzdCggJ2dldC1maWxlJywgZmlsZSApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmaWxlLnNldFN0YXR1cyggc3RhdHVzIHx8IFN0YXR1cy5DT01QTEVURSApO1xyXG4gICAgICAgICAgICAgICAgZmlsZS5za2lwcGVkID0gdHJ1ZTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c5q2j5Zyo5LiK5Lyg44CCXHJcbiAgICAgICAgICAgICAgICBmaWxlLmJsb2NrcyAmJiAkLmVhY2goIGZpbGUuYmxvY2tzLCBmdW5jdGlvbiggXywgdiApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgX3RyID0gdi50cmFuc3BvcnQ7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIF90ciApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RyLmFib3J0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90ci5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB2LnRyYW5zcG9ydDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5vd25lci50cmlnZ2VyKCAndXBsb2FkU2tpcCcsIGZpbGUgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQGV2ZW50IHVwbG9hZEZpbmlzaGVkXHJcbiAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiDlvZPmiYDmnInmlofku7bkuIrkvKDnu5PmnZ/ml7bop6blj5HjgIJcclxuICAgICAgICAgICAgICogQGZvciAgVXBsb2FkZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIF90aWNrOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZSA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cyA9IG1lLm9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICAgICAgZm4sIHZhbDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g5LiK5LiA5LiqcHJvbWlzZei/mOayoeaciee7k+adn++8jOWImeetieW+heWujOaIkOWQjuWGjeaJp+ihjOOAglxyXG4gICAgICAgICAgICAgICAgaWYgKCBtZS5fcHJvbWlzZSApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWUuX3Byb21pc2UuYWx3YXlzKCBtZS5fX3RpY2sgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g6L+Y5pyJ5L2N572u77yM5LiU6L+Y5pyJ5paH5Lu26KaB5aSE55CG55qE6K+d44CCXHJcbiAgICAgICAgICAgICAgICBpZiAoIG1lLnBvb2wubGVuZ3RoIDwgb3B0cy50aHJlYWRzICYmICh2YWwgPSBtZS5fbmV4dEJsb2NrKCkpICkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLl90cmlnZ2VkID0gZmFsc2U7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBmbiA9IGZ1bmN0aW9uKCB2YWwgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lLl9wcm9taXNlID0gbnVsbDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDmnInlj6/og73mmK9yZWplY3Tov4fmnaXnmoTvvIzmiYDku6XopoHmo4DmtYt2YWznmoTnsbvlnovjgIJcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsICYmIHZhbC5maWxlICYmIG1lLl9zdGFydFNlbmQoIHZhbCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBCYXNlLm5leHRUaWNrKCBtZS5fX3RpY2sgKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgbWUuX3Byb21pc2UgPSBpc1Byb21pc2UoIHZhbCApID8gdmFsLmFsd2F5cyggZm4gKSA6IGZuKCB2YWwgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g5rKh5pyJ6KaB5LiK5Lyg55qE5LqG77yM5LiU5rKh5pyJ5q2j5Zyo5Lyg6L6T55qE5LqG44CCXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCAhbWUucmVtYW5pbmcgJiYgIW1lLl9nZXRTdGF0cygpLm51bU9mUXVldWUgJiZcclxuICAgICAgICAgICAgICAgICAgICAhbWUuX2dldFN0YXRzKCkubnVtb2ZJbnRlcnJ1cHQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWUucnVuaW5nID0gZmFsc2U7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBtZS5fdHJpZ2dlZCB8fCBCYXNlLm5leHRUaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZS5vd25lci50cmlnZ2VyKCd1cGxvYWRGaW5pc2hlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLl90cmlnZ2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBfcHV0YmFjazogZnVuY3Rpb24oYmxvY2spIHtcclxuICAgICAgICAgICAgICAgIHZhciBpZHg7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGJsb2NrLmN1dGVkLnVuc2hpZnQoYmxvY2spO1xyXG4gICAgICAgICAgICAgICAgaWR4ID0gdGhpcy5zdGFjay5pbmRleE9mKGJsb2NrLmN1dGVkKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCF+aWR4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFjay51bnNoaWZ0KGJsb2NrLmN1dGVkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBfZ2V0U3RhY2s6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGkgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGFjdDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgd2hpbGUgKCAoYWN0ID0gdGhpcy5zdGFja1sgaSsrIF0pICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICggYWN0LmhhcygpICYmIGFjdC5maWxlLmdldFN0YXR1cygpID09PSBTdGF0dXMuUFJPR1JFU1MgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhY3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghYWN0LmhhcygpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3QuZmlsZS5nZXRTdGF0dXMoKSAhPT0gU3RhdHVzLlBST0dSRVNTICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3QuZmlsZS5nZXRTdGF0dXMoKSAhPT0gU3RhdHVzLklOVEVSUlVQVCApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDmiorlt7Lnu4/lpITnkIblrozkuobnmoTvvIzmiJbogIXvvIznirbmgIHkuLrpnZ4gcHJvZ3Jlc3PvvIjkuIrkvKDkuK3vvInjgIFcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW50ZXJ1cHTvvIjmmoLlgZzkuK3vvIkg55qE56e76Zmk44CCXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhY2suc3BsaWNlKCAtLWksIDEgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIF9uZXh0QmxvY2s6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICBvcHRzID0gbWUub3B0aW9ucyxcclxuICAgICAgICAgICAgICAgICAgICBhY3QsIG5leHQsIGRvbmUsIHByZXBhcmluZztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c5b2T5YmN5paH5Lu26L+Y5pyJ5rKh5pyJ6ZyA6KaB5Lyg6L6T55qE77yM5YiZ55u05o6l6L+U5Zue5Ymp5LiL55qE44CCXHJcbiAgICAgICAgICAgICAgICBpZiAoIChhY3QgPSB0aGlzLl9nZXRTdGFjaygpKSApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOaYr+WQpuaPkOWJjeWHhuWkh+S4i+S4gOS4quaWh+S7tlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggb3B0cy5wcmVwYXJlTmV4dEZpbGUgJiYgIW1lLnBlbmRpbmcubGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZS5fcHJlcGFyZU5leHRGaWxlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjdC5zaGlmdCgpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDlkKbliJnvvIzlpoLmnpzmraPlnKjov5DooYzvvIzliJnlh4blpIfkuIvkuIDkuKrmlofku7bvvIzlubbnrYnlvoXlrozmiJDlkI7ov5Tlm57kuIvkuKrliIbniYfjgIJcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIG1lLnJ1bmluZyApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWmguaenOe8k+WtmOS4reacie+8jOWImeebtOaOpeWcqOe8k+WtmOS4reWPlu+8jOayoeacieWImeWOu3F1ZXVl5Lit5Y+W44CCXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhbWUucGVuZGluZy5sZW5ndGggJiYgbWUuX2dldFN0YXRzKCkubnVtT2ZRdWV1ZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWUuX3ByZXBhcmVOZXh0RmlsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIG5leHQgPSBtZS5wZW5kaW5nLnNoaWZ0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9uZSA9IGZ1bmN0aW9uKCBmaWxlICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoICFmaWxlICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3QgPSBDdXRlRmlsZSggZmlsZSwgb3B0cy5jaHVua2VkID8gb3B0cy5jaHVua1NpemUgOiAwICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lLnN0YWNrLnB1c2goYWN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjdC5zaGlmdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyDmlofku7blj6/og73ov5jlnKhwcmVwYXJl5Lit77yM5Lmf5pyJ5Y+v6IO95bey57uP5a6M5YWo5YeG5aSH5aW95LqG44CCXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBpc1Byb21pc2UoIG5leHQpICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVwYXJpbmcgPSBuZXh0LmZpbGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQgPSBuZXh0WyBuZXh0LnBpcGUgPyAncGlwZScgOiAndGhlbicgXSggZG9uZSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0LmZpbGUgPSBwcmVwYXJpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkb25lKCBuZXh0ICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQGV2ZW50IHVwbG9hZFN0YXJ0XHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZX0gZmlsZSBGaWxl5a+56LGhXHJcbiAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiDmn5DkuKrmlofku7blvIDlp4vkuIrkvKDliY3op6blj5HvvIzkuIDkuKrmlofku7blj6rkvJrop6blj5HkuIDmrKHjgIJcclxuICAgICAgICAgICAgICogQGZvciAgVXBsb2FkZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIF9wcmVwYXJlTmV4dEZpbGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICBmaWxlID0gbWUucmVxdWVzdCgnZmV0Y2gtZmlsZScpLFxyXG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmcgPSBtZS5wZW5kaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2U7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmICggZmlsZSApIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlID0gbWUucmVxdWVzdCggJ2JlZm9yZS1zZW5kLWZpbGUnLCBmaWxlLCBmdW5jdGlvbigpIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDmnInlj6/og73mlofku7booqtza2lw5o6J5LqG44CC5paH5Lu26KKrc2tpcOaOieWQju+8jOeKtuaAgeWdkeWumuS4jeaYr1F1ZXVlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBmaWxlLmdldFN0YXR1cygpID09PSBTdGF0dXMuUFJPR1JFU1MgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUuZ2V0U3RhdHVzKCkgPT09IFN0YXR1cy5JTlRFUlJVUFQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtZS5fZmluaXNoRmlsZSggZmlsZSApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgbWUub3duZXIudHJpZ2dlciggJ3VwbG9hZFN0YXJ0JywgZmlsZSApO1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbGUuc2V0U3RhdHVzKCBTdGF0dXMuUFJPR1JFU1MgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuZmlsZSA9IGZpbGU7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpzov5jlnKhwZW5kaW5n5Lit77yM5YiZ5pu/5o2i5oiQ5paH5Lu25pys6Lqr44CCXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5kb25lKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gJC5pbkFycmF5KCBwcm9taXNlLCBwZW5kaW5nICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfmlkeCAmJiBwZW5kaW5nLnNwbGljZSggaWR4LCAxLCBmaWxlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBiZWZlb3JlLXNlbmQtZmlsZeeahOmSqeWtkOWwseaciemUmeivr+WPkeeUn+OAglxyXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuZmFpbChmdW5jdGlvbiggcmVhc29uICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlLnNldFN0YXR1cyggU3RhdHVzLkVSUk9SLCByZWFzb24gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWUub3duZXIudHJpZ2dlciggJ3VwbG9hZEVycm9yJywgZmlsZSwgcmVhc29uICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lLm93bmVyLnRyaWdnZXIoICd1cGxvYWRDb21wbGV0ZScsIGZpbGUgKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmcucHVzaCggcHJvbWlzZSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIOiuqeWHuuS9jee9ruS6hu+8jOWPr+S7peiuqeWFtuS7luWIhueJh+W8gOWni+S4iuS8oFxyXG4gICAgICAgICAgICBfcG9wQmxvY2s6IGZ1bmN0aW9uKCBibG9jayApIHtcclxuICAgICAgICAgICAgICAgIHZhciBpZHggPSAkLmluQXJyYXkoIGJsb2NrLCB0aGlzLnBvb2wgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5wb29sLnNwbGljZSggaWR4LCAxICk7XHJcbiAgICAgICAgICAgICAgICBibG9jay5maWxlLnJlbWFuaW5nLS07XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbWFuaW5nLS07XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLy8g5byA5aeL5LiK5Lyg77yM5Y+v5Lul6KKr5o6J6L+H44CC5aaC5p6ccHJvbWlzZeiiq3JlamVjdOS6hu+8jOWImeihqOekuui3s+i/h+atpOWIhueJh+OAglxyXG4gICAgICAgICAgICBfc3RhcnRTZW5kOiBmdW5jdGlvbiggYmxvY2sgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWUgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGUgPSBibG9jay5maWxlLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2U7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOacieWPr+iDveWcqCBiZWZvcmUtc2VuZC1maWxlIOeahCBwcm9taXNlIOacn+mXtOaUueWPmOS6huaWh+S7tueKtuaAgeOAglxyXG4gICAgICAgICAgICAgICAgLy8g5aaC77ya5pqC5YGc77yM5Y+W5raIXHJcbiAgICAgICAgICAgICAgICAvLyDmiJHku6zkuI3og73kuK3mlq0gcHJvbWlzZSwg5L2G5piv5Y+v5Lul5ZyoIHByb21pc2Ug5a6M5ZCO77yM5LiN5YGa5LiK5Lyg5pON5L2c44CCXHJcbiAgICAgICAgICAgICAgICBpZiAoIGZpbGUuZ2V0U3RhdHVzKCkgIT09IFN0YXR1cy5QUk9HUkVTUyApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWmguaenOaYr+S4reaWre+8jOWImei/mOmcgOimgeaUvuWbnuWOu+OAglxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWxlLmdldFN0YXR1cygpID09PSBTdGF0dXMuSU5URVJSVVBUKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lLl9wdXRiYWNrKGJsb2NrKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG1lLnBvb2wucHVzaCggYmxvY2sgKTtcclxuICAgICAgICAgICAgICAgIG1lLnJlbWFuaW5nKys7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOWmguaenOayoeacieWIhueJh++8jOWImeebtOaOpeS9v+eUqOWOn+Wni+eahOOAglxyXG4gICAgICAgICAgICAgICAgLy8g5LiN5Lya5Lii5aSxY29udGVudC10eXBl5L+h5oGv44CCXHJcbiAgICAgICAgICAgICAgICBibG9jay5ibG9iID0gYmxvY2suY2h1bmtzID09PSAxID8gZmlsZS5zb3VyY2UgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlLnNvdXJjZS5zbGljZSggYmxvY2suc3RhcnQsIGJsb2NrLmVuZCApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBob29rLCDmr4/kuKrliIbniYflj5HpgIHkuYvliY3lj6/og73opoHlgZrkupvlvILmraXnmoTkuovmg4XjgIJcclxuICAgICAgICAgICAgICAgIHByb21pc2UgPSBtZS5yZXF1ZXN0KCAnYmVmb3JlLXNlbmQnLCBibG9jaywgZnVuY3Rpb24oKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyDmnInlj6/og73mlofku7blt7Lnu4/kuIrkvKDlh7rplJnkuobvvIzmiYDku6XkuI3pnIDopoHlho3kvKDovpPkuobjgIJcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGZpbGUuZ2V0U3RhdHVzKCkgPT09IFN0YXR1cy5QUk9HUkVTUyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWUuX2RvU2VuZCggYmxvY2sgKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZS5fcG9wQmxvY2soIGJsb2NrICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEJhc2UubmV4dFRpY2soIG1lLl9fdGljayApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzkuLpmYWls5LqG77yM5YiZ6Lez6L+H5q2k5YiG54mH44CCXHJcbiAgICAgICAgICAgICAgICBwcm9taXNlLmZhaWwoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBmaWxlLnJlbWFuaW5nID09PSAxICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZS5fZmluaXNoRmlsZSggZmlsZSApLmFsd2F5cyhmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLnBlcmNlbnRhZ2UgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUuX3BvcEJsb2NrKCBibG9jayApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUub3duZXIudHJpZ2dlciggJ3VwbG9hZENvbXBsZXRlJywgZmlsZSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQmFzZS5uZXh0VGljayggbWUuX190aWNrICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLnBlcmNlbnRhZ2UgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZS51cGRhdGVGaWxlUHJvZ3Jlc3MoIGZpbGUgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWUuX3BvcEJsb2NrKCBibG9jayApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBCYXNlLm5leHRUaWNrKCBtZS5fX3RpY2sgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBAZXZlbnQgdXBsb2FkQmVmb3JlU2VuZFxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIOm7mOiupOeahOS4iuS8oOWPguaVsO+8jOWPr+S7peaJqeWxleatpOWvueixoeadpeaOp+WItuS4iuS8oOWPguaVsOOAglxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVycyDlj6/ku6XmianlsZXmraTlr7nosaHmnaXmjqfliLbkuIrkvKDlpLTpg6jjgIJcclxuICAgICAgICAgICAgICogQGRlc2NyaXB0aW9uIOW9k+afkOS4quaWh+S7tueahOWIhuWdl+WcqOWPkemAgeWJjeinpuWPke+8jOS4u+imgeeUqOadpeivoumXruaYr+WQpuimgea3u+WKoOmZhOW4puWPguaVsO+8jOWkp+aWh+S7tuWcqOW8gOi1t+WIhueJh+S4iuS8oOeahOWJjeaPkOS4i+atpOS6i+S7tuWPr+iDveS8muinpuWPkeWkmuasoeOAglxyXG4gICAgICAgICAgICAgKiBAZm9yICBVcGxvYWRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQGV2ZW50IHVwbG9hZEFjY2VwdFxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXQg5pyN5Yqh56uv55qE6L+U5Zue5pWw5o2u77yManNvbuagvOW8j++8jOWmguaenOacjeWKoeerr+S4jeaYr2pzb27moLzlvI/vvIzku45yZXQuX3Jhd+S4reWPluaVsOaNru+8jOiHquihjOino+aekOOAglxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g5b2T5p+Q5Liq5paH5Lu25LiK5Lyg5Yiw5pyN5Yqh56uv5ZON5bqU5ZCO77yM5Lya5rS+6YCB5q2k5LqL5Lu25p2l6K+i6Zeu5pyN5Yqh56uv5ZON5bqU5piv5ZCm5pyJ5pWI44CC5aaC5p6c5q2k5LqL5Lu2aGFuZGxlcui/lOWbnuWAvOS4umBmYWxzZWAsIOWImeatpOaWh+S7tuWwhua0vumAgWBzZXJ2ZXJg57G75Z6L55qEYHVwbG9hZEVycm9yYOS6i+S7tuOAglxyXG4gICAgICAgICAgICAgKiBAZm9yICBVcGxvYWRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQGV2ZW50IHVwbG9hZFByb2dyZXNzXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZX0gZmlsZSBGaWxl5a+56LGhXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBwZXJjZW50YWdlIOS4iuS8oOi/m+W6plxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g5LiK5Lyg6L+H56iL5Lit6Kem5Y+R77yM5pC65bim5LiK5Lyg6L+b5bqm44CCXHJcbiAgICAgICAgICAgICAqIEBmb3IgIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEBldmVudCB1cGxvYWRFcnJvclxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGV9IGZpbGUgRmlsZeWvueixoVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gcmVhc29uIOWHuumUmeeahGNvZGVcclxuICAgICAgICAgICAgICogQGRlc2NyaXB0aW9uIOW9k+aWh+S7tuS4iuS8oOWHuumUmeaXtuinpuWPkeOAglxyXG4gICAgICAgICAgICAgKiBAZm9yICBVcGxvYWRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQGV2ZW50IHVwbG9hZFN1Y2Nlc3NcclxuICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlfSBmaWxlIEZpbGXlr7nosaFcclxuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHJlc3BvbnNlIOacjeWKoeerr+i/lOWbnueahOaVsOaNrlxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g5b2T5paH5Lu25LiK5Lyg5oiQ5Yqf5pe26Kem5Y+R44CCXHJcbiAgICAgICAgICAgICAqIEBmb3IgIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBAZXZlbnQgdXBsb2FkQ29tcGxldGVcclxuICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlfSBbZmlsZV0gRmlsZeWvueixoVxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g5LiN566h5oiQ5Yqf5oiW6ICF5aSx6LSl77yM5paH5Lu25LiK5Lyg5a6M5oiQ5pe26Kem5Y+R44CCXHJcbiAgICAgICAgICAgICAqIEBmb3IgIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIOWBmuS4iuS8oOaTjeS9nOOAglxyXG4gICAgICAgICAgICBfZG9TZW5kOiBmdW5jdGlvbiggYmxvY2sgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWUgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgIG93bmVyID0gbWUub3duZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cyA9IG1lLm9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZSA9IGJsb2NrLmZpbGUsXHJcbiAgICAgICAgICAgICAgICAgICAgdHIgPSBuZXcgVHJhbnNwb3J0KCBvcHRzICksXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9ICQuZXh0ZW5kKHt9LCBvcHRzLmZvcm1EYXRhICksXHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVycyA9ICQuZXh0ZW5kKHt9LCBvcHRzLmhlYWRlcnMgKSxcclxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0QWNjZXB0LCByZXQ7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGJsb2NrLnRyYW5zcG9ydCA9IHRyO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB0ci5vbiggJ2Rlc3Ryb3knLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgYmxvY2sudHJhbnNwb3J0O1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLl9wb3BCbG9jayggYmxvY2sgKTtcclxuICAgICAgICAgICAgICAgICAgICBCYXNlLm5leHRUaWNrKCBtZS5fX3RpY2sgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDlub/mkq3kuIrkvKDov5vluqbjgILku6Xmlofku7bkuLrljZXkvY3jgIJcclxuICAgICAgICAgICAgICAgIHRyLm9uKCAncHJvZ3Jlc3MnLCBmdW5jdGlvbiggcGVyY2VudGFnZSApIHtcclxuICAgICAgICAgICAgICAgICAgICBibG9jay5wZXJjZW50YWdlID0gcGVyY2VudGFnZTtcclxuICAgICAgICAgICAgICAgICAgICBtZS51cGRhdGVGaWxlUHJvZ3Jlc3MoIGZpbGUgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDnlKjmnaXor6Lpl67vvIzmmK/lkKbov5Tlm57nmoTnu5PmnpzmmK/mnInplJnor6/nmoTjgIJcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RBY2NlcHQgPSBmdW5jdGlvbiggcmVqZWN0ICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmbjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldCA9IHRyLmdldFJlc3BvbnNlQXNKc29uKCkgfHwge307XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0Ll9yYXcgPSB0ci5nZXRSZXNwb25zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZuID0gZnVuY3Rpb24oIHZhbHVlICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5pyN5Yqh56uv5ZON5bqU5LqG77yM5LiN5Luj6KGo5oiQ5Yqf5LqG77yM6K+i6Zeu5piv5ZCm5ZON5bqU5q2j56Gu44CCXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhb3duZXIudHJpZ2dlciggJ3VwbG9hZEFjY2VwdCcsIGJsb2NrLCByZXQsIGZuICkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCA9IHJlamVjdCB8fCAnc2VydmVyJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0O1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g5bCd6K+V6YeN6K+V77yM54S25ZCO5bm/5pKt5paH5Lu25LiK5Lyg5Ye66ZSZ44CCXHJcbiAgICAgICAgICAgICAgICB0ci5vbiggJ2Vycm9yJywgZnVuY3Rpb24oIHR5cGUsIGZsYWcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmxvY2sucmV0cmllZCA9IGJsb2NrLnJldHJpZWQgfHwgMDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOiHquWKqOmHjeivlVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggYmxvY2suY2h1bmtzID4gMSAmJiB+J2h0dHAsYWJvcnQnLmluZGV4T2YoIHR5cGUgKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sucmV0cmllZCA8IG9wdHMuY2h1bmtSZXRyeSApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBibG9jay5yZXRyaWVkKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyLnNlbmQoKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaHR0cCBzdGF0dXMgNTAwIH4gNjAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggIWZsYWcgJiYgdHlwZSA9PT0gJ3NlcnZlcicgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlID0gcmVxdWVzdEFjY2VwdCggdHlwZSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZS5zZXRTdGF0dXMoIFN0YXR1cy5FUlJPUiwgdHlwZSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvd25lci50cmlnZ2VyKCAndXBsb2FkRXJyb3InLCBmaWxlLCB0eXBlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG93bmVyLnRyaWdnZXIoICd1cGxvYWRDb21wbGV0ZScsIGZpbGUgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g5LiK5Lyg5oiQ5YqfXHJcbiAgICAgICAgICAgICAgICB0ci5vbiggJ2xvYWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVhc29uO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c6Z2e6aKE5pyf77yM6L2s5ZCR5LiK5Lyg5Ye66ZSZ44CCXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAocmVhc29uID0gcmVxdWVzdEFjY2VwdCgpKSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHIudHJpZ2dlciggJ2Vycm9yJywgcmVhc29uLCB0cnVlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyDlhajpg6jkuIrkvKDlrozmiJDjgIJcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGZpbGUucmVtYW5pbmcgPT09IDEgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lLl9maW5pc2hGaWxlKCBmaWxlLCByZXQgKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ci5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOmFjee9rum7mOiupOeahOS4iuS8oOWtl+auteOAglxyXG4gICAgICAgICAgICAgICAgZGF0YSA9ICQuZXh0ZW5kKCBkYXRhLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGZpbGUuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogZmlsZS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGZpbGUudHlwZSxcclxuICAgICAgICAgICAgICAgICAgICBsYXN0TW9kaWZpZWREYXRlOiBmaWxlLmxhc3RNb2RpZmllZERhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogZmlsZS5zaXplXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgYmxvY2suY2h1bmtzID4gMSAmJiAkLmV4dGVuZCggZGF0YSwge1xyXG4gICAgICAgICAgICAgICAgICAgIGNodW5rczogYmxvY2suY2h1bmtzLFxyXG4gICAgICAgICAgICAgICAgICAgIGNodW5rOiBibG9jay5jaHVua1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOWcqOWPkemAgeS5i+mXtOWPr+S7pea3u+WKoOWtl+auteS7gOS5iOeahOOAguOAguOAglxyXG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c6buY6K6k55qE5a2X5q615LiN5aSf5L2/55So77yM5Y+v5Lul6YCa6L+H55uR5ZCs5q2k5LqL5Lu25p2l5omp5bGVXHJcbiAgICAgICAgICAgICAgICBvd25lci50cmlnZ2VyKCAndXBsb2FkQmVmb3JlU2VuZCcsIGJsb2NrLCBkYXRhLCBoZWFkZXJzICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOW8gOWni+WPkemAgeOAglxyXG4gICAgICAgICAgICAgICAgdHIuYXBwZW5kQmxvYiggb3B0cy5maWxlVmFsLCBibG9jay5ibG9iLCBmaWxlLm5hbWUgKTtcclxuICAgICAgICAgICAgICAgIHRyLmFwcGVuZCggZGF0YSApO1xyXG4gICAgICAgICAgICAgICAgdHIuc2V0UmVxdWVzdEhlYWRlciggaGVhZGVycyApO1xyXG4gICAgICAgICAgICAgICAgdHIuc2VuZCgpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIOWujOaIkOS4iuS8oOOAglxyXG4gICAgICAgICAgICBfZmluaXNoRmlsZTogZnVuY3Rpb24oIGZpbGUsIHJldCwgaGRzICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG93bmVyID0gdGhpcy5vd25lcjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG93bmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXF1ZXN0KCAnYWZ0ZXItc2VuZC1maWxlJywgYXJndW1lbnRzLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUuc2V0U3RhdHVzKCBTdGF0dXMuQ09NUExFVEUgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG93bmVyLnRyaWdnZXIoICd1cGxvYWRTdWNjZXNzJywgZmlsZSwgcmV0LCBoZHMgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmZhaWwoZnVuY3Rpb24oIHJlYXNvbiApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c5aSW6YOo5bey57uP5qCH6K6w5Li6aW52YWxpZOS7gOS5iOeahO+8jOS4jeWGjeaUueeKtuaAgeOAglxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBmaWxlLmdldFN0YXR1cygpID09PSBTdGF0dXMuUFJPR1JFU1MgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZS5zZXRTdGF0dXMoIFN0YXR1cy5FUlJPUiwgcmVhc29uICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG93bmVyLnRyaWdnZXIoICd1cGxvYWRFcnJvcicsIGZpbGUsIHJlYXNvbiApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWx3YXlzKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3duZXIudHJpZ2dlciggJ3VwbG9hZENvbXBsZXRlJywgZmlsZSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICB1cGRhdGVGaWxlUHJvZ3Jlc3M6IGZ1bmN0aW9uKGZpbGUpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0b3RhbFBlcmNlbnQgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHVwbG9hZGVkID0gMDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCFmaWxlLmJsb2Nrcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgJC5lYWNoKCBmaWxlLmJsb2NrcywgZnVuY3Rpb24oIF8sIHYgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBsb2FkZWQgKz0gKHYucGVyY2VudGFnZSB8fCAwKSAqICh2LmVuZCAtIHYuc3RhcnQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHRvdGFsUGVyY2VudCA9IHVwbG9hZGVkIC8gZmlsZS5zaXplO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vd25lci50cmlnZ2VyKCAndXBsb2FkUHJvZ3Jlc3MnLCBmaWxlLCB0b3RhbFBlcmNlbnQgfHwgMCApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEBmaWxlT3ZlcnZpZXcg5ZCE56eN6aqM6K+B77yM5YyF5ous5paH5Lu25oC75aSn5bCP5piv5ZCm6LaF5Ye644CB5Y2V5paH5Lu25piv5ZCm6LaF5Ye65ZKM5paH5Lu25piv5ZCm6YeN5aSN44CCXHJcbiAgICAgKi9cclxuICAgIFxyXG4gICAgZGVmaW5lKCd3aWRnZXRzL3ZhbGlkYXRvcicsW1xyXG4gICAgICAgICdiYXNlJyxcclxuICAgICAgICAndXBsb2FkZXInLFxyXG4gICAgICAgICdmaWxlJyxcclxuICAgICAgICAnd2lkZ2V0cy93aWRnZXQnXHJcbiAgICBdLCBmdW5jdGlvbiggQmFzZSwgVXBsb2FkZXIsIFdVRmlsZSApIHtcclxuICAgIFxyXG4gICAgICAgIHZhciAkID0gQmFzZS4kLFxyXG4gICAgICAgICAgICB2YWxpZGF0b3JzID0ge30sXHJcbiAgICAgICAgICAgIGFwaTtcclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBldmVudCBlcnJvclxyXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIOmUmeivr+exu+Wei+OAglxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiDlvZN2YWxpZGF0ZeS4jemAmui/h+aXtu+8jOS8muS7pea0vumAgemUmeivr+S6i+S7tueahOW9ouW8j+mAmuefpeiwg+eUqOiAheOAgumAmui/h2B1cGxvYWQub24oJ2Vycm9yJywgaGFuZGxlcilg5Y+v5Lul5o2V6I635Yiw5q2k57G76ZSZ6K+v77yM55uu5YmN5pyJ5Lul5LiL6ZSZ6K+v5Lya5Zyo54m55a6a55qE5oOF5Ya15LiL5rS+6YCB6ZSZ5p2l44CCXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAqIGBRX0VYQ0VFRF9OVU1fTElNSVRgIOWcqOiuvue9ruS6hmBmaWxlTnVtTGltaXRg5LiU5bCd6K+V57uZYHVwbG9hZGVyYOa3u+WKoOeahOaWh+S7tuaVsOmHj+i2heWHuui/meS4quWAvOaXtua0vumAgeOAglxyXG4gICAgICAgICAqICogYFFfRVhDRUVEX1NJWkVfTElNSVRgIOWcqOiuvue9ruS6hmBRX0VYQ0VFRF9TSVpFX0xJTUlUYOS4lOWwneivlee7mWB1cGxvYWRlcmDmt7vliqDnmoTmlofku7bmgLvlpKflsI/otoXlh7rov5nkuKrlgLzml7bmtL7pgIHjgIJcclxuICAgICAgICAgKiAqIGBRX1RZUEVfREVOSUVEYCDlvZPmlofku7bnsbvlnovkuI3mu6HotrPml7bop6blj5HjgILjgIJcclxuICAgICAgICAgKiBAZm9yICBVcGxvYWRlclxyXG4gICAgICAgICAqL1xyXG4gICAgXHJcbiAgICAgICAgLy8g5pq06Zyy57uZ5aSW6Z2i55qEYXBpXHJcbiAgICAgICAgYXBpID0ge1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIOa3u+WKoOmqjOivgeWZqFxyXG4gICAgICAgICAgICBhZGRWYWxpZGF0b3I6IGZ1bmN0aW9uKCB0eXBlLCBjYiApIHtcclxuICAgICAgICAgICAgICAgIHZhbGlkYXRvcnNbIHR5cGUgXSA9IGNiO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIOenu+mZpOmqjOivgeWZqFxyXG4gICAgICAgICAgICByZW1vdmVWYWxpZGF0b3I6IGZ1bmN0aW9uKCB0eXBlICkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHZhbGlkYXRvcnNbIHR5cGUgXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAvLyDlnKhVcGxvYWRlcuWIneWni+WMlueahOaXtuWAmeWQr+WKqFZhbGlkYXRvcnPnmoTliJ3lp4vljJZcclxuICAgICAgICBVcGxvYWRlci5yZWdpc3Rlcih7XHJcbiAgICAgICAgICAgIG5hbWU6ICd2YWxpZGF0b3InLFxyXG4gICAgXHJcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lID0gdGhpcztcclxuICAgICAgICAgICAgICAgIEJhc2UubmV4dFRpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKCB2YWxpZGF0b3JzLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxsKCBtZS5vd25lciApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7aW50fSBbZmlsZU51bUxpbWl0PXVuZGVmaW5lZF1cclxuICAgICAgICAgKiBAbmFtZXNwYWNlIG9wdGlvbnNcclxuICAgICAgICAgKiBAZm9yIFVwbG9hZGVyXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIOmqjOivgeaWh+S7tuaAu+aVsOmHjywg6LaF5Ye65YiZ5LiN5YWB6K645Yqg5YWl6Zif5YiX44CCXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgYXBpLmFkZFZhbGlkYXRvciggJ2ZpbGVOdW1MaW1pdCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgdXBsb2FkZXIgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgb3B0cyA9IHVwbG9hZGVyLm9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICBjb3VudCA9IDAsXHJcbiAgICAgICAgICAgICAgICBtYXggPSBwYXJzZUludCggb3B0cy5maWxlTnVtTGltaXQsIDEwICksXHJcbiAgICAgICAgICAgICAgICBmbGFnID0gdHJ1ZTtcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoICFtYXggKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICB1cGxvYWRlci5vbiggJ2JlZm9yZUZpbGVRdWV1ZWQnLCBmdW5jdGlvbiggZmlsZSApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCBjb3VudCA+PSBtYXggJiYgZmxhZyApIHtcclxuICAgICAgICAgICAgICAgICAgICBmbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCAnZXJyb3InLCAnUV9FWENFRURfTlVNX0xJTUlUJywgbWF4LCBmaWxlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY291bnQgPj0gbWF4ID8gZmFsc2UgOiB0cnVlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICB1cGxvYWRlci5vbiggJ2ZpbGVRdWV1ZWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHVwbG9hZGVyLm9uKCAnZmlsZURlcXVldWVkJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBjb3VudC0tO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICB1cGxvYWRlci5vbiggJ3Jlc2V0JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBjb3VudCA9IDA7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcHJvcGVydHkge2ludH0gW2ZpbGVTaXplTGltaXQ9dW5kZWZpbmVkXVxyXG4gICAgICAgICAqIEBuYW1lc3BhY2Ugb3B0aW9uc1xyXG4gICAgICAgICAqIEBmb3IgVXBsb2FkZXJcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24g6aqM6K+B5paH5Lu25oC75aSn5bCP5piv5ZCm6LaF5Ye66ZmQ5Yi2LCDotoXlh7rliJnkuI3lhYHorrjliqDlhaXpmJ/liJfjgIJcclxuICAgICAgICAgKi9cclxuICAgICAgICBhcGkuYWRkVmFsaWRhdG9yKCAnZmlsZVNpemVMaW1pdCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgdXBsb2FkZXIgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgb3B0cyA9IHVwbG9hZGVyLm9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICBjb3VudCA9IDAsXHJcbiAgICAgICAgICAgICAgICBtYXggPSBwYXJzZUludCggb3B0cy5maWxlU2l6ZUxpbWl0LCAxMCApLFxyXG4gICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKCAhbWF4ICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgdXBsb2FkZXIub24oICdiZWZvcmVGaWxlUXVldWVkJywgZnVuY3Rpb24oIGZpbGUgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW52YWxpZCA9IGNvdW50ICsgZmlsZS5zaXplID4gbWF4O1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIGludmFsaWQgJiYgZmxhZyApIHtcclxuICAgICAgICAgICAgICAgICAgICBmbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCAnZXJyb3InLCAnUV9FWENFRURfU0laRV9MSU1JVCcsIG1heCwgZmlsZSApO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDEgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGludmFsaWQgPyBmYWxzZSA6IHRydWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHVwbG9hZGVyLm9uKCAnZmlsZVF1ZXVlZCcsIGZ1bmN0aW9uKCBmaWxlICkge1xyXG4gICAgICAgICAgICAgICAgY291bnQgKz0gZmlsZS5zaXplO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICB1cGxvYWRlci5vbiggJ2ZpbGVEZXF1ZXVlZCcsIGZ1bmN0aW9uKCBmaWxlICkge1xyXG4gICAgICAgICAgICAgICAgY291bnQgLT0gZmlsZS5zaXplO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICB1cGxvYWRlci5vbiggJ3Jlc2V0JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBjb3VudCA9IDA7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHByb3BlcnR5IHtpbnR9IFtmaWxlU2luZ2xlU2l6ZUxpbWl0PXVuZGVmaW5lZF1cclxuICAgICAgICAgKiBAbmFtZXNwYWNlIG9wdGlvbnNcclxuICAgICAgICAgKiBAZm9yIFVwbG9hZGVyXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIOmqjOivgeWNleS4quaWh+S7tuWkp+Wwj+aYr+WQpui2heWHuumZkOWItiwg6LaF5Ye65YiZ5LiN5YWB6K645Yqg5YWl6Zif5YiX44CCXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgYXBpLmFkZFZhbGlkYXRvciggJ2ZpbGVTaW5nbGVTaXplTGltaXQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHVwbG9hZGVyID0gdGhpcyxcclxuICAgICAgICAgICAgICAgIG9wdHMgPSB1cGxvYWRlci5vcHRpb25zLFxyXG4gICAgICAgICAgICAgICAgbWF4ID0gb3B0cy5maWxlU2luZ2xlU2l6ZUxpbWl0O1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICggIW1heCApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHVwbG9hZGVyLm9uKCAnYmVmb3JlRmlsZVF1ZXVlZCcsIGZ1bmN0aW9uKCBmaWxlICkge1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIGZpbGUuc2l6ZSA+IG1heCApIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlLnNldFN0YXR1cyggV1VGaWxlLlN0YXR1cy5JTlZBTElELCAnZXhjZWVkX3NpemUnICk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCAnZXJyb3InLCAnRl9FWENFRURfU0laRScsIG1heCwgZmlsZSApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHByb3BlcnR5IHtCb29sZWFufSBbZHVwbGljYXRlPXVuZGVmaW5lZF1cclxuICAgICAgICAgKiBAbmFtZXNwYWNlIG9wdGlvbnNcclxuICAgICAgICAgKiBAZm9yIFVwbG9hZGVyXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIOWOu+mHje+8jCDmoLnmja7mlofku7blkI3lrZfjgIHmlofku7blpKflsI/lkozmnIDlkI7kv67mlLnml7bpl7TmnaXnlJ/miJBoYXNoIEtleS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBhcGkuYWRkVmFsaWRhdG9yKCAnZHVwbGljYXRlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciB1cGxvYWRlciA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICBvcHRzID0gdXBsb2FkZXIub3B0aW9ucyxcclxuICAgICAgICAgICAgICAgIG1hcHBpbmcgPSB7fTtcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoIG9wdHMuZHVwbGljYXRlICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgZnVuY3Rpb24gaGFzaFN0cmluZyggc3RyICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGhhc2ggPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGkgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGxlbiA9IHN0ci5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgX2NoYXI7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xyXG4gICAgICAgICAgICAgICAgICAgIF9jaGFyID0gc3RyLmNoYXJDb2RlQXQoIGkgKTtcclxuICAgICAgICAgICAgICAgICAgICBoYXNoID0gX2NoYXIgKyAoaGFzaCA8PCA2KSArIChoYXNoIDw8IDE2KSAtIGhhc2g7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBoYXNoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgdXBsb2FkZXIub24oICdiZWZvcmVGaWxlUXVldWVkJywgZnVuY3Rpb24oIGZpbGUgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaGFzaCA9IGZpbGUuX19oYXNoIHx8IChmaWxlLl9faGFzaCA9IGhhc2hTdHJpbmcoIGZpbGUubmFtZSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUuc2l6ZSArIGZpbGUubGFzdE1vZGlmaWVkRGF0ZSApKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g5bey57uP6YeN5aSN5LqGXHJcbiAgICAgICAgICAgICAgICBpZiAoIG1hcHBpbmdbIGhhc2ggXSApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoICdlcnJvcicsICdGX0RVUExJQ0FURScsIGZpbGUgKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHVwbG9hZGVyLm9uKCAnZmlsZVF1ZXVlZCcsIGZ1bmN0aW9uKCBmaWxlICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGhhc2ggPSBmaWxlLl9faGFzaDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaGFzaCAmJiAobWFwcGluZ1sgaGFzaCBdID0gdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHVwbG9hZGVyLm9uKCAnZmlsZURlcXVldWVkJywgZnVuY3Rpb24oIGZpbGUgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaGFzaCA9IGZpbGUuX19oYXNoO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBoYXNoICYmIChkZWxldGUgbWFwcGluZ1sgaGFzaCBdKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgdXBsb2FkZXIub24oICdyZXNldCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgbWFwcGluZyA9IHt9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBhcGk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IE1kNVxyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ2xpYi9tZDUnLFtcclxuICAgICAgICAncnVudGltZS9jbGllbnQnLFxyXG4gICAgICAgICdtZWRpYXRvcidcclxuICAgIF0sIGZ1bmN0aW9uKCBSdW50aW1lQ2xpZW50LCBNZWRpYXRvciApIHtcclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIE1kNSgpIHtcclxuICAgICAgICAgICAgUnVudGltZUNsaWVudC5jYWxsKCB0aGlzLCAnTWQ1JyApO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8vIOiuqSBNZDUg5YW35aSH5LqL5Lu25Yqf6IO944CCXHJcbiAgICAgICAgTWVkaWF0b3IuaW5zdGFsbFRvKCBNZDUucHJvdG90eXBlICk7XHJcbiAgICBcclxuICAgICAgICBNZDUucHJvdG90eXBlLmxvYWRGcm9tQmxvYiA9IGZ1bmN0aW9uKCBibG9iICkge1xyXG4gICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICggbWUuZ2V0UnVpZCgpICkge1xyXG4gICAgICAgICAgICAgICAgbWUuZGlzY29ubmVjdFJ1bnRpbWUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIOi/nuaOpeWIsGJsb2LlvZLlsZ7nmoTlkIzkuIDkuKpydW50aW1lLlxyXG4gICAgICAgICAgICBtZS5jb25uZWN0UnVudGltZSggYmxvYi5ydWlkLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIG1lLmV4ZWMoJ2luaXQnKTtcclxuICAgICAgICAgICAgICAgIG1lLmV4ZWMoICdsb2FkRnJvbUJsb2InLCBibG9iICk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBNZDUucHJvdG90eXBlLmdldFJlc3VsdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5leGVjKCdnZXRSZXN1bHQnKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIE1kNTtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IOWbvueJh+aTjeS9nCwg6LSf6LSj6aKE6KeI5Zu+54mH5ZKM5LiK5Lyg5YmN5Y6L57yp5Zu+54mHXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgnd2lkZ2V0cy9tZDUnLFtcclxuICAgICAgICAnYmFzZScsXHJcbiAgICAgICAgJ3VwbG9hZGVyJyxcclxuICAgICAgICAnbGliL21kNScsXHJcbiAgICAgICAgJ2xpYi9ibG9iJyxcclxuICAgICAgICAnd2lkZ2V0cy93aWRnZXQnXHJcbiAgICBdLCBmdW5jdGlvbiggQmFzZSwgVXBsb2FkZXIsIE1kNSwgQmxvYiApIHtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBVcGxvYWRlci5yZWdpc3Rlcih7XHJcbiAgICAgICAgICAgIG5hbWU6ICdtZDUnLFxyXG4gICAgXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOiuoeeul+aWh+S7tiBtZDUg5YC877yM6L+U5Zue5LiA5LiqIHByb21pc2Ug5a+56LGh77yM5Y+v5Lul55uR5ZCsIHByb2dyZXNzIOi/m+W6puOAglxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBAbWV0aG9kIG1kNUZpbGVcclxuICAgICAgICAgICAgICogQGdyYW1tYXIgbWQ1RmlsZSggZmlsZVssIHN0YXJ0WywgZW5kXV0gKSA9PiBwcm9taXNlXHJcbiAgICAgICAgICAgICAqIEBmb3IgVXBsb2FkZXJcclxuICAgICAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogdXBsb2FkZXIub24oICdmaWxlUXVldWVkJywgZnVuY3Rpb24oIGZpbGUgKSB7XHJcbiAgICAgICAgICAgICAqICAgICB2YXIgJGxpID0gLi4uO1xyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiAgICAgdXBsb2FkZXIubWQ1RmlsZSggZmlsZSApXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqICAgICAgICAgLy8g5Y+K5pe25pi+56S66L+b5bqmXHJcbiAgICAgICAgICAgICAqICAgICAgICAgLnByb2dyZXNzKGZ1bmN0aW9uKHBlcmNlbnRhZ2UpIHtcclxuICAgICAgICAgICAgICogICAgICAgICAgICAgY29uc29sZS5sb2coJ1BlcmNlbnRhZ2U6JywgcGVyY2VudGFnZSk7XHJcbiAgICAgICAgICAgICAqICAgICAgICAgfSlcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogICAgICAgICAvLyDlrozmiJBcclxuICAgICAgICAgICAgICogICAgICAgICAudGhlbihmdW5jdGlvbih2YWwpIHtcclxuICAgICAgICAgICAgICogICAgICAgICAgICAgY29uc29sZS5sb2coJ21kNSByZXN1bHQ6JywgdmFsKTtcclxuICAgICAgICAgICAgICogICAgICAgICB9KTtcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogfSk7XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBtZDVGaWxlOiBmdW5jdGlvbiggZmlsZSwgc3RhcnQsIGVuZCApIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZDUgPSBuZXcgTWQ1KCksXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQgPSBCYXNlLkRlZmVycmVkKCksXHJcbiAgICAgICAgICAgICAgICAgICAgYmxvYiA9IChmaWxlIGluc3RhbmNlb2YgQmxvYikgPyBmaWxlIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXF1ZXN0KCAnZ2V0LWZpbGUnLCBmaWxlICkuc291cmNlO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBtZDUub24oICdwcm9ncmVzcyBsb2FkJywgZnVuY3Rpb24oIGUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZSA9IGUgfHwge307XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQubm90aWZ5KCBlLnRvdGFsID8gZS5sb2FkZWQgLyBlLnRvdGFsIDogMSApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG1kNS5vbiggJ2NvbXBsZXRlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSggbWQ1LmdldFJlc3VsdCgpICk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgbWQ1Lm9uKCAnZXJyb3InLCBmdW5jdGlvbiggcmVhc29uICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCggcmVhc29uICk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCBhcmd1bWVudHMubGVuZ3RoID4gMSApIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGFydCA9IHN0YXJ0IHx8IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgZW5kID0gZW5kIHx8IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQgPCAwICYmIChzdGFydCA9IGJsb2Iuc2l6ZSArIHN0YXJ0KTtcclxuICAgICAgICAgICAgICAgICAgICBlbmQgPCAwICYmIChlbmQgPSBibG9iLnNpemUgKyBlbmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVuZCA9IE1hdGgubWluKCBlbmQsIGJsb2Iuc2l6ZSApO1xyXG4gICAgICAgICAgICAgICAgICAgIGJsb2IgPSBibG9iLnNsaWNlKCBzdGFydCwgZW5kICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG1kNS5sb2FkRnJvbUJsb2IoIGJsb2IgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIEBmaWxlT3ZlcnZpZXcgUnVudGltZeeuoeeQhuWZqO+8jOi0n+i0o1J1bnRpbWXnmoTpgInmi6ksIOi/nuaOpVxyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ3J1bnRpbWUvY29tcGJhc2UnLFtdLGZ1bmN0aW9uKCkge1xyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gQ29tcEJhc2UoIG93bmVyLCBydW50aW1lICkge1xyXG4gICAgXHJcbiAgICAgICAgICAgIHRoaXMub3duZXIgPSBvd25lcjtcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gb3duZXIub3B0aW9ucztcclxuICAgIFxyXG4gICAgICAgICAgICB0aGlzLmdldFJ1bnRpbWUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBydW50aW1lO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgICAgIHRoaXMuZ2V0UnVpZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJ1bnRpbWUudWlkO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG93bmVyLnRyaWdnZXIuYXBwbHkoIG93bmVyLCBhcmd1bWVudHMgKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gQ29tcEJhc2U7XHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyBIdG1sNVJ1bnRpbWVcclxuICAgICAqL1xyXG4gICAgZGVmaW5lKCdydW50aW1lL2h0bWw1L3J1bnRpbWUnLFtcclxuICAgICAgICAnYmFzZScsXHJcbiAgICAgICAgJ3J1bnRpbWUvcnVudGltZScsXHJcbiAgICAgICAgJ3J1bnRpbWUvY29tcGJhc2UnXHJcbiAgICBdLCBmdW5jdGlvbiggQmFzZSwgUnVudGltZSwgQ29tcEJhc2UgKSB7XHJcbiAgICBcclxuICAgICAgICB2YXIgdHlwZSA9ICdodG1sNScsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudHMgPSB7fTtcclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIEh0bWw1UnVudGltZSgpIHtcclxuICAgICAgICAgICAgdmFyIHBvb2wgPSB7fSxcclxuICAgICAgICAgICAgICAgIG1lID0gdGhpcyxcclxuICAgICAgICAgICAgICAgIGRlc3Ryb3kgPSB0aGlzLmRlc3Ryb3k7XHJcbiAgICBcclxuICAgICAgICAgICAgUnVudGltZS5hcHBseSggbWUsIGFyZ3VtZW50cyApO1xyXG4gICAgICAgICAgICBtZS50eXBlID0gdHlwZTtcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIOi/meS4quaWueazleeahOiwg+eUqOiAhe+8jOWunumZheS4iuaYr1J1bnRpbWVDbGllbnRcclxuICAgICAgICAgICAgbWUuZXhlYyA9IGZ1bmN0aW9uKCBjb21wLCBmbi8qLCBhcmdzLi4uKi8pIHtcclxuICAgICAgICAgICAgICAgIHZhciBjbGllbnQgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgIHVpZCA9IGNsaWVudC51aWQsXHJcbiAgICAgICAgICAgICAgICAgICAgYXJncyA9IEJhc2Uuc2xpY2UoIGFyZ3VtZW50cywgMiApLFxyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIGNvbXBvbmVudHNbIGNvbXAgXSApIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IHBvb2xbIHVpZCBdID0gcG9vbFsgdWlkIF0gfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBjb21wb25lbnRzWyBjb21wIF0oIGNsaWVudCwgbWUgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggaW5zdGFuY2VbIGZuIF0gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZVsgZm4gXS5hcHBseSggaW5zdGFuY2UsIGFyZ3MgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgbWUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQHRvZG8g5Yig6Zmk5rGg5a2Q5Lit55qE5omA5pyJ5a6e5L6LXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVzdHJveSAmJiBkZXN0cm95LmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBCYXNlLmluaGVyaXRzKCBSdW50aW1lLCB7XHJcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yOiBIdG1sNVJ1bnRpbWUsXHJcbiAgICBcclxuICAgICAgICAgICAgLy8g5LiN6ZyA6KaB6L+e5o6l5YW25LuW56iL5bqP77yM55u05o6l5omn6KGMY2FsbGJhY2tcclxuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZS50cmlnZ2VyKCdyZWFkeScpO1xyXG4gICAgICAgICAgICAgICAgfSwgMSApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgIC8vIOazqOWGjENvbXBvbmVudHNcclxuICAgICAgICBIdG1sNVJ1bnRpbWUucmVnaXN0ZXIgPSBmdW5jdGlvbiggbmFtZSwgY29tcG9uZW50ICkge1xyXG4gICAgICAgICAgICB2YXIga2xhc3MgPSBjb21wb25lbnRzWyBuYW1lIF0gPSBCYXNlLmluaGVyaXRzKCBDb21wQmFzZSwgY29tcG9uZW50ICk7XHJcbiAgICAgICAgICAgIHJldHVybiBrbGFzcztcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgLy8g5rOo5YaMaHRtbDXov5DooYzml7bjgIJcclxuICAgICAgICAvLyDlj6rmnInlnKjmlK/mjIHnmoTliY3mj5DkuIvms6jlhozjgIJcclxuICAgICAgICBpZiAoIHdpbmRvdy5CbG9iICYmIHdpbmRvdy5GaWxlUmVhZGVyICYmIHdpbmRvdy5EYXRhVmlldyApIHtcclxuICAgICAgICAgICAgUnVudGltZS5hZGRSdW50aW1lKCB0eXBlLCBIdG1sNVJ1bnRpbWUgKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gSHRtbDVSdW50aW1lO1xyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIEBmaWxlT3ZlcnZpZXcgQmxvYiBIdG1s5a6e546wXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgncnVudGltZS9odG1sNS9ibG9iJyxbXHJcbiAgICAgICAgJ3J1bnRpbWUvaHRtbDUvcnVudGltZScsXHJcbiAgICAgICAgJ2xpYi9ibG9iJ1xyXG4gICAgXSwgZnVuY3Rpb24oIEh0bWw1UnVudGltZSwgQmxvYiApIHtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBIdG1sNVJ1bnRpbWUucmVnaXN0ZXIoICdCbG9iJywge1xyXG4gICAgICAgICAgICBzbGljZTogZnVuY3Rpb24oIHN0YXJ0LCBlbmQgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmxvYiA9IHRoaXMub3duZXIuc291cmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNsaWNlID0gYmxvYi5zbGljZSB8fCBibG9iLndlYmtpdFNsaWNlIHx8IGJsb2IubW96U2xpY2U7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGJsb2IgPSBzbGljZS5jYWxsKCBibG9iLCBzdGFydCwgZW5kICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQmxvYiggdGhpcy5nZXRSdWlkKCksIGJsb2IgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIEBmaWxlT3ZlcnZpZXcgRmlsZVBhc3RlXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgncnVudGltZS9odG1sNS9kbmQnLFtcclxuICAgICAgICAnYmFzZScsXHJcbiAgICAgICAgJ3J1bnRpbWUvaHRtbDUvcnVudGltZScsXHJcbiAgICAgICAgJ2xpYi9maWxlJ1xyXG4gICAgXSwgZnVuY3Rpb24oIEJhc2UsIEh0bWw1UnVudGltZSwgRmlsZSApIHtcclxuICAgIFxyXG4gICAgICAgIHZhciAkID0gQmFzZS4kLFxyXG4gICAgICAgICAgICBwcmVmaXggPSAnd2VidXBsb2FkZXItZG5kLSc7XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gSHRtbDVSdW50aW1lLnJlZ2lzdGVyKCAnRHJhZ0FuZERyb3AnLCB7XHJcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGVsZW0gPSB0aGlzLmVsZW0gPSB0aGlzLm9wdGlvbnMuY29udGFpbmVyO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyYWdFbnRlckhhbmRsZXIgPSBCYXNlLmJpbmRGbiggdGhpcy5fZHJhZ0VudGVySGFuZGxlciwgdGhpcyApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kcmFnT3ZlckhhbmRsZXIgPSBCYXNlLmJpbmRGbiggdGhpcy5fZHJhZ092ZXJIYW5kbGVyLCB0aGlzICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyYWdMZWF2ZUhhbmRsZXIgPSBCYXNlLmJpbmRGbiggdGhpcy5fZHJhZ0xlYXZlSGFuZGxlciwgdGhpcyApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kcm9wSGFuZGxlciA9IEJhc2UuYmluZEZuKCB0aGlzLl9kcm9wSGFuZGxlciwgdGhpcyApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kbmRPdmVyID0gZmFsc2U7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGVsZW0ub24oICdkcmFnZW50ZXInLCB0aGlzLmRyYWdFbnRlckhhbmRsZXIgKTtcclxuICAgICAgICAgICAgICAgIGVsZW0ub24oICdkcmFnb3ZlcicsIHRoaXMuZHJhZ092ZXJIYW5kbGVyICk7XHJcbiAgICAgICAgICAgICAgICBlbGVtLm9uKCAnZHJhZ2xlYXZlJywgdGhpcy5kcmFnTGVhdmVIYW5kbGVyICk7XHJcbiAgICAgICAgICAgICAgICBlbGVtLm9uKCAnZHJvcCcsIHRoaXMuZHJvcEhhbmRsZXIgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCB0aGlzLm9wdGlvbnMuZGlzYWJsZUdsb2JhbERuZCApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCBkb2N1bWVudCApLm9uKCAnZHJhZ292ZXInLCB0aGlzLmRyYWdPdmVySGFuZGxlciApO1xyXG4gICAgICAgICAgICAgICAgICAgICQoIGRvY3VtZW50ICkub24oICdkcm9wJywgdGhpcy5kcm9wSGFuZGxlciApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIF9kcmFnRW50ZXJIYW5kbGVyOiBmdW5jdGlvbiggZSApIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZSA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgZGVuaWVkID0gbWUuX2RlbmllZCB8fCBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBpdGVtcztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZSA9IGUub3JpZ2luYWxFdmVudCB8fCBlO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoICFtZS5kbmRPdmVyICkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLmRuZE92ZXIgPSB0cnVlO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5rOo5oSP5Y+q5pyJIGNocm9tZSDmlK/mjIHjgIJcclxuICAgICAgICAgICAgICAgICAgICBpdGVtcyA9IGUuZGF0YVRyYW5zZmVyLml0ZW1zO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBpdGVtcyAmJiBpdGVtcy5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lLl9kZW5pZWQgPSBkZW5pZWQgPSAhbWUudHJpZ2dlciggJ2FjY2VwdCcsIGl0ZW1zICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgbWUuZWxlbS5hZGRDbGFzcyggcHJlZml4ICsgJ292ZXInICk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWUuZWxlbVsgZGVuaWVkID8gJ2FkZENsYXNzJyA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAncmVtb3ZlQ2xhc3MnIF0oIHByZWZpeCArICdkZW5pZWQnICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGUuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSBkZW5pZWQgPyAnbm9uZScgOiAnY29weSc7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBfZHJhZ092ZXJIYW5kbGVyOiBmdW5jdGlvbiggZSApIHtcclxuICAgICAgICAgICAgICAgIC8vIOWPquWkhOeQhuahhuWGheeahOOAglxyXG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudEVsZW0gPSB0aGlzLmVsZW0ucGFyZW50KCkuZ2V0KCAwICk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHBhcmVudEVsZW0gJiYgISQuY29udGFpbnMoIHBhcmVudEVsZW0sIGUuY3VycmVudFRhcmdldCApICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KCB0aGlzLl9sZWF2ZVRpbWVyICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kcmFnRW50ZXJIYW5kbGVyLmNhbGwoIHRoaXMsIGUgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIF9kcmFnTGVhdmVIYW5kbGVyOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZSA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlcjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaGFuZGxlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLmRuZE92ZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBtZS5lbGVtLnJlbW92ZUNsYXNzKCBwcmVmaXggKyAnb3ZlciAnICsgcHJlZml4ICsgJ2RlbmllZCcgKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCggbWUuX2xlYXZlVGltZXIgKTtcclxuICAgICAgICAgICAgICAgIG1lLl9sZWF2ZVRpbWVyID0gc2V0VGltZW91dCggaGFuZGxlciwgMTAwICk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgX2Ryb3BIYW5kbGVyOiBmdW5jdGlvbiggZSApIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZSA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgcnVpZCA9IG1lLmdldFJ1aWQoKSxcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRFbGVtID0gbWUuZWxlbS5wYXJlbnQoKS5nZXQoIDAgKSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVHJhbnNmZXIsIGRhdGE7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOWPquWkhOeQhuahhuWGheeahOOAglxyXG4gICAgICAgICAgICAgICAgaWYgKCBwYXJlbnRFbGVtICYmICEkLmNvbnRhaW5zKCBwYXJlbnRFbGVtLCBlLmN1cnJlbnRUYXJnZXQgKSApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGUgPSBlLm9yaWdpbmFsRXZlbnQgfHwgZTtcclxuICAgICAgICAgICAgICAgIGRhdGFUcmFuc2ZlciA9IGUuZGF0YVRyYW5zZmVyO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzmmK/pobXpnaLlhoXmi5bmi73vvIzov5jkuI3og73lpITnkIbvvIzkuI3pmLvmraLkuovku7bjgIJcclxuICAgICAgICAgICAgICAgIC8vIOatpOWkhCBpZTExIOS4i+S8muaKpeWPguaVsOmUmeivr++8jFxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhID0gZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvaHRtbCcpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCggZXJyICkge1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBtZS5kbmRPdmVyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBtZS5lbGVtLnJlbW92ZUNsYXNzKCBwcmVmaXggKyAnb3ZlcicgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCBkYXRhICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgbWUuX2dldFRhbnNmZXJGaWxlcyggZGF0YVRyYW5zZmVyLCBmdW5jdGlvbiggcmVzdWx0cyApIHtcclxuICAgICAgICAgICAgICAgICAgICBtZS50cmlnZ2VyKCAnZHJvcCcsICQubWFwKCByZXN1bHRzLCBmdW5jdGlvbiggZmlsZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGaWxlKCBydWlkLCBmaWxlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLy8g5aaC5p6c5Lyg5YWlIGNhbGxiYWNrIOWImeWOu+afpeeci+aWh+S7tuWkue+8jOWQpuWImeWPqueuoeW9k+WJjeaWh+S7tuWkueOAglxyXG4gICAgICAgICAgICBfZ2V0VGFuc2ZlckZpbGVzOiBmdW5jdGlvbiggZGF0YVRyYW5zZmVyLCBjYWxsYmFjayApIHtcclxuICAgICAgICAgICAgICAgIHZhciByZXN1bHRzICA9IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2VzID0gW10sXHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMsIGZpbGVzLCBmaWxlLCBpdGVtLCBpLCBsZW4sIGNhbkFjY2Vzc0ZvbGRlcjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaXRlbXMgPSBkYXRhVHJhbnNmZXIuaXRlbXM7XHJcbiAgICAgICAgICAgICAgICBmaWxlcyA9IGRhdGFUcmFuc2Zlci5maWxlcztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgY2FuQWNjZXNzRm9sZGVyID0gISEoaXRlbXMgJiYgaXRlbXNbIDAgXS53ZWJraXRHZXRBc0VudHJ5KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZm9yICggaSA9IDAsIGxlbiA9IGZpbGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbGUgPSBmaWxlc1sgaSBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBpdGVtcyAmJiBpdGVtc1sgaSBdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjYW5BY2Nlc3NGb2xkZXIgJiYgaXRlbS53ZWJraXRHZXRBc0VudHJ5KCkuaXNEaXJlY3RvcnkgKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCggdGhpcy5fdHJhdmVyc2VEaXJlY3RvcnlUcmVlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0ud2Via2l0R2V0QXNFbnRyeSgpLCByZXN1bHRzICkgKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goIGZpbGUgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIEJhc2Uud2hlbi5hcHBseSggQmFzZSwgcHJvbWlzZXMgKS5kb25lKGZ1bmN0aW9uKCkge1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhcmVzdWx0cy5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayggcmVzdWx0cyApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgX3RyYXZlcnNlRGlyZWN0b3J5VHJlZTogZnVuY3Rpb24oIGVudHJ5LCByZXN1bHRzICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gQmFzZS5EZWZlcnJlZCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lID0gdGhpcztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCBlbnRyeS5pc0ZpbGUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnkuZmlsZShmdW5jdGlvbiggZmlsZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKCBmaWxlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIGVudHJ5LmlzRGlyZWN0b3J5ICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5LmNyZWF0ZVJlYWRlcigpLnJlYWRFbnRyaWVzKGZ1bmN0aW9uKCBlbnRyaWVzICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGVuID0gZW50cmllcy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlcyA9IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyID0gW10sICAgIC8vIOS4uuS6huS/neivgemhuuW6j+OAglxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCggbWUuX3RyYXZlcnNlRGlyZWN0b3J5VHJlZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50cmllc1sgaSBdLCBhcnIgKSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgQmFzZS53aGVuLmFwcGx5KCBCYXNlLCBwcm9taXNlcyApLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2guYXBwbHkoIHJlc3VsdHMsIGFyciApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBkZWZlcnJlZC5yZWplY3QgKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBlbGVtID0gdGhpcy5lbGVtO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDov5jmsqEgaW5pdCDlsLHosIPnlKggZGVzdHJveVxyXG4gICAgICAgICAgICAgICAgaWYgKCFlbGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBlbGVtLm9mZiggJ2RyYWdlbnRlcicsIHRoaXMuZHJhZ0VudGVySGFuZGxlciApO1xyXG4gICAgICAgICAgICAgICAgZWxlbS5vZmYoICdkcmFnb3ZlcicsIHRoaXMuZHJhZ092ZXJIYW5kbGVyICk7XHJcbiAgICAgICAgICAgICAgICBlbGVtLm9mZiggJ2RyYWdsZWF2ZScsIHRoaXMuZHJhZ0xlYXZlSGFuZGxlciApO1xyXG4gICAgICAgICAgICAgICAgZWxlbS5vZmYoICdkcm9wJywgdGhpcy5kcm9wSGFuZGxlciApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMub3B0aW9ucy5kaXNhYmxlR2xvYmFsRG5kICkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoIGRvY3VtZW50ICkub2ZmKCAnZHJhZ292ZXInLCB0aGlzLmRyYWdPdmVySGFuZGxlciApO1xyXG4gICAgICAgICAgICAgICAgICAgICQoIGRvY3VtZW50ICkub2ZmKCAnZHJvcCcsIHRoaXMuZHJvcEhhbmRsZXIgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyBGaWxlUGFzdGVcclxuICAgICAqL1xyXG4gICAgZGVmaW5lKCdydW50aW1lL2h0bWw1L2ZpbGVwYXN0ZScsW1xyXG4gICAgICAgICdiYXNlJyxcclxuICAgICAgICAncnVudGltZS9odG1sNS9ydW50aW1lJyxcclxuICAgICAgICAnbGliL2ZpbGUnXHJcbiAgICBdLCBmdW5jdGlvbiggQmFzZSwgSHRtbDVSdW50aW1lLCBGaWxlICkge1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIEh0bWw1UnVudGltZS5yZWdpc3RlciggJ0ZpbGVQYXN0ZScsIHtcclxuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucyxcclxuICAgICAgICAgICAgICAgICAgICBlbGVtID0gdGhpcy5lbGVtID0gb3B0cy5jb250YWluZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjZXB0ID0gJy4qJyxcclxuICAgICAgICAgICAgICAgICAgICBhcnIsIGksIGxlbiwgaXRlbTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gYWNjZXRw55qEbWltZVR5cGVz5Lit55Sf5oiQ5Yy56YWN5q2j5YiZ44CCXHJcbiAgICAgICAgICAgICAgICBpZiAoIG9wdHMuYWNjZXB0ICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFyciA9IFtdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICggaSA9IDAsIGxlbiA9IG9wdHMuYWNjZXB0Lmxlbmd0aDsgaSA8IGxlbjsgaSsrICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gb3B0cy5hY2NlcHRbIGkgXS5taW1lVHlwZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gJiYgYXJyLnB1c2goIGl0ZW0gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGFyci5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY2VwdCA9IGFyci5qb2luKCcsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY2VwdCA9IGFjY2VwdC5yZXBsYWNlKCAvLC9nLCAnfCcgKS5yZXBsYWNlKCAvXFwqL2csICcuKicgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjY2VwdCA9IGFjY2VwdCA9IG5ldyBSZWdFeHAoIGFjY2VwdCwgJ2knICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRlciA9IEJhc2UuYmluZEZuKCB0aGlzLl9wYXN0ZUhhbmRlciwgdGhpcyApO1xyXG4gICAgICAgICAgICAgICAgZWxlbS5vbiggJ3Bhc3RlJywgdGhpcy5oYW5kZXIgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBfcGFzdGVIYW5kZXI6IGZ1bmN0aW9uKCBlICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFsbG93ZWQgPSBbXSxcclxuICAgICAgICAgICAgICAgICAgICBydWlkID0gdGhpcy5nZXRSdWlkKCksXHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMsIGl0ZW0sIGJsb2IsIGksIGxlbjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZSA9IGUub3JpZ2luYWxFdmVudCB8fCBlO1xyXG4gICAgICAgICAgICAgICAgaXRlbXMgPSBlLmNsaXBib2FyZERhdGEuaXRlbXM7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZvciAoIGkgPSAwLCBsZW4gPSBpdGVtcy5sZW5ndGg7IGkgPCBsZW47IGkrKyApIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtID0gaXRlbXNbIGkgXTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggaXRlbS5raW5kICE9PSAnZmlsZScgfHwgIShibG9iID0gaXRlbS5nZXRBc0ZpbGUoKSkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGFsbG93ZWQucHVzaCggbmV3IEZpbGUoIHJ1aWQsIGJsb2IgKSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIGFsbG93ZWQubGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOS4jemYu+atoumdnuaWh+S7tueymOi0tO+8iOaWh+Wtl+eymOi0tO+8ieeahOS6i+S7tuWGkuazoVxyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlciggJ3Bhc3RlJywgYWxsb3dlZCApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtLm9mZiggJ3Bhc3RlJywgdGhpcy5oYW5kZXIgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyBGaWxlUGlja2VyXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgncnVudGltZS9odG1sNS9maWxlcGlja2VyJyxbXHJcbiAgICAgICAgJ2Jhc2UnLFxyXG4gICAgICAgICdydW50aW1lL2h0bWw1L3J1bnRpbWUnXHJcbiAgICBdLCBmdW5jdGlvbiggQmFzZSwgSHRtbDVSdW50aW1lICkge1xyXG4gICAgXHJcbiAgICAgICAgdmFyICQgPSBCYXNlLiQ7XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gSHRtbDVSdW50aW1lLnJlZ2lzdGVyKCAnRmlsZVBpY2tlcicsIHtcclxuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5nZXRSdW50aW1lKCkuZ2V0Q29udGFpbmVyKCksXHJcbiAgICAgICAgICAgICAgICAgICAgbWUgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgIG93bmVyID0gbWUub3duZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cyA9IG1lLm9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWwgPSB0aGlzLmxhYmVsID0gJCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKSApLFxyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0ID0gIHRoaXMuaW5wdXQgPSAkKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpICksXHJcbiAgICAgICAgICAgICAgICAgICAgYXJyLCBpLCBsZW4sIG1vdXNlSGFuZGxlcjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaW5wdXQuYXR0ciggJ3R5cGUnLCAnZmlsZScgKTtcclxuICAgICAgICAgICAgICAgIGlucHV0LmF0dHIoICdjYXB0dXJlJywgJ2NhbWVyYScpO1xyXG4gICAgICAgICAgICAgICAgaW5wdXQuYXR0ciggJ25hbWUnLCBvcHRzLm5hbWUgKTtcclxuICAgICAgICAgICAgICAgIGlucHV0LmFkZENsYXNzKCd3ZWJ1cGxvYWRlci1lbGVtZW50LWludmlzaWJsZScpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBsYWJlbC5vbiggJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0LnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICBvd25lci50cmlnZ2VyKCdkaWFsb2dvcGVuJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgbGFiZWwuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnMTAwJScsXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ2Jsb2NrJyxcclxuICAgICAgICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcclxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAnI2ZmZmZmZidcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIG9wdHMubXVsdGlwbGUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQuYXR0ciggJ211bHRpcGxlJywgJ211bHRpcGxlJyApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBAdG9kbyBGaXJlZm945LiN5pSv5oyB5Y2V54us5oyH5a6a5ZCO57yAXHJcbiAgICAgICAgICAgICAgICBpZiAoIG9wdHMuYWNjZXB0ICYmIG9wdHMuYWNjZXB0Lmxlbmd0aCA+IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyID0gW107XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKCBpID0gMCwgbGVuID0gb3B0cy5hY2NlcHQubGVuZ3RoOyBpIDwgbGVuOyBpKysgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyci5wdXNoKCBvcHRzLmFjY2VwdFsgaSBdLm1pbWVUeXBlcyApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0LmF0dHIoICdhY2NlcHQnLCBhcnIuam9pbignLCcpICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmQoIGlucHV0ICk7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kKCBsYWJlbCApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBtb3VzZUhhbmRsZXIgPSBmdW5jdGlvbiggZSApIHtcclxuICAgICAgICAgICAgICAgICAgICBvd25lci50cmlnZ2VyKCBlLnR5cGUgKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlucHV0Lm9uKCAnY2hhbmdlJywgZnVuY3Rpb24oIGUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZuID0gYXJndW1lbnRzLmNhbGxlZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmU7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBtZS5maWxlcyA9IGUudGFyZ2V0LmZpbGVzO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgaW5wdXRcclxuICAgICAgICAgICAgICAgICAgICBjbG9uZSA9IHRoaXMuY2xvbmVOb2RlKCB0cnVlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xvbmUudmFsdWUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoIGNsb25lLCB0aGlzICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpbnB1dC5vZmYoKTtcclxuICAgICAgICAgICAgICAgICAgICBpbnB1dCA9ICQoIGNsb25lICkub24oICdjaGFuZ2UnLCBmbiApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub24oICdtb3VzZWVudGVyIG1vdXNlbGVhdmUnLCBtb3VzZUhhbmRsZXIgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIG93bmVyLnRyaWdnZXIoJ2NoYW5nZScpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGxhYmVsLm9uKCAnbW91c2VlbnRlciBtb3VzZWxlYXZlJywgbW91c2VIYW5kbGVyICk7XHJcbiAgICBcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgICAgIGdldEZpbGVzOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbGVzO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dC5vZmYoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubGFiZWwub2ZmKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFRlcm1zOlxyXG4gICAgICpcclxuICAgICAqIFVpbnQ4QXJyYXksIEZpbGVSZWFkZXIsIEJsb2JCdWlsZGVyLCBhdG9iLCBBcnJheUJ1ZmZlclxyXG4gICAgICogQGZpbGVPdmVydmlldyBJbWFnZeaOp+S7tlxyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ3J1bnRpbWUvaHRtbDUvdXRpbCcsW1xyXG4gICAgICAgICdiYXNlJ1xyXG4gICAgXSwgZnVuY3Rpb24oIEJhc2UgKSB7XHJcbiAgICBcclxuICAgICAgICB2YXIgdXJsQVBJID0gd2luZG93LmNyZWF0ZU9iamVjdFVSTCAmJiB3aW5kb3cgfHxcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5VUkwgJiYgVVJMLnJldm9rZU9iamVjdFVSTCAmJiBVUkwgfHxcclxuICAgICAgICAgICAgICAgIHdpbmRvdy53ZWJraXRVUkwsXHJcbiAgICAgICAgICAgIGNyZWF0ZU9iamVjdFVSTCA9IEJhc2Uubm9vcCxcclxuICAgICAgICAgICAgcmV2b2tlT2JqZWN0VVJMID0gY3JlYXRlT2JqZWN0VVJMO1xyXG4gICAgXHJcbiAgICAgICAgaWYgKCB1cmxBUEkgKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8g5pu05a6J5YWo55qE5pa55byP6LCD55So77yM5q+U5aaCYW5kcm9pZOmHjOmdouWwseiDveaKimNvbnRleHTmlLnmiJDlhbbku5bnmoTlr7nosaHjgIJcclxuICAgICAgICAgICAgY3JlYXRlT2JqZWN0VVJMID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXJsQVBJLmNyZWF0ZU9iamVjdFVSTC5hcHBseSggdXJsQVBJLCBhcmd1bWVudHMgKTtcclxuICAgICAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgICAgICByZXZva2VPYmplY3RVUkwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1cmxBUEkucmV2b2tlT2JqZWN0VVJMLmFwcGx5KCB1cmxBUEksIGFyZ3VtZW50cyApO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGNyZWF0ZU9iamVjdFVSTDogY3JlYXRlT2JqZWN0VVJMLFxyXG4gICAgICAgICAgICByZXZva2VPYmplY3RVUkw6IHJldm9rZU9iamVjdFVSTCxcclxuICAgIFxyXG4gICAgICAgICAgICBkYXRhVVJMMkJsb2I6IGZ1bmN0aW9uKCBkYXRhVVJJICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJ5dGVTdHIsIGludEFycmF5LCBhYiwgaSwgbWltZXR5cGUsIHBhcnRzO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBwYXJ0cyA9IGRhdGFVUkkuc3BsaXQoJywnKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCB+cGFydHNbIDAgXS5pbmRleE9mKCdiYXNlNjQnKSApIHtcclxuICAgICAgICAgICAgICAgICAgICBieXRlU3RyID0gYXRvYiggcGFydHNbIDEgXSApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBieXRlU3RyID0gZGVjb2RlVVJJQ29tcG9uZW50KCBwYXJ0c1sgMSBdICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGFiID0gbmV3IEFycmF5QnVmZmVyKCBieXRlU3RyLmxlbmd0aCApO1xyXG4gICAgICAgICAgICAgICAgaW50QXJyYXkgPSBuZXcgVWludDhBcnJheSggYWIgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZm9yICggaSA9IDA7IGkgPCBieXRlU3RyLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGludEFycmF5WyBpIF0gPSBieXRlU3RyLmNoYXJDb2RlQXQoIGkgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgbWltZXR5cGUgPSBwYXJ0c1sgMCBdLnNwbGl0KCc6JylbIDEgXS5zcGxpdCgnOycpWyAwIF07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFycmF5QnVmZmVyVG9CbG9iKCBhYiwgbWltZXR5cGUgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBkYXRhVVJMMkFycmF5QnVmZmVyOiBmdW5jdGlvbiggZGF0YVVSSSApIHtcclxuICAgICAgICAgICAgICAgIHZhciBieXRlU3RyLCBpbnRBcnJheSwgaSwgcGFydHM7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHBhcnRzID0gZGF0YVVSSS5zcGxpdCgnLCcpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIH5wYXJ0c1sgMCBdLmluZGV4T2YoJ2Jhc2U2NCcpICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVTdHIgPSBhdG9iKCBwYXJ0c1sgMSBdICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVTdHIgPSBkZWNvZGVVUklDb21wb25lbnQoIHBhcnRzWyAxIF0gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaW50QXJyYXkgPSBuZXcgVWludDhBcnJheSggYnl0ZVN0ci5sZW5ndGggKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZm9yICggaSA9IDA7IGkgPCBieXRlU3RyLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGludEFycmF5WyBpIF0gPSBieXRlU3RyLmNoYXJDb2RlQXQoIGkgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGludEFycmF5LmJ1ZmZlcjtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBhcnJheUJ1ZmZlclRvQmxvYjogZnVuY3Rpb24oIGJ1ZmZlciwgdHlwZSApIHtcclxuICAgICAgICAgICAgICAgIHZhciBidWlsZGVyID0gd2luZG93LkJsb2JCdWlsZGVyIHx8IHdpbmRvdy5XZWJLaXRCbG9iQnVpbGRlcixcclxuICAgICAgICAgICAgICAgICAgICBiYjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gYW5kcm9pZOS4jeaUr+aMgeebtOaOpW5ldyBCbG9iLCDlj6rog73lgJ/liqlibG9iYnVpbGRlci5cclxuICAgICAgICAgICAgICAgIGlmICggYnVpbGRlciApIHtcclxuICAgICAgICAgICAgICAgICAgICBiYiA9IG5ldyBidWlsZGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYmIuYXBwZW5kKCBidWZmZXIgKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmIuZ2V0QmxvYiggdHlwZSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEJsb2IoWyBidWZmZXIgXSwgdHlwZSA/IHsgdHlwZTogdHlwZSB9IDoge30gKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvLyDmir3lh7rmnaXkuLvopoHmmK/kuLrkuobop6PlhrNhbmRyb2lk5LiL6Z2iY2FudmFzLnRvRGF0YVVybOS4jeaUr+aMgWpwZWcuXHJcbiAgICAgICAgICAgIC8vIOS9oOW+l+WIsOeahOe7k+aenOaYr3BuZy5cclxuICAgICAgICAgICAgY2FudmFzVG9EYXRhVXJsOiBmdW5jdGlvbiggY2FudmFzLCB0eXBlLCBxdWFsaXR5ICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbnZhcy50b0RhdGFVUkwoIHR5cGUsIHF1YWxpdHkgLyAxMDAgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBpbWFnZW1lYXTkvJrlpI3lhpnov5nkuKrmlrnms5XvvIzlpoLmnpznlKjmiLfpgInmi6nliqDovb3pgqPkuKrmlofku7bkuobnmoTor53jgIJcclxuICAgICAgICAgICAgcGFyc2VNZXRhOiBmdW5jdGlvbiggYmxvYiwgY2FsbGJhY2sgKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayggZmFsc2UsIHt9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBpbWFnZW1lYXTkvJrlpI3lhpnov5nkuKrmlrnms5XvvIzlpoLmnpznlKjmiLfpgInmi6nliqDovb3pgqPkuKrmlofku7bkuobnmoTor53jgIJcclxuICAgICAgICAgICAgdXBkYXRlSW1hZ2VIZWFkOiBmdW5jdGlvbiggZGF0YSApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUZXJtczpcclxuICAgICAqXHJcbiAgICAgKiBVaW50OEFycmF5LCBGaWxlUmVhZGVyLCBCbG9iQnVpbGRlciwgYXRvYiwgQXJyYXlCdWZmZXJcclxuICAgICAqIEBmaWxlT3ZlcnZpZXcgSW1hZ2Xmjqfku7ZcclxuICAgICAqL1xyXG4gICAgZGVmaW5lKCdydW50aW1lL2h0bWw1L2ltYWdlbWV0YScsW1xyXG4gICAgICAgICdydW50aW1lL2h0bWw1L3V0aWwnXHJcbiAgICBdLCBmdW5jdGlvbiggVXRpbCApIHtcclxuICAgIFxyXG4gICAgICAgIHZhciBhcGk7XHJcbiAgICBcclxuICAgICAgICBhcGkgPSB7XHJcbiAgICAgICAgICAgIHBhcnNlcnM6IHtcclxuICAgICAgICAgICAgICAgIDB4ZmZlMTogW11cclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBtYXhNZXRhRGF0YVNpemU6IDI2MjE0NCxcclxuICAgIFxyXG4gICAgICAgICAgICBwYXJzZTogZnVuY3Rpb24oIGJsb2IsIGNiICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICBmciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNiKCBmYWxzZSwgbWUuX3BhcnNlKCB0aGlzLnJlc3VsdCApICk7XHJcbiAgICAgICAgICAgICAgICAgICAgZnIgPSBmci5vbmxvYWQgPSBmci5vbmVycm9yID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZyLm9uZXJyb3IgPSBmdW5jdGlvbiggZSApIHtcclxuICAgICAgICAgICAgICAgICAgICBjYiggZS5tZXNzYWdlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgZnIgPSBmci5vbmxvYWQgPSBmci5vbmVycm9yID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGJsb2IgPSBibG9iLnNsaWNlKCAwLCBtZS5tYXhNZXRhRGF0YVNpemUgKTtcclxuICAgICAgICAgICAgICAgIGZyLnJlYWRBc0FycmF5QnVmZmVyKCBibG9iLmdldFNvdXJjZSgpICk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgX3BhcnNlOiBmdW5jdGlvbiggYnVmZmVyLCBub1BhcnNlICkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCBidWZmZXIuYnl0ZUxlbmd0aCA8IDYgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YXZpZXcgPSBuZXcgRGF0YVZpZXcoIGJ1ZmZlciApLFxyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IDIsXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4T2Zmc2V0ID0gZGF0YXZpZXcuYnl0ZUxlbmd0aCAtIDQsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZExlbmd0aCA9IG9mZnNldCxcclxuICAgICAgICAgICAgICAgICAgICByZXQgPSB7fSxcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXJCeXRlcywgbWFya2VyTGVuZ3RoLCBwYXJzZXJzLCBpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIGRhdGF2aWV3LmdldFVpbnQxNiggMCApID09PSAweGZmZDggKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoIG9mZnNldCA8IG1heE9mZnNldCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VyQnl0ZXMgPSBkYXRhdmlldy5nZXRVaW50MTYoIG9mZnNldCApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggbWFya2VyQnl0ZXMgPj0gMHhmZmUwICYmIG1hcmtlckJ5dGVzIDw9IDB4ZmZlZiB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlckJ5dGVzID09PSAweGZmZmUgKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlckxlbmd0aCA9IGRhdGF2aWV3LmdldFVpbnQxNiggb2Zmc2V0ICsgMiApICsgMjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBvZmZzZXQgKyBtYXJrZXJMZW5ndGggPiBkYXRhdmlldy5ieXRlTGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJzID0gYXBpLnBhcnNlcnNbIG1hcmtlckJ5dGVzIF07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggIW5vUGFyc2UgJiYgcGFyc2VycyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCBpID0gMDsgaSA8IHBhcnNlcnMubGVuZ3RoOyBpICs9IDEgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcnNbIGkgXS5jYWxsKCBhcGksIGRhdGF2aWV3LCBvZmZzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VyTGVuZ3RoLCByZXQgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSBtYXJrZXJMZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkTGVuZ3RoID0gb2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGhlYWRMZW5ndGggPiA2ICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGJ1ZmZlci5zbGljZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldC5pbWFnZUhlYWQgPSBidWZmZXIuc2xpY2UoIDIsIGhlYWRMZW5ndGggKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdvcmthcm91bmQgZm9yIElFMTAsIHdoaWNoIGRvZXMgbm90IHlldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3VwcG9ydCBBcnJheUJ1ZmZlci5zbGljZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldC5pbWFnZUhlYWQgPSBuZXcgVWludDhBcnJheSggYnVmZmVyIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN1YmFycmF5KCAyLCBoZWFkTGVuZ3RoICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgdXBkYXRlSW1hZ2VIZWFkOiBmdW5jdGlvbiggYnVmZmVyLCBoZWFkICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB0aGlzLl9wYXJzZSggYnVmZmVyLCB0cnVlICksXHJcbiAgICAgICAgICAgICAgICAgICAgYnVmMSwgYnVmMiwgYm9keW9mZnNldDtcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBib2R5b2Zmc2V0ID0gMjtcclxuICAgICAgICAgICAgICAgIGlmICggZGF0YS5pbWFnZUhlYWQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9keW9mZnNldCA9IDIgKyBkYXRhLmltYWdlSGVhZC5ieXRlTGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIGJ1ZmZlci5zbGljZSApIHtcclxuICAgICAgICAgICAgICAgICAgICBidWYyID0gYnVmZmVyLnNsaWNlKCBib2R5b2Zmc2V0ICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZjIgPSBuZXcgVWludDhBcnJheSggYnVmZmVyICkuc3ViYXJyYXkoIGJvZHlvZmZzZXQgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgYnVmMSA9IG5ldyBVaW50OEFycmF5KCBoZWFkLmJ5dGVMZW5ndGggKyAyICsgYnVmMi5ieXRlTGVuZ3RoICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGJ1ZjFbIDAgXSA9IDB4RkY7XHJcbiAgICAgICAgICAgICAgICBidWYxWyAxIF0gPSAweEQ4O1xyXG4gICAgICAgICAgICAgICAgYnVmMS5zZXQoIG5ldyBVaW50OEFycmF5KCBoZWFkICksIDIgKTtcclxuICAgICAgICAgICAgICAgIGJ1ZjEuc2V0KCBuZXcgVWludDhBcnJheSggYnVmMiApLCBoZWFkLmJ5dGVMZW5ndGggKyAyICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBidWYxLmJ1ZmZlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBVdGlsLnBhcnNlTWV0YSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXBpLnBhcnNlLmFwcGx5KCBhcGksIGFyZ3VtZW50cyApO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBVdGlsLnVwZGF0ZUltYWdlSGVhZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXBpLnVwZGF0ZUltYWdlSGVhZC5hcHBseSggYXBpLCBhcmd1bWVudHMgKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIGFwaTtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiDku6PnoIHmnaXoh6rkuo7vvJpodHRwczovL2dpdGh1Yi5jb20vYmx1ZWltcC9KYXZhU2NyaXB0LUxvYWQtSW1hZ2VcclxuICAgICAqIOaaguaXtumhueebruS4reWPqueUqOS6hm9yaWVudGF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIOWOu+mZpOS6hiBFeGlmIFN1YiBJRkQgUG9pbnRlciwgR1BTIEluZm8gSUZEIFBvaW50ZXIsIEV4aWYgVGh1bWJuYWlsLlxyXG4gICAgICogQGZpbGVPdmVydmlldyBFWElG6Kej5p6QXHJcbiAgICAgKi9cclxuICAgIFxyXG4gICAgLy8gU2FtcGxlXHJcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgIC8vIE1ha2UgOiBBcHBsZVxyXG4gICAgLy8gTW9kZWwgOiBpUGhvbmUgNFNcclxuICAgIC8vIE9yaWVudGF0aW9uIDogMVxyXG4gICAgLy8gWFJlc29sdXRpb24gOiA3MiBbNzIvMV1cclxuICAgIC8vIFlSZXNvbHV0aW9uIDogNzIgWzcyLzFdXHJcbiAgICAvLyBSZXNvbHV0aW9uVW5pdCA6IDJcclxuICAgIC8vIFNvZnR3YXJlIDogUXVpY2tUaW1lIDcuNy4xXHJcbiAgICAvLyBEYXRlVGltZSA6IDIwMTM6MDk6MDEgMjI6NTM6NTVcclxuICAgIC8vIEV4aWZJRkRQb2ludGVyIDogMTkwXHJcbiAgICAvLyBFeHBvc3VyZVRpbWUgOiAwLjA1ODgyMzUyOTQxMTc2NDcwNSBbMS8xN11cclxuICAgIC8vIEZOdW1iZXIgOiAyLjQgWzEyLzVdXHJcbiAgICAvLyBFeHBvc3VyZVByb2dyYW0gOiBOb3JtYWwgcHJvZ3JhbVxyXG4gICAgLy8gSVNPU3BlZWRSYXRpbmdzIDogODAwXHJcbiAgICAvLyBFeGlmVmVyc2lvbiA6IDAyMjBcclxuICAgIC8vIERhdGVUaW1lT3JpZ2luYWwgOiAyMDEzOjA5OjAxIDIyOjUyOjUxXHJcbiAgICAvLyBEYXRlVGltZURpZ2l0aXplZCA6IDIwMTM6MDk6MDEgMjI6NTI6NTFcclxuICAgIC8vIENvbXBvbmVudHNDb25maWd1cmF0aW9uIDogWUNiQ3JcclxuICAgIC8vIFNodXR0ZXJTcGVlZFZhbHVlIDogNC4wNTg4OTM1MTU3NjQ0MjZcclxuICAgIC8vIEFwZXJ0dXJlVmFsdWUgOiAyLjUyNjA2ODgyMTY4OTI1OTcgWzQ4NDUvMTkxOF1cclxuICAgIC8vIEJyaWdodG5lc3NWYWx1ZSA6IC0wLjMxMjY2ODY2MDE5OTgzOTVcclxuICAgIC8vIE1ldGVyaW5nTW9kZSA6IFBhdHRlcm5cclxuICAgIC8vIEZsYXNoIDogRmxhc2ggZGlkIG5vdCBmaXJlLCBjb21wdWxzb3J5IGZsYXNoIG1vZGVcclxuICAgIC8vIEZvY2FsTGVuZ3RoIDogNC4yOCBbMTA3LzI1XVxyXG4gICAgLy8gU3ViamVjdEFyZWEgOiBbNCB2YWx1ZXNdXHJcbiAgICAvLyBGbGFzaHBpeFZlcnNpb24gOiAwMTAwXHJcbiAgICAvLyBDb2xvclNwYWNlIDogMVxyXG4gICAgLy8gUGl4ZWxYRGltZW5zaW9uIDogMjQ0OFxyXG4gICAgLy8gUGl4ZWxZRGltZW5zaW9uIDogMzI2NFxyXG4gICAgLy8gU2Vuc2luZ01ldGhvZCA6IE9uZS1jaGlwIGNvbG9yIGFyZWEgc2Vuc29yXHJcbiAgICAvLyBFeHBvc3VyZU1vZGUgOiAwXHJcbiAgICAvLyBXaGl0ZUJhbGFuY2UgOiBBdXRvIHdoaXRlIGJhbGFuY2VcclxuICAgIC8vIEZvY2FsTGVuZ3RoSW4zNW1tRmlsbSA6IDM1XHJcbiAgICAvLyBTY2VuZUNhcHR1cmVUeXBlIDogU3RhbmRhcmRcclxuICAgIGRlZmluZSgncnVudGltZS9odG1sNS9pbWFnZW1ldGEvZXhpZicsW1xyXG4gICAgICAgICdiYXNlJyxcclxuICAgICAgICAncnVudGltZS9odG1sNS9pbWFnZW1ldGEnXHJcbiAgICBdLCBmdW5jdGlvbiggQmFzZSwgSW1hZ2VNZXRhICkge1xyXG4gICAgXHJcbiAgICAgICAgdmFyIEVYSUYgPSB7fTtcclxuICAgIFxyXG4gICAgICAgIEVYSUYuRXhpZk1hcCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgRVhJRi5FeGlmTWFwLnByb3RvdHlwZS5tYXAgPSB7XHJcbiAgICAgICAgICAgICdPcmllbnRhdGlvbic6IDB4MDExMlxyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBFWElGLkV4aWZNYXAucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKCBpZCApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXNbIGlkIF0gfHwgdGhpc1sgdGhpcy5tYXBbIGlkIF0gXTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgRVhJRi5leGlmVGFnVHlwZXMgPSB7XHJcbiAgICAgICAgICAgIC8vIGJ5dGUsIDgtYml0IHVuc2lnbmVkIGludDpcclxuICAgICAgICAgICAgMToge1xyXG4gICAgICAgICAgICAgICAgZ2V0VmFsdWU6IGZ1bmN0aW9uKCBkYXRhVmlldywgZGF0YU9mZnNldCApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YVZpZXcuZ2V0VWludDgoIGRhdGFPZmZzZXQgKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzaXplOiAxXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLy8gYXNjaWksIDgtYml0IGJ5dGU6XHJcbiAgICAgICAgICAgIDI6IHtcclxuICAgICAgICAgICAgICAgIGdldFZhbHVlOiBmdW5jdGlvbiggZGF0YVZpZXcsIGRhdGFPZmZzZXQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoIGRhdGFWaWV3LmdldFVpbnQ4KCBkYXRhT2Zmc2V0ICkgKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzaXplOiAxLFxyXG4gICAgICAgICAgICAgICAgYXNjaWk6IHRydWVcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBzaG9ydCwgMTYgYml0IGludDpcclxuICAgICAgICAgICAgMzoge1xyXG4gICAgICAgICAgICAgICAgZ2V0VmFsdWU6IGZ1bmN0aW9uKCBkYXRhVmlldywgZGF0YU9mZnNldCwgbGl0dGxlRW5kaWFuICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhVmlldy5nZXRVaW50MTYoIGRhdGFPZmZzZXQsIGxpdHRsZUVuZGlhbiApO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHNpemU6IDJcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBsb25nLCAzMiBiaXQgaW50OlxyXG4gICAgICAgICAgICA0OiB7XHJcbiAgICAgICAgICAgICAgICBnZXRWYWx1ZTogZnVuY3Rpb24oIGRhdGFWaWV3LCBkYXRhT2Zmc2V0LCBsaXR0bGVFbmRpYW4gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGFWaWV3LmdldFVpbnQzMiggZGF0YU9mZnNldCwgbGl0dGxlRW5kaWFuICk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogNFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIHJhdGlvbmFsID0gdHdvIGxvbmcgdmFsdWVzLFxyXG4gICAgICAgICAgICAvLyBmaXJzdCBpcyBudW1lcmF0b3IsIHNlY29uZCBpcyBkZW5vbWluYXRvcjpcclxuICAgICAgICAgICAgNToge1xyXG4gICAgICAgICAgICAgICAgZ2V0VmFsdWU6IGZ1bmN0aW9uKCBkYXRhVmlldywgZGF0YU9mZnNldCwgbGl0dGxlRW5kaWFuICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhVmlldy5nZXRVaW50MzIoIGRhdGFPZmZzZXQsIGxpdHRsZUVuZGlhbiApIC9cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuZ2V0VWludDMyKCBkYXRhT2Zmc2V0ICsgNCwgbGl0dGxlRW5kaWFuICk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogOFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIHNsb25nLCAzMiBiaXQgc2lnbmVkIGludDpcclxuICAgICAgICAgICAgOToge1xyXG4gICAgICAgICAgICAgICAgZ2V0VmFsdWU6IGZ1bmN0aW9uKCBkYXRhVmlldywgZGF0YU9mZnNldCwgbGl0dGxlRW5kaWFuICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhVmlldy5nZXRJbnQzMiggZGF0YU9mZnNldCwgbGl0dGxlRW5kaWFuICk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogNFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIHNyYXRpb25hbCwgdHdvIHNsb25ncywgZmlyc3QgaXMgbnVtZXJhdG9yLCBzZWNvbmQgaXMgZGVub21pbmF0b3I6XHJcbiAgICAgICAgICAgIDEwOiB7XHJcbiAgICAgICAgICAgICAgICBnZXRWYWx1ZTogZnVuY3Rpb24oIGRhdGFWaWV3LCBkYXRhT2Zmc2V0LCBsaXR0bGVFbmRpYW4gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGFWaWV3LmdldEludDMyKCBkYXRhT2Zmc2V0LCBsaXR0bGVFbmRpYW4gKSAvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LmdldEludDMyKCBkYXRhT2Zmc2V0ICsgNCwgbGl0dGxlRW5kaWFuICk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogOFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIC8vIHVuZGVmaW5lZCwgOC1iaXQgYnl0ZSwgdmFsdWUgZGVwZW5kaW5nIG9uIGZpZWxkOlxyXG4gICAgICAgIEVYSUYuZXhpZlRhZ1R5cGVzWyA3IF0gPSBFWElGLmV4aWZUYWdUeXBlc1sgMSBdO1xyXG4gICAgXHJcbiAgICAgICAgRVhJRi5nZXRFeGlmVmFsdWUgPSBmdW5jdGlvbiggZGF0YVZpZXcsIHRpZmZPZmZzZXQsIG9mZnNldCwgdHlwZSwgbGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgbGl0dGxlRW5kaWFuICkge1xyXG4gICAgXHJcbiAgICAgICAgICAgIHZhciB0YWdUeXBlID0gRVhJRi5leGlmVGFnVHlwZXNbIHR5cGUgXSxcclxuICAgICAgICAgICAgICAgIHRhZ1NpemUsIGRhdGFPZmZzZXQsIHZhbHVlcywgaSwgc3RyLCBjO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICggIXRhZ1R5cGUgKSB7XHJcbiAgICAgICAgICAgICAgICBCYXNlLmxvZygnSW52YWxpZCBFeGlmIGRhdGE6IEludmFsaWQgdGFnIHR5cGUuJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICB0YWdTaXplID0gdGFnVHlwZS5zaXplICogbGVuZ3RoO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIERldGVybWluZSBpZiB0aGUgdmFsdWUgaXMgY29udGFpbmVkIGluIHRoZSBkYXRhT2Zmc2V0IGJ5dGVzLFxyXG4gICAgICAgICAgICAvLyBvciBpZiB0aGUgdmFsdWUgYXQgdGhlIGRhdGFPZmZzZXQgaXMgYSBwb2ludGVyIHRvIHRoZSBhY3R1YWwgZGF0YTpcclxuICAgICAgICAgICAgZGF0YU9mZnNldCA9IHRhZ1NpemUgPiA0ID8gdGlmZk9mZnNldCArIGRhdGFWaWV3LmdldFVpbnQzMiggb2Zmc2V0ICsgOCxcclxuICAgICAgICAgICAgICAgICAgICBsaXR0bGVFbmRpYW4gKSA6IChvZmZzZXQgKyA4KTtcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoIGRhdGFPZmZzZXQgKyB0YWdTaXplID4gZGF0YVZpZXcuYnl0ZUxlbmd0aCApIHtcclxuICAgICAgICAgICAgICAgIEJhc2UubG9nKCdJbnZhbGlkIEV4aWYgZGF0YTogSW52YWxpZCBkYXRhIG9mZnNldC4nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICggbGVuZ3RoID09PSAxICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhZ1R5cGUuZ2V0VmFsdWUoIGRhdGFWaWV3LCBkYXRhT2Zmc2V0LCBsaXR0bGVFbmRpYW4gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHZhbHVlcyA9IFtdO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGZvciAoIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEgKSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZXNbIGkgXSA9IHRhZ1R5cGUuZ2V0VmFsdWUoIGRhdGFWaWV3LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhT2Zmc2V0ICsgaSAqIHRhZ1R5cGUuc2l6ZSwgbGl0dGxlRW5kaWFuICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoIHRhZ1R5cGUuYXNjaWkgKSB7XHJcbiAgICAgICAgICAgICAgICBzdHIgPSAnJztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gQ29uY2F0ZW5hdGUgdGhlIGNoYXJzOlxyXG4gICAgICAgICAgICAgICAgZm9yICggaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpICs9IDEgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYyA9IHZhbHVlc1sgaSBdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIHRoZSB0ZXJtaW5hdGluZyBOVUxMIGJ5dGUocyk6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjID09PSAnXFx1MDAwMCcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzdHIgKz0gYztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0cjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWVzO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBFWElGLnBhcnNlRXhpZlRhZyA9IGZ1bmN0aW9uKCBkYXRhVmlldywgdGlmZk9mZnNldCwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sXHJcbiAgICAgICAgICAgICAgICBkYXRhICkge1xyXG4gICAgXHJcbiAgICAgICAgICAgIHZhciB0YWcgPSBkYXRhVmlldy5nZXRVaW50MTYoIG9mZnNldCwgbGl0dGxlRW5kaWFuICk7XHJcbiAgICAgICAgICAgIGRhdGEuZXhpZlsgdGFnIF0gPSBFWElGLmdldEV4aWZWYWx1ZSggZGF0YVZpZXcsIHRpZmZPZmZzZXQsIG9mZnNldCxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5nZXRVaW50MTYoIG9mZnNldCArIDIsIGxpdHRsZUVuZGlhbiApLCAgICAvLyB0YWcgdHlwZVxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LmdldFVpbnQzMiggb2Zmc2V0ICsgNCwgbGl0dGxlRW5kaWFuICksICAgIC8vIHRhZyBsZW5ndGhcclxuICAgICAgICAgICAgICAgICAgICBsaXR0bGVFbmRpYW4gKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgRVhJRi5wYXJzZUV4aWZUYWdzID0gZnVuY3Rpb24oIGRhdGFWaWV3LCB0aWZmT2Zmc2V0LCBkaXJPZmZzZXQsXHJcbiAgICAgICAgICAgICAgICBsaXR0bGVFbmRpYW4sIGRhdGEgKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgdmFyIHRhZ3NOdW1iZXIsIGRpckVuZE9mZnNldCwgaTtcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoIGRpck9mZnNldCArIDYgPiBkYXRhVmlldy5ieXRlTGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgICAgQmFzZS5sb2coJ0ludmFsaWQgRXhpZiBkYXRhOiBJbnZhbGlkIGRpcmVjdG9yeSBvZmZzZXQuJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICB0YWdzTnVtYmVyID0gZGF0YVZpZXcuZ2V0VWludDE2KCBkaXJPZmZzZXQsIGxpdHRsZUVuZGlhbiApO1xyXG4gICAgICAgICAgICBkaXJFbmRPZmZzZXQgPSBkaXJPZmZzZXQgKyAyICsgMTIgKiB0YWdzTnVtYmVyO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICggZGlyRW5kT2Zmc2V0ICsgNCA+IGRhdGFWaWV3LmJ5dGVMZW5ndGggKSB7XHJcbiAgICAgICAgICAgICAgICBCYXNlLmxvZygnSW52YWxpZCBFeGlmIGRhdGE6IEludmFsaWQgZGlyZWN0b3J5IHNpemUuJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBmb3IgKCBpID0gMDsgaSA8IHRhZ3NOdW1iZXI7IGkgKz0gMSApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFyc2VFeGlmVGFnKCBkYXRhVmlldywgdGlmZk9mZnNldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlyT2Zmc2V0ICsgMiArIDEyICogaSwgICAgLy8gdGFnIG9mZnNldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXR0bGVFbmRpYW4sIGRhdGEgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiB0aGUgb2Zmc2V0IHRvIHRoZSBuZXh0IGRpcmVjdG9yeTpcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGFWaWV3LmdldFVpbnQzMiggZGlyRW5kT2Zmc2V0LCBsaXR0bGVFbmRpYW4gKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgLy8gRVhJRi5nZXRFeGlmVGh1bWJuYWlsID0gZnVuY3Rpb24oZGF0YVZpZXcsIG9mZnNldCwgbGVuZ3RoKSB7XHJcbiAgICAgICAgLy8gICAgIHZhciBoZXhEYXRhLFxyXG4gICAgICAgIC8vICAgICAgICAgaSxcclxuICAgICAgICAvLyAgICAgICAgIGI7XHJcbiAgICAgICAgLy8gICAgIGlmICghbGVuZ3RoIHx8IG9mZnNldCArIGxlbmd0aCA+IGRhdGFWaWV3LmJ5dGVMZW5ndGgpIHtcclxuICAgICAgICAvLyAgICAgICAgIEJhc2UubG9nKCdJbnZhbGlkIEV4aWYgZGF0YTogSW52YWxpZCB0aHVtYm5haWwgZGF0YS4nKTtcclxuICAgICAgICAvLyAgICAgICAgIHJldHVybjtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vICAgICBoZXhEYXRhID0gW107XHJcbiAgICAgICAgLy8gICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgIC8vICAgICAgICAgYiA9IGRhdGFWaWV3LmdldFVpbnQ4KG9mZnNldCArIGkpO1xyXG4gICAgICAgIC8vICAgICAgICAgaGV4RGF0YS5wdXNoKChiIDwgMTYgPyAnMCcgOiAnJykgKyBiLnRvU3RyaW5nKDE2KSk7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyAgICAgcmV0dXJuICdkYXRhOmltYWdlL2pwZWcsJScgKyBoZXhEYXRhLmpvaW4oJyUnKTtcclxuICAgICAgICAvLyB9O1xyXG4gICAgXHJcbiAgICAgICAgRVhJRi5wYXJzZUV4aWZEYXRhID0gZnVuY3Rpb24oIGRhdGFWaWV3LCBvZmZzZXQsIGxlbmd0aCwgZGF0YSApIHtcclxuICAgIFxyXG4gICAgICAgICAgICB2YXIgdGlmZk9mZnNldCA9IG9mZnNldCArIDEwLFxyXG4gICAgICAgICAgICAgICAgbGl0dGxlRW5kaWFuLCBkaXJPZmZzZXQ7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIHRoZSBBU0NJSSBjb2RlIGZvciBcIkV4aWZcIiAoMHg0NTc4Njk2Nik6XHJcbiAgICAgICAgICAgIGlmICggZGF0YVZpZXcuZ2V0VWludDMyKCBvZmZzZXQgKyA0ICkgIT09IDB4NDU3ODY5NjYgKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBObyBFeGlmIGRhdGEsIG1pZ2h0IGJlIFhNUCBkYXRhIGluc3RlYWRcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIHRpZmZPZmZzZXQgKyA4ID4gZGF0YVZpZXcuYnl0ZUxlbmd0aCApIHtcclxuICAgICAgICAgICAgICAgIEJhc2UubG9nKCdJbnZhbGlkIEV4aWYgZGF0YTogSW52YWxpZCBzZWdtZW50IHNpemUuJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgdGhlIHR3byBudWxsIGJ5dGVzOlxyXG4gICAgICAgICAgICBpZiAoIGRhdGFWaWV3LmdldFVpbnQxNiggb2Zmc2V0ICsgOCApICE9PSAweDAwMDAgKSB7XHJcbiAgICAgICAgICAgICAgICBCYXNlLmxvZygnSW52YWxpZCBFeGlmIGRhdGE6IE1pc3NpbmcgYnl0ZSBhbGlnbm1lbnQgb2Zmc2V0LicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQ2hlY2sgdGhlIGJ5dGUgYWxpZ25tZW50OlxyXG4gICAgICAgICAgICBzd2l0Y2ggKCBkYXRhVmlldy5nZXRVaW50MTYoIHRpZmZPZmZzZXQgKSApIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMHg0OTQ5OlxyXG4gICAgICAgICAgICAgICAgICAgIGxpdHRsZUVuZGlhbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGNhc2UgMHg0RDREOlxyXG4gICAgICAgICAgICAgICAgICAgIGxpdHRsZUVuZGlhbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIEJhc2UubG9nKCdJbnZhbGlkIEV4aWYgZGF0YTogSW52YWxpZCBieXRlIGFsaWdubWVudCBtYXJrZXIuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIHRoZSBUSUZGIHRhZyBtYXJrZXIgKDB4MDAyQSk6XHJcbiAgICAgICAgICAgIGlmICggZGF0YVZpZXcuZ2V0VWludDE2KCB0aWZmT2Zmc2V0ICsgMiwgbGl0dGxlRW5kaWFuICkgIT09IDB4MDAyQSApIHtcclxuICAgICAgICAgICAgICAgIEJhc2UubG9nKCdJbnZhbGlkIEV4aWYgZGF0YTogTWlzc2luZyBUSUZGIG1hcmtlci4nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHJpZXZlIHRoZSBkaXJlY3Rvcnkgb2Zmc2V0IGJ5dGVzLCB1c3VhbGx5IDB4MDAwMDAwMDggb3IgOCBkZWNpbWFsOlxyXG4gICAgICAgICAgICBkaXJPZmZzZXQgPSBkYXRhVmlldy5nZXRVaW50MzIoIHRpZmZPZmZzZXQgKyA0LCBsaXR0bGVFbmRpYW4gKTtcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBleGlmIG9iamVjdCB0byBzdG9yZSB0aGUgdGFnczpcclxuICAgICAgICAgICAgZGF0YS5leGlmID0gbmV3IEVYSUYuRXhpZk1hcCgpO1xyXG4gICAgICAgICAgICAvLyBQYXJzZSB0aGUgdGFncyBvZiB0aGUgbWFpbiBpbWFnZSBkaXJlY3RvcnkgYW5kIHJldHJpZXZlIHRoZVxyXG4gICAgICAgICAgICAvLyBvZmZzZXQgdG8gdGhlIG5leHQgZGlyZWN0b3J5LCB1c3VhbGx5IHRoZSB0aHVtYm5haWwgZGlyZWN0b3J5OlxyXG4gICAgICAgICAgICBkaXJPZmZzZXQgPSBFWElGLnBhcnNlRXhpZlRhZ3MoIGRhdGFWaWV3LCB0aWZmT2Zmc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgIHRpZmZPZmZzZXQgKyBkaXJPZmZzZXQsIGxpdHRsZUVuZGlhbiwgZGF0YSApO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIOWwneivleivu+WPlue8qeeVpeWbvlxyXG4gICAgICAgICAgICAvLyBpZiAoIGRpck9mZnNldCApIHtcclxuICAgICAgICAgICAgLy8gICAgIHRodW1ibmFpbERhdGEgPSB7ZXhpZjoge319O1xyXG4gICAgICAgICAgICAvLyAgICAgZGlyT2Zmc2V0ID0gRVhJRi5wYXJzZUV4aWZUYWdzKFxyXG4gICAgICAgICAgICAvLyAgICAgICAgIGRhdGFWaWV3LFxyXG4gICAgICAgICAgICAvLyAgICAgICAgIHRpZmZPZmZzZXQsXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdGlmZk9mZnNldCArIGRpck9mZnNldCxcclxuICAgICAgICAgICAgLy8gICAgICAgICBsaXR0bGVFbmRpYW4sXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdGh1bWJuYWlsRGF0YVxyXG4gICAgICAgICAgICAvLyAgICAgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyAgICAgLy8gQ2hlY2sgZm9yIEpQRUcgVGh1bWJuYWlsIG9mZnNldDpcclxuICAgICAgICAgICAgLy8gICAgIGlmICh0aHVtYm5haWxEYXRhLmV4aWZbMHgwMjAxXSkge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIGRhdGEuZXhpZi5UaHVtYm5haWwgPSBFWElGLmdldEV4aWZUaHVtYm5haWwoXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGRhdGFWaWV3LFxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICB0aWZmT2Zmc2V0ICsgdGh1bWJuYWlsRGF0YS5leGlmWzB4MDIwMV0sXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIHRodW1ibmFpbERhdGEuZXhpZlsweDAyMDJdIC8vIFRodW1ibmFpbCBkYXRhIGxlbmd0aFxyXG4gICAgICAgICAgICAvLyAgICAgICAgICk7XHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgSW1hZ2VNZXRhLnBhcnNlcnNbIDB4ZmZlMSBdLnB1c2goIEVYSUYucGFyc2VFeGlmRGF0YSApO1xyXG4gICAgICAgIHJldHVybiBFWElGO1xyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIOi/meS4quaWueW8j+aAp+iDveS4jeihjO+8jOS9huaYr+WPr+S7peino+WGs2FuZHJvaWTph4zpnaLnmoR0b0RhdGFVcmznmoRidWdcclxuICAgICAqIGFuZHJvaWTph4zpnaJ0b0RhdGFVcmwoJ2ltYWdlL2pwZWdlJynlvpfliLDnmoTnu5PmnpzljbTmmK9wbmcuXHJcbiAgICAgKlxyXG4gICAgICog5omA5Lul6L+Z6YeM5rKh6L6Z77yM5Y+q6IO95YCf5Yqp6L+Z5Liq5bel5YW3XHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IGpwZWcgZW5jb2RlclxyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ3J1bnRpbWUvaHRtbDUvanBlZ2VuY29kZXInLFtdLCBmdW5jdGlvbiggcmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlICkge1xyXG4gICAgXHJcbiAgICAgICAgLypcclxuICAgICAgICAgIENvcHlyaWdodCAoYykgMjAwOCwgQWRvYmUgU3lzdGVtcyBJbmNvcnBvcmF0ZWRcclxuICAgICAgICAgIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAgICBcclxuICAgICAgICAgIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxyXG4gICAgICAgICAgbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZVxyXG4gICAgICAgICAgbWV0OlxyXG4gICAgXHJcbiAgICAgICAgICAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSxcclxuICAgICAgICAgICAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cclxuICAgIFxyXG4gICAgICAgICAgKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodFxyXG4gICAgICAgICAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlXHJcbiAgICAgICAgICAgIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uXHJcbiAgICBcclxuICAgICAgICAgICogTmVpdGhlciB0aGUgbmFtZSBvZiBBZG9iZSBTeXN0ZW1zIEluY29ycG9yYXRlZCBub3IgdGhlIG5hbWVzIG9mIGl0c1xyXG4gICAgICAgICAgICBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbVxyXG4gICAgICAgICAgICB0aGlzIHNvZnR3YXJlIHdpdGhvdXQgc3BlY2lmaWMgcHJpb3Igd3JpdHRlbiBwZXJtaXNzaW9uLlxyXG4gICAgXHJcbiAgICAgICAgICBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTIFwiQVNcclxuICAgICAgICAgIElTXCIgQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sXHJcbiAgICAgICAgICBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSXHJcbiAgICAgICAgICBQVVJQT1NFIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIE9XTkVSIE9SXHJcbiAgICAgICAgICBDT05UUklCVVRPUlMgQkUgTElBQkxFIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCxcclxuICAgICAgICAgIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTyxcclxuICAgICAgICAgIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUlxyXG4gICAgICAgICAgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT04gQU5ZIFRIRU9SWSBPRlxyXG4gICAgICAgICAgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUIChJTkNMVURJTkdcclxuICAgICAgICAgIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJU1xyXG4gICAgICAgICAgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuXHJcbiAgICAgICAgKi9cclxuICAgICAgICAvKlxyXG4gICAgICAgIEpQRUcgZW5jb2RlciBwb3J0ZWQgdG8gSmF2YVNjcmlwdCBhbmQgb3B0aW1pemVkIGJ5IEFuZHJlYXMgUml0dGVyLCB3d3cuYnl0ZXN0cm9tLmV1LCAxMS8yMDA5XHJcbiAgICBcclxuICAgICAgICBCYXNpYyBHVUkgYmxvY2tpbmcganBlZyBlbmNvZGVyXHJcbiAgICAgICAgKi9cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIEpQRUdFbmNvZGVyKHF1YWxpdHkpIHtcclxuICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgdmFyIGZyb3VuZCA9IE1hdGgucm91bmQ7XHJcbiAgICAgICAgICAgIHZhciBmZmxvb3IgPSBNYXRoLmZsb29yO1xyXG4gICAgICAgICAgICB2YXIgWVRhYmxlID0gbmV3IEFycmF5KDY0KTtcclxuICAgICAgICAgICAgdmFyIFVWVGFibGUgPSBuZXcgQXJyYXkoNjQpO1xyXG4gICAgICAgICAgICB2YXIgZmR0YmxfWSA9IG5ldyBBcnJheSg2NCk7XHJcbiAgICAgICAgICAgIHZhciBmZHRibF9VViA9IG5ldyBBcnJheSg2NCk7XHJcbiAgICAgICAgICAgIHZhciBZRENfSFQ7XHJcbiAgICAgICAgICAgIHZhciBVVkRDX0hUO1xyXG4gICAgICAgICAgICB2YXIgWUFDX0hUO1xyXG4gICAgICAgICAgICB2YXIgVVZBQ19IVDtcclxuICAgIFxyXG4gICAgICAgICAgICB2YXIgYml0Y29kZSA9IG5ldyBBcnJheSg2NTUzNSk7XHJcbiAgICAgICAgICAgIHZhciBjYXRlZ29yeSA9IG5ldyBBcnJheSg2NTUzNSk7XHJcbiAgICAgICAgICAgIHZhciBvdXRwdXRmRENUUXVhbnQgPSBuZXcgQXJyYXkoNjQpO1xyXG4gICAgICAgICAgICB2YXIgRFUgPSBuZXcgQXJyYXkoNjQpO1xyXG4gICAgICAgICAgICB2YXIgYnl0ZW91dCA9IFtdO1xyXG4gICAgICAgICAgICB2YXIgYnl0ZW5ldyA9IDA7XHJcbiAgICAgICAgICAgIHZhciBieXRlcG9zID0gNztcclxuICAgIFxyXG4gICAgICAgICAgICB2YXIgWURVID0gbmV3IEFycmF5KDY0KTtcclxuICAgICAgICAgICAgdmFyIFVEVSA9IG5ldyBBcnJheSg2NCk7XHJcbiAgICAgICAgICAgIHZhciBWRFUgPSBuZXcgQXJyYXkoNjQpO1xyXG4gICAgICAgICAgICB2YXIgY2x0ID0gbmV3IEFycmF5KDI1Nik7XHJcbiAgICAgICAgICAgIHZhciBSR0JfWVVWX1RBQkxFID0gbmV3IEFycmF5KDIwNDgpO1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudFF1YWxpdHk7XHJcbiAgICBcclxuICAgICAgICAgICAgdmFyIFppZ1phZyA9IFtcclxuICAgICAgICAgICAgICAgICAgICAgMCwgMSwgNSwgNiwxNCwxNSwyNywyOCxcclxuICAgICAgICAgICAgICAgICAgICAgMiwgNCwgNywxMywxNiwyNiwyOSw0MixcclxuICAgICAgICAgICAgICAgICAgICAgMywgOCwxMiwxNywyNSwzMCw0MSw0MyxcclxuICAgICAgICAgICAgICAgICAgICAgOSwxMSwxOCwyNCwzMSw0MCw0NCw1MyxcclxuICAgICAgICAgICAgICAgICAgICAxMCwxOSwyMywzMiwzOSw0NSw1Miw1NCxcclxuICAgICAgICAgICAgICAgICAgICAyMCwyMiwzMywzOCw0Niw1MSw1NSw2MCxcclxuICAgICAgICAgICAgICAgICAgICAyMSwzNCwzNyw0Nyw1MCw1Niw1OSw2MSxcclxuICAgICAgICAgICAgICAgICAgICAzNSwzNiw0OCw0OSw1Nyw1OCw2Miw2M1xyXG4gICAgICAgICAgICAgICAgXTtcclxuICAgIFxyXG4gICAgICAgICAgICB2YXIgc3RkX2RjX2x1bWluYW5jZV9ucmNvZGVzID0gWzAsMCwxLDUsMSwxLDEsMSwxLDEsMCwwLDAsMCwwLDAsMF07XHJcbiAgICAgICAgICAgIHZhciBzdGRfZGNfbHVtaW5hbmNlX3ZhbHVlcyA9IFswLDEsMiwzLDQsNSw2LDcsOCw5LDEwLDExXTtcclxuICAgICAgICAgICAgdmFyIHN0ZF9hY19sdW1pbmFuY2VfbnJjb2RlcyA9IFswLDAsMiwxLDMsMywyLDQsMyw1LDUsNCw0LDAsMCwxLDB4N2RdO1xyXG4gICAgICAgICAgICB2YXIgc3RkX2FjX2x1bWluYW5jZV92YWx1ZXMgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgMHgwMSwweDAyLDB4MDMsMHgwMCwweDA0LDB4MTEsMHgwNSwweDEyLFxyXG4gICAgICAgICAgICAgICAgICAgIDB4MjEsMHgzMSwweDQxLDB4MDYsMHgxMywweDUxLDB4NjEsMHgwNyxcclxuICAgICAgICAgICAgICAgICAgICAweDIyLDB4NzEsMHgxNCwweDMyLDB4ODEsMHg5MSwweGExLDB4MDgsXHJcbiAgICAgICAgICAgICAgICAgICAgMHgyMywweDQyLDB4YjEsMHhjMSwweDE1LDB4NTIsMHhkMSwweGYwLFxyXG4gICAgICAgICAgICAgICAgICAgIDB4MjQsMHgzMywweDYyLDB4NzIsMHg4MiwweDA5LDB4MGEsMHgxNixcclxuICAgICAgICAgICAgICAgICAgICAweDE3LDB4MTgsMHgxOSwweDFhLDB4MjUsMHgyNiwweDI3LDB4MjgsXHJcbiAgICAgICAgICAgICAgICAgICAgMHgyOSwweDJhLDB4MzQsMHgzNSwweDM2LDB4MzcsMHgzOCwweDM5LFxyXG4gICAgICAgICAgICAgICAgICAgIDB4M2EsMHg0MywweDQ0LDB4NDUsMHg0NiwweDQ3LDB4NDgsMHg0OSxcclxuICAgICAgICAgICAgICAgICAgICAweDRhLDB4NTMsMHg1NCwweDU1LDB4NTYsMHg1NywweDU4LDB4NTksXHJcbiAgICAgICAgICAgICAgICAgICAgMHg1YSwweDYzLDB4NjQsMHg2NSwweDY2LDB4NjcsMHg2OCwweDY5LFxyXG4gICAgICAgICAgICAgICAgICAgIDB4NmEsMHg3MywweDc0LDB4NzUsMHg3NiwweDc3LDB4NzgsMHg3OSxcclxuICAgICAgICAgICAgICAgICAgICAweDdhLDB4ODMsMHg4NCwweDg1LDB4ODYsMHg4NywweDg4LDB4ODksXHJcbiAgICAgICAgICAgICAgICAgICAgMHg4YSwweDkyLDB4OTMsMHg5NCwweDk1LDB4OTYsMHg5NywweDk4LFxyXG4gICAgICAgICAgICAgICAgICAgIDB4OTksMHg5YSwweGEyLDB4YTMsMHhhNCwweGE1LDB4YTYsMHhhNyxcclxuICAgICAgICAgICAgICAgICAgICAweGE4LDB4YTksMHhhYSwweGIyLDB4YjMsMHhiNCwweGI1LDB4YjYsXHJcbiAgICAgICAgICAgICAgICAgICAgMHhiNywweGI4LDB4YjksMHhiYSwweGMyLDB4YzMsMHhjNCwweGM1LFxyXG4gICAgICAgICAgICAgICAgICAgIDB4YzYsMHhjNywweGM4LDB4YzksMHhjYSwweGQyLDB4ZDMsMHhkNCxcclxuICAgICAgICAgICAgICAgICAgICAweGQ1LDB4ZDYsMHhkNywweGQ4LDB4ZDksMHhkYSwweGUxLDB4ZTIsXHJcbiAgICAgICAgICAgICAgICAgICAgMHhlMywweGU0LDB4ZTUsMHhlNiwweGU3LDB4ZTgsMHhlOSwweGVhLFxyXG4gICAgICAgICAgICAgICAgICAgIDB4ZjEsMHhmMiwweGYzLDB4ZjQsMHhmNSwweGY2LDB4ZjcsMHhmOCxcclxuICAgICAgICAgICAgICAgICAgICAweGY5LDB4ZmFcclxuICAgICAgICAgICAgICAgIF07XHJcbiAgICBcclxuICAgICAgICAgICAgdmFyIHN0ZF9kY19jaHJvbWluYW5jZV9ucmNvZGVzID0gWzAsMCwzLDEsMSwxLDEsMSwxLDEsMSwxLDAsMCwwLDAsMF07XHJcbiAgICAgICAgICAgIHZhciBzdGRfZGNfY2hyb21pbmFuY2VfdmFsdWVzID0gWzAsMSwyLDMsNCw1LDYsNyw4LDksMTAsMTFdO1xyXG4gICAgICAgICAgICB2YXIgc3RkX2FjX2Nocm9taW5hbmNlX25yY29kZXMgPSBbMCwwLDIsMSwyLDQsNCwzLDQsNyw1LDQsNCwwLDEsMiwweDc3XTtcclxuICAgICAgICAgICAgdmFyIHN0ZF9hY19jaHJvbWluYW5jZV92YWx1ZXMgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAxLDB4MDIsMHgwMywweDExLDB4MDQsMHgwNSwweDIxLFxyXG4gICAgICAgICAgICAgICAgICAgIDB4MzEsMHgwNiwweDEyLDB4NDEsMHg1MSwweDA3LDB4NjEsMHg3MSxcclxuICAgICAgICAgICAgICAgICAgICAweDEzLDB4MjIsMHgzMiwweDgxLDB4MDgsMHgxNCwweDQyLDB4OTEsXHJcbiAgICAgICAgICAgICAgICAgICAgMHhhMSwweGIxLDB4YzEsMHgwOSwweDIzLDB4MzMsMHg1MiwweGYwLFxyXG4gICAgICAgICAgICAgICAgICAgIDB4MTUsMHg2MiwweDcyLDB4ZDEsMHgwYSwweDE2LDB4MjQsMHgzNCxcclxuICAgICAgICAgICAgICAgICAgICAweGUxLDB4MjUsMHhmMSwweDE3LDB4MTgsMHgxOSwweDFhLDB4MjYsXHJcbiAgICAgICAgICAgICAgICAgICAgMHgyNywweDI4LDB4MjksMHgyYSwweDM1LDB4MzYsMHgzNywweDM4LFxyXG4gICAgICAgICAgICAgICAgICAgIDB4MzksMHgzYSwweDQzLDB4NDQsMHg0NSwweDQ2LDB4NDcsMHg0OCxcclxuICAgICAgICAgICAgICAgICAgICAweDQ5LDB4NGEsMHg1MywweDU0LDB4NTUsMHg1NiwweDU3LDB4NTgsXHJcbiAgICAgICAgICAgICAgICAgICAgMHg1OSwweDVhLDB4NjMsMHg2NCwweDY1LDB4NjYsMHg2NywweDY4LFxyXG4gICAgICAgICAgICAgICAgICAgIDB4NjksMHg2YSwweDczLDB4NzQsMHg3NSwweDc2LDB4NzcsMHg3OCxcclxuICAgICAgICAgICAgICAgICAgICAweDc5LDB4N2EsMHg4MiwweDgzLDB4ODQsMHg4NSwweDg2LDB4ODcsXHJcbiAgICAgICAgICAgICAgICAgICAgMHg4OCwweDg5LDB4OGEsMHg5MiwweDkzLDB4OTQsMHg5NSwweDk2LFxyXG4gICAgICAgICAgICAgICAgICAgIDB4OTcsMHg5OCwweDk5LDB4OWEsMHhhMiwweGEzLDB4YTQsMHhhNSxcclxuICAgICAgICAgICAgICAgICAgICAweGE2LDB4YTcsMHhhOCwweGE5LDB4YWEsMHhiMiwweGIzLDB4YjQsXHJcbiAgICAgICAgICAgICAgICAgICAgMHhiNSwweGI2LDB4YjcsMHhiOCwweGI5LDB4YmEsMHhjMiwweGMzLFxyXG4gICAgICAgICAgICAgICAgICAgIDB4YzQsMHhjNSwweGM2LDB4YzcsMHhjOCwweGM5LDB4Y2EsMHhkMixcclxuICAgICAgICAgICAgICAgICAgICAweGQzLDB4ZDQsMHhkNSwweGQ2LDB4ZDcsMHhkOCwweGQ5LDB4ZGEsXHJcbiAgICAgICAgICAgICAgICAgICAgMHhlMiwweGUzLDB4ZTQsMHhlNSwweGU2LDB4ZTcsMHhlOCwweGU5LFxyXG4gICAgICAgICAgICAgICAgICAgIDB4ZWEsMHhmMiwweGYzLDB4ZjQsMHhmNSwweGY2LDB4ZjcsMHhmOCxcclxuICAgICAgICAgICAgICAgICAgICAweGY5LDB4ZmFcclxuICAgICAgICAgICAgICAgIF07XHJcbiAgICBcclxuICAgICAgICAgICAgZnVuY3Rpb24gaW5pdFF1YW50VGFibGVzKHNmKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgWVFUID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAxNiwgMTEsIDEwLCAxNiwgMjQsIDQwLCA1MSwgNjEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDEyLCAxMiwgMTQsIDE5LCAyNiwgNTgsIDYwLCA1NSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgMTQsIDEzLCAxNiwgMjQsIDQwLCA1NywgNjksIDU2LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAxNCwgMTcsIDIyLCAyOSwgNTEsIDg3LCA4MCwgNjIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDE4LCAyMiwgMzcsIDU2LCA2OCwxMDksMTAzLCA3NyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgMjQsIDM1LCA1NSwgNjQsIDgxLDEwNCwxMTMsIDkyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA0OSwgNjQsIDc4LCA4NywxMDMsMTIxLDEyMCwxMDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDcyLCA5MiwgOTUsIDk4LDExMiwxMDAsMTAzLCA5OVxyXG4gICAgICAgICAgICAgICAgICAgIF07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDY0OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBmZmxvb3IoKFlRVFtpXSpzZis1MCkvMTAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQgPCAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0ID4gMjU1KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gMjU1O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFlUYWJsZVtaaWdaYWdbaV1dID0gdDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIFVWUVQgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDE3LCAxOCwgMjQsIDQ3LCA5OSwgOTksIDk5LCA5OSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgMTgsIDIxLCAyNiwgNjYsIDk5LCA5OSwgOTksIDk5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAyNCwgMjYsIDU2LCA5OSwgOTksIDk5LCA5OSwgOTksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDQ3LCA2NiwgOTksIDk5LCA5OSwgOTksIDk5LCA5OSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgOTksIDk5LCA5OSwgOTksIDk5LCA5OSwgOTksIDk5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA5OSwgOTksIDk5LCA5OSwgOTksIDk5LCA5OSwgOTksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDk5LCA5OSwgOTksIDk5LCA5OSwgOTksIDk5LCA5OSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgOTksIDk5LCA5OSwgOTksIDk5LCA5OSwgOTksIDk5XHJcbiAgICAgICAgICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDY0OyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHUgPSBmZmxvb3IoKFVWUVRbal0qc2YrNTApLzEwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1IDwgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodSA+IDI1NSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IDI1NTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBVVlRhYmxlW1ppZ1phZ1tqXV0gPSB1O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgYWFzZiA9IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgMS4wLCAxLjM4NzAzOTg0NSwgMS4zMDY1NjI5NjUsIDEuMTc1ODc1NjAyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAxLjAsIDAuNzg1Njk0OTU4LCAwLjU0MTE5NjEwMCwgMC4yNzU4OTkzNzlcclxuICAgICAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBrID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByb3cgPSAwOyByb3cgPCA4OyByb3crKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGNvbCA9IDA7IGNvbCA8IDg7IGNvbCsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZHRibF9ZW2tdICA9ICgxLjAgLyAoWVRhYmxlIFtaaWdaYWdba11dICogYWFzZltyb3ddICogYWFzZltjb2xdICogOC4wKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZHRibF9VVltrXSA9ICgxLjAgLyAoVVZUYWJsZVtaaWdaYWdba11dICogYWFzZltyb3ddICogYWFzZltjb2xdICogOC4wKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNvbXB1dGVIdWZmbWFuVGJsKG5yY29kZXMsIHN0ZF90YWJsZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvZGV2YWx1ZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvc19pbl90YWJsZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIEhUID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDE7IGsgPD0gMTY7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMTsgaiA8PSBucmNvZGVzW2tdOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhUW3N0ZF90YWJsZVtwb3NfaW5fdGFibGVdXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgSFRbc3RkX3RhYmxlW3Bvc19pbl90YWJsZV1dWzBdID0gY29kZXZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgSFRbc3RkX3RhYmxlW3Bvc19pbl90YWJsZV1dWzFdID0gaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc19pbl90YWJsZSsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZXZhbHVlKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZXZhbHVlKj0yO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSFQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGluaXRIdWZmbWFuVGJsKClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBZRENfSFQgPSBjb21wdXRlSHVmZm1hblRibChzdGRfZGNfbHVtaW5hbmNlX25yY29kZXMsc3RkX2RjX2x1bWluYW5jZV92YWx1ZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIFVWRENfSFQgPSBjb21wdXRlSHVmZm1hblRibChzdGRfZGNfY2hyb21pbmFuY2VfbnJjb2RlcyxzdGRfZGNfY2hyb21pbmFuY2VfdmFsdWVzKTtcclxuICAgICAgICAgICAgICAgICAgICBZQUNfSFQgPSBjb21wdXRlSHVmZm1hblRibChzdGRfYWNfbHVtaW5hbmNlX25yY29kZXMsc3RkX2FjX2x1bWluYW5jZV92YWx1ZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIFVWQUNfSFQgPSBjb21wdXRlSHVmZm1hblRibChzdGRfYWNfY2hyb21pbmFuY2VfbnJjb2RlcyxzdGRfYWNfY2hyb21pbmFuY2VfdmFsdWVzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gaW5pdENhdGVnb3J5TnVtYmVyKClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbnJsb3dlciA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ydXBwZXIgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGNhdCA9IDE7IGNhdCA8PSAxNTsgY2F0KyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9Qb3NpdGl2ZSBudW1iZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG5yID0gbnJsb3dlcjsgbnI8bnJ1cHBlcjsgbnIrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlbMzI3NjcrbnJdID0gY2F0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYml0Y29kZVszMjc2Nytucl0gPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdGNvZGVbMzI3NjcrbnJdWzFdID0gY2F0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYml0Y29kZVszMjc2Nytucl1bMF0gPSBucjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL05lZ2F0aXZlIG51bWJlcnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbnJuZWcgPS0obnJ1cHBlci0xKTsgbnJuZWc8PS1ucmxvd2VyOyBucm5lZysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeVszMjc2Nytucm5lZ10gPSBjYXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRjb2RlWzMyNzY3K25ybmVnXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYml0Y29kZVszMjc2Nytucm5lZ11bMV0gPSBjYXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRjb2RlWzMyNzY3K25ybmVnXVswXSA9IG5ydXBwZXItMStucm5lZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBucmxvd2VyIDw8PSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBucnVwcGVyIDw8PSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gaW5pdFJHQllVVlRhYmxlKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCAyNTY7aSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJHQl9ZVVZfVEFCTEVbaV0gICAgICAgICAgICA9ICAxOTU5NSAqIGk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJHQl9ZVVZfVEFCTEVbKGkrIDI1Nik+PjBdICA9ICAzODQ3MCAqIGk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJHQl9ZVVZfVEFCTEVbKGkrIDUxMik+PjBdICA9ICAgNzQ3MSAqIGkgKyAweDgwMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJHQl9ZVVZfVEFCTEVbKGkrIDc2OCk+PjBdICA9IC0xMTA1OSAqIGk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJHQl9ZVVZfVEFCTEVbKGkrMTAyNCk+PjBdICA9IC0yMTcwOSAqIGk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJHQl9ZVVZfVEFCTEVbKGkrMTI4MCk+PjBdICA9ICAzMjc2OCAqIGkgKyAweDgwN0ZGRjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUkdCX1lVVl9UQUJMRVsoaSsxNTM2KT4+MF0gID0gLTI3NDM5ICogaTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUkdCX1lVVl9UQUJMRVsoaSsxNzkyKT4+MF0gID0gLSA1MzI5ICogaTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIElPIGZ1bmN0aW9uc1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gd3JpdGVCaXRzKGJzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJzWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3N2YWwgPSBic1sxXS0xO1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICggcG9zdmFsID49IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAmICgxIDw8IHBvc3ZhbCkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBieXRlbmV3IHw9ICgxIDw8IGJ5dGVwb3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc3ZhbC0tO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBieXRlcG9zLS07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChieXRlcG9zIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ5dGVuZXcgPT0gMHhGRikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZSgweEZGKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoYnl0ZW5ldyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBieXRlcG9zPTc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBieXRlbmV3PTA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHdyaXRlQnl0ZSh2YWx1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBieXRlb3V0LnB1c2goY2x0W3ZhbHVlXSk7IC8vIHdyaXRlIGNoYXIgZGlyZWN0bHkgaW5zdGVhZCBvZiBjb252ZXJ0aW5nIGxhdGVyXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHdyaXRlV29yZCh2YWx1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoKHZhbHVlPj44KSYweEZGKTtcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoKHZhbHVlICAgKSYweEZGKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gRENUICYgcXVhbnRpemF0aW9uIGNvcmVcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGZEQ1RRdWFudChkYXRhLCBmZHRibClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZDAsIGQxLCBkMiwgZDMsIGQ0LCBkNSwgZDYsIGQ3O1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIFBhc3MgMTogcHJvY2VzcyByb3dzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhT2ZmPTA7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIEk4ID0gODtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgSTY0ID0gNjQ7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpPTA7IGk8STg7ICsraSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQwID0gZGF0YVtkYXRhT2ZmXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZDEgPSBkYXRhW2RhdGFPZmYrMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQyID0gZGF0YVtkYXRhT2ZmKzJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkMyA9IGRhdGFbZGF0YU9mZiszXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZDQgPSBkYXRhW2RhdGFPZmYrNF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQ1ID0gZGF0YVtkYXRhT2ZmKzVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkNiA9IGRhdGFbZGF0YU9mZis2XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZDcgPSBkYXRhW2RhdGFPZmYrN107XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcDAgPSBkMCArIGQ3O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG1wNyA9IGQwIC0gZDc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXAxID0gZDEgKyBkNjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcDYgPSBkMSAtIGQ2O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG1wMiA9IGQyICsgZDU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXA1ID0gZDIgLSBkNTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcDMgPSBkMyArIGQ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG1wNCA9IGQzIC0gZDQ7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogRXZlbiBwYXJ0ICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXAxMCA9IHRtcDAgKyB0bXAzOyAgICAvKiBwaGFzZSAyICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXAxMyA9IHRtcDAgLSB0bXAzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG1wMTEgPSB0bXAxICsgdG1wMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcDEyID0gdG1wMSAtIHRtcDI7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtkYXRhT2ZmXSA9IHRtcDEwICsgdG1wMTE7IC8qIHBoYXNlIDMgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtkYXRhT2ZmKzRdID0gdG1wMTAgLSB0bXAxMTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgejEgPSAodG1wMTIgKyB0bXAxMykgKiAwLjcwNzEwNjc4MTsgLyogYzQgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtkYXRhT2ZmKzJdID0gdG1wMTMgKyB6MTsgLyogcGhhc2UgNSAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhW2RhdGFPZmYrNl0gPSB0bXAxMyAtIHoxO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIE9kZCBwYXJ0ICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcDEwID0gdG1wNCArIHRtcDU7IC8qIHBoYXNlIDIgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgdG1wMTEgPSB0bXA1ICsgdG1wNjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG1wMTIgPSB0bXA2ICsgdG1wNztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBUaGUgcm90YXRvciBpcyBtb2RpZmllZCBmcm9tIGZpZyA0LTggdG8gYXZvaWQgZXh0cmEgbmVnYXRpb25zLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgejUgPSAodG1wMTAgLSB0bXAxMikgKiAwLjM4MjY4MzQzMzsgLyogYzYgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHoyID0gMC41NDExOTYxMDAgKiB0bXAxMCArIHo1OyAvKiBjMi1jNiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgejQgPSAxLjMwNjU2Mjk2NSAqIHRtcDEyICsgejU7IC8qIGMyK2M2ICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB6MyA9IHRtcDExICogMC43MDcxMDY3ODE7IC8qIGM0ICovXHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHoxMSA9IHRtcDcgKyB6MzsgICAgLyogcGhhc2UgNSAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgejEzID0gdG1wNyAtIHozO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbZGF0YU9mZis1XSA9IHoxMyArIHoyOyAvKiBwaGFzZSA2ICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbZGF0YU9mZiszXSA9IHoxMyAtIHoyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhW2RhdGFPZmYrMV0gPSB6MTEgKyB6NDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtkYXRhT2ZmKzddID0gejExIC0gejQ7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YU9mZiArPSA4OyAvKiBhZHZhbmNlIHBvaW50ZXIgdG8gbmV4dCByb3cgKi9cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvKiBQYXNzIDI6IHByb2Nlc3MgY29sdW1ucy4gKi9cclxuICAgICAgICAgICAgICAgICAgICBkYXRhT2ZmID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGk9MDsgaTxJODsgKytpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZDAgPSBkYXRhW2RhdGFPZmZdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkMSA9IGRhdGFbZGF0YU9mZiArIDhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkMiA9IGRhdGFbZGF0YU9mZiArIDE2XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZDMgPSBkYXRhW2RhdGFPZmYgKyAyNF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQ0ID0gZGF0YVtkYXRhT2ZmICsgMzJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkNSA9IGRhdGFbZGF0YU9mZiArIDQwXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZDYgPSBkYXRhW2RhdGFPZmYgKyA0OF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQ3ID0gZGF0YVtkYXRhT2ZmICsgNTZdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXAwcDIgPSBkMCArIGQ3O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG1wN3AyID0gZDAgLSBkNztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcDFwMiA9IGQxICsgZDY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXA2cDIgPSBkMSAtIGQ2O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG1wMnAyID0gZDIgKyBkNTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcDVwMiA9IGQyIC0gZDU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXAzcDIgPSBkMyArIGQ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG1wNHAyID0gZDMgLSBkNDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBFdmVuIHBhcnQgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcDEwcDIgPSB0bXAwcDIgKyB0bXAzcDI7ICAvKiBwaGFzZSAyICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXAxM3AyID0gdG1wMHAyIC0gdG1wM3AyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG1wMTFwMiA9IHRtcDFwMiArIHRtcDJwMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcDEycDIgPSB0bXAxcDIgLSB0bXAycDI7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtkYXRhT2ZmXSA9IHRtcDEwcDIgKyB0bXAxMXAyOyAvKiBwaGFzZSAzICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbZGF0YU9mZiszMl0gPSB0bXAxMHAyIC0gdG1wMTFwMjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgejFwMiA9ICh0bXAxMnAyICsgdG1wMTNwMikgKiAwLjcwNzEwNjc4MTsgLyogYzQgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtkYXRhT2ZmKzE2XSA9IHRtcDEzcDIgKyB6MXAyOyAvKiBwaGFzZSA1ICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbZGF0YU9mZis0OF0gPSB0bXAxM3AyIC0gejFwMjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBPZGQgcGFydCAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0bXAxMHAyID0gdG1wNHAyICsgdG1wNXAyOyAvKiBwaGFzZSAyICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcDExcDIgPSB0bXA1cDIgKyB0bXA2cDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcDEycDIgPSB0bXA2cDIgKyB0bXA3cDI7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogVGhlIHJvdGF0b3IgaXMgbW9kaWZpZWQgZnJvbSBmaWcgNC04IHRvIGF2b2lkIGV4dHJhIG5lZ2F0aW9ucy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHo1cDIgPSAodG1wMTBwMiAtIHRtcDEycDIpICogMC4zODI2ODM0MzM7IC8qIGM2ICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB6MnAyID0gMC41NDExOTYxMDAgKiB0bXAxMHAyICsgejVwMjsgLyogYzItYzYgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHo0cDIgPSAxLjMwNjU2Mjk2NSAqIHRtcDEycDIgKyB6NXAyOyAvKiBjMitjNiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgejNwMiA9IHRtcDExcDIgKiAwLjcwNzEwNjc4MTsgLyogYzQgKi9cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgejExcDIgPSB0bXA3cDIgKyB6M3AyOyAgLyogcGhhc2UgNSAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgejEzcDIgPSB0bXA3cDIgLSB6M3AyO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbZGF0YU9mZis0MF0gPSB6MTNwMiArIHoycDI7IC8qIHBoYXNlIDYgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtkYXRhT2ZmKzI0XSA9IHoxM3AyIC0gejJwMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtkYXRhT2ZmKyA4XSA9IHoxMXAyICsgejRwMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtkYXRhT2ZmKzU2XSA9IHoxMXAyIC0gejRwMjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhT2ZmKys7IC8qIGFkdmFuY2UgcG9pbnRlciB0byBuZXh0IGNvbHVtbiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFF1YW50aXplL2Rlc2NhbGUgdGhlIGNvZWZmaWNpZW50c1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmRENUUXVhbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpPTA7IGk8STY0OyArK2kpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBcHBseSB0aGUgcXVhbnRpemF0aW9uIGFuZCBzY2FsaW5nIGZhY3RvciAmIFJvdW5kIHRvIG5lYXJlc3QgaW50ZWdlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmRENUUXVhbnQgPSBkYXRhW2ldKmZkdGJsW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRmRENUUXVhbnRbaV0gPSAoZkRDVFF1YW50ID4gMC4wKSA/ICgoZkRDVFF1YW50ICsgMC41KXwwKSA6ICgoZkRDVFF1YW50IC0gMC41KXwwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9vdXRwdXRmRENUUXVhbnRbaV0gPSBmcm91bmQoZkRDVFF1YW50KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3V0cHV0ZkRDVFF1YW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiB3cml0ZUFQUDAoKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlV29yZCgweEZGRTApOyAvLyBtYXJrZXJcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZVdvcmQoMTYpOyAvLyBsZW5ndGhcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMHg0QSk7IC8vIEpcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMHg0Nik7IC8vIEZcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMHg0OSk7IC8vIElcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMHg0Nik7IC8vIEZcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMCk7IC8vID0gXCJKRklGXCIsJ1xcMCdcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMSk7IC8vIHZlcnNpb25oaVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZSgxKTsgLy8gdmVyc2lvbmxvXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVCeXRlKDApOyAvLyB4eXVuaXRzXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVXb3JkKDEpOyAvLyB4ZGVuc2l0eVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlV29yZCgxKTsgLy8geWRlbnNpdHlcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMCk7IC8vIHRodW1ibndpZHRoXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVCeXRlKDApOyAvLyB0aHVtYm5oZWlnaHRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gd3JpdGVTT0YwKHdpZHRoLCBoZWlnaHQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVXb3JkKDB4RkZDMCk7IC8vIG1hcmtlclxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlV29yZCgxNyk7ICAgLy8gbGVuZ3RoLCB0cnVlY29sb3IgWVVWIEpQR1xyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZSg4KTsgICAgLy8gcHJlY2lzaW9uXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVXb3JkKGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVXb3JkKHdpZHRoKTtcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMyk7ICAgIC8vIG5yb2Zjb21wb25lbnRzXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVCeXRlKDEpOyAgICAvLyBJZFlcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMHgxMSk7IC8vIEhWWVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZSgwKTsgICAgLy8gUVRZXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVCeXRlKDIpOyAgICAvLyBJZFVcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMHgxMSk7IC8vIEhWVVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZSgxKTsgICAgLy8gUVRVXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVCeXRlKDMpOyAgICAvLyBJZFZcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMHgxMSk7IC8vIEhWVlxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZSgxKTsgICAgLy8gUVRWXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHdyaXRlRFFUKClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZVdvcmQoMHhGRkRCKTsgLy8gbWFya2VyXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVXb3JkKDEzMik7ICAgIC8vIGxlbmd0aFxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZSgwKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8NjQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoWVRhYmxlW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVCeXRlKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGo9MDsgajw2NDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZShVVlRhYmxlW2pdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHdyaXRlREhUKClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZVdvcmQoMHhGRkM0KTsgLy8gbWFya2VyXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVXb3JkKDB4MDFBMik7IC8vIGxlbmd0aFxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVCeXRlKDApOyAvLyBIVFlEQ2luZm9cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8MTY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoc3RkX2RjX2x1bWluYW5jZV9ucmNvZGVzW2krMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqPTA7IGo8PTExOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVCeXRlKHN0ZF9kY19sdW1pbmFuY2VfdmFsdWVzW2pdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMHgxMCk7IC8vIEhUWUFDaW5mb1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGs9MDsgazwxNjsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZShzdGRfYWNfbHVtaW5hbmNlX25yY29kZXNbaysxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGw9MDsgbDw9MTYxOyBsKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVCeXRlKHN0ZF9hY19sdW1pbmFuY2VfdmFsdWVzW2xdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMSk7IC8vIEhUVURDaW5mb1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG09MDsgbTwxNjsgbSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZShzdGRfZGNfY2hyb21pbmFuY2VfbnJjb2Rlc1ttKzFdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbj0wOyBuPD0xMTsgbisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZShzdGRfZGNfY2hyb21pbmFuY2VfdmFsdWVzW25dKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMHgxMSk7IC8vIEhUVUFDaW5mb1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG89MDsgbzwxNjsgbysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZShzdGRfYWNfY2hyb21pbmFuY2VfbnJjb2Rlc1tvKzFdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcD0wOyBwPD0xNjE7IHArKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoc3RkX2FjX2Nocm9taW5hbmNlX3ZhbHVlc1twXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiB3cml0ZVNPUygpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVXb3JkKDB4RkZEQSk7IC8vIG1hcmtlclxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlV29yZCgxMik7IC8vIGxlbmd0aFxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZSgzKTsgLy8gbnJvZmNvbXBvbmVudHNcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMSk7IC8vIElkWVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZSgwKTsgLy8gSFRZXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVCeXRlKDIpOyAvLyBJZFVcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMHgxMSk7IC8vIEhUVVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZSgzKTsgLy8gSWRWXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVCeXRlKDB4MTEpOyAvLyBIVFZcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMCk7IC8vIFNzXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVCeXRlKDB4M2YpOyAvLyBTZVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZSgwKTsgLy8gQmZcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcHJvY2Vzc0RVKENEVSwgZmR0YmwsIERDLCBIVERDLCBIVEFDKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgRU9CID0gSFRBQ1sweDAwXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTTE2emVyb2VzID0gSFRBQ1sweEYwXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcG9zO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBJMTYgPSAxNjtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgSTYzID0gNjM7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIEk2NCA9IDY0O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBEVV9EQ1QgPSBmRENUUXVhbnQoQ0RVLCBmZHRibCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9aaWdaYWcgcmVvcmRlclxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGo9MDtqPEk2NDsrK2opIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRFVbWmlnWmFnW2pdXT1EVV9EQ1Rbal07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBEaWZmID0gRFVbMF0gLSBEQzsgREMgPSBEVVswXTtcclxuICAgICAgICAgICAgICAgICAgICAvL0VuY29kZSBEQ1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChEaWZmPT0wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlQml0cyhIVERDWzBdKTsgLy8gRGlmZiBtaWdodCBiZSAwXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zID0gMzI3NjcrRGlmZjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVCaXRzKEhURENbY2F0ZWdvcnlbcG9zXV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZUJpdHMoYml0Y29kZVtwb3NdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy9FbmNvZGUgQUNzXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZDBwb3MgPSA2MzsgLy8gd2FzIGNvbnN0Li4uIHdoaWNoIGlzIGNyYXp5XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICg7IChlbmQwcG9zPjApJiYoRFVbZW5kMHBvc109PTApOyBlbmQwcG9zLS0pIHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIC8vZW5kMHBvcyA9IGZpcnN0IGVsZW1lbnQgaW4gcmV2ZXJzZSBvcmRlciAhPTBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGVuZDBwb3MgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZUJpdHMoRU9CKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERDO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxuZztcclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoIGkgPD0gZW5kMHBvcyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXJ0cG9zID0gaTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IChEVVtpXT09MCkgJiYgKGk8PWVuZDBwb3MpOyArK2kpIHt9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBucnplcm9lcyA9IGktc3RhcnRwb3M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggbnJ6ZXJvZXMgPj0gSTE2ICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG5nID0gbnJ6ZXJvZXM+PjQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBucm1hcmtlcj0xOyBucm1hcmtlciA8PSBsbmc7ICsrbnJtYXJrZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVCaXRzKE0xNnplcm9lcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBucnplcm9lcyA9IG5yemVyb2VzJjB4RjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3MgPSAzMjc2NytEVVtpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVCaXRzKEhUQUNbKG5yemVyb2VzPDw0KStjYXRlZ29yeVtwb3NdXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlQml0cyhiaXRjb2RlW3Bvc10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggZW5kMHBvcyAhPSBJNjMgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlQml0cyhFT0IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gREM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGluaXRDaGFyTG9va3VwVGFibGUoKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2ZjYyA9IFN0cmluZy5mcm9tQ2hhckNvZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7IGkgPCAyNTY7IGkrKyl7IC8vLy8vIEFDSFRVTkcgLy8gMjU1XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsdFtpXSA9IHNmY2MoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLmVuY29kZSA9IGZ1bmN0aW9uKGltYWdlLHF1YWxpdHkpIC8vIGltYWdlIGRhdGEgb2JqZWN0XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdmFyIHRpbWVfc3RhcnQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHF1YWxpdHkpIHNldFF1YWxpdHkocXVhbGl0eSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBJbml0aWFsaXplIGJpdCB3cml0ZXJcclxuICAgICAgICAgICAgICAgICAgICBieXRlb3V0ID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnl0ZW5ldz0wO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVwb3M9NztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFkZCBKUEVHIGhlYWRlcnNcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZVdvcmQoMHhGRkQ4KTsgLy8gU09JXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVBUFAwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVEUVQoKTtcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZVNPRjAoaW1hZ2Uud2lkdGgsaW1hZ2UuaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZURIVCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlU09TKCk7XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEVuY29kZSA4eDggbWFjcm9ibG9ja3NcclxuICAgICAgICAgICAgICAgICAgICB2YXIgRENZPTA7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIERDVT0wO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBEQ1Y9MDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVuZXc9MDtcclxuICAgICAgICAgICAgICAgICAgICBieXRlcG9zPTc7XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5jb2RlLmRpc3BsYXlOYW1lID0gXCJfZW5jb2RlX1wiO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGltYWdlRGF0YSA9IGltYWdlLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2Uud2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmhlaWdodDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBxdWFkV2lkdGggPSB3aWR0aCo0O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cmlwbGVXaWR0aCA9IHdpZHRoKjM7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeCwgeSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHIsIGcsIGI7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXJ0LHAsIGNvbCxyb3cscG9zO1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlKHkgPCBoZWlnaHQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUoeCA8IHF1YWRXaWR0aCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gcXVhZFdpZHRoICogeSArIHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBzdGFydDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sID0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdyA9IDA7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHBvcz0wOyBwb3MgPCA2NDsgcG9zKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93ID0gcG9zID4+IDM7Ly8gLzhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbCA9ICggcG9zICYgNyApICogNDsgLy8gJThcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBzdGFydCArICggcm93ICogcXVhZFdpZHRoICkgKyBjb2w7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHkrcm93ID49IGhlaWdodCl7IC8vIHBhZGRpbmcgYm90dG9tXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC09IChxdWFkV2lkdGgqKHkrMStyb3ctaGVpZ2h0KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHgrY29sID49IHF1YWRXaWR0aCl7IC8vIHBhZGRpbmcgcmlnaHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLT0gKCh4K2NvbCkgLSBxdWFkV2lkdGggKzQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBpbWFnZURhdGFbIHArKyBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZyA9IGltYWdlRGF0YVsgcCsrIF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID0gaW1hZ2VEYXRhWyBwKysgXTtcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAvLyBjYWxjdWxhdGUgWVVWIHZhbHVlcyBkeW5hbWljYWxseVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgWURVW3Bvc109KCgoIDAuMjk5MDApKnIrKCAwLjU4NzAwKSpnKyggMC4xMTQwMCkqYikpLTEyODsgLy8tMHg4MFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVURVW3Bvc109KCgoLTAuMTY4NzQpKnIrKC0wLjMzMTI2KSpnKyggMC41MDAwMCkqYikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVkRVW3Bvc109KCgoIDAuNTAwMDApKnIrKC0wLjQxODY5KSpnKygtMC4wODEzMSkqYikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXNlIGxvb2t1cCB0YWJsZSAoc2xpZ2h0bHkgZmFzdGVyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgWURVW3Bvc10gPSAoKFJHQl9ZVVZfVEFCTEVbcl0gICAgICAgICAgICAgKyBSR0JfWVVWX1RBQkxFWyhnICsgIDI1Nik+PjBdICsgUkdCX1lVVl9UQUJMRVsoYiArICA1MTIpPj4wXSkgPj4gMTYpLTEyODtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVEVVtwb3NdID0gKChSR0JfWVVWX1RBQkxFWyhyICsgIDc2OCk+PjBdICsgUkdCX1lVVl9UQUJMRVsoZyArIDEwMjQpPj4wXSArIFJHQl9ZVVZfVEFCTEVbKGIgKyAxMjgwKT4+MF0pID4+IDE2KS0xMjg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWRFVbcG9zXSA9ICgoUkdCX1lVVl9UQUJMRVsociArIDEyODApPj4wXSArIFJHQl9ZVVZfVEFCTEVbKGcgKyAxNTM2KT4+MF0gKyBSR0JfWVVWX1RBQkxFWyhiICsgMTc5Mik+PjBdKSA+PiAxNiktMTI4O1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBEQ1kgPSBwcm9jZXNzRFUoWURVLCBmZHRibF9ZLCBEQ1ksIFlEQ19IVCwgWUFDX0hUKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRENVID0gcHJvY2Vzc0RVKFVEVSwgZmR0YmxfVVYsIERDVSwgVVZEQ19IVCwgVVZBQ19IVCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIERDViA9IHByb2Nlc3NEVShWRFUsIGZkdGJsX1VWLCBEQ1YsIFVWRENfSFQsIFVWQUNfSFQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4Kz0zMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB5Kz04O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRG8gdGhlIGJpdCBhbGlnbm1lbnQgb2YgdGhlIEVPSSBtYXJrZXJcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGJ5dGVwb3MgPj0gMCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGxiaXRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxiaXRzWzFdID0gYnl0ZXBvcysxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxsYml0c1swXSA9ICgxPDwoYnl0ZXBvcysxKSktMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVCaXRzKGZpbGxiaXRzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZVdvcmQoMHhGRkQ5KTsgLy9FT0lcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBqcGVnRGF0YVVyaSA9ICdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LCcgKyBidG9hKGJ5dGVvdXQuam9pbignJykpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgYnl0ZW91dCA9IFtdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYmVuY2htYXJraW5nXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdmFyIGR1cmF0aW9uID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSB0aW1lX3N0YXJ0O1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdFbmNvZGluZyB0aW1lOiAnKyBjdXJyZW50UXVhbGl0eSArICdtcycpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vXHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ganBlZ0RhdGFVcmlcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHNldFF1YWxpdHkocXVhbGl0eSl7XHJcbiAgICAgICAgICAgICAgICBpZiAocXVhbGl0eSA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcXVhbGl0eSA9IDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAocXVhbGl0eSA+IDEwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHF1YWxpdHkgPSAxMDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmKGN1cnJlbnRRdWFsaXR5ID09IHF1YWxpdHkpIHJldHVybiAvLyBkb24ndCByZWNhbGMgaWYgdW5jaGFuZ2VkXHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHZhciBzZiA9IDA7XHJcbiAgICAgICAgICAgICAgICBpZiAocXVhbGl0eSA8IDUwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2YgPSBNYXRoLmZsb29yKDUwMDAgLyBxdWFsaXR5KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2YgPSBNYXRoLmZsb29yKDIwMCAtIHF1YWxpdHkqMik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGluaXRRdWFudFRhYmxlcyhzZik7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVhbGl0eSA9IHF1YWxpdHk7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnUXVhbGl0eSBzZXQgdG86ICcrcXVhbGl0eSArJyUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGluaXQoKXtcclxuICAgICAgICAgICAgICAgIC8vIHZhciB0aW1lX3N0YXJ0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICBpZighcXVhbGl0eSkgcXVhbGl0eSA9IDUwO1xyXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRhYmxlc1xyXG4gICAgICAgICAgICAgICAgaW5pdENoYXJMb29rdXBUYWJsZSgpXHJcbiAgICAgICAgICAgICAgICBpbml0SHVmZm1hblRibCgpO1xyXG4gICAgICAgICAgICAgICAgaW5pdENhdGVnb3J5TnVtYmVyKCk7XHJcbiAgICAgICAgICAgICAgICBpbml0UkdCWVVWVGFibGUoKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgc2V0UXVhbGl0eShxdWFsaXR5KTtcclxuICAgICAgICAgICAgICAgIC8vIHZhciBkdXJhdGlvbiA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gdGltZV9zdGFydDtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdJbml0aWFsaXphdGlvbiAnKyBkdXJhdGlvbiArICdtcycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgaW5pdCgpO1xyXG4gICAgXHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIEpQRUdFbmNvZGVyLmVuY29kZSA9IGZ1bmN0aW9uKCBkYXRhLCBxdWFsaXR5ICkge1xyXG4gICAgICAgICAgICB2YXIgZW5jb2RlciA9IG5ldyBKUEVHRW5jb2RlciggcXVhbGl0eSApO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiBlbmNvZGVyLmVuY29kZSggZGF0YSApO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIHJldHVybiBKUEVHRW5jb2RlcjtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IEZpeCBhbmRyb2lkIGNhbnZhcy50b0RhdGFVcmwgYnVnLlxyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ3J1bnRpbWUvaHRtbDUvYW5kcm9pZHBhdGNoJyxbXHJcbiAgICAgICAgJ3J1bnRpbWUvaHRtbDUvdXRpbCcsXHJcbiAgICAgICAgJ3J1bnRpbWUvaHRtbDUvanBlZ2VuY29kZXInLFxyXG4gICAgICAgICdiYXNlJ1xyXG4gICAgXSwgZnVuY3Rpb24oIFV0aWwsIGVuY29kZXIsIEJhc2UgKSB7XHJcbiAgICAgICAgdmFyIG9yaWdpbiA9IFV0aWwuY2FudmFzVG9EYXRhVXJsLFxyXG4gICAgICAgICAgICBzdXBwb3J0SnBlZztcclxuICAgIFxyXG4gICAgICAgIFV0aWwuY2FudmFzVG9EYXRhVXJsID0gZnVuY3Rpb24oIGNhbnZhcywgdHlwZSwgcXVhbGl0eSApIHtcclxuICAgICAgICAgICAgdmFyIGN0eCwgdywgaCwgZnJhZ2VtZW50LCBwYXJ0cztcclxuICAgIFxyXG4gICAgICAgICAgICAvLyDpnZ5hbmRyb2lk5omL5py655u05o6l6Lez6L+H44CCXHJcbiAgICAgICAgICAgIGlmICggIUJhc2Uub3MuYW5kcm9pZCApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvcmlnaW4uYXBwbHkoIG51bGwsIGFyZ3VtZW50cyApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8g5qOA5rWL5piv5ZCmY2FudmFz5pSv5oyBanBlZ+WvvOWHuu+8jOagueaNruaVsOaNruagvOW8j+adpeWIpOaWreOAglxyXG4gICAgICAgICAgICAvLyBKUEVHIOWJjeS4pOS9jeWIhuWIq+aYr++8mjI1NSwgMjE2XHJcbiAgICAgICAgICAgIGlmICggdHlwZSA9PT0gJ2ltYWdlL2pwZWcnICYmIHR5cGVvZiBzdXBwb3J0SnBlZyA9PT0gJ3VuZGVmaW5lZCcgKSB7XHJcbiAgICAgICAgICAgICAgICBmcmFnZW1lbnQgPSBvcmlnaW4uYXBwbHkoIG51bGwsIGFyZ3VtZW50cyApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBwYXJ0cyA9IGZyYWdlbWVudC5zcGxpdCgnLCcpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIH5wYXJ0c1sgMCBdLmluZGV4T2YoJ2Jhc2U2NCcpICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZyYWdlbWVudCA9IGF0b2IoIHBhcnRzWyAxIF0gKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJhZ2VtZW50ID0gZGVjb2RlVVJJQ29tcG9uZW50KCBwYXJ0c1sgMSBdICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZyYWdlbWVudCA9IGZyYWdlbWVudC5zdWJzdHJpbmcoIDAsIDIgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgc3VwcG9ydEpwZWcgPSBmcmFnZW1lbnQuY2hhckNvZGVBdCggMCApID09PSAyNTUgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnJhZ2VtZW50LmNoYXJDb2RlQXQoIDEgKSA9PT0gMjE2O1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8g5Y+q5pyJ5ZyoYW5kcm9pZOeOr+Wig+S4i+aJjeS/ruWkjVxyXG4gICAgICAgICAgICBpZiAoIHR5cGUgPT09ICdpbWFnZS9qcGVnJyAmJiAhc3VwcG9ydEpwZWcgKSB7XHJcbiAgICAgICAgICAgICAgICB3ID0gY2FudmFzLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgaCA9IGNhbnZhcy5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVuY29kZXIuZW5jb2RlKCBjdHguZ2V0SW1hZ2VEYXRhKCAwLCAwLCB3LCBoICksIHF1YWxpdHkgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiBvcmlnaW4uYXBwbHkoIG51bGwsIGFyZ3VtZW50cyApO1xyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyBJbWFnZVxyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ3J1bnRpbWUvaHRtbDUvaW1hZ2UnLFtcclxuICAgICAgICAnYmFzZScsXHJcbiAgICAgICAgJ3J1bnRpbWUvaHRtbDUvcnVudGltZScsXHJcbiAgICAgICAgJ3J1bnRpbWUvaHRtbDUvdXRpbCdcclxuICAgIF0sIGZ1bmN0aW9uKCBCYXNlLCBIdG1sNVJ1bnRpbWUsIFV0aWwgKSB7XHJcbiAgICBcclxuICAgICAgICB2YXIgQkxBTksgPSAnZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFBRC9BQ3dBQUFBQUFRQUJBQUFDQURzJTNEJztcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBIdG1sNVJ1bnRpbWUucmVnaXN0ZXIoICdJbWFnZScsIHtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBmbGFnOiDmoIforrDmmK/lkKbooqvkv67mlLnov4fjgIJcclxuICAgICAgICAgICAgbW9kaWZpZWQ6IGZhbHNlLFxyXG4gICAgXHJcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICBpbWcgPSBuZXcgSW1hZ2UoKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgbWUuX2luZm8gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IG1lLnR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLndpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vZGVidWdnZXI7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyDor7vlj5ZtZXRh5L+h5oGv44CCXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhbWUuX21ldGFzICYmICdpbWFnZS9qcGVnJyA9PT0gbWUudHlwZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgVXRpbC5wYXJzZU1ldGEoIG1lLl9ibG9iLCBmdW5jdGlvbiggZXJyb3IsIHJldCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLl9tZXRhcyA9IHJldDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLm93bmVyLnRyaWdnZXIoJ2xvYWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWUub3duZXIudHJpZ2dlcignbG9hZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGltZy5vbmVycm9yID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWUub3duZXIudHJpZ2dlcignZXJyb3InKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG1lLl9pbWcgPSBpbWc7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgbG9hZEZyb21CbG9iOiBmdW5jdGlvbiggYmxvYiApIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZSA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgaW1nID0gbWUuX2ltZztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgbWUuX2Jsb2IgPSBibG9iO1xyXG4gICAgICAgICAgICAgICAgbWUudHlwZSA9IGJsb2IudHlwZTtcclxuICAgICAgICAgICAgICAgIGltZy5zcmMgPSBVdGlsLmNyZWF0ZU9iamVjdFVSTCggYmxvYi5nZXRTb3VyY2UoKSApO1xyXG4gICAgICAgICAgICAgICAgbWUub3duZXIub25jZSggJ2xvYWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBVdGlsLnJldm9rZU9iamVjdFVSTCggaW1nLnNyYyApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbiggd2lkdGgsIGhlaWdodCApIHtcclxuICAgICAgICAgICAgICAgIHZhciBjYW52YXMgPSB0aGlzLl9jYW52YXMgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuX2NhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVzaXplKCB0aGlzLl9pbWcsIGNhbnZhcywgd2lkdGgsIGhlaWdodCApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYmxvYiA9IG51bGw7ICAgIC8vIOayoeeUqOS6hu+8jOWPr+S7peWIoOaOieS6huOAglxyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RpZmllZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm93bmVyLnRyaWdnZXIoICdjb21wbGV0ZScsICdyZXNpemUnICk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgY3JvcDogZnVuY3Rpb24oIHgsIHksIHcsIGgsIHMgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3ZzID0gdGhpcy5fY2FudmFzIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLl9jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKSksXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cyA9IHRoaXMub3B0aW9ucyxcclxuICAgICAgICAgICAgICAgICAgICBpbWcgPSB0aGlzLl9pbWcsXHJcbiAgICAgICAgICAgICAgICAgICAgaXcgPSBpbWcubmF0dXJhbFdpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgIGloID0gaW1nLm5hdHVyYWxIZWlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JpZW50YXRpb24gPSB0aGlzLmdldE9yaWVudGF0aW9uKCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHMgPSBzIHx8IDE7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIHRvZG8g6Kej5YazIG9yaWVudGF0aW9uIOeahOmXrumimOOAglxyXG4gICAgICAgICAgICAgICAgLy8gdmFsdWVzIHRoYXQgcmVxdWlyZSA5MCBkZWdyZWUgcm90YXRpb25cclxuICAgICAgICAgICAgICAgIC8vIGlmICggflsgNSwgNiwgNywgOCBdLmluZGV4T2YoIG9yaWVudGF0aW9uICkgKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vICAgICBzd2l0Y2ggKCBvcmllbnRhdGlvbiApIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgdG1wID0geDtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHggPSB5O1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgeSA9IGl3ICogcyAtIHRtcCAtIHc7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBjb25zb2xlLmxvZyhpaCAqIHMsIHRtcCwgdylcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gICAgICh3IF49IGgsIGggXj0gdywgdyBePSBoKTtcclxuICAgICAgICAgICAgICAgIC8vIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgY3ZzLndpZHRoID0gdztcclxuICAgICAgICAgICAgICAgIGN2cy5oZWlnaHQgPSBoO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBvcHRzLnByZXNlcnZlSGVhZGVycyB8fCB0aGlzLl9yb3RhdGUyT3JpZW50YWlvbiggY3ZzLCBvcmllbnRhdGlvbiApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVySW1hZ2VUb0NhbnZhcyggY3ZzLCBpbWcsIC14LCAteSwgaXcgKiBzLCBpaCAqIHMgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fYmxvYiA9IG51bGw7ICAgIC8vIOayoeeUqOS6hu+8jOWPr+S7peWIoOaOieS6huOAglxyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RpZmllZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm93bmVyLnRyaWdnZXIoICdjb21wbGV0ZScsICdjcm9wJyApO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIGdldEFzQmxvYjogZnVuY3Rpb24oIHR5cGUgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmxvYiA9IHRoaXMuX2Jsb2IsXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cyA9IHRoaXMub3B0aW9ucyxcclxuICAgICAgICAgICAgICAgICAgICBjYW52YXM7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHR5cGUgPSB0eXBlIHx8IHRoaXMudHlwZTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gYmxvYumcgOimgemHjeaWsOeUn+aIkOOAglxyXG4gICAgICAgICAgICAgICAgaWYgKCB0aGlzLm1vZGlmaWVkIHx8IHRoaXMudHlwZSAhPT0gdHlwZSApIHtcclxuICAgICAgICAgICAgICAgICAgICBjYW52YXMgPSB0aGlzLl9jYW52YXM7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIHR5cGUgPT09ICdpbWFnZS9qcGVnJyApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBibG9iID0gVXRpbC5jYW52YXNUb0RhdGFVcmwoIGNhbnZhcywgdHlwZSwgb3B0cy5xdWFsaXR5ICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBvcHRzLnByZXNlcnZlSGVhZGVycyAmJiB0aGlzLl9tZXRhcyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX21ldGFzLmltYWdlSGVhZCApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvYiA9IFV0aWwuZGF0YVVSTDJBcnJheUJ1ZmZlciggYmxvYiApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvYiA9IFV0aWwudXBkYXRlSW1hZ2VIZWFkKCBibG9iLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tZXRhcy5pbWFnZUhlYWQgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2IgPSBVdGlsLmFycmF5QnVmZmVyVG9CbG9iKCBibG9iLCB0eXBlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmxvYjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2IgPSBVdGlsLmNhbnZhc1RvRGF0YVVybCggY2FudmFzLCB0eXBlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgYmxvYiA9IFV0aWwuZGF0YVVSTDJCbG9iKCBibG9iICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBibG9iO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIGdldEFzRGF0YVVybDogZnVuY3Rpb24oIHR5cGUgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdHlwZSA9IHR5cGUgfHwgdGhpcy50eXBlO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIHR5cGUgPT09ICdpbWFnZS9qcGVnJyApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gVXRpbC5jYW52YXNUb0RhdGFVcmwoIHRoaXMuX2NhbnZhcywgdHlwZSwgb3B0cy5xdWFsaXR5ICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYW52YXMudG9EYXRhVVJMKCB0eXBlICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgZ2V0T3JpZW50YXRpb246IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21ldGFzICYmIHRoaXMuX21ldGFzLmV4aWYgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWV0YXMuZXhpZi5nZXQoJ09yaWVudGF0aW9uJykgfHwgMTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBpbmZvOiBmdW5jdGlvbiggdmFsICkge1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBzZXR0ZXJcclxuICAgICAgICAgICAgICAgIGlmICggdmFsICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2luZm8gPSB2YWw7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIGdldHRlclxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2luZm87XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgbWV0YTogZnVuY3Rpb24oIHZhbCApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gc2V0dGVyXHJcbiAgICAgICAgICAgICAgICBpZiAoIHZhbCApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tZXRhcyA9IHZhbDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gZ2V0dGVyXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fbWV0YXM7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2FudmFzID0gdGhpcy5fY2FudmFzO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faW1nLm9ubG9hZCA9IG51bGw7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmICggY2FudmFzICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2xlYXJSZWN0KCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQgKTtcclxuICAgICAgICAgICAgICAgICAgICBjYW52YXMud2lkdGggPSBjYW52YXMuaGVpZ2h0ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYW52YXMgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDph4rmlL7lhoXlrZjjgILpnZ7luLjph43opoHvvIzlkKbliJnph4rmlL7kuI3kuoZpbWFnZeeahOWGheWtmOOAglxyXG4gICAgICAgICAgICAgICAgdGhpcy5faW1nLnNyYyA9IEJMQU5LO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faW1nID0gdGhpcy5fYmxvYiA9IG51bGw7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgX3Jlc2l6ZTogZnVuY3Rpb24oIGltZywgY3ZzLCB3aWR0aCwgaGVpZ2h0ICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9wdHMgPSB0aGlzLm9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICAgICAgbmF0dXJhbFdpZHRoID0gaW1nLndpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hdHVyYWxIZWlnaHQgPSBpbWcuaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uID0gdGhpcy5nZXRPcmllbnRhdGlvbigpLFxyXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlLCB3LCBoLCB4LCB5O1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyB2YWx1ZXMgdGhhdCByZXF1aXJlIDkwIGRlZ3JlZSByb3RhdGlvblxyXG4gICAgICAgICAgICAgICAgaWYgKCB+WyA1LCA2LCA3LCA4IF0uaW5kZXhPZiggb3JpZW50YXRpb24gKSApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOS6pOaNondpZHRoLCBoZWlnaHTnmoTlgLzjgIJcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aCBePSBoZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0IF49IHdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoIF49IGhlaWdodDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgc2NhbGUgPSBNYXRoWyBvcHRzLmNyb3AgPyAnbWF4JyA6ICdtaW4nIF0oIHdpZHRoIC8gbmF0dXJhbFdpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQgLyBuYXR1cmFsSGVpZ2h0ICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOS4jeWFgeiuuOaUvuWkp+OAglxyXG4gICAgICAgICAgICAgICAgb3B0cy5hbGxvd01hZ25pZnkgfHwgKHNjYWxlID0gTWF0aC5taW4oIDEsIHNjYWxlICkpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB3ID0gbmF0dXJhbFdpZHRoICogc2NhbGU7XHJcbiAgICAgICAgICAgICAgICBoID0gbmF0dXJhbEhlaWdodCAqIHNjYWxlO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIG9wdHMuY3JvcCApIHtcclxuICAgICAgICAgICAgICAgICAgICBjdnMud2lkdGggPSB3aWR0aDtcclxuICAgICAgICAgICAgICAgICAgICBjdnMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjdnMud2lkdGggPSB3O1xyXG4gICAgICAgICAgICAgICAgICAgIGN2cy5oZWlnaHQgPSBoO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB4ID0gKGN2cy53aWR0aCAtIHcpIC8gMjtcclxuICAgICAgICAgICAgICAgIHkgPSAoY3ZzLmhlaWdodCAtIGgpIC8gMjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgb3B0cy5wcmVzZXJ2ZUhlYWRlcnMgfHwgdGhpcy5fcm90YXRlMk9yaWVudGFpb24oIGN2cywgb3JpZW50YXRpb24gKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVySW1hZ2VUb0NhbnZhcyggY3ZzLCBpbWcsIHgsIHksIHcsIGggKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBfcm90YXRlMk9yaWVudGFpb246IGZ1bmN0aW9uKCBjYW52YXMsIG9yaWVudGF0aW9uICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gY2FudmFzLndpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCA9IGNhbnZhcy5oZWlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoIG9yaWVudGF0aW9uICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgODpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gd2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKCBvcmllbnRhdGlvbiApIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6ICAgIC8vIGhvcml6b250YWwgZmxpcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgudHJhbnNsYXRlKCB3aWR0aCwgMCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguc2NhbGUoIC0xLCAxICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiAgICAvLyAxODAgcm90YXRlIGxlZnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSggd2lkdGgsIGhlaWdodCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgucm90YXRlKCBNYXRoLlBJICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiAgICAvLyB2ZXJ0aWNhbCBmbGlwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoIDAsIGhlaWdodCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguc2NhbGUoIDEsIC0xICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OiAgICAvLyB2ZXJ0aWNhbCBmbGlwICsgOTAgcm90YXRlIHJpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5yb3RhdGUoIDAuNSAqIE1hdGguUEkgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnNjYWxlKCAxLCAtMSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjogICAgLy8gOTAgcm90YXRlIHJpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5yb3RhdGUoIDAuNSAqIE1hdGguUEkgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSggMCwgLWhlaWdodCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNzogICAgLy8gaG9yaXpvbnRhbCBmbGlwICsgOTAgcm90YXRlIHJpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5yb3RhdGUoIDAuNSAqIE1hdGguUEkgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSggd2lkdGgsIC1oZWlnaHQgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnNjYWxlKCAtMSwgMSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgODogICAgLy8gOTAgcm90YXRlIGxlZnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnJvdGF0ZSggLTAuNSAqIE1hdGguUEkgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSggLXdpZHRoLCAwICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9zdG9taXRhL2lvcy1pbWFnZWZpbGUtbWVnYXBpeGVsL1xyXG4gICAgICAgICAgICAvLyBibG9iL21hc3Rlci9zcmMvbWVnYXBpeC1pbWFnZS5qc1xyXG4gICAgICAgICAgICBfcmVuZGVySW1hZ2VUb0NhbnZhczogKGZ1bmN0aW9uKCkge1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzkuI3mmK9pb3MsIOS4jemcgOimgei/meS5iOWkjeadgu+8gVxyXG4gICAgICAgICAgICAgICAgaWYgKCAhQmFzZS5vcy5pb3MgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCBjYW52YXMgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcmdzID0gQmFzZS5zbGljZSggYXJndW1lbnRzLCAxICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlLmFwcGx5KCBjdHgsIGFyZ3MgKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICAgICAqIERldGVjdGluZyB2ZXJ0aWNhbCBzcXVhc2ggaW4gbG9hZGVkIGltYWdlLlxyXG4gICAgICAgICAgICAgICAgICogRml4ZXMgYSBidWcgd2hpY2ggc3F1YXNoIGltYWdlIHZlcnRpY2FsbHkgd2hpbGUgZHJhd2luZyBpbnRvXHJcbiAgICAgICAgICAgICAgICAgKiBjYW52YXMgZm9yIHNvbWUgaW1hZ2VzLlxyXG4gICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBkZXRlY3RWZXJ0aWNhbFNxdWFzaCggaW1nLCBpdywgaWggKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3kgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleSA9IGloLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBweSA9IGloLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLCBhbHBoYSwgcmF0aW87XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IGloO1xyXG4gICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoIGltZywgMCwgMCApO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKCAwLCAwLCAxLCBpaCApLmRhdGE7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBzZWFyY2ggaW1hZ2UgZWRnZSBwaXhlbCBwb3NpdGlvbiBpbiBjYXNlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaXQgaXMgc3F1YXNoZWQgdmVydGljYWxseS5cclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoIHB5ID4gc3kgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFscGhhID0gZGF0YVsgKHB5IC0gMSkgKiA0ICsgMyBdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggYWxwaGEgPT09IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleSA9IHB5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3kgPSBweTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHB5ID0gKGV5ICsgc3kpID4+IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgcmF0aW8gPSAocHkgLyBpaCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChyYXRpbyA9PT0gMCkgPyAxIDogcmF0aW87XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIGZpeCBpZTcgYnVnXHJcbiAgICAgICAgICAgICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzExOTI5MDk5L1xyXG4gICAgICAgICAgICAgICAgLy8gaHRtbDUtY2FudmFzLWRyYXdpbWFnZS1yYXRpby1idWctaW9zXHJcbiAgICAgICAgICAgICAgICBpZiAoIEJhc2Uub3MuaW9zID49IDcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCBjYW52YXMsIGltZywgeCwgeSwgdywgaCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl3ID0gaW1nLm5hdHVyYWxXaWR0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGloID0gaW1nLm5hdHVyYWxIZWlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0U3F1YXNoUmF0aW8gPSBkZXRlY3RWZXJ0aWNhbFNxdWFzaCggaW1nLCBpdywgaWggKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FudmFzLmdldENvbnRleHQoJzJkJykuZHJhd0ltYWdlKCBpbWcsIDAsIDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXcgKiB2ZXJ0U3F1YXNoUmF0aW8sIGloICogdmVydFNxdWFzaFJhdGlvLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHgsIHksIHcsIGggKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICAgICAqIERldGVjdCBzdWJzYW1wbGluZyBpbiBsb2FkZWQgaW1hZ2UuXHJcbiAgICAgICAgICAgICAgICAgKiBJbiBpT1MsIGxhcmdlciBpbWFnZXMgdGhhbiAyTSBwaXhlbHMgbWF5IGJlXHJcbiAgICAgICAgICAgICAgICAgKiBzdWJzYW1wbGVkIGluIHJlbmRlcmluZy5cclxuICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZGV0ZWN0U3Vic2FtcGxpbmcoIGltZyApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaXcgPSBpbWcubmF0dXJhbFdpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpaCA9IGltZy5uYXR1cmFsSGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMsIGN0eDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHN1YnNhbXBsaW5nIG1heSBoYXBwZW4gb3Zlcm1lZ2FwaXhlbCBpbWFnZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggaXcgKiBpaCA+IDEwMjQgKiAxMDI0ICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gY2FudmFzLmhlaWdodCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKCBpbWcsIC1pdyArIDEsIDAgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzdWJzYW1wbGVkIGltYWdlIGJlY29tZXMgaGFsZiBzbWFsbGVyIGluIHJlbmRlcmluZyBzaXplLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayBhbHBoYSBjaGFubmVsIHZhbHVlIHRvIGNvbmZpcm0gaW1hZ2UgaXMgY292ZXJpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWRnZSBwaXhlbCBvciBub3QuIGlmIGFscGhhIHZhbHVlIGlzIDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW1hZ2UgaXMgbm90IGNvdmVyaW5nLCBoZW5jZSBzdWJzYW1wbGVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3R4LmdldEltYWdlRGF0YSggMCwgMCwgMSwgMSApLmRhdGFbIDMgXSA9PT0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiggY2FudmFzLCBpbWcsIHgsIHksIHdpZHRoLCBoZWlnaHQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl3ID0gaW1nLm5hdHVyYWxXaWR0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWggPSBpbWcubmF0dXJhbEhlaWdodCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNhbXBsZWQgPSBkZXRlY3RTdWJzYW1wbGluZyggaW1nICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvU3F1YXNoID0gdGhpcy50eXBlID09PSAnaW1hZ2UvanBlZycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQgPSAxMDI0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzeSA9IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGR5ID0gMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG1wQ2FudmFzLCB0bXBDdHgsIHZlcnRTcXVhc2hSYXRpbywgZHcsIGRoLCBzeCwgZHg7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIHN1YnNhbXBsZWQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl3IC89IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGloIC89IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LnNhdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB0bXBDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgICAgICAgICAgICAgICAgICB0bXBDYW52YXMud2lkdGggPSB0bXBDYW52YXMuaGVpZ2h0ID0gZDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHRtcEN0eCA9IHRtcENhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZlcnRTcXVhc2hSYXRpbyA9IGRvU3F1YXNoID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldGVjdFZlcnRpY2FsU3F1YXNoKCBpbWcsIGl3LCBpaCApIDogMTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGR3ID0gTWF0aC5jZWlsKCBkICogd2lkdGggLyBpdyApO1xyXG4gICAgICAgICAgICAgICAgICAgIGRoID0gTWF0aC5jZWlsKCBkICogaGVpZ2h0IC8gaWggLyB2ZXJ0U3F1YXNoUmF0aW8gKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICggc3kgPCBpaCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3ggPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkeCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICggc3ggPCBpdyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcEN0eC5jbGVhclJlY3QoIDAsIDAsIGQsIGQgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcEN0eC5kcmF3SW1hZ2UoIGltZywgLXN4LCAtc3kgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoIHRtcENhbnZhcywgMCwgMCwgZCwgZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeCArIGR4LCB5ICsgZHksIGR3LCBkaCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ggKz0gZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR4ICs9IGR3O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN5ICs9IGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGR5ICs9IGRoO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRtcENhbnZhcyA9IHRtcEN0eCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KSgpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IFRyYW5zcG9ydFxyXG4gICAgICogQHRvZG8g5pSv5oyBY2h1bmtlZOS8oOi+k++8jOS8mOWKv++8mlxyXG4gICAgICog5Y+v5Lul5bCG5aSn5paH5Lu25YiG5oiQ5bCP5Z2X77yM5oyo5Liq5Lyg6L6T77yM5Y+v5Lul5o+Q6auY5aSn5paH5Lu25oiQ5Yqf546H77yM5b2T5aSx6LSl55qE5pe25YCZ77yM5Lmf5Y+q6ZyA6KaB6YeN5Lyg6YKj5bCP6YOo5YiG77yMXHJcbiAgICAgKiDogIzkuI3pnIDopoHph43lpLTlho3kvKDkuIDmrKHjgILlj6blpJbmlq3ngrnnu63kvKDkuZ/pnIDopoHnlKhjaHVua2Vk5pa55byP44CCXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgncnVudGltZS9odG1sNS90cmFuc3BvcnQnLFtcclxuICAgICAgICAnYmFzZScsXHJcbiAgICAgICAgJ3J1bnRpbWUvaHRtbDUvcnVudGltZSdcclxuICAgIF0sIGZ1bmN0aW9uKCBCYXNlLCBIdG1sNVJ1bnRpbWUgKSB7XHJcbiAgICBcclxuICAgICAgICB2YXIgbm9vcCA9IEJhc2Uubm9vcCxcclxuICAgICAgICAgICAgJCA9IEJhc2UuJDtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBIdG1sNVJ1bnRpbWUucmVnaXN0ZXIoICdUcmFuc3BvcnQnLCB7XHJcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc3RhdHVzID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Jlc3BvbnNlID0gbnVsbDtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBzZW5kOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvd25lciA9IHRoaXMub3duZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cyA9IHRoaXMub3B0aW9ucyxcclxuICAgICAgICAgICAgICAgICAgICB4aHIgPSB0aGlzLl9pbml0QWpheCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGJsb2IgPSBvd25lci5fYmxvYixcclxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXIgPSBvcHRzLnNlcnZlcixcclxuICAgICAgICAgICAgICAgICAgICBmb3JtRGF0YSwgYmluYXJ5LCBmcjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCBvcHRzLnNlbmRBc0JpbmFyeSApIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXIgKz0gKC9cXD8vLnRlc3QoIHNlcnZlciApID8gJyYnIDogJz8nKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLnBhcmFtKCBvd25lci5fZm9ybURhdGEgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGJpbmFyeSA9IGJsb2IuZ2V0U291cmNlKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKCBvd25lci5fZm9ybURhdGEsIGZ1bmN0aW9uKCBrLCB2ICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoIGssIHYgKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCggb3B0cy5maWxlVmFsLCBibG9iLmdldFNvdXJjZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0cy5maWxlbmFtZSB8fCBvd25lci5fZm9ybURhdGEubmFtZSB8fCAnJyApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIG9wdHMud2l0aENyZWRlbnRpYWxzICYmICd3aXRoQ3JlZGVudGlhbHMnIGluIHhociApIHtcclxuICAgICAgICAgICAgICAgICAgICB4aHIub3Blbiggb3B0cy5tZXRob2QsIHNlcnZlciwgdHJ1ZSApO1xyXG4gICAgICAgICAgICAgICAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB4aHIub3Blbiggb3B0cy5tZXRob2QsIHNlcnZlciApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRSZXF1ZXN0SGVhZGVyKCB4aHIsIG9wdHMuaGVhZGVycyApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIGJpbmFyeSApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDlvLrliLborr7nva7miJAgY29udGVudC10eXBlIOS4uuaWh+S7tua1geOAglxyXG4gICAgICAgICAgICAgICAgICAgIHhoci5vdmVycmlkZU1pbWVUeXBlICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIub3ZlcnJpZGVNaW1lVHlwZSgnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJyk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBhbmRyb2lk55u05o6l5Y+R6YCBYmxvYuS8muWvvOiHtOacjeWKoeerr+aOpeaUtuWIsOeahOaYr+epuuaWh+S7tuOAglxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGJ1Z+ivpuaDheOAglxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvYW5kcm9pZC9pc3N1ZXMvZGV0YWlsP2lkPTM5ODgyXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5omA5Lul5YWI55SoZmlsZVJlYWRlcuivu+WPluWHuuadpeWGjemAmui/h2FycmF5YnVmZmVy55qE5pa55byP5Y+R6YCB44CCXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBCYXNlLm9zLmFuZHJvaWQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhoci5zZW5kKCB0aGlzLnJlc3VsdCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnIgPSBmci5vbmxvYWQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyLnJlYWRBc0FycmF5QnVmZmVyKCBiaW5hcnkgKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4aHIuc2VuZCggYmluYXJ5ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB4aHIuc2VuZCggZm9ybURhdGEgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBnZXRSZXNwb25zZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVzcG9uc2U7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgZ2V0UmVzcG9uc2VBc0pzb246IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3BhcnNlSnNvbiggdGhpcy5fcmVzcG9uc2UgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBnZXRTdGF0dXM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXR1cztcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBhYm9ydDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeGhyID0gdGhpcy5feGhyO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIHhociApIHtcclxuICAgICAgICAgICAgICAgICAgICB4aHIudXBsb2FkLm9ucHJvZ3Jlc3MgPSBub29wO1xyXG4gICAgICAgICAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBub29wO1xyXG4gICAgICAgICAgICAgICAgICAgIHhoci5hYm9ydCgpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5feGhyID0geGhyID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWJvcnQoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBfaW5pdEFqYXg6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKSxcclxuICAgICAgICAgICAgICAgICAgICBvcHRzID0gdGhpcy5vcHRpb25zO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIG9wdHMud2l0aENyZWRlbnRpYWxzICYmICEoJ3dpdGhDcmVkZW50aWFscycgaW4geGhyKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YgWERvbWFpblJlcXVlc3QgIT09ICd1bmRlZmluZWQnICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHhociA9IG5ldyBYRG9tYWluUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB4aHIudXBsb2FkLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbiggZSApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGVyY2VudGFnZSA9IDA7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGUubGVuZ3RoQ29tcHV0YWJsZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGVyY2VudGFnZSA9IGUubG9hZGVkIC8gZS50b3RhbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWUudHJpZ2dlciggJ3Byb2dyZXNzJywgcGVyY2VudGFnZSApO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB4aHIucmVhZHlTdGF0ZSAhPT0gNCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHhoci51cGxvYWQub25wcm9ncmVzcyA9IG5vb3A7XHJcbiAgICAgICAgICAgICAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG5vb3A7XHJcbiAgICAgICAgICAgICAgICAgICAgbWUuX3hociA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgbWUuX3N0YXR1cyA9IHhoci5zdGF0dXM7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIHhoci5zdGF0dXMgPj0gMjAwICYmIHhoci5zdGF0dXMgPCAzMDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lLl9yZXNwb25zZSA9IHhoci5yZXNwb25zZVRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtZS50cmlnZ2VyKCdsb2FkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggeGhyLnN0YXR1cyA+PSA1MDAgJiYgeGhyLnN0YXR1cyA8IDYwMCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWUuX3Jlc3BvbnNlID0geGhyLnJlc3BvbnNlVGV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lLnRyaWdnZXIoICdlcnJvcicsICdzZXJ2ZXInICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWUudHJpZ2dlciggJ2Vycm9yJywgbWUuX3N0YXR1cyA/ICdodHRwJyA6ICdhYm9ydCcgKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG1lLl94aHIgPSB4aHI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geGhyO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIF9zZXRSZXF1ZXN0SGVhZGVyOiBmdW5jdGlvbiggeGhyLCBoZWFkZXJzICkge1xyXG4gICAgICAgICAgICAgICAgJC5lYWNoKCBoZWFkZXJzLCBmdW5jdGlvbigga2V5LCB2YWwgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoIGtleSwgdmFsICk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBfcGFyc2VKc29uOiBmdW5jdGlvbiggc3RyICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGpzb247XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAganNvbiA9IEpTT04ucGFyc2UoIHN0ciApO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoIGV4ICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGpzb24gPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGpzb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3ICBUcmFuc3BvcnQgZmxhc2jlrp7njrBcclxuICAgICAqL1xyXG4gICAgZGVmaW5lKCdydW50aW1lL2h0bWw1L21kNScsW1xyXG4gICAgICAgICdydW50aW1lL2h0bWw1L3J1bnRpbWUnXHJcbiAgICBdLCBmdW5jdGlvbiggRmxhc2hSdW50aW1lICkge1xyXG4gICAgXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBGYXN0ZXN0IG1kNSBpbXBsZW1lbnRhdGlvbiBhcm91bmQgKEpLTSBtZDUpXHJcbiAgICAgICAgICogQ3JlZGl0czogSm9zZXBoIE15ZXJzXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc2VlIGh0dHA6Ly93d3cubXllcnNkYWlseS5vcmcvam9zZXBoL2phdmFzY3JpcHQvbWQ1LXRleHQuaHRtbFxyXG4gICAgICAgICAqIEBzZWUgaHR0cDovL2pzcGVyZi5jb20vbWQ1LXNob290b3V0LzdcclxuICAgICAgICAgKi9cclxuICAgIFxyXG4gICAgICAgIC8qIHRoaXMgZnVuY3Rpb24gaXMgbXVjaCBmYXN0ZXIsXHJcbiAgICAgICAgICBzbyBpZiBwb3NzaWJsZSB3ZSB1c2UgaXQuIFNvbWUgSUVzXHJcbiAgICAgICAgICBhcmUgdGhlIG9ubHkgb25lcyBJIGtub3cgb2YgdGhhdFxyXG4gICAgICAgICAgbmVlZCB0aGUgaWRpb3RpYyBzZWNvbmQgZnVuY3Rpb24sXHJcbiAgICAgICAgICBnZW5lcmF0ZWQgYnkgYW4gaWYgY2xhdXNlLiAgKi9cclxuICAgICAgICB2YXIgYWRkMzIgPSBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICByZXR1cm4gKGEgKyBiKSAmIDB4RkZGRkZGRkY7XHJcbiAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgIGNtbiA9IGZ1bmN0aW9uIChxLCBhLCBiLCB4LCBzLCB0KSB7XHJcbiAgICAgICAgICAgIGEgPSBhZGQzMihhZGQzMihhLCBxKSwgYWRkMzIoeCwgdCkpO1xyXG4gICAgICAgICAgICByZXR1cm4gYWRkMzIoKGEgPDwgcykgfCAoYSA+Pj4gKDMyIC0gcykpLCBiKTtcclxuICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgZmYgPSBmdW5jdGlvbiAoYSwgYiwgYywgZCwgeCwgcywgdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gY21uKChiICYgYykgfCAoKH5iKSAmIGQpLCBhLCBiLCB4LCBzLCB0KTtcclxuICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgZ2cgPSBmdW5jdGlvbiAoYSwgYiwgYywgZCwgeCwgcywgdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gY21uKChiICYgZCkgfCAoYyAmICh+ZCkpLCBhLCBiLCB4LCBzLCB0KTtcclxuICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgaGggPSBmdW5jdGlvbiAoYSwgYiwgYywgZCwgeCwgcywgdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gY21uKGIgXiBjIF4gZCwgYSwgYiwgeCwgcywgdCk7XHJcbiAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgIGlpID0gZnVuY3Rpb24gKGEsIGIsIGMsIGQsIHgsIHMsIHQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNtbihjIF4gKGIgfCAofmQpKSwgYSwgYiwgeCwgcywgdCk7XHJcbiAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgIG1kNWN5Y2xlID0gZnVuY3Rpb24gKHgsIGspIHtcclxuICAgICAgICAgICAgdmFyIGEgPSB4WzBdLFxyXG4gICAgICAgICAgICAgICAgYiA9IHhbMV0sXHJcbiAgICAgICAgICAgICAgICBjID0geFsyXSxcclxuICAgICAgICAgICAgICAgIGQgPSB4WzNdO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGEgPSBmZihhLCBiLCBjLCBkLCBrWzBdLCA3LCAtNjgwODc2OTM2KTtcclxuICAgICAgICAgICAgZCA9IGZmKGQsIGEsIGIsIGMsIGtbMV0sIDEyLCAtMzg5NTY0NTg2KTtcclxuICAgICAgICAgICAgYyA9IGZmKGMsIGQsIGEsIGIsIGtbMl0sIDE3LCA2MDYxMDU4MTkpO1xyXG4gICAgICAgICAgICBiID0gZmYoYiwgYywgZCwgYSwga1szXSwgMjIsIC0xMDQ0NTI1MzMwKTtcclxuICAgICAgICAgICAgYSA9IGZmKGEsIGIsIGMsIGQsIGtbNF0sIDcsIC0xNzY0MTg4OTcpO1xyXG4gICAgICAgICAgICBkID0gZmYoZCwgYSwgYiwgYywga1s1XSwgMTIsIDEyMDAwODA0MjYpO1xyXG4gICAgICAgICAgICBjID0gZmYoYywgZCwgYSwgYiwga1s2XSwgMTcsIC0xNDczMjMxMzQxKTtcclxuICAgICAgICAgICAgYiA9IGZmKGIsIGMsIGQsIGEsIGtbN10sIDIyLCAtNDU3MDU5ODMpO1xyXG4gICAgICAgICAgICBhID0gZmYoYSwgYiwgYywgZCwga1s4XSwgNywgMTc3MDAzNTQxNik7XHJcbiAgICAgICAgICAgIGQgPSBmZihkLCBhLCBiLCBjLCBrWzldLCAxMiwgLTE5NTg0MTQ0MTcpO1xyXG4gICAgICAgICAgICBjID0gZmYoYywgZCwgYSwgYiwga1sxMF0sIDE3LCAtNDIwNjMpO1xyXG4gICAgICAgICAgICBiID0gZmYoYiwgYywgZCwgYSwga1sxMV0sIDIyLCAtMTk5MDQwNDE2Mik7XHJcbiAgICAgICAgICAgIGEgPSBmZihhLCBiLCBjLCBkLCBrWzEyXSwgNywgMTgwNDYwMzY4Mik7XHJcbiAgICAgICAgICAgIGQgPSBmZihkLCBhLCBiLCBjLCBrWzEzXSwgMTIsIC00MDM0MTEwMSk7XHJcbiAgICAgICAgICAgIGMgPSBmZihjLCBkLCBhLCBiLCBrWzE0XSwgMTcsIC0xNTAyMDAyMjkwKTtcclxuICAgICAgICAgICAgYiA9IGZmKGIsIGMsIGQsIGEsIGtbMTVdLCAyMiwgMTIzNjUzNTMyOSk7XHJcbiAgICBcclxuICAgICAgICAgICAgYSA9IGdnKGEsIGIsIGMsIGQsIGtbMV0sIDUsIC0xNjU3OTY1MTApO1xyXG4gICAgICAgICAgICBkID0gZ2coZCwgYSwgYiwgYywga1s2XSwgOSwgLTEwNjk1MDE2MzIpO1xyXG4gICAgICAgICAgICBjID0gZ2coYywgZCwgYSwgYiwga1sxMV0sIDE0LCA2NDM3MTc3MTMpO1xyXG4gICAgICAgICAgICBiID0gZ2coYiwgYywgZCwgYSwga1swXSwgMjAsIC0zNzM4OTczMDIpO1xyXG4gICAgICAgICAgICBhID0gZ2coYSwgYiwgYywgZCwga1s1XSwgNSwgLTcwMTU1ODY5MSk7XHJcbiAgICAgICAgICAgIGQgPSBnZyhkLCBhLCBiLCBjLCBrWzEwXSwgOSwgMzgwMTYwODMpO1xyXG4gICAgICAgICAgICBjID0gZ2coYywgZCwgYSwgYiwga1sxNV0sIDE0LCAtNjYwNDc4MzM1KTtcclxuICAgICAgICAgICAgYiA9IGdnKGIsIGMsIGQsIGEsIGtbNF0sIDIwLCAtNDA1NTM3ODQ4KTtcclxuICAgICAgICAgICAgYSA9IGdnKGEsIGIsIGMsIGQsIGtbOV0sIDUsIDU2ODQ0NjQzOCk7XHJcbiAgICAgICAgICAgIGQgPSBnZyhkLCBhLCBiLCBjLCBrWzE0XSwgOSwgLTEwMTk4MDM2OTApO1xyXG4gICAgICAgICAgICBjID0gZ2coYywgZCwgYSwgYiwga1szXSwgMTQsIC0xODczNjM5NjEpO1xyXG4gICAgICAgICAgICBiID0gZ2coYiwgYywgZCwgYSwga1s4XSwgMjAsIDExNjM1MzE1MDEpO1xyXG4gICAgICAgICAgICBhID0gZ2coYSwgYiwgYywgZCwga1sxM10sIDUsIC0xNDQ0NjgxNDY3KTtcclxuICAgICAgICAgICAgZCA9IGdnKGQsIGEsIGIsIGMsIGtbMl0sIDksIC01MTQwMzc4NCk7XHJcbiAgICAgICAgICAgIGMgPSBnZyhjLCBkLCBhLCBiLCBrWzddLCAxNCwgMTczNTMyODQ3Myk7XHJcbiAgICAgICAgICAgIGIgPSBnZyhiLCBjLCBkLCBhLCBrWzEyXSwgMjAsIC0xOTI2NjA3NzM0KTtcclxuICAgIFxyXG4gICAgICAgICAgICBhID0gaGgoYSwgYiwgYywgZCwga1s1XSwgNCwgLTM3ODU1OCk7XHJcbiAgICAgICAgICAgIGQgPSBoaChkLCBhLCBiLCBjLCBrWzhdLCAxMSwgLTIwMjI1NzQ0NjMpO1xyXG4gICAgICAgICAgICBjID0gaGgoYywgZCwgYSwgYiwga1sxMV0sIDE2LCAxODM5MDMwNTYyKTtcclxuICAgICAgICAgICAgYiA9IGhoKGIsIGMsIGQsIGEsIGtbMTRdLCAyMywgLTM1MzA5NTU2KTtcclxuICAgICAgICAgICAgYSA9IGhoKGEsIGIsIGMsIGQsIGtbMV0sIDQsIC0xNTMwOTkyMDYwKTtcclxuICAgICAgICAgICAgZCA9IGhoKGQsIGEsIGIsIGMsIGtbNF0sIDExLCAxMjcyODkzMzUzKTtcclxuICAgICAgICAgICAgYyA9IGhoKGMsIGQsIGEsIGIsIGtbN10sIDE2LCAtMTU1NDk3NjMyKTtcclxuICAgICAgICAgICAgYiA9IGhoKGIsIGMsIGQsIGEsIGtbMTBdLCAyMywgLTEwOTQ3MzA2NDApO1xyXG4gICAgICAgICAgICBhID0gaGgoYSwgYiwgYywgZCwga1sxM10sIDQsIDY4MTI3OTE3NCk7XHJcbiAgICAgICAgICAgIGQgPSBoaChkLCBhLCBiLCBjLCBrWzBdLCAxMSwgLTM1ODUzNzIyMik7XHJcbiAgICAgICAgICAgIGMgPSBoaChjLCBkLCBhLCBiLCBrWzNdLCAxNiwgLTcyMjUyMTk3OSk7XHJcbiAgICAgICAgICAgIGIgPSBoaChiLCBjLCBkLCBhLCBrWzZdLCAyMywgNzYwMjkxODkpO1xyXG4gICAgICAgICAgICBhID0gaGgoYSwgYiwgYywgZCwga1s5XSwgNCwgLTY0MDM2NDQ4Nyk7XHJcbiAgICAgICAgICAgIGQgPSBoaChkLCBhLCBiLCBjLCBrWzEyXSwgMTEsIC00MjE4MTU4MzUpO1xyXG4gICAgICAgICAgICBjID0gaGgoYywgZCwgYSwgYiwga1sxNV0sIDE2LCA1MzA3NDI1MjApO1xyXG4gICAgICAgICAgICBiID0gaGgoYiwgYywgZCwgYSwga1syXSwgMjMsIC05OTUzMzg2NTEpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGEgPSBpaShhLCBiLCBjLCBkLCBrWzBdLCA2LCAtMTk4NjMwODQ0KTtcclxuICAgICAgICAgICAgZCA9IGlpKGQsIGEsIGIsIGMsIGtbN10sIDEwLCAxMTI2ODkxNDE1KTtcclxuICAgICAgICAgICAgYyA9IGlpKGMsIGQsIGEsIGIsIGtbMTRdLCAxNSwgLTE0MTYzNTQ5MDUpO1xyXG4gICAgICAgICAgICBiID0gaWkoYiwgYywgZCwgYSwga1s1XSwgMjEsIC01NzQzNDA1NSk7XHJcbiAgICAgICAgICAgIGEgPSBpaShhLCBiLCBjLCBkLCBrWzEyXSwgNiwgMTcwMDQ4NTU3MSk7XHJcbiAgICAgICAgICAgIGQgPSBpaShkLCBhLCBiLCBjLCBrWzNdLCAxMCwgLTE4OTQ5ODY2MDYpO1xyXG4gICAgICAgICAgICBjID0gaWkoYywgZCwgYSwgYiwga1sxMF0sIDE1LCAtMTA1MTUyMyk7XHJcbiAgICAgICAgICAgIGIgPSBpaShiLCBjLCBkLCBhLCBrWzFdLCAyMSwgLTIwNTQ5MjI3OTkpO1xyXG4gICAgICAgICAgICBhID0gaWkoYSwgYiwgYywgZCwga1s4XSwgNiwgMTg3MzMxMzM1OSk7XHJcbiAgICAgICAgICAgIGQgPSBpaShkLCBhLCBiLCBjLCBrWzE1XSwgMTAsIC0zMDYxMTc0NCk7XHJcbiAgICAgICAgICAgIGMgPSBpaShjLCBkLCBhLCBiLCBrWzZdLCAxNSwgLTE1NjAxOTgzODApO1xyXG4gICAgICAgICAgICBiID0gaWkoYiwgYywgZCwgYSwga1sxM10sIDIxLCAxMzA5MTUxNjQ5KTtcclxuICAgICAgICAgICAgYSA9IGlpKGEsIGIsIGMsIGQsIGtbNF0sIDYsIC0xNDU1MjMwNzApO1xyXG4gICAgICAgICAgICBkID0gaWkoZCwgYSwgYiwgYywga1sxMV0sIDEwLCAtMTEyMDIxMDM3OSk7XHJcbiAgICAgICAgICAgIGMgPSBpaShjLCBkLCBhLCBiLCBrWzJdLCAxNSwgNzE4Nzg3MjU5KTtcclxuICAgICAgICAgICAgYiA9IGlpKGIsIGMsIGQsIGEsIGtbOV0sIDIxLCAtMzQzNDg1NTUxKTtcclxuICAgIFxyXG4gICAgICAgICAgICB4WzBdID0gYWRkMzIoYSwgeFswXSk7XHJcbiAgICAgICAgICAgIHhbMV0gPSBhZGQzMihiLCB4WzFdKTtcclxuICAgICAgICAgICAgeFsyXSA9IGFkZDMyKGMsIHhbMl0pO1xyXG4gICAgICAgICAgICB4WzNdID0gYWRkMzIoZCwgeFszXSk7XHJcbiAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgIC8qIHRoZXJlIG5lZWRzIHRvIGJlIHN1cHBvcnQgZm9yIFVuaWNvZGUgaGVyZSxcclxuICAgICAgICAgICAqIHVubGVzcyB3ZSBwcmV0ZW5kIHRoYXQgd2UgY2FuIHJlZGVmaW5lIHRoZSBNRC01XHJcbiAgICAgICAgICAgKiBhbGdvcml0aG0gZm9yIG11bHRpLWJ5dGUgY2hhcmFjdGVycyAocGVyaGFwc1xyXG4gICAgICAgICAgICogYnkgYWRkaW5nIGV2ZXJ5IGZvdXIgMTYtYml0IGNoYXJhY3RlcnMgYW5kXHJcbiAgICAgICAgICAgKiBzaG9ydGVuaW5nIHRoZSBzdW0gdG8gMzIgYml0cykuIE90aGVyd2lzZVxyXG4gICAgICAgICAgICogSSBzdWdnZXN0IHBlcmZvcm1pbmcgTUQtNSBhcyBpZiBldmVyeSBjaGFyYWN0ZXJcclxuICAgICAgICAgICAqIHdhcyB0d28gYnl0ZXMtLWUuZy4sIDAwNDAgMDAyNSA9IEAlLS1idXQgdGhlblxyXG4gICAgICAgICAgICogaG93IHdpbGwgYW4gb3JkaW5hcnkgTUQtNSBzdW0gYmUgbWF0Y2hlZD9cclxuICAgICAgICAgICAqIFRoZXJlIGlzIG5vIHdheSB0byBzdGFuZGFyZGl6ZSB0ZXh0IHRvIHNvbWV0aGluZ1xyXG4gICAgICAgICAgICogbGlrZSBVVEYtOCBiZWZvcmUgdHJhbnNmb3JtYXRpb247IHNwZWVkIGNvc3QgaXNcclxuICAgICAgICAgICAqIHV0dGVybHkgcHJvaGliaXRpdmUuIFRoZSBKYXZhU2NyaXB0IHN0YW5kYXJkXHJcbiAgICAgICAgICAgKiBpdHNlbGYgbmVlZHMgdG8gbG9vayBhdCB0aGlzOiBpdCBzaG91bGQgc3RhcnRcclxuICAgICAgICAgICAqIHByb3ZpZGluZyBhY2Nlc3MgdG8gc3RyaW5ncyBhcyBwcmVmb3JtZWQgVVRGLThcclxuICAgICAgICAgICAqIDgtYml0IHVuc2lnbmVkIHZhbHVlIGFycmF5cy5cclxuICAgICAgICAgICAqL1xyXG4gICAgICAgIG1kNWJsayA9IGZ1bmN0aW9uIChzKSB7XHJcbiAgICAgICAgICAgIHZhciBtZDVibGtzID0gW10sXHJcbiAgICAgICAgICAgICAgICBpOyAvKiBBbmR5IEtpbmcgc2FpZCBkbyBpdCB0aGlzIHdheS4gKi9cclxuICAgIFxyXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgNjQ7IGkgKz0gNCkge1xyXG4gICAgICAgICAgICAgICAgbWQ1Ymxrc1tpID4+IDJdID0gcy5jaGFyQ29kZUF0KGkpICsgKHMuY2hhckNvZGVBdChpICsgMSkgPDwgOCkgKyAocy5jaGFyQ29kZUF0KGkgKyAyKSA8PCAxNikgKyAocy5jaGFyQ29kZUF0KGkgKyAzKSA8PCAyNCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG1kNWJsa3M7XHJcbiAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgIG1kNWJsa19hcnJheSA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHZhciBtZDVibGtzID0gW10sXHJcbiAgICAgICAgICAgICAgICBpOyAvKiBBbmR5IEtpbmcgc2FpZCBkbyBpdCB0aGlzIHdheS4gKi9cclxuICAgIFxyXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgNjQ7IGkgKz0gNCkge1xyXG4gICAgICAgICAgICAgICAgbWQ1Ymxrc1tpID4+IDJdID0gYVtpXSArIChhW2kgKyAxXSA8PCA4KSArIChhW2kgKyAyXSA8PCAxNikgKyAoYVtpICsgM10gPDwgMjQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBtZDVibGtzO1xyXG4gICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICBtZDUxID0gZnVuY3Rpb24gKHMpIHtcclxuICAgICAgICAgICAgdmFyIG4gPSBzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIHN0YXRlID0gWzE3MzI1ODQxOTMsIC0yNzE3MzM4NzksIC0xNzMyNTg0MTk0LCAyNzE3MzM4NzhdLFxyXG4gICAgICAgICAgICAgICAgaSxcclxuICAgICAgICAgICAgICAgIGxlbmd0aCxcclxuICAgICAgICAgICAgICAgIHRhaWwsXHJcbiAgICAgICAgICAgICAgICB0bXAsXHJcbiAgICAgICAgICAgICAgICBsbyxcclxuICAgICAgICAgICAgICAgIGhpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGZvciAoaSA9IDY0OyBpIDw9IG47IGkgKz0gNjQpIHtcclxuICAgICAgICAgICAgICAgIG1kNWN5Y2xlKHN0YXRlLCBtZDVibGsocy5zdWJzdHJpbmcoaSAtIDY0LCBpKSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHMgPSBzLnN1YnN0cmluZyhpIC0gNjQpO1xyXG4gICAgICAgICAgICBsZW5ndGggPSBzLmxlbmd0aDtcclxuICAgICAgICAgICAgdGFpbCA9IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXTtcclxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgICAgICB0YWlsW2kgPj4gMl0gfD0gcy5jaGFyQ29kZUF0KGkpIDw8ICgoaSAlIDQpIDw8IDMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRhaWxbaSA+PiAyXSB8PSAweDgwIDw8ICgoaSAlIDQpIDw8IDMpO1xyXG4gICAgICAgICAgICBpZiAoaSA+IDU1KSB7XHJcbiAgICAgICAgICAgICAgICBtZDVjeWNsZShzdGF0ZSwgdGFpbCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgMTY7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhaWxbaV0gPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQmV3YXJlIHRoYXQgdGhlIGZpbmFsIGxlbmd0aCBtaWdodCBub3QgZml0IGluIDMyIGJpdHMgc28gd2UgdGFrZSBjYXJlIG9mIHRoYXRcclxuICAgICAgICAgICAgdG1wID0gbiAqIDg7XHJcbiAgICAgICAgICAgIHRtcCA9IHRtcC50b1N0cmluZygxNikubWF0Y2goLyguKj8pKC57MCw4fSkkLyk7XHJcbiAgICAgICAgICAgIGxvID0gcGFyc2VJbnQodG1wWzJdLCAxNik7XHJcbiAgICAgICAgICAgIGhpID0gcGFyc2VJbnQodG1wWzFdLCAxNikgfHwgMDtcclxuICAgIFxyXG4gICAgICAgICAgICB0YWlsWzE0XSA9IGxvO1xyXG4gICAgICAgICAgICB0YWlsWzE1XSA9IGhpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIG1kNWN5Y2xlKHN0YXRlLCB0YWlsKTtcclxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xyXG4gICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICBtZDUxX2FycmF5ID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgdmFyIG4gPSBhLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIHN0YXRlID0gWzE3MzI1ODQxOTMsIC0yNzE3MzM4NzksIC0xNzMyNTg0MTk0LCAyNzE3MzM4NzhdLFxyXG4gICAgICAgICAgICAgICAgaSxcclxuICAgICAgICAgICAgICAgIGxlbmd0aCxcclxuICAgICAgICAgICAgICAgIHRhaWwsXHJcbiAgICAgICAgICAgICAgICB0bXAsXHJcbiAgICAgICAgICAgICAgICBsbyxcclxuICAgICAgICAgICAgICAgIGhpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGZvciAoaSA9IDY0OyBpIDw9IG47IGkgKz0gNjQpIHtcclxuICAgICAgICAgICAgICAgIG1kNWN5Y2xlKHN0YXRlLCBtZDVibGtfYXJyYXkoYS5zdWJhcnJheShpIC0gNjQsIGkpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBOb3Qgc3VyZSBpZiBpdCBpcyBhIGJ1ZywgaG93ZXZlciBJRTEwIHdpbGwgYWx3YXlzIHByb2R1Y2UgYSBzdWIgYXJyYXkgb2YgbGVuZ3RoIDFcclxuICAgICAgICAgICAgLy8gY29udGFpbmluZyB0aGUgbGFzdCBlbGVtZW50IG9mIHRoZSBwYXJlbnQgYXJyYXkgaWYgdGhlIHN1YiBhcnJheSBzcGVjaWZpZWQgc3RhcnRzXHJcbiAgICAgICAgICAgIC8vIGJleW9uZCB0aGUgbGVuZ3RoIG9mIHRoZSBwYXJlbnQgYXJyYXkgLSB3ZWlyZC5cclxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9jb25uZWN0Lm1pY3Jvc29mdC5jb20vSUUvZmVlZGJhY2svZGV0YWlscy83NzE0NTIvdHlwZWQtYXJyYXktc3ViYXJyYXktaXNzdWVcclxuICAgICAgICAgICAgYSA9IChpIC0gNjQpIDwgbiA/IGEuc3ViYXJyYXkoaSAtIDY0KSA6IG5ldyBVaW50OEFycmF5KDApO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGxlbmd0aCA9IGEubGVuZ3RoO1xyXG4gICAgICAgICAgICB0YWlsID0gWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdO1xyXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgICAgIHRhaWxbaSA+PiAyXSB8PSBhW2ldIDw8ICgoaSAlIDQpIDw8IDMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgdGFpbFtpID4+IDJdIHw9IDB4ODAgPDwgKChpICUgNCkgPDwgMyk7XHJcbiAgICAgICAgICAgIGlmIChpID4gNTUpIHtcclxuICAgICAgICAgICAgICAgIG1kNWN5Y2xlKHN0YXRlLCB0YWlsKTtcclxuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCAxNjsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFpbFtpXSA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBCZXdhcmUgdGhhdCB0aGUgZmluYWwgbGVuZ3RoIG1pZ2h0IG5vdCBmaXQgaW4gMzIgYml0cyBzbyB3ZSB0YWtlIGNhcmUgb2YgdGhhdFxyXG4gICAgICAgICAgICB0bXAgPSBuICogODtcclxuICAgICAgICAgICAgdG1wID0gdG1wLnRvU3RyaW5nKDE2KS5tYXRjaCgvKC4qPykoLnswLDh9KSQvKTtcclxuICAgICAgICAgICAgbG8gPSBwYXJzZUludCh0bXBbMl0sIDE2KTtcclxuICAgICAgICAgICAgaGkgPSBwYXJzZUludCh0bXBbMV0sIDE2KSB8fCAwO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHRhaWxbMTRdID0gbG87XHJcbiAgICAgICAgICAgIHRhaWxbMTVdID0gaGk7XHJcbiAgICBcclxuICAgICAgICAgICAgbWQ1Y3ljbGUoc3RhdGUsIHRhaWwpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcclxuICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgaGV4X2NociA9IFsnMCcsICcxJywgJzInLCAnMycsICc0JywgJzUnLCAnNicsICc3JywgJzgnLCAnOScsICdhJywgJ2InLCAnYycsICdkJywgJ2UnLCAnZiddLFxyXG4gICAgXHJcbiAgICAgICAgcmhleCA9IGZ1bmN0aW9uIChuKSB7XHJcbiAgICAgICAgICAgIHZhciBzID0gJycsXHJcbiAgICAgICAgICAgICAgICBqO1xyXG4gICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgNDsgaiArPSAxKSB7XHJcbiAgICAgICAgICAgICAgICBzICs9IGhleF9jaHJbKG4gPj4gKGogKiA4ICsgNCkpICYgMHgwRl0gKyBoZXhfY2hyWyhuID4+IChqICogOCkpICYgMHgwRl07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHM7XHJcbiAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgIGhleCA9IGZ1bmN0aW9uICh4KSB7XHJcbiAgICAgICAgICAgIHZhciBpO1xyXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgeFtpXSA9IHJoZXgoeFtpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHguam9pbignJyk7XHJcbiAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgIG1kNSA9IGZ1bmN0aW9uIChzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBoZXgobWQ1MShzKSk7XHJcbiAgICAgICAgfSxcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTcGFya01ENSBPT1AgaW1wbGVtZW50YXRpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBVc2UgdGhpcyBjbGFzcyB0byBwZXJmb3JtIGFuIGluY3JlbWVudGFsIG1kNSwgb3RoZXJ3aXNlIHVzZSB0aGVcclxuICAgICAgICAgKiBzdGF0aWMgbWV0aG9kcyBpbnN0ZWFkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFNwYXJrTUQ1ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBjYWxsIHJlc2V0IHRvIGluaXQgdGhlIGluc3RhbmNlXHJcbiAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgICAvLyBJbiBzb21lIGNhc2VzIHRoZSBmYXN0IGFkZDMyIGZ1bmN0aW9uIGNhbm5vdCBiZSB1c2VkLi5cclxuICAgICAgICBpZiAobWQ1KCdoZWxsbycpICE9PSAnNWQ0MTQwMmFiYzRiMmE3NmI5NzE5ZDkxMTAxN2M1OTInKSB7XHJcbiAgICAgICAgICAgIGFkZDMyID0gZnVuY3Rpb24gKHgsIHkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsc3cgPSAoeCAmIDB4RkZGRikgKyAoeSAmIDB4RkZGRiksXHJcbiAgICAgICAgICAgICAgICAgICAgbXN3ID0gKHggPj4gMTYpICsgKHkgPj4gMTYpICsgKGxzdyA+PiAxNik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1zdyA8PCAxNikgfCAobHN3ICYgMHhGRkZGKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFwcGVuZHMgYSBzdHJpbmcuXHJcbiAgICAgICAgICogQSBjb252ZXJzaW9uIHdpbGwgYmUgYXBwbGllZCBpZiBhbiB1dGY4IHN0cmluZyBpcyBkZXRlY3RlZC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIHN0cmluZyB0byBiZSBhcHBlbmRlZFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7U3BhcmtNRDV9IFRoZSBpbnN0YW5jZSBpdHNlbGZcclxuICAgICAgICAgKi9cclxuICAgICAgICBTcGFya01ENS5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgICAgICAgICAvLyBjb252ZXJ0cyB0aGUgc3RyaW5nIHRvIHV0ZjggYnl0ZXMgaWYgbmVjZXNzYXJ5XHJcbiAgICAgICAgICAgIGlmICgvW1xcdTAwODAtXFx1RkZGRl0vLnRlc3Qoc3RyKSkge1xyXG4gICAgICAgICAgICAgICAgc3RyID0gdW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHN0cikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gdGhlbiBhcHBlbmQgYXMgYmluYXJ5XHJcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kQmluYXJ5KHN0cik7XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFwcGVuZHMgYSBiaW5hcnkgc3RyaW5nLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGNvbnRlbnRzIFRoZSBiaW5hcnkgc3RyaW5nIHRvIGJlIGFwcGVuZGVkXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtTcGFya01ENX0gVGhlIGluc3RhbmNlIGl0c2VsZlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFNwYXJrTUQ1LnByb3RvdHlwZS5hcHBlbmRCaW5hcnkgPSBmdW5jdGlvbiAoY29udGVudHMpIHtcclxuICAgICAgICAgICAgdGhpcy5fYnVmZiArPSBjb250ZW50cztcclxuICAgICAgICAgICAgdGhpcy5fbGVuZ3RoICs9IGNvbnRlbnRzLmxlbmd0aDtcclxuICAgIFxyXG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gdGhpcy5fYnVmZi5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICBpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGZvciAoaSA9IDY0OyBpIDw9IGxlbmd0aDsgaSArPSA2NCkge1xyXG4gICAgICAgICAgICAgICAgbWQ1Y3ljbGUodGhpcy5fc3RhdGUsIG1kNWJsayh0aGlzLl9idWZmLnN1YnN0cmluZyhpIC0gNjQsIGkpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICB0aGlzLl9idWZmID0gdGhpcy5fYnVmZi5zdWJzdHIoaSAtIDY0KTtcclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRmluaXNoZXMgdGhlIGluY3JlbWVudGFsIGNvbXB1dGF0aW9uLCByZXNldGluZyB0aGUgaW50ZXJuYWwgc3RhdGUgYW5kXHJcbiAgICAgICAgICogcmV0dXJuaW5nIHRoZSByZXN1bHQuXHJcbiAgICAgICAgICogVXNlIHRoZSByYXcgcGFyYW1ldGVyIHRvIG9idGFpbiB0aGUgcmF3IHJlc3VsdCBpbnN0ZWFkIG9mIHRoZSBoZXggb25lLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtCb29sZWFufSByYXcgVHJ1ZSB0byBnZXQgdGhlIHJhdyByZXN1bHQsIGZhbHNlIHRvIGdldCB0aGUgaGV4IHJlc3VsdFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7U3RyaW5nfEFycmF5fSBUaGUgcmVzdWx0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgU3BhcmtNRDUucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uIChyYXcpIHtcclxuICAgICAgICAgICAgdmFyIGJ1ZmYgPSB0aGlzLl9idWZmLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gYnVmZi5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICBpLFxyXG4gICAgICAgICAgICAgICAgdGFpbCA9IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcclxuICAgICAgICAgICAgICAgIHJldDtcclxuICAgIFxyXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgICAgIHRhaWxbaSA+PiAyXSB8PSBidWZmLmNoYXJDb2RlQXQoaSkgPDwgKChpICUgNCkgPDwgMyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICB0aGlzLl9maW5pc2godGFpbCwgbGVuZ3RoKTtcclxuICAgICAgICAgICAgcmV0ID0gISFyYXcgPyB0aGlzLl9zdGF0ZSA6IGhleCh0aGlzLl9zdGF0ZSk7XHJcbiAgICBcclxuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEZpbmlzaCB0aGUgZmluYWwgY2FsY3VsYXRpb24gYmFzZWQgb24gdGhlIHRhaWwuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSAgdGFpbCAgIFRoZSB0YWlsICh3aWxsIGJlIG1vZGlmaWVkKVxyXG4gICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBsZW5ndGggVGhlIGxlbmd0aCBvZiB0aGUgcmVtYWluaW5nIGJ1ZmZlclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFNwYXJrTUQ1LnByb3RvdHlwZS5fZmluaXNoID0gZnVuY3Rpb24gKHRhaWwsIGxlbmd0aCkge1xyXG4gICAgICAgICAgICB2YXIgaSA9IGxlbmd0aCxcclxuICAgICAgICAgICAgICAgIHRtcCxcclxuICAgICAgICAgICAgICAgIGxvLFxyXG4gICAgICAgICAgICAgICAgaGk7XHJcbiAgICBcclxuICAgICAgICAgICAgdGFpbFtpID4+IDJdIHw9IDB4ODAgPDwgKChpICUgNCkgPDwgMyk7XHJcbiAgICAgICAgICAgIGlmIChpID4gNTUpIHtcclxuICAgICAgICAgICAgICAgIG1kNWN5Y2xlKHRoaXMuX3N0YXRlLCB0YWlsKTtcclxuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCAxNjsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFpbFtpXSA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBEbyB0aGUgZmluYWwgY29tcHV0YXRpb24gYmFzZWQgb24gdGhlIHRhaWwgYW5kIGxlbmd0aFxyXG4gICAgICAgICAgICAvLyBCZXdhcmUgdGhhdCB0aGUgZmluYWwgbGVuZ3RoIG1heSBub3QgZml0IGluIDMyIGJpdHMgc28gd2UgdGFrZSBjYXJlIG9mIHRoYXRcclxuICAgICAgICAgICAgdG1wID0gdGhpcy5fbGVuZ3RoICogODtcclxuICAgICAgICAgICAgdG1wID0gdG1wLnRvU3RyaW5nKDE2KS5tYXRjaCgvKC4qPykoLnswLDh9KSQvKTtcclxuICAgICAgICAgICAgbG8gPSBwYXJzZUludCh0bXBbMl0sIDE2KTtcclxuICAgICAgICAgICAgaGkgPSBwYXJzZUludCh0bXBbMV0sIDE2KSB8fCAwO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHRhaWxbMTRdID0gbG87XHJcbiAgICAgICAgICAgIHRhaWxbMTVdID0gaGk7XHJcbiAgICAgICAgICAgIG1kNWN5Y2xlKHRoaXMuX3N0YXRlLCB0YWlsKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVzZXRzIHRoZSBpbnRlcm5hbCBzdGF0ZSBvZiB0aGUgY29tcHV0YXRpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtTcGFya01ENX0gVGhlIGluc3RhbmNlIGl0c2VsZlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFNwYXJrTUQ1LnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5fYnVmZiA9IFwiXCI7XHJcbiAgICAgICAgICAgIHRoaXMuX2xlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXRlID0gWzE3MzI1ODQxOTMsIC0yNzE3MzM4NzksIC0xNzMyNTg0MTk0LCAyNzE3MzM4NzhdO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZWxlYXNlcyBtZW1vcnkgdXNlZCBieSB0aGUgaW5jcmVtZW50YWwgYnVmZmVyIGFuZCBvdGhlciBhZGl0aW9uYWxcclxuICAgICAgICAgKiByZXNvdXJjZXMuIElmIHlvdSBwbGFuIHRvIHVzZSB0aGUgaW5zdGFuY2UgYWdhaW4sIHVzZSByZXNldCBpbnN0ZWFkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFNwYXJrTUQ1LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5fc3RhdGU7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9idWZmO1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5fbGVuZ3RoO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFBlcmZvcm1zIHRoZSBtZDUgaGFzaCBvbiBhIHN0cmluZy5cclxuICAgICAgICAgKiBBIGNvbnZlcnNpb24gd2lsbCBiZSBhcHBsaWVkIGlmIHV0Zjggc3RyaW5nIGlzIGRldGVjdGVkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9ICBzdHIgVGhlIHN0cmluZ1xyXG4gICAgICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmF3IFRydWUgdG8gZ2V0IHRoZSByYXcgcmVzdWx0LCBmYWxzZSB0byBnZXQgdGhlIGhleCByZXN1bHRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge1N0cmluZ3xBcnJheX0gVGhlIHJlc3VsdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFNwYXJrTUQ1Lmhhc2ggPSBmdW5jdGlvbiAoc3RyLCByYXcpIHtcclxuICAgICAgICAgICAgLy8gY29udmVydHMgdGhlIHN0cmluZyB0byB1dGY4IGJ5dGVzIGlmIG5lY2Vzc2FyeVxyXG4gICAgICAgICAgICBpZiAoL1tcXHUwMDgwLVxcdUZGRkZdLy50ZXN0KHN0cikpIHtcclxuICAgICAgICAgICAgICAgIHN0ciA9IHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChzdHIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHZhciBoYXNoID0gbWQ1MShzdHIpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiAhIXJhdyA/IGhhc2ggOiBoZXgoaGFzaCk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFBlcmZvcm1zIHRoZSBtZDUgaGFzaCBvbiBhIGJpbmFyeSBzdHJpbmcuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gIGNvbnRlbnQgVGhlIGJpbmFyeSBzdHJpbmdcclxuICAgICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJhdyAgICAgVHJ1ZSB0byBnZXQgdGhlIHJhdyByZXN1bHQsIGZhbHNlIHRvIGdldCB0aGUgaGV4IHJlc3VsdFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7U3RyaW5nfEFycmF5fSBUaGUgcmVzdWx0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgU3BhcmtNRDUuaGFzaEJpbmFyeSA9IGZ1bmN0aW9uIChjb250ZW50LCByYXcpIHtcclxuICAgICAgICAgICAgdmFyIGhhc2ggPSBtZDUxKGNvbnRlbnQpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiAhIXJhdyA/IGhhc2ggOiBoZXgoaGFzaCk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNwYXJrTUQ1IE9PUCBpbXBsZW1lbnRhdGlvbiBmb3IgYXJyYXkgYnVmZmVycy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFVzZSB0aGlzIGNsYXNzIHRvIHBlcmZvcm0gYW4gaW5jcmVtZW50YWwgbWQ1IE9OTFkgZm9yIGFycmF5IGJ1ZmZlcnMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgU3BhcmtNRDUuQXJyYXlCdWZmZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIGNhbGwgcmVzZXQgdG8gaW5pdCB0aGUgaW5zdGFuY2VcclxuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBcHBlbmRzIGFuIGFycmF5IGJ1ZmZlci5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXlCdWZmZXJ9IGFyciBUaGUgYXJyYXkgdG8gYmUgYXBwZW5kZWRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge1NwYXJrTUQ1LkFycmF5QnVmZmVyfSBUaGUgaW5zdGFuY2UgaXRzZWxmXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgU3BhcmtNRDUuQXJyYXlCdWZmZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChhcnIpIHtcclxuICAgICAgICAgICAgLy8gVE9ETzogd2UgY291bGQgYXZvaWQgdGhlIGNvbmNhdGVuYXRpb24gaGVyZSBidXQgdGhlIGFsZ29yaXRobSB3b3VsZCBiZSBtb3JlIGNvbXBsZXhcclxuICAgICAgICAgICAgLy8gICAgICAgaWYgeW91IGZpbmQgeW91cnNlbGYgbmVlZGluZyBleHRyYSBwZXJmb3JtYW5jZSwgcGxlYXNlIG1ha2UgYSBQUi5cclxuICAgICAgICAgICAgdmFyIGJ1ZmYgPSB0aGlzLl9jb25jYXRBcnJheUJ1ZmZlcih0aGlzLl9idWZmLCBhcnIpLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gYnVmZi5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICBpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHRoaXMuX2xlbmd0aCArPSBhcnIuYnl0ZUxlbmd0aDtcclxuICAgIFxyXG4gICAgICAgICAgICBmb3IgKGkgPSA2NDsgaSA8PSBsZW5ndGg7IGkgKz0gNjQpIHtcclxuICAgICAgICAgICAgICAgIG1kNWN5Y2xlKHRoaXMuX3N0YXRlLCBtZDVibGtfYXJyYXkoYnVmZi5zdWJhcnJheShpIC0gNjQsIGkpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBBdm9pZHMgSUUxMCB3ZWlyZG5lc3MgKGRvY3VtZW50ZWQgYWJvdmUpXHJcbiAgICAgICAgICAgIHRoaXMuX2J1ZmYgPSAoaSAtIDY0KSA8IGxlbmd0aCA/IGJ1ZmYuc3ViYXJyYXkoaSAtIDY0KSA6IG5ldyBVaW50OEFycmF5KDApO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBGaW5pc2hlcyB0aGUgaW5jcmVtZW50YWwgY29tcHV0YXRpb24sIHJlc2V0aW5nIHRoZSBpbnRlcm5hbCBzdGF0ZSBhbmRcclxuICAgICAgICAgKiByZXR1cm5pbmcgdGhlIHJlc3VsdC5cclxuICAgICAgICAgKiBVc2UgdGhlIHJhdyBwYXJhbWV0ZXIgdG8gb2J0YWluIHRoZSByYXcgcmVzdWx0IGluc3RlYWQgb2YgdGhlIGhleCBvbmUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJhdyBUcnVlIHRvIGdldCB0aGUgcmF3IHJlc3VsdCwgZmFsc2UgdG8gZ2V0IHRoZSBoZXggcmVzdWx0XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtTdHJpbmd8QXJyYXl9IFRoZSByZXN1bHRcclxuICAgICAgICAgKi9cclxuICAgICAgICBTcGFya01ENS5BcnJheUJ1ZmZlci5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24gKHJhdykge1xyXG4gICAgICAgICAgICB2YXIgYnVmZiA9IHRoaXMuX2J1ZmYsXHJcbiAgICAgICAgICAgICAgICBsZW5ndGggPSBidWZmLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIHRhaWwgPSBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXHJcbiAgICAgICAgICAgICAgICBpLFxyXG4gICAgICAgICAgICAgICAgcmV0O1xyXG4gICAgXHJcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgdGFpbFtpID4+IDJdIHw9IGJ1ZmZbaV0gPDwgKChpICUgNCkgPDwgMyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICB0aGlzLl9maW5pc2godGFpbCwgbGVuZ3RoKTtcclxuICAgICAgICAgICAgcmV0ID0gISFyYXcgPyB0aGlzLl9zdGF0ZSA6IGhleCh0aGlzLl9zdGF0ZSk7XHJcbiAgICBcclxuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIFNwYXJrTUQ1LkFycmF5QnVmZmVyLnByb3RvdHlwZS5fZmluaXNoID0gU3BhcmtNRDUucHJvdG90eXBlLl9maW5pc2g7XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXNldHMgdGhlIGludGVybmFsIHN0YXRlIG9mIHRoZSBjb21wdXRhdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge1NwYXJrTUQ1LkFycmF5QnVmZmVyfSBUaGUgaW5zdGFuY2UgaXRzZWxmXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgU3BhcmtNRDUuQXJyYXlCdWZmZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLl9idWZmID0gbmV3IFVpbnQ4QXJyYXkoMCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2xlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXRlID0gWzE3MzI1ODQxOTMsIC0yNzE3MzM4NzksIC0xNzMyNTg0MTk0LCAyNzE3MzM4NzhdO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZWxlYXNlcyBtZW1vcnkgdXNlZCBieSB0aGUgaW5jcmVtZW50YWwgYnVmZmVyIGFuZCBvdGhlciBhZGl0aW9uYWxcclxuICAgICAgICAgKiByZXNvdXJjZXMuIElmIHlvdSBwbGFuIHRvIHVzZSB0aGUgaW5zdGFuY2UgYWdhaW4sIHVzZSByZXNldCBpbnN0ZWFkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFNwYXJrTUQ1LkFycmF5QnVmZmVyLnByb3RvdHlwZS5kZXN0cm95ID0gU3BhcmtNRDUucHJvdG90eXBlLmRlc3Ryb3k7XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDb25jYXRzIHR3byBhcnJheSBidWZmZXJzLCByZXR1cm5pbmcgYSBuZXcgb25lLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtICB7QXJyYXlCdWZmZXJ9IGZpcnN0ICBUaGUgZmlyc3QgYXJyYXkgYnVmZmVyXHJcbiAgICAgICAgICogQHBhcmFtICB7QXJyYXlCdWZmZXJ9IHNlY29uZCBUaGUgc2Vjb25kIGFycmF5IGJ1ZmZlclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7QXJyYXlCdWZmZXJ9IFRoZSBuZXcgYXJyYXkgYnVmZmVyXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgU3BhcmtNRDUuQXJyYXlCdWZmZXIucHJvdG90eXBlLl9jb25jYXRBcnJheUJ1ZmZlciA9IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XHJcbiAgICAgICAgICAgIHZhciBmaXJzdExlbmd0aCA9IGZpcnN0Lmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IG5ldyBVaW50OEFycmF5KGZpcnN0TGVuZ3RoICsgc2Vjb25kLmJ5dGVMZW5ndGgpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHJlc3VsdC5zZXQoZmlyc3QpO1xyXG4gICAgICAgICAgICByZXN1bHQuc2V0KG5ldyBVaW50OEFycmF5KHNlY29uZCksIGZpcnN0TGVuZ3RoKTtcclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBQZXJmb3JtcyB0aGUgbWQ1IGhhc2ggb24gYW4gYXJyYXkgYnVmZmVyLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gYXJyIFRoZSBhcnJheSBidWZmZXJcclxuICAgICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59ICAgICByYXcgVHJ1ZSB0byBnZXQgdGhlIHJhdyByZXN1bHQsIGZhbHNlIHRvIGdldCB0aGUgaGV4IHJlc3VsdFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7U3RyaW5nfEFycmF5fSBUaGUgcmVzdWx0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgU3BhcmtNRDUuQXJyYXlCdWZmZXIuaGFzaCA9IGZ1bmN0aW9uIChhcnIsIHJhdykge1xyXG4gICAgICAgICAgICB2YXIgaGFzaCA9IG1kNTFfYXJyYXkobmV3IFVpbnQ4QXJyYXkoYXJyKSk7XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuICEhcmF3ID8gaGFzaCA6IGhleChoYXNoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBGbGFzaFJ1bnRpbWUucmVnaXN0ZXIoICdNZDUnLCB7XHJcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gZG8gbm90aGluZy5cclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBsb2FkRnJvbUJsb2I6IGZ1bmN0aW9uKCBmaWxlICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJsb2IgPSBmaWxlLmdldFNvdXJjZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNodW5rU2l6ZSA9IDIgKiAxMDI0ICogMTAyNCxcclxuICAgICAgICAgICAgICAgICAgICBjaHVua3MgPSBNYXRoLmNlaWwoIGJsb2Iuc2l6ZSAvIGNodW5rU2l6ZSApLFxyXG4gICAgICAgICAgICAgICAgICAgIGNodW5rID0gMCxcclxuICAgICAgICAgICAgICAgICAgICBvd25lciA9IHRoaXMub3duZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3BhcmsgPSBuZXcgU3BhcmtNRDUuQXJyYXlCdWZmZXIoKSxcclxuICAgICAgICAgICAgICAgICAgICBtZSA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgYmxvYlNsaWNlID0gYmxvYi5tb3pTbGljZSB8fCBibG9iLndlYmtpdFNsaWNlIHx8IGJsb2Iuc2xpY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgbG9hZE5leHQsIGZyO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGxvYWROZXh0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXJ0LCBlbmQ7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBzdGFydCA9IGNodW5rICogY2h1bmtTaXplO1xyXG4gICAgICAgICAgICAgICAgICAgIGVuZCA9IE1hdGgubWluKCBzdGFydCArIGNodW5rU2l6ZSwgYmxvYi5zaXplICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBmci5vbmxvYWQgPSBmdW5jdGlvbiggZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3BhcmsuYXBwZW5kKCBlLnRhcmdldC5yZXN1bHQgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3duZXIudHJpZ2dlciggJ3Byb2dyZXNzJywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWw6IGZpbGUuc2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRlZDogZW5kXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBmci5vbmxvYWRlbmQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnIub25sb2FkZW5kID0gZnIub25sb2FkID0gbnVsbDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoICsrY2h1bmsgPCBjaHVua3MgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBsb2FkTmV4dCwgMSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG93bmVyLnRyaWdnZXIoJ2xvYWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZS5yZXN1bHQgPSBzcGFyay5lbmQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkTmV4dCA9IGZpbGUgPSBibG9iID0gc3BhcmsgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG93bmVyLnRyaWdnZXIoJ2NvbXBsZXRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCA1MCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGZyLnJlYWRBc0FycmF5QnVmZmVyKCBibG9iU2xpY2UuY2FsbCggYmxvYiwgc3RhcnQsIGVuZCApICk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBsb2FkTmV4dCgpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIGdldFJlc3VsdDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IEZsYXNoUnVudGltZVxyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ3J1bnRpbWUvZmxhc2gvcnVudGltZScsW1xyXG4gICAgICAgICdiYXNlJyxcclxuICAgICAgICAncnVudGltZS9ydW50aW1lJyxcclxuICAgICAgICAncnVudGltZS9jb21wYmFzZSdcclxuICAgIF0sIGZ1bmN0aW9uKCBCYXNlLCBSdW50aW1lLCBDb21wQmFzZSApIHtcclxuICAgIFxyXG4gICAgICAgIHZhciAkID0gQmFzZS4kLFxyXG4gICAgICAgICAgICB0eXBlID0gJ2ZsYXNoJyxcclxuICAgICAgICAgICAgY29tcG9uZW50cyA9IHt9O1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBnZXRGbGFzaFZlcnNpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciB2ZXJzaW9uO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB2ZXJzaW9uID0gbmF2aWdhdG9yLnBsdWdpbnNbICdTaG9ja3dhdmUgRmxhc2gnIF07XHJcbiAgICAgICAgICAgICAgICB2ZXJzaW9uID0gdmVyc2lvbi5kZXNjcmlwdGlvbjtcclxuICAgICAgICAgICAgfSBjYXRjaCAoIGV4ICkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uID0gbmV3IEFjdGl2ZVhPYmplY3QoJ1Nob2Nrd2F2ZUZsYXNoLlNob2Nrd2F2ZUZsYXNoJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5HZXRWYXJpYWJsZSgnJHZlcnNpb24nKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKCBleDIgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbiA9ICcwLjAnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZlcnNpb24gPSB2ZXJzaW9uLm1hdGNoKCAvXFxkKy9nICk7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KCB2ZXJzaW9uWyAwIF0gKyAnLicgKyB2ZXJzaW9uWyAxIF0sIDEwICk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gRmxhc2hSdW50aW1lKCkge1xyXG4gICAgICAgICAgICB2YXIgcG9vbCA9IHt9LFxyXG4gICAgICAgICAgICAgICAgY2xpZW50cyA9IHt9LFxyXG4gICAgICAgICAgICAgICAgZGVzdHJveSA9IHRoaXMuZGVzdHJveSxcclxuICAgICAgICAgICAgICAgIG1lID0gdGhpcyxcclxuICAgICAgICAgICAgICAgIGpzcmVjaXZlciA9IEJhc2UuZ3VpZCgnd2VidXBsb2FkZXJfJyk7XHJcbiAgICBcclxuICAgICAgICAgICAgUnVudGltZS5hcHBseSggbWUsIGFyZ3VtZW50cyApO1xyXG4gICAgICAgICAgICBtZS50eXBlID0gdHlwZTtcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIOi/meS4quaWueazleeahOiwg+eUqOiAhe+8jOWunumZheS4iuaYr1J1bnRpbWVDbGllbnRcclxuICAgICAgICAgICAgbWUuZXhlYyA9IGZ1bmN0aW9uKCBjb21wLCBmbi8qLCBhcmdzLi4uKi8gKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2xpZW50ID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICB1aWQgPSBjbGllbnQudWlkLFxyXG4gICAgICAgICAgICAgICAgICAgIGFyZ3MgPSBCYXNlLnNsaWNlKCBhcmd1bWVudHMsIDIgKSxcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgY2xpZW50c1sgdWlkIF0gPSBjbGllbnQ7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmICggY29tcG9uZW50c1sgY29tcCBdICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICggIXBvb2xbIHVpZCBdICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb29sWyB1aWQgXSA9IG5ldyBjb21wb25lbnRzWyBjb21wIF0oIGNsaWVudCwgbWUgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IHBvb2xbIHVpZCBdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBpbnN0YW5jZVsgZm4gXSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlWyBmbiBdLmFwcGx5KCBpbnN0YW5jZSwgYXJncyApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lLmZsYXNoRXhlYy5hcHBseSggY2xpZW50LCBhcmd1bWVudHMgKTtcclxuICAgICAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVyKCBldnQsIG9iaiApIHtcclxuICAgICAgICAgICAgICAgIHZhciB0eXBlID0gZXZ0LnR5cGUgfHwgZXZ0LFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcnRzLCB1aWQ7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHBhcnRzID0gdHlwZS5zcGxpdCgnOjonKTtcclxuICAgICAgICAgICAgICAgIHVpZCA9IHBhcnRzWyAwIF07XHJcbiAgICAgICAgICAgICAgICB0eXBlID0gcGFydHNbIDEgXTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cuYXBwbHkoIGNvbnNvbGUsIGFyZ3VtZW50cyApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIHR5cGUgPT09ICdSZWFkeScgJiYgdWlkID09PSBtZS51aWQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWUudHJpZ2dlcigncmVhZHknKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIGNsaWVudHNbIHVpZCBdICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudHNbIHVpZCBdLnRyaWdnZXIoIHR5cGUudG9Mb3dlckNhc2UoKSwgZXZ0LCBvYmogKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gQmFzZS5sb2coIGV2dCwgb2JqICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBmbGFzaOeahOaOpeWPl+WZqOOAglxyXG4gICAgICAgICAgICB3aW5kb3dbIGpzcmVjaXZlciBdID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g5Li65LqG6IO95o2V6I635b6X5Yiw44CCXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXIuYXBwbHkoIG51bGwsIGFyZ3MgKTtcclxuICAgICAgICAgICAgICAgIH0sIDEgKTtcclxuICAgICAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgICAgICB0aGlzLmpzcmVjaXZlciA9IGpzcmVjaXZlcjtcclxuICAgIFxyXG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIC8vIEB0b2RvIOWIoOmZpOaxoOWtkOS4reeahOaJgOacieWunuS+i1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlc3Ryb3kgJiYgZGVzdHJveS5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgdGhpcy5mbGFzaEV4ZWMgPSBmdW5jdGlvbiggY29tcCwgZm4gKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmxhc2ggPSBtZS5nZXRGbGFzaCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGFyZ3MgPSBCYXNlLnNsaWNlKCBhcmd1bWVudHMsIDIgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZsYXNoLmV4ZWMoIHRoaXMudWlkLCBjb21wLCBmbiwgYXJncyApO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIEB0b2RvXHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgQmFzZS5pbmhlcml0cyggUnVudGltZSwge1xyXG4gICAgICAgICAgICBjb25zdHJ1Y3RvcjogRmxhc2hSdW50aW1lLFxyXG4gICAgXHJcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZ2V0Q29udGFpbmVyKCksXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cyA9IHRoaXMub3B0aW9ucyxcclxuICAgICAgICAgICAgICAgICAgICBodG1sO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBpZiBub3QgdGhlIG1pbmltYWwgaGVpZ2h0LCBzaGltcyBhcmUgbm90IGluaXRpYWxpemVkXHJcbiAgICAgICAgICAgICAgICAvLyBpbiBvbGRlciBicm93c2VycyAoZS5nIEZGMy42LCBJRTYsNyw4LCBTYWZhcmkgNC4wLDUuMCwgZXRjKVxyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiAnLThweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogJy04cHgnLFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnOXB4JyxcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICc5cHgnLFxyXG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiAnaGlkZGVuJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIGluc2VydCBmbGFzaCBvYmplY3RcclxuICAgICAgICAgICAgICAgIGh0bWwgPSAnPG9iamVjdCBpZD1cIicgKyB0aGlzLnVpZCArICdcIiB0eXBlPVwiYXBwbGljYXRpb24vJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd4LXNob2Nrd2F2ZS1mbGFzaFwiIGRhdGE9XCInICsgIG9wdHMuc3dmICsgJ1wiICc7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmICggQmFzZS5icm93c2VyLmllICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJ2NsYXNzaWQ9XCJjbHNpZDpkMjdjZGI2ZS1hZTZkLTExY2YtOTZiOC00NDQ1NTM1NDAwMDBcIiAnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBodG1sICs9ICd3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCIgc3R5bGU9XCJvdXRsaW5lOjBcIj4nICArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxwYXJhbSBuYW1lPVwibW92aWVcIiB2YWx1ZT1cIicgKyBvcHRzLnN3ZiArICdcIiAvPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8cGFyYW0gbmFtZT1cImZsYXNodmFyc1wiIHZhbHVlPVwidWlkPScgKyB0aGlzLnVpZCArXHJcbiAgICAgICAgICAgICAgICAgICAgJyZqc3JlY2l2ZXI9JyArIHRoaXMuanNyZWNpdmVyICsgJ1wiIC8+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxwYXJhbSBuYW1lPVwid21vZGVcIiB2YWx1ZT1cInRyYW5zcGFyZW50XCIgLz4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPHBhcmFtIG5hbWU9XCJhbGxvd3NjcmlwdGFjY2Vzc1wiIHZhbHVlPVwiYWx3YXlzXCIgLz4nICtcclxuICAgICAgICAgICAgICAgICc8L29iamVjdD4nO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuaHRtbCggaHRtbCApO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIGdldEZsYXNoOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGlmICggdGhpcy5fZmxhc2ggKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ZsYXNoO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9mbGFzaCA9ICQoICcjJyArIHRoaXMudWlkICkuZ2V0KCAwICk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZmxhc2g7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgRmxhc2hSdW50aW1lLnJlZ2lzdGVyID0gZnVuY3Rpb24oIG5hbWUsIGNvbXBvbmVudCApIHtcclxuICAgICAgICAgICAgY29tcG9uZW50ID0gY29tcG9uZW50c1sgbmFtZSBdID0gQmFzZS5pbmhlcml0cyggQ29tcEJhc2UsICQuZXh0ZW5kKHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gQHRvZG8gZml4IHRoaXMgbGF0ZXJcclxuICAgICAgICAgICAgICAgIGZsYXNoRXhlYzogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG93bmVyID0gdGhpcy5vd25lcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcnVudGltZSA9IHRoaXMuZ2V0UnVudGltZSgpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJ1bnRpbWUuZmxhc2hFeGVjLmFwcGx5KCBvd25lciwgYXJndW1lbnRzICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBvbmVudCApICk7XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudDtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgaWYgKCBnZXRGbGFzaFZlcnNpb24oKSA+PSAxMS40ICkge1xyXG4gICAgICAgICAgICBSdW50aW1lLmFkZFJ1bnRpbWUoIHR5cGUsIEZsYXNoUnVudGltZSApO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIHJldHVybiBGbGFzaFJ1bnRpbWU7XHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyBGaWxlUGlja2VyXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgncnVudGltZS9mbGFzaC9maWxlcGlja2VyJyxbXHJcbiAgICAgICAgJ2Jhc2UnLFxyXG4gICAgICAgICdydW50aW1lL2ZsYXNoL3J1bnRpbWUnXHJcbiAgICBdLCBmdW5jdGlvbiggQmFzZSwgRmxhc2hSdW50aW1lICkge1xyXG4gICAgICAgIHZhciAkID0gQmFzZS4kO1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIEZsYXNoUnVudGltZS5yZWdpc3RlciggJ0ZpbGVQaWNrZXInLCB7XHJcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCBvcHRzICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvcHkgPSAkLmV4dGVuZCh7fSwgb3B0cyApLFxyXG4gICAgICAgICAgICAgICAgICAgIGxlbiwgaTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g5L+u5aSNRmxhc2jlho3msqHmnInorr7nva50aXRsZeeahOaDheWGteS4i+aXoOazleW8ueWHumZsYXNo5paH5Lu26YCJ5oup5qGG55qEYnVnLlxyXG4gICAgICAgICAgICAgICAgbGVuID0gY29weS5hY2NlcHQgJiYgY29weS5hY2NlcHQubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgZm9yICggIGkgPSAwOyBpIDwgbGVuOyBpKysgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhY29weS5hY2NlcHRbIGkgXS50aXRsZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29weS5hY2NlcHRbIGkgXS50aXRsZSA9ICdGaWxlcyc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBkZWxldGUgY29weS5idXR0b247XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgY29weS5pZDtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBjb3B5LmNvbnRhaW5lcjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5mbGFzaEV4ZWMoICdGaWxlUGlja2VyJywgJ2luaXQnLCBjb3B5ICk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZsYXNoRXhlYyggJ0ZpbGVQaWNrZXInLCAnZGVzdHJveScgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIEBmaWxlT3ZlcnZpZXcg5Zu+54mH5Y6L57ypXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgncnVudGltZS9mbGFzaC9pbWFnZScsW1xyXG4gICAgICAgICdydW50aW1lL2ZsYXNoL3J1bnRpbWUnXHJcbiAgICBdLCBmdW5jdGlvbiggRmxhc2hSdW50aW1lICkge1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIEZsYXNoUnVudGltZS5yZWdpc3RlciggJ0ltYWdlJywge1xyXG4gICAgICAgICAgICAvLyBpbml0OiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuICAgICAgICAgICAgLy8gICAgIHZhciBvd25lciA9IHRoaXMub3duZXI7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gICAgIHRoaXMuZmxhc2hFeGVjKCAnSW1hZ2UnLCAnaW5pdCcsIG9wdGlvbnMgKTtcclxuICAgICAgICAgICAgLy8gICAgIG93bmVyLm9uKCAnbG9hZCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIGRlYnVnZ2VyO1xyXG4gICAgICAgICAgICAvLyAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgbG9hZEZyb21CbG9iOiBmdW5jdGlvbiggYmxvYiApIHtcclxuICAgICAgICAgICAgICAgIHZhciBvd25lciA9IHRoaXMub3duZXI7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG93bmVyLmluZm8oKSAmJiB0aGlzLmZsYXNoRXhlYyggJ0ltYWdlJywgJ2luZm8nLCBvd25lci5pbmZvKCkgKTtcclxuICAgICAgICAgICAgICAgIG93bmVyLm1ldGEoKSAmJiB0aGlzLmZsYXNoRXhlYyggJ0ltYWdlJywgJ21ldGEnLCBvd25lci5tZXRhKCkgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5mbGFzaEV4ZWMoICdJbWFnZScsICdsb2FkRnJvbUJsb2InLCBibG9iLnVpZCApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyAgVHJhbnNwb3J0IGZsYXNo5a6e546wXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgncnVudGltZS9mbGFzaC90cmFuc3BvcnQnLFtcclxuICAgICAgICAnYmFzZScsXHJcbiAgICAgICAgJ3J1bnRpbWUvZmxhc2gvcnVudGltZScsXHJcbiAgICAgICAgJ3J1bnRpbWUvY2xpZW50J1xyXG4gICAgXSwgZnVuY3Rpb24oIEJhc2UsIEZsYXNoUnVudGltZSwgUnVudGltZUNsaWVudCApIHtcclxuICAgICAgICB2YXIgJCA9IEJhc2UuJDtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBGbGFzaFJ1bnRpbWUucmVnaXN0ZXIoICdUcmFuc3BvcnQnLCB7XHJcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc3RhdHVzID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Jlc3BvbnNlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Jlc3BvbnNlSnNvbiA9IG51bGw7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgc2VuZDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3duZXIgPSB0aGlzLm93bmVyLFxyXG4gICAgICAgICAgICAgICAgICAgIG9wdHMgPSB0aGlzLm9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICAgICAgeGhyID0gdGhpcy5faW5pdEFqYXgoKSxcclxuICAgICAgICAgICAgICAgICAgICBibG9iID0gb3duZXIuX2Jsb2IsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VydmVyID0gb3B0cy5zZXJ2ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgYmluYXJ5O1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB4aHIuY29ubmVjdFJ1bnRpbWUoIGJsb2IucnVpZCApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIG9wdHMuc2VuZEFzQmluYXJ5ICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlcnZlciArPSAoL1xcPy8udGVzdCggc2VydmVyICkgPyAnJicgOiAnPycpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQucGFyYW0oIG93bmVyLl9mb3JtRGF0YSApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgYmluYXJ5ID0gYmxvYi51aWQ7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQuZWFjaCggb3duZXIuX2Zvcm1EYXRhLCBmdW5jdGlvbiggaywgdiApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeGhyLmV4ZWMoICdhcHBlbmQnLCBrLCB2ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICB4aHIuZXhlYyggJ2FwcGVuZEJsb2InLCBvcHRzLmZpbGVWYWwsIGJsb2IudWlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0cy5maWxlbmFtZSB8fCBvd25lci5fZm9ybURhdGEubmFtZSB8fCAnJyApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRSZXF1ZXN0SGVhZGVyKCB4aHIsIG9wdHMuaGVhZGVycyApO1xyXG4gICAgICAgICAgICAgICAgeGhyLmV4ZWMoICdzZW5kJywge1xyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogb3B0cy5tZXRob2QsXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBzZXJ2ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yY2VVUkxTdHJlYW06IG9wdHMuZm9yY2VVUkxTdHJlYW0sXHJcbiAgICAgICAgICAgICAgICAgICAgbWltZVR5cGU6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nXHJcbiAgICAgICAgICAgICAgICB9LCBiaW5hcnkgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBnZXRTdGF0dXM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXR1cztcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBnZXRSZXNwb25zZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVzcG9uc2UgfHwgJyc7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgZ2V0UmVzcG9uc2VBc0pzb246IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc3BvbnNlSnNvbjtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBhYm9ydDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeGhyID0gdGhpcy5feGhyO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIHhociApIHtcclxuICAgICAgICAgICAgICAgICAgICB4aHIuZXhlYygnYWJvcnQnKTtcclxuICAgICAgICAgICAgICAgICAgICB4aHIuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3hociA9IHhociA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFib3J0KCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgX2luaXRBamF4OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZSA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgeGhyID0gbmV3IFJ1bnRpbWVDbGllbnQoJ1hNTEh0dHBSZXF1ZXN0Jyk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHhoci5vbiggJ3VwbG9hZHByb2dyZXNzIHByb2dyZXNzJywgZnVuY3Rpb24oIGUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBlcmNlbnQgPSBlLmxvYWRlZCAvIGUudG90YWw7XHJcbiAgICAgICAgICAgICAgICAgICAgcGVyY2VudCA9IE1hdGgubWluKCAxLCBNYXRoLm1heCggMCwgcGVyY2VudCApICk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lLnRyaWdnZXIoICdwcm9ncmVzcycsIHBlcmNlbnQgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB4aHIub24oICdsb2FkJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXR1cyA9IHhoci5leGVjKCdnZXRTdGF0dXMnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZEJvZHkgPSBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyID0gJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHA7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICB4aHIub2ZmKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWUuX3hociA9IG51bGw7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkQm9keSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggc3RhdHVzID49IDUwMCAmJiBzdGF0dXMgPCA2MDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRCb2R5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyID0gJ3NlcnZlcic7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyID0gJ2h0dHAnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggcmVhZEJvZHkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lLl9yZXNwb25zZSA9IHhoci5leGVjKCdnZXRSZXNwb25zZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZS5fcmVzcG9uc2UgPSBkZWNvZGVVUklDb21wb25lbnQoIG1lLl9yZXNwb25zZSApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZsYXNoIOWkhOeQhuWPr+iDveWtmOWcqCBidWcsIOayoei+meWPquiDvemdoCBqcyDkuoZcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIG1lLl9yZXNwb25zZUpzb24gPSB4aHIuZXhlYygnZ2V0UmVzcG9uc2VBc0pzb24nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSBjYXRjaCAoIGVycm9yICkge1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBmdW5jdGlvbiggcyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5KU09OICYmIHdpbmRvdy5KU09OLnBhcnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb24oJ3JldHVybiAnICsgcykuY2FsbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoIGVyciApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lLl9yZXNwb25zZUpzb24gID0gbWUuX3Jlc3BvbnNlID8gcChtZS5fcmVzcG9uc2UpIDoge307XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHhoci5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgeGhyID0gbnVsbDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnIgPyBtZS50cmlnZ2VyKCAnZXJyb3InLCBlcnIgKSA6IG1lLnRyaWdnZXIoJ2xvYWQnKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB4aHIub24oICdlcnJvcicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHhoci5vZmYoKTtcclxuICAgICAgICAgICAgICAgICAgICBtZS5feGhyID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBtZS50cmlnZ2VyKCAnZXJyb3InLCAnaHR0cCcgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBtZS5feGhyID0geGhyO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHhocjtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBfc2V0UmVxdWVzdEhlYWRlcjogZnVuY3Rpb24oIHhociwgaGVhZGVycyApIHtcclxuICAgICAgICAgICAgICAgICQuZWFjaCggaGVhZGVycywgZnVuY3Rpb24oIGtleSwgdmFsICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHhoci5leGVjKCAnc2V0UmVxdWVzdEhlYWRlcicsIGtleSwgdmFsICk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyBCbG9iIEh0bWzlrp7njrBcclxuICAgICAqL1xyXG4gICAgZGVmaW5lKCdydW50aW1lL2ZsYXNoL2Jsb2InLFtcclxuICAgICAgICAncnVudGltZS9mbGFzaC9ydW50aW1lJyxcclxuICAgICAgICAnbGliL2Jsb2InXHJcbiAgICBdLCBmdW5jdGlvbiggRmxhc2hSdW50aW1lLCBCbG9iICkge1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIEZsYXNoUnVudGltZS5yZWdpc3RlciggJ0Jsb2InLCB7XHJcbiAgICAgICAgICAgIHNsaWNlOiBmdW5jdGlvbiggc3RhcnQsIGVuZCApIHtcclxuICAgICAgICAgICAgICAgIHZhciBibG9iID0gdGhpcy5mbGFzaEV4ZWMoICdCbG9iJywgJ3NsaWNlJywgc3RhcnQsIGVuZCApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEJsb2IoIHRoaXMuZ2V0UnVpZCgpLCBibG9iICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3ICBNZDUgZmxhc2jlrp7njrBcclxuICAgICAqL1xyXG4gICAgZGVmaW5lKCdydW50aW1lL2ZsYXNoL21kNScsW1xyXG4gICAgICAgICdydW50aW1lL2ZsYXNoL3J1bnRpbWUnXHJcbiAgICBdLCBmdW5jdGlvbiggRmxhc2hSdW50aW1lICkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBGbGFzaFJ1bnRpbWUucmVnaXN0ZXIoICdNZDUnLCB7XHJcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gZG8gbm90aGluZy5cclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBsb2FkRnJvbUJsb2I6IGZ1bmN0aW9uKCBibG9iICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmxhc2hFeGVjKCAnTWQ1JywgJ2xvYWRGcm9tQmxvYicsIGJsb2IudWlkICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IOWujOWFqOeJiOacrOOAglxyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ3ByZXNldC9hbGwnLFtcclxuICAgICAgICAnYmFzZScsXHJcbiAgICBcclxuICAgICAgICAvLyB3aWRnZXRzXHJcbiAgICAgICAgJ3dpZGdldHMvZmlsZWRuZCcsXHJcbiAgICAgICAgJ3dpZGdldHMvZmlsZXBhc3RlJyxcclxuICAgICAgICAnd2lkZ2V0cy9maWxlcGlja2VyJyxcclxuICAgICAgICAnd2lkZ2V0cy9pbWFnZScsXHJcbiAgICAgICAgJ3dpZGdldHMvcXVldWUnLFxyXG4gICAgICAgICd3aWRnZXRzL3J1bnRpbWUnLFxyXG4gICAgICAgICd3aWRnZXRzL3VwbG9hZCcsXHJcbiAgICAgICAgJ3dpZGdldHMvdmFsaWRhdG9yJyxcclxuICAgICAgICAnd2lkZ2V0cy9tZDUnLFxyXG4gICAgXHJcbiAgICAgICAgLy8gcnVudGltZXNcclxuICAgICAgICAvLyBodG1sNVxyXG4gICAgICAgICdydW50aW1lL2h0bWw1L2Jsb2InLFxyXG4gICAgICAgICdydW50aW1lL2h0bWw1L2RuZCcsXHJcbiAgICAgICAgJ3J1bnRpbWUvaHRtbDUvZmlsZXBhc3RlJyxcclxuICAgICAgICAncnVudGltZS9odG1sNS9maWxlcGlja2VyJyxcclxuICAgICAgICAncnVudGltZS9odG1sNS9pbWFnZW1ldGEvZXhpZicsXHJcbiAgICAgICAgJ3J1bnRpbWUvaHRtbDUvYW5kcm9pZHBhdGNoJyxcclxuICAgICAgICAncnVudGltZS9odG1sNS9pbWFnZScsXHJcbiAgICAgICAgJ3J1bnRpbWUvaHRtbDUvdHJhbnNwb3J0JyxcclxuICAgICAgICAncnVudGltZS9odG1sNS9tZDUnLFxyXG4gICAgXHJcbiAgICAgICAgLy8gZmxhc2hcclxuICAgICAgICAncnVudGltZS9mbGFzaC9maWxlcGlja2VyJyxcclxuICAgICAgICAncnVudGltZS9mbGFzaC9pbWFnZScsXHJcbiAgICAgICAgJ3J1bnRpbWUvZmxhc2gvdHJhbnNwb3J0JyxcclxuICAgICAgICAncnVudGltZS9mbGFzaC9ibG9iJyxcclxuICAgICAgICAncnVudGltZS9mbGFzaC9tZDUnXHJcbiAgICBdLCBmdW5jdGlvbiggQmFzZSApIHtcclxuICAgICAgICByZXR1cm4gQmFzZTtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IOaXpeW/l+e7hOS7tu+8jOS4u+imgeeUqOadpeaUtumbhumUmeivr+S/oeaBr++8jOWPr+S7peW4ruWKqSB3ZWJ1cGxvYWRlciDmm7Tlpb3nmoTlrprkvY3pl67popjlkozlj5HlsZXjgIJcclxuICAgICAqXHJcbiAgICAgKiDlpoLmnpzmgqjkuI3mg7PopoHlkK/nlKjmraTlip/og73vvIzor7flnKjmiZPljIXnmoTml7blgJnljrvmjokgbG9nIOaooeWdl+OAglxyXG4gICAgICpcclxuICAgICAqIOaIluiAheWPr+S7peWcqOWIneWni+WMlueahOaXtuWAmemAmui/hyBvcHRpb25zLmRpc2FibGVXaWRnZXRzIOWxnuaAp+emgeeUqOOAglxyXG4gICAgICpcclxuICAgICAqIOWmgu+8mlxyXG4gICAgICogV2ViVXBsb2FkZXIuY3JlYXRlKHtcclxuICAgICAqICAgICAuLi5cclxuICAgICAqXHJcbiAgICAgKiAgICAgZGlzYWJsZVdpZGdldHM6ICdsb2cnLFxyXG4gICAgICpcclxuICAgICAqICAgICAuLi5cclxuICAgICAqIH0pXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgnd2lkZ2V0cy9sb2cnLFtcclxuICAgICAgICAnYmFzZScsXHJcbiAgICAgICAgJ3VwbG9hZGVyJyxcclxuICAgICAgICAnd2lkZ2V0cy93aWRnZXQnXHJcbiAgICBdLCBmdW5jdGlvbiggQmFzZSwgVXBsb2FkZXIgKSB7XHJcbiAgICAgICAgdmFyICQgPSBCYXNlLiQsXHJcbiAgICAgICAgICAgIGxvZ1VybCA9ICcgaHR0cDovL3N0YXRpYy50aWViYS5iYWlkdS5jb20vdGIvcG1zL2ltZy9zdC5naWY/PycsXHJcbiAgICAgICAgICAgIHByb2R1Y3QgPSAobG9jYXRpb24uaG9zdG5hbWUgfHwgbG9jYXRpb24uaG9zdCB8fCAncHJvdGVjdGVkJykudG9Mb3dlckNhc2UoKSxcclxuICAgIFxyXG4gICAgICAgICAgICAvLyDlj6rpkojlr7kgYmFpZHUg5YaF6YOo5Lqn5ZOB55So5oi35YGa57uf6K6h5Yqf6IO944CCXHJcbiAgICAgICAgICAgIGVuYWJsZSA9IHByb2R1Y3QgJiYgL2JhaWR1L2kuZXhlYyhwcm9kdWN0KSxcclxuICAgICAgICAgICAgYmFzZTtcclxuICAgIFxyXG4gICAgICAgIGlmICghZW5hYmxlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBiYXNlID0ge1xyXG4gICAgICAgICAgICBkdjogMyxcclxuICAgICAgICAgICAgbWFzdGVyOiAnd2VidXBsb2FkZXInLFxyXG4gICAgICAgICAgICBvbmxpbmU6IC90ZXN0Ly5leGVjKHByb2R1Y3QpID8gMCA6IDEsXHJcbiAgICAgICAgICAgIG1vZHVsZTogJycsXHJcbiAgICAgICAgICAgIHByb2R1Y3Q6IHByb2R1Y3QsXHJcbiAgICAgICAgICAgIHR5cGU6IDBcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gc2VuZChkYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciBvYmogPSAkLmV4dGVuZCh7fSwgYmFzZSwgZGF0YSksXHJcbiAgICAgICAgICAgICAgICB1cmwgPSBsb2dVcmwucmVwbGFjZSgvXiguKilcXD8vLCAnJDEnICsgJC5wYXJhbSggb2JqICkpLFxyXG4gICAgICAgICAgICAgICAgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgIFxyXG4gICAgICAgICAgICBpbWFnZS5zcmMgPSB1cmw7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIFVwbG9hZGVyLnJlZ2lzdGVyKHtcclxuICAgICAgICAgICAgbmFtZTogJ2xvZycsXHJcbiAgICBcclxuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3duZXIgPSB0aGlzLm93bmVyLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50ID0gMCxcclxuICAgICAgICAgICAgICAgICAgICBzaXplID0gMDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgb3duZXJcclxuICAgICAgICAgICAgICAgICAgICAub24oJ2Vycm9yJywgZnVuY3Rpb24oY29kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IDIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjX2Vycm9yX2NvZGU6IGNvZGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAub24oJ3VwbG9hZEVycm9yJywgZnVuY3Rpb24oZmlsZSwgcmVhc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNfZXJyb3JfY29kZTogJ1VQTE9BRF9FUlJPUicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjX3JlYXNvbjogJycgKyByZWFzb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAub24oJ3VwbG9hZENvbXBsZXRlJywgZnVuY3Rpb24oZmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplICs9IGZpbGUuc2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICB9KS5cclxuICAgICAgICAgICAgICAgICAgICBvbigndXBsb2FkRmluaXNoZWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VuZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjX2NvdW50OiBjb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNfc2l6ZTogc2l6ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY291bnQgPSBzaXplID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgc2VuZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgY191c2FnZTogMVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IFVwbG9hZGVy5LiK5Lyg57G7XHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgnd2VidXBsb2FkZXInLFtcclxuICAgICAgICAncHJlc2V0L2FsbCcsXHJcbiAgICAgICAgJ3dpZGdldHMvbG9nJ1xyXG4gICAgXSwgZnVuY3Rpb24oIHByZXNldCApIHtcclxuICAgICAgICByZXR1cm4gcHJlc2V0O1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcmVxdWlyZSgnd2VidXBsb2FkZXInKTtcclxufSk7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvdXBsb2FkL3dlYnVwbG9hZGVyLmpzXG4vLyBtb2R1bGUgaWQgPSAyM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 24 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/13.\r\n */\r\n\r\nvar util = __webpack_require__(25);\r\nvar GMap = __webpack_require__(26);\r\nvar DMap = __webpack_require__(45);\r\n__webpack_require__(65);\r\n\r\nwindow.GMap = GMap;\r\nwindow.DMap = DMap;\r\n\r\nvar SMap = {};\r\n\r\nconsole.log(123);\r\n\r\nwindow.mapCreate = mapCreate;\r\n\r\nif(typeof AMap === 'undefined') {\r\n  SMap = mapCreate('g');\r\n} else {\r\n  SMap = mapCreate('a');\r\n}\r\n\r\nfunction mapCreate(type) {\r\n  if (type == 'a') {\r\n    initPlugin('AMap', 'AMap');\r\n    return window.AMap;\r\n  } else if (type == 'g') {\r\n    initPlugin('GMap', 'GMap');\r\n    return window.GMap;\r\n  } else if (type == 'b') {\r\n    initPlugin('DMap', 'DMap');\r\n    return window.DMap;\r\n  }\r\n}\r\n\r\nmapCreate.setType = function(type) {\r\n  var mapType = '';\r\n  if( type == 'a' ) {\r\n    window.SMap = AMap;\r\n    mapType = 'AMap';\r\n  } else if ( type == 'g' ) {\r\n    window.SMap = window.GMap;\r\n    mapType = 'GMap';\r\n  } else if ( type == 'b') {\r\n    window.SMap = window.DMap;\r\n    mapType = 'DMap';\r\n  }\r\n  initPlugin(mapType, 'SMap');\r\n};\r\n\r\nfunction initPlugin(mapType, Map) {\r\n  window[Map].sPlugin = {\r\n    MouseTool: mapType + '.MouseTool',\r\n    CircleEditor: mapType + '.CircleEditor',\r\n    PolyEditor: mapType + '.PolyEditor',\r\n    Hotspot: mapType + '.Hotspot',\r\n    MarkerClusterer: mapType + '.MarkerClusterer',\r\n    RangingTool: mapType + '.RangingTool'\r\n  };\r\n}\r\n\r\n\r\n\r\nmodule.exports = window.SMap = SMap;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvaW5kZXguanM/ZmU1OCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBIiwiZmlsZSI6IjI0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTMuXHJcbiAqL1xyXG5cclxudmFyIHV0aWwgPSByZXF1aXJlKCcuLi8uLi9jb21tb24vanMvdXRpbC5qcycpO1xyXG52YXIgR01hcCA9IHJlcXVpcmUoJy4vZ21hcC9pbmRleC5qcycpO1xyXG52YXIgRE1hcCA9IHJlcXVpcmUoJy4vYm1hcC9pbmRleC5qcycpO1xyXG5yZXF1aXJlKCcuL01hcFNESy5qcycpO1xyXG5cclxud2luZG93LkdNYXAgPSBHTWFwO1xyXG53aW5kb3cuRE1hcCA9IERNYXA7XHJcblxyXG52YXIgU01hcCA9IHt9O1xyXG5cclxuY29uc29sZS5sb2coMTIzKTtcclxuXHJcbndpbmRvdy5tYXBDcmVhdGUgPSBtYXBDcmVhdGU7XHJcblxyXG5pZih0eXBlb2YgQU1hcCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICBTTWFwID0gbWFwQ3JlYXRlKCdnJyk7XHJcbn0gZWxzZSB7XHJcbiAgU01hcCA9IG1hcENyZWF0ZSgnYScpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYXBDcmVhdGUodHlwZSkge1xyXG4gIGlmICh0eXBlID09ICdhJykge1xyXG4gICAgaW5pdFBsdWdpbignQU1hcCcsICdBTWFwJyk7XHJcbiAgICByZXR1cm4gd2luZG93LkFNYXA7XHJcbiAgfSBlbHNlIGlmICh0eXBlID09ICdnJykge1xyXG4gICAgaW5pdFBsdWdpbignR01hcCcsICdHTWFwJyk7XHJcbiAgICByZXR1cm4gd2luZG93LkdNYXA7XHJcbiAgfSBlbHNlIGlmICh0eXBlID09ICdiJykge1xyXG4gICAgaW5pdFBsdWdpbignRE1hcCcsICdETWFwJyk7XHJcbiAgICByZXR1cm4gd2luZG93LkRNYXA7XHJcbiAgfVxyXG59XHJcblxyXG5tYXBDcmVhdGUuc2V0VHlwZSA9IGZ1bmN0aW9uKHR5cGUpIHtcclxuICB2YXIgbWFwVHlwZSA9ICcnO1xyXG4gIGlmKCB0eXBlID09ICdhJyApIHtcclxuICAgIHdpbmRvdy5TTWFwID0gQU1hcDtcclxuICAgIG1hcFR5cGUgPSAnQU1hcCc7XHJcbiAgfSBlbHNlIGlmICggdHlwZSA9PSAnZycgKSB7XHJcbiAgICB3aW5kb3cuU01hcCA9IHdpbmRvdy5HTWFwO1xyXG4gICAgbWFwVHlwZSA9ICdHTWFwJztcclxuICB9IGVsc2UgaWYgKCB0eXBlID09ICdiJykge1xyXG4gICAgd2luZG93LlNNYXAgPSB3aW5kb3cuRE1hcDtcclxuICAgIG1hcFR5cGUgPSAnRE1hcCc7XHJcbiAgfVxyXG4gIGluaXRQbHVnaW4obWFwVHlwZSwgJ1NNYXAnKTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIGluaXRQbHVnaW4obWFwVHlwZSwgTWFwKSB7XHJcbiAgd2luZG93W01hcF0uc1BsdWdpbiA9IHtcclxuICAgIE1vdXNlVG9vbDogbWFwVHlwZSArICcuTW91c2VUb29sJyxcclxuICAgIENpcmNsZUVkaXRvcjogbWFwVHlwZSArICcuQ2lyY2xlRWRpdG9yJyxcclxuICAgIFBvbHlFZGl0b3I6IG1hcFR5cGUgKyAnLlBvbHlFZGl0b3InLFxyXG4gICAgSG90c3BvdDogbWFwVHlwZSArICcuSG90c3BvdCcsXHJcbiAgICBNYXJrZXJDbHVzdGVyZXI6IG1hcFR5cGUgKyAnLk1hcmtlckNsdXN0ZXJlcicsXHJcbiAgICBSYW5naW5nVG9vbDogbWFwVHlwZSArICcuUmFuZ2luZ1Rvb2wnXHJcbiAgfTtcclxufVxyXG5cclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHdpbmRvdy5TTWFwID0gU01hcDtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy9tYXAvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDI0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 25 */
/***/ function(module, exports) {

	eval("/**\r\n * Created by fizz on 2017/2/16.\r\n */\r\n\r\nmodule.exports = {\r\n  isArray: function(item) {\r\n    return Object.prototype.toString.call(item) == '[object Array]';\r\n  },\r\n\r\n  isString: function(item) {\r\n    return typeof item === 'string';\r\n  },\r\n\r\n  isExitsVariable: function(variable) {\r\n    try {\r\n      if(typeof(variable) === 'undefined') {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    } catch(err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2pzL3V0aWwuanM/ODYxOSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IjI1LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTYuXHJcbiAqL1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgaXNBcnJheTogZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVtKSA9PSAnW29iamVjdCBBcnJheV0nO1xyXG4gIH0sXHJcblxyXG4gIGlzU3RyaW5nOiBmdW5jdGlvbihpdGVtKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnO1xyXG4gIH0sXHJcblxyXG4gIGlzRXhpdHNWYXJpYWJsZTogZnVuY3Rpb24odmFyaWFibGUpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmKHR5cGVvZih2YXJpYWJsZSkgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoKGVycikge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tbW9uL2pzL3V0aWwuanNcbi8vIG1vZHVsZSBpZCA9IDI1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 26 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/13.\r\n */\r\n\r\nvar LngLat = __webpack_require__(27);\r\nvar Bounds = __webpack_require__(28);\r\nvar Pixel = __webpack_require__(29);\r\nvar Size = __webpack_require__(30);\r\nvar Map = __webpack_require__(31);\r\nvar Marker = __webpack_require__(38);\r\nvar event = __webpack_require__(34);\r\nvar InfoWindow = __webpack_require__(40);\r\nvar Polyline = __webpack_require__(41);\r\nvar Polygon = __webpack_require__(42);\r\nvar Circle = __webpack_require__(43);\r\nvar MarkerClusterer = __webpack_require__(44);\r\n\r\nvar GMap = {};\r\n\r\nGMap.event = event;\r\n\r\nGMap.LngLat = LngLat;\r\nGMap.Bounds = Bounds;\r\nGMap.Pixel = Pixel;\r\nGMap.Size = Size;\r\n\r\nGMap.Map = Map;\r\nGMap.Marker = Marker;\r\nGMap.InfoWindow = InfoWindow;\r\nGMap.Polyline = Polyline;\r\nGMap.Polygon = Polygon;\r\nGMap.Circle = Circle;\r\nGMap.MarkerClusterer = MarkerClusterer;\r\n\r\nmodule.exports = window.GMap = GMap;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9pbmRleC5qcz82MmU2Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJmaWxlIjoiMjYuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBmaXp6IG9uIDIwMTcvMi8xMy5cclxuICovXHJcblxyXG52YXIgTG5nTGF0ID0gcmVxdWlyZSgnLi9MbmdMYXQnKTtcclxudmFyIEJvdW5kcyA9IHJlcXVpcmUoJy4vQm91bmRzJyk7XHJcbnZhciBQaXhlbCA9IHJlcXVpcmUoJy4vUGl4ZWwnKTtcclxudmFyIFNpemUgPSByZXF1aXJlKCcuL1NpemUnKTtcclxudmFyIE1hcCA9IHJlcXVpcmUoJy4vTWFwJyk7XHJcbnZhciBNYXJrZXIgPSByZXF1aXJlKCcuL01hcmtlcicpO1xyXG52YXIgZXZlbnQgPSByZXF1aXJlKCcuL2V2ZW50Jyk7XHJcbnZhciBJbmZvV2luZG93ID0gcmVxdWlyZSgnLi9JbmZvV2luZG93Jyk7XHJcbnZhciBQb2x5bGluZSA9IHJlcXVpcmUoJy4vUG9seWxpbmUnKTtcclxudmFyIFBvbHlnb24gPSByZXF1aXJlKCcuL1BvbHlnb24nKTtcclxudmFyIENpcmNsZSA9IHJlcXVpcmUoJy4vQ2lyY2xlJyk7XHJcbnZhciBNYXJrZXJDbHVzdGVyZXIgPSByZXF1aXJlKCcuL01hcmtlckNsdXN0ZXJlcicpO1xyXG5cclxudmFyIEdNYXAgPSB7fTtcclxuXHJcbkdNYXAuZXZlbnQgPSBldmVudDtcclxuXHJcbkdNYXAuTG5nTGF0ID0gTG5nTGF0O1xyXG5HTWFwLkJvdW5kcyA9IEJvdW5kcztcclxuR01hcC5QaXhlbCA9IFBpeGVsO1xyXG5HTWFwLlNpemUgPSBTaXplO1xyXG5cclxuR01hcC5NYXAgPSBNYXA7XHJcbkdNYXAuTWFya2VyID0gTWFya2VyO1xyXG5HTWFwLkluZm9XaW5kb3cgPSBJbmZvV2luZG93O1xyXG5HTWFwLlBvbHlsaW5lID0gUG9seWxpbmU7XHJcbkdNYXAuUG9seWdvbiA9IFBvbHlnb247XHJcbkdNYXAuQ2lyY2xlID0gQ2lyY2xlO1xyXG5HTWFwLk1hcmtlckNsdXN0ZXJlciA9IE1hcmtlckNsdXN0ZXJlcjtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gd2luZG93LkdNYXAgPSBHTWFwO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzL21hcC9nbWFwL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAyNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 27 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/13.\r\n */\r\n\r\nvar util = __webpack_require__(25);\r\n\r\n/**\r\n * @constructor\r\n * @lng {Number} lng\r\n * @lat {Number} lat\r\n * */\r\nfunction LngLat(lng, lat, inner) {\r\n\r\n  // 包装GMap的LngLat结构\r\n  if(inner) {\r\n    this._inner = inner;\r\n  }\r\n\r\n  // 构造函数模式\r\n  else {\r\n    if(arguments.length < 2) {\r\n\r\n      // 数组形式，前者为lng，后者为lat [116.397428, 39.90923] -- position\r\n      if(util.isArray(lng)){\r\n\r\n        if( typeof lng[0] === 'string' || typeof lng[1] === 'string' ) {\r\n          this.lng = parseFloat(lng[0]);\r\n          this.lat = parseFloat(lng[1]);\r\n        }\r\n\r\n        else {\r\n          this.lng = lng[0];\r\n          this.lat = lng[1];\r\n        }\r\n      }\r\n\r\n      // 对象形式，lng对应lng，lat对应lat (lng: 116.397428, lat: 39.90923)\r\n      else {\r\n        this.lng = lng.lng;\r\n        this.lat = lng.lat;\r\n      }\r\n    }\r\n\r\n    else {\r\n\r\n      // (\"116.403322\", \"39.920255\") string\r\n      if(util.isString(lng) || util.isString(lat)) {\r\n        this.lng = parseFloat(lng);\r\n        this.lat = parseFloat(lat);\r\n      }\r\n\r\n      // (116.403322, 39.920255) Number\r\n      else {\r\n        this.lng = lng;\r\n        this.lat = lat;\r\n      }\r\n    }\r\n\r\n    this._inner = new google.maps.LatLng({lng:this.lng, lat:this.lat});\r\n  }\r\n\r\n  this._type = 'LngLat';\r\n\r\n  return this;\r\n}\r\n\r\nLngLat.prototype = {\r\n  /**\r\n   * @function offset\r\n   * @param {Number} w\r\n   * @param {Number} s\r\n   * */\r\n  offset: function(w, s) {\r\n\r\n  },\r\n\r\n  distance: function() {\r\n\r\n  },\r\n\r\n  getLng: function() {\r\n    return this.lng;\r\n  },\r\n\r\n  getLat: function() {\r\n    return this.lat;\r\n  },\r\n\r\n  equals: function(lngLat) {\r\n\r\n  },\r\n\r\n  toString: function() {\r\n    return this._inner.toString();\r\n  }\r\n};\r\n\r\nmodule.exports = LngLat;\r\n\r\n\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9MbmdMYXQuanM/MmQyMiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLFNBQVMsT0FBTztBQUNoQixTQUFTLE9BQU87QUFDaEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSwwQ0FBMEMsMkJBQTJCO0FBQ3JFOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCLGFBQWEsT0FBTztBQUNwQjtBQUNBOztBQUVBLEdBQUc7O0FBRUg7O0FBRUEsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6IjI3LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTMuXHJcbiAqL1xyXG5cclxudmFyIHV0aWwgPSByZXF1aXJlKCcuLi8uLi8uLi9jb21tb24vanMvdXRpbCcpO1xyXG5cclxuLyoqXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAbG5nIHtOdW1iZXJ9IGxuZ1xyXG4gKiBAbGF0IHtOdW1iZXJ9IGxhdFxyXG4gKiAqL1xyXG5mdW5jdGlvbiBMbmdMYXQobG5nLCBsYXQsIGlubmVyKSB7XHJcblxyXG4gIC8vIOWMheijhUdNYXDnmoRMbmdMYXTnu5PmnoRcclxuICBpZihpbm5lcikge1xyXG4gICAgdGhpcy5faW5uZXIgPSBpbm5lcjtcclxuICB9XHJcblxyXG4gIC8vIOaehOmAoOWHveaVsOaooeW8j1xyXG4gIGVsc2Uge1xyXG4gICAgaWYoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcclxuXHJcbiAgICAgIC8vIOaVsOe7hOW9ouW8j++8jOWJjeiAheS4umxuZ++8jOWQjuiAheS4umxhdCBbMTE2LjM5NzQyOCwgMzkuOTA5MjNdIC0tIHBvc2l0aW9uXHJcbiAgICAgIGlmKHV0aWwuaXNBcnJheShsbmcpKXtcclxuXHJcbiAgICAgICAgaWYoIHR5cGVvZiBsbmdbMF0gPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBsbmdbMV0gPT09ICdzdHJpbmcnICkge1xyXG4gICAgICAgICAgdGhpcy5sbmcgPSBwYXJzZUZsb2F0KGxuZ1swXSk7XHJcbiAgICAgICAgICB0aGlzLmxhdCA9IHBhcnNlRmxvYXQobG5nWzFdKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5sbmcgPSBsbmdbMF07XHJcbiAgICAgICAgICB0aGlzLmxhdCA9IGxuZ1sxXTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOWvueixoeW9ouW8j++8jGxuZ+WvueW6lGxuZ++8jGxhdOWvueW6lGxhdCAobG5nOiAxMTYuMzk3NDI4LCBsYXQ6IDM5LjkwOTIzKVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICB0aGlzLmxuZyA9IGxuZy5sbmc7XHJcbiAgICAgICAgdGhpcy5sYXQgPSBsbmcubGF0O1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZWxzZSB7XHJcblxyXG4gICAgICAvLyAoXCIxMTYuNDAzMzIyXCIsIFwiMzkuOTIwMjU1XCIpIHN0cmluZ1xyXG4gICAgICBpZih1dGlsLmlzU3RyaW5nKGxuZykgfHwgdXRpbC5pc1N0cmluZyhsYXQpKSB7XHJcbiAgICAgICAgdGhpcy5sbmcgPSBwYXJzZUZsb2F0KGxuZyk7XHJcbiAgICAgICAgdGhpcy5sYXQgPSBwYXJzZUZsb2F0KGxhdCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vICgxMTYuNDAzMzIyLCAzOS45MjAyNTUpIE51bWJlclxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICB0aGlzLmxuZyA9IGxuZztcclxuICAgICAgICB0aGlzLmxhdCA9IGxhdDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2lubmVyID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyh7bG5nOnRoaXMubG5nLCBsYXQ6dGhpcy5sYXR9KTtcclxuICB9XHJcblxyXG4gIHRoaXMuX3R5cGUgPSAnTG5nTGF0JztcclxuXHJcbiAgcmV0dXJuIHRoaXM7XHJcbn1cclxuXHJcbkxuZ0xhdC5wcm90b3R5cGUgPSB7XHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIG9mZnNldFxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB3XHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHNcclxuICAgKiAqL1xyXG4gIG9mZnNldDogZnVuY3Rpb24odywgcykge1xyXG5cclxuICB9LFxyXG5cclxuICBkaXN0YW5jZTogZnVuY3Rpb24oKSB7XHJcblxyXG4gIH0sXHJcblxyXG4gIGdldExuZzogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5sbmc7XHJcbiAgfSxcclxuXHJcbiAgZ2V0TGF0OiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLmxhdDtcclxuICB9LFxyXG5cclxuICBlcXVhbHM6IGZ1bmN0aW9uKGxuZ0xhdCkge1xyXG5cclxuICB9LFxyXG5cclxuICB0b1N0cmluZzogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5uZXIudG9TdHJpbmcoKTtcclxuICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IExuZ0xhdDtcclxuXHJcblxyXG5cclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9MbmdMYXQuanNcbi8vIG1vZHVsZSBpZCA9IDI3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 28 */
/***/ function(module, exports) {

	eval("/**\r\n * Created by fizz on 2017/2/15.\r\n * @name Bounds 基础类\r\n * 在Google Map里面对应LatLngBounds Class\r\n * https://developers.google.com/maps/documentation/javascript/3.exp/reference#LatLngBounds\r\n */\r\n\r\n/**\r\n * @constructor\r\n * @sw {LngLat} southWest\r\n * @ne {LngLat} northEast\r\n * */\r\nfunction Bounds(sw, ne, inner) {\r\n\r\n  if(inner) {\r\n    this._inner = inner;\r\n  } else {\r\n    this._inner = new google.maps.LatLngBounds(sw, ne);\r\n  }\r\n\r\n  this._type = 'Bounds';\r\n\r\n  return this;\r\n}\r\n\r\nBounds.prototype = {\r\n  /**\r\n   * @param {LngLat} point\r\n   * */\r\n  contains: function(point) {\r\n    return this._inner.contains(point._inner);\r\n  },\r\n\r\n  getCenter: function() {\r\n    return LngLat.wrap(this._inner.getCenter());\r\n  },\r\n\r\n  getSouthWest: function() {\r\n    return this._inner.getSouthWest();\r\n  },\r\n  getNorthEast: function() {\r\n    return this._inner.getNorthEast();\r\n  },\r\n  toString: function() {\r\n    console.log(\"toString\");\r\n    return this._inner.toString();\r\n  }\r\n};\r\n\r\nmodule.exports = Bounds;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9Cb3VuZHMuanM/OTAzYiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFFBQVEsT0FBTztBQUNmLFFBQVEsT0FBTztBQUNmO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6IjI4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTUuXHJcbiAqIEBuYW1lIEJvdW5kcyDln7rnoYDnsbtcclxuICog5ZyoR29vZ2xlIE1hcOmHjOmdouWvueW6lExhdExuZ0JvdW5kcyBDbGFzc1xyXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9tYXBzL2RvY3VtZW50YXRpb24vamF2YXNjcmlwdC8zLmV4cC9yZWZlcmVuY2UjTGF0TG5nQm91bmRzXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAc3cge0xuZ0xhdH0gc291dGhXZXN0XHJcbiAqIEBuZSB7TG5nTGF0fSBub3J0aEVhc3RcclxuICogKi9cclxuZnVuY3Rpb24gQm91bmRzKHN3LCBuZSwgaW5uZXIpIHtcclxuXHJcbiAgaWYoaW5uZXIpIHtcclxuICAgIHRoaXMuX2lubmVyID0gaW5uZXI7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRoaXMuX2lubmVyID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcyhzdywgbmUpO1xyXG4gIH1cclxuXHJcbiAgdGhpcy5fdHlwZSA9ICdCb3VuZHMnO1xyXG5cclxuICByZXR1cm4gdGhpcztcclxufVxyXG5cclxuQm91bmRzLnByb3RvdHlwZSA9IHtcclxuICAvKipcclxuICAgKiBAcGFyYW0ge0xuZ0xhdH0gcG9pbnRcclxuICAgKiAqL1xyXG4gIGNvbnRhaW5zOiBmdW5jdGlvbihwb2ludCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lubmVyLmNvbnRhaW5zKHBvaW50Ll9pbm5lcik7XHJcbiAgfSxcclxuXHJcbiAgZ2V0Q2VudGVyOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBMbmdMYXQud3JhcCh0aGlzLl9pbm5lci5nZXRDZW50ZXIoKSk7XHJcbiAgfSxcclxuXHJcbiAgZ2V0U291dGhXZXN0OiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbm5lci5nZXRTb3V0aFdlc3QoKTtcclxuICB9LFxyXG4gIGdldE5vcnRoRWFzdDogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5uZXIuZ2V0Tm9ydGhFYXN0KCk7XHJcbiAgfSxcclxuICB0b1N0cmluZzogZnVuY3Rpb24oKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcInRvU3RyaW5nXCIpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2lubmVyLnRvU3RyaW5nKCk7XHJcbiAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBCb3VuZHM7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2dtYXAvQm91bmRzLmpzXG4vLyBtb2R1bGUgaWQgPSAyOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 29 */
/***/ function(module, exports) {

	eval("/**\r\n * Created by fizz on 2017/2/15.\r\n * @constructor Pixel\r\n * 在google map里面对应的是Point\r\n * https://developers.google.com/maps/documentation/javascript/reference#Point\r\n */\r\n\r\n\r\n/**\r\n * @constructor\r\n * @param {Number} x\r\n * @param {Number} y\r\n * */\r\nfunction Pixel(x, y, inner) {\r\n  if(inner) {\r\n    this._inner = inner;\r\n  } else {\r\n    this._inner = new google.maps.Point(x,y);\r\n  }\r\n\r\n  this._type = 'Pixel';\r\n  return this;\r\n}\r\n\r\nPixel.prototype = {\r\n  getX: function() {\r\n    return this._inner.x;\r\n  },\r\n  getY: function() {\r\n    return this._inner.y;\r\n  },\r\n\r\n  /**\r\n   * @param {Pixel} point\r\n   * */\r\n  equals: function(point) {\r\n    return this._inner.equals(point);\r\n  },\r\n\r\n  toString: function() {\r\n    return this._inner.toString();\r\n  }\r\n};\r\n\r\n\r\n\r\n\r\nmodule.exports = Pixel;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9QaXhlbC5qcz81NDA1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0EsYUFBYSxNQUFNO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0EiLCJmaWxlIjoiMjkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBmaXp6IG9uIDIwMTcvMi8xNS5cclxuICogQGNvbnN0cnVjdG9yIFBpeGVsXHJcbiAqIOWcqGdvb2dsZSBtYXDph4zpnaLlr7nlupTnmoTmmK9Qb2ludFxyXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9tYXBzL2RvY3VtZW50YXRpb24vamF2YXNjcmlwdC9yZWZlcmVuY2UjUG9pbnRcclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAcGFyYW0ge051bWJlcn0geFxyXG4gKiBAcGFyYW0ge051bWJlcn0geVxyXG4gKiAqL1xyXG5mdW5jdGlvbiBQaXhlbCh4LCB5LCBpbm5lcikge1xyXG4gIGlmKGlubmVyKSB7XHJcbiAgICB0aGlzLl9pbm5lciA9IGlubmVyO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB0aGlzLl9pbm5lciA9IG5ldyBnb29nbGUubWFwcy5Qb2ludCh4LHkpO1xyXG4gIH1cclxuXHJcbiAgdGhpcy5fdHlwZSA9ICdQaXhlbCc7XHJcbiAgcmV0dXJuIHRoaXM7XHJcbn1cclxuXHJcblBpeGVsLnByb3RvdHlwZSA9IHtcclxuICBnZXRYOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbm5lci54O1xyXG4gIH0sXHJcbiAgZ2V0WTogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5uZXIueTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge1BpeGVsfSBwb2ludFxyXG4gICAqICovXHJcbiAgZXF1YWxzOiBmdW5jdGlvbihwb2ludCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lubmVyLmVxdWFscyhwb2ludCk7XHJcbiAgfSxcclxuXHJcbiAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lubmVyLnRvU3RyaW5nKCk7XHJcbiAgfVxyXG59O1xyXG5cclxuXHJcblxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBQaXhlbDtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9QaXhlbC5qc1xuLy8gbW9kdWxlIGlkID0gMjlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 30 */
/***/ function(module, exports) {

	eval("/**\r\n * Created by fizz on 2017/2/15.\r\n */\r\n\r\n\r\n/**\r\n * @constructor\r\n * @param {Number} width\r\n * @param {Number} height\r\n * */\r\nfunction Size(width, height, inner) {\r\n  if(inner) {\r\n    this._inner = inner;\r\n  } else {\r\n    this._inner = new google.maps.Size();\r\n  }\r\n\r\n  this._type = 'Size';\r\n  return this;\r\n}\r\n\r\nSize.prototype = {\r\n  getWidth: function() {\r\n    return this._inner.width;\r\n  },\r\n  getHeight: function() {\r\n    return this._inner.height;\r\n  },\r\n  toString: function() {\r\n    return this._inner.toString();\r\n  }\r\n};\r\n\r\n\r\n\r\n\r\nmodule.exports = Size;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9TaXplLmpzPzZhY2QiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFLQSIsImZpbGUiOiIzMC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGZpenogb24gMjAxNy8yLzE1LlxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSB3aWR0aFxyXG4gKiBAcGFyYW0ge051bWJlcn0gaGVpZ2h0XHJcbiAqICovXHJcbmZ1bmN0aW9uIFNpemUod2lkdGgsIGhlaWdodCwgaW5uZXIpIHtcclxuICBpZihpbm5lcikge1xyXG4gICAgdGhpcy5faW5uZXIgPSBpbm5lcjtcclxuICB9IGVsc2Uge1xyXG4gICAgdGhpcy5faW5uZXIgPSBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgpO1xyXG4gIH1cclxuXHJcbiAgdGhpcy5fdHlwZSA9ICdTaXplJztcclxuICByZXR1cm4gdGhpcztcclxufVxyXG5cclxuU2l6ZS5wcm90b3R5cGUgPSB7XHJcbiAgZ2V0V2lkdGg6IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lubmVyLndpZHRoO1xyXG4gIH0sXHJcbiAgZ2V0SGVpZ2h0OiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbm5lci5oZWlnaHQ7XHJcbiAgfSxcclxuICB0b1N0cmluZzogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5uZXIudG9TdHJpbmcoKTtcclxuICB9XHJcbn07XHJcblxyXG5cclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFNpemU7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2dtYXAvU2l6ZS5qc1xuLy8gbW9kdWxlIGlkID0gMzBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 31 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/13.\r\n * @constructor of Map\r\n * @return our map object\r\n */\r\n\r\nvar config = __webpack_require__(32);\r\nvar Bounds = __webpack_require__(28);\r\nvar onOff = __webpack_require__(33);\r\nvar formatOpts = __webpack_require__(37);\r\n\r\n/**\r\n * @constructor\r\n * @elem {Object}\r\n * @opts {Object}\r\n * */\r\nfunction Map(id,opts) {\r\n  var elem, newOpts;\r\n\r\n  this._type = 'Map';\r\n  elem = document.getElementById(id);\r\n  newOpts = formatOpts.map(opts);\r\n\r\n  this._inner = new google.maps.Map(elem, newOpts);\r\n  this._inner._smap = this;\r\n  this._overLayers = {\r\n    MarkerClusterer: [],\r\n    Marker: [],\r\n    InfoWindow: [],\r\n    Polygon: [],\r\n    Polyline: [],\r\n    Circle: []\r\n  };\r\n}\r\n\r\nMap.prototype = {\r\n\r\n  plugin : mapPlugin,\r\n\r\n  clearMap: clearMap,\r\n\r\n  /**\r\n   * @param {LngLat} position\r\n   * */\r\n  panTo: function(position) {\r\n    this._inner.panTo(position._inner);\r\n  },\r\n\r\n  destroy: function() {\r\n\r\n  },\r\n\r\n  /**\r\n   * @param {Number} zoom\r\n   * */\r\n  setZoom: function(zoom) {\r\n    this._inner.setZoom(zoom);\r\n  },\r\n\r\n  getBounds: function() {\r\n    return new Bounds('','',this._inner.getBounds());\r\n  },\r\n\r\n  on: onOff.on,\r\n  off: onOff.off\r\n};\r\n\r\nfunction mapPlugin(plugins, fn) {\r\n  if(plugins.length < 1) return;\r\n\r\n  plugins.forEach( function(plugin) {\r\n\r\n    console.log(plugin);\r\n    if(plugin === 'GMap.MarkerClusterer') {\r\n      $.getScript(config.GMap_MarkerClusterer, function() {\r\n        fn();\r\n      });\r\n    }\r\n\r\n  })\r\n}\r\n\r\nfunction clearMap() {\r\n  var overLayers = this._overLayers;\r\n\r\n  for(var type in overLayers) {\r\n\r\n    switch (type) {\r\n      case 'Marker':\r\n      case 'Circle':\r\n      case 'Polygon':\r\n      case 'Polyline':\r\n      case 'InfoWindow':\r\n        if(overLayers[type].length > 0) {\r\n          overLayers[type].forEach( function(item) {\r\n            item._inner.setMap(null);\r\n            item._inner = null;\r\n            item = null;\r\n          });\r\n          overLayers.lenght = 0;\r\n        }\r\n        break;\r\n      case 'MarkerClusterer':\r\n        if(overLayers.MarkerClusterer.length > 0) {\r\n          overLayers.MarkerClusterer.forEach( function(item) {\r\n            item._inner.clearMarkers();\r\n            item._inner = null;\r\n            item = null;\r\n          });\r\n          overLayers.MarkerClusterer.length = 0;\r\n        }\r\n        break;\r\n    }\r\n\r\n  }\r\n}\r\n\r\nmodule.exports = Map;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9NYXAuanM/NGEzZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBLEdBQUc7O0FBRUg7QUFDQSxhQUFhLE9BQU87QUFDcEI7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBIiwiZmlsZSI6IjMxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTMuXHJcbiAqIEBjb25zdHJ1Y3RvciBvZiBNYXBcclxuICogQHJldHVybiBvdXIgbWFwIG9iamVjdFxyXG4gKi9cclxuXHJcbnZhciBjb25maWcgPSByZXF1aXJlKCcuLi9jb25maWcnKTtcclxudmFyIEJvdW5kcyA9IHJlcXVpcmUoJy4vQm91bmRzJyk7XHJcbnZhciBvbk9mZiA9IHJlcXVpcmUoJy4vb25PZmYnKTtcclxudmFyIGZvcm1hdE9wdHMgPSByZXF1aXJlKCcuL2Zvcm1hdE9wdCcpO1xyXG5cclxuLyoqXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAZWxlbSB7T2JqZWN0fVxyXG4gKiBAb3B0cyB7T2JqZWN0fVxyXG4gKiAqL1xyXG5mdW5jdGlvbiBNYXAoaWQsb3B0cykge1xyXG4gIHZhciBlbGVtLCBuZXdPcHRzO1xyXG5cclxuICB0aGlzLl90eXBlID0gJ01hcCc7XHJcbiAgZWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcclxuICBuZXdPcHRzID0gZm9ybWF0T3B0cy5tYXAob3B0cyk7XHJcblxyXG4gIHRoaXMuX2lubmVyID0gbmV3IGdvb2dsZS5tYXBzLk1hcChlbGVtLCBuZXdPcHRzKTtcclxuICB0aGlzLl9pbm5lci5fc21hcCA9IHRoaXM7XHJcbiAgdGhpcy5fb3ZlckxheWVycyA9IHtcclxuICAgIE1hcmtlckNsdXN0ZXJlcjogW10sXHJcbiAgICBNYXJrZXI6IFtdLFxyXG4gICAgSW5mb1dpbmRvdzogW10sXHJcbiAgICBQb2x5Z29uOiBbXSxcclxuICAgIFBvbHlsaW5lOiBbXSxcclxuICAgIENpcmNsZTogW11cclxuICB9O1xyXG59XHJcblxyXG5NYXAucHJvdG90eXBlID0ge1xyXG5cclxuICBwbHVnaW4gOiBtYXBQbHVnaW4sXHJcblxyXG4gIGNsZWFyTWFwOiBjbGVhck1hcCxcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtMbmdMYXR9IHBvc2l0aW9uXHJcbiAgICogKi9cclxuICBwYW5UbzogZnVuY3Rpb24ocG9zaXRpb24pIHtcclxuICAgIHRoaXMuX2lubmVyLnBhblRvKHBvc2l0aW9uLl9pbm5lcik7XHJcbiAgfSxcclxuXHJcbiAgZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblxyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB6b29tXHJcbiAgICogKi9cclxuICBzZXRab29tOiBmdW5jdGlvbih6b29tKSB7XHJcbiAgICB0aGlzLl9pbm5lci5zZXRab29tKHpvb20pO1xyXG4gIH0sXHJcblxyXG4gIGdldEJvdW5kczogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gbmV3IEJvdW5kcygnJywnJyx0aGlzLl9pbm5lci5nZXRCb3VuZHMoKSk7XHJcbiAgfSxcclxuXHJcbiAgb246IG9uT2ZmLm9uLFxyXG4gIG9mZjogb25PZmYub2ZmXHJcbn07XHJcblxyXG5mdW5jdGlvbiBtYXBQbHVnaW4ocGx1Z2lucywgZm4pIHtcclxuICBpZihwbHVnaW5zLmxlbmd0aCA8IDEpIHJldHVybjtcclxuXHJcbiAgcGx1Z2lucy5mb3JFYWNoKCBmdW5jdGlvbihwbHVnaW4pIHtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhwbHVnaW4pO1xyXG4gICAgaWYocGx1Z2luID09PSAnR01hcC5NYXJrZXJDbHVzdGVyZXInKSB7XHJcbiAgICAgICQuZ2V0U2NyaXB0KGNvbmZpZy5HTWFwX01hcmtlckNsdXN0ZXJlciwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZm4oKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsZWFyTWFwKCkge1xyXG4gIHZhciBvdmVyTGF5ZXJzID0gdGhpcy5fb3ZlckxheWVycztcclxuXHJcbiAgZm9yKHZhciB0eXBlIGluIG92ZXJMYXllcnMpIHtcclxuXHJcbiAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgY2FzZSAnTWFya2VyJzpcclxuICAgICAgY2FzZSAnQ2lyY2xlJzpcclxuICAgICAgY2FzZSAnUG9seWdvbic6XHJcbiAgICAgIGNhc2UgJ1BvbHlsaW5lJzpcclxuICAgICAgY2FzZSAnSW5mb1dpbmRvdyc6XHJcbiAgICAgICAgaWYob3ZlckxheWVyc1t0eXBlXS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBvdmVyTGF5ZXJzW3R5cGVdLmZvckVhY2goIGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICAgICAgaXRlbS5faW5uZXIuc2V0TWFwKG51bGwpO1xyXG4gICAgICAgICAgICBpdGVtLl9pbm5lciA9IG51bGw7XHJcbiAgICAgICAgICAgIGl0ZW0gPSBudWxsO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBvdmVyTGF5ZXJzLmxlbmdodCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdNYXJrZXJDbHVzdGVyZXInOlxyXG4gICAgICAgIGlmKG92ZXJMYXllcnMuTWFya2VyQ2x1c3RlcmVyLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIG92ZXJMYXllcnMuTWFya2VyQ2x1c3RlcmVyLmZvckVhY2goIGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICAgICAgaXRlbS5faW5uZXIuY2xlYXJNYXJrZXJzKCk7XHJcbiAgICAgICAgICAgIGl0ZW0uX2lubmVyID0gbnVsbDtcclxuICAgICAgICAgICAgaXRlbSA9IG51bGw7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIG92ZXJMYXllcnMuTWFya2VyQ2x1c3RlcmVyLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG5cclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gTWFwO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzL21hcC9nbWFwL01hcC5qc1xuLy8gbW9kdWxlIGlkID0gMzFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 32 */
/***/ function(module, exports) {

	eval("/**\r\n * Created by fizz on 2017/2/15.\r\n */\r\n\r\nmodule.exports = {\r\n  // google map marker cluster url\r\n  // GMap_MarkerClusterer: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js',\r\n  GMap_MarkerClusterer: '../../src/components/map/google/markerclusterer.js',\r\n\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvY29uZmlnLmpzP2Q1M2EiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6IjMyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTUuXHJcbiAqL1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgLy8gZ29vZ2xlIG1hcCBtYXJrZXIgY2x1c3RlciB1cmxcclxuICAvLyBHTWFwX01hcmtlckNsdXN0ZXJlcjogJ2h0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL21hcHMvZG9jdW1lbnRhdGlvbi9qYXZhc2NyaXB0L2V4YW1wbGVzL21hcmtlcmNsdXN0ZXJlci9tYXJrZXJjbHVzdGVyZXIuanMnLFxyXG4gIEdNYXBfTWFya2VyQ2x1c3RlcmVyOiAnLi4vLi4vc3JjL2NvbXBvbmVudHMvbWFwL2dvb2dsZS9tYXJrZXJjbHVzdGVyZXIuanMnLFxyXG5cclxufTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy9tYXAvY29uZmlnLmpzXG4vLyBtb2R1bGUgaWQgPSAzMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 33 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/14.\r\n */\r\n\r\nvar event = __webpack_require__(34);\r\n\r\nvar onOff = {};\r\n\r\n\r\n/**\r\n *\r\n * @param {String} eventName\r\n * @param {Function} handler\r\n * @param {Object} context\r\n *\r\n *\r\n * */\r\nonOff.on = function(eventName, handler, context) {\r\n  var listener, eventListener;\r\n\r\n  listener = event.addListener(this, eventName, handler, context);\r\n\r\n  eventListener = {\r\n    eventName: eventName,\r\n    handler: handler,\r\n    context: context,\r\n    listener: listener\r\n  };\r\n\r\n  if(!this._eventListener) this._eventListener = [];\r\n\r\n  this._eventListener.push(eventListener);\r\n  return listener;\r\n};\r\n\r\nonOff.off = function(eventName, handler, context) {\r\n  if(!this._eventListener) return;\r\n\r\n  var filterResult = this._eventListener.filter( function(item, index) {\r\n    if(eventName === item.eventName) return true;\r\n    return false;\r\n  });\r\n\r\n  if(filterResult && filterResult.length > 0) {\r\n    filterResult.forEach( function(item, index) {\r\n      if( item.handler === handler &&\r\n        item.context === context ) {\r\n        console.log('here am I');\r\n        event.removeListener(item.listener);\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n};\r\n\r\nmodule.exports = onOff;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9vbk9mZi5qcz8yNmE4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7O0FBR0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLFNBQVM7QUFDcEIsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7OztBQUdBOztBQUVBIiwiZmlsZSI6IjMzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTQuXHJcbiAqL1xyXG5cclxudmFyIGV2ZW50ID0gcmVxdWlyZSgnLi9ldmVudCcpO1xyXG5cclxudmFyIG9uT2ZmID0ge307XHJcblxyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWVcclxuICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxyXG4gKiBAcGFyYW0ge09iamVjdH0gY29udGV4dFxyXG4gKlxyXG4gKlxyXG4gKiAqL1xyXG5vbk9mZi5vbiA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgaGFuZGxlciwgY29udGV4dCkge1xyXG4gIHZhciBsaXN0ZW5lciwgZXZlbnRMaXN0ZW5lcjtcclxuXHJcbiAgbGlzdGVuZXIgPSBldmVudC5hZGRMaXN0ZW5lcih0aGlzLCBldmVudE5hbWUsIGhhbmRsZXIsIGNvbnRleHQpO1xyXG5cclxuICBldmVudExpc3RlbmVyID0ge1xyXG4gICAgZXZlbnROYW1lOiBldmVudE5hbWUsXHJcbiAgICBoYW5kbGVyOiBoYW5kbGVyLFxyXG4gICAgY29udGV4dDogY29udGV4dCxcclxuICAgIGxpc3RlbmVyOiBsaXN0ZW5lclxyXG4gIH07XHJcblxyXG4gIGlmKCF0aGlzLl9ldmVudExpc3RlbmVyKSB0aGlzLl9ldmVudExpc3RlbmVyID0gW107XHJcblxyXG4gIHRoaXMuX2V2ZW50TGlzdGVuZXIucHVzaChldmVudExpc3RlbmVyKTtcclxuICByZXR1cm4gbGlzdGVuZXI7XHJcbn07XHJcblxyXG5vbk9mZi5vZmYgPSBmdW5jdGlvbihldmVudE5hbWUsIGhhbmRsZXIsIGNvbnRleHQpIHtcclxuICBpZighdGhpcy5fZXZlbnRMaXN0ZW5lcikgcmV0dXJuO1xyXG5cclxuICB2YXIgZmlsdGVyUmVzdWx0ID0gdGhpcy5fZXZlbnRMaXN0ZW5lci5maWx0ZXIoIGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7XHJcbiAgICBpZihldmVudE5hbWUgPT09IGl0ZW0uZXZlbnROYW1lKSByZXR1cm4gdHJ1ZTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9KTtcclxuXHJcbiAgaWYoZmlsdGVyUmVzdWx0ICYmIGZpbHRlclJlc3VsdC5sZW5ndGggPiAwKSB7XHJcbiAgICBmaWx0ZXJSZXN1bHQuZm9yRWFjaCggZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcclxuICAgICAgaWYoIGl0ZW0uaGFuZGxlciA9PT0gaGFuZGxlciAmJlxyXG4gICAgICAgIGl0ZW0uY29udGV4dCA9PT0gY29udGV4dCApIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnaGVyZSBhbSBJJyk7XHJcbiAgICAgICAgZXZlbnQucmVtb3ZlTGlzdGVuZXIoaXRlbS5saXN0ZW5lcik7XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IG9uT2ZmO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzL21hcC9nbWFwL29uT2ZmLmpzXG4vLyBtb2R1bGUgaWQgPSAzM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 34 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/14.\r\n */\r\n\r\nvar SMapEvent = __webpack_require__(35);\r\n\r\nvar event = {};\r\n\r\nevent.map = __webpack_require__(36);\r\n\r\nevent.getSMapEvent = function(e) {\r\n  return new SMapEvent(e);\r\n};\r\n\r\nevent.addDomListener = function(instance, eventName, handler, context) {\r\n  var listener = {};\r\n\r\n  if(context) {\r\n    listener = google.maps.event.addDomListener(instance, eventName, function(e) {\r\n      handler.call(context, e);\r\n    });\r\n  } else {\r\n    listener = google.maps.event.addDomListener(instance, eventName, handler);\r\n  }\r\n  return listener;\r\n};\r\n\r\nevent.addListener = function(instance, eventName, handler, context) {\r\n  var listener = {}, relevantEvent, realInstance;\r\n\r\n  realInstance = instance._inner;\r\n  relevantEvent = event.getRelevantEvent(instance, eventName);\r\n\r\n  if(context) {\r\n    listener = google.maps.event.addListener(realInstance, relevantEvent, function(e) {\r\n      handler.call(context, event.getSMapEvent(e));\r\n    });\r\n  } else {\r\n    listener = google.maps.event.addListener(realInstance, relevantEvent, function(e) {\r\n      handler(event.getSMapEvent(e));\r\n    });\r\n  }\r\n  return listener;\r\n};\r\n\r\nevent.addListenerOnce = function(instance, eventName, handler, context) {\r\n  var listener = {}, relevantEvent, realInstance;\r\n\r\n  realInstance = instance._inner;\r\n\r\n  relevantEvent = event.getRelevantEvent(instance, eventName);\r\n\r\n  if(context) {\r\n    listener = google.maps.event.addListenerOnce(realInstance, relevantEvent, function (e) {\r\n      handler.call(context, event.getSMapEvent(e));\r\n    });\r\n  } else {\r\n    listener = google.maps.event.addListenerOnce(realInstance, relevantEvent, function(e) {\r\n      handler(event.getSMapEvent(e));\r\n    });\r\n  }\r\n  return listener;\r\n};\r\n\r\nevent.removeListener = function(listener) {\r\n  google.maps.event.removeListener(listener);\r\n};\r\n\r\nevent.triggerListener = function(instance, eventName, extArgs) {\r\n  var relevantEvent = event.getRelevantEvent(instance, eventName);\r\n\r\n  google.maps.event.trigger(instance, relevantEvent, extArgs);\r\n};\r\n\r\nevent.getRelevantEvent = function(instance, eventName) {\r\n  if(instance._type in event.map) {\r\n    if(eventName in event.map[instance._type]) {\r\n      return event.map[instance._type][eventName];\r\n    } else {\r\n      return eventName;\r\n    }\r\n  } else {\r\n    return eventName;\r\n  }\r\n};\r\n\r\nevent.getSMapEventObject = function(e) {\r\n\r\n};\r\n\r\nmodule.exports = event;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9ldmVudC5qcz8yYmNiIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsbUJBQW1COztBQUVuQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtQkFBbUI7O0FBRW5COztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSIsImZpbGUiOiIzNC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGZpenogb24gMjAxNy8yLzE0LlxyXG4gKi9cclxuXHJcbnZhciBTTWFwRXZlbnQgPSByZXF1aXJlKCcuL1NNYXBFdmVudCcpO1xyXG5cclxudmFyIGV2ZW50ID0ge307XHJcblxyXG5ldmVudC5tYXAgPSByZXF1aXJlKCcuL2V2ZW50TWFwJyk7XHJcblxyXG5ldmVudC5nZXRTTWFwRXZlbnQgPSBmdW5jdGlvbihlKSB7XHJcbiAgcmV0dXJuIG5ldyBTTWFwRXZlbnQoZSk7XHJcbn07XHJcblxyXG5ldmVudC5hZGREb21MaXN0ZW5lciA9IGZ1bmN0aW9uKGluc3RhbmNlLCBldmVudE5hbWUsIGhhbmRsZXIsIGNvbnRleHQpIHtcclxuICB2YXIgbGlzdGVuZXIgPSB7fTtcclxuXHJcbiAgaWYoY29udGV4dCkge1xyXG4gICAgbGlzdGVuZXIgPSBnb29nbGUubWFwcy5ldmVudC5hZGREb21MaXN0ZW5lcihpbnN0YW5jZSwgZXZlbnROYW1lLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgIGhhbmRsZXIuY2FsbChjb250ZXh0LCBlKTtcclxuICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBsaXN0ZW5lciA9IGdvb2dsZS5tYXBzLmV2ZW50LmFkZERvbUxpc3RlbmVyKGluc3RhbmNlLCBldmVudE5hbWUsIGhhbmRsZXIpO1xyXG4gIH1cclxuICByZXR1cm4gbGlzdGVuZXI7XHJcbn07XHJcblxyXG5ldmVudC5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uKGluc3RhbmNlLCBldmVudE5hbWUsIGhhbmRsZXIsIGNvbnRleHQpIHtcclxuICB2YXIgbGlzdGVuZXIgPSB7fSwgcmVsZXZhbnRFdmVudCwgcmVhbEluc3RhbmNlO1xyXG5cclxuICByZWFsSW5zdGFuY2UgPSBpbnN0YW5jZS5faW5uZXI7XHJcbiAgcmVsZXZhbnRFdmVudCA9IGV2ZW50LmdldFJlbGV2YW50RXZlbnQoaW5zdGFuY2UsIGV2ZW50TmFtZSk7XHJcblxyXG4gIGlmKGNvbnRleHQpIHtcclxuICAgIGxpc3RlbmVyID0gZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIocmVhbEluc3RhbmNlLCByZWxldmFudEV2ZW50LCBmdW5jdGlvbihlKSB7XHJcbiAgICAgIGhhbmRsZXIuY2FsbChjb250ZXh0LCBldmVudC5nZXRTTWFwRXZlbnQoZSkpO1xyXG4gICAgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGxpc3RlbmVyID0gZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIocmVhbEluc3RhbmNlLCByZWxldmFudEV2ZW50LCBmdW5jdGlvbihlKSB7XHJcbiAgICAgIGhhbmRsZXIoZXZlbnQuZ2V0U01hcEV2ZW50KGUpKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICByZXR1cm4gbGlzdGVuZXI7XHJcbn07XHJcblxyXG5ldmVudC5hZGRMaXN0ZW5lck9uY2UgPSBmdW5jdGlvbihpbnN0YW5jZSwgZXZlbnROYW1lLCBoYW5kbGVyLCBjb250ZXh0KSB7XHJcbiAgdmFyIGxpc3RlbmVyID0ge30sIHJlbGV2YW50RXZlbnQsIHJlYWxJbnN0YW5jZTtcclxuXHJcbiAgcmVhbEluc3RhbmNlID0gaW5zdGFuY2UuX2lubmVyO1xyXG5cclxuICByZWxldmFudEV2ZW50ID0gZXZlbnQuZ2V0UmVsZXZhbnRFdmVudChpbnN0YW5jZSwgZXZlbnROYW1lKTtcclxuXHJcbiAgaWYoY29udGV4dCkge1xyXG4gICAgbGlzdGVuZXIgPSBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lck9uY2UocmVhbEluc3RhbmNlLCByZWxldmFudEV2ZW50LCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICBoYW5kbGVyLmNhbGwoY29udGV4dCwgZXZlbnQuZ2V0U01hcEV2ZW50KGUpKTtcclxuICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBsaXN0ZW5lciA9IGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyT25jZShyZWFsSW5zdGFuY2UsIHJlbGV2YW50RXZlbnQsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgaGFuZGxlcihldmVudC5nZXRTTWFwRXZlbnQoZSkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIHJldHVybiBsaXN0ZW5lcjtcclxufTtcclxuXHJcbmV2ZW50LnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24obGlzdGVuZXIpIHtcclxuICBnb29nbGUubWFwcy5ldmVudC5yZW1vdmVMaXN0ZW5lcihsaXN0ZW5lcik7XHJcbn07XHJcblxyXG5ldmVudC50cmlnZ2VyTGlzdGVuZXIgPSBmdW5jdGlvbihpbnN0YW5jZSwgZXZlbnROYW1lLCBleHRBcmdzKSB7XHJcbiAgdmFyIHJlbGV2YW50RXZlbnQgPSBldmVudC5nZXRSZWxldmFudEV2ZW50KGluc3RhbmNlLCBldmVudE5hbWUpO1xyXG5cclxuICBnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKGluc3RhbmNlLCByZWxldmFudEV2ZW50LCBleHRBcmdzKTtcclxufTtcclxuXHJcbmV2ZW50LmdldFJlbGV2YW50RXZlbnQgPSBmdW5jdGlvbihpbnN0YW5jZSwgZXZlbnROYW1lKSB7XHJcbiAgaWYoaW5zdGFuY2UuX3R5cGUgaW4gZXZlbnQubWFwKSB7XHJcbiAgICBpZihldmVudE5hbWUgaW4gZXZlbnQubWFwW2luc3RhbmNlLl90eXBlXSkge1xyXG4gICAgICByZXR1cm4gZXZlbnQubWFwW2luc3RhbmNlLl90eXBlXVtldmVudE5hbWVdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGV2ZW50TmFtZTtcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIGV2ZW50TmFtZTtcclxuICB9XHJcbn07XHJcblxyXG5ldmVudC5nZXRTTWFwRXZlbnRPYmplY3QgPSBmdW5jdGlvbihlKSB7XHJcblxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBldmVudDtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9ldmVudC5qc1xuLy8gbW9kdWxlIGlkID0gMzRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 35 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/20.\r\n * @constructor for google map event Object.\r\n * Wrap event and return our new event object just like gaode AMap event.\r\n */\r\n\r\nvar LngLat = __webpack_require__(27);\r\n\r\n/**\r\n * 包装Google的事件触发时的event对象\r\n *\r\n * @constructor\r\n * @param {Object} e event object\r\n * */\r\nfunction SMapEvent(e) {\r\n  this._inner = e;\r\n  this._type = 'Event';\r\n\r\n  this.lnglat = new LngLat(e.latLng.lng(), e.latLng.lat());\r\n  this.lnglat.I = e.latLng.lng();\r\n  this.lnglat.L = e.latLng.lat();\r\n\r\n  this.pixel = {\r\n    x: e.pixel.x,\r\n    y: e.pixel.y\r\n  };\r\n}\r\n\r\nmodule.exports = SMapEvent;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9TTWFwRXZlbnQuanM/NjcyMyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6IjM1LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMjAuXHJcbiAqIEBjb25zdHJ1Y3RvciBmb3IgZ29vZ2xlIG1hcCBldmVudCBPYmplY3QuXHJcbiAqIFdyYXAgZXZlbnQgYW5kIHJldHVybiBvdXIgbmV3IGV2ZW50IG9iamVjdCBqdXN0IGxpa2UgZ2FvZGUgQU1hcCBldmVudC5cclxuICovXHJcblxyXG52YXIgTG5nTGF0ID0gcmVxdWlyZSgnLi9MbmdMYXQnKTtcclxuXHJcbi8qKlxyXG4gKiDljIXoo4VHb29nbGXnmoTkuovku7bop6blj5Hml7bnmoRldmVudOWvueixoVxyXG4gKlxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQHBhcmFtIHtPYmplY3R9IGUgZXZlbnQgb2JqZWN0XHJcbiAqICovXHJcbmZ1bmN0aW9uIFNNYXBFdmVudChlKSB7XHJcbiAgdGhpcy5faW5uZXIgPSBlO1xyXG4gIHRoaXMuX3R5cGUgPSAnRXZlbnQnO1xyXG5cclxuICB0aGlzLmxuZ2xhdCA9IG5ldyBMbmdMYXQoZS5sYXRMbmcubG5nKCksIGUubGF0TG5nLmxhdCgpKTtcclxuICB0aGlzLmxuZ2xhdC5JID0gZS5sYXRMbmcubG5nKCk7XHJcbiAgdGhpcy5sbmdsYXQuTCA9IGUubGF0TG5nLmxhdCgpO1xyXG5cclxuICB0aGlzLnBpeGVsID0ge1xyXG4gICAgeDogZS5waXhlbC54LFxyXG4gICAgeTogZS5waXhlbC55XHJcbiAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBTTWFwRXZlbnQ7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2dtYXAvU01hcEV2ZW50LmpzXG4vLyBtb2R1bGUgaWQgPSAzNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 36 */
/***/ function(module, exports) {

	eval("/**\r\n * Created by fizz on 2017/2/16.\r\n */\r\n\r\nmodule.exports = {\r\n  Marker: {\r\n    click: 'click',\r\n\r\n  },\r\n\r\n  InfoWindow: {\r\n    change: 'content_changed',\r\n    open: 'domready',\r\n    chose: 'choseClick'\r\n  }\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9ldmVudE1hcC5qcz9mZjJmIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiMzYuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBmaXp6IG9uIDIwMTcvMi8xNi5cclxuICovXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICBNYXJrZXI6IHtcclxuICAgIGNsaWNrOiAnY2xpY2snLFxyXG5cclxuICB9LFxyXG5cclxuICBJbmZvV2luZG93OiB7XHJcbiAgICBjaGFuZ2U6ICdjb250ZW50X2NoYW5nZWQnLFxyXG4gICAgb3BlbjogJ2RvbXJlYWR5JyxcclxuICAgIGNob3NlOiAnY2hvc2VDbGljaydcclxuICB9XHJcbn07XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2dtYXAvZXZlbnRNYXAuanNcbi8vIG1vZHVsZSBpZCA9IDM2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 37 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/14.\r\n */\r\n\r\nvar LngLat = __webpack_require__(27);\r\n\r\nmodule.exports = {\r\n  map: formatOptsUni,\r\n\r\n  infoWindow: formatOptsUni,\r\n\r\n  marker: formatOptsUni,\r\n\r\n  polyline: formatOptsUni,\r\n\r\n  polygon: formatOptsUni,\r\n\r\n  circle: formatOptsUni,\r\n\r\n  markerClusterer: formatMarkerClusterer\r\n};\r\n\r\nfunction formatOptsUni(opts) {\r\n\r\n  if('position' in opts) {\r\n    opts.position = new LngLat(opts.position);\r\n  }\r\n\r\n  if(opts.path) {\r\n    opts.path = transfromPathToPaths(opts.path);\r\n  }\r\n\r\n  if(opts.center) {\r\n    opts.center = new LngLat(opts.center);\r\n  }\r\n\r\n  if(opts.map) {\r\n    opts.map = opts.map._inner;\r\n  }\r\n\r\n  return opts;\r\n}\r\n\r\nfunction transfromPathToPaths(path) {\r\n  var paths = [];\r\n  path.forEach( function(item, index) {\r\n    paths.push(arrCreateLngLat(item));\r\n  });\r\n  return paths;\r\n}\r\n\r\nfunction arrCreateLngLat(arr) {\r\n  return new google.maps.LatLng({lng: arr[0], lat: arr[1]});\r\n}\r\n\r\n\r\n/**************************************************\r\n * markerClusterer\r\n * ***********************************************/\r\nfunction formatMarkerClusterer(map, markers, opts) {\r\n  var newOpts = {};\r\n\r\n  if(map._inner) {\r\n    newOpts.map = map._inner;\r\n  } else {\r\n    newOpts.map = map;\r\n  }\r\n\r\n  newOpts.markers = markers.map( function(item) {\r\n    return item._inner;\r\n  });\r\n\r\n  newOpts.opts = formatMarkerClustererOpts(opts);\r\n\r\n  return newOpts;\r\n}\r\n\r\n/**\r\n * @param {Object} opts\r\n * @diff : minClusterSize : minimumClusterSize\r\n * */\r\nfunction formatMarkerClustererOpts(opts) {\r\n  if(opts.minClusterSize) {\r\n    opts.minimumClusterSize = opts.minClusterSize;\r\n  }\r\n\r\n  if(opts.styles) {\r\n\r\n    if(opts.styles) {\r\n      var styles = opts.styles;\r\n      if(styles.size) {\r\n        styles.width = styles.getWidth();\r\n        styles.height = styles.getHeight();\r\n      }\r\n    }\r\n\r\n  }\r\n}\r\n\r\n\r\n// var flightPlanCoordinates = [\r\n//   {lat: 37.772, lng: -122.214},\r\n//   {lat: 21.291, lng: -157.821},\r\n//   {lat: -18.142, lng: 178.431},\r\n//   {lat: -27.467, lng: 153.027}\r\n// ];\r\n\r\n// var lineArr = [\r\n//   [116.368904, 39.913423],\r\n//   [116.382122, 39.901176],\r\n//   [116.387271, 39.912501],\r\n//   [116.398258, 39.904600]\r\n// ];\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9mb3JtYXRPcHQuanM/NzYxNiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQSxpQ0FBaUMseUJBQXlCO0FBQzFEOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBLE1BQU0sMkJBQTJCO0FBQ2pDLE1BQU0sMkJBQTJCO0FBQ2pDLE1BQU0sMkJBQTJCO0FBQ2pDLE1BQU07QUFDTjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiMzcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBmaXp6IG9uIDIwMTcvMi8xNC5cclxuICovXHJcblxyXG52YXIgTG5nTGF0ID0gcmVxdWlyZSgnLi9MbmdMYXQnKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gIG1hcDogZm9ybWF0T3B0c1VuaSxcclxuXHJcbiAgaW5mb1dpbmRvdzogZm9ybWF0T3B0c1VuaSxcclxuXHJcbiAgbWFya2VyOiBmb3JtYXRPcHRzVW5pLFxyXG5cclxuICBwb2x5bGluZTogZm9ybWF0T3B0c1VuaSxcclxuXHJcbiAgcG9seWdvbjogZm9ybWF0T3B0c1VuaSxcclxuXHJcbiAgY2lyY2xlOiBmb3JtYXRPcHRzVW5pLFxyXG5cclxuICBtYXJrZXJDbHVzdGVyZXI6IGZvcm1hdE1hcmtlckNsdXN0ZXJlclxyXG59O1xyXG5cclxuZnVuY3Rpb24gZm9ybWF0T3B0c1VuaShvcHRzKSB7XHJcblxyXG4gIGlmKCdwb3NpdGlvbicgaW4gb3B0cykge1xyXG4gICAgb3B0cy5wb3NpdGlvbiA9IG5ldyBMbmdMYXQob3B0cy5wb3NpdGlvbik7XHJcbiAgfVxyXG5cclxuICBpZihvcHRzLnBhdGgpIHtcclxuICAgIG9wdHMucGF0aCA9IHRyYW5zZnJvbVBhdGhUb1BhdGhzKG9wdHMucGF0aCk7XHJcbiAgfVxyXG5cclxuICBpZihvcHRzLmNlbnRlcikge1xyXG4gICAgb3B0cy5jZW50ZXIgPSBuZXcgTG5nTGF0KG9wdHMuY2VudGVyKTtcclxuICB9XHJcblxyXG4gIGlmKG9wdHMubWFwKSB7XHJcbiAgICBvcHRzLm1hcCA9IG9wdHMubWFwLl9pbm5lcjtcclxuICB9XHJcblxyXG4gIHJldHVybiBvcHRzO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0cmFuc2Zyb21QYXRoVG9QYXRocyhwYXRoKSB7XHJcbiAgdmFyIHBhdGhzID0gW107XHJcbiAgcGF0aC5mb3JFYWNoKCBmdW5jdGlvbihpdGVtLCBpbmRleCkge1xyXG4gICAgcGF0aHMucHVzaChhcnJDcmVhdGVMbmdMYXQoaXRlbSkpO1xyXG4gIH0pO1xyXG4gIHJldHVybiBwYXRocztcclxufVxyXG5cclxuZnVuY3Rpb24gYXJyQ3JlYXRlTG5nTGF0KGFycikge1xyXG4gIHJldHVybiBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKHtsbmc6IGFyclswXSwgbGF0OiBhcnJbMV19KTtcclxufVxyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKiBtYXJrZXJDbHVzdGVyZXJcclxuICogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbmZ1bmN0aW9uIGZvcm1hdE1hcmtlckNsdXN0ZXJlcihtYXAsIG1hcmtlcnMsIG9wdHMpIHtcclxuICB2YXIgbmV3T3B0cyA9IHt9O1xyXG5cclxuICBpZihtYXAuX2lubmVyKSB7XHJcbiAgICBuZXdPcHRzLm1hcCA9IG1hcC5faW5uZXI7XHJcbiAgfSBlbHNlIHtcclxuICAgIG5ld09wdHMubWFwID0gbWFwO1xyXG4gIH1cclxuXHJcbiAgbmV3T3B0cy5tYXJrZXJzID0gbWFya2Vycy5tYXAoIGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgIHJldHVybiBpdGVtLl9pbm5lcjtcclxuICB9KTtcclxuXHJcbiAgbmV3T3B0cy5vcHRzID0gZm9ybWF0TWFya2VyQ2x1c3RlcmVyT3B0cyhvcHRzKTtcclxuXHJcbiAgcmV0dXJuIG5ld09wdHM7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0c1xyXG4gKiBAZGlmZiA6IG1pbkNsdXN0ZXJTaXplIDogbWluaW11bUNsdXN0ZXJTaXplXHJcbiAqICovXHJcbmZ1bmN0aW9uIGZvcm1hdE1hcmtlckNsdXN0ZXJlck9wdHMob3B0cykge1xyXG4gIGlmKG9wdHMubWluQ2x1c3RlclNpemUpIHtcclxuICAgIG9wdHMubWluaW11bUNsdXN0ZXJTaXplID0gb3B0cy5taW5DbHVzdGVyU2l6ZTtcclxuICB9XHJcblxyXG4gIGlmKG9wdHMuc3R5bGVzKSB7XHJcblxyXG4gICAgaWYob3B0cy5zdHlsZXMpIHtcclxuICAgICAgdmFyIHN0eWxlcyA9IG9wdHMuc3R5bGVzO1xyXG4gICAgICBpZihzdHlsZXMuc2l6ZSkge1xyXG4gICAgICAgIHN0eWxlcy53aWR0aCA9IHN0eWxlcy5nZXRXaWR0aCgpO1xyXG4gICAgICAgIHN0eWxlcy5oZWlnaHQgPSBzdHlsZXMuZ2V0SGVpZ2h0KCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgfVxyXG59XHJcblxyXG5cclxuLy8gdmFyIGZsaWdodFBsYW5Db29yZGluYXRlcyA9IFtcclxuLy8gICB7bGF0OiAzNy43NzIsIGxuZzogLTEyMi4yMTR9LFxyXG4vLyAgIHtsYXQ6IDIxLjI5MSwgbG5nOiAtMTU3LjgyMX0sXHJcbi8vICAge2xhdDogLTE4LjE0MiwgbG5nOiAxNzguNDMxfSxcclxuLy8gICB7bGF0OiAtMjcuNDY3LCBsbmc6IDE1My4wMjd9XHJcbi8vIF07XHJcblxyXG4vLyB2YXIgbGluZUFyciA9IFtcclxuLy8gICBbMTE2LjM2ODkwNCwgMzkuOTEzNDIzXSxcclxuLy8gICBbMTE2LjM4MjEyMiwgMzkuOTAxMTc2XSxcclxuLy8gICBbMTE2LjM4NzI3MSwgMzkuOTEyNTAxXSxcclxuLy8gICBbMTE2LjM5ODI1OCwgMzkuOTA0NjAwXVxyXG4vLyBdO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzL21hcC9nbWFwL2Zvcm1hdE9wdC5qc1xuLy8gbW9kdWxlIGlkID0gMzdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 38 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/13.\r\n * @Class Marker\r\n */\r\nvar obc = __webpack_require__(39);\r\nvar onOff = __webpack_require__(33);\r\nvar formatOpts = __webpack_require__(37);\r\n\r\n/**\r\n * Represents a Marker\r\n * @constructor\r\n * @param {Object} opts\r\n * @param {Object} inner\r\n * @return an object, inner is prime google map Marker instance.\r\n * */\r\nfunction Marker(opts, inner) {\r\n\r\n  this._type = 'Marker';\r\n\r\n  if(inner) {\r\n    this._inner = inner;\r\n  } else {\r\n    // 在opts转换之前就要判断添加overlay\r\n    obc.addOverlay(opts, this);\r\n\r\n    var newOpts = formatOpts.marker(opts);\r\n    this._inner = new google.maps.Marker(newOpts);\r\n  }\r\n}\r\n\r\nMarker.prototype = {\r\n  setMap: obc.setMap,\r\n  getMap: obc.getMap,\r\n  hide: obc.hide,\r\n  show: obc.show,\r\n  on: onOff.on,\r\n  off: onOff.off\r\n};\r\n\r\nmodule.exports = Marker;\r\n\r\n\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9NYXJrZXIuanM/ZDdkNSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsImZpbGUiOiIzOC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGZpenogb24gMjAxNy8yLzEzLlxyXG4gKiBAQ2xhc3MgTWFya2VyXHJcbiAqL1xyXG52YXIgb2JjID0gcmVxdWlyZSgnLi9vdmVybGF5QmFzZUNsYXNzJyk7XHJcbnZhciBvbk9mZiA9IHJlcXVpcmUoJy4vb25PZmYnKTtcclxudmFyIGZvcm1hdE9wdHMgPSByZXF1aXJlKCcuL2Zvcm1hdE9wdCcpO1xyXG5cclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYSBNYXJrZXJcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBpbm5lclxyXG4gKiBAcmV0dXJuIGFuIG9iamVjdCwgaW5uZXIgaXMgcHJpbWUgZ29vZ2xlIG1hcCBNYXJrZXIgaW5zdGFuY2UuXHJcbiAqICovXHJcbmZ1bmN0aW9uIE1hcmtlcihvcHRzLCBpbm5lcikge1xyXG5cclxuICB0aGlzLl90eXBlID0gJ01hcmtlcic7XHJcblxyXG4gIGlmKGlubmVyKSB7XHJcbiAgICB0aGlzLl9pbm5lciA9IGlubmVyO1xyXG4gIH0gZWxzZSB7XHJcbiAgICAvLyDlnKhvcHRz6L2s5o2i5LmL5YmN5bCx6KaB5Yik5pat5re75Yqgb3ZlcmxheVxyXG4gICAgb2JjLmFkZE92ZXJsYXkob3B0cywgdGhpcyk7XHJcblxyXG4gICAgdmFyIG5ld09wdHMgPSBmb3JtYXRPcHRzLm1hcmtlcihvcHRzKTtcclxuICAgIHRoaXMuX2lubmVyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcihuZXdPcHRzKTtcclxuICB9XHJcbn1cclxuXHJcbk1hcmtlci5wcm90b3R5cGUgPSB7XHJcbiAgc2V0TWFwOiBvYmMuc2V0TWFwLFxyXG4gIGdldE1hcDogb2JjLmdldE1hcCxcclxuICBoaWRlOiBvYmMuaGlkZSxcclxuICBzaG93OiBvYmMuc2hvdyxcclxuICBvbjogb25PZmYub24sXHJcbiAgb2ZmOiBvbk9mZi5vZmZcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gTWFya2VyO1xyXG5cclxuXHJcblxyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzL21hcC9nbWFwL01hcmtlci5qc1xuLy8gbW9kdWxlIGlkID0gMzhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 39 */
/***/ function(module, exports) {

	eval("/**\r\n * Created by fizz on 2017/2/17.\r\n */\r\n\r\nmodule.exports = {\r\n  setMap: function(map) {\r\n    if(map !== null) {\r\n      this._inner._smap = map;\r\n      map._overLayers[this._type].push(this);\r\n      this._inner.setMap(map._inner);\r\n    } else {\r\n      this._inner.setMap(null);\r\n    }\r\n  },\r\n\r\n  getMap: function() {\r\n    return this._inner._smap;\r\n  },\r\n\r\n  hide: function() {\r\n    this._inner.setVisible(false);\r\n  },\r\n\r\n  show: function() {\r\n    this._inner.setVisible(true);\r\n  },\r\n\r\n  addOverlay: function(opts, self) {\r\n    if('map' in opts) {\r\n      opts.map._overLayers[self._type].push(self);\r\n    }\r\n  }\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9vdmVybGF5QmFzZUNsYXNzLmpzPzEyZDMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiMzkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBmaXp6IG9uIDIwMTcvMi8xNy5cclxuICovXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICBzZXRNYXA6IGZ1bmN0aW9uKG1hcCkge1xyXG4gICAgaWYobWFwICE9PSBudWxsKSB7XHJcbiAgICAgIHRoaXMuX2lubmVyLl9zbWFwID0gbWFwO1xyXG4gICAgICBtYXAuX292ZXJMYXllcnNbdGhpcy5fdHlwZV0ucHVzaCh0aGlzKTtcclxuICAgICAgdGhpcy5faW5uZXIuc2V0TWFwKG1hcC5faW5uZXIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faW5uZXIuc2V0TWFwKG51bGwpO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIGdldE1hcDogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5uZXIuX3NtYXA7XHJcbiAgfSxcclxuXHJcbiAgaGlkZTogZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLl9pbm5lci5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICB9LFxyXG5cclxuICBzaG93OiBmdW5jdGlvbigpIHtcclxuICAgIHRoaXMuX2lubmVyLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgfSxcclxuXHJcbiAgYWRkT3ZlcmxheTogZnVuY3Rpb24ob3B0cywgc2VsZikge1xyXG4gICAgaWYoJ21hcCcgaW4gb3B0cykge1xyXG4gICAgICBvcHRzLm1hcC5fb3ZlckxheWVyc1tzZWxmLl90eXBlXS5wdXNoKHNlbGYpO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9vdmVybGF5QmFzZUNsYXNzLmpzXG4vLyBtb2R1bGUgaWQgPSAzOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 40 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/14.\r\n */\r\nvar onOff = __webpack_require__(33);\r\nvar formatOpts = __webpack_require__(37);\r\nvar obc = __webpack_require__(39);\r\n\r\n/**\r\n * @constructor\r\n * @opts {Object} opts\r\n * */\r\nfunction InfoWindow(opts) {\r\n  this._type = 'InfoWindow';\r\n  obc.addOverlay(opts, this);\r\n\r\n  var fmOpts = formatOpts.infoWindow(opts);\r\n  this._inner = new google.maps.InfoWindow(fmOpts);\r\n}\r\n\r\nInfoWindow.prototype = {\r\n  /**\r\n   * @function open a infoWindow in the position\r\n   * @map {Map} map required\r\n   * @pos {LngLat} position lngLat\r\n   * */\r\n  open: function(map, pos) {\r\n    if(pos) {\r\n      this._inner.setPosition(pos);\r\n    }\r\n    this._inner.open(map._inner);\r\n    this._inner._smap = map;\r\n    map._overLayers.InfoWindow.push(this);\r\n    this._isOpen = true;\r\n  },\r\n\r\n  close: function() {\r\n    this._inner.close();\r\n    this._isOpen = false;\r\n    var infoWindows = this._inner._smap._overLayers.InfoWindow;\r\n    infoWindows.filter( function(item, index) {\r\n      if(item == this) {\r\n        infoWindows.splice(index, 1);\r\n      }\r\n    });\r\n  },\r\n\r\n  getIsOpen: function() {\r\n    return this._isOpen;\r\n  },\r\n\r\n  /**\r\n   * @function setContent\r\n   * @content {String|htmlDOM} content\r\n   * */\r\n  setContent: function(content) {\r\n    this._inner.setContent(content);\r\n  },\r\n\r\n  getContent: function() {\r\n    return this._inner.getContent();\r\n  },\r\n\r\n  setPosition: function(lngLat) {\r\n    this._inner.setPosition(lngLat);\r\n  },\r\n\r\n  getPosition: function() {\r\n    return this._inner.getPosition();\r\n  },\r\n\r\n  // todo: google 不支持\r\n  setSize: function(size) {\r\n\r\n  },\r\n\r\n  // todo: google 不支持\r\n  getSize: function() {\r\n\r\n  },\r\n\r\n  on: onOff.on,\r\n  off: onOff.off\r\n};\r\n\r\n\r\n\r\nmodule.exports = InfoWindow;\r\n\r\n\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9JbmZvV2luZG93LmpzP2E3MzAiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVLE9BQU87QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsSUFBSTtBQUNmLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsZUFBZSxlQUFlO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUEsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7Ozs7QUFJQSIsImZpbGUiOiI0MC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGZpenogb24gMjAxNy8yLzE0LlxyXG4gKi9cclxudmFyIG9uT2ZmID0gcmVxdWlyZSgnLi9vbk9mZicpO1xyXG52YXIgZm9ybWF0T3B0cyA9IHJlcXVpcmUoJy4vZm9ybWF0T3B0Jyk7XHJcbnZhciBvYmMgPSByZXF1aXJlKCcuL292ZXJsYXlCYXNlQ2xhc3MnKTtcclxuXHJcbi8qKlxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQG9wdHMge09iamVjdH0gb3B0c1xyXG4gKiAqL1xyXG5mdW5jdGlvbiBJbmZvV2luZG93KG9wdHMpIHtcclxuICB0aGlzLl90eXBlID0gJ0luZm9XaW5kb3cnO1xyXG4gIG9iYy5hZGRPdmVybGF5KG9wdHMsIHRoaXMpO1xyXG5cclxuICB2YXIgZm1PcHRzID0gZm9ybWF0T3B0cy5pbmZvV2luZG93KG9wdHMpO1xyXG4gIHRoaXMuX2lubmVyID0gbmV3IGdvb2dsZS5tYXBzLkluZm9XaW5kb3coZm1PcHRzKTtcclxufVxyXG5cclxuSW5mb1dpbmRvdy5wcm90b3R5cGUgPSB7XHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIG9wZW4gYSBpbmZvV2luZG93IGluIHRoZSBwb3NpdGlvblxyXG4gICAqIEBtYXAge01hcH0gbWFwIHJlcXVpcmVkXHJcbiAgICogQHBvcyB7TG5nTGF0fSBwb3NpdGlvbiBsbmdMYXRcclxuICAgKiAqL1xyXG4gIG9wZW46IGZ1bmN0aW9uKG1hcCwgcG9zKSB7XHJcbiAgICBpZihwb3MpIHtcclxuICAgICAgdGhpcy5faW5uZXIuc2V0UG9zaXRpb24ocG9zKTtcclxuICAgIH1cclxuICAgIHRoaXMuX2lubmVyLm9wZW4obWFwLl9pbm5lcik7XHJcbiAgICB0aGlzLl9pbm5lci5fc21hcCA9IG1hcDtcclxuICAgIG1hcC5fb3ZlckxheWVycy5JbmZvV2luZG93LnB1c2godGhpcyk7XHJcbiAgICB0aGlzLl9pc09wZW4gPSB0cnVlO1xyXG4gIH0sXHJcblxyXG4gIGNsb3NlOiBmdW5jdGlvbigpIHtcclxuICAgIHRoaXMuX2lubmVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9pc09wZW4gPSBmYWxzZTtcclxuICAgIHZhciBpbmZvV2luZG93cyA9IHRoaXMuX2lubmVyLl9zbWFwLl9vdmVyTGF5ZXJzLkluZm9XaW5kb3c7XHJcbiAgICBpbmZvV2luZG93cy5maWx0ZXIoIGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7XHJcbiAgICAgIGlmKGl0ZW0gPT0gdGhpcykge1xyXG4gICAgICAgIGluZm9XaW5kb3dzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0sXHJcblxyXG4gIGdldElzT3BlbjogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNPcGVuO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBzZXRDb250ZW50XHJcbiAgICogQGNvbnRlbnQge1N0cmluZ3xodG1sRE9NfSBjb250ZW50XHJcbiAgICogKi9cclxuICBzZXRDb250ZW50OiBmdW5jdGlvbihjb250ZW50KSB7XHJcbiAgICB0aGlzLl9pbm5lci5zZXRDb250ZW50KGNvbnRlbnQpO1xyXG4gIH0sXHJcblxyXG4gIGdldENvbnRlbnQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lubmVyLmdldENvbnRlbnQoKTtcclxuICB9LFxyXG5cclxuICBzZXRQb3NpdGlvbjogZnVuY3Rpb24obG5nTGF0KSB7XHJcbiAgICB0aGlzLl9pbm5lci5zZXRQb3NpdGlvbihsbmdMYXQpO1xyXG4gIH0sXHJcblxyXG4gIGdldFBvc2l0aW9uOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbm5lci5nZXRQb3NpdGlvbigpO1xyXG4gIH0sXHJcblxyXG4gIC8vIHRvZG86IGdvb2dsZSDkuI3mlK/mjIFcclxuICBzZXRTaXplOiBmdW5jdGlvbihzaXplKSB7XHJcblxyXG4gIH0sXHJcblxyXG4gIC8vIHRvZG86IGdvb2dsZSDkuI3mlK/mjIFcclxuICBnZXRTaXplOiBmdW5jdGlvbigpIHtcclxuXHJcbiAgfSxcclxuXHJcbiAgb246IG9uT2ZmLm9uLFxyXG4gIG9mZjogb25PZmYub2ZmXHJcbn07XHJcblxyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gSW5mb1dpbmRvdztcclxuXHJcblxyXG5cclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9JbmZvV2luZG93LmpzXG4vLyBtb2R1bGUgaWQgPSA0MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 41 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/13.\r\n * @constructor Polyline\r\n */\r\n\r\nvar obc = __webpack_require__(39);\r\nvar onOff = __webpack_require__(33);\r\nvar formatOpts = __webpack_require__(37);\r\n\r\n/**\r\n * @constructor\r\n * @opts {Object} options\r\n * @return an object, inner is prime google map Polyline instance.\r\n * */\r\nfunction Polyline(opts) {\r\n  this._type = 'Polyline';\r\n  obc.addOverlay(opts, this);\r\n\r\n  var newOpts = formatOpts.polyline(opts);\r\n  this._inner = new google.maps.Polyline(newOpts);\r\n  // this._inner._self = this;\r\n}\r\n\r\nPolyline.prototype = {\r\n  setPath: function() {},\r\n  getPath: function() {},\r\n  setOptions: function() {},\r\n  getOptions: function() {},\r\n  getLength: function() {},\r\n\r\n  getBounds: function() {},\r\n\r\n  hide: obc.hide,\r\n  show: obc.show,\r\n  setMap: obc.setMap,\r\n\r\n  /**\r\n   * @ext {any} extData\r\n   * */\r\n  setExtData: function(ext) {\r\n    this._inner.extDate = ext;\r\n  },\r\n\r\n  getExtData: function() {\r\n    return this._inner.extDate;\r\n  },\r\n\r\n  on: onOff.on,\r\n  off: onOff.off\r\n};\r\n\r\nvar PolylineEventMap = {\r\n\r\n};\r\n\r\nmodule.exports = Polyline;\r\n\r\n\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9Qb2x5bGluZS5qcz8wN2IwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVSxPQUFPO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx3QkFBd0I7QUFDeEIsd0JBQXdCO0FBQ3hCLDJCQUEyQjtBQUMzQiwyQkFBMkI7QUFDM0IsMEJBQTBCOztBQUUxQiwwQkFBMEI7O0FBRTFCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFdBQVcsSUFBSTtBQUNmO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBIiwiZmlsZSI6IjQxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTMuXHJcbiAqIEBjb25zdHJ1Y3RvciBQb2x5bGluZVxyXG4gKi9cclxuXHJcbnZhciBvYmMgPSByZXF1aXJlKCcuL292ZXJsYXlCYXNlQ2xhc3MnKTtcclxudmFyIG9uT2ZmID0gcmVxdWlyZSgnLi9vbk9mZicpO1xyXG52YXIgZm9ybWF0T3B0cyA9IHJlcXVpcmUoJy4vZm9ybWF0T3B0Jyk7XHJcblxyXG4vKipcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBvcHRzIHtPYmplY3R9IG9wdGlvbnNcclxuICogQHJldHVybiBhbiBvYmplY3QsIGlubmVyIGlzIHByaW1lIGdvb2dsZSBtYXAgUG9seWxpbmUgaW5zdGFuY2UuXHJcbiAqICovXHJcbmZ1bmN0aW9uIFBvbHlsaW5lKG9wdHMpIHtcclxuICB0aGlzLl90eXBlID0gJ1BvbHlsaW5lJztcclxuICBvYmMuYWRkT3ZlcmxheShvcHRzLCB0aGlzKTtcclxuXHJcbiAgdmFyIG5ld09wdHMgPSBmb3JtYXRPcHRzLnBvbHlsaW5lKG9wdHMpO1xyXG4gIHRoaXMuX2lubmVyID0gbmV3IGdvb2dsZS5tYXBzLlBvbHlsaW5lKG5ld09wdHMpO1xyXG4gIC8vIHRoaXMuX2lubmVyLl9zZWxmID0gdGhpcztcclxufVxyXG5cclxuUG9seWxpbmUucHJvdG90eXBlID0ge1xyXG4gIHNldFBhdGg6IGZ1bmN0aW9uKCkge30sXHJcbiAgZ2V0UGF0aDogZnVuY3Rpb24oKSB7fSxcclxuICBzZXRPcHRpb25zOiBmdW5jdGlvbigpIHt9LFxyXG4gIGdldE9wdGlvbnM6IGZ1bmN0aW9uKCkge30sXHJcbiAgZ2V0TGVuZ3RoOiBmdW5jdGlvbigpIHt9LFxyXG5cclxuICBnZXRCb3VuZHM6IGZ1bmN0aW9uKCkge30sXHJcblxyXG4gIGhpZGU6IG9iYy5oaWRlLFxyXG4gIHNob3c6IG9iYy5zaG93LFxyXG4gIHNldE1hcDogb2JjLnNldE1hcCxcclxuXHJcbiAgLyoqXHJcbiAgICogQGV4dCB7YW55fSBleHREYXRhXHJcbiAgICogKi9cclxuICBzZXRFeHREYXRhOiBmdW5jdGlvbihleHQpIHtcclxuICAgIHRoaXMuX2lubmVyLmV4dERhdGUgPSBleHQ7XHJcbiAgfSxcclxuXHJcbiAgZ2V0RXh0RGF0YTogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5uZXIuZXh0RGF0ZTtcclxuICB9LFxyXG5cclxuICBvbjogb25PZmYub24sXHJcbiAgb2ZmOiBvbk9mZi5vZmZcclxufTtcclxuXHJcbnZhciBQb2x5bGluZUV2ZW50TWFwID0ge1xyXG5cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUG9seWxpbmU7XHJcblxyXG5cclxuXHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2dtYXAvUG9seWxpbmUuanNcbi8vIG1vZHVsZSBpZCA9IDQxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 42 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/13.\r\n * @constructor Polygon\r\n */\r\n\r\n// var event = require('./event');\r\nvar onOff = __webpack_require__(33);\r\nvar formatOpts = __webpack_require__(37);\r\nvar obc = __webpack_require__(39);\r\n\r\n/**\r\n * @constructor\r\n * @param {Object} opts\r\n * @return an object, inner is prime google map Polygon instance.\r\n * */\r\nfunction Polygon(opts) {\r\n  this._type = 'Polygon';\r\n  obc.addOverlay(opts, this);\r\n\r\n  var newOpts = formatOpts.polygon(opts);\r\n  this._inner = new google.maps.Polygon(newOpts);\r\n\r\n}\r\n\r\nPolygon.prototype = {\r\n\r\n  setMap: obc.setMap,\r\n\r\n  /**\r\n   * @param {path:Array LngLat | Array lngLat} path\r\n   * */\r\n  setPath: function(path) {\r\n    this._inner.setPath( path );\r\n  },\r\n  getPath: function() {},\r\n\r\n  setOptions: function() {\r\n    this._inner.setOptions( formatOpts.polygon(opts) );\r\n  },\r\n\r\n  getOptions: function() {},\r\n\r\n  getBounds: function() {},\r\n\r\n  getArea: function() {},\r\n\r\n  hide: obc.hide,\r\n\r\n  show: obc.show,\r\n\r\n\r\n\r\n  /**\r\n   * @param {any} ext extData\r\n   * */\r\n  setExtData: function(ext) {\r\n    this._inner.extDate = ext;\r\n  },\r\n\r\n  getExtData: function() {\r\n    return this._inner.extDate;\r\n  },\r\n\r\n  /**\r\n   * @function judge whether a point in the polygon inner\r\n   * @param {LngLat} point\r\n   * */\r\n  contains: function(point) {\r\n\r\n  },\r\n\r\n  on: onOff.on,\r\n  off: onOff.off\r\n};\r\n\r\nmodule.exports = Polygon;\r\n\r\n\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9Qb2x5Z29uLmpzP2U3MjciXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQSxhQUFhLGlDQUFpQztBQUM5QztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsd0JBQXdCOztBQUV4QjtBQUNBO0FBQ0EsR0FBRzs7QUFFSCwyQkFBMkI7O0FBRTNCLDBCQUEwQjs7QUFFMUIsd0JBQXdCOztBQUV4Qjs7QUFFQTs7OztBQUlBO0FBQ0EsYUFBYSxJQUFJO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQjtBQUNBOztBQUVBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6IjQyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTMuXHJcbiAqIEBjb25zdHJ1Y3RvciBQb2x5Z29uXHJcbiAqL1xyXG5cclxuLy8gdmFyIGV2ZW50ID0gcmVxdWlyZSgnLi9ldmVudCcpO1xyXG52YXIgb25PZmYgPSByZXF1aXJlKCcuL29uT2ZmJyk7XHJcbnZhciBmb3JtYXRPcHRzID0gcmVxdWlyZSgnLi9mb3JtYXRPcHQnKTtcclxudmFyIG9iYyA9IHJlcXVpcmUoJy4vb3ZlcmxheUJhc2VDbGFzcycpO1xyXG5cclxuLyoqXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0c1xyXG4gKiBAcmV0dXJuIGFuIG9iamVjdCwgaW5uZXIgaXMgcHJpbWUgZ29vZ2xlIG1hcCBQb2x5Z29uIGluc3RhbmNlLlxyXG4gKiAqL1xyXG5mdW5jdGlvbiBQb2x5Z29uKG9wdHMpIHtcclxuICB0aGlzLl90eXBlID0gJ1BvbHlnb24nO1xyXG4gIG9iYy5hZGRPdmVybGF5KG9wdHMsIHRoaXMpO1xyXG5cclxuICB2YXIgbmV3T3B0cyA9IGZvcm1hdE9wdHMucG9seWdvbihvcHRzKTtcclxuICB0aGlzLl9pbm5lciA9IG5ldyBnb29nbGUubWFwcy5Qb2x5Z29uKG5ld09wdHMpO1xyXG5cclxufVxyXG5cclxuUG9seWdvbi5wcm90b3R5cGUgPSB7XHJcblxyXG4gIHNldE1hcDogb2JjLnNldE1hcCxcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtwYXRoOkFycmF5IExuZ0xhdCB8IEFycmF5IGxuZ0xhdH0gcGF0aFxyXG4gICAqICovXHJcbiAgc2V0UGF0aDogZnVuY3Rpb24ocGF0aCkge1xyXG4gICAgdGhpcy5faW5uZXIuc2V0UGF0aCggcGF0aCApO1xyXG4gIH0sXHJcbiAgZ2V0UGF0aDogZnVuY3Rpb24oKSB7fSxcclxuXHJcbiAgc2V0T3B0aW9uczogZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLl9pbm5lci5zZXRPcHRpb25zKCBmb3JtYXRPcHRzLnBvbHlnb24ob3B0cykgKTtcclxuICB9LFxyXG5cclxuICBnZXRPcHRpb25zOiBmdW5jdGlvbigpIHt9LFxyXG5cclxuICBnZXRCb3VuZHM6IGZ1bmN0aW9uKCkge30sXHJcblxyXG4gIGdldEFyZWE6IGZ1bmN0aW9uKCkge30sXHJcblxyXG4gIGhpZGU6IG9iYy5oaWRlLFxyXG5cclxuICBzaG93OiBvYmMuc2hvdyxcclxuXHJcblxyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge2FueX0gZXh0IGV4dERhdGFcclxuICAgKiAqL1xyXG4gIHNldEV4dERhdGE6IGZ1bmN0aW9uKGV4dCkge1xyXG4gICAgdGhpcy5faW5uZXIuZXh0RGF0ZSA9IGV4dDtcclxuICB9LFxyXG5cclxuICBnZXRFeHREYXRhOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbm5lci5leHREYXRlO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBqdWRnZSB3aGV0aGVyIGEgcG9pbnQgaW4gdGhlIHBvbHlnb24gaW5uZXJcclxuICAgKiBAcGFyYW0ge0xuZ0xhdH0gcG9pbnRcclxuICAgKiAqL1xyXG4gIGNvbnRhaW5zOiBmdW5jdGlvbihwb2ludCkge1xyXG5cclxuICB9LFxyXG5cclxuICBvbjogb25PZmYub24sXHJcbiAgb2ZmOiBvbk9mZi5vZmZcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUG9seWdvbjtcclxuXHJcblxyXG5cclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9Qb2x5Z29uLmpzXG4vLyBtb2R1bGUgaWQgPSA0MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 43 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/13.\r\n * @constructor Circle\r\n */\r\n\r\n// var event = require('./event');\r\nvar onOff = __webpack_require__(33);\r\nvar formatOpts = __webpack_require__(37);\r\nvar obc = __webpack_require__(39);\r\nvar LngLat = __webpack_require__(27);\r\n\r\n/**\r\n * @constructor\r\n * @opts {Object} opts\r\n * @return an object, inner is prime google map Circle instance.\r\n * */\r\nfunction Circle(opts) {\r\n  this._type = 'Circle';\r\n  obc.addOverlay(opts, this);\r\n\r\n  var newOpts = formatOpts.circle(opts);\r\n  this._inner = new google.maps.Circle(newOpts);\r\n}\r\n\r\nCircle.prototype = {\r\n\r\n  setMap: obc.setMap,\r\n\r\n  setCenter: function(center) {\r\n    this._inner.setCenter(center);\r\n  },\r\n\r\n  getCenter: function() {\r\n    return new LngLat(' ',' ',this._inner.getCenter());\r\n  },\r\n\r\n  getBounds: function() {\r\n\r\n  },\r\n\r\n  /**\r\n   * @param {Number} radius\r\n   * */\r\n  setRadius: function(radius) {\r\n    this._inner.setRadius(radius);\r\n  },\r\n\r\n  getRadius: function() {\r\n    return this._inner.getRadius();\r\n  },\r\n\r\n  setOptions: function() {\r\n    this._inner.setOptions( formatOpts.polygon(opts) );\r\n  },\r\n\r\n  getOptions: function() {},\r\n\r\n  getArea: function() {},\r\n\r\n  hide: obc.hide,\r\n\r\n  show: obc.show,\r\n\r\n  /**\r\n   * @ext {any} extData\r\n   * */\r\n  setExtData: function(ext) {\r\n    this._inner.extDate = ext;\r\n  },\r\n\r\n  getExtData: function() {\r\n    return this._inner.extDate;\r\n  },\r\n\r\n  /**\r\n   * @function judge whether a point in the polygon inner\r\n   * @point {LngLat}\r\n   * @return {Boolean} true or false\r\n   * */\r\n  contains: function(point) {\r\n\r\n  },\r\n\r\n  on: onOff.on,\r\n  off: onOff.off\r\n};\r\n\r\nvar CircleEventMap = {\r\n\r\n};\r\n\r\nmodule.exports = Circle;\r\n\r\n\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9DaXJjbGUuanM/YTM5OSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVLE9BQU87QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUEsR0FBRzs7QUFFSDtBQUNBLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVILDJCQUEyQjs7QUFFM0Isd0JBQXdCOztBQUV4Qjs7QUFFQTs7QUFFQTtBQUNBLFdBQVcsSUFBSTtBQUNmO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLGFBQWE7QUFDYixjQUFjLFFBQVE7QUFDdEI7QUFDQTs7QUFFQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSIsImZpbGUiOiI0My5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGZpenogb24gMjAxNy8yLzEzLlxyXG4gKiBAY29uc3RydWN0b3IgQ2lyY2xlXHJcbiAqL1xyXG5cclxuLy8gdmFyIGV2ZW50ID0gcmVxdWlyZSgnLi9ldmVudCcpO1xyXG52YXIgb25PZmYgPSByZXF1aXJlKCcuL29uT2ZmJyk7XHJcbnZhciBmb3JtYXRPcHRzID0gcmVxdWlyZSgnLi9mb3JtYXRPcHQnKTtcclxudmFyIG9iYyA9IHJlcXVpcmUoJy4vb3ZlcmxheUJhc2VDbGFzcycpO1xyXG52YXIgTG5nTGF0ID0gcmVxdWlyZSgnLi9MbmdMYXQnKTtcclxuXHJcbi8qKlxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQG9wdHMge09iamVjdH0gb3B0c1xyXG4gKiBAcmV0dXJuIGFuIG9iamVjdCwgaW5uZXIgaXMgcHJpbWUgZ29vZ2xlIG1hcCBDaXJjbGUgaW5zdGFuY2UuXHJcbiAqICovXHJcbmZ1bmN0aW9uIENpcmNsZShvcHRzKSB7XHJcbiAgdGhpcy5fdHlwZSA9ICdDaXJjbGUnO1xyXG4gIG9iYy5hZGRPdmVybGF5KG9wdHMsIHRoaXMpO1xyXG5cclxuICB2YXIgbmV3T3B0cyA9IGZvcm1hdE9wdHMuY2lyY2xlKG9wdHMpO1xyXG4gIHRoaXMuX2lubmVyID0gbmV3IGdvb2dsZS5tYXBzLkNpcmNsZShuZXdPcHRzKTtcclxufVxyXG5cclxuQ2lyY2xlLnByb3RvdHlwZSA9IHtcclxuXHJcbiAgc2V0TWFwOiBvYmMuc2V0TWFwLFxyXG5cclxuICBzZXRDZW50ZXI6IGZ1bmN0aW9uKGNlbnRlcikge1xyXG4gICAgdGhpcy5faW5uZXIuc2V0Q2VudGVyKGNlbnRlcik7XHJcbiAgfSxcclxuXHJcbiAgZ2V0Q2VudGVyOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBuZXcgTG5nTGF0KCcgJywnICcsdGhpcy5faW5uZXIuZ2V0Q2VudGVyKCkpO1xyXG4gIH0sXHJcblxyXG4gIGdldEJvdW5kczogZnVuY3Rpb24oKSB7XHJcblxyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSByYWRpdXNcclxuICAgKiAqL1xyXG4gIHNldFJhZGl1czogZnVuY3Rpb24ocmFkaXVzKSB7XHJcbiAgICB0aGlzLl9pbm5lci5zZXRSYWRpdXMocmFkaXVzKTtcclxuICB9LFxyXG5cclxuICBnZXRSYWRpdXM6IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lubmVyLmdldFJhZGl1cygpO1xyXG4gIH0sXHJcblxyXG4gIHNldE9wdGlvbnM6IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy5faW5uZXIuc2V0T3B0aW9ucyggZm9ybWF0T3B0cy5wb2x5Z29uKG9wdHMpICk7XHJcbiAgfSxcclxuXHJcbiAgZ2V0T3B0aW9uczogZnVuY3Rpb24oKSB7fSxcclxuXHJcbiAgZ2V0QXJlYTogZnVuY3Rpb24oKSB7fSxcclxuXHJcbiAgaGlkZTogb2JjLmhpZGUsXHJcblxyXG4gIHNob3c6IG9iYy5zaG93LFxyXG5cclxuICAvKipcclxuICAgKiBAZXh0IHthbnl9IGV4dERhdGFcclxuICAgKiAqL1xyXG4gIHNldEV4dERhdGE6IGZ1bmN0aW9uKGV4dCkge1xyXG4gICAgdGhpcy5faW5uZXIuZXh0RGF0ZSA9IGV4dDtcclxuICB9LFxyXG5cclxuICBnZXRFeHREYXRhOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbm5lci5leHREYXRlO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBqdWRnZSB3aGV0aGVyIGEgcG9pbnQgaW4gdGhlIHBvbHlnb24gaW5uZXJcclxuICAgKiBAcG9pbnQge0xuZ0xhdH1cclxuICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlIG9yIGZhbHNlXHJcbiAgICogKi9cclxuICBjb250YWluczogZnVuY3Rpb24ocG9pbnQpIHtcclxuXHJcbiAgfSxcclxuXHJcbiAgb246IG9uT2ZmLm9uLFxyXG4gIG9mZjogb25PZmYub2ZmXHJcbn07XHJcblxyXG52YXIgQ2lyY2xlRXZlbnRNYXAgPSB7XHJcblxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBDaXJjbGU7XHJcblxyXG5cclxuXHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2dtYXAvQ2lyY2xlLmpzXG4vLyBtb2R1bGUgaWQgPSA0M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 44 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/15.\r\n */\r\n\r\nvar formatOpts = __webpack_require__(37);\r\nvar obc = __webpack_require__(39)\r\n\r\n/**\r\n * @constructor\r\n * @map {Map.Object}\r\n * @marker {Marker}\r\n * @opts {MarkerClustererOptions}\r\n * */\r\nfunction Clusterer(map, markers, opts) {\r\n  if(markers.length < 1) return;\r\n\r\n  this._type = 'MarkerClusterer';\r\n  obc.addOverlay({map: map}, this);\r\n\r\n  var newOpts = formatOpts.markerClusterer(map, markers, opts);\r\n  this._inner = new MarkerClusterer(newOpts.map, newOpts.markers, newOpts.opts);\r\n  this._inner._smap = map;\r\n}\r\n\r\nClusterer.prototype = {\r\n  getSize: function() {},\r\n\r\n  setMap: obc.setMap,\r\n\r\n  getMap: function() {\r\n    return this._inner.getMap();\r\n  },\r\n\r\n  addMarker: function() {},\r\n  removeMarker: function() {},\r\n\r\n  /**\r\n   * @param {Array} styles\r\n   * */\r\n  setStyles: function(styles) {\r\n\r\n  }\r\n};\r\n\r\nmodule.exports = Clusterer;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9NYXJrZXJDbHVzdGVyZXIuanM/ZTY0MSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNULFlBQVk7QUFDWixVQUFVO0FBQ1Y7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0JBQWtCLFNBQVM7O0FBRTNCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esd0JBQXdCOztBQUV4Qjs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSCwwQkFBMEI7QUFDMUIsNkJBQTZCOztBQUU3QjtBQUNBLGFBQWEsTUFBTTtBQUNuQjtBQUNBOztBQUVBO0FBQ0E7O0FBRUEiLCJmaWxlIjoiNDQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBmaXp6IG9uIDIwMTcvMi8xNS5cclxuICovXHJcblxyXG52YXIgZm9ybWF0T3B0cyA9IHJlcXVpcmUoJy4vZm9ybWF0T3B0Jyk7XHJcbnZhciBvYmMgPSByZXF1aXJlKCcuL292ZXJsYXlCYXNlQ2xhc3MnKVxyXG5cclxuLyoqXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAbWFwIHtNYXAuT2JqZWN0fVxyXG4gKiBAbWFya2VyIHtNYXJrZXJ9XHJcbiAqIEBvcHRzIHtNYXJrZXJDbHVzdGVyZXJPcHRpb25zfVxyXG4gKiAqL1xyXG5mdW5jdGlvbiBDbHVzdGVyZXIobWFwLCBtYXJrZXJzLCBvcHRzKSB7XHJcbiAgaWYobWFya2Vycy5sZW5ndGggPCAxKSByZXR1cm47XHJcblxyXG4gIHRoaXMuX3R5cGUgPSAnTWFya2VyQ2x1c3RlcmVyJztcclxuICBvYmMuYWRkT3ZlcmxheSh7bWFwOiBtYXB9LCB0aGlzKTtcclxuXHJcbiAgdmFyIG5ld09wdHMgPSBmb3JtYXRPcHRzLm1hcmtlckNsdXN0ZXJlcihtYXAsIG1hcmtlcnMsIG9wdHMpO1xyXG4gIHRoaXMuX2lubmVyID0gbmV3IE1hcmtlckNsdXN0ZXJlcihuZXdPcHRzLm1hcCwgbmV3T3B0cy5tYXJrZXJzLCBuZXdPcHRzLm9wdHMpO1xyXG4gIHRoaXMuX2lubmVyLl9zbWFwID0gbWFwO1xyXG59XHJcblxyXG5DbHVzdGVyZXIucHJvdG90eXBlID0ge1xyXG4gIGdldFNpemU6IGZ1bmN0aW9uKCkge30sXHJcblxyXG4gIHNldE1hcDogb2JjLnNldE1hcCxcclxuXHJcbiAgZ2V0TWFwOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbm5lci5nZXRNYXAoKTtcclxuICB9LFxyXG5cclxuICBhZGRNYXJrZXI6IGZ1bmN0aW9uKCkge30sXHJcbiAgcmVtb3ZlTWFya2VyOiBmdW5jdGlvbigpIHt9LFxyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge0FycmF5fSBzdHlsZXNcclxuICAgKiAqL1xyXG4gIHNldFN0eWxlczogZnVuY3Rpb24oc3R5bGVzKSB7XHJcblxyXG4gIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gQ2x1c3RlcmVyO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzL21hcC9nbWFwL01hcmtlckNsdXN0ZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gNDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 45 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/13.\r\n */\r\n\r\nvar LngLat = __webpack_require__(46);\r\nvar Bounds = __webpack_require__(47);\r\nvar Pixel = __webpack_require__(48);\r\nvar Size = __webpack_require__(49);\r\nvar Map = __webpack_require__(50);\r\nvar Marker = __webpack_require__(56);\r\nvar event = __webpack_require__(52);\r\nvar InfoWindow = __webpack_require__(58);\r\nvar Polyline = __webpack_require__(59);\r\nvar Polygon = __webpack_require__(60);\r\nvar Circle = __webpack_require__(61);\r\nvar MarkerClusterer = __webpack_require__(62);\r\n\r\nvar GMap = {};\r\n\r\nGMap.event = event;\r\n\r\nGMap.LngLat = LngLat;\r\nGMap.Bounds = Bounds;\r\nGMap.Pixel = Pixel;\r\nGMap.Size = Size;\r\n\r\nGMap.Map = Map;\r\nGMap.Marker = Marker;\r\nGMap.InfoWindow = InfoWindow;\r\nGMap.Polyline = Polyline;\r\nGMap.Polygon = Polygon;\r\nGMap.Circle = Circle;\r\nGMap.MarkerClusterer = MarkerClusterer;\r\n\r\nmodule.exports = window.GMap = GMap;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9pbmRleC5qcz9lZmJhIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJmaWxlIjoiNDUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBmaXp6IG9uIDIwMTcvMi8xMy5cclxuICovXHJcblxyXG52YXIgTG5nTGF0ID0gcmVxdWlyZSgnLi9MbmdMYXQnKTtcclxudmFyIEJvdW5kcyA9IHJlcXVpcmUoJy4vQm91bmRzJyk7XHJcbnZhciBQaXhlbCA9IHJlcXVpcmUoJy4vUGl4ZWwnKTtcclxudmFyIFNpemUgPSByZXF1aXJlKCcuL1NpemUnKTtcclxudmFyIE1hcCA9IHJlcXVpcmUoJy4vTWFwJyk7XHJcbnZhciBNYXJrZXIgPSByZXF1aXJlKCcuL01hcmtlcicpO1xyXG52YXIgZXZlbnQgPSByZXF1aXJlKCcuL2V2ZW50Jyk7XHJcbnZhciBJbmZvV2luZG93ID0gcmVxdWlyZSgnLi9JbmZvV2luZG93Jyk7XHJcbnZhciBQb2x5bGluZSA9IHJlcXVpcmUoJy4vUG9seWxpbmUnKTtcclxudmFyIFBvbHlnb24gPSByZXF1aXJlKCcuL1BvbHlnb24nKTtcclxudmFyIENpcmNsZSA9IHJlcXVpcmUoJy4vQ2lyY2xlJyk7XHJcbnZhciBNYXJrZXJDbHVzdGVyZXIgPSByZXF1aXJlKCcuL01hcmtlckNsdXN0ZXJlcicpO1xyXG5cclxudmFyIEdNYXAgPSB7fTtcclxuXHJcbkdNYXAuZXZlbnQgPSBldmVudDtcclxuXHJcbkdNYXAuTG5nTGF0ID0gTG5nTGF0O1xyXG5HTWFwLkJvdW5kcyA9IEJvdW5kcztcclxuR01hcC5QaXhlbCA9IFBpeGVsO1xyXG5HTWFwLlNpemUgPSBTaXplO1xyXG5cclxuR01hcC5NYXAgPSBNYXA7XHJcbkdNYXAuTWFya2VyID0gTWFya2VyO1xyXG5HTWFwLkluZm9XaW5kb3cgPSBJbmZvV2luZG93O1xyXG5HTWFwLlBvbHlsaW5lID0gUG9seWxpbmU7XHJcbkdNYXAuUG9seWdvbiA9IFBvbHlnb247XHJcbkdNYXAuQ2lyY2xlID0gQ2lyY2xlO1xyXG5HTWFwLk1hcmtlckNsdXN0ZXJlciA9IE1hcmtlckNsdXN0ZXJlcjtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gd2luZG93LkdNYXAgPSBHTWFwO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzL21hcC9ibWFwL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSA0NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 46 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/13.\r\n * @constructor LngLat\r\n * @attention 百度地图没有LngLat这个基础类，而是叫Point类。\r\n */\r\n\r\nvar util = __webpack_require__(25);\r\n\r\n/**\r\n * @constructor\r\n * @lng {Number} lng\r\n * @lat {Number} lat\r\n * */\r\nfunction LngLat(lng, lat, inner) {\r\n\r\n  // 包装GMap的LngLat结构\r\n  if(inner) {\r\n    this._inner = inner;\r\n  }\r\n\r\n  // 构造函数模式\r\n  else {\r\n    if(arguments.length < 2) {\r\n\r\n      // 数组形式，前者为lng，后者为lat [116.397428, 39.90923] -- position\r\n      if(util.isArray(lng)){\r\n\r\n        if( typeof lng[0] === 'string' || typeof lng[1] === 'string' ) {\r\n          this.lng = parseFloat(lng[0]);\r\n          this.lat = parseFloat(lng[1]);\r\n        }\r\n\r\n        else {\r\n          this.lng = lng[0];\r\n          this.lat = lng[1];\r\n        }\r\n      }\r\n\r\n      // 对象形式，lng对应lng，lat对应lat (lng: 116.397428, lat: 39.90923)\r\n      else {\r\n        this.lng = lng.lng;\r\n        this.lat = lng.lat;\r\n      }\r\n    }\r\n\r\n    else {\r\n\r\n      // (\"116.403322\", \"39.920255\") string\r\n      if(util.isString(lng) || util.isString(lat)) {\r\n        this.lng = parseFloat(lng);\r\n        this.lat = parseFloat(lat);\r\n      }\r\n\r\n      // (116.403322, 39.920255) Number\r\n      else {\r\n        this.lng = lng;\r\n        this.lat = lat;\r\n      }\r\n    }\r\n\r\n    this._inner = new BMap.Point(this.lng, this.lat);\r\n  }\r\n\r\n  this._type = 'LngLat';\r\n\r\n}\r\n\r\nLngLat.prototype = {\r\n  /**\r\n   * @function offset\r\n   * @param {Number} w\r\n   * @param {Number} s\r\n   * */\r\n  offset: function(w, s) {\r\n\r\n  },\r\n\r\n  distance: function() {\r\n\r\n  },\r\n\r\n  getLng: function() {\r\n    return this._inner.lng;\r\n  },\r\n\r\n  getLat: function() {\r\n    return this._inner.lat;\r\n  },\r\n\r\n  equals: function(point) {\r\n    return this._inner.equals(point._inner);\r\n  },\r\n\r\n  toString: function() {\r\n    return this._inner.toString();\r\n  }\r\n};\r\n\r\nmodule.exports = LngLat;\r\n\r\n\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9MbmdMYXQuanM/NGY1ZiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxTQUFTLE9BQU87QUFDaEIsU0FBUyxPQUFPO0FBQ2hCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLE9BQU87QUFDcEIsYUFBYSxPQUFPO0FBQ3BCO0FBQ0E7O0FBRUEsR0FBRzs7QUFFSDs7QUFFQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6IjQ2LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTMuXHJcbiAqIEBjb25zdHJ1Y3RvciBMbmdMYXRcclxuICogQGF0dGVudGlvbiDnmb7luqblnLDlm77msqHmnIlMbmdMYXTov5nkuKrln7rnoYDnsbvvvIzogIzmmK/lj6tQb2ludOexu+OAglxyXG4gKi9cclxuXHJcbnZhciB1dGlsID0gcmVxdWlyZSgnLi4vLi4vLi4vY29tbW9uL2pzL3V0aWwnKTtcclxuXHJcbi8qKlxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQGxuZyB7TnVtYmVyfSBsbmdcclxuICogQGxhdCB7TnVtYmVyfSBsYXRcclxuICogKi9cclxuZnVuY3Rpb24gTG5nTGF0KGxuZywgbGF0LCBpbm5lcikge1xyXG5cclxuICAvLyDljIXoo4VHTWFw55qETG5nTGF057uT5p6EXHJcbiAgaWYoaW5uZXIpIHtcclxuICAgIHRoaXMuX2lubmVyID0gaW5uZXI7XHJcbiAgfVxyXG5cclxuICAvLyDmnoTpgKDlh73mlbDmqKHlvI9cclxuICBlbHNlIHtcclxuICAgIGlmKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XHJcblxyXG4gICAgICAvLyDmlbDnu4TlvaLlvI/vvIzliY3ogIXkuLpsbmfvvIzlkI7ogIXkuLpsYXQgWzExNi4zOTc0MjgsIDM5LjkwOTIzXSAtLSBwb3NpdGlvblxyXG4gICAgICBpZih1dGlsLmlzQXJyYXkobG5nKSl7XHJcblxyXG4gICAgICAgIGlmKCB0eXBlb2YgbG5nWzBdID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgbG5nWzFdID09PSAnc3RyaW5nJyApIHtcclxuICAgICAgICAgIHRoaXMubG5nID0gcGFyc2VGbG9hdChsbmdbMF0pO1xyXG4gICAgICAgICAgdGhpcy5sYXQgPSBwYXJzZUZsb2F0KGxuZ1sxXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIHRoaXMubG5nID0gbG5nWzBdO1xyXG4gICAgICAgICAgdGhpcy5sYXQgPSBsbmdbMV07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDlr7nosaHlvaLlvI/vvIxsbmflr7nlupRsbmfvvIxsYXTlr7nlupRsYXQgKGxuZzogMTE2LjM5NzQyOCwgbGF0OiAzOS45MDkyMylcclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdGhpcy5sbmcgPSBsbmcubG5nO1xyXG4gICAgICAgIHRoaXMubGF0ID0gbG5nLmxhdDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGVsc2Uge1xyXG5cclxuICAgICAgLy8gKFwiMTE2LjQwMzMyMlwiLCBcIjM5LjkyMDI1NVwiKSBzdHJpbmdcclxuICAgICAgaWYodXRpbC5pc1N0cmluZyhsbmcpIHx8IHV0aWwuaXNTdHJpbmcobGF0KSkge1xyXG4gICAgICAgIHRoaXMubG5nID0gcGFyc2VGbG9hdChsbmcpO1xyXG4gICAgICAgIHRoaXMubGF0ID0gcGFyc2VGbG9hdChsYXQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyAoMTE2LjQwMzMyMiwgMzkuOTIwMjU1KSBOdW1iZXJcclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdGhpcy5sbmcgPSBsbmc7XHJcbiAgICAgICAgdGhpcy5sYXQgPSBsYXQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9pbm5lciA9IG5ldyBCTWFwLlBvaW50KHRoaXMubG5nLCB0aGlzLmxhdCk7XHJcbiAgfVxyXG5cclxuICB0aGlzLl90eXBlID0gJ0xuZ0xhdCc7XHJcblxyXG59XHJcblxyXG5MbmdMYXQucHJvdG90eXBlID0ge1xyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBvZmZzZXRcclxuICAgKiBAcGFyYW0ge051bWJlcn0gd1xyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBzXHJcbiAgICogKi9cclxuICBvZmZzZXQ6IGZ1bmN0aW9uKHcsIHMpIHtcclxuXHJcbiAgfSxcclxuXHJcbiAgZGlzdGFuY2U6IGZ1bmN0aW9uKCkge1xyXG5cclxuICB9LFxyXG5cclxuICBnZXRMbmc6IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lubmVyLmxuZztcclxuICB9LFxyXG5cclxuICBnZXRMYXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lubmVyLmxhdDtcclxuICB9LFxyXG5cclxuICBlcXVhbHM6IGZ1bmN0aW9uKHBvaW50KSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5uZXIuZXF1YWxzKHBvaW50Ll9pbm5lcik7XHJcbiAgfSxcclxuXHJcbiAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lubmVyLnRvU3RyaW5nKCk7XHJcbiAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBMbmdMYXQ7XHJcblxyXG5cclxuXHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2JtYXAvTG5nTGF0LmpzXG4vLyBtb2R1bGUgaWQgPSA0NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 47 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/15.\r\n * @name Bounds 基础类\r\n * 在Google Map里面对应LatLngBounds Class\r\n * https://developers.google.com/maps/documentation/javascript/3.exp/reference#LatLngBounds\r\n */\r\n\r\nvar LngLat = __webpack_require__(46);\r\n\r\n/**\r\n * @constructor\r\n * @sw {LngLat} southWest\r\n * @ne {LngLat} northEast\r\n * */\r\nfunction Bounds(sw, ne, inner) {\r\n\r\n  if(inner) {\r\n    this._inner = inner;\r\n  } else {\r\n    this._inner = new BMap.Bounds(sw, ne);\r\n  }\r\n\r\n  this._type = 'Bounds';\r\n\r\n  return this;\r\n}\r\n\r\nBounds.prototype = {\r\n  /**\r\n   * @param {LngLat} point\r\n   * */\r\n  contains: function(point) {\r\n    return this._inner.contains(point._inner);\r\n  },\r\n\r\n  getCenter: function() {\r\n    return new LngLat('', '', this._inner.getCenter());\r\n  },\r\n\r\n  getSouthWest: function() {\r\n    return new LngLat('', '', this._inner.getSouthWest());\r\n  },\r\n  getNorthEast: function() {\r\n    return new LngLat('', '', this._inner.getNorthEast());\r\n  },\r\n  toString: function() {\r\n    console.log(\"toString\");\r\n    return this._inner.toString();\r\n  }\r\n};\r\n\r\nmodule.exports = Bounds;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9Cb3VuZHMuanM/YWIxNCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLFFBQVEsT0FBTztBQUNmLFFBQVEsT0FBTztBQUNmO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6IjQ3LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTUuXHJcbiAqIEBuYW1lIEJvdW5kcyDln7rnoYDnsbtcclxuICog5ZyoR29vZ2xlIE1hcOmHjOmdouWvueW6lExhdExuZ0JvdW5kcyBDbGFzc1xyXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9tYXBzL2RvY3VtZW50YXRpb24vamF2YXNjcmlwdC8zLmV4cC9yZWZlcmVuY2UjTGF0TG5nQm91bmRzXHJcbiAqL1xyXG5cclxudmFyIExuZ0xhdCA9IHJlcXVpcmUoJy4vTG5nTGF0Jyk7XHJcblxyXG4vKipcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBzdyB7TG5nTGF0fSBzb3V0aFdlc3RcclxuICogQG5lIHtMbmdMYXR9IG5vcnRoRWFzdFxyXG4gKiAqL1xyXG5mdW5jdGlvbiBCb3VuZHMoc3csIG5lLCBpbm5lcikge1xyXG5cclxuICBpZihpbm5lcikge1xyXG4gICAgdGhpcy5faW5uZXIgPSBpbm5lcjtcclxuICB9IGVsc2Uge1xyXG4gICAgdGhpcy5faW5uZXIgPSBuZXcgQk1hcC5Cb3VuZHMoc3csIG5lKTtcclxuICB9XHJcblxyXG4gIHRoaXMuX3R5cGUgPSAnQm91bmRzJztcclxuXHJcbiAgcmV0dXJuIHRoaXM7XHJcbn1cclxuXHJcbkJvdW5kcy5wcm90b3R5cGUgPSB7XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtMbmdMYXR9IHBvaW50XHJcbiAgICogKi9cclxuICBjb250YWluczogZnVuY3Rpb24ocG9pbnQpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbm5lci5jb250YWlucyhwb2ludC5faW5uZXIpO1xyXG4gIH0sXHJcblxyXG4gIGdldENlbnRlcjogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gbmV3IExuZ0xhdCgnJywgJycsIHRoaXMuX2lubmVyLmdldENlbnRlcigpKTtcclxuICB9LFxyXG5cclxuICBnZXRTb3V0aFdlc3Q6IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIG5ldyBMbmdMYXQoJycsICcnLCB0aGlzLl9pbm5lci5nZXRTb3V0aFdlc3QoKSk7XHJcbiAgfSxcclxuICBnZXROb3J0aEVhc3Q6IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIG5ldyBMbmdMYXQoJycsICcnLCB0aGlzLl9pbm5lci5nZXROb3J0aEVhc3QoKSk7XHJcbiAgfSxcclxuICB0b1N0cmluZzogZnVuY3Rpb24oKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcInRvU3RyaW5nXCIpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2lubmVyLnRvU3RyaW5nKCk7XHJcbiAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBCb3VuZHM7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2JtYXAvQm91bmRzLmpzXG4vLyBtb2R1bGUgaWQgPSA0N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 48 */
/***/ function(module, exports) {

	eval("/**\r\n * Created by fizz on 2017/2/15.\r\n * @constructor Pixel\r\n * 在google map里面对应的是Point\r\n * https://developers.google.com/maps/documentation/javascript/reference#Point\r\n */\r\n\r\n\r\n/**\r\n * @constructor\r\n * @param {Number} x\r\n * @param {Number} y\r\n * */\r\nfunction Pixel(x, y, inner) {\r\n  if(inner) {\r\n    this._inner = inner;\r\n  } else {\r\n    this._inner = new BMap.Pixel(x,y);\r\n  }\r\n\r\n  this._type = 'Pixel';\r\n}\r\n\r\nPixel.prototype = {\r\n  getX: function() {\r\n    return this._inner.x;\r\n  },\r\n  getY: function() {\r\n    return this._inner.y;\r\n  },\r\n\r\n  /**\r\n   * @param {Pixel} point\r\n   * */\r\n  equals: function(point) {\r\n    return this._inner.equals(point._inner);\r\n  },\r\n\r\n  toString: function() {\r\n    return this._inner.toString();\r\n  }\r\n};\r\n\r\n\r\n\r\n\r\nmodule.exports = Pixel;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9QaXhlbC5qcz9kZDExIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLGFBQWEsTUFBTTtBQUNuQjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUtBIiwiZmlsZSI6IjQ4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTUuXHJcbiAqIEBjb25zdHJ1Y3RvciBQaXhlbFxyXG4gKiDlnKhnb29nbGUgbWFw6YeM6Z2i5a+55bqU55qE5pivUG9pbnRcclxuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vbWFwcy9kb2N1bWVudGF0aW9uL2phdmFzY3JpcHQvcmVmZXJlbmNlI1BvaW50XHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQHBhcmFtIHtOdW1iZXJ9IHhcclxuICogQHBhcmFtIHtOdW1iZXJ9IHlcclxuICogKi9cclxuZnVuY3Rpb24gUGl4ZWwoeCwgeSwgaW5uZXIpIHtcclxuICBpZihpbm5lcikge1xyXG4gICAgdGhpcy5faW5uZXIgPSBpbm5lcjtcclxuICB9IGVsc2Uge1xyXG4gICAgdGhpcy5faW5uZXIgPSBuZXcgQk1hcC5QaXhlbCh4LHkpO1xyXG4gIH1cclxuXHJcbiAgdGhpcy5fdHlwZSA9ICdQaXhlbCc7XHJcbn1cclxuXHJcblBpeGVsLnByb3RvdHlwZSA9IHtcclxuICBnZXRYOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbm5lci54O1xyXG4gIH0sXHJcbiAgZ2V0WTogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5uZXIueTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge1BpeGVsfSBwb2ludFxyXG4gICAqICovXHJcbiAgZXF1YWxzOiBmdW5jdGlvbihwb2ludCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lubmVyLmVxdWFscyhwb2ludC5faW5uZXIpO1xyXG4gIH0sXHJcblxyXG4gIHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbm5lci50b1N0cmluZygpO1xyXG4gIH1cclxufTtcclxuXHJcblxyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUGl4ZWw7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2JtYXAvUGl4ZWwuanNcbi8vIG1vZHVsZSBpZCA9IDQ4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 49 */
/***/ function(module, exports) {

	eval("/**\r\n * Created by fizz on 2017/2/15.\r\n */\r\n\r\n/**\r\n * @constructor\r\n * @param {Number} width\r\n * @param {Number} height\r\n * */\r\nfunction Size(width, height, inner) {\r\n  if(inner) {\r\n    this._inner = inner;\r\n  } else {\r\n    this._inner = new BMap.Size();\r\n  }\r\n\r\n  this._type = 'Size';\r\n  return this;\r\n}\r\n\r\nSize.prototype = {\r\n  getWidth: function() {\r\n    return this._inner.width;\r\n  },\r\n  getHeight: function() {\r\n    return this._inner.height;\r\n  },\r\n  toString: function() {\r\n    return this._inner.toString();\r\n  }\r\n};\r\n\r\n\r\n\r\n\r\nmodule.exports = Size;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9TaXplLmpzPzM3MGEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUtBIiwiZmlsZSI6IjQ5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTUuXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAcGFyYW0ge051bWJlcn0gd2lkdGhcclxuICogQHBhcmFtIHtOdW1iZXJ9IGhlaWdodFxyXG4gKiAqL1xyXG5mdW5jdGlvbiBTaXplKHdpZHRoLCBoZWlnaHQsIGlubmVyKSB7XHJcbiAgaWYoaW5uZXIpIHtcclxuICAgIHRoaXMuX2lubmVyID0gaW5uZXI7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRoaXMuX2lubmVyID0gbmV3IEJNYXAuU2l6ZSgpO1xyXG4gIH1cclxuXHJcbiAgdGhpcy5fdHlwZSA9ICdTaXplJztcclxuICByZXR1cm4gdGhpcztcclxufVxyXG5cclxuU2l6ZS5wcm90b3R5cGUgPSB7XHJcbiAgZ2V0V2lkdGg6IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lubmVyLndpZHRoO1xyXG4gIH0sXHJcbiAgZ2V0SGVpZ2h0OiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbm5lci5oZWlnaHQ7XHJcbiAgfSxcclxuICB0b1N0cmluZzogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5uZXIudG9TdHJpbmcoKTtcclxuICB9XHJcbn07XHJcblxyXG5cclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFNpemU7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2JtYXAvU2l6ZS5qc1xuLy8gbW9kdWxlIGlkID0gNDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 50 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/13.\r\n * @constructor of Map\r\n * @return our map object\r\n */\r\n\r\nvar config = __webpack_require__(32);\r\nvar Bounds = __webpack_require__(47);\r\nvar onOff = __webpack_require__(51);\r\nvar formatOpts = __webpack_require__(55);\r\n\r\n/**\r\n * @constructor\r\n * @elem {Object}\r\n * @opts {Object}\r\n * */\r\nfunction Map(id,opts) {\r\n  var elem, newOpts;\r\n\r\n  this._type = 'Map';\r\n  elem = document.getElementById(id);\r\n  newOpts = formatOpts.map(opts);\r\n\r\n  this._inner = new BMap.Map(elem, newOpts);\r\n  this._inner._smap = this;\r\n  this._overLayers = {\r\n    MarkerClusterer: [],\r\n    Marker: [],\r\n    InfoWindow: [],\r\n    Polygon: [],\r\n    Polyline: [],\r\n    Circle: []\r\n  };\r\n}\r\n\r\nMap.prototype = {\r\n\r\n  plugin : mapPlugin,\r\n\r\n  clearMap: clearMap,\r\n\r\n  /**\r\n   * @param {LngLat} position\r\n   * */\r\n  panTo: function(position) {\r\n    this._inner.panTo(position._inner);\r\n  },\r\n\r\n\r\n  /**\r\n   * @param {Number} zoom\r\n   * */\r\n  setZoom: function(zoom) {\r\n    this._inner.setZoom(zoom);\r\n  },\r\n\r\n  getBounds: function() {\r\n    return new Bounds('','',this._inner.getBounds());\r\n  },\r\n\r\n  on: onOff.on,\r\n  off: onOff.off\r\n};\r\n\r\nfunction mapPlugin(plugins, fn) {\r\n  if(plugins.length < 1) return;\r\n\r\n  plugins.forEach( function(plugin) {\r\n\r\n    console.log(plugin);\r\n    if(plugin === 'GMap.MarkerClusterer') {\r\n      $.getScript(config.GMap_MarkerClusterer, function() {\r\n        fn();\r\n      });\r\n    }\r\n\r\n  })\r\n}\r\n\r\nfunction clearMap() {\r\n  var overLayers = this._overLayers;\r\n\r\n  for(var type in overLayers) {\r\n\r\n    switch (type) {\r\n      case 'Marker':\r\n      case 'Circle':\r\n      case 'Polygon':\r\n      case 'Polyline':\r\n      case 'InfoWindow':\r\n        if(overLayers[type].length > 0) {\r\n          overLayers[type].forEach( function(item) {\r\n            item._inner.setMap(null);\r\n            item._inner = null;\r\n            item = null;\r\n          });\r\n          overLayers.lenght = 0;\r\n        }\r\n        break;\r\n      case 'MarkerClusterer':\r\n        if(overLayers.MarkerClusterer.length > 0) {\r\n          overLayers.MarkerClusterer.forEach( function(item) {\r\n            item._inner.clearMarkers();\r\n            item._inner = null;\r\n            item = null;\r\n          });\r\n          overLayers.MarkerClusterer.length = 0;\r\n        }\r\n        break;\r\n    }\r\n\r\n  }\r\n}\r\n\r\nmodule.exports = Map;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9NYXAuanM/ZDk5NCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQSxHQUFHOzs7QUFHSDtBQUNBLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBLEdBQUc7QUFDSDs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEiLCJmaWxlIjoiNTAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBmaXp6IG9uIDIwMTcvMi8xMy5cclxuICogQGNvbnN0cnVjdG9yIG9mIE1hcFxyXG4gKiBAcmV0dXJuIG91ciBtYXAgb2JqZWN0XHJcbiAqL1xyXG5cclxudmFyIGNvbmZpZyA9IHJlcXVpcmUoJy4uL2NvbmZpZycpO1xyXG52YXIgQm91bmRzID0gcmVxdWlyZSgnLi9Cb3VuZHMnKTtcclxudmFyIG9uT2ZmID0gcmVxdWlyZSgnLi9vbk9mZicpO1xyXG52YXIgZm9ybWF0T3B0cyA9IHJlcXVpcmUoJy4vZm9ybWF0T3B0Jyk7XHJcblxyXG4vKipcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBlbGVtIHtPYmplY3R9XHJcbiAqIEBvcHRzIHtPYmplY3R9XHJcbiAqICovXHJcbmZ1bmN0aW9uIE1hcChpZCxvcHRzKSB7XHJcbiAgdmFyIGVsZW0sIG5ld09wdHM7XHJcblxyXG4gIHRoaXMuX3R5cGUgPSAnTWFwJztcclxuICBlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gIG5ld09wdHMgPSBmb3JtYXRPcHRzLm1hcChvcHRzKTtcclxuXHJcbiAgdGhpcy5faW5uZXIgPSBuZXcgQk1hcC5NYXAoZWxlbSwgbmV3T3B0cyk7XHJcbiAgdGhpcy5faW5uZXIuX3NtYXAgPSB0aGlzO1xyXG4gIHRoaXMuX292ZXJMYXllcnMgPSB7XHJcbiAgICBNYXJrZXJDbHVzdGVyZXI6IFtdLFxyXG4gICAgTWFya2VyOiBbXSxcclxuICAgIEluZm9XaW5kb3c6IFtdLFxyXG4gICAgUG9seWdvbjogW10sXHJcbiAgICBQb2x5bGluZTogW10sXHJcbiAgICBDaXJjbGU6IFtdXHJcbiAgfTtcclxufVxyXG5cclxuTWFwLnByb3RvdHlwZSA9IHtcclxuXHJcbiAgcGx1Z2luIDogbWFwUGx1Z2luLFxyXG5cclxuICBjbGVhck1hcDogY2xlYXJNYXAsXHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7TG5nTGF0fSBwb3NpdGlvblxyXG4gICAqICovXHJcbiAgcGFuVG86IGZ1bmN0aW9uKHBvc2l0aW9uKSB7XHJcbiAgICB0aGlzLl9pbm5lci5wYW5Ubyhwb3NpdGlvbi5faW5uZXIpO1xyXG4gIH0sXHJcblxyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge051bWJlcn0gem9vbVxyXG4gICAqICovXHJcbiAgc2V0Wm9vbTogZnVuY3Rpb24oem9vbSkge1xyXG4gICAgdGhpcy5faW5uZXIuc2V0Wm9vbSh6b29tKTtcclxuICB9LFxyXG5cclxuICBnZXRCb3VuZHM6IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIG5ldyBCb3VuZHMoJycsJycsdGhpcy5faW5uZXIuZ2V0Qm91bmRzKCkpO1xyXG4gIH0sXHJcblxyXG4gIG9uOiBvbk9mZi5vbixcclxuICBvZmY6IG9uT2ZmLm9mZlxyXG59O1xyXG5cclxuZnVuY3Rpb24gbWFwUGx1Z2luKHBsdWdpbnMsIGZuKSB7XHJcbiAgaWYocGx1Z2lucy5sZW5ndGggPCAxKSByZXR1cm47XHJcblxyXG4gIHBsdWdpbnMuZm9yRWFjaCggZnVuY3Rpb24ocGx1Z2luKSB7XHJcblxyXG4gICAgY29uc29sZS5sb2cocGx1Z2luKTtcclxuICAgIGlmKHBsdWdpbiA9PT0gJ0dNYXAuTWFya2VyQ2x1c3RlcmVyJykge1xyXG4gICAgICAkLmdldFNjcmlwdChjb25maWcuR01hcF9NYXJrZXJDbHVzdGVyZXIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGZuKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiBjbGVhck1hcCgpIHtcclxuICB2YXIgb3ZlckxheWVycyA9IHRoaXMuX292ZXJMYXllcnM7XHJcblxyXG4gIGZvcih2YXIgdHlwZSBpbiBvdmVyTGF5ZXJzKSB7XHJcblxyXG4gICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgIGNhc2UgJ01hcmtlcic6XHJcbiAgICAgIGNhc2UgJ0NpcmNsZSc6XHJcbiAgICAgIGNhc2UgJ1BvbHlnb24nOlxyXG4gICAgICBjYXNlICdQb2x5bGluZSc6XHJcbiAgICAgIGNhc2UgJ0luZm9XaW5kb3cnOlxyXG4gICAgICAgIGlmKG92ZXJMYXllcnNbdHlwZV0ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgb3ZlckxheWVyc1t0eXBlXS5mb3JFYWNoKCBmdW5jdGlvbihpdGVtKSB7XHJcbiAgICAgICAgICAgIGl0ZW0uX2lubmVyLnNldE1hcChudWxsKTtcclxuICAgICAgICAgICAgaXRlbS5faW5uZXIgPSBudWxsO1xyXG4gICAgICAgICAgICBpdGVtID0gbnVsbDtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgb3ZlckxheWVycy5sZW5naHQgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnTWFya2VyQ2x1c3RlcmVyJzpcclxuICAgICAgICBpZihvdmVyTGF5ZXJzLk1hcmtlckNsdXN0ZXJlci5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBvdmVyTGF5ZXJzLk1hcmtlckNsdXN0ZXJlci5mb3JFYWNoKCBmdW5jdGlvbihpdGVtKSB7XHJcbiAgICAgICAgICAgIGl0ZW0uX2lubmVyLmNsZWFyTWFya2VycygpO1xyXG4gICAgICAgICAgICBpdGVtLl9pbm5lciA9IG51bGw7XHJcbiAgICAgICAgICAgIGl0ZW0gPSBudWxsO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBvdmVyTGF5ZXJzLk1hcmtlckNsdXN0ZXJlci5sZW5ndGggPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuXHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IE1hcDtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9NYXAuanNcbi8vIG1vZHVsZSBpZCA9IDUwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 51 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/14.\r\n */\r\n\r\nvar event = __webpack_require__(52);\r\n\r\nvar onOff = {};\r\n\r\n\r\n/**\r\n *\r\n * @param {String} eventName\r\n * @param {Function} handler\r\n * @param {Object} context\r\n *\r\n *\r\n * */\r\nonOff.on = function(eventName, handler, context) {\r\n  var listener, eventListener;\r\n\r\n  listener = event.addListener(this, eventName, handler, context);\r\n\r\n  eventListener = {\r\n    eventName: eventName,\r\n    handler: handler,\r\n    context: context,\r\n    listener: listener\r\n  };\r\n\r\n  if(!this._eventListener) this._eventListener = [];\r\n\r\n  this._eventListener.push(eventListener);\r\n  return listener;\r\n};\r\n\r\nonOff.off = function(eventName, handler, context) {\r\n  if(!this._eventListener) return;\r\n\r\n  var filterResult = this._eventListener.filter( function(item, index) {\r\n    if(eventName === item.eventName) return true;\r\n    return false;\r\n  });\r\n\r\n  if(filterResult && filterResult.length > 0) {\r\n    filterResult.forEach( function(item, index) {\r\n      if( item.handler === handler &&\r\n        item.context === context ) {\r\n        console.log('here am I');\r\n        event.removeListener(item.listener);\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n};\r\n\r\nmodule.exports = onOff;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9vbk9mZi5qcz80Y2JlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7O0FBR0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLFNBQVM7QUFDcEIsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7OztBQUdBOztBQUVBIiwiZmlsZSI6IjUxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTQuXHJcbiAqL1xyXG5cclxudmFyIGV2ZW50ID0gcmVxdWlyZSgnLi9ldmVudCcpO1xyXG5cclxudmFyIG9uT2ZmID0ge307XHJcblxyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWVcclxuICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxyXG4gKiBAcGFyYW0ge09iamVjdH0gY29udGV4dFxyXG4gKlxyXG4gKlxyXG4gKiAqL1xyXG5vbk9mZi5vbiA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgaGFuZGxlciwgY29udGV4dCkge1xyXG4gIHZhciBsaXN0ZW5lciwgZXZlbnRMaXN0ZW5lcjtcclxuXHJcbiAgbGlzdGVuZXIgPSBldmVudC5hZGRMaXN0ZW5lcih0aGlzLCBldmVudE5hbWUsIGhhbmRsZXIsIGNvbnRleHQpO1xyXG5cclxuICBldmVudExpc3RlbmVyID0ge1xyXG4gICAgZXZlbnROYW1lOiBldmVudE5hbWUsXHJcbiAgICBoYW5kbGVyOiBoYW5kbGVyLFxyXG4gICAgY29udGV4dDogY29udGV4dCxcclxuICAgIGxpc3RlbmVyOiBsaXN0ZW5lclxyXG4gIH07XHJcblxyXG4gIGlmKCF0aGlzLl9ldmVudExpc3RlbmVyKSB0aGlzLl9ldmVudExpc3RlbmVyID0gW107XHJcblxyXG4gIHRoaXMuX2V2ZW50TGlzdGVuZXIucHVzaChldmVudExpc3RlbmVyKTtcclxuICByZXR1cm4gbGlzdGVuZXI7XHJcbn07XHJcblxyXG5vbk9mZi5vZmYgPSBmdW5jdGlvbihldmVudE5hbWUsIGhhbmRsZXIsIGNvbnRleHQpIHtcclxuICBpZighdGhpcy5fZXZlbnRMaXN0ZW5lcikgcmV0dXJuO1xyXG5cclxuICB2YXIgZmlsdGVyUmVzdWx0ID0gdGhpcy5fZXZlbnRMaXN0ZW5lci5maWx0ZXIoIGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7XHJcbiAgICBpZihldmVudE5hbWUgPT09IGl0ZW0uZXZlbnROYW1lKSByZXR1cm4gdHJ1ZTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9KTtcclxuXHJcbiAgaWYoZmlsdGVyUmVzdWx0ICYmIGZpbHRlclJlc3VsdC5sZW5ndGggPiAwKSB7XHJcbiAgICBmaWx0ZXJSZXN1bHQuZm9yRWFjaCggZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcclxuICAgICAgaWYoIGl0ZW0uaGFuZGxlciA9PT0gaGFuZGxlciAmJlxyXG4gICAgICAgIGl0ZW0uY29udGV4dCA9PT0gY29udGV4dCApIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnaGVyZSBhbSBJJyk7XHJcbiAgICAgICAgZXZlbnQucmVtb3ZlTGlzdGVuZXIoaXRlbS5saXN0ZW5lcik7XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IG9uT2ZmO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzL21hcC9ibWFwL29uT2ZmLmpzXG4vLyBtb2R1bGUgaWQgPSA1MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 52 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/14.\r\n */\r\n\r\nvar SMapEvent = __webpack_require__(53);\r\n\r\nvar event = {};\r\n\r\nevent.map = __webpack_require__(54);\r\n\r\nevent.getSMapEvent = function(e) {\r\n  return new SMapEvent(e);\r\n};\r\n\r\nevent.addDomListener = function(instance, eventName, handler, context) {\r\n  var listener = {};\r\n\r\n  if(context) {\r\n    listener = google.maps.event.addDomListener(instance, eventName, function(e) {\r\n      handler.call(context, e);\r\n    });\r\n  } else {\r\n    listener = google.maps.event.addDomListener(instance, eventName, handler);\r\n  }\r\n  return listener;\r\n};\r\n\r\nevent.addListener = function(instance, eventName, handler, context) {\r\n  var listener = {}, relevantEvent, realInstance;\r\n\r\n  realInstance = instance._inner;\r\n  relevantEvent = event.getRelevantEvent(instance, eventName);\r\n\r\n  if(context) {\r\n    listener = google.maps.event.addListener(realInstance, relevantEvent, function(e) {\r\n      handler.call(context, event.getSMapEvent(e));\r\n    });\r\n  } else {\r\n    listener = google.maps.event.addListener(realInstance, relevantEvent, function(e) {\r\n      handler(event.getSMapEvent(e));\r\n    });\r\n  }\r\n  return listener;\r\n};\r\n\r\nevent.addListenerOnce = function(instance, eventName, handler, context) {\r\n  var listener = {}, relevantEvent, realInstance;\r\n\r\n  realInstance = instance._inner;\r\n\r\n  relevantEvent = event.getRelevantEvent(instance, eventName);\r\n\r\n  if(context) {\r\n    listener = google.maps.event.addListenerOnce(realInstance, relevantEvent, function (e) {\r\n      handler.call(context, event.getSMapEvent(e));\r\n    });\r\n  } else {\r\n    listener = google.maps.event.addListenerOnce(realInstance, relevantEvent, function(e) {\r\n      handler(event.getSMapEvent(e));\r\n    });\r\n  }\r\n  return listener;\r\n};\r\n\r\nevent.removeListener = function(listener) {\r\n  google.maps.event.removeListener(listener);\r\n};\r\n\r\nevent.triggerListener = function(instance, eventName, extArgs) {\r\n  var relevantEvent = event.getRelevantEvent(instance, eventName);\r\n\r\n  google.maps.event.trigger(instance, relevantEvent, extArgs);\r\n};\r\n\r\nevent.getRelevantEvent = function(instance, eventName) {\r\n  if(instance._type in event.map) {\r\n    if(eventName in event.map[instance._type]) {\r\n      return event.map[instance._type][eventName];\r\n    } else {\r\n      return eventName;\r\n    }\r\n  } else {\r\n    return eventName;\r\n  }\r\n};\r\n\r\nevent.getSMapEventObject = function(e) {\r\n\r\n};\r\n\r\nmodule.exports = event;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9ldmVudC5qcz8yY2ZhIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsbUJBQW1COztBQUVuQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtQkFBbUI7O0FBRW5COztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSIsImZpbGUiOiI1Mi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGZpenogb24gMjAxNy8yLzE0LlxyXG4gKi9cclxuXHJcbnZhciBTTWFwRXZlbnQgPSByZXF1aXJlKCcuL1NNYXBFdmVudCcpO1xyXG5cclxudmFyIGV2ZW50ID0ge307XHJcblxyXG5ldmVudC5tYXAgPSByZXF1aXJlKCcuL2V2ZW50TWFwJyk7XHJcblxyXG5ldmVudC5nZXRTTWFwRXZlbnQgPSBmdW5jdGlvbihlKSB7XHJcbiAgcmV0dXJuIG5ldyBTTWFwRXZlbnQoZSk7XHJcbn07XHJcblxyXG5ldmVudC5hZGREb21MaXN0ZW5lciA9IGZ1bmN0aW9uKGluc3RhbmNlLCBldmVudE5hbWUsIGhhbmRsZXIsIGNvbnRleHQpIHtcclxuICB2YXIgbGlzdGVuZXIgPSB7fTtcclxuXHJcbiAgaWYoY29udGV4dCkge1xyXG4gICAgbGlzdGVuZXIgPSBnb29nbGUubWFwcy5ldmVudC5hZGREb21MaXN0ZW5lcihpbnN0YW5jZSwgZXZlbnROYW1lLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgIGhhbmRsZXIuY2FsbChjb250ZXh0LCBlKTtcclxuICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBsaXN0ZW5lciA9IGdvb2dsZS5tYXBzLmV2ZW50LmFkZERvbUxpc3RlbmVyKGluc3RhbmNlLCBldmVudE5hbWUsIGhhbmRsZXIpO1xyXG4gIH1cclxuICByZXR1cm4gbGlzdGVuZXI7XHJcbn07XHJcblxyXG5ldmVudC5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uKGluc3RhbmNlLCBldmVudE5hbWUsIGhhbmRsZXIsIGNvbnRleHQpIHtcclxuICB2YXIgbGlzdGVuZXIgPSB7fSwgcmVsZXZhbnRFdmVudCwgcmVhbEluc3RhbmNlO1xyXG5cclxuICByZWFsSW5zdGFuY2UgPSBpbnN0YW5jZS5faW5uZXI7XHJcbiAgcmVsZXZhbnRFdmVudCA9IGV2ZW50LmdldFJlbGV2YW50RXZlbnQoaW5zdGFuY2UsIGV2ZW50TmFtZSk7XHJcblxyXG4gIGlmKGNvbnRleHQpIHtcclxuICAgIGxpc3RlbmVyID0gZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIocmVhbEluc3RhbmNlLCByZWxldmFudEV2ZW50LCBmdW5jdGlvbihlKSB7XHJcbiAgICAgIGhhbmRsZXIuY2FsbChjb250ZXh0LCBldmVudC5nZXRTTWFwRXZlbnQoZSkpO1xyXG4gICAgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGxpc3RlbmVyID0gZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIocmVhbEluc3RhbmNlLCByZWxldmFudEV2ZW50LCBmdW5jdGlvbihlKSB7XHJcbiAgICAgIGhhbmRsZXIoZXZlbnQuZ2V0U01hcEV2ZW50KGUpKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICByZXR1cm4gbGlzdGVuZXI7XHJcbn07XHJcblxyXG5ldmVudC5hZGRMaXN0ZW5lck9uY2UgPSBmdW5jdGlvbihpbnN0YW5jZSwgZXZlbnROYW1lLCBoYW5kbGVyLCBjb250ZXh0KSB7XHJcbiAgdmFyIGxpc3RlbmVyID0ge30sIHJlbGV2YW50RXZlbnQsIHJlYWxJbnN0YW5jZTtcclxuXHJcbiAgcmVhbEluc3RhbmNlID0gaW5zdGFuY2UuX2lubmVyO1xyXG5cclxuICByZWxldmFudEV2ZW50ID0gZXZlbnQuZ2V0UmVsZXZhbnRFdmVudChpbnN0YW5jZSwgZXZlbnROYW1lKTtcclxuXHJcbiAgaWYoY29udGV4dCkge1xyXG4gICAgbGlzdGVuZXIgPSBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lck9uY2UocmVhbEluc3RhbmNlLCByZWxldmFudEV2ZW50LCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICBoYW5kbGVyLmNhbGwoY29udGV4dCwgZXZlbnQuZ2V0U01hcEV2ZW50KGUpKTtcclxuICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBsaXN0ZW5lciA9IGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyT25jZShyZWFsSW5zdGFuY2UsIHJlbGV2YW50RXZlbnQsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgaGFuZGxlcihldmVudC5nZXRTTWFwRXZlbnQoZSkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIHJldHVybiBsaXN0ZW5lcjtcclxufTtcclxuXHJcbmV2ZW50LnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24obGlzdGVuZXIpIHtcclxuICBnb29nbGUubWFwcy5ldmVudC5yZW1vdmVMaXN0ZW5lcihsaXN0ZW5lcik7XHJcbn07XHJcblxyXG5ldmVudC50cmlnZ2VyTGlzdGVuZXIgPSBmdW5jdGlvbihpbnN0YW5jZSwgZXZlbnROYW1lLCBleHRBcmdzKSB7XHJcbiAgdmFyIHJlbGV2YW50RXZlbnQgPSBldmVudC5nZXRSZWxldmFudEV2ZW50KGluc3RhbmNlLCBldmVudE5hbWUpO1xyXG5cclxuICBnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKGluc3RhbmNlLCByZWxldmFudEV2ZW50LCBleHRBcmdzKTtcclxufTtcclxuXHJcbmV2ZW50LmdldFJlbGV2YW50RXZlbnQgPSBmdW5jdGlvbihpbnN0YW5jZSwgZXZlbnROYW1lKSB7XHJcbiAgaWYoaW5zdGFuY2UuX3R5cGUgaW4gZXZlbnQubWFwKSB7XHJcbiAgICBpZihldmVudE5hbWUgaW4gZXZlbnQubWFwW2luc3RhbmNlLl90eXBlXSkge1xyXG4gICAgICByZXR1cm4gZXZlbnQubWFwW2luc3RhbmNlLl90eXBlXVtldmVudE5hbWVdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGV2ZW50TmFtZTtcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIGV2ZW50TmFtZTtcclxuICB9XHJcbn07XHJcblxyXG5ldmVudC5nZXRTTWFwRXZlbnRPYmplY3QgPSBmdW5jdGlvbihlKSB7XHJcblxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBldmVudDtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9ldmVudC5qc1xuLy8gbW9kdWxlIGlkID0gNTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 53 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/20.\r\n * @constructor for google map event Object.\r\n * Wrap event and return our new event object just like gaode AMap event.\r\n */\r\n\r\nvar LngLat = __webpack_require__(46);\r\n\r\n/**\r\n * 包装Google的事件触发时的event对象\r\n *\r\n * @constructor\r\n * @param {Object} e event object\r\n * */\r\nfunction SMapEvent(e) {\r\n  this._inner = e;\r\n  this._type = 'Event';\r\n\r\n  this.lnglat = new LngLat(e.latLng.lng(), e.latLng.lat());\r\n  this.lnglat.I = e.latLng.lng();\r\n  this.lnglat.L = e.latLng.lat();\r\n\r\n  this.pixel = {\r\n    x: e.pixel.x,\r\n    y: e.pixel.y\r\n  };\r\n}\r\n\r\nmodule.exports = SMapEvent;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9TTWFwRXZlbnQuanM/ZTFmNiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6IjUzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMjAuXHJcbiAqIEBjb25zdHJ1Y3RvciBmb3IgZ29vZ2xlIG1hcCBldmVudCBPYmplY3QuXHJcbiAqIFdyYXAgZXZlbnQgYW5kIHJldHVybiBvdXIgbmV3IGV2ZW50IG9iamVjdCBqdXN0IGxpa2UgZ2FvZGUgQU1hcCBldmVudC5cclxuICovXHJcblxyXG52YXIgTG5nTGF0ID0gcmVxdWlyZSgnLi9MbmdMYXQnKTtcclxuXHJcbi8qKlxyXG4gKiDljIXoo4VHb29nbGXnmoTkuovku7bop6blj5Hml7bnmoRldmVudOWvueixoVxyXG4gKlxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQHBhcmFtIHtPYmplY3R9IGUgZXZlbnQgb2JqZWN0XHJcbiAqICovXHJcbmZ1bmN0aW9uIFNNYXBFdmVudChlKSB7XHJcbiAgdGhpcy5faW5uZXIgPSBlO1xyXG4gIHRoaXMuX3R5cGUgPSAnRXZlbnQnO1xyXG5cclxuICB0aGlzLmxuZ2xhdCA9IG5ldyBMbmdMYXQoZS5sYXRMbmcubG5nKCksIGUubGF0TG5nLmxhdCgpKTtcclxuICB0aGlzLmxuZ2xhdC5JID0gZS5sYXRMbmcubG5nKCk7XHJcbiAgdGhpcy5sbmdsYXQuTCA9IGUubGF0TG5nLmxhdCgpO1xyXG5cclxuICB0aGlzLnBpeGVsID0ge1xyXG4gICAgeDogZS5waXhlbC54LFxyXG4gICAgeTogZS5waXhlbC55XHJcbiAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBTTWFwRXZlbnQ7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2JtYXAvU01hcEV2ZW50LmpzXG4vLyBtb2R1bGUgaWQgPSA1M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 54 */
/***/ function(module, exports) {

	eval("/**\r\n * Created by fizz on 2017/2/16.\r\n */\r\n\r\nmodule.exports = {\r\n  Marker: {\r\n    click: 'click',\r\n\r\n  },\r\n\r\n  InfoWindow: {\r\n\r\n  }\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9ldmVudE1hcC5qcz9mNzM4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsR0FBRzs7QUFFSDs7QUFFQTtBQUNBIiwiZmlsZSI6IjU0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTYuXHJcbiAqL1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgTWFya2VyOiB7XHJcbiAgICBjbGljazogJ2NsaWNrJyxcclxuXHJcbiAgfSxcclxuXHJcbiAgSW5mb1dpbmRvdzoge1xyXG5cclxuICB9XHJcbn07XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2JtYXAvZXZlbnRNYXAuanNcbi8vIG1vZHVsZSBpZCA9IDU0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 55 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/14.\r\n */\r\n\r\nvar LngLat = __webpack_require__(46);\r\n\r\nmodule.exports = {\r\n\r\n  map: formatOptsUni,\r\n\r\n  infoWindow: formatOptsUni,\r\n\r\n  marker: formatOptsUni,\r\n\r\n  polyline: formatOptsUni,\r\n\r\n  polygon: formatOptsUni,\r\n\r\n  circle: formatOptsUni,\r\n\r\n  markerClusterer: formatMarkerClusterer,\r\n\r\n  path: canvertPath\r\n};\r\n\r\nfunction formatOptsUni(opts) {\r\n\r\n  if('position' in opts) {\r\n    opts.position = (new LngLat(opts.position))._inner;\r\n  }\r\n\r\n  if(opts.path) {\r\n    opts.path = transfromPathToPaths(opts.path);\r\n  }\r\n\r\n  if(opts.center) {\r\n    opts.center = (new LngLat(opts.center))._inner;\r\n  }\r\n\r\n  if(opts.map) {\r\n    opts.map = opts.map._inner;\r\n  }\r\n\r\n  return opts;\r\n}\r\n\r\nfunction transfromPathToPaths(path) {\r\n  var paths = [];\r\n  path.forEach( function(item, index) {\r\n    paths.push(arrCreateLngLat(item));\r\n  });\r\n  return paths;\r\n}\r\n\r\nfunction arrCreateLngLat(arr) {\r\n  return new BMap.Point( parseFloat(arr[0]), parseFloat(arr[1]) );\r\n}\r\n\r\n\r\n/**************************************************\r\n * markerClusterer\r\n * ***********************************************/\r\nfunction formatMarkerClusterer(map, markers, opts) {\r\n  var newOpts = {};\r\n\r\n  if(map._inner) {\r\n    newOpts.map = map._inner;\r\n  } else {\r\n    newOpts.map = map;\r\n  }\r\n\r\n  newOpts.markers = markers.map( function(item) {\r\n    return item._inner;\r\n  });\r\n\r\n  newOpts.opts = formatMarkerClustererOpts(opts);\r\n\r\n  return newOpts;\r\n}\r\n\r\n/**\r\n * @param {Object} opts\r\n * @diff : minClusterSize : minimumClusterSize\r\n * */\r\nfunction formatMarkerClustererOpts(opts) {\r\n  if(opts.minClusterSize) {\r\n    opts.minimumClusterSize = opts.minClusterSize;\r\n  }\r\n\r\n  if(opts.styles) {\r\n\r\n    if(opts.styles) {\r\n      var styles = opts.styles;\r\n      if(styles.size) {\r\n        styles.width = styles.getWidth();\r\n        styles.height = styles.getHeight();\r\n      }\r\n    }\r\n\r\n  }\r\n}\r\n\r\nfunction canvertPath(path) {\r\n  // TODO: 如何处理这个path还未定\r\n  return path;\r\n}\r\n\r\n\r\n// var flightPlanCoordinates = [\r\n//   {lat: 37.772, lng: -122.214},\r\n//   {lat: 21.291, lng: -157.821},\r\n//   {lat: -18.142, lng: 178.431},\r\n//   {lat: -27.467, lng: 153.027}\r\n// ];\r\n\r\n// var lineArr = [\r\n//   [116.368904, 39.913423],\r\n//   [116.382122, 39.901176],\r\n//   [116.387271, 39.912501],\r\n//   [116.398258, 39.904600]\r\n// ];\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9mb3JtYXRPcHQuanM/NjZhOSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQSxNQUFNLDJCQUEyQjtBQUNqQyxNQUFNLDJCQUEyQjtBQUNqQyxNQUFNLDJCQUEyQjtBQUNqQyxNQUFNO0FBQ047O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IjU1LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTQuXHJcbiAqL1xyXG5cclxudmFyIExuZ0xhdCA9IHJlcXVpcmUoJy4vTG5nTGF0Jyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuXHJcbiAgbWFwOiBmb3JtYXRPcHRzVW5pLFxyXG5cclxuICBpbmZvV2luZG93OiBmb3JtYXRPcHRzVW5pLFxyXG5cclxuICBtYXJrZXI6IGZvcm1hdE9wdHNVbmksXHJcblxyXG4gIHBvbHlsaW5lOiBmb3JtYXRPcHRzVW5pLFxyXG5cclxuICBwb2x5Z29uOiBmb3JtYXRPcHRzVW5pLFxyXG5cclxuICBjaXJjbGU6IGZvcm1hdE9wdHNVbmksXHJcblxyXG4gIG1hcmtlckNsdXN0ZXJlcjogZm9ybWF0TWFya2VyQ2x1c3RlcmVyLFxyXG5cclxuICBwYXRoOiBjYW52ZXJ0UGF0aFxyXG59O1xyXG5cclxuZnVuY3Rpb24gZm9ybWF0T3B0c1VuaShvcHRzKSB7XHJcblxyXG4gIGlmKCdwb3NpdGlvbicgaW4gb3B0cykge1xyXG4gICAgb3B0cy5wb3NpdGlvbiA9IChuZXcgTG5nTGF0KG9wdHMucG9zaXRpb24pKS5faW5uZXI7XHJcbiAgfVxyXG5cclxuICBpZihvcHRzLnBhdGgpIHtcclxuICAgIG9wdHMucGF0aCA9IHRyYW5zZnJvbVBhdGhUb1BhdGhzKG9wdHMucGF0aCk7XHJcbiAgfVxyXG5cclxuICBpZihvcHRzLmNlbnRlcikge1xyXG4gICAgb3B0cy5jZW50ZXIgPSAobmV3IExuZ0xhdChvcHRzLmNlbnRlcikpLl9pbm5lcjtcclxuICB9XHJcblxyXG4gIGlmKG9wdHMubWFwKSB7XHJcbiAgICBvcHRzLm1hcCA9IG9wdHMubWFwLl9pbm5lcjtcclxuICB9XHJcblxyXG4gIHJldHVybiBvcHRzO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0cmFuc2Zyb21QYXRoVG9QYXRocyhwYXRoKSB7XHJcbiAgdmFyIHBhdGhzID0gW107XHJcbiAgcGF0aC5mb3JFYWNoKCBmdW5jdGlvbihpdGVtLCBpbmRleCkge1xyXG4gICAgcGF0aHMucHVzaChhcnJDcmVhdGVMbmdMYXQoaXRlbSkpO1xyXG4gIH0pO1xyXG4gIHJldHVybiBwYXRocztcclxufVxyXG5cclxuZnVuY3Rpb24gYXJyQ3JlYXRlTG5nTGF0KGFycikge1xyXG4gIHJldHVybiBuZXcgQk1hcC5Qb2ludCggcGFyc2VGbG9hdChhcnJbMF0pLCBwYXJzZUZsb2F0KGFyclsxXSkgKTtcclxufVxyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKiBtYXJrZXJDbHVzdGVyZXJcclxuICogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbmZ1bmN0aW9uIGZvcm1hdE1hcmtlckNsdXN0ZXJlcihtYXAsIG1hcmtlcnMsIG9wdHMpIHtcclxuICB2YXIgbmV3T3B0cyA9IHt9O1xyXG5cclxuICBpZihtYXAuX2lubmVyKSB7XHJcbiAgICBuZXdPcHRzLm1hcCA9IG1hcC5faW5uZXI7XHJcbiAgfSBlbHNlIHtcclxuICAgIG5ld09wdHMubWFwID0gbWFwO1xyXG4gIH1cclxuXHJcbiAgbmV3T3B0cy5tYXJrZXJzID0gbWFya2Vycy5tYXAoIGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgIHJldHVybiBpdGVtLl9pbm5lcjtcclxuICB9KTtcclxuXHJcbiAgbmV3T3B0cy5vcHRzID0gZm9ybWF0TWFya2VyQ2x1c3RlcmVyT3B0cyhvcHRzKTtcclxuXHJcbiAgcmV0dXJuIG5ld09wdHM7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0c1xyXG4gKiBAZGlmZiA6IG1pbkNsdXN0ZXJTaXplIDogbWluaW11bUNsdXN0ZXJTaXplXHJcbiAqICovXHJcbmZ1bmN0aW9uIGZvcm1hdE1hcmtlckNsdXN0ZXJlck9wdHMob3B0cykge1xyXG4gIGlmKG9wdHMubWluQ2x1c3RlclNpemUpIHtcclxuICAgIG9wdHMubWluaW11bUNsdXN0ZXJTaXplID0gb3B0cy5taW5DbHVzdGVyU2l6ZTtcclxuICB9XHJcblxyXG4gIGlmKG9wdHMuc3R5bGVzKSB7XHJcblxyXG4gICAgaWYob3B0cy5zdHlsZXMpIHtcclxuICAgICAgdmFyIHN0eWxlcyA9IG9wdHMuc3R5bGVzO1xyXG4gICAgICBpZihzdHlsZXMuc2l6ZSkge1xyXG4gICAgICAgIHN0eWxlcy53aWR0aCA9IHN0eWxlcy5nZXRXaWR0aCgpO1xyXG4gICAgICAgIHN0eWxlcy5oZWlnaHQgPSBzdHlsZXMuZ2V0SGVpZ2h0KCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjYW52ZXJ0UGF0aChwYXRoKSB7XHJcbiAgLy8gVE9ETzog5aaC5L2V5aSE55CG6L+Z5LiqcGF0aOi/mOacquWumlxyXG4gIHJldHVybiBwYXRoO1xyXG59XHJcblxyXG5cclxuLy8gdmFyIGZsaWdodFBsYW5Db29yZGluYXRlcyA9IFtcclxuLy8gICB7bGF0OiAzNy43NzIsIGxuZzogLTEyMi4yMTR9LFxyXG4vLyAgIHtsYXQ6IDIxLjI5MSwgbG5nOiAtMTU3LjgyMX0sXHJcbi8vICAge2xhdDogLTE4LjE0MiwgbG5nOiAxNzguNDMxfSxcclxuLy8gICB7bGF0OiAtMjcuNDY3LCBsbmc6IDE1My4wMjd9XHJcbi8vIF07XHJcblxyXG4vLyB2YXIgbGluZUFyciA9IFtcclxuLy8gICBbMTE2LjM2ODkwNCwgMzkuOTEzNDIzXSxcclxuLy8gICBbMTE2LjM4MjEyMiwgMzkuOTAxMTc2XSxcclxuLy8gICBbMTE2LjM4NzI3MSwgMzkuOTEyNTAxXSxcclxuLy8gICBbMTE2LjM5ODI1OCwgMzkuOTA0NjAwXVxyXG4vLyBdO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzL21hcC9ibWFwL2Zvcm1hdE9wdC5qc1xuLy8gbW9kdWxlIGlkID0gNTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 56 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/13.\r\n * @Class Marker\r\n */\r\nvar obc = __webpack_require__(57);\r\nvar onOff = __webpack_require__(51);\r\nvar formatOpts = __webpack_require__(55);\r\n\r\n/**\r\n * Represents a Marker\r\n * @constructor\r\n * @param {Object} opts\r\n * @param {Object} inner\r\n * @return an object, inner is prime google map Marker instance.\r\n * */\r\nfunction Marker(opts, inner) {\r\n\r\n  this._type = 'Marker';\r\n\r\n  if(inner) {\r\n    this._inner = inner;\r\n  } else {\r\n    // 在opts转换之前就要判断添加overlay\r\n    obc.addOverlay(opts, this);\r\n\r\n    var newOpts = formatOpts.marker(opts);\r\n    this._inner = new BMap.Marker(newOpts);\r\n  }\r\n}\r\n\r\nMarker.prototype = {\r\n  setMap: obc.setMap,\r\n  getMap: obc.getMap,\r\n  hide: obc.hide,\r\n  show: obc.show,\r\n  on: onOff.on,\r\n  off: onOff.off\r\n};\r\n\r\nmodule.exports = Marker;\r\n\r\n\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9NYXJrZXIuanM/ZGNiZCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsImZpbGUiOiI1Ni5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGZpenogb24gMjAxNy8yLzEzLlxyXG4gKiBAQ2xhc3MgTWFya2VyXHJcbiAqL1xyXG52YXIgb2JjID0gcmVxdWlyZSgnLi9vdmVybGF5QmFzZUNsYXNzJyk7XHJcbnZhciBvbk9mZiA9IHJlcXVpcmUoJy4vb25PZmYnKTtcclxudmFyIGZvcm1hdE9wdHMgPSByZXF1aXJlKCcuL2Zvcm1hdE9wdCcpO1xyXG5cclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYSBNYXJrZXJcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBpbm5lclxyXG4gKiBAcmV0dXJuIGFuIG9iamVjdCwgaW5uZXIgaXMgcHJpbWUgZ29vZ2xlIG1hcCBNYXJrZXIgaW5zdGFuY2UuXHJcbiAqICovXHJcbmZ1bmN0aW9uIE1hcmtlcihvcHRzLCBpbm5lcikge1xyXG5cclxuICB0aGlzLl90eXBlID0gJ01hcmtlcic7XHJcblxyXG4gIGlmKGlubmVyKSB7XHJcbiAgICB0aGlzLl9pbm5lciA9IGlubmVyO1xyXG4gIH0gZWxzZSB7XHJcbiAgICAvLyDlnKhvcHRz6L2s5o2i5LmL5YmN5bCx6KaB5Yik5pat5re75Yqgb3ZlcmxheVxyXG4gICAgb2JjLmFkZE92ZXJsYXkob3B0cywgdGhpcyk7XHJcblxyXG4gICAgdmFyIG5ld09wdHMgPSBmb3JtYXRPcHRzLm1hcmtlcihvcHRzKTtcclxuICAgIHRoaXMuX2lubmVyID0gbmV3IEJNYXAuTWFya2VyKG5ld09wdHMpO1xyXG4gIH1cclxufVxyXG5cclxuTWFya2VyLnByb3RvdHlwZSA9IHtcclxuICBzZXRNYXA6IG9iYy5zZXRNYXAsXHJcbiAgZ2V0TWFwOiBvYmMuZ2V0TWFwLFxyXG4gIGhpZGU6IG9iYy5oaWRlLFxyXG4gIHNob3c6IG9iYy5zaG93LFxyXG4gIG9uOiBvbk9mZi5vbixcclxuICBvZmY6IG9uT2ZmLm9mZlxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBNYXJrZXI7XHJcblxyXG5cclxuXHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2JtYXAvTWFya2VyLmpzXG4vLyBtb2R1bGUgaWQgPSA1NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 57 */
/***/ function(module, exports) {

	eval("/**\r\n * Created by fizz on 2017/2/17.\r\n */\r\n\r\nmodule.exports = {\r\n  setMap: function(map) {\r\n    if(map !== null) {\r\n      this._inner._smap = map;\r\n      map._overLayers[this._type].push(this);\r\n      this._inner.setMap(map._inner);\r\n    } else {\r\n      this._inner.setMap(null);\r\n    }\r\n  },\r\n\r\n  getMap: function() {\r\n    return this._inner._smap;\r\n  },\r\n\r\n  hide: function() {\r\n    this._inner.setVisible(false);\r\n  },\r\n\r\n  show: function() {\r\n    this._inner.setVisible(true);\r\n  },\r\n\r\n  addOverlay: function(opts, self) {\r\n    if('map' in opts) {\r\n      opts.map._overLayers[self._type].push(self);\r\n    }\r\n  }\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9vdmVybGF5QmFzZUNsYXNzLmpzP2I3ZWYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiNTcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBmaXp6IG9uIDIwMTcvMi8xNy5cclxuICovXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICBzZXRNYXA6IGZ1bmN0aW9uKG1hcCkge1xyXG4gICAgaWYobWFwICE9PSBudWxsKSB7XHJcbiAgICAgIHRoaXMuX2lubmVyLl9zbWFwID0gbWFwO1xyXG4gICAgICBtYXAuX292ZXJMYXllcnNbdGhpcy5fdHlwZV0ucHVzaCh0aGlzKTtcclxuICAgICAgdGhpcy5faW5uZXIuc2V0TWFwKG1hcC5faW5uZXIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faW5uZXIuc2V0TWFwKG51bGwpO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIGdldE1hcDogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5uZXIuX3NtYXA7XHJcbiAgfSxcclxuXHJcbiAgaGlkZTogZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLl9pbm5lci5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICB9LFxyXG5cclxuICBzaG93OiBmdW5jdGlvbigpIHtcclxuICAgIHRoaXMuX2lubmVyLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgfSxcclxuXHJcbiAgYWRkT3ZlcmxheTogZnVuY3Rpb24ob3B0cywgc2VsZikge1xyXG4gICAgaWYoJ21hcCcgaW4gb3B0cykge1xyXG4gICAgICBvcHRzLm1hcC5fb3ZlckxheWVyc1tzZWxmLl90eXBlXS5wdXNoKHNlbGYpO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9vdmVybGF5QmFzZUNsYXNzLmpzXG4vLyBtb2R1bGUgaWQgPSA1N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 58 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/14.\r\n * @constructor InfoWindow\r\n *\r\n * 高德有 change 事件，百度没有\r\n */\r\nvar onOff = __webpack_require__(51);\r\nvar formatOpts = __webpack_require__(55);\r\nvar obc = __webpack_require__(57);\r\nvar LngLat = __webpack_require__(46);\r\n\r\n/**\r\n * @constructor\r\n * @opts {Object} opts\r\n * */\r\nfunction InfoWindow(opts) {\r\n  this._type = 'InfoWindow';\r\n  obc.addOverlay(opts, this);\r\n\r\n  var newOpts = formatOpts.infoWindow(opts);\r\n  this._inner = new BMap.InfoWindow(newOpts.content, newOpts);\r\n}\r\n\r\nInfoWindow.prototype = {\r\n  /**\r\n   * @function open a infoWindow in the position\r\n   * @map {Map} map required\r\n   * @pos {LngLat} position lngLat\r\n   * */\r\n  open: function(map, pos) {\r\n    if(pos) {\r\n      this._inner.setPosition(pos);\r\n    }\r\n    this._inner.open(map._inner);\r\n    this._inner._smap = map;\r\n    map._overLayers.InfoWindow.push(this);\r\n    this._isOpen = true;\r\n  },\r\n\r\n  close: function() {\r\n    this._inner.close();\r\n    this._isOpen = false;\r\n    var infoWindows = this._inner._smap._overLayers.InfoWindow;\r\n    infoWindows.filter( function(item, index) {\r\n      if(item == this) {\r\n        infoWindows.splice(index, 1);\r\n      }\r\n    });\r\n  },\r\n\r\n  getIsOpen: function() {\r\n    return this._isOpen;\r\n  },\r\n\r\n  /**\r\n   * @function setContent\r\n   * @content {String|htmlDOM} content\r\n   * */\r\n  setContent: function(content) {\r\n    this._inner.setContent(content);\r\n  },\r\n\r\n  getContent: function() {\r\n    return this._inner.getContent();\r\n  },\r\n\r\n  // TODO: 百度没有setPosition\r\n  // setPosition: function(lngLat) {\r\n  //   this._inner.setPosition(lngLat);\r\n  // },\r\n\r\n  getPosition: function() {\r\n    return new LngLat('', '', this._inner.getPosition());\r\n  },\r\n\r\n  // todo: google 不支持\r\n  setSize: function(size) {\r\n\r\n  },\r\n\r\n  // todo: google 不支持\r\n  getSize: function() {\r\n\r\n  },\r\n\r\n  on: onOff.on,\r\n  off: onOff.off\r\n};\r\n\r\n\r\n\r\nmodule.exports = InfoWindow;\r\n\r\n\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9JbmZvV2luZG93LmpzP2E2NGYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFVBQVUsT0FBTztBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxJQUFJO0FBQ2YsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxlQUFlLGVBQWU7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxNQUFNOztBQUVOO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUEsR0FBRzs7QUFFSDtBQUNBOztBQUVBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOzs7O0FBSUEiLCJmaWxlIjoiNTguanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBmaXp6IG9uIDIwMTcvMi8xNC5cclxuICogQGNvbnN0cnVjdG9yIEluZm9XaW5kb3dcclxuICpcclxuICog6auY5b635pyJIGNoYW5nZSDkuovku7bvvIznmb7luqbmsqHmnIlcclxuICovXHJcbnZhciBvbk9mZiA9IHJlcXVpcmUoJy4vb25PZmYnKTtcclxudmFyIGZvcm1hdE9wdHMgPSByZXF1aXJlKCcuL2Zvcm1hdE9wdCcpO1xyXG52YXIgb2JjID0gcmVxdWlyZSgnLi9vdmVybGF5QmFzZUNsYXNzJyk7XHJcbnZhciBMbmdMYXQgPSByZXF1aXJlKCcuL0xuZ0xhdCcpO1xyXG5cclxuLyoqXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAb3B0cyB7T2JqZWN0fSBvcHRzXHJcbiAqICovXHJcbmZ1bmN0aW9uIEluZm9XaW5kb3cob3B0cykge1xyXG4gIHRoaXMuX3R5cGUgPSAnSW5mb1dpbmRvdyc7XHJcbiAgb2JjLmFkZE92ZXJsYXkob3B0cywgdGhpcyk7XHJcblxyXG4gIHZhciBuZXdPcHRzID0gZm9ybWF0T3B0cy5pbmZvV2luZG93KG9wdHMpO1xyXG4gIHRoaXMuX2lubmVyID0gbmV3IEJNYXAuSW5mb1dpbmRvdyhuZXdPcHRzLmNvbnRlbnQsIG5ld09wdHMpO1xyXG59XHJcblxyXG5JbmZvV2luZG93LnByb3RvdHlwZSA9IHtcclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gb3BlbiBhIGluZm9XaW5kb3cgaW4gdGhlIHBvc2l0aW9uXHJcbiAgICogQG1hcCB7TWFwfSBtYXAgcmVxdWlyZWRcclxuICAgKiBAcG9zIHtMbmdMYXR9IHBvc2l0aW9uIGxuZ0xhdFxyXG4gICAqICovXHJcbiAgb3BlbjogZnVuY3Rpb24obWFwLCBwb3MpIHtcclxuICAgIGlmKHBvcykge1xyXG4gICAgICB0aGlzLl9pbm5lci5zZXRQb3NpdGlvbihwb3MpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5faW5uZXIub3BlbihtYXAuX2lubmVyKTtcclxuICAgIHRoaXMuX2lubmVyLl9zbWFwID0gbWFwO1xyXG4gICAgbWFwLl9vdmVyTGF5ZXJzLkluZm9XaW5kb3cucHVzaCh0aGlzKTtcclxuICAgIHRoaXMuX2lzT3BlbiA9IHRydWU7XHJcbiAgfSxcclxuXHJcbiAgY2xvc2U6IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy5faW5uZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX2lzT3BlbiA9IGZhbHNlO1xyXG4gICAgdmFyIGluZm9XaW5kb3dzID0gdGhpcy5faW5uZXIuX3NtYXAuX292ZXJMYXllcnMuSW5mb1dpbmRvdztcclxuICAgIGluZm9XaW5kb3dzLmZpbHRlciggZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcclxuICAgICAgaWYoaXRlbSA9PSB0aGlzKSB7XHJcbiAgICAgICAgaW5mb1dpbmRvd3Muc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSxcclxuXHJcbiAgZ2V0SXNPcGVuOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9pc09wZW47XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIHNldENvbnRlbnRcclxuICAgKiBAY29udGVudCB7U3RyaW5nfGh0bWxET019IGNvbnRlbnRcclxuICAgKiAqL1xyXG4gIHNldENvbnRlbnQ6IGZ1bmN0aW9uKGNvbnRlbnQpIHtcclxuICAgIHRoaXMuX2lubmVyLnNldENvbnRlbnQoY29udGVudCk7XHJcbiAgfSxcclxuXHJcbiAgZ2V0Q29udGVudDogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5uZXIuZ2V0Q29udGVudCgpO1xyXG4gIH0sXHJcblxyXG4gIC8vIFRPRE86IOeZvuW6puayoeaciXNldFBvc2l0aW9uXHJcbiAgLy8gc2V0UG9zaXRpb246IGZ1bmN0aW9uKGxuZ0xhdCkge1xyXG4gIC8vICAgdGhpcy5faW5uZXIuc2V0UG9zaXRpb24obG5nTGF0KTtcclxuICAvLyB9LFxyXG5cclxuICBnZXRQb3NpdGlvbjogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gbmV3IExuZ0xhdCgnJywgJycsIHRoaXMuX2lubmVyLmdldFBvc2l0aW9uKCkpO1xyXG4gIH0sXHJcblxyXG4gIC8vIHRvZG86IGdvb2dsZSDkuI3mlK/mjIFcclxuICBzZXRTaXplOiBmdW5jdGlvbihzaXplKSB7XHJcblxyXG4gIH0sXHJcblxyXG4gIC8vIHRvZG86IGdvb2dsZSDkuI3mlK/mjIFcclxuICBnZXRTaXplOiBmdW5jdGlvbigpIHtcclxuXHJcbiAgfSxcclxuXHJcbiAgb246IG9uT2ZmLm9uLFxyXG4gIG9mZjogb25PZmYub2ZmXHJcbn07XHJcblxyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gSW5mb1dpbmRvdztcclxuXHJcblxyXG5cclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9JbmZvV2luZG93LmpzXG4vLyBtb2R1bGUgaWQgPSA1OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 59 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/13.\r\n * @constructor Polyline\r\n */\r\n\r\nvar obc = __webpack_require__(57);\r\nvar onOff = __webpack_require__(51);\r\nvar formatOpts = __webpack_require__(55);\r\nvar Bounds = __webpack_require__(47);\r\n\r\n/**\r\n * @constructor\r\n * @opts {Object} options\r\n * @return an object, inner is prime google map Polyline instance.\r\n * */\r\nfunction Polyline(opts) {\r\n  this._type = 'Polyline';\r\n  obc.addOverlay(opts, this);\r\n\r\n  var newOpts = formatOpts.polyline(opts);\r\n  this._inner = new BMap.Polyline(newOpts.path, newOpts);\r\n  // this._inner._self = this;\r\n}\r\n\r\nPolyline.prototype = {\r\n\r\n  /**\r\n   * @param {Array} path\r\n   * */\r\n  setPath: function(path) {\r\n    this._inner.setPath(formatOpts.path(path));\r\n  },\r\n\r\n  getPath: function() {\r\n    return this._inner.getPath();\r\n  },\r\n\r\n  // TODO： 百度没有setOptions\r\n  setOptions: function() {},\r\n  getOptions: function() {},\r\n  getLength: function() {},\r\n\r\n  getBounds: function() {\r\n    return new Bounds('', '', this._inner.getBounds());\r\n  },\r\n\r\n  hide: obc.hide,\r\n  show: obc.show,\r\n  setMap: obc.setMap,\r\n\r\n  /**\r\n   * @ext {any} extData\r\n   * */\r\n  setExtData: function(ext) {\r\n    this._inner.extDate = ext;\r\n  },\r\n\r\n  getExtData: function() {\r\n    return this._inner.extDate;\r\n  },\r\n\r\n  on: onOff.on,\r\n  off: onOff.off\r\n};\r\n\r\nvar PolylineEventMap = {\r\n\r\n};\r\n\r\nmodule.exports = Polyline;\r\n\r\n\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9Qb2x5bGluZS5qcz8wMmY2Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVLE9BQU87QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLGFBQWEsTUFBTTtBQUNuQjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0EsMkJBQTJCO0FBQzNCLDJCQUEyQjtBQUMzQiwwQkFBMEI7O0FBRTFCO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFdBQVcsSUFBSTtBQUNmO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBIiwiZmlsZSI6IjU5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTMuXHJcbiAqIEBjb25zdHJ1Y3RvciBQb2x5bGluZVxyXG4gKi9cclxuXHJcbnZhciBvYmMgPSByZXF1aXJlKCcuL292ZXJsYXlCYXNlQ2xhc3MnKTtcclxudmFyIG9uT2ZmID0gcmVxdWlyZSgnLi9vbk9mZicpO1xyXG52YXIgZm9ybWF0T3B0cyA9IHJlcXVpcmUoJy4vZm9ybWF0T3B0Jyk7XHJcbnZhciBCb3VuZHMgPSByZXF1aXJlKCcuL0JvdW5kcycpO1xyXG5cclxuLyoqXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAb3B0cyB7T2JqZWN0fSBvcHRpb25zXHJcbiAqIEByZXR1cm4gYW4gb2JqZWN0LCBpbm5lciBpcyBwcmltZSBnb29nbGUgbWFwIFBvbHlsaW5lIGluc3RhbmNlLlxyXG4gKiAqL1xyXG5mdW5jdGlvbiBQb2x5bGluZShvcHRzKSB7XHJcbiAgdGhpcy5fdHlwZSA9ICdQb2x5bGluZSc7XHJcbiAgb2JjLmFkZE92ZXJsYXkob3B0cywgdGhpcyk7XHJcblxyXG4gIHZhciBuZXdPcHRzID0gZm9ybWF0T3B0cy5wb2x5bGluZShvcHRzKTtcclxuICB0aGlzLl9pbm5lciA9IG5ldyBCTWFwLlBvbHlsaW5lKG5ld09wdHMucGF0aCwgbmV3T3B0cyk7XHJcbiAgLy8gdGhpcy5faW5uZXIuX3NlbGYgPSB0aGlzO1xyXG59XHJcblxyXG5Qb2x5bGluZS5wcm90b3R5cGUgPSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7QXJyYXl9IHBhdGhcclxuICAgKiAqL1xyXG4gIHNldFBhdGg6IGZ1bmN0aW9uKHBhdGgpIHtcclxuICAgIHRoaXMuX2lubmVyLnNldFBhdGgoZm9ybWF0T3B0cy5wYXRoKHBhdGgpKTtcclxuICB9LFxyXG5cclxuICBnZXRQYXRoOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbm5lci5nZXRQYXRoKCk7XHJcbiAgfSxcclxuXHJcbiAgLy8gVE9ET++8miDnmb7luqbmsqHmnIlzZXRPcHRpb25zXHJcbiAgc2V0T3B0aW9uczogZnVuY3Rpb24oKSB7fSxcclxuICBnZXRPcHRpb25zOiBmdW5jdGlvbigpIHt9LFxyXG4gIGdldExlbmd0aDogZnVuY3Rpb24oKSB7fSxcclxuXHJcbiAgZ2V0Qm91bmRzOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBuZXcgQm91bmRzKCcnLCAnJywgdGhpcy5faW5uZXIuZ2V0Qm91bmRzKCkpO1xyXG4gIH0sXHJcblxyXG4gIGhpZGU6IG9iYy5oaWRlLFxyXG4gIHNob3c6IG9iYy5zaG93LFxyXG4gIHNldE1hcDogb2JjLnNldE1hcCxcclxuXHJcbiAgLyoqXHJcbiAgICogQGV4dCB7YW55fSBleHREYXRhXHJcbiAgICogKi9cclxuICBzZXRFeHREYXRhOiBmdW5jdGlvbihleHQpIHtcclxuICAgIHRoaXMuX2lubmVyLmV4dERhdGUgPSBleHQ7XHJcbiAgfSxcclxuXHJcbiAgZ2V0RXh0RGF0YTogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5uZXIuZXh0RGF0ZTtcclxuICB9LFxyXG5cclxuICBvbjogb25PZmYub24sXHJcbiAgb2ZmOiBvbk9mZi5vZmZcclxufTtcclxuXHJcbnZhciBQb2x5bGluZUV2ZW50TWFwID0ge1xyXG5cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUG9seWxpbmU7XHJcblxyXG5cclxuXHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2JtYXAvUG9seWxpbmUuanNcbi8vIG1vZHVsZSBpZCA9IDU5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 60 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/13.\r\n * @constructor Polygon\r\n */\r\n\r\n// var event = require('./event');\r\nvar onOff = __webpack_require__(51);\r\nvar formatOpts = __webpack_require__(55);\r\nvar obc = __webpack_require__(57);\r\n\r\n/**\r\n * @constructor\r\n * @param {Object} opts\r\n * @return an object, inner is prime google map Polygon instance.\r\n * */\r\nfunction Polygon(opts) {\r\n  this._type = 'Polygon';\r\n  obc.addOverlay(opts, this);\r\n\r\n  var newOpts = formatOpts.polygon(opts);\r\n  this._inner = new BMap.Polygon(newOpts.path, newOpts);\r\n\r\n}\r\n\r\nPolygon.prototype = {\r\n\r\n  setMap: obc.setMap,\r\n\r\n  /**\r\n   * @param {path:Array LngLat | Array lngLat} path\r\n   * */\r\n  setPath: function(path) {\r\n    this._inner.setPath( path );\r\n  },\r\n  getPath: function() {},\r\n\r\n  setOptions: function() {\r\n    this._inner.setOptions( formatOpts.polygon(opts) );\r\n  },\r\n\r\n  getOptions: function() {},\r\n\r\n  getBounds: function() {},\r\n\r\n  getArea: function() {},\r\n\r\n  hide: obc.hide,\r\n\r\n  show: obc.show,\r\n\r\n\r\n\r\n  /**\r\n   * @param {any} ext extData\r\n   * */\r\n  setExtData: function(ext) {\r\n    this._inner.extDate = ext;\r\n  },\r\n\r\n  getExtData: function() {\r\n    return this._inner.extDate;\r\n  },\r\n\r\n  /**\r\n   * @function judge whether a point in the polygon inner\r\n   * @param {LngLat} point\r\n   * */\r\n  contains: function(point) {\r\n\r\n  },\r\n\r\n  on: onOff.on,\r\n  off: onOff.off\r\n};\r\n\r\nmodule.exports = Polygon;\r\n\r\n\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9Qb2x5Z29uLmpzPzBiZDciXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQSxhQUFhLGlDQUFpQztBQUM5QztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsd0JBQXdCOztBQUV4QjtBQUNBO0FBQ0EsR0FBRzs7QUFFSCwyQkFBMkI7O0FBRTNCLDBCQUEwQjs7QUFFMUIsd0JBQXdCOztBQUV4Qjs7QUFFQTs7OztBQUlBO0FBQ0EsYUFBYSxJQUFJO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQjtBQUNBOztBQUVBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6IjYwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTMuXHJcbiAqIEBjb25zdHJ1Y3RvciBQb2x5Z29uXHJcbiAqL1xyXG5cclxuLy8gdmFyIGV2ZW50ID0gcmVxdWlyZSgnLi9ldmVudCcpO1xyXG52YXIgb25PZmYgPSByZXF1aXJlKCcuL29uT2ZmJyk7XHJcbnZhciBmb3JtYXRPcHRzID0gcmVxdWlyZSgnLi9mb3JtYXRPcHQnKTtcclxudmFyIG9iYyA9IHJlcXVpcmUoJy4vb3ZlcmxheUJhc2VDbGFzcycpO1xyXG5cclxuLyoqXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0c1xyXG4gKiBAcmV0dXJuIGFuIG9iamVjdCwgaW5uZXIgaXMgcHJpbWUgZ29vZ2xlIG1hcCBQb2x5Z29uIGluc3RhbmNlLlxyXG4gKiAqL1xyXG5mdW5jdGlvbiBQb2x5Z29uKG9wdHMpIHtcclxuICB0aGlzLl90eXBlID0gJ1BvbHlnb24nO1xyXG4gIG9iYy5hZGRPdmVybGF5KG9wdHMsIHRoaXMpO1xyXG5cclxuICB2YXIgbmV3T3B0cyA9IGZvcm1hdE9wdHMucG9seWdvbihvcHRzKTtcclxuICB0aGlzLl9pbm5lciA9IG5ldyBCTWFwLlBvbHlnb24obmV3T3B0cy5wYXRoLCBuZXdPcHRzKTtcclxuXHJcbn1cclxuXHJcblBvbHlnb24ucHJvdG90eXBlID0ge1xyXG5cclxuICBzZXRNYXA6IG9iYy5zZXRNYXAsXHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7cGF0aDpBcnJheSBMbmdMYXQgfCBBcnJheSBsbmdMYXR9IHBhdGhcclxuICAgKiAqL1xyXG4gIHNldFBhdGg6IGZ1bmN0aW9uKHBhdGgpIHtcclxuICAgIHRoaXMuX2lubmVyLnNldFBhdGgoIHBhdGggKTtcclxuICB9LFxyXG4gIGdldFBhdGg6IGZ1bmN0aW9uKCkge30sXHJcblxyXG4gIHNldE9wdGlvbnM6IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy5faW5uZXIuc2V0T3B0aW9ucyggZm9ybWF0T3B0cy5wb2x5Z29uKG9wdHMpICk7XHJcbiAgfSxcclxuXHJcbiAgZ2V0T3B0aW9uczogZnVuY3Rpb24oKSB7fSxcclxuXHJcbiAgZ2V0Qm91bmRzOiBmdW5jdGlvbigpIHt9LFxyXG5cclxuICBnZXRBcmVhOiBmdW5jdGlvbigpIHt9LFxyXG5cclxuICBoaWRlOiBvYmMuaGlkZSxcclxuXHJcbiAgc2hvdzogb2JjLnNob3csXHJcblxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHthbnl9IGV4dCBleHREYXRhXHJcbiAgICogKi9cclxuICBzZXRFeHREYXRhOiBmdW5jdGlvbihleHQpIHtcclxuICAgIHRoaXMuX2lubmVyLmV4dERhdGUgPSBleHQ7XHJcbiAgfSxcclxuXHJcbiAgZ2V0RXh0RGF0YTogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5uZXIuZXh0RGF0ZTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24ganVkZ2Ugd2hldGhlciBhIHBvaW50IGluIHRoZSBwb2x5Z29uIGlubmVyXHJcbiAgICogQHBhcmFtIHtMbmdMYXR9IHBvaW50XHJcbiAgICogKi9cclxuICBjb250YWluczogZnVuY3Rpb24ocG9pbnQpIHtcclxuXHJcbiAgfSxcclxuXHJcbiAgb246IG9uT2ZmLm9uLFxyXG4gIG9mZjogb25PZmYub2ZmXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFBvbHlnb247XHJcblxyXG5cclxuXHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2JtYXAvUG9seWdvbi5qc1xuLy8gbW9kdWxlIGlkID0gNjBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 61 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/13.\r\n * @constructor Circle\r\n */\r\n\r\n// var event = require('./event');\r\nvar onOff = __webpack_require__(51);\r\nvar formatOpts = __webpack_require__(55);\r\nvar obc = __webpack_require__(57);\r\nvar LngLat = __webpack_require__(46);\r\n\r\n/**\r\n * @constructor\r\n * @opts {Object} opts\r\n * @return an object, inner is prime google map Circle instance.\r\n * */\r\nfunction Circle(opts) {\r\n  this._type = 'Circle';\r\n  obc.addOverlay(opts, this);\r\n\r\n  var newOpts = formatOpts.circle(opts);\r\n  this._inner = new google.maps.Circle(newOpts);\r\n}\r\n\r\nCircle.prototype = {\r\n\r\n  setMap: obc.setMap,\r\n\r\n  setCenter: function(center) {\r\n    this._inner.setCenter(center);\r\n  },\r\n\r\n  getCenter: function() {\r\n    return new LngLat(' ',' ',this._inner.getCenter());\r\n  },\r\n\r\n  getBounds: function() {\r\n\r\n  },\r\n\r\n  /**\r\n   * @param {Number} radius\r\n   * */\r\n  setRadius: function(radius) {\r\n    this._inner.setRadius(radius);\r\n  },\r\n\r\n  getRadius: function() {\r\n    return this._inner.getRadius();\r\n  },\r\n\r\n  setOptions: function() {\r\n    this._inner.setOptions( formatOpts.polygon(opts) );\r\n  },\r\n\r\n  getOptions: function() {},\r\n\r\n  getArea: function() {},\r\n\r\n  hide: obc.hide,\r\n\r\n  show: obc.show,\r\n\r\n  /**\r\n   * @ext {any} extData\r\n   * */\r\n  setExtData: function(ext) {\r\n    this._inner.extDate = ext;\r\n  },\r\n\r\n  getExtData: function() {\r\n    return this._inner.extDate;\r\n  },\r\n\r\n  /**\r\n   * @function judge whether a point in the polygon inner\r\n   * @point {LngLat}\r\n   * @return {Boolean} true or false\r\n   * */\r\n  contains: function(point) {\r\n\r\n  },\r\n\r\n  on: onOff.on,\r\n  off: onOff.off\r\n};\r\n\r\nvar CircleEventMap = {\r\n\r\n};\r\n\r\nmodule.exports = Circle;\r\n\r\n\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9DaXJjbGUuanM/N2E4NCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVLE9BQU87QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUEsR0FBRzs7QUFFSDtBQUNBLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVILDJCQUEyQjs7QUFFM0Isd0JBQXdCOztBQUV4Qjs7QUFFQTs7QUFFQTtBQUNBLFdBQVcsSUFBSTtBQUNmO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLGFBQWE7QUFDYixjQUFjLFFBQVE7QUFDdEI7QUFDQTs7QUFFQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSIsImZpbGUiOiI2MS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGZpenogb24gMjAxNy8yLzEzLlxyXG4gKiBAY29uc3RydWN0b3IgQ2lyY2xlXHJcbiAqL1xyXG5cclxuLy8gdmFyIGV2ZW50ID0gcmVxdWlyZSgnLi9ldmVudCcpO1xyXG52YXIgb25PZmYgPSByZXF1aXJlKCcuL29uT2ZmJyk7XHJcbnZhciBmb3JtYXRPcHRzID0gcmVxdWlyZSgnLi9mb3JtYXRPcHQnKTtcclxudmFyIG9iYyA9IHJlcXVpcmUoJy4vb3ZlcmxheUJhc2VDbGFzcycpO1xyXG52YXIgTG5nTGF0ID0gcmVxdWlyZSgnLi9MbmdMYXQnKTtcclxuXHJcbi8qKlxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQG9wdHMge09iamVjdH0gb3B0c1xyXG4gKiBAcmV0dXJuIGFuIG9iamVjdCwgaW5uZXIgaXMgcHJpbWUgZ29vZ2xlIG1hcCBDaXJjbGUgaW5zdGFuY2UuXHJcbiAqICovXHJcbmZ1bmN0aW9uIENpcmNsZShvcHRzKSB7XHJcbiAgdGhpcy5fdHlwZSA9ICdDaXJjbGUnO1xyXG4gIG9iYy5hZGRPdmVybGF5KG9wdHMsIHRoaXMpO1xyXG5cclxuICB2YXIgbmV3T3B0cyA9IGZvcm1hdE9wdHMuY2lyY2xlKG9wdHMpO1xyXG4gIHRoaXMuX2lubmVyID0gbmV3IGdvb2dsZS5tYXBzLkNpcmNsZShuZXdPcHRzKTtcclxufVxyXG5cclxuQ2lyY2xlLnByb3RvdHlwZSA9IHtcclxuXHJcbiAgc2V0TWFwOiBvYmMuc2V0TWFwLFxyXG5cclxuICBzZXRDZW50ZXI6IGZ1bmN0aW9uKGNlbnRlcikge1xyXG4gICAgdGhpcy5faW5uZXIuc2V0Q2VudGVyKGNlbnRlcik7XHJcbiAgfSxcclxuXHJcbiAgZ2V0Q2VudGVyOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBuZXcgTG5nTGF0KCcgJywnICcsdGhpcy5faW5uZXIuZ2V0Q2VudGVyKCkpO1xyXG4gIH0sXHJcblxyXG4gIGdldEJvdW5kczogZnVuY3Rpb24oKSB7XHJcblxyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSByYWRpdXNcclxuICAgKiAqL1xyXG4gIHNldFJhZGl1czogZnVuY3Rpb24ocmFkaXVzKSB7XHJcbiAgICB0aGlzLl9pbm5lci5zZXRSYWRpdXMocmFkaXVzKTtcclxuICB9LFxyXG5cclxuICBnZXRSYWRpdXM6IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lubmVyLmdldFJhZGl1cygpO1xyXG4gIH0sXHJcblxyXG4gIHNldE9wdGlvbnM6IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy5faW5uZXIuc2V0T3B0aW9ucyggZm9ybWF0T3B0cy5wb2x5Z29uKG9wdHMpICk7XHJcbiAgfSxcclxuXHJcbiAgZ2V0T3B0aW9uczogZnVuY3Rpb24oKSB7fSxcclxuXHJcbiAgZ2V0QXJlYTogZnVuY3Rpb24oKSB7fSxcclxuXHJcbiAgaGlkZTogb2JjLmhpZGUsXHJcblxyXG4gIHNob3c6IG9iYy5zaG93LFxyXG5cclxuICAvKipcclxuICAgKiBAZXh0IHthbnl9IGV4dERhdGFcclxuICAgKiAqL1xyXG4gIHNldEV4dERhdGE6IGZ1bmN0aW9uKGV4dCkge1xyXG4gICAgdGhpcy5faW5uZXIuZXh0RGF0ZSA9IGV4dDtcclxuICB9LFxyXG5cclxuICBnZXRFeHREYXRhOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbm5lci5leHREYXRlO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBqdWRnZSB3aGV0aGVyIGEgcG9pbnQgaW4gdGhlIHBvbHlnb24gaW5uZXJcclxuICAgKiBAcG9pbnQge0xuZ0xhdH1cclxuICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlIG9yIGZhbHNlXHJcbiAgICogKi9cclxuICBjb250YWluczogZnVuY3Rpb24ocG9pbnQpIHtcclxuXHJcbiAgfSxcclxuXHJcbiAgb246IG9uT2ZmLm9uLFxyXG4gIG9mZjogb25PZmYub2ZmXHJcbn07XHJcblxyXG52YXIgQ2lyY2xlRXZlbnRNYXAgPSB7XHJcblxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBDaXJjbGU7XHJcblxyXG5cclxuXHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2JtYXAvQ2lyY2xlLmpzXG4vLyBtb2R1bGUgaWQgPSA2MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 62 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/15.\r\n */\r\n\r\nvar formatOpts = __webpack_require__(55);\r\nvar obc = __webpack_require__(57)\r\n\r\n/**\r\n * @constructor\r\n * @map {Map.Object}\r\n * @marker {Marker}\r\n * @opts {MarkerClustererOptions}\r\n * */\r\nfunction Clusterer(map, markers, opts) {\r\n  if(markers.length < 1) return;\r\n\r\n  this._type = 'MarkerClusterer';\r\n  obc.addOverlay({map: map}, this);\r\n\r\n  var newOpts = formatOpts.markerClusterer(map, markers, opts);\r\n  this._inner = new MarkerClusterer(newOpts.map, newOpts.markers, newOpts.opts);\r\n  this._inner._smap = map;\r\n}\r\n\r\nClusterer.prototype = {\r\n  getSize: function() {},\r\n\r\n  setMap: obc.setMap,\r\n\r\n  getMap: function() {\r\n    return this._inner.getMap();\r\n  },\r\n\r\n  addMarker: function() {},\r\n  removeMarker: function() {},\r\n\r\n  /**\r\n   * @param {Array} styles\r\n   * */\r\n  setStyles: function(styles) {\r\n\r\n  }\r\n};\r\n\r\nmodule.exports = Clusterer;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9NYXJrZXJDbHVzdGVyZXIuanM/ZWZhOCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNULFlBQVk7QUFDWixVQUFVO0FBQ1Y7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0JBQWtCLFNBQVM7O0FBRTNCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esd0JBQXdCOztBQUV4Qjs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSCwwQkFBMEI7QUFDMUIsNkJBQTZCOztBQUU3QjtBQUNBLGFBQWEsTUFBTTtBQUNuQjtBQUNBOztBQUVBO0FBQ0E7O0FBRUEiLCJmaWxlIjoiNjIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBmaXp6IG9uIDIwMTcvMi8xNS5cclxuICovXHJcblxyXG52YXIgZm9ybWF0T3B0cyA9IHJlcXVpcmUoJy4vZm9ybWF0T3B0Jyk7XHJcbnZhciBvYmMgPSByZXF1aXJlKCcuL292ZXJsYXlCYXNlQ2xhc3MnKVxyXG5cclxuLyoqXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAbWFwIHtNYXAuT2JqZWN0fVxyXG4gKiBAbWFya2VyIHtNYXJrZXJ9XHJcbiAqIEBvcHRzIHtNYXJrZXJDbHVzdGVyZXJPcHRpb25zfVxyXG4gKiAqL1xyXG5mdW5jdGlvbiBDbHVzdGVyZXIobWFwLCBtYXJrZXJzLCBvcHRzKSB7XHJcbiAgaWYobWFya2Vycy5sZW5ndGggPCAxKSByZXR1cm47XHJcblxyXG4gIHRoaXMuX3R5cGUgPSAnTWFya2VyQ2x1c3RlcmVyJztcclxuICBvYmMuYWRkT3ZlcmxheSh7bWFwOiBtYXB9LCB0aGlzKTtcclxuXHJcbiAgdmFyIG5ld09wdHMgPSBmb3JtYXRPcHRzLm1hcmtlckNsdXN0ZXJlcihtYXAsIG1hcmtlcnMsIG9wdHMpO1xyXG4gIHRoaXMuX2lubmVyID0gbmV3IE1hcmtlckNsdXN0ZXJlcihuZXdPcHRzLm1hcCwgbmV3T3B0cy5tYXJrZXJzLCBuZXdPcHRzLm9wdHMpO1xyXG4gIHRoaXMuX2lubmVyLl9zbWFwID0gbWFwO1xyXG59XHJcblxyXG5DbHVzdGVyZXIucHJvdG90eXBlID0ge1xyXG4gIGdldFNpemU6IGZ1bmN0aW9uKCkge30sXHJcblxyXG4gIHNldE1hcDogb2JjLnNldE1hcCxcclxuXHJcbiAgZ2V0TWFwOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbm5lci5nZXRNYXAoKTtcclxuICB9LFxyXG5cclxuICBhZGRNYXJrZXI6IGZ1bmN0aW9uKCkge30sXHJcbiAgcmVtb3ZlTWFya2VyOiBmdW5jdGlvbigpIHt9LFxyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge0FycmF5fSBzdHlsZXNcclxuICAgKiAqL1xyXG4gIHNldFN0eWxlczogZnVuY3Rpb24oc3R5bGVzKSB7XHJcblxyXG4gIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gQ2x1c3RlcmVyO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzL21hcC9ibWFwL01hcmtlckNsdXN0ZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gNjJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 63 */,
/* 64 */,
/* 65 */
/***/ function(module, exports) {

	eval("/**\r\n *  地图api封装\r\n *  van\r\n *  15年11月\r\n *\r\n *  使用高德地图 命名方式与高德地图api呼应 简化了层次 方便调用\r\n *  依赖jq\r\n **/\r\n\r\n;document.write('<script src=\"http://webapi.amap.com/maps?v=1.3&key=a3b3d16e95cfd8d858300d093f839c5f\"></script>');\r\n(function(){\r\n    window.XMapSdk=function (opt,theme){\r\n        return new mapSdk(opt,theme);\r\n    };\r\n\r\n    var mapSdk=function(opt,theme){\r\n        var defaultTheme={\r\n            strokeColor: \"#2e90df\",\r\n            strokeOpacity: 1,\r\n            strokeWeight: 3,\r\n            strokeStyle:'solid',\r\n            fillColor: \"#d2e8f5\",\r\n            fillOpacity: 0.5\r\n        };\r\n\r\n        var latLng = [104.056435,30.671192];//默认\r\n        var defaultOpt={\r\n            zoom:13,\r\n            pulgin:[],\r\n            center:latLng\r\n        };\r\n\r\n        this.opt= $.extend(true,{},defaultOpt,opt);\r\n        this.theme= $.extend(true,{},defaultTheme,theme);\r\n\r\n\r\n\r\n        this.mapObj=new AMap.Map(opt['dom'],this.opt);\r\n        var mapObj= this.mapObj;\r\n        for (var x in this.opt.pulgin)\r\n        {\r\n            opt= this.opt.pulgin[x];\r\n            switch(x)\r\n            {\r\n                case 'scale':\r\n                    this.mapObj.plugin([\"AMap.Scale\"],function(){\r\n                        var scale = new AMap.Scale(opt);\r\n                        mapObj.addControl(scale);\r\n                    });\r\n                    break;\r\n                case 'toolBar':\r\n                    this.mapObj.plugin([\"AMap.ToolBar\"], function () {\r\n                        var toolBar = new AMap.ToolBar(opt);\r\n                        mapObj.addControl(toolBar);\r\n                    });\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n        return this;\r\n    };\r\n    mapSdk.prototype={\r\n        clearMap:function (){\r\n            this.mapObj.clearMap();\r\n        },\r\n        destroy:function (){\r\n\r\n            this.mapObj.destroy();\r\n        },\r\n        setFitView:function (){\r\n            this.mapObj.setFitView();\r\n        },\r\n        setMap:function (el){\r\n            el.setMap(this.mapObj);\r\n        },\r\n        lngLat:function (lng,lat){\r\n            return new AMap.LngLat(lng,lat);\r\n        },\r\n        icon:function (img){\r\n            if(img){\r\n                return new AMap.Icon({\r\n                    image:img\r\n                });\r\n            }else{\r\n                return new AMap.Icon();\r\n            }\r\n        },\r\n        pixel:function (x,y){\r\n            return new AMap.Pixel(x,y);\r\n        },\r\n        size:function (w,h){\r\n            return new AMap.Size(w,h);\r\n        },\r\n        marker:function (lnglatXY,img,x,y,opt){\r\n            var defaultOpt={\r\n                map:this.mapObj,\r\n                position: lnglatXY,\r\n                zIndex:9999\r\n            };\r\n            if(img){\r\n                opt.icon=this.icon(img)\r\n            }\r\n            if(x  &&  y){\r\n                opt.offset=this.pixel(x,y);\r\n            }\r\n            return new AMap.Marker(this._handlerOpt(defaultOpt,opt));\r\n        },\r\n        infoWindow:function (content){\r\n            return new AMap.InfoWindow({\r\n                content:content,\r\n                size:this.size(300, 0),\r\n                autoMove:true,\r\n                offset:this.pixel(0,-30)\r\n            });\r\n        },\r\n        placeSearch:function (keyword,size,cb){\r\n            AMap.service([\"AMap.PlaceSearch\"], function() {\r\n                var placeSearch = new AMap.PlaceSearch({ //构造地点查询类\r\n                    //map: mapObj,\r\n                    pageSize:size,\r\n                    pageIndex:1\r\n                });\r\n                placeSearch.search(keyword,function (status,res){\r\n                    if(status == 'complete'  && res.poiList.pois.length){\r\n                        //todo  处理是信息不全导致的没有结果  res.cityList有结果\r\n\r\n                        cb(res.poiList.pois);\r\n                    }\r\n                });\r\n\r\n            });\r\n        },\r\n        //地理编码和反地理编码\r\n        unGeoCoder:function(lnglatXY,completeCb) {\r\n            //var that=this;\r\n\r\n            this.mapObj.plugin([\"AMap.Geocoder\"], function() {\r\n                var geocoder = new AMap.Geocoder({\r\n                    radius: 1000,\r\n                    extensions: \"base\"\r\n                });\r\n                geocoder.getAddress(lnglatXY,function(e,res){\r\n                    if(e == 'complete'){\r\n                        completeCb(res.regeocode.formattedAddress);\r\n                    }\r\n                });\r\n            });\r\n        },\r\n        geoCoder:function(address,completeCb) {\r\n            //var that=this;\r\n\r\n            this.mapObj.plugin([\"AMap.Geocoder\"], function() {\r\n                var geocoder = new AMap.Geocoder({\r\n                    radius: 1000,\r\n                    extensions: \"base\"\r\n                });\r\n                geocoder.getLocation(address,function(e,res){\r\n                    console.log(res);\r\n                    if(e == 'complete' && res.info ==='OK'){\r\n\r\n                        completeCb(res.geocodes);\r\n                    }\r\n                });\r\n            });\r\n        },\r\n\r\n        popMap:function(data,markerCb,mouseCb){\r\n            var that = this;\r\n            var markerData = Array();\r\n            var mouseData = Array();\r\n            var markerArray = Array();\r\n\r\n            $(\".x-popMap\").fadeIn('slow');\r\n            //注册事件\r\n            $(\"body\").on('click','.x-popMap-cancel',function(){\r\n                that.closePopMap();\r\n            });\r\n\r\n            $(\"body\").on('click','.x-popMap-ok',function(){\r\n                that.closePopMap();\r\n                markerCb(markerData);//当前选中marker点的数据\r\n            });\r\n\r\n            for (var i = 0; i < data.length; i++) {\r\n                var obj = data[i];\r\n                var marker = this.marker([obj.lng,obj.lat],'img/marker_icon1.png',-20,-40,{\r\n                    content:'<div class=\"marker\"><img src=\"img/marker_icon1.png\"></div>'\r\n                });\r\n                marker['extData'] = obj['extData'];\r\n                markerArray.push(marker);\r\n                console.log(marker.getIcon());\r\n                marker.on('click',function(e){\r\n                    $.each(markerArray,function(i,value){\r\n                        value.setContent('<div class=\"marker\"><img src=\"img/marker_icon1.png\"></div>');\r\n                    });\r\n                    this.setContent('<div class=\"marker\"><img src=\"img/marker_select.png\"></div>');\r\n                    markerData = e.target.extData;\r\n                });\r\n            }\r\n            //注册鼠标右击事件    右击获取地址和坐标\r\n            this.mapObj.on('click',function(e){\r\n                console.log(\"222\");\r\n                that.unGeoCoder(e.lnglat,function(data){\r\n                    mouseCb( {lngLat:e.lnglat,address:data});//返回坐标和地址\r\n                    that.closePopMap();\r\n                });\r\n            });\r\n            \r\n            console.log(markerArray);\r\n        },\r\n        closePopMap:function(){\r\n            $(\".x-popMap\").fadeOut('slow');\r\n        },\r\n\r\n        //搜索   keyword：关键字  type:类型   cb:回调函数\r\n        districtSearch:function (keyword,type,cb){\r\n            AMap.service([\"AMap.DistrictSearch\"], function() {\r\n                if(type== 'boundaries'){\r\n                    var districtSearch = new AMap.DistrictSearch({ //构造地点查询类\r\n                        extensions:'all',\r\n                        subdistrict:0\r\n                    });\r\n                    districtSearch.search(keyword,function (status,res){\r\n                        if(status == 'complete'){\r\n                            var area=res.districtList[0];\r\n\r\n                            var maxLength=0;\r\n                            var maxboundaries=[];\r\n                            for(var i =0;i< area.boundaries.length;i++){\r\n                                if(area.boundaries[i].length > maxLength){\r\n                                    maxLength=area.boundaries[i].length;\r\n                                    maxboundaries=area.boundaries[i];\r\n                                }\r\n                            }\r\n\r\n                            if(maxboundaries.length){\r\n                                cb(true,{'name':area.name,'boundaries':maxboundaries});\r\n                            }else{\r\n                                cb(false,status);\r\n                            }\r\n                        }else{\r\n                            cb(false,status);\r\n                        }\r\n                    });\r\n                }else if(type== 'district'){\r\n                    //todo  搜行政区名称\r\n                    //var districtSearch = new AMap.DistrictSearch({ //构造地点查询类\r\n                    //    subdistrict:3\r\n                    //});\r\n                    //...\r\n                }\r\n\r\n            });\r\n        },\r\n        mouseTool:function (type,drawCb,opt){\r\n            var mapObj=this.mapObj;\r\n            var that=this;\r\n            var mouseTool;\r\n            mapObj.plugin([\"AMap.MouseTool\"], function() {\r\n                mouseTool= new AMap.MouseTool(mapObj);\r\n                //todo  别的类型的绘制\r\n\r\n                switch(type){\r\n                    case 'polyLine':\r\n                        mouseTool.polyline(opt);\r\n                        break;\r\n                    case 'polygon':\r\n                        mouseTool.polygon(opt);\r\n                        break;\r\n                    case 'marker':\r\n                        mouseTool.marker(opt);\r\n                        break;\r\n                    case 'circle':\r\n                        mouseTool.circle(opt);\r\n                        break;\r\n                    default :\r\n                        console.log(\"参数不正确\");\r\n                        break;\r\n                }\r\n\r\n\r\n                that.addListener(mouseTool, \"draw\", function (e){\r\n                    drawCb(e,mouseTool);\r\n                });\r\n            });\r\n            return mouseTool;\r\n\r\n        },\r\n        //编辑多边形    polygon:多边形对象    endCb：编辑结束后的回调\r\n        polygonEdit:function (polygon,endCb){\r\n            var mapObj=this.mapObj;\r\n            var polyEditor;\r\n            var that=this;\r\n\r\n            mapObj.plugin([\"AMap.PolyEditor\"], function() {\r\n                polyEditor = new AMap.PolyEditor(mapObj, polygon);\r\n                polyEditor.open();\r\n\r\n                that.addListener(polyEditor, \"end\", function (e){\r\n                    endCb(e.target);\r\n                });\r\n            });\r\n\r\n            return polyEditor;\r\n\r\n        },\r\n        //编辑圆   圆对象  endCb：编辑结束后的callBack  adjustCb:鼠标调整圆半径的时候触发   moveCB：移动的时候触发\r\n        circleEditor:function(circle,endCb,adjustCb,moveCb){\r\n            var mapObj=this.mapObj;\r\n            var that=this;\r\n            var circleEditor;\r\n            mapObj.plugin([\"AMap.CircleEditor\"], function() {\r\n                circleEditor= new AMap.CircleEditor(mapObj, circle);\r\n                circleEditor.open();\r\n                that.addListener(circleEditor,'end',function (e){\r\n\r\n                    endCb(e.target);\r\n                });\r\n                if(adjustCb){\r\n                    that.addListener(circleEditor,'adjust',function (e){\r\n                        adjustCb(e.target);\r\n                    });\r\n                }\r\n                if(moveCb){\r\n                    that.addListener(circleEditor,'move',function (e){\r\n                        moveCb(e.target);\r\n                    });\r\n                }\r\n\r\n\r\n            });\r\n            return  circleEditor;\r\n        },\r\n        polyLine:function(points,opt){\r\n            return new AMap.Polyline(this._handlerOpt({\r\n                map:this.mapObj,\r\n                path:points\r\n            },opt));\r\n        },\r\n        polygon:function (points,opt){\r\n            return new AMap.Polygon(this._handlerOpt({\r\n                map: this.mapObj,\r\n                path: points\r\n            },opt));\r\n        },\r\n        //画圆\r\n        circle:function (lnglatXY,rauids,opt){\r\n            var el=new AMap.Circle(this._handlerOpt({\r\n                center: lnglatXY,// 圆心位置\r\n                radius: rauids\r\n            },opt));\r\n            this.setMap(el);\r\n            return el;\r\n        },\r\n        cluster:function(sts,markers){\r\n            var cluster;\r\n            var mapObj = this.mapObj;\r\n            mapObj.plugin([\"AMap.MarkerClusterer\"], function () {\r\n                cluster = new AMap.MarkerClusterer(mapObj, markers, {\r\n                    styles: sts,\r\n                    zoomOnClick: false\r\n                });\r\n            });\r\n        },\r\n        calculateCenter:function (lnglatarr) {\r\n            //获取多边形中间位置\r\n            var total = lnglatarr.length;\r\n            var X = 0, Y = 0, Z = 0;\r\n            $.each(lnglatarr, function (index, lnglat) {\r\n                //            console.log(lnglat);\r\n                var lng = lnglat[0] * Math.PI / 180;\r\n                var lat = lnglat[1] * Math.PI / 180;\r\n                var x, y, z;\r\n                x = Math.cos(lat) * Math.cos(lng);\r\n                y = Math.cos(lat) * Math.sin(lng);\r\n                z = Math.sin(lat);\r\n                X += x;\r\n                Y += y;\r\n                Z += z;\r\n            });\r\n            X = X / total;\r\n            Y = Y / total;\r\n            Z = Z / total;\r\n\r\n            var Lng = Math.atan2(Y, X);\r\n            var Hyp = Math.sqrt(X * X + Y * Y);\r\n            var Lat = Math.atan2(Z, Hyp);\r\n\r\n            return new AMap.LngLat(Lng * 180 / Math.PI, Lat * 180 / Math.PI);\r\n        },\r\n        on:function (){\r\n\r\n            this.addListener(arguments);\r\n        },\r\n        off:function (){\r\n            this.removeListener(arguments);\r\n        },\r\n        addListener:function (){\r\n            var param=arguments;\r\n            if(arguments.length==2){\r\n                return AMap.event.addListener(this.mapObj,param[0],param[1]);\r\n            }else{\r\n                return AMap.event.addListener(param[0],param[1],param[2]);\r\n            }\r\n        },\r\n        removeListener:function (listener){\r\n            AMap.event.removeListener(listener);\r\n        },\r\n        _handlerOpt:function (opt,theme){\r\n            if(opt){\r\n                return $.extend(true,{},this.theme,theme,opt);\r\n            }else{\r\n                return $.extend(true,{},this.theme,theme);\r\n\r\n            }\r\n        }\r\n\r\n    };\r\n})();\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvTWFwU0RLLmpzP2Q4OTkiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGtDQUFrQztBQUNsQyxvQ0FBb0M7Ozs7QUFJcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0Esd0RBQXdEO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYixTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckMsYUFBYTs7QUFFYiwyQkFBMkIsaUJBQWlCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDZCQUE2QixFQUFFO0FBQzdEO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7O0FBRWI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRUFBa0U7QUFDbEU7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHlDQUF5QywwQkFBMEI7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHlDQUF5Qyw0Q0FBNEM7QUFDckYsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakI7QUFDQSxvRUFBb0U7QUFDcEU7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTs7QUFFQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiOztBQUVBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7O0FBRWI7O0FBRUEsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7OztBQUdBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkMsYUFBYTtBQUNiLHVDQUF1Qzs7QUFFdkM7QUFDQTs7QUFFQTtBQUNBLENBQUMiLCJmaWxlIjoiNjUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogIOWcsOWbvmFwaeWwgeijhVxyXG4gKiAgdmFuXHJcbiAqICAxNeW5tDEx5pyIXHJcbiAqXHJcbiAqICDkvb/nlKjpq5jlvrflnLDlm74g5ZG95ZCN5pa55byP5LiO6auY5b635Zyw5Zu+YXBp5ZG85bqUIOeugOWMluS6huWxguasoSDmlrnkvr/osIPnlKhcclxuICogIOS+nei1lmpxXHJcbiAqKi9cclxuXHJcbjtkb2N1bWVudC53cml0ZSgnPHNjcmlwdCBzcmM9XCJodHRwOi8vd2ViYXBpLmFtYXAuY29tL21hcHM/dj0xLjMma2V5PWEzYjNkMTZlOTVjZmQ4ZDg1ODMwMGQwOTNmODM5YzVmXCI+PC9zY3JpcHQ+Jyk7XHJcbihmdW5jdGlvbigpe1xyXG4gICAgd2luZG93LlhNYXBTZGs9ZnVuY3Rpb24gKG9wdCx0aGVtZSl7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBtYXBTZGsob3B0LHRoZW1lKTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIG1hcFNkaz1mdW5jdGlvbihvcHQsdGhlbWUpe1xyXG4gICAgICAgIHZhciBkZWZhdWx0VGhlbWU9e1xyXG4gICAgICAgICAgICBzdHJva2VDb2xvcjogXCIjMmU5MGRmXCIsXHJcbiAgICAgICAgICAgIHN0cm9rZU9wYWNpdHk6IDEsXHJcbiAgICAgICAgICAgIHN0cm9rZVdlaWdodDogMyxcclxuICAgICAgICAgICAgc3Ryb2tlU3R5bGU6J3NvbGlkJyxcclxuICAgICAgICAgICAgZmlsbENvbG9yOiBcIiNkMmU4ZjVcIixcclxuICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBsYXRMbmcgPSBbMTA0LjA1NjQzNSwzMC42NzExOTJdOy8v6buY6K6kXHJcbiAgICAgICAgdmFyIGRlZmF1bHRPcHQ9e1xyXG4gICAgICAgICAgICB6b29tOjEzLFxyXG4gICAgICAgICAgICBwdWxnaW46W10sXHJcbiAgICAgICAgICAgIGNlbnRlcjpsYXRMbmdcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLm9wdD0gJC5leHRlbmQodHJ1ZSx7fSxkZWZhdWx0T3B0LG9wdCk7XHJcbiAgICAgICAgdGhpcy50aGVtZT0gJC5leHRlbmQodHJ1ZSx7fSxkZWZhdWx0VGhlbWUsdGhlbWUpO1xyXG5cclxuXHJcblxyXG4gICAgICAgIHRoaXMubWFwT2JqPW5ldyBBTWFwLk1hcChvcHRbJ2RvbSddLHRoaXMub3B0KTtcclxuICAgICAgICB2YXIgbWFwT2JqPSB0aGlzLm1hcE9iajtcclxuICAgICAgICBmb3IgKHZhciB4IGluIHRoaXMub3B0LnB1bGdpbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG9wdD0gdGhpcy5vcHQucHVsZ2luW3hdO1xyXG4gICAgICAgICAgICBzd2l0Y2goeClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnc2NhbGUnOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFwT2JqLnBsdWdpbihbXCJBTWFwLlNjYWxlXCJdLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzY2FsZSA9IG5ldyBBTWFwLlNjYWxlKG9wdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcE9iai5hZGRDb250cm9sKHNjYWxlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3Rvb2xCYXInOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFwT2JqLnBsdWdpbihbXCJBTWFwLlRvb2xCYXJcIl0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvb2xCYXIgPSBuZXcgQU1hcC5Ub29sQmFyKG9wdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcE9iai5hZGRDb250cm9sKHRvb2xCYXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgbWFwU2RrLnByb3RvdHlwZT17XHJcbiAgICAgICAgY2xlYXJNYXA6ZnVuY3Rpb24gKCl7XHJcbiAgICAgICAgICAgIHRoaXMubWFwT2JqLmNsZWFyTWFwKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBkZXN0cm95OmZ1bmN0aW9uICgpe1xyXG5cclxuICAgICAgICAgICAgdGhpcy5tYXBPYmouZGVzdHJveSgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0Rml0VmlldzpmdW5jdGlvbiAoKXtcclxuICAgICAgICAgICAgdGhpcy5tYXBPYmouc2V0Rml0VmlldygpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0TWFwOmZ1bmN0aW9uIChlbCl7XHJcbiAgICAgICAgICAgIGVsLnNldE1hcCh0aGlzLm1hcE9iaik7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBsbmdMYXQ6ZnVuY3Rpb24gKGxuZyxsYXQpe1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEFNYXAuTG5nTGF0KGxuZyxsYXQpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaWNvbjpmdW5jdGlvbiAoaW1nKXtcclxuICAgICAgICAgICAgaWYoaW1nKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQU1hcC5JY29uKHtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZTppbWdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQU1hcC5JY29uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHBpeGVsOmZ1bmN0aW9uICh4LHkpe1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEFNYXAuUGl4ZWwoeCx5KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNpemU6ZnVuY3Rpb24gKHcsaCl7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQU1hcC5TaXplKHcsaCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBtYXJrZXI6ZnVuY3Rpb24gKGxuZ2xhdFhZLGltZyx4LHksb3B0KXtcclxuICAgICAgICAgICAgdmFyIGRlZmF1bHRPcHQ9e1xyXG4gICAgICAgICAgICAgICAgbWFwOnRoaXMubWFwT2JqLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGxuZ2xhdFhZLFxyXG4gICAgICAgICAgICAgICAgekluZGV4Ojk5OTlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaWYoaW1nKXtcclxuICAgICAgICAgICAgICAgIG9wdC5pY29uPXRoaXMuaWNvbihpbWcpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoeCAgJiYgIHkpe1xyXG4gICAgICAgICAgICAgICAgb3B0Lm9mZnNldD10aGlzLnBpeGVsKHgseSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBBTWFwLk1hcmtlcih0aGlzLl9oYW5kbGVyT3B0KGRlZmF1bHRPcHQsb3B0KSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBpbmZvV2luZG93OmZ1bmN0aW9uIChjb250ZW50KXtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBBTWFwLkluZm9XaW5kb3coe1xyXG4gICAgICAgICAgICAgICAgY29udGVudDpjb250ZW50LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTp0aGlzLnNpemUoMzAwLCAwKSxcclxuICAgICAgICAgICAgICAgIGF1dG9Nb3ZlOnRydWUsXHJcbiAgICAgICAgICAgICAgICBvZmZzZXQ6dGhpcy5waXhlbCgwLC0zMClcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBwbGFjZVNlYXJjaDpmdW5jdGlvbiAoa2V5d29yZCxzaXplLGNiKXtcclxuICAgICAgICAgICAgQU1hcC5zZXJ2aWNlKFtcIkFNYXAuUGxhY2VTZWFyY2hcIl0sIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBsYWNlU2VhcmNoID0gbmV3IEFNYXAuUGxhY2VTZWFyY2goeyAvL+aehOmAoOWcsOeCueafpeivouexu1xyXG4gICAgICAgICAgICAgICAgICAgIC8vbWFwOiBtYXBPYmosXHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZVNpemU6c2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICBwYWdlSW5kZXg6MVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBwbGFjZVNlYXJjaC5zZWFyY2goa2V5d29yZCxmdW5jdGlvbiAoc3RhdHVzLHJlcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoc3RhdHVzID09ICdjb21wbGV0ZScgICYmIHJlcy5wb2lMaXN0LnBvaXMubGVuZ3RoKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy90b2RvICDlpITnkIbmmK/kv6Hmga/kuI3lhajlr7zoh7TnmoTmsqHmnInnu5PmnpwgIHJlcy5jaXR5TGlzdOaciee7k+aenFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2IocmVzLnBvaUxpc3QucG9pcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8v5Zyw55CG57yW56CB5ZKM5Y+N5Zyw55CG57yW56CBXHJcbiAgICAgICAgdW5HZW9Db2RlcjpmdW5jdGlvbihsbmdsYXRYWSxjb21wbGV0ZUNiKSB7XHJcbiAgICAgICAgICAgIC8vdmFyIHRoYXQ9dGhpcztcclxuXHJcbiAgICAgICAgICAgIHRoaXMubWFwT2JqLnBsdWdpbihbXCJBTWFwLkdlb2NvZGVyXCJdLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBnZW9jb2RlciA9IG5ldyBBTWFwLkdlb2NvZGVyKHtcclxuICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW5zaW9uczogXCJiYXNlXCJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZ2VvY29kZXIuZ2V0QWRkcmVzcyhsbmdsYXRYWSxmdW5jdGlvbihlLHJlcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZSA9PSAnY29tcGxldGUnKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGVDYihyZXMucmVnZW9jb2RlLmZvcm1hdHRlZEFkZHJlc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdlb0NvZGVyOmZ1bmN0aW9uKGFkZHJlc3MsY29tcGxldGVDYikge1xyXG4gICAgICAgICAgICAvL3ZhciB0aGF0PXRoaXM7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm1hcE9iai5wbHVnaW4oW1wiQU1hcC5HZW9jb2RlclwiXSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZ2VvY29kZXIgPSBuZXcgQU1hcC5HZW9jb2Rlcih7XHJcbiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMDAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbnM6IFwiYmFzZVwiXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGdlb2NvZGVyLmdldExvY2F0aW9uKGFkZHJlc3MsZnVuY3Rpb24oZSxyZXMpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZSA9PSAnY29tcGxldGUnICYmIHJlcy5pbmZvID09PSdPSycpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGVDYihyZXMuZ2VvY29kZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBwb3BNYXA6ZnVuY3Rpb24oZGF0YSxtYXJrZXJDYixtb3VzZUNiKXtcclxuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgICAgICB2YXIgbWFya2VyRGF0YSA9IEFycmF5KCk7XHJcbiAgICAgICAgICAgIHZhciBtb3VzZURhdGEgPSBBcnJheSgpO1xyXG4gICAgICAgICAgICB2YXIgbWFya2VyQXJyYXkgPSBBcnJheSgpO1xyXG5cclxuICAgICAgICAgICAgJChcIi54LXBvcE1hcFwiKS5mYWRlSW4oJ3Nsb3cnKTtcclxuICAgICAgICAgICAgLy/ms6jlhozkuovku7ZcclxuICAgICAgICAgICAgJChcImJvZHlcIikub24oJ2NsaWNrJywnLngtcG9wTWFwLWNhbmNlbCcsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIHRoYXQuY2xvc2VQb3BNYXAoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAkKFwiYm9keVwiKS5vbignY2xpY2snLCcueC1wb3BNYXAtb2snLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICB0aGF0LmNsb3NlUG9wTWFwKCk7XHJcbiAgICAgICAgICAgICAgICBtYXJrZXJDYihtYXJrZXJEYXRhKTsvL+W9k+WJjemAieS4rW1hcmtlcueCueeahOaVsOaNrlxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9iaiA9IGRhdGFbaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgbWFya2VyID0gdGhpcy5tYXJrZXIoW29iai5sbmcsb2JqLmxhdF0sJ2ltZy9tYXJrZXJfaWNvbjEucG5nJywtMjAsLTQwLHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50Oic8ZGl2IGNsYXNzPVwibWFya2VyXCI+PGltZyBzcmM9XCJpbWcvbWFya2VyX2ljb24xLnBuZ1wiPjwvZGl2PidcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgbWFya2VyWydleHREYXRhJ10gPSBvYmpbJ2V4dERhdGEnXTtcclxuICAgICAgICAgICAgICAgIG1hcmtlckFycmF5LnB1c2gobWFya2VyKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1hcmtlci5nZXRJY29uKCkpO1xyXG4gICAgICAgICAgICAgICAgbWFya2VyLm9uKCdjbGljaycsZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKG1hcmtlckFycmF5LGZ1bmN0aW9uKGksdmFsdWUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5zZXRDb250ZW50KCc8ZGl2IGNsYXNzPVwibWFya2VyXCI+PGltZyBzcmM9XCJpbWcvbWFya2VyX2ljb24xLnBuZ1wiPjwvZGl2PicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29udGVudCgnPGRpdiBjbGFzcz1cIm1hcmtlclwiPjxpbWcgc3JjPVwiaW1nL21hcmtlcl9zZWxlY3QucG5nXCI+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFya2VyRGF0YSA9IGUudGFyZ2V0LmV4dERhdGE7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL+azqOWGjOm8oOagh+WPs+WHu+S6i+S7tiAgICDlj7Plh7vojrflj5blnLDlnYDlkozlnZDmoIdcclxuICAgICAgICAgICAgdGhpcy5tYXBPYmoub24oJ2NsaWNrJyxmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiMjIyXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhhdC51bkdlb0NvZGVyKGUubG5nbGF0LGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgICAgIG1vdXNlQ2IoIHtsbmdMYXQ6ZS5sbmdsYXQsYWRkcmVzczpkYXRhfSk7Ly/ov5Tlm57lnZDmoIflkozlnLDlnYBcclxuICAgICAgICAgICAgICAgICAgICB0aGF0LmNsb3NlUG9wTWFwKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhtYXJrZXJBcnJheSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjbG9zZVBvcE1hcDpmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAkKFwiLngtcG9wTWFwXCIpLmZhZGVPdXQoJ3Nsb3cnKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvL+aQnOe0oiAgIGtleXdvcmTvvJrlhbPplK7lrZcgIHR5cGU657G75Z6LICAgY2I65Zue6LCD5Ye95pWwXHJcbiAgICAgICAgZGlzdHJpY3RTZWFyY2g6ZnVuY3Rpb24gKGtleXdvcmQsdHlwZSxjYil7XHJcbiAgICAgICAgICAgIEFNYXAuc2VydmljZShbXCJBTWFwLkRpc3RyaWN0U2VhcmNoXCJdLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGlmKHR5cGU9PSAnYm91bmRhcmllcycpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkaXN0cmljdFNlYXJjaCA9IG5ldyBBTWFwLkRpc3RyaWN0U2VhcmNoKHsgLy/mnoTpgKDlnLDngrnmn6Xor6LnsbtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZW5zaW9uczonYWxsJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3ViZGlzdHJpY3Q6MFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3RyaWN0U2VhcmNoLnNlYXJjaChrZXl3b3JkLGZ1bmN0aW9uIChzdGF0dXMscmVzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3RhdHVzID09ICdjb21wbGV0ZScpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyZWE9cmVzLmRpc3RyaWN0TGlzdFswXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF4TGVuZ3RoPTA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF4Ym91bmRhcmllcz1bXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9MDtpPCBhcmVhLmJvdW5kYXJpZXMubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoYXJlYS5ib3VuZGFyaWVzW2ldLmxlbmd0aCA+IG1heExlbmd0aCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heExlbmd0aD1hcmVhLmJvdW5kYXJpZXNbaV0ubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhib3VuZGFyaWVzPWFyZWEuYm91bmRhcmllc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobWF4Ym91bmRhcmllcy5sZW5ndGgpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNiKHRydWUseyduYW1lJzphcmVhLm5hbWUsJ2JvdW5kYXJpZXMnOm1heGJvdW5kYXJpZXN9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNiKGZhbHNlLHN0YXR1cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2IoZmFsc2Usc3RhdHVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfWVsc2UgaWYodHlwZT09ICdkaXN0cmljdCcpe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vdG9kbyAg5pCc6KGM5pS/5Yy65ZCN56ewXHJcbiAgICAgICAgICAgICAgICAgICAgLy92YXIgZGlzdHJpY3RTZWFyY2ggPSBuZXcgQU1hcC5EaXN0cmljdFNlYXJjaCh7IC8v5p6E6YCg5Zyw54K55p+l6K+i57G7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgc3ViZGlzdHJpY3Q6M1xyXG4gICAgICAgICAgICAgICAgICAgIC8vfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8uLi5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbW91c2VUb29sOmZ1bmN0aW9uICh0eXBlLGRyYXdDYixvcHQpe1xyXG4gICAgICAgICAgICB2YXIgbWFwT2JqPXRoaXMubWFwT2JqO1xyXG4gICAgICAgICAgICB2YXIgdGhhdD10aGlzO1xyXG4gICAgICAgICAgICB2YXIgbW91c2VUb29sO1xyXG4gICAgICAgICAgICBtYXBPYmoucGx1Z2luKFtcIkFNYXAuTW91c2VUb29sXCJdLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIG1vdXNlVG9vbD0gbmV3IEFNYXAuTW91c2VUb29sKG1hcE9iaik7XHJcbiAgICAgICAgICAgICAgICAvL3RvZG8gIOWIq+eahOexu+Wei+eahOe7mOWItlxyXG5cclxuICAgICAgICAgICAgICAgIHN3aXRjaCh0eXBlKXtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdwb2x5TGluZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdXNlVG9vbC5wb2x5bGluZShvcHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdwb2x5Z29uJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW91c2VUb29sLnBvbHlnb24ob3B0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbWFya2VyJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW91c2VUb29sLm1hcmtlcihvcHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdjaXJjbGUnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb3VzZVRvb2wuY2lyY2xlKG9wdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuWPguaVsOS4jeato+ehrlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIHRoYXQuYWRkTGlzdGVuZXIobW91c2VUb29sLCBcImRyYXdcIiwgZnVuY3Rpb24gKGUpe1xyXG4gICAgICAgICAgICAgICAgICAgIGRyYXdDYihlLG1vdXNlVG9vbCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBtb3VzZVRvb2w7XHJcblxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLy/nvJbovpHlpJrovrnlvaIgICAgcG9seWdvbjrlpJrovrnlvaLlr7nosaEgICAgZW5kQ2LvvJrnvJbovpHnu5PmnZ/lkI7nmoTlm57osINcclxuICAgICAgICBwb2x5Z29uRWRpdDpmdW5jdGlvbiAocG9seWdvbixlbmRDYil7XHJcbiAgICAgICAgICAgIHZhciBtYXBPYmo9dGhpcy5tYXBPYmo7XHJcbiAgICAgICAgICAgIHZhciBwb2x5RWRpdG9yO1xyXG4gICAgICAgICAgICB2YXIgdGhhdD10aGlzO1xyXG5cclxuICAgICAgICAgICAgbWFwT2JqLnBsdWdpbihbXCJBTWFwLlBvbHlFZGl0b3JcIl0sIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcG9seUVkaXRvciA9IG5ldyBBTWFwLlBvbHlFZGl0b3IobWFwT2JqLCBwb2x5Z29uKTtcclxuICAgICAgICAgICAgICAgIHBvbHlFZGl0b3Iub3BlbigpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoYXQuYWRkTGlzdGVuZXIocG9seUVkaXRvciwgXCJlbmRcIiwgZnVuY3Rpb24gKGUpe1xyXG4gICAgICAgICAgICAgICAgICAgIGVuZENiKGUudGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwb2x5RWRpdG9yO1xyXG5cclxuICAgICAgICB9LFxyXG4gICAgICAgIC8v57yW6L6R5ZyGICAg5ZyG5a+56LGhICBlbmRDYu+8mue8lui+kee7k+adn+WQjueahGNhbGxCYWNrICBhZGp1c3RDYjrpvKDmoIfosIPmlbTlnIbljYrlvoTnmoTml7blgJnop6blj5EgICBtb3ZlQ0LvvJrnp7vliqjnmoTml7blgJnop6blj5FcclxuICAgICAgICBjaXJjbGVFZGl0b3I6ZnVuY3Rpb24oY2lyY2xlLGVuZENiLGFkanVzdENiLG1vdmVDYil7XHJcbiAgICAgICAgICAgIHZhciBtYXBPYmo9dGhpcy5tYXBPYmo7XHJcbiAgICAgICAgICAgIHZhciB0aGF0PXRoaXM7XHJcbiAgICAgICAgICAgIHZhciBjaXJjbGVFZGl0b3I7XHJcbiAgICAgICAgICAgIG1hcE9iai5wbHVnaW4oW1wiQU1hcC5DaXJjbGVFZGl0b3JcIl0sIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgY2lyY2xlRWRpdG9yPSBuZXcgQU1hcC5DaXJjbGVFZGl0b3IobWFwT2JqLCBjaXJjbGUpO1xyXG4gICAgICAgICAgICAgICAgY2lyY2xlRWRpdG9yLm9wZW4oKTtcclxuICAgICAgICAgICAgICAgIHRoYXQuYWRkTGlzdGVuZXIoY2lyY2xlRWRpdG9yLCdlbmQnLGZ1bmN0aW9uIChlKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZW5kQ2IoZS50YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZihhZGp1c3RDYil7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5hZGRMaXN0ZW5lcihjaXJjbGVFZGl0b3IsJ2FkanVzdCcsZnVuY3Rpb24gKGUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGp1c3RDYihlLnRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZihtb3ZlQ2Ipe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuYWRkTGlzdGVuZXIoY2lyY2xlRWRpdG9yLCdtb3ZlJyxmdW5jdGlvbiAoZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVDYihlLnRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiAgY2lyY2xlRWRpdG9yO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcG9seUxpbmU6ZnVuY3Rpb24ocG9pbnRzLG9wdCl7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQU1hcC5Qb2x5bGluZSh0aGlzLl9oYW5kbGVyT3B0KHtcclxuICAgICAgICAgICAgICAgIG1hcDp0aGlzLm1hcE9iaixcclxuICAgICAgICAgICAgICAgIHBhdGg6cG9pbnRzXHJcbiAgICAgICAgICAgIH0sb3B0KSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBwb2x5Z29uOmZ1bmN0aW9uIChwb2ludHMsb3B0KXtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBBTWFwLlBvbHlnb24odGhpcy5faGFuZGxlck9wdCh7XHJcbiAgICAgICAgICAgICAgICBtYXA6IHRoaXMubWFwT2JqLFxyXG4gICAgICAgICAgICAgICAgcGF0aDogcG9pbnRzXHJcbiAgICAgICAgICAgIH0sb3B0KSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAvL+eUu+WchlxyXG4gICAgICAgIGNpcmNsZTpmdW5jdGlvbiAobG5nbGF0WFkscmF1aWRzLG9wdCl7XHJcbiAgICAgICAgICAgIHZhciBlbD1uZXcgQU1hcC5DaXJjbGUodGhpcy5faGFuZGxlck9wdCh7XHJcbiAgICAgICAgICAgICAgICBjZW50ZXI6IGxuZ2xhdFhZLC8vIOWchuW/g+S9jee9rlxyXG4gICAgICAgICAgICAgICAgcmFkaXVzOiByYXVpZHNcclxuICAgICAgICAgICAgfSxvcHQpKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRNYXAoZWwpO1xyXG4gICAgICAgICAgICByZXR1cm4gZWw7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjbHVzdGVyOmZ1bmN0aW9uKHN0cyxtYXJrZXJzKXtcclxuICAgICAgICAgICAgdmFyIGNsdXN0ZXI7XHJcbiAgICAgICAgICAgIHZhciBtYXBPYmogPSB0aGlzLm1hcE9iajtcclxuICAgICAgICAgICAgbWFwT2JqLnBsdWdpbihbXCJBTWFwLk1hcmtlckNsdXN0ZXJlclwiXSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgY2x1c3RlciA9IG5ldyBBTWFwLk1hcmtlckNsdXN0ZXJlcihtYXBPYmosIG1hcmtlcnMsIHtcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZXM6IHN0cyxcclxuICAgICAgICAgICAgICAgICAgICB6b29tT25DbGljazogZmFsc2VcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNhbGN1bGF0ZUNlbnRlcjpmdW5jdGlvbiAobG5nbGF0YXJyKSB7XHJcbiAgICAgICAgICAgIC8v6I635Y+W5aSa6L655b2i5Lit6Ze05L2N572uXHJcbiAgICAgICAgICAgIHZhciB0b3RhbCA9IGxuZ2xhdGFyci5sZW5ndGg7XHJcbiAgICAgICAgICAgIHZhciBYID0gMCwgWSA9IDAsIFogPSAwO1xyXG4gICAgICAgICAgICAkLmVhY2gobG5nbGF0YXJyLCBmdW5jdGlvbiAoaW5kZXgsIGxuZ2xhdCkge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICBjb25zb2xlLmxvZyhsbmdsYXQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGxuZyA9IGxuZ2xhdFswXSAqIE1hdGguUEkgLyAxODA7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGF0ID0gbG5nbGF0WzFdICogTWF0aC5QSSAvIDE4MDtcclxuICAgICAgICAgICAgICAgIHZhciB4LCB5LCB6O1xyXG4gICAgICAgICAgICAgICAgeCA9IE1hdGguY29zKGxhdCkgKiBNYXRoLmNvcyhsbmcpO1xyXG4gICAgICAgICAgICAgICAgeSA9IE1hdGguY29zKGxhdCkgKiBNYXRoLnNpbihsbmcpO1xyXG4gICAgICAgICAgICAgICAgeiA9IE1hdGguc2luKGxhdCk7XHJcbiAgICAgICAgICAgICAgICBYICs9IHg7XHJcbiAgICAgICAgICAgICAgICBZICs9IHk7XHJcbiAgICAgICAgICAgICAgICBaICs9IHo7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBYID0gWCAvIHRvdGFsO1xyXG4gICAgICAgICAgICBZID0gWSAvIHRvdGFsO1xyXG4gICAgICAgICAgICBaID0gWiAvIHRvdGFsO1xyXG5cclxuICAgICAgICAgICAgdmFyIExuZyA9IE1hdGguYXRhbjIoWSwgWCk7XHJcbiAgICAgICAgICAgIHZhciBIeXAgPSBNYXRoLnNxcnQoWCAqIFggKyBZICogWSk7XHJcbiAgICAgICAgICAgIHZhciBMYXQgPSBNYXRoLmF0YW4yKFosIEh5cCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEFNYXAuTG5nTGF0KExuZyAqIDE4MCAvIE1hdGguUEksIExhdCAqIDE4MCAvIE1hdGguUEkpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb246ZnVuY3Rpb24gKCl7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmFkZExpc3RlbmVyKGFyZ3VtZW50cyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBvZmY6ZnVuY3Rpb24gKCl7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIoYXJndW1lbnRzKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFkZExpc3RlbmVyOmZ1bmN0aW9uICgpe1xyXG4gICAgICAgICAgICB2YXIgcGFyYW09YXJndW1lbnRzO1xyXG4gICAgICAgICAgICBpZihhcmd1bWVudHMubGVuZ3RoPT0yKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBBTWFwLmV2ZW50LmFkZExpc3RlbmVyKHRoaXMubWFwT2JqLHBhcmFtWzBdLHBhcmFtWzFdKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQU1hcC5ldmVudC5hZGRMaXN0ZW5lcihwYXJhbVswXSxwYXJhbVsxXSxwYXJhbVsyXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlbW92ZUxpc3RlbmVyOmZ1bmN0aW9uIChsaXN0ZW5lcil7XHJcbiAgICAgICAgICAgIEFNYXAuZXZlbnQucmVtb3ZlTGlzdGVuZXIobGlzdGVuZXIpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgX2hhbmRsZXJPcHQ6ZnVuY3Rpb24gKG9wdCx0aGVtZSl7XHJcbiAgICAgICAgICAgIGlmKG9wdCl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJC5leHRlbmQodHJ1ZSx7fSx0aGlzLnRoZW1lLHRoZW1lLG9wdCk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICQuZXh0ZW5kKHRydWUse30sdGhpcy50aGVtZSx0aGVtZSk7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcbn0pKCk7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL01hcFNESy5qc1xuLy8gbW9kdWxlIGlkID0gNjVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ }
/******/ ]);