/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "D:\\phpStudy\\WWW\\TP0011\\xstarp\\xstarp\\dist";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/1/19.\r\n * package all the components.\r\n * @output prod entry.\r\n */\r\n\r\n__webpack_require__(1);\r\n__webpack_require__(42);\r\n__webpack_require__(43);\r\n__webpack_require__(44);\r\n__webpack_require__(45);\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMveHN0YXJwLmpzPzk1NDIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBmaXp6IG9uIDIwMTcvMS8xOS5cclxuICogcGFja2FnZSBhbGwgdGhlIGNvbXBvbmVudHMuXHJcbiAqIEBvdXRwdXQgcHJvZCBlbnRyeS5cclxuICovXHJcblxyXG5yZXF1aXJlKCcuL2ZpenouanMnKTtcclxucmVxdWlyZSgnLi9qY2MuanMnKTtcclxucmVxdWlyZSgnLi9kdWFuc2lqaWEuanMnKTtcclxucmVxdWlyZSgnLi9tbWYuanMnKTtcclxucmVxdWlyZSgnLi96cS5qcycpO1xyXG5cclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMveHN0YXJwLmpzXG4vLyBtb2R1bGUgaWQgPSAwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 1 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by jesse on 2017/2/23.\r\n */\r\n\r\n__webpack_require__(2)\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZml6ei5qcz8zNTdhIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTs7QUFFQSIsImZpbGUiOiIxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgamVzc2Ugb24gMjAxNy8yLzIzLlxyXG4gKi9cclxuXHJcbnJlcXVpcmUoJy4vY29tcG9uZW50cy9tYXAvJylcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZml6ei5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 2 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/13.\r\n */\r\n\r\nvar util = __webpack_require__(3);\r\nvar GMap = __webpack_require__(4);\r\nvar DMap = __webpack_require__(23);\r\n__webpack_require__(41);\r\n\r\nwindow.GMap = GMap;\r\nwindow.DMap = DMap;\r\n\r\nvar SMap = {};\r\n\r\nconsole.log(123);\r\n\r\nwindow.mapCreate = mapCreate;\r\n\r\nif(typeof AMap === 'undefined') {\r\n  SMap = mapCreate('g');\r\n} else {\r\n  SMap = mapCreate('a');\r\n}\r\n\r\nfunction mapCreate(type) {\r\n  if (type == 'a') {\r\n    initPlugin('AMap', 'AMap');\r\n    return window.AMap;\r\n  } else if (type == 'g') {\r\n    initPlugin('GMap', 'GMap');\r\n    return window.GMap;\r\n  } else if (type == 'b') {\r\n    initPlugin('DMap', 'DMap');\r\n    return window.DMap;\r\n  }\r\n}\r\n\r\nmapCreate.setType = function(type) {\r\n  var mapType = '';\r\n  if( type == 'a' ) {\r\n    window.SMap = AMap;\r\n    mapType = 'AMap';\r\n  } else if ( type == 'g' ) {\r\n    window.SMap = window.GMap;\r\n    mapType = 'GMap';\r\n  } else if ( type == 'b') {\r\n    window.SMap = window.DMap;\r\n    mapType = 'DMap';\r\n  }\r\n  initPlugin(mapType, 'SMap');\r\n};\r\n\r\nfunction initPlugin(mapType, Map) {\r\n  window[Map].sPlugin = {\r\n    MouseTool: mapType + '.MouseTool',\r\n    CircleEditor: mapType + '.CircleEditor',\r\n    PolyEditor: mapType + '.PolyEditor',\r\n    Hotspot: mapType + '.Hotspot',\r\n    MarkerClusterer: mapType + '.MarkerClusterer',\r\n    RangingTool: mapType + '.RangingTool'\r\n  };\r\n}\r\n\r\n\r\n\r\nmodule.exports = window.SMap = SMap;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvaW5kZXguanM/ZmU1OCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBIiwiZmlsZSI6IjIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBmaXp6IG9uIDIwMTcvMi8xMy5cclxuICovXHJcblxyXG52YXIgdXRpbCA9IHJlcXVpcmUoJy4uLy4uL2NvbW1vbi9qcy91dGlsLmpzJyk7XHJcbnZhciBHTWFwID0gcmVxdWlyZSgnLi9nbWFwL2luZGV4LmpzJyk7XHJcbnZhciBETWFwID0gcmVxdWlyZSgnLi9ibWFwL2luZGV4LmpzJyk7XHJcbnJlcXVpcmUoJy4vTWFwU0RLLmpzJyk7XHJcblxyXG53aW5kb3cuR01hcCA9IEdNYXA7XHJcbndpbmRvdy5ETWFwID0gRE1hcDtcclxuXHJcbnZhciBTTWFwID0ge307XHJcblxyXG5jb25zb2xlLmxvZygxMjMpO1xyXG5cclxud2luZG93Lm1hcENyZWF0ZSA9IG1hcENyZWF0ZTtcclxuXHJcbmlmKHR5cGVvZiBBTWFwID09PSAndW5kZWZpbmVkJykge1xyXG4gIFNNYXAgPSBtYXBDcmVhdGUoJ2cnKTtcclxufSBlbHNlIHtcclxuICBTTWFwID0gbWFwQ3JlYXRlKCdhJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1hcENyZWF0ZSh0eXBlKSB7XHJcbiAgaWYgKHR5cGUgPT0gJ2EnKSB7XHJcbiAgICBpbml0UGx1Z2luKCdBTWFwJywgJ0FNYXAnKTtcclxuICAgIHJldHVybiB3aW5kb3cuQU1hcDtcclxuICB9IGVsc2UgaWYgKHR5cGUgPT0gJ2cnKSB7XHJcbiAgICBpbml0UGx1Z2luKCdHTWFwJywgJ0dNYXAnKTtcclxuICAgIHJldHVybiB3aW5kb3cuR01hcDtcclxuICB9IGVsc2UgaWYgKHR5cGUgPT0gJ2InKSB7XHJcbiAgICBpbml0UGx1Z2luKCdETWFwJywgJ0RNYXAnKTtcclxuICAgIHJldHVybiB3aW5kb3cuRE1hcDtcclxuICB9XHJcbn1cclxuXHJcbm1hcENyZWF0ZS5zZXRUeXBlID0gZnVuY3Rpb24odHlwZSkge1xyXG4gIHZhciBtYXBUeXBlID0gJyc7XHJcbiAgaWYoIHR5cGUgPT0gJ2EnICkge1xyXG4gICAgd2luZG93LlNNYXAgPSBBTWFwO1xyXG4gICAgbWFwVHlwZSA9ICdBTWFwJztcclxuICB9IGVsc2UgaWYgKCB0eXBlID09ICdnJyApIHtcclxuICAgIHdpbmRvdy5TTWFwID0gd2luZG93LkdNYXA7XHJcbiAgICBtYXBUeXBlID0gJ0dNYXAnO1xyXG4gIH0gZWxzZSBpZiAoIHR5cGUgPT0gJ2InKSB7XHJcbiAgICB3aW5kb3cuU01hcCA9IHdpbmRvdy5ETWFwO1xyXG4gICAgbWFwVHlwZSA9ICdETWFwJztcclxuICB9XHJcbiAgaW5pdFBsdWdpbihtYXBUeXBlLCAnU01hcCcpO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gaW5pdFBsdWdpbihtYXBUeXBlLCBNYXApIHtcclxuICB3aW5kb3dbTWFwXS5zUGx1Z2luID0ge1xyXG4gICAgTW91c2VUb29sOiBtYXBUeXBlICsgJy5Nb3VzZVRvb2wnLFxyXG4gICAgQ2lyY2xlRWRpdG9yOiBtYXBUeXBlICsgJy5DaXJjbGVFZGl0b3InLFxyXG4gICAgUG9seUVkaXRvcjogbWFwVHlwZSArICcuUG9seUVkaXRvcicsXHJcbiAgICBIb3RzcG90OiBtYXBUeXBlICsgJy5Ib3RzcG90JyxcclxuICAgIE1hcmtlckNsdXN0ZXJlcjogbWFwVHlwZSArICcuTWFya2VyQ2x1c3RlcmVyJyxcclxuICAgIFJhbmdpbmdUb29sOiBtYXBUeXBlICsgJy5SYW5naW5nVG9vbCdcclxuICB9O1xyXG59XHJcblxyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gd2luZG93LlNNYXAgPSBTTWFwO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzL21hcC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 3 */
/***/ function(module, exports) {

	eval("/**\r\n * Created by fizz on 2017/2/16.\r\n */\r\n\r\nmodule.exports = {\r\n  isArray: function(item) {\r\n    return Object.prototype.toString.call(item) == '[object Array]';\r\n  },\r\n\r\n  isString: function(item) {\r\n    return typeof item === 'string';\r\n  },\r\n\r\n  isExitsVariable: function(variable) {\r\n    try {\r\n      if(typeof(variable) === 'undefined') {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    } catch(err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2pzL3V0aWwuanM/ODYxOSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IjMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBmaXp6IG9uIDIwMTcvMi8xNi5cclxuICovXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICBpc0FycmF5OiBmdW5jdGlvbihpdGVtKSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZW0pID09ICdbb2JqZWN0IEFycmF5XSc7XHJcbiAgfSxcclxuXHJcbiAgaXNTdHJpbmc6IGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgIHJldHVybiB0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZyc7XHJcbiAgfSxcclxuXHJcbiAgaXNFeGl0c1ZhcmlhYmxlOiBmdW5jdGlvbih2YXJpYWJsZSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYodHlwZW9mKHZhcmlhYmxlKSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2goZXJyKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21tb24vanMvdXRpbC5qc1xuLy8gbW9kdWxlIGlkID0gM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 4 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/13.\r\n */\r\n\r\nvar LngLat = __webpack_require__(5);\r\nvar Bounds = __webpack_require__(6);\r\nvar Pixel = __webpack_require__(7);\r\nvar Size = __webpack_require__(8);\r\nvar Map = __webpack_require__(9);\r\nvar Marker = __webpack_require__(16);\r\nvar event = __webpack_require__(12);\r\nvar InfoWindow = __webpack_require__(18);\r\nvar Polyline = __webpack_require__(19);\r\nvar Polygon = __webpack_require__(20);\r\nvar Circle = __webpack_require__(21);\r\nvar MarkerClusterer = __webpack_require__(22);\r\n\r\nvar GMap = {};\r\n\r\nGMap.event = event;\r\n\r\nGMap.LngLat = LngLat;\r\nGMap.Bounds = Bounds;\r\nGMap.Pixel = Pixel;\r\nGMap.Size = Size;\r\n\r\nGMap.Map = Map;\r\nGMap.Marker = Marker;\r\nGMap.InfoWindow = InfoWindow;\r\nGMap.Polyline = Polyline;\r\nGMap.Polygon = Polygon;\r\nGMap.Circle = Circle;\r\nGMap.MarkerClusterer = MarkerClusterer;\r\n\r\nmodule.exports = window.GMap = GMap;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9pbmRleC5qcz82MmU2Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJmaWxlIjoiNC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGZpenogb24gMjAxNy8yLzEzLlxyXG4gKi9cclxuXHJcbnZhciBMbmdMYXQgPSByZXF1aXJlKCcuL0xuZ0xhdCcpO1xyXG52YXIgQm91bmRzID0gcmVxdWlyZSgnLi9Cb3VuZHMnKTtcclxudmFyIFBpeGVsID0gcmVxdWlyZSgnLi9QaXhlbCcpO1xyXG52YXIgU2l6ZSA9IHJlcXVpcmUoJy4vU2l6ZScpO1xyXG52YXIgTWFwID0gcmVxdWlyZSgnLi9NYXAnKTtcclxudmFyIE1hcmtlciA9IHJlcXVpcmUoJy4vTWFya2VyJyk7XHJcbnZhciBldmVudCA9IHJlcXVpcmUoJy4vZXZlbnQnKTtcclxudmFyIEluZm9XaW5kb3cgPSByZXF1aXJlKCcuL0luZm9XaW5kb3cnKTtcclxudmFyIFBvbHlsaW5lID0gcmVxdWlyZSgnLi9Qb2x5bGluZScpO1xyXG52YXIgUG9seWdvbiA9IHJlcXVpcmUoJy4vUG9seWdvbicpO1xyXG52YXIgQ2lyY2xlID0gcmVxdWlyZSgnLi9DaXJjbGUnKTtcclxudmFyIE1hcmtlckNsdXN0ZXJlciA9IHJlcXVpcmUoJy4vTWFya2VyQ2x1c3RlcmVyJyk7XHJcblxyXG52YXIgR01hcCA9IHt9O1xyXG5cclxuR01hcC5ldmVudCA9IGV2ZW50O1xyXG5cclxuR01hcC5MbmdMYXQgPSBMbmdMYXQ7XHJcbkdNYXAuQm91bmRzID0gQm91bmRzO1xyXG5HTWFwLlBpeGVsID0gUGl4ZWw7XHJcbkdNYXAuU2l6ZSA9IFNpemU7XHJcblxyXG5HTWFwLk1hcCA9IE1hcDtcclxuR01hcC5NYXJrZXIgPSBNYXJrZXI7XHJcbkdNYXAuSW5mb1dpbmRvdyA9IEluZm9XaW5kb3c7XHJcbkdNYXAuUG9seWxpbmUgPSBQb2x5bGluZTtcclxuR01hcC5Qb2x5Z29uID0gUG9seWdvbjtcclxuR01hcC5DaXJjbGUgPSBDaXJjbGU7XHJcbkdNYXAuTWFya2VyQ2x1c3RlcmVyID0gTWFya2VyQ2x1c3RlcmVyO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB3aW5kb3cuR01hcCA9IEdNYXA7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2dtYXAvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 5 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/13.\r\n */\r\n\r\nvar util = __webpack_require__(3);\r\n\r\n/**\r\n * @constructor\r\n * @lng {Number} lng\r\n * @lat {Number} lat\r\n * */\r\nfunction LngLat(lng, lat, inner) {\r\n\r\n  // 包装GMap的LngLat结构\r\n  if(inner) {\r\n    this._inner = inner;\r\n  }\r\n\r\n  // 构造函数模式\r\n  else {\r\n    if(arguments.length < 2) {\r\n\r\n      // 数组形式，前者为lng，后者为lat [116.397428, 39.90923] -- position\r\n      if(util.isArray(lng)){\r\n\r\n        if( typeof lng[0] === 'string' || typeof lng[1] === 'string' ) {\r\n          this.lng = parseFloat(lng[0]);\r\n          this.lat = parseFloat(lng[1]);\r\n        }\r\n\r\n        else {\r\n          this.lng = lng[0];\r\n          this.lat = lng[1];\r\n        }\r\n      }\r\n\r\n      // 对象形式，lng对应lng，lat对应lat (lng: 116.397428, lat: 39.90923)\r\n      else {\r\n        this.lng = lng.lng;\r\n        this.lat = lng.lat;\r\n      }\r\n    }\r\n\r\n    else {\r\n\r\n      // (\"116.403322\", \"39.920255\") string\r\n      if(util.isString(lng) || util.isString(lat)) {\r\n        this.lng = parseFloat(lng);\r\n        this.lat = parseFloat(lat);\r\n      }\r\n\r\n      // (116.403322, 39.920255) Number\r\n      else {\r\n        this.lng = lng;\r\n        this.lat = lat;\r\n      }\r\n    }\r\n\r\n    this._inner = new google.maps.LatLng({lng:this.lng, lat:this.lat});\r\n  }\r\n\r\n  this._type = 'LngLat';\r\n\r\n  return this;\r\n}\r\n\r\nLngLat.prototype = {\r\n  /**\r\n   * @function offset\r\n   * @param {Number} w\r\n   * @param {Number} s\r\n   * */\r\n  offset: function(w, s) {\r\n\r\n  },\r\n\r\n  distance: function() {\r\n\r\n  },\r\n\r\n  getLng: function() {\r\n    return this.lng;\r\n  },\r\n\r\n  getLat: function() {\r\n    return this.lat;\r\n  },\r\n\r\n  equals: function(lngLat) {\r\n\r\n  },\r\n\r\n  toString: function() {\r\n    return this._inner.toString();\r\n  }\r\n};\r\n\r\nmodule.exports = LngLat;\r\n\r\n\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9MbmdMYXQuanM/MmQyMiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLFNBQVMsT0FBTztBQUNoQixTQUFTLE9BQU87QUFDaEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSwwQ0FBMEMsMkJBQTJCO0FBQ3JFOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCLGFBQWEsT0FBTztBQUNwQjtBQUNBOztBQUVBLEdBQUc7O0FBRUg7O0FBRUEsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6IjUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBmaXp6IG9uIDIwMTcvMi8xMy5cclxuICovXHJcblxyXG52YXIgdXRpbCA9IHJlcXVpcmUoJy4uLy4uLy4uL2NvbW1vbi9qcy91dGlsJyk7XHJcblxyXG4vKipcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBsbmcge051bWJlcn0gbG5nXHJcbiAqIEBsYXQge051bWJlcn0gbGF0XHJcbiAqICovXHJcbmZ1bmN0aW9uIExuZ0xhdChsbmcsIGxhdCwgaW5uZXIpIHtcclxuXHJcbiAgLy8g5YyF6KOFR01hcOeahExuZ0xhdOe7k+aehFxyXG4gIGlmKGlubmVyKSB7XHJcbiAgICB0aGlzLl9pbm5lciA9IGlubmVyO1xyXG4gIH1cclxuXHJcbiAgLy8g5p6E6YCg5Ye95pWw5qih5byPXHJcbiAgZWxzZSB7XHJcbiAgICBpZihhcmd1bWVudHMubGVuZ3RoIDwgMikge1xyXG5cclxuICAgICAgLy8g5pWw57uE5b2i5byP77yM5YmN6ICF5Li6bG5n77yM5ZCO6ICF5Li6bGF0IFsxMTYuMzk3NDI4LCAzOS45MDkyM10gLS0gcG9zaXRpb25cclxuICAgICAgaWYodXRpbC5pc0FycmF5KGxuZykpe1xyXG5cclxuICAgICAgICBpZiggdHlwZW9mIGxuZ1swXSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGxuZ1sxXSA9PT0gJ3N0cmluZycgKSB7XHJcbiAgICAgICAgICB0aGlzLmxuZyA9IHBhcnNlRmxvYXQobG5nWzBdKTtcclxuICAgICAgICAgIHRoaXMubGF0ID0gcGFyc2VGbG9hdChsbmdbMV0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmxuZyA9IGxuZ1swXTtcclxuICAgICAgICAgIHRoaXMubGF0ID0gbG5nWzFdO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5a+56LGh5b2i5byP77yMbG5n5a+55bqUbG5n77yMbGF05a+55bqUbGF0IChsbmc6IDExNi4zOTc0MjgsIGxhdDogMzkuOTA5MjMpXHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHRoaXMubG5nID0gbG5nLmxuZztcclxuICAgICAgICB0aGlzLmxhdCA9IGxuZy5sYXQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBlbHNlIHtcclxuXHJcbiAgICAgIC8vIChcIjExNi40MDMzMjJcIiwgXCIzOS45MjAyNTVcIikgc3RyaW5nXHJcbiAgICAgIGlmKHV0aWwuaXNTdHJpbmcobG5nKSB8fCB1dGlsLmlzU3RyaW5nKGxhdCkpIHtcclxuICAgICAgICB0aGlzLmxuZyA9IHBhcnNlRmxvYXQobG5nKTtcclxuICAgICAgICB0aGlzLmxhdCA9IHBhcnNlRmxvYXQobGF0KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gKDExNi40MDMzMjIsIDM5LjkyMDI1NSkgTnVtYmVyXHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHRoaXMubG5nID0gbG5nO1xyXG4gICAgICAgIHRoaXMubGF0ID0gbGF0O1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5faW5uZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKHtsbmc6dGhpcy5sbmcsIGxhdDp0aGlzLmxhdH0pO1xyXG4gIH1cclxuXHJcbiAgdGhpcy5fdHlwZSA9ICdMbmdMYXQnO1xyXG5cclxuICByZXR1cm4gdGhpcztcclxufVxyXG5cclxuTG5nTGF0LnByb3RvdHlwZSA9IHtcclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gb2Zmc2V0XHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHdcclxuICAgKiBAcGFyYW0ge051bWJlcn0gc1xyXG4gICAqICovXHJcbiAgb2Zmc2V0OiBmdW5jdGlvbih3LCBzKSB7XHJcblxyXG4gIH0sXHJcblxyXG4gIGRpc3RhbmNlOiBmdW5jdGlvbigpIHtcclxuXHJcbiAgfSxcclxuXHJcbiAgZ2V0TG5nOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLmxuZztcclxuICB9LFxyXG5cclxuICBnZXRMYXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMubGF0O1xyXG4gIH0sXHJcblxyXG4gIGVxdWFsczogZnVuY3Rpb24obG5nTGF0KSB7XHJcblxyXG4gIH0sXHJcblxyXG4gIHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbm5lci50b1N0cmluZygpO1xyXG4gIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gTG5nTGF0O1xyXG5cclxuXHJcblxyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzL21hcC9nbWFwL0xuZ0xhdC5qc1xuLy8gbW9kdWxlIGlkID0gNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 6 */
/***/ function(module, exports) {

	eval("/**\r\n * Created by fizz on 2017/2/15.\r\n * @name Bounds 基础类\r\n * 在Google Map里面对应LatLngBounds Class\r\n * https://developers.google.com/maps/documentation/javascript/3.exp/reference#LatLngBounds\r\n */\r\n\r\n/**\r\n * @constructor\r\n * @sw {LngLat} southWest\r\n * @ne {LngLat} northEast\r\n * */\r\nfunction Bounds(sw, ne, inner) {\r\n\r\n  if(inner) {\r\n    this._inner = inner;\r\n  } else {\r\n    this._inner = new google.maps.LatLngBounds(sw, ne);\r\n  }\r\n\r\n  this._type = 'Bounds';\r\n\r\n  return this;\r\n}\r\n\r\nBounds.prototype = {\r\n  /**\r\n   * @param {LngLat} point\r\n   * */\r\n  contains: function(point) {\r\n    return this._inner.contains(point._inner);\r\n  },\r\n\r\n  getCenter: function() {\r\n    return LngLat.wrap(this._inner.getCenter());\r\n  },\r\n\r\n  getSouthWest: function() {\r\n    return this._inner.getSouthWest();\r\n  },\r\n  getNorthEast: function() {\r\n    return this._inner.getNorthEast();\r\n  },\r\n  toString: function() {\r\n    console.log(\"toString\");\r\n    return this._inner.toString();\r\n  }\r\n};\r\n\r\nmodule.exports = Bounds;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9Cb3VuZHMuanM/OTAzYiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFFBQVEsT0FBTztBQUNmLFFBQVEsT0FBTztBQUNmO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6IjYuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBmaXp6IG9uIDIwMTcvMi8xNS5cclxuICogQG5hbWUgQm91bmRzIOWfuuehgOexu1xyXG4gKiDlnKhHb29nbGUgTWFw6YeM6Z2i5a+55bqUTGF0TG5nQm91bmRzIENsYXNzXHJcbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL21hcHMvZG9jdW1lbnRhdGlvbi9qYXZhc2NyaXB0LzMuZXhwL3JlZmVyZW5jZSNMYXRMbmdCb3VuZHNcclxuICovXHJcblxyXG4vKipcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBzdyB7TG5nTGF0fSBzb3V0aFdlc3RcclxuICogQG5lIHtMbmdMYXR9IG5vcnRoRWFzdFxyXG4gKiAqL1xyXG5mdW5jdGlvbiBCb3VuZHMoc3csIG5lLCBpbm5lcikge1xyXG5cclxuICBpZihpbm5lcikge1xyXG4gICAgdGhpcy5faW5uZXIgPSBpbm5lcjtcclxuICB9IGVsc2Uge1xyXG4gICAgdGhpcy5faW5uZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nQm91bmRzKHN3LCBuZSk7XHJcbiAgfVxyXG5cclxuICB0aGlzLl90eXBlID0gJ0JvdW5kcyc7XHJcblxyXG4gIHJldHVybiB0aGlzO1xyXG59XHJcblxyXG5Cb3VuZHMucHJvdG90eXBlID0ge1xyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7TG5nTGF0fSBwb2ludFxyXG4gICAqICovXHJcbiAgY29udGFpbnM6IGZ1bmN0aW9uKHBvaW50KSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5uZXIuY29udGFpbnMocG9pbnQuX2lubmVyKTtcclxuICB9LFxyXG5cclxuICBnZXRDZW50ZXI6IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIExuZ0xhdC53cmFwKHRoaXMuX2lubmVyLmdldENlbnRlcigpKTtcclxuICB9LFxyXG5cclxuICBnZXRTb3V0aFdlc3Q6IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lubmVyLmdldFNvdXRoV2VzdCgpO1xyXG4gIH0sXHJcbiAgZ2V0Tm9ydGhFYXN0OiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbm5lci5nZXROb3J0aEVhc3QoKTtcclxuICB9LFxyXG4gIHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcclxuICAgIGNvbnNvbGUubG9nKFwidG9TdHJpbmdcIik7XHJcbiAgICByZXR1cm4gdGhpcy5faW5uZXIudG9TdHJpbmcoKTtcclxuICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEJvdW5kcztcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9Cb3VuZHMuanNcbi8vIG1vZHVsZSBpZCA9IDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 7 */
/***/ function(module, exports) {

	eval("/**\r\n * Created by fizz on 2017/2/15.\r\n * @constructor Pixel\r\n * 在google map里面对应的是Point\r\n * https://developers.google.com/maps/documentation/javascript/reference#Point\r\n */\r\n\r\n\r\n/**\r\n * @constructor\r\n * @param {Number} x\r\n * @param {Number} y\r\n * */\r\nfunction Pixel(x, y, inner) {\r\n  if(inner) {\r\n    this._inner = inner;\r\n  } else {\r\n    this._inner = new google.maps.Point(x,y);\r\n  }\r\n\r\n  this._type = 'Pixel';\r\n  return this;\r\n}\r\n\r\nPixel.prototype = {\r\n  getX: function() {\r\n    return this._inner.x;\r\n  },\r\n  getY: function() {\r\n    return this._inner.y;\r\n  },\r\n\r\n  /**\r\n   * @param {Pixel} point\r\n   * */\r\n  equals: function(point) {\r\n    return this._inner.equals(point);\r\n  },\r\n\r\n  toString: function() {\r\n    return this._inner.toString();\r\n  }\r\n};\r\n\r\n\r\n\r\n\r\nmodule.exports = Pixel;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9QaXhlbC5qcz81NDA1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0EsYUFBYSxNQUFNO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0EiLCJmaWxlIjoiNy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGZpenogb24gMjAxNy8yLzE1LlxyXG4gKiBAY29uc3RydWN0b3IgUGl4ZWxcclxuICog5ZyoZ29vZ2xlIG1hcOmHjOmdouWvueW6lOeahOaYr1BvaW50XHJcbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL21hcHMvZG9jdW1lbnRhdGlvbi9qYXZhc2NyaXB0L3JlZmVyZW5jZSNQb2ludFxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSB4XHJcbiAqIEBwYXJhbSB7TnVtYmVyfSB5XHJcbiAqICovXHJcbmZ1bmN0aW9uIFBpeGVsKHgsIHksIGlubmVyKSB7XHJcbiAgaWYoaW5uZXIpIHtcclxuICAgIHRoaXMuX2lubmVyID0gaW5uZXI7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRoaXMuX2lubmVyID0gbmV3IGdvb2dsZS5tYXBzLlBvaW50KHgseSk7XHJcbiAgfVxyXG5cclxuICB0aGlzLl90eXBlID0gJ1BpeGVsJztcclxuICByZXR1cm4gdGhpcztcclxufVxyXG5cclxuUGl4ZWwucHJvdG90eXBlID0ge1xyXG4gIGdldFg6IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lubmVyLng7XHJcbiAgfSxcclxuICBnZXRZOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbm5lci55O1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7UGl4ZWx9IHBvaW50XHJcbiAgICogKi9cclxuICBlcXVhbHM6IGZ1bmN0aW9uKHBvaW50KSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5uZXIuZXF1YWxzKHBvaW50KTtcclxuICB9LFxyXG5cclxuICB0b1N0cmluZzogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5uZXIudG9TdHJpbmcoKTtcclxuICB9XHJcbn07XHJcblxyXG5cclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFBpeGVsO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzL21hcC9nbWFwL1BpeGVsLmpzXG4vLyBtb2R1bGUgaWQgPSA3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 8 */
/***/ function(module, exports) {

	eval("/**\r\n * Created by fizz on 2017/2/15.\r\n */\r\n\r\n\r\n/**\r\n * @constructor\r\n * @param {Number} width\r\n * @param {Number} height\r\n * */\r\nfunction Size(width, height, inner) {\r\n  if(inner) {\r\n    this._inner = inner;\r\n  } else {\r\n    this._inner = new google.maps.Size();\r\n  }\r\n\r\n  this._type = 'Size';\r\n  return this;\r\n}\r\n\r\nSize.prototype = {\r\n  getWidth: function() {\r\n    return this._inner.width;\r\n  },\r\n  getHeight: function() {\r\n    return this._inner.height;\r\n  },\r\n  toString: function() {\r\n    return this._inner.toString();\r\n  }\r\n};\r\n\r\n\r\n\r\n\r\nmodule.exports = Size;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9TaXplLmpzPzZhY2QiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFLQSIsImZpbGUiOiI4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTUuXHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQHBhcmFtIHtOdW1iZXJ9IHdpZHRoXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBoZWlnaHRcclxuICogKi9cclxuZnVuY3Rpb24gU2l6ZSh3aWR0aCwgaGVpZ2h0LCBpbm5lcikge1xyXG4gIGlmKGlubmVyKSB7XHJcbiAgICB0aGlzLl9pbm5lciA9IGlubmVyO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB0aGlzLl9pbm5lciA9IG5ldyBnb29nbGUubWFwcy5TaXplKCk7XHJcbiAgfVxyXG5cclxuICB0aGlzLl90eXBlID0gJ1NpemUnO1xyXG4gIHJldHVybiB0aGlzO1xyXG59XHJcblxyXG5TaXplLnByb3RvdHlwZSA9IHtcclxuICBnZXRXaWR0aDogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5uZXIud2lkdGg7XHJcbiAgfSxcclxuICBnZXRIZWlnaHQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lubmVyLmhlaWdodDtcclxuICB9LFxyXG4gIHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbm5lci50b1N0cmluZygpO1xyXG4gIH1cclxufTtcclxuXHJcblxyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gU2l6ZTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9TaXplLmpzXG4vLyBtb2R1bGUgaWQgPSA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 9 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/13.\r\n * @constructor of Map\r\n * @return our map object\r\n */\r\n\r\nvar config = __webpack_require__(10);\r\nvar Bounds = __webpack_require__(6);\r\nvar onOff = __webpack_require__(11);\r\nvar formatOpts = __webpack_require__(15);\r\n\r\n/**\r\n * @constructor\r\n * @elem {Object}\r\n * @opts {Object}\r\n * */\r\nfunction Map(id,opts) {\r\n  var elem, newOpts;\r\n\r\n  this._type = 'Map';\r\n  elem = document.getElementById(id);\r\n  newOpts = formatOpts.map(opts);\r\n\r\n  this._inner = new google.maps.Map(elem, newOpts);\r\n  this._inner._smap = this;\r\n  this._overLayers = {\r\n    MarkerClusterer: [],\r\n    Marker: [],\r\n    InfoWindow: [],\r\n    Polygon: [],\r\n    Polyline: [],\r\n    Circle: []\r\n  };\r\n}\r\n\r\nMap.prototype = {\r\n\r\n  plugin : mapPlugin,\r\n\r\n  clearMap: clearMap,\r\n\r\n  /**\r\n   * @param {LngLat} position\r\n   * */\r\n  panTo: function(position) {\r\n    this._inner.panTo(position._inner);\r\n  },\r\n\r\n  destroy: function() {\r\n\r\n  },\r\n\r\n  /**\r\n   * @param {Number} zoom\r\n   * */\r\n  setZoom: function(zoom) {\r\n    this._inner.setZoom(zoom);\r\n  },\r\n\r\n  getBounds: function() {\r\n    return new Bounds('','',this._inner.getBounds());\r\n  },\r\n\r\n  on: onOff.on,\r\n  off: onOff.off\r\n};\r\n\r\nfunction mapPlugin(plugins, fn) {\r\n  if(plugins.length < 1) return;\r\n\r\n  plugins.forEach( function(plugin) {\r\n\r\n    console.log(plugin);\r\n    if(plugin === 'GMap.MarkerClusterer') {\r\n      $.getScript(config.GMap_MarkerClusterer, function() {\r\n        fn();\r\n      });\r\n    }\r\n\r\n  })\r\n}\r\n\r\nfunction clearMap() {\r\n  var overLayers = this._overLayers;\r\n\r\n  for(var type in overLayers) {\r\n\r\n    switch (type) {\r\n      case 'Marker':\r\n      case 'Circle':\r\n      case 'Polygon':\r\n      case 'Polyline':\r\n      case 'InfoWindow':\r\n        if(overLayers[type].length > 0) {\r\n          overLayers[type].forEach( function(item) {\r\n            item._inner.setMap(null);\r\n            item._inner = null;\r\n            item = null;\r\n          });\r\n          overLayers.lenght = 0;\r\n        }\r\n        break;\r\n      case 'MarkerClusterer':\r\n        if(overLayers.MarkerClusterer.length > 0) {\r\n          overLayers.MarkerClusterer.forEach( function(item) {\r\n            item._inner.clearMarkers();\r\n            item._inner = null;\r\n            item = null;\r\n          });\r\n          overLayers.MarkerClusterer.length = 0;\r\n        }\r\n        break;\r\n    }\r\n\r\n  }\r\n}\r\n\r\nmodule.exports = Map;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9NYXAuanM/NGEzZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBLEdBQUc7O0FBRUg7QUFDQSxhQUFhLE9BQU87QUFDcEI7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBIiwiZmlsZSI6IjkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBmaXp6IG9uIDIwMTcvMi8xMy5cclxuICogQGNvbnN0cnVjdG9yIG9mIE1hcFxyXG4gKiBAcmV0dXJuIG91ciBtYXAgb2JqZWN0XHJcbiAqL1xyXG5cclxudmFyIGNvbmZpZyA9IHJlcXVpcmUoJy4uL2NvbmZpZycpO1xyXG52YXIgQm91bmRzID0gcmVxdWlyZSgnLi9Cb3VuZHMnKTtcclxudmFyIG9uT2ZmID0gcmVxdWlyZSgnLi9vbk9mZicpO1xyXG52YXIgZm9ybWF0T3B0cyA9IHJlcXVpcmUoJy4vZm9ybWF0T3B0Jyk7XHJcblxyXG4vKipcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBlbGVtIHtPYmplY3R9XHJcbiAqIEBvcHRzIHtPYmplY3R9XHJcbiAqICovXHJcbmZ1bmN0aW9uIE1hcChpZCxvcHRzKSB7XHJcbiAgdmFyIGVsZW0sIG5ld09wdHM7XHJcblxyXG4gIHRoaXMuX3R5cGUgPSAnTWFwJztcclxuICBlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gIG5ld09wdHMgPSBmb3JtYXRPcHRzLm1hcChvcHRzKTtcclxuXHJcbiAgdGhpcy5faW5uZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGVsZW0sIG5ld09wdHMpO1xyXG4gIHRoaXMuX2lubmVyLl9zbWFwID0gdGhpcztcclxuICB0aGlzLl9vdmVyTGF5ZXJzID0ge1xyXG4gICAgTWFya2VyQ2x1c3RlcmVyOiBbXSxcclxuICAgIE1hcmtlcjogW10sXHJcbiAgICBJbmZvV2luZG93OiBbXSxcclxuICAgIFBvbHlnb246IFtdLFxyXG4gICAgUG9seWxpbmU6IFtdLFxyXG4gICAgQ2lyY2xlOiBbXVxyXG4gIH07XHJcbn1cclxuXHJcbk1hcC5wcm90b3R5cGUgPSB7XHJcblxyXG4gIHBsdWdpbiA6IG1hcFBsdWdpbixcclxuXHJcbiAgY2xlYXJNYXA6IGNsZWFyTWFwLFxyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge0xuZ0xhdH0gcG9zaXRpb25cclxuICAgKiAqL1xyXG4gIHBhblRvOiBmdW5jdGlvbihwb3NpdGlvbikge1xyXG4gICAgdGhpcy5faW5uZXIucGFuVG8ocG9zaXRpb24uX2lubmVyKTtcclxuICB9LFxyXG5cclxuICBkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHpvb21cclxuICAgKiAqL1xyXG4gIHNldFpvb206IGZ1bmN0aW9uKHpvb20pIHtcclxuICAgIHRoaXMuX2lubmVyLnNldFpvb20oem9vbSk7XHJcbiAgfSxcclxuXHJcbiAgZ2V0Qm91bmRzOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBuZXcgQm91bmRzKCcnLCcnLHRoaXMuX2lubmVyLmdldEJvdW5kcygpKTtcclxuICB9LFxyXG5cclxuICBvbjogb25PZmYub24sXHJcbiAgb2ZmOiBvbk9mZi5vZmZcclxufTtcclxuXHJcbmZ1bmN0aW9uIG1hcFBsdWdpbihwbHVnaW5zLCBmbikge1xyXG4gIGlmKHBsdWdpbnMubGVuZ3RoIDwgMSkgcmV0dXJuO1xyXG5cclxuICBwbHVnaW5zLmZvckVhY2goIGZ1bmN0aW9uKHBsdWdpbikge1xyXG5cclxuICAgIGNvbnNvbGUubG9nKHBsdWdpbik7XHJcbiAgICBpZihwbHVnaW4gPT09ICdHTWFwLk1hcmtlckNsdXN0ZXJlcicpIHtcclxuICAgICAgJC5nZXRTY3JpcHQoY29uZmlnLkdNYXBfTWFya2VyQ2x1c3RlcmVyLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBmbigpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gY2xlYXJNYXAoKSB7XHJcbiAgdmFyIG92ZXJMYXllcnMgPSB0aGlzLl9vdmVyTGF5ZXJzO1xyXG5cclxuICBmb3IodmFyIHR5cGUgaW4gb3ZlckxheWVycykge1xyXG5cclxuICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICBjYXNlICdNYXJrZXInOlxyXG4gICAgICBjYXNlICdDaXJjbGUnOlxyXG4gICAgICBjYXNlICdQb2x5Z29uJzpcclxuICAgICAgY2FzZSAnUG9seWxpbmUnOlxyXG4gICAgICBjYXNlICdJbmZvV2luZG93JzpcclxuICAgICAgICBpZihvdmVyTGF5ZXJzW3R5cGVdLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIG92ZXJMYXllcnNbdHlwZV0uZm9yRWFjaCggZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgICAgICBpdGVtLl9pbm5lci5zZXRNYXAobnVsbCk7XHJcbiAgICAgICAgICAgIGl0ZW0uX2lubmVyID0gbnVsbDtcclxuICAgICAgICAgICAgaXRlbSA9IG51bGw7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIG92ZXJMYXllcnMubGVuZ2h0ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ01hcmtlckNsdXN0ZXJlcic6XHJcbiAgICAgICAgaWYob3ZlckxheWVycy5NYXJrZXJDbHVzdGVyZXIubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgb3ZlckxheWVycy5NYXJrZXJDbHVzdGVyZXIuZm9yRWFjaCggZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgICAgICBpdGVtLl9pbm5lci5jbGVhck1hcmtlcnMoKTtcclxuICAgICAgICAgICAgaXRlbS5faW5uZXIgPSBudWxsO1xyXG4gICAgICAgICAgICBpdGVtID0gbnVsbDtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgb3ZlckxheWVycy5NYXJrZXJDbHVzdGVyZXIubGVuZ3RoID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcblxyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBNYXA7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2dtYXAvTWFwLmpzXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 10 */
/***/ function(module, exports) {

	eval("/**\r\n * Created by fizz on 2017/2/15.\r\n */\r\n\r\nmodule.exports = {\r\n  // google map marker cluster url\r\n  // GMap_MarkerClusterer: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js',\r\n  GMap_MarkerClusterer: '../../src/components/map/google/markerclusterer.js',\r\n\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvY29uZmlnLmpzP2Q1M2EiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6IjEwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTUuXHJcbiAqL1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgLy8gZ29vZ2xlIG1hcCBtYXJrZXIgY2x1c3RlciB1cmxcclxuICAvLyBHTWFwX01hcmtlckNsdXN0ZXJlcjogJ2h0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL21hcHMvZG9jdW1lbnRhdGlvbi9qYXZhc2NyaXB0L2V4YW1wbGVzL21hcmtlcmNsdXN0ZXJlci9tYXJrZXJjbHVzdGVyZXIuanMnLFxyXG4gIEdNYXBfTWFya2VyQ2x1c3RlcmVyOiAnLi4vLi4vc3JjL2NvbXBvbmVudHMvbWFwL2dvb2dsZS9tYXJrZXJjbHVzdGVyZXIuanMnLFxyXG5cclxufTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy9tYXAvY29uZmlnLmpzXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 11 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/14.\r\n */\r\n\r\nvar event = __webpack_require__(12);\r\n\r\nvar onOff = {};\r\n\r\n\r\n/**\r\n *\r\n * @param {String} eventName\r\n * @param {Function} handler\r\n * @param {Object} context\r\n *\r\n *\r\n * */\r\nonOff.on = function(eventName, handler, context) {\r\n  var listener, eventListener;\r\n\r\n  listener = event.addListener(this, eventName, handler, context);\r\n\r\n  eventListener = {\r\n    eventName: eventName,\r\n    handler: handler,\r\n    context: context,\r\n    listener: listener\r\n  };\r\n\r\n  if(!this._eventListener) this._eventListener = [];\r\n\r\n  this._eventListener.push(eventListener);\r\n  return listener;\r\n};\r\n\r\nonOff.off = function(eventName, handler, context) {\r\n  if(!this._eventListener) return;\r\n\r\n  var filterResult = this._eventListener.filter( function(item, index) {\r\n    if(eventName === item.eventName) return true;\r\n    return false;\r\n  });\r\n\r\n  if(filterResult && filterResult.length > 0) {\r\n    filterResult.forEach( function(item, index) {\r\n      if( item.handler === handler &&\r\n        item.context === context ) {\r\n        console.log('here am I');\r\n        event.removeListener(item.listener);\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n};\r\n\r\nmodule.exports = onOff;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9vbk9mZi5qcz8yNmE4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7O0FBR0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLFNBQVM7QUFDcEIsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7OztBQUdBOztBQUVBIiwiZmlsZSI6IjExLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTQuXHJcbiAqL1xyXG5cclxudmFyIGV2ZW50ID0gcmVxdWlyZSgnLi9ldmVudCcpO1xyXG5cclxudmFyIG9uT2ZmID0ge307XHJcblxyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWVcclxuICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxyXG4gKiBAcGFyYW0ge09iamVjdH0gY29udGV4dFxyXG4gKlxyXG4gKlxyXG4gKiAqL1xyXG5vbk9mZi5vbiA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgaGFuZGxlciwgY29udGV4dCkge1xyXG4gIHZhciBsaXN0ZW5lciwgZXZlbnRMaXN0ZW5lcjtcclxuXHJcbiAgbGlzdGVuZXIgPSBldmVudC5hZGRMaXN0ZW5lcih0aGlzLCBldmVudE5hbWUsIGhhbmRsZXIsIGNvbnRleHQpO1xyXG5cclxuICBldmVudExpc3RlbmVyID0ge1xyXG4gICAgZXZlbnROYW1lOiBldmVudE5hbWUsXHJcbiAgICBoYW5kbGVyOiBoYW5kbGVyLFxyXG4gICAgY29udGV4dDogY29udGV4dCxcclxuICAgIGxpc3RlbmVyOiBsaXN0ZW5lclxyXG4gIH07XHJcblxyXG4gIGlmKCF0aGlzLl9ldmVudExpc3RlbmVyKSB0aGlzLl9ldmVudExpc3RlbmVyID0gW107XHJcblxyXG4gIHRoaXMuX2V2ZW50TGlzdGVuZXIucHVzaChldmVudExpc3RlbmVyKTtcclxuICByZXR1cm4gbGlzdGVuZXI7XHJcbn07XHJcblxyXG5vbk9mZi5vZmYgPSBmdW5jdGlvbihldmVudE5hbWUsIGhhbmRsZXIsIGNvbnRleHQpIHtcclxuICBpZighdGhpcy5fZXZlbnRMaXN0ZW5lcikgcmV0dXJuO1xyXG5cclxuICB2YXIgZmlsdGVyUmVzdWx0ID0gdGhpcy5fZXZlbnRMaXN0ZW5lci5maWx0ZXIoIGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7XHJcbiAgICBpZihldmVudE5hbWUgPT09IGl0ZW0uZXZlbnROYW1lKSByZXR1cm4gdHJ1ZTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9KTtcclxuXHJcbiAgaWYoZmlsdGVyUmVzdWx0ICYmIGZpbHRlclJlc3VsdC5sZW5ndGggPiAwKSB7XHJcbiAgICBmaWx0ZXJSZXN1bHQuZm9yRWFjaCggZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcclxuICAgICAgaWYoIGl0ZW0uaGFuZGxlciA9PT0gaGFuZGxlciAmJlxyXG4gICAgICAgIGl0ZW0uY29udGV4dCA9PT0gY29udGV4dCApIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnaGVyZSBhbSBJJyk7XHJcbiAgICAgICAgZXZlbnQucmVtb3ZlTGlzdGVuZXIoaXRlbS5saXN0ZW5lcik7XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IG9uT2ZmO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzL21hcC9nbWFwL29uT2ZmLmpzXG4vLyBtb2R1bGUgaWQgPSAxMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 12 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/14.\r\n */\r\n\r\nvar SMapEvent = __webpack_require__(13);\r\n\r\nvar event = {};\r\n\r\nevent.map = __webpack_require__(14);\r\n\r\nevent.getSMapEvent = function(e) {\r\n  return new SMapEvent(e);\r\n};\r\n\r\nevent.addDomListener = function(instance, eventName, handler, context) {\r\n  var listener = {};\r\n\r\n  if(context) {\r\n    listener = google.maps.event.addDomListener(instance, eventName, function(e) {\r\n      handler.call(context, e);\r\n    });\r\n  } else {\r\n    listener = google.maps.event.addDomListener(instance, eventName, handler);\r\n  }\r\n  return listener;\r\n};\r\n\r\nevent.addListener = function(instance, eventName, handler, context) {\r\n  var listener = {}, relevantEvent, realInstance;\r\n\r\n  realInstance = instance._inner;\r\n  relevantEvent = event.getRelevantEvent(instance, eventName);\r\n\r\n  if(context) {\r\n    listener = google.maps.event.addListener(realInstance, relevantEvent, function(e) {\r\n      handler.call(context, event.getSMapEvent(e));\r\n    });\r\n  } else {\r\n    listener = google.maps.event.addListener(realInstance, relevantEvent, function(e) {\r\n      handler(event.getSMapEvent(e));\r\n    });\r\n  }\r\n  return listener;\r\n};\r\n\r\nevent.addListenerOnce = function(instance, eventName, handler, context) {\r\n  var listener = {}, relevantEvent, realInstance;\r\n\r\n  realInstance = instance._inner;\r\n\r\n  relevantEvent = event.getRelevantEvent(instance, eventName);\r\n\r\n  if(context) {\r\n    listener = google.maps.event.addListenerOnce(realInstance, relevantEvent, function (e) {\r\n      handler.call(context, event.getSMapEvent(e));\r\n    });\r\n  } else {\r\n    listener = google.maps.event.addListenerOnce(realInstance, relevantEvent, function(e) {\r\n      handler(event.getSMapEvent(e));\r\n    });\r\n  }\r\n  return listener;\r\n};\r\n\r\nevent.removeListener = function(listener) {\r\n  google.maps.event.removeListener(listener);\r\n};\r\n\r\nevent.triggerListener = function(instance, eventName, extArgs) {\r\n  var relevantEvent = event.getRelevantEvent(instance, eventName);\r\n\r\n  google.maps.event.trigger(instance, relevantEvent, extArgs);\r\n};\r\n\r\nevent.getRelevantEvent = function(instance, eventName) {\r\n  if(instance._type in event.map) {\r\n    if(eventName in event.map[instance._type]) {\r\n      return event.map[instance._type][eventName];\r\n    } else {\r\n      return eventName;\r\n    }\r\n  } else {\r\n    return eventName;\r\n  }\r\n};\r\n\r\nevent.getSMapEventObject = function(e) {\r\n\r\n};\r\n\r\nmodule.exports = event;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9ldmVudC5qcz8yYmNiIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsbUJBQW1COztBQUVuQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtQkFBbUI7O0FBRW5COztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSIsImZpbGUiOiIxMi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGZpenogb24gMjAxNy8yLzE0LlxyXG4gKi9cclxuXHJcbnZhciBTTWFwRXZlbnQgPSByZXF1aXJlKCcuL1NNYXBFdmVudCcpO1xyXG5cclxudmFyIGV2ZW50ID0ge307XHJcblxyXG5ldmVudC5tYXAgPSByZXF1aXJlKCcuL2V2ZW50TWFwJyk7XHJcblxyXG5ldmVudC5nZXRTTWFwRXZlbnQgPSBmdW5jdGlvbihlKSB7XHJcbiAgcmV0dXJuIG5ldyBTTWFwRXZlbnQoZSk7XHJcbn07XHJcblxyXG5ldmVudC5hZGREb21MaXN0ZW5lciA9IGZ1bmN0aW9uKGluc3RhbmNlLCBldmVudE5hbWUsIGhhbmRsZXIsIGNvbnRleHQpIHtcclxuICB2YXIgbGlzdGVuZXIgPSB7fTtcclxuXHJcbiAgaWYoY29udGV4dCkge1xyXG4gICAgbGlzdGVuZXIgPSBnb29nbGUubWFwcy5ldmVudC5hZGREb21MaXN0ZW5lcihpbnN0YW5jZSwgZXZlbnROYW1lLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgIGhhbmRsZXIuY2FsbChjb250ZXh0LCBlKTtcclxuICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBsaXN0ZW5lciA9IGdvb2dsZS5tYXBzLmV2ZW50LmFkZERvbUxpc3RlbmVyKGluc3RhbmNlLCBldmVudE5hbWUsIGhhbmRsZXIpO1xyXG4gIH1cclxuICByZXR1cm4gbGlzdGVuZXI7XHJcbn07XHJcblxyXG5ldmVudC5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uKGluc3RhbmNlLCBldmVudE5hbWUsIGhhbmRsZXIsIGNvbnRleHQpIHtcclxuICB2YXIgbGlzdGVuZXIgPSB7fSwgcmVsZXZhbnRFdmVudCwgcmVhbEluc3RhbmNlO1xyXG5cclxuICByZWFsSW5zdGFuY2UgPSBpbnN0YW5jZS5faW5uZXI7XHJcbiAgcmVsZXZhbnRFdmVudCA9IGV2ZW50LmdldFJlbGV2YW50RXZlbnQoaW5zdGFuY2UsIGV2ZW50TmFtZSk7XHJcblxyXG4gIGlmKGNvbnRleHQpIHtcclxuICAgIGxpc3RlbmVyID0gZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIocmVhbEluc3RhbmNlLCByZWxldmFudEV2ZW50LCBmdW5jdGlvbihlKSB7XHJcbiAgICAgIGhhbmRsZXIuY2FsbChjb250ZXh0LCBldmVudC5nZXRTTWFwRXZlbnQoZSkpO1xyXG4gICAgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGxpc3RlbmVyID0gZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIocmVhbEluc3RhbmNlLCByZWxldmFudEV2ZW50LCBmdW5jdGlvbihlKSB7XHJcbiAgICAgIGhhbmRsZXIoZXZlbnQuZ2V0U01hcEV2ZW50KGUpKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICByZXR1cm4gbGlzdGVuZXI7XHJcbn07XHJcblxyXG5ldmVudC5hZGRMaXN0ZW5lck9uY2UgPSBmdW5jdGlvbihpbnN0YW5jZSwgZXZlbnROYW1lLCBoYW5kbGVyLCBjb250ZXh0KSB7XHJcbiAgdmFyIGxpc3RlbmVyID0ge30sIHJlbGV2YW50RXZlbnQsIHJlYWxJbnN0YW5jZTtcclxuXHJcbiAgcmVhbEluc3RhbmNlID0gaW5zdGFuY2UuX2lubmVyO1xyXG5cclxuICByZWxldmFudEV2ZW50ID0gZXZlbnQuZ2V0UmVsZXZhbnRFdmVudChpbnN0YW5jZSwgZXZlbnROYW1lKTtcclxuXHJcbiAgaWYoY29udGV4dCkge1xyXG4gICAgbGlzdGVuZXIgPSBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lck9uY2UocmVhbEluc3RhbmNlLCByZWxldmFudEV2ZW50LCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICBoYW5kbGVyLmNhbGwoY29udGV4dCwgZXZlbnQuZ2V0U01hcEV2ZW50KGUpKTtcclxuICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBsaXN0ZW5lciA9IGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyT25jZShyZWFsSW5zdGFuY2UsIHJlbGV2YW50RXZlbnQsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgaGFuZGxlcihldmVudC5nZXRTTWFwRXZlbnQoZSkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIHJldHVybiBsaXN0ZW5lcjtcclxufTtcclxuXHJcbmV2ZW50LnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24obGlzdGVuZXIpIHtcclxuICBnb29nbGUubWFwcy5ldmVudC5yZW1vdmVMaXN0ZW5lcihsaXN0ZW5lcik7XHJcbn07XHJcblxyXG5ldmVudC50cmlnZ2VyTGlzdGVuZXIgPSBmdW5jdGlvbihpbnN0YW5jZSwgZXZlbnROYW1lLCBleHRBcmdzKSB7XHJcbiAgdmFyIHJlbGV2YW50RXZlbnQgPSBldmVudC5nZXRSZWxldmFudEV2ZW50KGluc3RhbmNlLCBldmVudE5hbWUpO1xyXG5cclxuICBnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKGluc3RhbmNlLCByZWxldmFudEV2ZW50LCBleHRBcmdzKTtcclxufTtcclxuXHJcbmV2ZW50LmdldFJlbGV2YW50RXZlbnQgPSBmdW5jdGlvbihpbnN0YW5jZSwgZXZlbnROYW1lKSB7XHJcbiAgaWYoaW5zdGFuY2UuX3R5cGUgaW4gZXZlbnQubWFwKSB7XHJcbiAgICBpZihldmVudE5hbWUgaW4gZXZlbnQubWFwW2luc3RhbmNlLl90eXBlXSkge1xyXG4gICAgICByZXR1cm4gZXZlbnQubWFwW2luc3RhbmNlLl90eXBlXVtldmVudE5hbWVdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGV2ZW50TmFtZTtcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIGV2ZW50TmFtZTtcclxuICB9XHJcbn07XHJcblxyXG5ldmVudC5nZXRTTWFwRXZlbnRPYmplY3QgPSBmdW5jdGlvbihlKSB7XHJcblxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBldmVudDtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9ldmVudC5qc1xuLy8gbW9kdWxlIGlkID0gMTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 13 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/20.\r\n * @constructor for google map event Object.\r\n * Wrap event and return our new event object just like gaode AMap event.\r\n */\r\n\r\nvar LngLat = __webpack_require__(5);\r\n\r\n/**\r\n * 包装Google的事件触发时的event对象\r\n *\r\n * @constructor\r\n * @param {Object} e event object\r\n * */\r\nfunction SMapEvent(e) {\r\n  this._inner = e;\r\n  this._type = 'Event';\r\n\r\n  this.lnglat = new LngLat(e.latLng.lng(), e.latLng.lat());\r\n  this.lnglat.I = e.latLng.lng();\r\n  this.lnglat.L = e.latLng.lat();\r\n\r\n  this.pixel = {\r\n    x: e.pixel.x,\r\n    y: e.pixel.y\r\n  };\r\n}\r\n\r\nmodule.exports = SMapEvent;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9TTWFwRXZlbnQuanM/NjcyMyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6IjEzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMjAuXHJcbiAqIEBjb25zdHJ1Y3RvciBmb3IgZ29vZ2xlIG1hcCBldmVudCBPYmplY3QuXHJcbiAqIFdyYXAgZXZlbnQgYW5kIHJldHVybiBvdXIgbmV3IGV2ZW50IG9iamVjdCBqdXN0IGxpa2UgZ2FvZGUgQU1hcCBldmVudC5cclxuICovXHJcblxyXG52YXIgTG5nTGF0ID0gcmVxdWlyZSgnLi9MbmdMYXQnKTtcclxuXHJcbi8qKlxyXG4gKiDljIXoo4VHb29nbGXnmoTkuovku7bop6blj5Hml7bnmoRldmVudOWvueixoVxyXG4gKlxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQHBhcmFtIHtPYmplY3R9IGUgZXZlbnQgb2JqZWN0XHJcbiAqICovXHJcbmZ1bmN0aW9uIFNNYXBFdmVudChlKSB7XHJcbiAgdGhpcy5faW5uZXIgPSBlO1xyXG4gIHRoaXMuX3R5cGUgPSAnRXZlbnQnO1xyXG5cclxuICB0aGlzLmxuZ2xhdCA9IG5ldyBMbmdMYXQoZS5sYXRMbmcubG5nKCksIGUubGF0TG5nLmxhdCgpKTtcclxuICB0aGlzLmxuZ2xhdC5JID0gZS5sYXRMbmcubG5nKCk7XHJcbiAgdGhpcy5sbmdsYXQuTCA9IGUubGF0TG5nLmxhdCgpO1xyXG5cclxuICB0aGlzLnBpeGVsID0ge1xyXG4gICAgeDogZS5waXhlbC54LFxyXG4gICAgeTogZS5waXhlbC55XHJcbiAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBTTWFwRXZlbnQ7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2dtYXAvU01hcEV2ZW50LmpzXG4vLyBtb2R1bGUgaWQgPSAxM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 14 */
/***/ function(module, exports) {

	eval("/**\r\n * Created by fizz on 2017/2/16.\r\n */\r\n\r\nmodule.exports = {\r\n  Marker: {\r\n    click: 'click',\r\n\r\n  },\r\n\r\n  InfoWindow: {\r\n    change: 'content_changed',\r\n    open: 'domready',\r\n    chose: 'choseClick'\r\n  }\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9ldmVudE1hcC5qcz9mZjJmIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiMTQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBmaXp6IG9uIDIwMTcvMi8xNi5cclxuICovXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICBNYXJrZXI6IHtcclxuICAgIGNsaWNrOiAnY2xpY2snLFxyXG5cclxuICB9LFxyXG5cclxuICBJbmZvV2luZG93OiB7XHJcbiAgICBjaGFuZ2U6ICdjb250ZW50X2NoYW5nZWQnLFxyXG4gICAgb3BlbjogJ2RvbXJlYWR5JyxcclxuICAgIGNob3NlOiAnY2hvc2VDbGljaydcclxuICB9XHJcbn07XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2dtYXAvZXZlbnRNYXAuanNcbi8vIG1vZHVsZSBpZCA9IDE0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 15 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/14.\r\n */\r\n\r\nvar LngLat = __webpack_require__(5);\r\n\r\nmodule.exports = {\r\n  map: formatOptsUni,\r\n\r\n  infoWindow: formatOptsUni,\r\n\r\n  marker: formatOptsUni,\r\n\r\n  polyline: formatOptsUni,\r\n\r\n  polygon: formatOptsUni,\r\n\r\n  circle: formatOptsUni,\r\n\r\n  markerClusterer: formatMarkerClusterer\r\n};\r\n\r\nfunction formatOptsUni(opts) {\r\n\r\n  if('position' in opts) {\r\n    opts.position = new LngLat(opts.position);\r\n  }\r\n\r\n  if(opts.path) {\r\n    opts.path = transfromPathToPaths(opts.path);\r\n  }\r\n\r\n  if(opts.center) {\r\n    opts.center = new LngLat(opts.center);\r\n  }\r\n\r\n  if(opts.map) {\r\n    opts.map = opts.map._inner;\r\n  }\r\n\r\n  return opts;\r\n}\r\n\r\nfunction transfromPathToPaths(path) {\r\n  var paths = [];\r\n  path.forEach( function(item, index) {\r\n    paths.push(arrCreateLngLat(item));\r\n  });\r\n  return paths;\r\n}\r\n\r\nfunction arrCreateLngLat(arr) {\r\n  return new google.maps.LatLng({lng: arr[0], lat: arr[1]});\r\n}\r\n\r\n\r\n/**************************************************\r\n * markerClusterer\r\n * ***********************************************/\r\nfunction formatMarkerClusterer(map, markers, opts) {\r\n  var newOpts = {};\r\n\r\n  if(map._inner) {\r\n    newOpts.map = map._inner;\r\n  } else {\r\n    newOpts.map = map;\r\n  }\r\n\r\n  newOpts.markers = markers.map( function(item) {\r\n    return item._inner;\r\n  });\r\n\r\n  newOpts.opts = formatMarkerClustererOpts(opts);\r\n\r\n  return newOpts;\r\n}\r\n\r\n/**\r\n * @param {Object} opts\r\n * @diff : minClusterSize : minimumClusterSize\r\n * */\r\nfunction formatMarkerClustererOpts(opts) {\r\n  if(opts.minClusterSize) {\r\n    opts.minimumClusterSize = opts.minClusterSize;\r\n  }\r\n\r\n  if(opts.styles) {\r\n\r\n    if(opts.styles) {\r\n      var styles = opts.styles;\r\n      if(styles.size) {\r\n        styles.width = styles.getWidth();\r\n        styles.height = styles.getHeight();\r\n      }\r\n    }\r\n\r\n  }\r\n}\r\n\r\n\r\n// var flightPlanCoordinates = [\r\n//   {lat: 37.772, lng: -122.214},\r\n//   {lat: 21.291, lng: -157.821},\r\n//   {lat: -18.142, lng: 178.431},\r\n//   {lat: -27.467, lng: 153.027}\r\n// ];\r\n\r\n// var lineArr = [\r\n//   [116.368904, 39.913423],\r\n//   [116.382122, 39.901176],\r\n//   [116.387271, 39.912501],\r\n//   [116.398258, 39.904600]\r\n// ];\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9mb3JtYXRPcHQuanM/NzYxNiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQSxpQ0FBaUMseUJBQXlCO0FBQzFEOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBLE1BQU0sMkJBQTJCO0FBQ2pDLE1BQU0sMkJBQTJCO0FBQ2pDLE1BQU0sMkJBQTJCO0FBQ2pDLE1BQU07QUFDTjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiMTUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBmaXp6IG9uIDIwMTcvMi8xNC5cclxuICovXHJcblxyXG52YXIgTG5nTGF0ID0gcmVxdWlyZSgnLi9MbmdMYXQnKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gIG1hcDogZm9ybWF0T3B0c1VuaSxcclxuXHJcbiAgaW5mb1dpbmRvdzogZm9ybWF0T3B0c1VuaSxcclxuXHJcbiAgbWFya2VyOiBmb3JtYXRPcHRzVW5pLFxyXG5cclxuICBwb2x5bGluZTogZm9ybWF0T3B0c1VuaSxcclxuXHJcbiAgcG9seWdvbjogZm9ybWF0T3B0c1VuaSxcclxuXHJcbiAgY2lyY2xlOiBmb3JtYXRPcHRzVW5pLFxyXG5cclxuICBtYXJrZXJDbHVzdGVyZXI6IGZvcm1hdE1hcmtlckNsdXN0ZXJlclxyXG59O1xyXG5cclxuZnVuY3Rpb24gZm9ybWF0T3B0c1VuaShvcHRzKSB7XHJcblxyXG4gIGlmKCdwb3NpdGlvbicgaW4gb3B0cykge1xyXG4gICAgb3B0cy5wb3NpdGlvbiA9IG5ldyBMbmdMYXQob3B0cy5wb3NpdGlvbik7XHJcbiAgfVxyXG5cclxuICBpZihvcHRzLnBhdGgpIHtcclxuICAgIG9wdHMucGF0aCA9IHRyYW5zZnJvbVBhdGhUb1BhdGhzKG9wdHMucGF0aCk7XHJcbiAgfVxyXG5cclxuICBpZihvcHRzLmNlbnRlcikge1xyXG4gICAgb3B0cy5jZW50ZXIgPSBuZXcgTG5nTGF0KG9wdHMuY2VudGVyKTtcclxuICB9XHJcblxyXG4gIGlmKG9wdHMubWFwKSB7XHJcbiAgICBvcHRzLm1hcCA9IG9wdHMubWFwLl9pbm5lcjtcclxuICB9XHJcblxyXG4gIHJldHVybiBvcHRzO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0cmFuc2Zyb21QYXRoVG9QYXRocyhwYXRoKSB7XHJcbiAgdmFyIHBhdGhzID0gW107XHJcbiAgcGF0aC5mb3JFYWNoKCBmdW5jdGlvbihpdGVtLCBpbmRleCkge1xyXG4gICAgcGF0aHMucHVzaChhcnJDcmVhdGVMbmdMYXQoaXRlbSkpO1xyXG4gIH0pO1xyXG4gIHJldHVybiBwYXRocztcclxufVxyXG5cclxuZnVuY3Rpb24gYXJyQ3JlYXRlTG5nTGF0KGFycikge1xyXG4gIHJldHVybiBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKHtsbmc6IGFyclswXSwgbGF0OiBhcnJbMV19KTtcclxufVxyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKiBtYXJrZXJDbHVzdGVyZXJcclxuICogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbmZ1bmN0aW9uIGZvcm1hdE1hcmtlckNsdXN0ZXJlcihtYXAsIG1hcmtlcnMsIG9wdHMpIHtcclxuICB2YXIgbmV3T3B0cyA9IHt9O1xyXG5cclxuICBpZihtYXAuX2lubmVyKSB7XHJcbiAgICBuZXdPcHRzLm1hcCA9IG1hcC5faW5uZXI7XHJcbiAgfSBlbHNlIHtcclxuICAgIG5ld09wdHMubWFwID0gbWFwO1xyXG4gIH1cclxuXHJcbiAgbmV3T3B0cy5tYXJrZXJzID0gbWFya2Vycy5tYXAoIGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgIHJldHVybiBpdGVtLl9pbm5lcjtcclxuICB9KTtcclxuXHJcbiAgbmV3T3B0cy5vcHRzID0gZm9ybWF0TWFya2VyQ2x1c3RlcmVyT3B0cyhvcHRzKTtcclxuXHJcbiAgcmV0dXJuIG5ld09wdHM7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0c1xyXG4gKiBAZGlmZiA6IG1pbkNsdXN0ZXJTaXplIDogbWluaW11bUNsdXN0ZXJTaXplXHJcbiAqICovXHJcbmZ1bmN0aW9uIGZvcm1hdE1hcmtlckNsdXN0ZXJlck9wdHMob3B0cykge1xyXG4gIGlmKG9wdHMubWluQ2x1c3RlclNpemUpIHtcclxuICAgIG9wdHMubWluaW11bUNsdXN0ZXJTaXplID0gb3B0cy5taW5DbHVzdGVyU2l6ZTtcclxuICB9XHJcblxyXG4gIGlmKG9wdHMuc3R5bGVzKSB7XHJcblxyXG4gICAgaWYob3B0cy5zdHlsZXMpIHtcclxuICAgICAgdmFyIHN0eWxlcyA9IG9wdHMuc3R5bGVzO1xyXG4gICAgICBpZihzdHlsZXMuc2l6ZSkge1xyXG4gICAgICAgIHN0eWxlcy53aWR0aCA9IHN0eWxlcy5nZXRXaWR0aCgpO1xyXG4gICAgICAgIHN0eWxlcy5oZWlnaHQgPSBzdHlsZXMuZ2V0SGVpZ2h0KCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgfVxyXG59XHJcblxyXG5cclxuLy8gdmFyIGZsaWdodFBsYW5Db29yZGluYXRlcyA9IFtcclxuLy8gICB7bGF0OiAzNy43NzIsIGxuZzogLTEyMi4yMTR9LFxyXG4vLyAgIHtsYXQ6IDIxLjI5MSwgbG5nOiAtMTU3LjgyMX0sXHJcbi8vICAge2xhdDogLTE4LjE0MiwgbG5nOiAxNzguNDMxfSxcclxuLy8gICB7bGF0OiAtMjcuNDY3LCBsbmc6IDE1My4wMjd9XHJcbi8vIF07XHJcblxyXG4vLyB2YXIgbGluZUFyciA9IFtcclxuLy8gICBbMTE2LjM2ODkwNCwgMzkuOTEzNDIzXSxcclxuLy8gICBbMTE2LjM4MjEyMiwgMzkuOTAxMTc2XSxcclxuLy8gICBbMTE2LjM4NzI3MSwgMzkuOTEyNTAxXSxcclxuLy8gICBbMTE2LjM5ODI1OCwgMzkuOTA0NjAwXVxyXG4vLyBdO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzL21hcC9nbWFwL2Zvcm1hdE9wdC5qc1xuLy8gbW9kdWxlIGlkID0gMTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 16 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/13.\r\n * @Class Marker\r\n */\r\nvar obc = __webpack_require__(17);\r\nvar onOff = __webpack_require__(11);\r\nvar formatOpts = __webpack_require__(15);\r\n\r\n/**\r\n * Represents a Marker\r\n * @constructor\r\n * @param {Object} opts\r\n * @param {Object} inner\r\n * @return an object, inner is prime google map Marker instance.\r\n * */\r\nfunction Marker(opts, inner) {\r\n\r\n  this._type = 'Marker';\r\n\r\n  if(inner) {\r\n    this._inner = inner;\r\n  } else {\r\n    // 在opts转换之前就要判断添加overlay\r\n    obc.addOverlay(opts, this);\r\n\r\n    var newOpts = formatOpts.marker(opts);\r\n    this._inner = new google.maps.Marker(newOpts);\r\n  }\r\n}\r\n\r\nMarker.prototype = {\r\n  setMap: obc.setMap,\r\n  getMap: obc.getMap,\r\n  hide: obc.hide,\r\n  show: obc.show,\r\n  on: onOff.on,\r\n  off: onOff.off\r\n};\r\n\r\nmodule.exports = Marker;\r\n\r\n\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9NYXJrZXIuanM/ZDdkNSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsImZpbGUiOiIxNi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGZpenogb24gMjAxNy8yLzEzLlxyXG4gKiBAQ2xhc3MgTWFya2VyXHJcbiAqL1xyXG52YXIgb2JjID0gcmVxdWlyZSgnLi9vdmVybGF5QmFzZUNsYXNzJyk7XHJcbnZhciBvbk9mZiA9IHJlcXVpcmUoJy4vb25PZmYnKTtcclxudmFyIGZvcm1hdE9wdHMgPSByZXF1aXJlKCcuL2Zvcm1hdE9wdCcpO1xyXG5cclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYSBNYXJrZXJcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBpbm5lclxyXG4gKiBAcmV0dXJuIGFuIG9iamVjdCwgaW5uZXIgaXMgcHJpbWUgZ29vZ2xlIG1hcCBNYXJrZXIgaW5zdGFuY2UuXHJcbiAqICovXHJcbmZ1bmN0aW9uIE1hcmtlcihvcHRzLCBpbm5lcikge1xyXG5cclxuICB0aGlzLl90eXBlID0gJ01hcmtlcic7XHJcblxyXG4gIGlmKGlubmVyKSB7XHJcbiAgICB0aGlzLl9pbm5lciA9IGlubmVyO1xyXG4gIH0gZWxzZSB7XHJcbiAgICAvLyDlnKhvcHRz6L2s5o2i5LmL5YmN5bCx6KaB5Yik5pat5re75Yqgb3ZlcmxheVxyXG4gICAgb2JjLmFkZE92ZXJsYXkob3B0cywgdGhpcyk7XHJcblxyXG4gICAgdmFyIG5ld09wdHMgPSBmb3JtYXRPcHRzLm1hcmtlcihvcHRzKTtcclxuICAgIHRoaXMuX2lubmVyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcihuZXdPcHRzKTtcclxuICB9XHJcbn1cclxuXHJcbk1hcmtlci5wcm90b3R5cGUgPSB7XHJcbiAgc2V0TWFwOiBvYmMuc2V0TWFwLFxyXG4gIGdldE1hcDogb2JjLmdldE1hcCxcclxuICBoaWRlOiBvYmMuaGlkZSxcclxuICBzaG93OiBvYmMuc2hvdyxcclxuICBvbjogb25PZmYub24sXHJcbiAgb2ZmOiBvbk9mZi5vZmZcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gTWFya2VyO1xyXG5cclxuXHJcblxyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzL21hcC9nbWFwL01hcmtlci5qc1xuLy8gbW9kdWxlIGlkID0gMTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 17 */
/***/ function(module, exports) {

	eval("/**\r\n * Created by fizz on 2017/2/17.\r\n */\r\n\r\nmodule.exports = {\r\n  setMap: function(map) {\r\n    if(map !== null) {\r\n      this._inner._smap = map;\r\n      map._overLayers[this._type].push(this);\r\n      this._inner.setMap(map._inner);\r\n    } else {\r\n      this._inner.setMap(null);\r\n    }\r\n  },\r\n\r\n  getMap: function() {\r\n    return this._inner._smap;\r\n  },\r\n\r\n  hide: function() {\r\n    this._inner.setVisible(false);\r\n  },\r\n\r\n  show: function() {\r\n    this._inner.setVisible(true);\r\n  },\r\n\r\n  addOverlay: function(opts, self) {\r\n    if('map' in opts) {\r\n      opts.map._overLayers[self._type].push(self);\r\n    }\r\n  }\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9vdmVybGF5QmFzZUNsYXNzLmpzPzEyZDMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiMTcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBmaXp6IG9uIDIwMTcvMi8xNy5cclxuICovXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICBzZXRNYXA6IGZ1bmN0aW9uKG1hcCkge1xyXG4gICAgaWYobWFwICE9PSBudWxsKSB7XHJcbiAgICAgIHRoaXMuX2lubmVyLl9zbWFwID0gbWFwO1xyXG4gICAgICBtYXAuX292ZXJMYXllcnNbdGhpcy5fdHlwZV0ucHVzaCh0aGlzKTtcclxuICAgICAgdGhpcy5faW5uZXIuc2V0TWFwKG1hcC5faW5uZXIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faW5uZXIuc2V0TWFwKG51bGwpO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIGdldE1hcDogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5uZXIuX3NtYXA7XHJcbiAgfSxcclxuXHJcbiAgaGlkZTogZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLl9pbm5lci5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICB9LFxyXG5cclxuICBzaG93OiBmdW5jdGlvbigpIHtcclxuICAgIHRoaXMuX2lubmVyLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgfSxcclxuXHJcbiAgYWRkT3ZlcmxheTogZnVuY3Rpb24ob3B0cywgc2VsZikge1xyXG4gICAgaWYoJ21hcCcgaW4gb3B0cykge1xyXG4gICAgICBvcHRzLm1hcC5fb3ZlckxheWVyc1tzZWxmLl90eXBlXS5wdXNoKHNlbGYpO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9vdmVybGF5QmFzZUNsYXNzLmpzXG4vLyBtb2R1bGUgaWQgPSAxN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 18 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/14.\r\n */\r\nvar onOff = __webpack_require__(11);\r\nvar formatOpts = __webpack_require__(15);\r\nvar obc = __webpack_require__(17);\r\n\r\n/**\r\n * @constructor\r\n * @opts {Object} opts\r\n * */\r\nfunction InfoWindow(opts) {\r\n  this._type = 'InfoWindow';\r\n  obc.addOverlay(opts, this);\r\n\r\n  var fmOpts = formatOpts.infoWindow(opts);\r\n  this._inner = new google.maps.InfoWindow(fmOpts);\r\n}\r\n\r\nInfoWindow.prototype = {\r\n  /**\r\n   * @function open a infoWindow in the position\r\n   * @map {Map} map required\r\n   * @pos {LngLat} position lngLat\r\n   * */\r\n  open: function(map, pos) {\r\n    if(pos) {\r\n      this._inner.setPosition(pos);\r\n    }\r\n    this._inner.open(map._inner);\r\n    this._inner._smap = map;\r\n    map._overLayers.InfoWindow.push(this);\r\n    this._isOpen = true;\r\n  },\r\n\r\n  close: function() {\r\n    this._inner.close();\r\n    this._isOpen = false;\r\n    var infoWindows = this._inner._smap._overLayers.InfoWindow;\r\n    infoWindows.filter( function(item, index) {\r\n      if(item == this) {\r\n        infoWindows.splice(index, 1);\r\n      }\r\n    });\r\n  },\r\n\r\n  getIsOpen: function() {\r\n    return this._isOpen;\r\n  },\r\n\r\n  /**\r\n   * @function setContent\r\n   * @content {String|htmlDOM} content\r\n   * */\r\n  setContent: function(content) {\r\n    this._inner.setContent(content);\r\n  },\r\n\r\n  getContent: function() {\r\n    return this._inner.getContent();\r\n  },\r\n\r\n  setPosition: function(lngLat) {\r\n    this._inner.setPosition(lngLat);\r\n  },\r\n\r\n  getPosition: function() {\r\n    return this._inner.getPosition();\r\n  },\r\n\r\n  // todo: google 不支持\r\n  setSize: function(size) {\r\n\r\n  },\r\n\r\n  // todo: google 不支持\r\n  getSize: function() {\r\n\r\n  },\r\n\r\n  on: onOff.on,\r\n  off: onOff.off\r\n};\r\n\r\n\r\n\r\nmodule.exports = InfoWindow;\r\n\r\n\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9JbmZvV2luZG93LmpzP2E3MzAiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVLE9BQU87QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsSUFBSTtBQUNmLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsZUFBZSxlQUFlO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUEsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7Ozs7QUFJQSIsImZpbGUiOiIxOC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGZpenogb24gMjAxNy8yLzE0LlxyXG4gKi9cclxudmFyIG9uT2ZmID0gcmVxdWlyZSgnLi9vbk9mZicpO1xyXG52YXIgZm9ybWF0T3B0cyA9IHJlcXVpcmUoJy4vZm9ybWF0T3B0Jyk7XHJcbnZhciBvYmMgPSByZXF1aXJlKCcuL292ZXJsYXlCYXNlQ2xhc3MnKTtcclxuXHJcbi8qKlxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQG9wdHMge09iamVjdH0gb3B0c1xyXG4gKiAqL1xyXG5mdW5jdGlvbiBJbmZvV2luZG93KG9wdHMpIHtcclxuICB0aGlzLl90eXBlID0gJ0luZm9XaW5kb3cnO1xyXG4gIG9iYy5hZGRPdmVybGF5KG9wdHMsIHRoaXMpO1xyXG5cclxuICB2YXIgZm1PcHRzID0gZm9ybWF0T3B0cy5pbmZvV2luZG93KG9wdHMpO1xyXG4gIHRoaXMuX2lubmVyID0gbmV3IGdvb2dsZS5tYXBzLkluZm9XaW5kb3coZm1PcHRzKTtcclxufVxyXG5cclxuSW5mb1dpbmRvdy5wcm90b3R5cGUgPSB7XHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIG9wZW4gYSBpbmZvV2luZG93IGluIHRoZSBwb3NpdGlvblxyXG4gICAqIEBtYXAge01hcH0gbWFwIHJlcXVpcmVkXHJcbiAgICogQHBvcyB7TG5nTGF0fSBwb3NpdGlvbiBsbmdMYXRcclxuICAgKiAqL1xyXG4gIG9wZW46IGZ1bmN0aW9uKG1hcCwgcG9zKSB7XHJcbiAgICBpZihwb3MpIHtcclxuICAgICAgdGhpcy5faW5uZXIuc2V0UG9zaXRpb24ocG9zKTtcclxuICAgIH1cclxuICAgIHRoaXMuX2lubmVyLm9wZW4obWFwLl9pbm5lcik7XHJcbiAgICB0aGlzLl9pbm5lci5fc21hcCA9IG1hcDtcclxuICAgIG1hcC5fb3ZlckxheWVycy5JbmZvV2luZG93LnB1c2godGhpcyk7XHJcbiAgICB0aGlzLl9pc09wZW4gPSB0cnVlO1xyXG4gIH0sXHJcblxyXG4gIGNsb3NlOiBmdW5jdGlvbigpIHtcclxuICAgIHRoaXMuX2lubmVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9pc09wZW4gPSBmYWxzZTtcclxuICAgIHZhciBpbmZvV2luZG93cyA9IHRoaXMuX2lubmVyLl9zbWFwLl9vdmVyTGF5ZXJzLkluZm9XaW5kb3c7XHJcbiAgICBpbmZvV2luZG93cy5maWx0ZXIoIGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7XHJcbiAgICAgIGlmKGl0ZW0gPT0gdGhpcykge1xyXG4gICAgICAgIGluZm9XaW5kb3dzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0sXHJcblxyXG4gIGdldElzT3BlbjogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNPcGVuO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBzZXRDb250ZW50XHJcbiAgICogQGNvbnRlbnQge1N0cmluZ3xodG1sRE9NfSBjb250ZW50XHJcbiAgICogKi9cclxuICBzZXRDb250ZW50OiBmdW5jdGlvbihjb250ZW50KSB7XHJcbiAgICB0aGlzLl9pbm5lci5zZXRDb250ZW50KGNvbnRlbnQpO1xyXG4gIH0sXHJcblxyXG4gIGdldENvbnRlbnQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lubmVyLmdldENvbnRlbnQoKTtcclxuICB9LFxyXG5cclxuICBzZXRQb3NpdGlvbjogZnVuY3Rpb24obG5nTGF0KSB7XHJcbiAgICB0aGlzLl9pbm5lci5zZXRQb3NpdGlvbihsbmdMYXQpO1xyXG4gIH0sXHJcblxyXG4gIGdldFBvc2l0aW9uOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbm5lci5nZXRQb3NpdGlvbigpO1xyXG4gIH0sXHJcblxyXG4gIC8vIHRvZG86IGdvb2dsZSDkuI3mlK/mjIFcclxuICBzZXRTaXplOiBmdW5jdGlvbihzaXplKSB7XHJcblxyXG4gIH0sXHJcblxyXG4gIC8vIHRvZG86IGdvb2dsZSDkuI3mlK/mjIFcclxuICBnZXRTaXplOiBmdW5jdGlvbigpIHtcclxuXHJcbiAgfSxcclxuXHJcbiAgb246IG9uT2ZmLm9uLFxyXG4gIG9mZjogb25PZmYub2ZmXHJcbn07XHJcblxyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gSW5mb1dpbmRvdztcclxuXHJcblxyXG5cclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9JbmZvV2luZG93LmpzXG4vLyBtb2R1bGUgaWQgPSAxOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 19 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/13.\r\n * @constructor Polyline\r\n */\r\n\r\nvar obc = __webpack_require__(17);\r\nvar onOff = __webpack_require__(11);\r\nvar formatOpts = __webpack_require__(15);\r\n\r\n/**\r\n * @constructor\r\n * @opts {Object} options\r\n * @return an object, inner is prime google map Polyline instance.\r\n * */\r\nfunction Polyline(opts) {\r\n  this._type = 'Polyline';\r\n  obc.addOverlay(opts, this);\r\n\r\n  var newOpts = formatOpts.polyline(opts);\r\n  this._inner = new google.maps.Polyline(newOpts);\r\n  // this._inner._self = this;\r\n}\r\n\r\nPolyline.prototype = {\r\n  setPath: function() {},\r\n  getPath: function() {},\r\n  setOptions: function() {},\r\n  getOptions: function() {},\r\n  getLength: function() {},\r\n\r\n  getBounds: function() {},\r\n\r\n  hide: obc.hide,\r\n  show: obc.show,\r\n  setMap: obc.setMap,\r\n\r\n  /**\r\n   * @ext {any} extData\r\n   * */\r\n  setExtData: function(ext) {\r\n    this._inner.extDate = ext;\r\n  },\r\n\r\n  getExtData: function() {\r\n    return this._inner.extDate;\r\n  },\r\n\r\n  on: onOff.on,\r\n  off: onOff.off\r\n};\r\n\r\nvar PolylineEventMap = {\r\n\r\n};\r\n\r\nmodule.exports = Polyline;\r\n\r\n\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9Qb2x5bGluZS5qcz8wN2IwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVSxPQUFPO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx3QkFBd0I7QUFDeEIsd0JBQXdCO0FBQ3hCLDJCQUEyQjtBQUMzQiwyQkFBMkI7QUFDM0IsMEJBQTBCOztBQUUxQiwwQkFBMEI7O0FBRTFCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFdBQVcsSUFBSTtBQUNmO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBIiwiZmlsZSI6IjE5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTMuXHJcbiAqIEBjb25zdHJ1Y3RvciBQb2x5bGluZVxyXG4gKi9cclxuXHJcbnZhciBvYmMgPSByZXF1aXJlKCcuL292ZXJsYXlCYXNlQ2xhc3MnKTtcclxudmFyIG9uT2ZmID0gcmVxdWlyZSgnLi9vbk9mZicpO1xyXG52YXIgZm9ybWF0T3B0cyA9IHJlcXVpcmUoJy4vZm9ybWF0T3B0Jyk7XHJcblxyXG4vKipcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBvcHRzIHtPYmplY3R9IG9wdGlvbnNcclxuICogQHJldHVybiBhbiBvYmplY3QsIGlubmVyIGlzIHByaW1lIGdvb2dsZSBtYXAgUG9seWxpbmUgaW5zdGFuY2UuXHJcbiAqICovXHJcbmZ1bmN0aW9uIFBvbHlsaW5lKG9wdHMpIHtcclxuICB0aGlzLl90eXBlID0gJ1BvbHlsaW5lJztcclxuICBvYmMuYWRkT3ZlcmxheShvcHRzLCB0aGlzKTtcclxuXHJcbiAgdmFyIG5ld09wdHMgPSBmb3JtYXRPcHRzLnBvbHlsaW5lKG9wdHMpO1xyXG4gIHRoaXMuX2lubmVyID0gbmV3IGdvb2dsZS5tYXBzLlBvbHlsaW5lKG5ld09wdHMpO1xyXG4gIC8vIHRoaXMuX2lubmVyLl9zZWxmID0gdGhpcztcclxufVxyXG5cclxuUG9seWxpbmUucHJvdG90eXBlID0ge1xyXG4gIHNldFBhdGg6IGZ1bmN0aW9uKCkge30sXHJcbiAgZ2V0UGF0aDogZnVuY3Rpb24oKSB7fSxcclxuICBzZXRPcHRpb25zOiBmdW5jdGlvbigpIHt9LFxyXG4gIGdldE9wdGlvbnM6IGZ1bmN0aW9uKCkge30sXHJcbiAgZ2V0TGVuZ3RoOiBmdW5jdGlvbigpIHt9LFxyXG5cclxuICBnZXRCb3VuZHM6IGZ1bmN0aW9uKCkge30sXHJcblxyXG4gIGhpZGU6IG9iYy5oaWRlLFxyXG4gIHNob3c6IG9iYy5zaG93LFxyXG4gIHNldE1hcDogb2JjLnNldE1hcCxcclxuXHJcbiAgLyoqXHJcbiAgICogQGV4dCB7YW55fSBleHREYXRhXHJcbiAgICogKi9cclxuICBzZXRFeHREYXRhOiBmdW5jdGlvbihleHQpIHtcclxuICAgIHRoaXMuX2lubmVyLmV4dERhdGUgPSBleHQ7XHJcbiAgfSxcclxuXHJcbiAgZ2V0RXh0RGF0YTogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5uZXIuZXh0RGF0ZTtcclxuICB9LFxyXG5cclxuICBvbjogb25PZmYub24sXHJcbiAgb2ZmOiBvbk9mZi5vZmZcclxufTtcclxuXHJcbnZhciBQb2x5bGluZUV2ZW50TWFwID0ge1xyXG5cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUG9seWxpbmU7XHJcblxyXG5cclxuXHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2dtYXAvUG9seWxpbmUuanNcbi8vIG1vZHVsZSBpZCA9IDE5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 20 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/13.\r\n * @constructor Polygon\r\n */\r\n\r\n// var event = require('./event');\r\nvar onOff = __webpack_require__(11);\r\nvar formatOpts = __webpack_require__(15);\r\nvar obc = __webpack_require__(17);\r\n\r\n/**\r\n * @constructor\r\n * @param {Object} opts\r\n * @return an object, inner is prime google map Polygon instance.\r\n * */\r\nfunction Polygon(opts) {\r\n  this._type = 'Polygon';\r\n  obc.addOverlay(opts, this);\r\n\r\n  var newOpts = formatOpts.polygon(opts);\r\n  this._inner = new google.maps.Polygon(newOpts);\r\n\r\n}\r\n\r\nPolygon.prototype = {\r\n\r\n  setMap: obc.setMap,\r\n\r\n  /**\r\n   * @param {path:Array LngLat | Array lngLat} path\r\n   * */\r\n  setPath: function(path) {\r\n    this._inner.setPath( path );\r\n  },\r\n  getPath: function() {},\r\n\r\n  setOptions: function() {\r\n    this._inner.setOptions( formatOpts.polygon(opts) );\r\n  },\r\n\r\n  getOptions: function() {},\r\n\r\n  getBounds: function() {},\r\n\r\n  getArea: function() {},\r\n\r\n  hide: obc.hide,\r\n\r\n  show: obc.show,\r\n\r\n\r\n\r\n  /**\r\n   * @param {any} ext extData\r\n   * */\r\n  setExtData: function(ext) {\r\n    this._inner.extDate = ext;\r\n  },\r\n\r\n  getExtData: function() {\r\n    return this._inner.extDate;\r\n  },\r\n\r\n  /**\r\n   * @function judge whether a point in the polygon inner\r\n   * @param {LngLat} point\r\n   * */\r\n  contains: function(point) {\r\n\r\n  },\r\n\r\n  on: onOff.on,\r\n  off: onOff.off\r\n};\r\n\r\nmodule.exports = Polygon;\r\n\r\n\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9Qb2x5Z29uLmpzP2U3MjciXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQSxhQUFhLGlDQUFpQztBQUM5QztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsd0JBQXdCOztBQUV4QjtBQUNBO0FBQ0EsR0FBRzs7QUFFSCwyQkFBMkI7O0FBRTNCLDBCQUEwQjs7QUFFMUIsd0JBQXdCOztBQUV4Qjs7QUFFQTs7OztBQUlBO0FBQ0EsYUFBYSxJQUFJO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQjtBQUNBOztBQUVBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6IjIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTMuXHJcbiAqIEBjb25zdHJ1Y3RvciBQb2x5Z29uXHJcbiAqL1xyXG5cclxuLy8gdmFyIGV2ZW50ID0gcmVxdWlyZSgnLi9ldmVudCcpO1xyXG52YXIgb25PZmYgPSByZXF1aXJlKCcuL29uT2ZmJyk7XHJcbnZhciBmb3JtYXRPcHRzID0gcmVxdWlyZSgnLi9mb3JtYXRPcHQnKTtcclxudmFyIG9iYyA9IHJlcXVpcmUoJy4vb3ZlcmxheUJhc2VDbGFzcycpO1xyXG5cclxuLyoqXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0c1xyXG4gKiBAcmV0dXJuIGFuIG9iamVjdCwgaW5uZXIgaXMgcHJpbWUgZ29vZ2xlIG1hcCBQb2x5Z29uIGluc3RhbmNlLlxyXG4gKiAqL1xyXG5mdW5jdGlvbiBQb2x5Z29uKG9wdHMpIHtcclxuICB0aGlzLl90eXBlID0gJ1BvbHlnb24nO1xyXG4gIG9iYy5hZGRPdmVybGF5KG9wdHMsIHRoaXMpO1xyXG5cclxuICB2YXIgbmV3T3B0cyA9IGZvcm1hdE9wdHMucG9seWdvbihvcHRzKTtcclxuICB0aGlzLl9pbm5lciA9IG5ldyBnb29nbGUubWFwcy5Qb2x5Z29uKG5ld09wdHMpO1xyXG5cclxufVxyXG5cclxuUG9seWdvbi5wcm90b3R5cGUgPSB7XHJcblxyXG4gIHNldE1hcDogb2JjLnNldE1hcCxcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtwYXRoOkFycmF5IExuZ0xhdCB8IEFycmF5IGxuZ0xhdH0gcGF0aFxyXG4gICAqICovXHJcbiAgc2V0UGF0aDogZnVuY3Rpb24ocGF0aCkge1xyXG4gICAgdGhpcy5faW5uZXIuc2V0UGF0aCggcGF0aCApO1xyXG4gIH0sXHJcbiAgZ2V0UGF0aDogZnVuY3Rpb24oKSB7fSxcclxuXHJcbiAgc2V0T3B0aW9uczogZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLl9pbm5lci5zZXRPcHRpb25zKCBmb3JtYXRPcHRzLnBvbHlnb24ob3B0cykgKTtcclxuICB9LFxyXG5cclxuICBnZXRPcHRpb25zOiBmdW5jdGlvbigpIHt9LFxyXG5cclxuICBnZXRCb3VuZHM6IGZ1bmN0aW9uKCkge30sXHJcblxyXG4gIGdldEFyZWE6IGZ1bmN0aW9uKCkge30sXHJcblxyXG4gIGhpZGU6IG9iYy5oaWRlLFxyXG5cclxuICBzaG93OiBvYmMuc2hvdyxcclxuXHJcblxyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge2FueX0gZXh0IGV4dERhdGFcclxuICAgKiAqL1xyXG4gIHNldEV4dERhdGE6IGZ1bmN0aW9uKGV4dCkge1xyXG4gICAgdGhpcy5faW5uZXIuZXh0RGF0ZSA9IGV4dDtcclxuICB9LFxyXG5cclxuICBnZXRFeHREYXRhOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbm5lci5leHREYXRlO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBqdWRnZSB3aGV0aGVyIGEgcG9pbnQgaW4gdGhlIHBvbHlnb24gaW5uZXJcclxuICAgKiBAcGFyYW0ge0xuZ0xhdH0gcG9pbnRcclxuICAgKiAqL1xyXG4gIGNvbnRhaW5zOiBmdW5jdGlvbihwb2ludCkge1xyXG5cclxuICB9LFxyXG5cclxuICBvbjogb25PZmYub24sXHJcbiAgb2ZmOiBvbk9mZi5vZmZcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUG9seWdvbjtcclxuXHJcblxyXG5cclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9Qb2x5Z29uLmpzXG4vLyBtb2R1bGUgaWQgPSAyMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 21 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/13.\r\n * @constructor Circle\r\n */\r\n\r\n// var event = require('./event');\r\nvar onOff = __webpack_require__(11);\r\nvar formatOpts = __webpack_require__(15);\r\nvar obc = __webpack_require__(17);\r\nvar LngLat = __webpack_require__(5);\r\n\r\n/**\r\n * @constructor\r\n * @opts {Object} opts\r\n * @return an object, inner is prime google map Circle instance.\r\n * */\r\nfunction Circle(opts) {\r\n  this._type = 'Circle';\r\n  obc.addOverlay(opts, this);\r\n\r\n  var newOpts = formatOpts.circle(opts);\r\n  this._inner = new google.maps.Circle(newOpts);\r\n}\r\n\r\nCircle.prototype = {\r\n\r\n  setMap: obc.setMap,\r\n\r\n  setCenter: function(center) {\r\n    this._inner.setCenter(center);\r\n  },\r\n\r\n  getCenter: function() {\r\n    return new LngLat(' ',' ',this._inner.getCenter());\r\n  },\r\n\r\n  getBounds: function() {\r\n\r\n  },\r\n\r\n  /**\r\n   * @param {Number} radius\r\n   * */\r\n  setRadius: function(radius) {\r\n    this._inner.setRadius(radius);\r\n  },\r\n\r\n  getRadius: function() {\r\n    return this._inner.getRadius();\r\n  },\r\n\r\n  setOptions: function() {\r\n    this._inner.setOptions( formatOpts.polygon(opts) );\r\n  },\r\n\r\n  getOptions: function() {},\r\n\r\n  getArea: function() {},\r\n\r\n  hide: obc.hide,\r\n\r\n  show: obc.show,\r\n\r\n  /**\r\n   * @ext {any} extData\r\n   * */\r\n  setExtData: function(ext) {\r\n    this._inner.extDate = ext;\r\n  },\r\n\r\n  getExtData: function() {\r\n    return this._inner.extDate;\r\n  },\r\n\r\n  /**\r\n   * @function judge whether a point in the polygon inner\r\n   * @point {LngLat}\r\n   * @return {Boolean} true or false\r\n   * */\r\n  contains: function(point) {\r\n\r\n  },\r\n\r\n  on: onOff.on,\r\n  off: onOff.off\r\n};\r\n\r\nvar CircleEventMap = {\r\n\r\n};\r\n\r\nmodule.exports = Circle;\r\n\r\n\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9DaXJjbGUuanM/YTM5OSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVLE9BQU87QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUEsR0FBRzs7QUFFSDtBQUNBLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVILDJCQUEyQjs7QUFFM0Isd0JBQXdCOztBQUV4Qjs7QUFFQTs7QUFFQTtBQUNBLFdBQVcsSUFBSTtBQUNmO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLGFBQWE7QUFDYixjQUFjLFFBQVE7QUFDdEI7QUFDQTs7QUFFQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSIsImZpbGUiOiIyMS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGZpenogb24gMjAxNy8yLzEzLlxyXG4gKiBAY29uc3RydWN0b3IgQ2lyY2xlXHJcbiAqL1xyXG5cclxuLy8gdmFyIGV2ZW50ID0gcmVxdWlyZSgnLi9ldmVudCcpO1xyXG52YXIgb25PZmYgPSByZXF1aXJlKCcuL29uT2ZmJyk7XHJcbnZhciBmb3JtYXRPcHRzID0gcmVxdWlyZSgnLi9mb3JtYXRPcHQnKTtcclxudmFyIG9iYyA9IHJlcXVpcmUoJy4vb3ZlcmxheUJhc2VDbGFzcycpO1xyXG52YXIgTG5nTGF0ID0gcmVxdWlyZSgnLi9MbmdMYXQnKTtcclxuXHJcbi8qKlxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQG9wdHMge09iamVjdH0gb3B0c1xyXG4gKiBAcmV0dXJuIGFuIG9iamVjdCwgaW5uZXIgaXMgcHJpbWUgZ29vZ2xlIG1hcCBDaXJjbGUgaW5zdGFuY2UuXHJcbiAqICovXHJcbmZ1bmN0aW9uIENpcmNsZShvcHRzKSB7XHJcbiAgdGhpcy5fdHlwZSA9ICdDaXJjbGUnO1xyXG4gIG9iYy5hZGRPdmVybGF5KG9wdHMsIHRoaXMpO1xyXG5cclxuICB2YXIgbmV3T3B0cyA9IGZvcm1hdE9wdHMuY2lyY2xlKG9wdHMpO1xyXG4gIHRoaXMuX2lubmVyID0gbmV3IGdvb2dsZS5tYXBzLkNpcmNsZShuZXdPcHRzKTtcclxufVxyXG5cclxuQ2lyY2xlLnByb3RvdHlwZSA9IHtcclxuXHJcbiAgc2V0TWFwOiBvYmMuc2V0TWFwLFxyXG5cclxuICBzZXRDZW50ZXI6IGZ1bmN0aW9uKGNlbnRlcikge1xyXG4gICAgdGhpcy5faW5uZXIuc2V0Q2VudGVyKGNlbnRlcik7XHJcbiAgfSxcclxuXHJcbiAgZ2V0Q2VudGVyOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBuZXcgTG5nTGF0KCcgJywnICcsdGhpcy5faW5uZXIuZ2V0Q2VudGVyKCkpO1xyXG4gIH0sXHJcblxyXG4gIGdldEJvdW5kczogZnVuY3Rpb24oKSB7XHJcblxyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSByYWRpdXNcclxuICAgKiAqL1xyXG4gIHNldFJhZGl1czogZnVuY3Rpb24ocmFkaXVzKSB7XHJcbiAgICB0aGlzLl9pbm5lci5zZXRSYWRpdXMocmFkaXVzKTtcclxuICB9LFxyXG5cclxuICBnZXRSYWRpdXM6IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lubmVyLmdldFJhZGl1cygpO1xyXG4gIH0sXHJcblxyXG4gIHNldE9wdGlvbnM6IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy5faW5uZXIuc2V0T3B0aW9ucyggZm9ybWF0T3B0cy5wb2x5Z29uKG9wdHMpICk7XHJcbiAgfSxcclxuXHJcbiAgZ2V0T3B0aW9uczogZnVuY3Rpb24oKSB7fSxcclxuXHJcbiAgZ2V0QXJlYTogZnVuY3Rpb24oKSB7fSxcclxuXHJcbiAgaGlkZTogb2JjLmhpZGUsXHJcblxyXG4gIHNob3c6IG9iYy5zaG93LFxyXG5cclxuICAvKipcclxuICAgKiBAZXh0IHthbnl9IGV4dERhdGFcclxuICAgKiAqL1xyXG4gIHNldEV4dERhdGE6IGZ1bmN0aW9uKGV4dCkge1xyXG4gICAgdGhpcy5faW5uZXIuZXh0RGF0ZSA9IGV4dDtcclxuICB9LFxyXG5cclxuICBnZXRFeHREYXRhOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbm5lci5leHREYXRlO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBqdWRnZSB3aGV0aGVyIGEgcG9pbnQgaW4gdGhlIHBvbHlnb24gaW5uZXJcclxuICAgKiBAcG9pbnQge0xuZ0xhdH1cclxuICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlIG9yIGZhbHNlXHJcbiAgICogKi9cclxuICBjb250YWluczogZnVuY3Rpb24ocG9pbnQpIHtcclxuXHJcbiAgfSxcclxuXHJcbiAgb246IG9uT2ZmLm9uLFxyXG4gIG9mZjogb25PZmYub2ZmXHJcbn07XHJcblxyXG52YXIgQ2lyY2xlRXZlbnRNYXAgPSB7XHJcblxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBDaXJjbGU7XHJcblxyXG5cclxuXHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2dtYXAvQ2lyY2xlLmpzXG4vLyBtb2R1bGUgaWQgPSAyMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 22 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/15.\r\n */\r\n\r\nvar formatOpts = __webpack_require__(15);\r\nvar obc = __webpack_require__(17)\r\n\r\n/**\r\n * @constructor\r\n * @map {Map.Object}\r\n * @marker {Marker}\r\n * @opts {MarkerClustererOptions}\r\n * */\r\nfunction Clusterer(map, markers, opts) {\r\n  if(markers.length < 1) return;\r\n\r\n  this._type = 'MarkerClusterer';\r\n  obc.addOverlay({map: map}, this);\r\n\r\n  var newOpts = formatOpts.markerClusterer(map, markers, opts);\r\n  this._inner = new MarkerClusterer(newOpts.map, newOpts.markers, newOpts.opts);\r\n  this._inner._smap = map;\r\n}\r\n\r\nClusterer.prototype = {\r\n  getSize: function() {},\r\n\r\n  setMap: obc.setMap,\r\n\r\n  getMap: function() {\r\n    return this._inner.getMap();\r\n  },\r\n\r\n  addMarker: function() {},\r\n  removeMarker: function() {},\r\n\r\n  /**\r\n   * @param {Array} styles\r\n   * */\r\n  setStyles: function(styles) {\r\n\r\n  }\r\n};\r\n\r\nmodule.exports = Clusterer;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvZ21hcC9NYXJrZXJDbHVzdGVyZXIuanM/ZTY0MSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNULFlBQVk7QUFDWixVQUFVO0FBQ1Y7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0JBQWtCLFNBQVM7O0FBRTNCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esd0JBQXdCOztBQUV4Qjs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSCwwQkFBMEI7QUFDMUIsNkJBQTZCOztBQUU3QjtBQUNBLGFBQWEsTUFBTTtBQUNuQjtBQUNBOztBQUVBO0FBQ0E7O0FBRUEiLCJmaWxlIjoiMjIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBmaXp6IG9uIDIwMTcvMi8xNS5cclxuICovXHJcblxyXG52YXIgZm9ybWF0T3B0cyA9IHJlcXVpcmUoJy4vZm9ybWF0T3B0Jyk7XHJcbnZhciBvYmMgPSByZXF1aXJlKCcuL292ZXJsYXlCYXNlQ2xhc3MnKVxyXG5cclxuLyoqXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAbWFwIHtNYXAuT2JqZWN0fVxyXG4gKiBAbWFya2VyIHtNYXJrZXJ9XHJcbiAqIEBvcHRzIHtNYXJrZXJDbHVzdGVyZXJPcHRpb25zfVxyXG4gKiAqL1xyXG5mdW5jdGlvbiBDbHVzdGVyZXIobWFwLCBtYXJrZXJzLCBvcHRzKSB7XHJcbiAgaWYobWFya2Vycy5sZW5ndGggPCAxKSByZXR1cm47XHJcblxyXG4gIHRoaXMuX3R5cGUgPSAnTWFya2VyQ2x1c3RlcmVyJztcclxuICBvYmMuYWRkT3ZlcmxheSh7bWFwOiBtYXB9LCB0aGlzKTtcclxuXHJcbiAgdmFyIG5ld09wdHMgPSBmb3JtYXRPcHRzLm1hcmtlckNsdXN0ZXJlcihtYXAsIG1hcmtlcnMsIG9wdHMpO1xyXG4gIHRoaXMuX2lubmVyID0gbmV3IE1hcmtlckNsdXN0ZXJlcihuZXdPcHRzLm1hcCwgbmV3T3B0cy5tYXJrZXJzLCBuZXdPcHRzLm9wdHMpO1xyXG4gIHRoaXMuX2lubmVyLl9zbWFwID0gbWFwO1xyXG59XHJcblxyXG5DbHVzdGVyZXIucHJvdG90eXBlID0ge1xyXG4gIGdldFNpemU6IGZ1bmN0aW9uKCkge30sXHJcblxyXG4gIHNldE1hcDogb2JjLnNldE1hcCxcclxuXHJcbiAgZ2V0TWFwOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbm5lci5nZXRNYXAoKTtcclxuICB9LFxyXG5cclxuICBhZGRNYXJrZXI6IGZ1bmN0aW9uKCkge30sXHJcbiAgcmVtb3ZlTWFya2VyOiBmdW5jdGlvbigpIHt9LFxyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge0FycmF5fSBzdHlsZXNcclxuICAgKiAqL1xyXG4gIHNldFN0eWxlczogZnVuY3Rpb24oc3R5bGVzKSB7XHJcblxyXG4gIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gQ2x1c3RlcmVyO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzL21hcC9nbWFwL01hcmtlckNsdXN0ZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMjJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 23 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/13.\r\n */\r\n\r\nvar LngLat = __webpack_require__(24);\r\nvar Bounds = __webpack_require__(25);\r\nvar Pixel = __webpack_require__(26);\r\nvar Size = __webpack_require__(27);\r\nvar Map = __webpack_require__(28);\r\nvar Marker = __webpack_require__(34);\r\nvar event = __webpack_require__(30);\r\nvar InfoWindow = __webpack_require__(36);\r\nvar Polyline = __webpack_require__(37);\r\nvar Polygon = __webpack_require__(38);\r\nvar Circle = __webpack_require__(39);\r\nvar MarkerClusterer = __webpack_require__(40);\r\n\r\nvar GMap = {};\r\n\r\nGMap.event = event;\r\n\r\nGMap.LngLat = LngLat;\r\nGMap.Bounds = Bounds;\r\nGMap.Pixel = Pixel;\r\nGMap.Size = Size;\r\n\r\nGMap.Map = Map;\r\nGMap.Marker = Marker;\r\nGMap.InfoWindow = InfoWindow;\r\nGMap.Polyline = Polyline;\r\nGMap.Polygon = Polygon;\r\nGMap.Circle = Circle;\r\nGMap.MarkerClusterer = MarkerClusterer;\r\n\r\nmodule.exports = window.GMap = GMap;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9pbmRleC5qcz9lZmJhIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJmaWxlIjoiMjMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBmaXp6IG9uIDIwMTcvMi8xMy5cclxuICovXHJcblxyXG52YXIgTG5nTGF0ID0gcmVxdWlyZSgnLi9MbmdMYXQnKTtcclxudmFyIEJvdW5kcyA9IHJlcXVpcmUoJy4vQm91bmRzJyk7XHJcbnZhciBQaXhlbCA9IHJlcXVpcmUoJy4vUGl4ZWwnKTtcclxudmFyIFNpemUgPSByZXF1aXJlKCcuL1NpemUnKTtcclxudmFyIE1hcCA9IHJlcXVpcmUoJy4vTWFwJyk7XHJcbnZhciBNYXJrZXIgPSByZXF1aXJlKCcuL01hcmtlcicpO1xyXG52YXIgZXZlbnQgPSByZXF1aXJlKCcuL2V2ZW50Jyk7XHJcbnZhciBJbmZvV2luZG93ID0gcmVxdWlyZSgnLi9JbmZvV2luZG93Jyk7XHJcbnZhciBQb2x5bGluZSA9IHJlcXVpcmUoJy4vUG9seWxpbmUnKTtcclxudmFyIFBvbHlnb24gPSByZXF1aXJlKCcuL1BvbHlnb24nKTtcclxudmFyIENpcmNsZSA9IHJlcXVpcmUoJy4vQ2lyY2xlJyk7XHJcbnZhciBNYXJrZXJDbHVzdGVyZXIgPSByZXF1aXJlKCcuL01hcmtlckNsdXN0ZXJlcicpO1xyXG5cclxudmFyIEdNYXAgPSB7fTtcclxuXHJcbkdNYXAuZXZlbnQgPSBldmVudDtcclxuXHJcbkdNYXAuTG5nTGF0ID0gTG5nTGF0O1xyXG5HTWFwLkJvdW5kcyA9IEJvdW5kcztcclxuR01hcC5QaXhlbCA9IFBpeGVsO1xyXG5HTWFwLlNpemUgPSBTaXplO1xyXG5cclxuR01hcC5NYXAgPSBNYXA7XHJcbkdNYXAuTWFya2VyID0gTWFya2VyO1xyXG5HTWFwLkluZm9XaW5kb3cgPSBJbmZvV2luZG93O1xyXG5HTWFwLlBvbHlsaW5lID0gUG9seWxpbmU7XHJcbkdNYXAuUG9seWdvbiA9IFBvbHlnb247XHJcbkdNYXAuQ2lyY2xlID0gQ2lyY2xlO1xyXG5HTWFwLk1hcmtlckNsdXN0ZXJlciA9IE1hcmtlckNsdXN0ZXJlcjtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gd2luZG93LkdNYXAgPSBHTWFwO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzL21hcC9ibWFwL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAyM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 24 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/13.\r\n * @constructor LngLat\r\n * @attention 百度地图没有LngLat这个基础类，而是叫Point类。\r\n */\r\n\r\nvar util = __webpack_require__(3);\r\n\r\n/**\r\n * @constructor\r\n * @lng {Number} lng\r\n * @lat {Number} lat\r\n * */\r\nfunction LngLat(lng, lat, inner) {\r\n\r\n  // 包装GMap的LngLat结构\r\n  if(inner) {\r\n    this._inner = inner;\r\n  }\r\n\r\n  // 构造函数模式\r\n  else {\r\n    if(arguments.length < 2) {\r\n\r\n      // 数组形式，前者为lng，后者为lat [116.397428, 39.90923] -- position\r\n      if(util.isArray(lng)){\r\n\r\n        if( typeof lng[0] === 'string' || typeof lng[1] === 'string' ) {\r\n          this.lng = parseFloat(lng[0]);\r\n          this.lat = parseFloat(lng[1]);\r\n        }\r\n\r\n        else {\r\n          this.lng = lng[0];\r\n          this.lat = lng[1];\r\n        }\r\n      }\r\n\r\n      // 对象形式，lng对应lng，lat对应lat (lng: 116.397428, lat: 39.90923)\r\n      else {\r\n        this.lng = lng.lng;\r\n        this.lat = lng.lat;\r\n      }\r\n    }\r\n\r\n    else {\r\n\r\n      // (\"116.403322\", \"39.920255\") string\r\n      if(util.isString(lng) || util.isString(lat)) {\r\n        this.lng = parseFloat(lng);\r\n        this.lat = parseFloat(lat);\r\n      }\r\n\r\n      // (116.403322, 39.920255) Number\r\n      else {\r\n        this.lng = lng;\r\n        this.lat = lat;\r\n      }\r\n    }\r\n\r\n    this._inner = new BMap.Point(this.lng, this.lat);\r\n  }\r\n\r\n  this._type = 'LngLat';\r\n\r\n}\r\n\r\nLngLat.prototype = {\r\n  /**\r\n   * @function offset\r\n   * @param {Number} w\r\n   * @param {Number} s\r\n   * */\r\n  offset: function(w, s) {\r\n\r\n  },\r\n\r\n  distance: function() {\r\n\r\n  },\r\n\r\n  getLng: function() {\r\n    return this._inner.lng;\r\n  },\r\n\r\n  getLat: function() {\r\n    return this._inner.lat;\r\n  },\r\n\r\n  equals: function(point) {\r\n    return this._inner.equals(point._inner);\r\n  },\r\n\r\n  toString: function() {\r\n    return this._inner.toString();\r\n  }\r\n};\r\n\r\nmodule.exports = LngLat;\r\n\r\n\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9MbmdMYXQuanM/NGY1ZiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxTQUFTLE9BQU87QUFDaEIsU0FBUyxPQUFPO0FBQ2hCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLE9BQU87QUFDcEIsYUFBYSxPQUFPO0FBQ3BCO0FBQ0E7O0FBRUEsR0FBRzs7QUFFSDs7QUFFQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6IjI0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTMuXHJcbiAqIEBjb25zdHJ1Y3RvciBMbmdMYXRcclxuICogQGF0dGVudGlvbiDnmb7luqblnLDlm77msqHmnIlMbmdMYXTov5nkuKrln7rnoYDnsbvvvIzogIzmmK/lj6tQb2ludOexu+OAglxyXG4gKi9cclxuXHJcbnZhciB1dGlsID0gcmVxdWlyZSgnLi4vLi4vLi4vY29tbW9uL2pzL3V0aWwnKTtcclxuXHJcbi8qKlxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQGxuZyB7TnVtYmVyfSBsbmdcclxuICogQGxhdCB7TnVtYmVyfSBsYXRcclxuICogKi9cclxuZnVuY3Rpb24gTG5nTGF0KGxuZywgbGF0LCBpbm5lcikge1xyXG5cclxuICAvLyDljIXoo4VHTWFw55qETG5nTGF057uT5p6EXHJcbiAgaWYoaW5uZXIpIHtcclxuICAgIHRoaXMuX2lubmVyID0gaW5uZXI7XHJcbiAgfVxyXG5cclxuICAvLyDmnoTpgKDlh73mlbDmqKHlvI9cclxuICBlbHNlIHtcclxuICAgIGlmKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XHJcblxyXG4gICAgICAvLyDmlbDnu4TlvaLlvI/vvIzliY3ogIXkuLpsbmfvvIzlkI7ogIXkuLpsYXQgWzExNi4zOTc0MjgsIDM5LjkwOTIzXSAtLSBwb3NpdGlvblxyXG4gICAgICBpZih1dGlsLmlzQXJyYXkobG5nKSl7XHJcblxyXG4gICAgICAgIGlmKCB0eXBlb2YgbG5nWzBdID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgbG5nWzFdID09PSAnc3RyaW5nJyApIHtcclxuICAgICAgICAgIHRoaXMubG5nID0gcGFyc2VGbG9hdChsbmdbMF0pO1xyXG4gICAgICAgICAgdGhpcy5sYXQgPSBwYXJzZUZsb2F0KGxuZ1sxXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIHRoaXMubG5nID0gbG5nWzBdO1xyXG4gICAgICAgICAgdGhpcy5sYXQgPSBsbmdbMV07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDlr7nosaHlvaLlvI/vvIxsbmflr7nlupRsbmfvvIxsYXTlr7nlupRsYXQgKGxuZzogMTE2LjM5NzQyOCwgbGF0OiAzOS45MDkyMylcclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdGhpcy5sbmcgPSBsbmcubG5nO1xyXG4gICAgICAgIHRoaXMubGF0ID0gbG5nLmxhdDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGVsc2Uge1xyXG5cclxuICAgICAgLy8gKFwiMTE2LjQwMzMyMlwiLCBcIjM5LjkyMDI1NVwiKSBzdHJpbmdcclxuICAgICAgaWYodXRpbC5pc1N0cmluZyhsbmcpIHx8IHV0aWwuaXNTdHJpbmcobGF0KSkge1xyXG4gICAgICAgIHRoaXMubG5nID0gcGFyc2VGbG9hdChsbmcpO1xyXG4gICAgICAgIHRoaXMubGF0ID0gcGFyc2VGbG9hdChsYXQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyAoMTE2LjQwMzMyMiwgMzkuOTIwMjU1KSBOdW1iZXJcclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdGhpcy5sbmcgPSBsbmc7XHJcbiAgICAgICAgdGhpcy5sYXQgPSBsYXQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9pbm5lciA9IG5ldyBCTWFwLlBvaW50KHRoaXMubG5nLCB0aGlzLmxhdCk7XHJcbiAgfVxyXG5cclxuICB0aGlzLl90eXBlID0gJ0xuZ0xhdCc7XHJcblxyXG59XHJcblxyXG5MbmdMYXQucHJvdG90eXBlID0ge1xyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBvZmZzZXRcclxuICAgKiBAcGFyYW0ge051bWJlcn0gd1xyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBzXHJcbiAgICogKi9cclxuICBvZmZzZXQ6IGZ1bmN0aW9uKHcsIHMpIHtcclxuXHJcbiAgfSxcclxuXHJcbiAgZGlzdGFuY2U6IGZ1bmN0aW9uKCkge1xyXG5cclxuICB9LFxyXG5cclxuICBnZXRMbmc6IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lubmVyLmxuZztcclxuICB9LFxyXG5cclxuICBnZXRMYXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lubmVyLmxhdDtcclxuICB9LFxyXG5cclxuICBlcXVhbHM6IGZ1bmN0aW9uKHBvaW50KSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5uZXIuZXF1YWxzKHBvaW50Ll9pbm5lcik7XHJcbiAgfSxcclxuXHJcbiAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lubmVyLnRvU3RyaW5nKCk7XHJcbiAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBMbmdMYXQ7XHJcblxyXG5cclxuXHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2JtYXAvTG5nTGF0LmpzXG4vLyBtb2R1bGUgaWQgPSAyNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 25 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/15.\r\n * @name Bounds 基础类\r\n * 在Google Map里面对应LatLngBounds Class\r\n * https://developers.google.com/maps/documentation/javascript/3.exp/reference#LatLngBounds\r\n */\r\n\r\nvar LngLat = __webpack_require__(24);\r\n\r\n/**\r\n * @constructor\r\n * @sw {LngLat} southWest\r\n * @ne {LngLat} northEast\r\n * */\r\nfunction Bounds(sw, ne, inner) {\r\n\r\n  if(inner) {\r\n    this._inner = inner;\r\n  } else {\r\n    this._inner = new BMap.Bounds(sw, ne);\r\n  }\r\n\r\n  this._type = 'Bounds';\r\n\r\n  return this;\r\n}\r\n\r\nBounds.prototype = {\r\n  /**\r\n   * @param {LngLat} point\r\n   * */\r\n  contains: function(point) {\r\n    return this._inner.contains(point._inner);\r\n  },\r\n\r\n  getCenter: function() {\r\n    return new LngLat('', '', this._inner.getCenter());\r\n  },\r\n\r\n  getSouthWest: function() {\r\n    return new LngLat('', '', this._inner.getSouthWest());\r\n  },\r\n  getNorthEast: function() {\r\n    return new LngLat('', '', this._inner.getNorthEast());\r\n  },\r\n  toString: function() {\r\n    console.log(\"toString\");\r\n    return this._inner.toString();\r\n  }\r\n};\r\n\r\nmodule.exports = Bounds;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9Cb3VuZHMuanM/YWIxNCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLFFBQVEsT0FBTztBQUNmLFFBQVEsT0FBTztBQUNmO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6IjI1LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTUuXHJcbiAqIEBuYW1lIEJvdW5kcyDln7rnoYDnsbtcclxuICog5ZyoR29vZ2xlIE1hcOmHjOmdouWvueW6lExhdExuZ0JvdW5kcyBDbGFzc1xyXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9tYXBzL2RvY3VtZW50YXRpb24vamF2YXNjcmlwdC8zLmV4cC9yZWZlcmVuY2UjTGF0TG5nQm91bmRzXHJcbiAqL1xyXG5cclxudmFyIExuZ0xhdCA9IHJlcXVpcmUoJy4vTG5nTGF0Jyk7XHJcblxyXG4vKipcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBzdyB7TG5nTGF0fSBzb3V0aFdlc3RcclxuICogQG5lIHtMbmdMYXR9IG5vcnRoRWFzdFxyXG4gKiAqL1xyXG5mdW5jdGlvbiBCb3VuZHMoc3csIG5lLCBpbm5lcikge1xyXG5cclxuICBpZihpbm5lcikge1xyXG4gICAgdGhpcy5faW5uZXIgPSBpbm5lcjtcclxuICB9IGVsc2Uge1xyXG4gICAgdGhpcy5faW5uZXIgPSBuZXcgQk1hcC5Cb3VuZHMoc3csIG5lKTtcclxuICB9XHJcblxyXG4gIHRoaXMuX3R5cGUgPSAnQm91bmRzJztcclxuXHJcbiAgcmV0dXJuIHRoaXM7XHJcbn1cclxuXHJcbkJvdW5kcy5wcm90b3R5cGUgPSB7XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtMbmdMYXR9IHBvaW50XHJcbiAgICogKi9cclxuICBjb250YWluczogZnVuY3Rpb24ocG9pbnQpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbm5lci5jb250YWlucyhwb2ludC5faW5uZXIpO1xyXG4gIH0sXHJcblxyXG4gIGdldENlbnRlcjogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gbmV3IExuZ0xhdCgnJywgJycsIHRoaXMuX2lubmVyLmdldENlbnRlcigpKTtcclxuICB9LFxyXG5cclxuICBnZXRTb3V0aFdlc3Q6IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIG5ldyBMbmdMYXQoJycsICcnLCB0aGlzLl9pbm5lci5nZXRTb3V0aFdlc3QoKSk7XHJcbiAgfSxcclxuICBnZXROb3J0aEVhc3Q6IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIG5ldyBMbmdMYXQoJycsICcnLCB0aGlzLl9pbm5lci5nZXROb3J0aEVhc3QoKSk7XHJcbiAgfSxcclxuICB0b1N0cmluZzogZnVuY3Rpb24oKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcInRvU3RyaW5nXCIpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2lubmVyLnRvU3RyaW5nKCk7XHJcbiAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBCb3VuZHM7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2JtYXAvQm91bmRzLmpzXG4vLyBtb2R1bGUgaWQgPSAyNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 26 */
/***/ function(module, exports) {

	eval("/**\r\n * Created by fizz on 2017/2/15.\r\n * @constructor Pixel\r\n * 在google map里面对应的是Point\r\n * https://developers.google.com/maps/documentation/javascript/reference#Point\r\n */\r\n\r\n\r\n/**\r\n * @constructor\r\n * @param {Number} x\r\n * @param {Number} y\r\n * */\r\nfunction Pixel(x, y, inner) {\r\n  if(inner) {\r\n    this._inner = inner;\r\n  } else {\r\n    this._inner = new BMap.Pixel(x,y);\r\n  }\r\n\r\n  this._type = 'Pixel';\r\n}\r\n\r\nPixel.prototype = {\r\n  getX: function() {\r\n    return this._inner.x;\r\n  },\r\n  getY: function() {\r\n    return this._inner.y;\r\n  },\r\n\r\n  /**\r\n   * @param {Pixel} point\r\n   * */\r\n  equals: function(point) {\r\n    return this._inner.equals(point._inner);\r\n  },\r\n\r\n  toString: function() {\r\n    return this._inner.toString();\r\n  }\r\n};\r\n\r\n\r\n\r\n\r\nmodule.exports = Pixel;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9QaXhlbC5qcz9kZDExIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLGFBQWEsTUFBTTtBQUNuQjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUtBIiwiZmlsZSI6IjI2LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTUuXHJcbiAqIEBjb25zdHJ1Y3RvciBQaXhlbFxyXG4gKiDlnKhnb29nbGUgbWFw6YeM6Z2i5a+55bqU55qE5pivUG9pbnRcclxuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vbWFwcy9kb2N1bWVudGF0aW9uL2phdmFzY3JpcHQvcmVmZXJlbmNlI1BvaW50XHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQHBhcmFtIHtOdW1iZXJ9IHhcclxuICogQHBhcmFtIHtOdW1iZXJ9IHlcclxuICogKi9cclxuZnVuY3Rpb24gUGl4ZWwoeCwgeSwgaW5uZXIpIHtcclxuICBpZihpbm5lcikge1xyXG4gICAgdGhpcy5faW5uZXIgPSBpbm5lcjtcclxuICB9IGVsc2Uge1xyXG4gICAgdGhpcy5faW5uZXIgPSBuZXcgQk1hcC5QaXhlbCh4LHkpO1xyXG4gIH1cclxuXHJcbiAgdGhpcy5fdHlwZSA9ICdQaXhlbCc7XHJcbn1cclxuXHJcblBpeGVsLnByb3RvdHlwZSA9IHtcclxuICBnZXRYOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbm5lci54O1xyXG4gIH0sXHJcbiAgZ2V0WTogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5uZXIueTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge1BpeGVsfSBwb2ludFxyXG4gICAqICovXHJcbiAgZXF1YWxzOiBmdW5jdGlvbihwb2ludCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lubmVyLmVxdWFscyhwb2ludC5faW5uZXIpO1xyXG4gIH0sXHJcblxyXG4gIHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbm5lci50b1N0cmluZygpO1xyXG4gIH1cclxufTtcclxuXHJcblxyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUGl4ZWw7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2JtYXAvUGl4ZWwuanNcbi8vIG1vZHVsZSBpZCA9IDI2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 27 */
/***/ function(module, exports) {

	eval("/**\r\n * Created by fizz on 2017/2/15.\r\n */\r\n\r\n/**\r\n * @constructor\r\n * @param {Number} width\r\n * @param {Number} height\r\n * */\r\nfunction Size(width, height, inner) {\r\n  if(inner) {\r\n    this._inner = inner;\r\n  } else {\r\n    this._inner = new BMap.Size();\r\n  }\r\n\r\n  this._type = 'Size';\r\n  return this;\r\n}\r\n\r\nSize.prototype = {\r\n  getWidth: function() {\r\n    return this._inner.width;\r\n  },\r\n  getHeight: function() {\r\n    return this._inner.height;\r\n  },\r\n  toString: function() {\r\n    return this._inner.toString();\r\n  }\r\n};\r\n\r\n\r\n\r\n\r\nmodule.exports = Size;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9TaXplLmpzPzM3MGEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUtBIiwiZmlsZSI6IjI3LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTUuXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAcGFyYW0ge051bWJlcn0gd2lkdGhcclxuICogQHBhcmFtIHtOdW1iZXJ9IGhlaWdodFxyXG4gKiAqL1xyXG5mdW5jdGlvbiBTaXplKHdpZHRoLCBoZWlnaHQsIGlubmVyKSB7XHJcbiAgaWYoaW5uZXIpIHtcclxuICAgIHRoaXMuX2lubmVyID0gaW5uZXI7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRoaXMuX2lubmVyID0gbmV3IEJNYXAuU2l6ZSgpO1xyXG4gIH1cclxuXHJcbiAgdGhpcy5fdHlwZSA9ICdTaXplJztcclxuICByZXR1cm4gdGhpcztcclxufVxyXG5cclxuU2l6ZS5wcm90b3R5cGUgPSB7XHJcbiAgZ2V0V2lkdGg6IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lubmVyLndpZHRoO1xyXG4gIH0sXHJcbiAgZ2V0SGVpZ2h0OiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbm5lci5oZWlnaHQ7XHJcbiAgfSxcclxuICB0b1N0cmluZzogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5uZXIudG9TdHJpbmcoKTtcclxuICB9XHJcbn07XHJcblxyXG5cclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFNpemU7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2JtYXAvU2l6ZS5qc1xuLy8gbW9kdWxlIGlkID0gMjdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 28 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/13.\r\n * @constructor of Map\r\n * @return our map object\r\n */\r\n\r\nvar config = __webpack_require__(10);\r\nvar Bounds = __webpack_require__(25);\r\nvar onOff = __webpack_require__(29);\r\nvar formatOpts = __webpack_require__(33);\r\n\r\n/**\r\n * @constructor\r\n * @elem {Object}\r\n * @opts {Object}\r\n * */\r\nfunction Map(id,opts) {\r\n  var elem, newOpts;\r\n\r\n  this._type = 'Map';\r\n  elem = document.getElementById(id);\r\n  newOpts = formatOpts.map(opts);\r\n\r\n  this._inner = new BMap.Map(elem, newOpts);\r\n  this._inner._smap = this;\r\n  this._overLayers = {\r\n    MarkerClusterer: [],\r\n    Marker: [],\r\n    InfoWindow: [],\r\n    Polygon: [],\r\n    Polyline: [],\r\n    Circle: []\r\n  };\r\n}\r\n\r\nMap.prototype = {\r\n\r\n  plugin : mapPlugin,\r\n\r\n  clearMap: clearMap,\r\n\r\n  /**\r\n   * @param {LngLat} position\r\n   * */\r\n  panTo: function(position) {\r\n    this._inner.panTo(position._inner);\r\n  },\r\n\r\n\r\n  /**\r\n   * @param {Number} zoom\r\n   * */\r\n  setZoom: function(zoom) {\r\n    this._inner.setZoom(zoom);\r\n  },\r\n\r\n  getBounds: function() {\r\n    return new Bounds('','',this._inner.getBounds());\r\n  },\r\n\r\n  on: onOff.on,\r\n  off: onOff.off\r\n};\r\n\r\nfunction mapPlugin(plugins, fn) {\r\n  if(plugins.length < 1) return;\r\n\r\n  plugins.forEach( function(plugin) {\r\n\r\n    console.log(plugin);\r\n    if(plugin === 'GMap.MarkerClusterer') {\r\n      $.getScript(config.GMap_MarkerClusterer, function() {\r\n        fn();\r\n      });\r\n    }\r\n\r\n  })\r\n}\r\n\r\nfunction clearMap() {\r\n  var overLayers = this._overLayers;\r\n\r\n  for(var type in overLayers) {\r\n\r\n    switch (type) {\r\n      case 'Marker':\r\n      case 'Circle':\r\n      case 'Polygon':\r\n      case 'Polyline':\r\n      case 'InfoWindow':\r\n        if(overLayers[type].length > 0) {\r\n          overLayers[type].forEach( function(item) {\r\n            item._inner.setMap(null);\r\n            item._inner = null;\r\n            item = null;\r\n          });\r\n          overLayers.lenght = 0;\r\n        }\r\n        break;\r\n      case 'MarkerClusterer':\r\n        if(overLayers.MarkerClusterer.length > 0) {\r\n          overLayers.MarkerClusterer.forEach( function(item) {\r\n            item._inner.clearMarkers();\r\n            item._inner = null;\r\n            item = null;\r\n          });\r\n          overLayers.MarkerClusterer.length = 0;\r\n        }\r\n        break;\r\n    }\r\n\r\n  }\r\n}\r\n\r\nmodule.exports = Map;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9NYXAuanM/ZDk5NCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQSxHQUFHOzs7QUFHSDtBQUNBLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBLEdBQUc7QUFDSDs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEiLCJmaWxlIjoiMjguanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBmaXp6IG9uIDIwMTcvMi8xMy5cclxuICogQGNvbnN0cnVjdG9yIG9mIE1hcFxyXG4gKiBAcmV0dXJuIG91ciBtYXAgb2JqZWN0XHJcbiAqL1xyXG5cclxudmFyIGNvbmZpZyA9IHJlcXVpcmUoJy4uL2NvbmZpZycpO1xyXG52YXIgQm91bmRzID0gcmVxdWlyZSgnLi9Cb3VuZHMnKTtcclxudmFyIG9uT2ZmID0gcmVxdWlyZSgnLi9vbk9mZicpO1xyXG52YXIgZm9ybWF0T3B0cyA9IHJlcXVpcmUoJy4vZm9ybWF0T3B0Jyk7XHJcblxyXG4vKipcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBlbGVtIHtPYmplY3R9XHJcbiAqIEBvcHRzIHtPYmplY3R9XHJcbiAqICovXHJcbmZ1bmN0aW9uIE1hcChpZCxvcHRzKSB7XHJcbiAgdmFyIGVsZW0sIG5ld09wdHM7XHJcblxyXG4gIHRoaXMuX3R5cGUgPSAnTWFwJztcclxuICBlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gIG5ld09wdHMgPSBmb3JtYXRPcHRzLm1hcChvcHRzKTtcclxuXHJcbiAgdGhpcy5faW5uZXIgPSBuZXcgQk1hcC5NYXAoZWxlbSwgbmV3T3B0cyk7XHJcbiAgdGhpcy5faW5uZXIuX3NtYXAgPSB0aGlzO1xyXG4gIHRoaXMuX292ZXJMYXllcnMgPSB7XHJcbiAgICBNYXJrZXJDbHVzdGVyZXI6IFtdLFxyXG4gICAgTWFya2VyOiBbXSxcclxuICAgIEluZm9XaW5kb3c6IFtdLFxyXG4gICAgUG9seWdvbjogW10sXHJcbiAgICBQb2x5bGluZTogW10sXHJcbiAgICBDaXJjbGU6IFtdXHJcbiAgfTtcclxufVxyXG5cclxuTWFwLnByb3RvdHlwZSA9IHtcclxuXHJcbiAgcGx1Z2luIDogbWFwUGx1Z2luLFxyXG5cclxuICBjbGVhck1hcDogY2xlYXJNYXAsXHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7TG5nTGF0fSBwb3NpdGlvblxyXG4gICAqICovXHJcbiAgcGFuVG86IGZ1bmN0aW9uKHBvc2l0aW9uKSB7XHJcbiAgICB0aGlzLl9pbm5lci5wYW5Ubyhwb3NpdGlvbi5faW5uZXIpO1xyXG4gIH0sXHJcblxyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge051bWJlcn0gem9vbVxyXG4gICAqICovXHJcbiAgc2V0Wm9vbTogZnVuY3Rpb24oem9vbSkge1xyXG4gICAgdGhpcy5faW5uZXIuc2V0Wm9vbSh6b29tKTtcclxuICB9LFxyXG5cclxuICBnZXRCb3VuZHM6IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIG5ldyBCb3VuZHMoJycsJycsdGhpcy5faW5uZXIuZ2V0Qm91bmRzKCkpO1xyXG4gIH0sXHJcblxyXG4gIG9uOiBvbk9mZi5vbixcclxuICBvZmY6IG9uT2ZmLm9mZlxyXG59O1xyXG5cclxuZnVuY3Rpb24gbWFwUGx1Z2luKHBsdWdpbnMsIGZuKSB7XHJcbiAgaWYocGx1Z2lucy5sZW5ndGggPCAxKSByZXR1cm47XHJcblxyXG4gIHBsdWdpbnMuZm9yRWFjaCggZnVuY3Rpb24ocGx1Z2luKSB7XHJcblxyXG4gICAgY29uc29sZS5sb2cocGx1Z2luKTtcclxuICAgIGlmKHBsdWdpbiA9PT0gJ0dNYXAuTWFya2VyQ2x1c3RlcmVyJykge1xyXG4gICAgICAkLmdldFNjcmlwdChjb25maWcuR01hcF9NYXJrZXJDbHVzdGVyZXIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGZuKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiBjbGVhck1hcCgpIHtcclxuICB2YXIgb3ZlckxheWVycyA9IHRoaXMuX292ZXJMYXllcnM7XHJcblxyXG4gIGZvcih2YXIgdHlwZSBpbiBvdmVyTGF5ZXJzKSB7XHJcblxyXG4gICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgIGNhc2UgJ01hcmtlcic6XHJcbiAgICAgIGNhc2UgJ0NpcmNsZSc6XHJcbiAgICAgIGNhc2UgJ1BvbHlnb24nOlxyXG4gICAgICBjYXNlICdQb2x5bGluZSc6XHJcbiAgICAgIGNhc2UgJ0luZm9XaW5kb3cnOlxyXG4gICAgICAgIGlmKG92ZXJMYXllcnNbdHlwZV0ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgb3ZlckxheWVyc1t0eXBlXS5mb3JFYWNoKCBmdW5jdGlvbihpdGVtKSB7XHJcbiAgICAgICAgICAgIGl0ZW0uX2lubmVyLnNldE1hcChudWxsKTtcclxuICAgICAgICAgICAgaXRlbS5faW5uZXIgPSBudWxsO1xyXG4gICAgICAgICAgICBpdGVtID0gbnVsbDtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgb3ZlckxheWVycy5sZW5naHQgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnTWFya2VyQ2x1c3RlcmVyJzpcclxuICAgICAgICBpZihvdmVyTGF5ZXJzLk1hcmtlckNsdXN0ZXJlci5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBvdmVyTGF5ZXJzLk1hcmtlckNsdXN0ZXJlci5mb3JFYWNoKCBmdW5jdGlvbihpdGVtKSB7XHJcbiAgICAgICAgICAgIGl0ZW0uX2lubmVyLmNsZWFyTWFya2VycygpO1xyXG4gICAgICAgICAgICBpdGVtLl9pbm5lciA9IG51bGw7XHJcbiAgICAgICAgICAgIGl0ZW0gPSBudWxsO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBvdmVyTGF5ZXJzLk1hcmtlckNsdXN0ZXJlci5sZW5ndGggPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuXHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IE1hcDtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9NYXAuanNcbi8vIG1vZHVsZSBpZCA9IDI4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 29 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/14.\r\n */\r\n\r\nvar event = __webpack_require__(30);\r\n\r\nvar onOff = {};\r\n\r\n\r\n/**\r\n *\r\n * @param {String} eventName\r\n * @param {Function} handler\r\n * @param {Object} context\r\n *\r\n *\r\n * */\r\nonOff.on = function(eventName, handler, context) {\r\n  var listener, eventListener;\r\n\r\n  listener = event.addListener(this, eventName, handler, context);\r\n\r\n  eventListener = {\r\n    eventName: eventName,\r\n    handler: handler,\r\n    context: context,\r\n    listener: listener\r\n  };\r\n\r\n  if(!this._eventListener) this._eventListener = [];\r\n\r\n  this._eventListener.push(eventListener);\r\n  return listener;\r\n};\r\n\r\nonOff.off = function(eventName, handler, context) {\r\n  if(!this._eventListener) return;\r\n\r\n  var filterResult = this._eventListener.filter( function(item, index) {\r\n    if(eventName === item.eventName) return true;\r\n    return false;\r\n  });\r\n\r\n  if(filterResult && filterResult.length > 0) {\r\n    filterResult.forEach( function(item, index) {\r\n      if( item.handler === handler &&\r\n        item.context === context ) {\r\n        console.log('here am I');\r\n        event.removeListener(item.listener);\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n};\r\n\r\nmodule.exports = onOff;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9vbk9mZi5qcz80Y2JlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7O0FBR0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLFNBQVM7QUFDcEIsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7OztBQUdBOztBQUVBIiwiZmlsZSI6IjI5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTQuXHJcbiAqL1xyXG5cclxudmFyIGV2ZW50ID0gcmVxdWlyZSgnLi9ldmVudCcpO1xyXG5cclxudmFyIG9uT2ZmID0ge307XHJcblxyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWVcclxuICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxyXG4gKiBAcGFyYW0ge09iamVjdH0gY29udGV4dFxyXG4gKlxyXG4gKlxyXG4gKiAqL1xyXG5vbk9mZi5vbiA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgaGFuZGxlciwgY29udGV4dCkge1xyXG4gIHZhciBsaXN0ZW5lciwgZXZlbnRMaXN0ZW5lcjtcclxuXHJcbiAgbGlzdGVuZXIgPSBldmVudC5hZGRMaXN0ZW5lcih0aGlzLCBldmVudE5hbWUsIGhhbmRsZXIsIGNvbnRleHQpO1xyXG5cclxuICBldmVudExpc3RlbmVyID0ge1xyXG4gICAgZXZlbnROYW1lOiBldmVudE5hbWUsXHJcbiAgICBoYW5kbGVyOiBoYW5kbGVyLFxyXG4gICAgY29udGV4dDogY29udGV4dCxcclxuICAgIGxpc3RlbmVyOiBsaXN0ZW5lclxyXG4gIH07XHJcblxyXG4gIGlmKCF0aGlzLl9ldmVudExpc3RlbmVyKSB0aGlzLl9ldmVudExpc3RlbmVyID0gW107XHJcblxyXG4gIHRoaXMuX2V2ZW50TGlzdGVuZXIucHVzaChldmVudExpc3RlbmVyKTtcclxuICByZXR1cm4gbGlzdGVuZXI7XHJcbn07XHJcblxyXG5vbk9mZi5vZmYgPSBmdW5jdGlvbihldmVudE5hbWUsIGhhbmRsZXIsIGNvbnRleHQpIHtcclxuICBpZighdGhpcy5fZXZlbnRMaXN0ZW5lcikgcmV0dXJuO1xyXG5cclxuICB2YXIgZmlsdGVyUmVzdWx0ID0gdGhpcy5fZXZlbnRMaXN0ZW5lci5maWx0ZXIoIGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7XHJcbiAgICBpZihldmVudE5hbWUgPT09IGl0ZW0uZXZlbnROYW1lKSByZXR1cm4gdHJ1ZTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9KTtcclxuXHJcbiAgaWYoZmlsdGVyUmVzdWx0ICYmIGZpbHRlclJlc3VsdC5sZW5ndGggPiAwKSB7XHJcbiAgICBmaWx0ZXJSZXN1bHQuZm9yRWFjaCggZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcclxuICAgICAgaWYoIGl0ZW0uaGFuZGxlciA9PT0gaGFuZGxlciAmJlxyXG4gICAgICAgIGl0ZW0uY29udGV4dCA9PT0gY29udGV4dCApIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnaGVyZSBhbSBJJyk7XHJcbiAgICAgICAgZXZlbnQucmVtb3ZlTGlzdGVuZXIoaXRlbS5saXN0ZW5lcik7XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IG9uT2ZmO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzL21hcC9ibWFwL29uT2ZmLmpzXG4vLyBtb2R1bGUgaWQgPSAyOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 30 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/14.\r\n */\r\n\r\nvar SMapEvent = __webpack_require__(31);\r\n\r\nvar event = {};\r\n\r\nevent.map = __webpack_require__(32);\r\n\r\nevent.getSMapEvent = function(e) {\r\n  return new SMapEvent(e);\r\n};\r\n\r\nevent.addDomListener = function(instance, eventName, handler, context) {\r\n  var listener = {};\r\n\r\n  if(context) {\r\n    listener = google.maps.event.addDomListener(instance, eventName, function(e) {\r\n      handler.call(context, e);\r\n    });\r\n  } else {\r\n    listener = google.maps.event.addDomListener(instance, eventName, handler);\r\n  }\r\n  return listener;\r\n};\r\n\r\nevent.addListener = function(instance, eventName, handler, context) {\r\n  var listener = {}, relevantEvent, realInstance;\r\n\r\n  realInstance = instance._inner;\r\n  relevantEvent = event.getRelevantEvent(instance, eventName);\r\n\r\n  if(context) {\r\n    listener = google.maps.event.addListener(realInstance, relevantEvent, function(e) {\r\n      handler.call(context, event.getSMapEvent(e));\r\n    });\r\n  } else {\r\n    listener = google.maps.event.addListener(realInstance, relevantEvent, function(e) {\r\n      handler(event.getSMapEvent(e));\r\n    });\r\n  }\r\n  return listener;\r\n};\r\n\r\nevent.addListenerOnce = function(instance, eventName, handler, context) {\r\n  var listener = {}, relevantEvent, realInstance;\r\n\r\n  realInstance = instance._inner;\r\n\r\n  relevantEvent = event.getRelevantEvent(instance, eventName);\r\n\r\n  if(context) {\r\n    listener = google.maps.event.addListenerOnce(realInstance, relevantEvent, function (e) {\r\n      handler.call(context, event.getSMapEvent(e));\r\n    });\r\n  } else {\r\n    listener = google.maps.event.addListenerOnce(realInstance, relevantEvent, function(e) {\r\n      handler(event.getSMapEvent(e));\r\n    });\r\n  }\r\n  return listener;\r\n};\r\n\r\nevent.removeListener = function(listener) {\r\n  google.maps.event.removeListener(listener);\r\n};\r\n\r\nevent.triggerListener = function(instance, eventName, extArgs) {\r\n  var relevantEvent = event.getRelevantEvent(instance, eventName);\r\n\r\n  google.maps.event.trigger(instance, relevantEvent, extArgs);\r\n};\r\n\r\nevent.getRelevantEvent = function(instance, eventName) {\r\n  if(instance._type in event.map) {\r\n    if(eventName in event.map[instance._type]) {\r\n      return event.map[instance._type][eventName];\r\n    } else {\r\n      return eventName;\r\n    }\r\n  } else {\r\n    return eventName;\r\n  }\r\n};\r\n\r\nevent.getSMapEventObject = function(e) {\r\n\r\n};\r\n\r\nmodule.exports = event;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9ldmVudC5qcz8yY2ZhIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsbUJBQW1COztBQUVuQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtQkFBbUI7O0FBRW5COztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSIsImZpbGUiOiIzMC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGZpenogb24gMjAxNy8yLzE0LlxyXG4gKi9cclxuXHJcbnZhciBTTWFwRXZlbnQgPSByZXF1aXJlKCcuL1NNYXBFdmVudCcpO1xyXG5cclxudmFyIGV2ZW50ID0ge307XHJcblxyXG5ldmVudC5tYXAgPSByZXF1aXJlKCcuL2V2ZW50TWFwJyk7XHJcblxyXG5ldmVudC5nZXRTTWFwRXZlbnQgPSBmdW5jdGlvbihlKSB7XHJcbiAgcmV0dXJuIG5ldyBTTWFwRXZlbnQoZSk7XHJcbn07XHJcblxyXG5ldmVudC5hZGREb21MaXN0ZW5lciA9IGZ1bmN0aW9uKGluc3RhbmNlLCBldmVudE5hbWUsIGhhbmRsZXIsIGNvbnRleHQpIHtcclxuICB2YXIgbGlzdGVuZXIgPSB7fTtcclxuXHJcbiAgaWYoY29udGV4dCkge1xyXG4gICAgbGlzdGVuZXIgPSBnb29nbGUubWFwcy5ldmVudC5hZGREb21MaXN0ZW5lcihpbnN0YW5jZSwgZXZlbnROYW1lLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgIGhhbmRsZXIuY2FsbChjb250ZXh0LCBlKTtcclxuICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBsaXN0ZW5lciA9IGdvb2dsZS5tYXBzLmV2ZW50LmFkZERvbUxpc3RlbmVyKGluc3RhbmNlLCBldmVudE5hbWUsIGhhbmRsZXIpO1xyXG4gIH1cclxuICByZXR1cm4gbGlzdGVuZXI7XHJcbn07XHJcblxyXG5ldmVudC5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uKGluc3RhbmNlLCBldmVudE5hbWUsIGhhbmRsZXIsIGNvbnRleHQpIHtcclxuICB2YXIgbGlzdGVuZXIgPSB7fSwgcmVsZXZhbnRFdmVudCwgcmVhbEluc3RhbmNlO1xyXG5cclxuICByZWFsSW5zdGFuY2UgPSBpbnN0YW5jZS5faW5uZXI7XHJcbiAgcmVsZXZhbnRFdmVudCA9IGV2ZW50LmdldFJlbGV2YW50RXZlbnQoaW5zdGFuY2UsIGV2ZW50TmFtZSk7XHJcblxyXG4gIGlmKGNvbnRleHQpIHtcclxuICAgIGxpc3RlbmVyID0gZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIocmVhbEluc3RhbmNlLCByZWxldmFudEV2ZW50LCBmdW5jdGlvbihlKSB7XHJcbiAgICAgIGhhbmRsZXIuY2FsbChjb250ZXh0LCBldmVudC5nZXRTTWFwRXZlbnQoZSkpO1xyXG4gICAgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGxpc3RlbmVyID0gZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIocmVhbEluc3RhbmNlLCByZWxldmFudEV2ZW50LCBmdW5jdGlvbihlKSB7XHJcbiAgICAgIGhhbmRsZXIoZXZlbnQuZ2V0U01hcEV2ZW50KGUpKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICByZXR1cm4gbGlzdGVuZXI7XHJcbn07XHJcblxyXG5ldmVudC5hZGRMaXN0ZW5lck9uY2UgPSBmdW5jdGlvbihpbnN0YW5jZSwgZXZlbnROYW1lLCBoYW5kbGVyLCBjb250ZXh0KSB7XHJcbiAgdmFyIGxpc3RlbmVyID0ge30sIHJlbGV2YW50RXZlbnQsIHJlYWxJbnN0YW5jZTtcclxuXHJcbiAgcmVhbEluc3RhbmNlID0gaW5zdGFuY2UuX2lubmVyO1xyXG5cclxuICByZWxldmFudEV2ZW50ID0gZXZlbnQuZ2V0UmVsZXZhbnRFdmVudChpbnN0YW5jZSwgZXZlbnROYW1lKTtcclxuXHJcbiAgaWYoY29udGV4dCkge1xyXG4gICAgbGlzdGVuZXIgPSBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lck9uY2UocmVhbEluc3RhbmNlLCByZWxldmFudEV2ZW50LCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICBoYW5kbGVyLmNhbGwoY29udGV4dCwgZXZlbnQuZ2V0U01hcEV2ZW50KGUpKTtcclxuICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBsaXN0ZW5lciA9IGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyT25jZShyZWFsSW5zdGFuY2UsIHJlbGV2YW50RXZlbnQsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgaGFuZGxlcihldmVudC5nZXRTTWFwRXZlbnQoZSkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIHJldHVybiBsaXN0ZW5lcjtcclxufTtcclxuXHJcbmV2ZW50LnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24obGlzdGVuZXIpIHtcclxuICBnb29nbGUubWFwcy5ldmVudC5yZW1vdmVMaXN0ZW5lcihsaXN0ZW5lcik7XHJcbn07XHJcblxyXG5ldmVudC50cmlnZ2VyTGlzdGVuZXIgPSBmdW5jdGlvbihpbnN0YW5jZSwgZXZlbnROYW1lLCBleHRBcmdzKSB7XHJcbiAgdmFyIHJlbGV2YW50RXZlbnQgPSBldmVudC5nZXRSZWxldmFudEV2ZW50KGluc3RhbmNlLCBldmVudE5hbWUpO1xyXG5cclxuICBnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKGluc3RhbmNlLCByZWxldmFudEV2ZW50LCBleHRBcmdzKTtcclxufTtcclxuXHJcbmV2ZW50LmdldFJlbGV2YW50RXZlbnQgPSBmdW5jdGlvbihpbnN0YW5jZSwgZXZlbnROYW1lKSB7XHJcbiAgaWYoaW5zdGFuY2UuX3R5cGUgaW4gZXZlbnQubWFwKSB7XHJcbiAgICBpZihldmVudE5hbWUgaW4gZXZlbnQubWFwW2luc3RhbmNlLl90eXBlXSkge1xyXG4gICAgICByZXR1cm4gZXZlbnQubWFwW2luc3RhbmNlLl90eXBlXVtldmVudE5hbWVdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGV2ZW50TmFtZTtcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIGV2ZW50TmFtZTtcclxuICB9XHJcbn07XHJcblxyXG5ldmVudC5nZXRTTWFwRXZlbnRPYmplY3QgPSBmdW5jdGlvbihlKSB7XHJcblxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBldmVudDtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9ldmVudC5qc1xuLy8gbW9kdWxlIGlkID0gMzBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 31 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/20.\r\n * @constructor for google map event Object.\r\n * Wrap event and return our new event object just like gaode AMap event.\r\n */\r\n\r\nvar LngLat = __webpack_require__(24);\r\n\r\n/**\r\n * 包装Google的事件触发时的event对象\r\n *\r\n * @constructor\r\n * @param {Object} e event object\r\n * */\r\nfunction SMapEvent(e) {\r\n  this._inner = e;\r\n  this._type = 'Event';\r\n\r\n  this.lnglat = new LngLat(e.latLng.lng(), e.latLng.lat());\r\n  this.lnglat.I = e.latLng.lng();\r\n  this.lnglat.L = e.latLng.lat();\r\n\r\n  this.pixel = {\r\n    x: e.pixel.x,\r\n    y: e.pixel.y\r\n  };\r\n}\r\n\r\nmodule.exports = SMapEvent;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9TTWFwRXZlbnQuanM/ZTFmNiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6IjMxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMjAuXHJcbiAqIEBjb25zdHJ1Y3RvciBmb3IgZ29vZ2xlIG1hcCBldmVudCBPYmplY3QuXHJcbiAqIFdyYXAgZXZlbnQgYW5kIHJldHVybiBvdXIgbmV3IGV2ZW50IG9iamVjdCBqdXN0IGxpa2UgZ2FvZGUgQU1hcCBldmVudC5cclxuICovXHJcblxyXG52YXIgTG5nTGF0ID0gcmVxdWlyZSgnLi9MbmdMYXQnKTtcclxuXHJcbi8qKlxyXG4gKiDljIXoo4VHb29nbGXnmoTkuovku7bop6blj5Hml7bnmoRldmVudOWvueixoVxyXG4gKlxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQHBhcmFtIHtPYmplY3R9IGUgZXZlbnQgb2JqZWN0XHJcbiAqICovXHJcbmZ1bmN0aW9uIFNNYXBFdmVudChlKSB7XHJcbiAgdGhpcy5faW5uZXIgPSBlO1xyXG4gIHRoaXMuX3R5cGUgPSAnRXZlbnQnO1xyXG5cclxuICB0aGlzLmxuZ2xhdCA9IG5ldyBMbmdMYXQoZS5sYXRMbmcubG5nKCksIGUubGF0TG5nLmxhdCgpKTtcclxuICB0aGlzLmxuZ2xhdC5JID0gZS5sYXRMbmcubG5nKCk7XHJcbiAgdGhpcy5sbmdsYXQuTCA9IGUubGF0TG5nLmxhdCgpO1xyXG5cclxuICB0aGlzLnBpeGVsID0ge1xyXG4gICAgeDogZS5waXhlbC54LFxyXG4gICAgeTogZS5waXhlbC55XHJcbiAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBTTWFwRXZlbnQ7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2JtYXAvU01hcEV2ZW50LmpzXG4vLyBtb2R1bGUgaWQgPSAzMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 32 */
/***/ function(module, exports) {

	eval("/**\r\n * Created by fizz on 2017/2/16.\r\n */\r\n\r\nmodule.exports = {\r\n  Marker: {\r\n    click: 'click',\r\n\r\n  },\r\n\r\n  InfoWindow: {\r\n\r\n  }\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9ldmVudE1hcC5qcz9mNzM4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsR0FBRzs7QUFFSDs7QUFFQTtBQUNBIiwiZmlsZSI6IjMyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTYuXHJcbiAqL1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgTWFya2VyOiB7XHJcbiAgICBjbGljazogJ2NsaWNrJyxcclxuXHJcbiAgfSxcclxuXHJcbiAgSW5mb1dpbmRvdzoge1xyXG5cclxuICB9XHJcbn07XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2JtYXAvZXZlbnRNYXAuanNcbi8vIG1vZHVsZSBpZCA9IDMyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 33 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/14.\r\n */\r\n\r\nvar LngLat = __webpack_require__(24);\r\n\r\nmodule.exports = {\r\n\r\n  map: formatOptsUni,\r\n\r\n  infoWindow: formatOptsUni,\r\n\r\n  marker: formatOptsUni,\r\n\r\n  polyline: formatOptsUni,\r\n\r\n  polygon: formatOptsUni,\r\n\r\n  circle: formatOptsUni,\r\n\r\n  markerClusterer: formatMarkerClusterer,\r\n\r\n  path: canvertPath\r\n};\r\n\r\nfunction formatOptsUni(opts) {\r\n\r\n  if('position' in opts) {\r\n    opts.position = (new LngLat(opts.position))._inner;\r\n  }\r\n\r\n  if(opts.path) {\r\n    opts.path = transfromPathToPaths(opts.path);\r\n  }\r\n\r\n  if(opts.center) {\r\n    opts.center = (new LngLat(opts.center))._inner;\r\n  }\r\n\r\n  if(opts.map) {\r\n    opts.map = opts.map._inner;\r\n  }\r\n\r\n  return opts;\r\n}\r\n\r\nfunction transfromPathToPaths(path) {\r\n  var paths = [];\r\n  path.forEach( function(item, index) {\r\n    paths.push(arrCreateLngLat(item));\r\n  });\r\n  return paths;\r\n}\r\n\r\nfunction arrCreateLngLat(arr) {\r\n  return new BMap.Point( parseFloat(arr[0]), parseFloat(arr[1]) );\r\n}\r\n\r\n\r\n/**************************************************\r\n * markerClusterer\r\n * ***********************************************/\r\nfunction formatMarkerClusterer(map, markers, opts) {\r\n  var newOpts = {};\r\n\r\n  if(map._inner) {\r\n    newOpts.map = map._inner;\r\n  } else {\r\n    newOpts.map = map;\r\n  }\r\n\r\n  newOpts.markers = markers.map( function(item) {\r\n    return item._inner;\r\n  });\r\n\r\n  newOpts.opts = formatMarkerClustererOpts(opts);\r\n\r\n  return newOpts;\r\n}\r\n\r\n/**\r\n * @param {Object} opts\r\n * @diff : minClusterSize : minimumClusterSize\r\n * */\r\nfunction formatMarkerClustererOpts(opts) {\r\n  if(opts.minClusterSize) {\r\n    opts.minimumClusterSize = opts.minClusterSize;\r\n  }\r\n\r\n  if(opts.styles) {\r\n\r\n    if(opts.styles) {\r\n      var styles = opts.styles;\r\n      if(styles.size) {\r\n        styles.width = styles.getWidth();\r\n        styles.height = styles.getHeight();\r\n      }\r\n    }\r\n\r\n  }\r\n}\r\n\r\nfunction canvertPath(path) {\r\n  // TODO: 如何处理这个path还未定\r\n  return path;\r\n}\r\n\r\n\r\n// var flightPlanCoordinates = [\r\n//   {lat: 37.772, lng: -122.214},\r\n//   {lat: 21.291, lng: -157.821},\r\n//   {lat: -18.142, lng: 178.431},\r\n//   {lat: -27.467, lng: 153.027}\r\n// ];\r\n\r\n// var lineArr = [\r\n//   [116.368904, 39.913423],\r\n//   [116.382122, 39.901176],\r\n//   [116.387271, 39.912501],\r\n//   [116.398258, 39.904600]\r\n// ];\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9mb3JtYXRPcHQuanM/NjZhOSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQSxNQUFNLDJCQUEyQjtBQUNqQyxNQUFNLDJCQUEyQjtBQUNqQyxNQUFNLDJCQUEyQjtBQUNqQyxNQUFNO0FBQ047O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IjMzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTQuXHJcbiAqL1xyXG5cclxudmFyIExuZ0xhdCA9IHJlcXVpcmUoJy4vTG5nTGF0Jyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuXHJcbiAgbWFwOiBmb3JtYXRPcHRzVW5pLFxyXG5cclxuICBpbmZvV2luZG93OiBmb3JtYXRPcHRzVW5pLFxyXG5cclxuICBtYXJrZXI6IGZvcm1hdE9wdHNVbmksXHJcblxyXG4gIHBvbHlsaW5lOiBmb3JtYXRPcHRzVW5pLFxyXG5cclxuICBwb2x5Z29uOiBmb3JtYXRPcHRzVW5pLFxyXG5cclxuICBjaXJjbGU6IGZvcm1hdE9wdHNVbmksXHJcblxyXG4gIG1hcmtlckNsdXN0ZXJlcjogZm9ybWF0TWFya2VyQ2x1c3RlcmVyLFxyXG5cclxuICBwYXRoOiBjYW52ZXJ0UGF0aFxyXG59O1xyXG5cclxuZnVuY3Rpb24gZm9ybWF0T3B0c1VuaShvcHRzKSB7XHJcblxyXG4gIGlmKCdwb3NpdGlvbicgaW4gb3B0cykge1xyXG4gICAgb3B0cy5wb3NpdGlvbiA9IChuZXcgTG5nTGF0KG9wdHMucG9zaXRpb24pKS5faW5uZXI7XHJcbiAgfVxyXG5cclxuICBpZihvcHRzLnBhdGgpIHtcclxuICAgIG9wdHMucGF0aCA9IHRyYW5zZnJvbVBhdGhUb1BhdGhzKG9wdHMucGF0aCk7XHJcbiAgfVxyXG5cclxuICBpZihvcHRzLmNlbnRlcikge1xyXG4gICAgb3B0cy5jZW50ZXIgPSAobmV3IExuZ0xhdChvcHRzLmNlbnRlcikpLl9pbm5lcjtcclxuICB9XHJcblxyXG4gIGlmKG9wdHMubWFwKSB7XHJcbiAgICBvcHRzLm1hcCA9IG9wdHMubWFwLl9pbm5lcjtcclxuICB9XHJcblxyXG4gIHJldHVybiBvcHRzO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0cmFuc2Zyb21QYXRoVG9QYXRocyhwYXRoKSB7XHJcbiAgdmFyIHBhdGhzID0gW107XHJcbiAgcGF0aC5mb3JFYWNoKCBmdW5jdGlvbihpdGVtLCBpbmRleCkge1xyXG4gICAgcGF0aHMucHVzaChhcnJDcmVhdGVMbmdMYXQoaXRlbSkpO1xyXG4gIH0pO1xyXG4gIHJldHVybiBwYXRocztcclxufVxyXG5cclxuZnVuY3Rpb24gYXJyQ3JlYXRlTG5nTGF0KGFycikge1xyXG4gIHJldHVybiBuZXcgQk1hcC5Qb2ludCggcGFyc2VGbG9hdChhcnJbMF0pLCBwYXJzZUZsb2F0KGFyclsxXSkgKTtcclxufVxyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKiBtYXJrZXJDbHVzdGVyZXJcclxuICogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbmZ1bmN0aW9uIGZvcm1hdE1hcmtlckNsdXN0ZXJlcihtYXAsIG1hcmtlcnMsIG9wdHMpIHtcclxuICB2YXIgbmV3T3B0cyA9IHt9O1xyXG5cclxuICBpZihtYXAuX2lubmVyKSB7XHJcbiAgICBuZXdPcHRzLm1hcCA9IG1hcC5faW5uZXI7XHJcbiAgfSBlbHNlIHtcclxuICAgIG5ld09wdHMubWFwID0gbWFwO1xyXG4gIH1cclxuXHJcbiAgbmV3T3B0cy5tYXJrZXJzID0gbWFya2Vycy5tYXAoIGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgIHJldHVybiBpdGVtLl9pbm5lcjtcclxuICB9KTtcclxuXHJcbiAgbmV3T3B0cy5vcHRzID0gZm9ybWF0TWFya2VyQ2x1c3RlcmVyT3B0cyhvcHRzKTtcclxuXHJcbiAgcmV0dXJuIG5ld09wdHM7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0c1xyXG4gKiBAZGlmZiA6IG1pbkNsdXN0ZXJTaXplIDogbWluaW11bUNsdXN0ZXJTaXplXHJcbiAqICovXHJcbmZ1bmN0aW9uIGZvcm1hdE1hcmtlckNsdXN0ZXJlck9wdHMob3B0cykge1xyXG4gIGlmKG9wdHMubWluQ2x1c3RlclNpemUpIHtcclxuICAgIG9wdHMubWluaW11bUNsdXN0ZXJTaXplID0gb3B0cy5taW5DbHVzdGVyU2l6ZTtcclxuICB9XHJcblxyXG4gIGlmKG9wdHMuc3R5bGVzKSB7XHJcblxyXG4gICAgaWYob3B0cy5zdHlsZXMpIHtcclxuICAgICAgdmFyIHN0eWxlcyA9IG9wdHMuc3R5bGVzO1xyXG4gICAgICBpZihzdHlsZXMuc2l6ZSkge1xyXG4gICAgICAgIHN0eWxlcy53aWR0aCA9IHN0eWxlcy5nZXRXaWR0aCgpO1xyXG4gICAgICAgIHN0eWxlcy5oZWlnaHQgPSBzdHlsZXMuZ2V0SGVpZ2h0KCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjYW52ZXJ0UGF0aChwYXRoKSB7XHJcbiAgLy8gVE9ETzog5aaC5L2V5aSE55CG6L+Z5LiqcGF0aOi/mOacquWumlxyXG4gIHJldHVybiBwYXRoO1xyXG59XHJcblxyXG5cclxuLy8gdmFyIGZsaWdodFBsYW5Db29yZGluYXRlcyA9IFtcclxuLy8gICB7bGF0OiAzNy43NzIsIGxuZzogLTEyMi4yMTR9LFxyXG4vLyAgIHtsYXQ6IDIxLjI5MSwgbG5nOiAtMTU3LjgyMX0sXHJcbi8vICAge2xhdDogLTE4LjE0MiwgbG5nOiAxNzguNDMxfSxcclxuLy8gICB7bGF0OiAtMjcuNDY3LCBsbmc6IDE1My4wMjd9XHJcbi8vIF07XHJcblxyXG4vLyB2YXIgbGluZUFyciA9IFtcclxuLy8gICBbMTE2LjM2ODkwNCwgMzkuOTEzNDIzXSxcclxuLy8gICBbMTE2LjM4MjEyMiwgMzkuOTAxMTc2XSxcclxuLy8gICBbMTE2LjM4NzI3MSwgMzkuOTEyNTAxXSxcclxuLy8gICBbMTE2LjM5ODI1OCwgMzkuOTA0NjAwXVxyXG4vLyBdO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzL21hcC9ibWFwL2Zvcm1hdE9wdC5qc1xuLy8gbW9kdWxlIGlkID0gMzNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 34 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/13.\r\n * @Class Marker\r\n */\r\nvar obc = __webpack_require__(35);\r\nvar onOff = __webpack_require__(29);\r\nvar formatOpts = __webpack_require__(33);\r\n\r\n/**\r\n * Represents a Marker\r\n * @constructor\r\n * @param {Object} opts\r\n * @param {Object} inner\r\n * @return an object, inner is prime google map Marker instance.\r\n * */\r\nfunction Marker(opts, inner) {\r\n\r\n  this._type = 'Marker';\r\n\r\n  if(inner) {\r\n    this._inner = inner;\r\n  } else {\r\n    // 在opts转换之前就要判断添加overlay\r\n    obc.addOverlay(opts, this);\r\n\r\n    var newOpts = formatOpts.marker(opts);\r\n    this._inner = new BMap.Marker(newOpts);\r\n  }\r\n}\r\n\r\nMarker.prototype = {\r\n  setMap: obc.setMap,\r\n  getMap: obc.getMap,\r\n  hide: obc.hide,\r\n  show: obc.show,\r\n  on: onOff.on,\r\n  off: onOff.off\r\n};\r\n\r\nmodule.exports = Marker;\r\n\r\n\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9NYXJrZXIuanM/ZGNiZCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsImZpbGUiOiIzNC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGZpenogb24gMjAxNy8yLzEzLlxyXG4gKiBAQ2xhc3MgTWFya2VyXHJcbiAqL1xyXG52YXIgb2JjID0gcmVxdWlyZSgnLi9vdmVybGF5QmFzZUNsYXNzJyk7XHJcbnZhciBvbk9mZiA9IHJlcXVpcmUoJy4vb25PZmYnKTtcclxudmFyIGZvcm1hdE9wdHMgPSByZXF1aXJlKCcuL2Zvcm1hdE9wdCcpO1xyXG5cclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYSBNYXJrZXJcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBpbm5lclxyXG4gKiBAcmV0dXJuIGFuIG9iamVjdCwgaW5uZXIgaXMgcHJpbWUgZ29vZ2xlIG1hcCBNYXJrZXIgaW5zdGFuY2UuXHJcbiAqICovXHJcbmZ1bmN0aW9uIE1hcmtlcihvcHRzLCBpbm5lcikge1xyXG5cclxuICB0aGlzLl90eXBlID0gJ01hcmtlcic7XHJcblxyXG4gIGlmKGlubmVyKSB7XHJcbiAgICB0aGlzLl9pbm5lciA9IGlubmVyO1xyXG4gIH0gZWxzZSB7XHJcbiAgICAvLyDlnKhvcHRz6L2s5o2i5LmL5YmN5bCx6KaB5Yik5pat5re75Yqgb3ZlcmxheVxyXG4gICAgb2JjLmFkZE92ZXJsYXkob3B0cywgdGhpcyk7XHJcblxyXG4gICAgdmFyIG5ld09wdHMgPSBmb3JtYXRPcHRzLm1hcmtlcihvcHRzKTtcclxuICAgIHRoaXMuX2lubmVyID0gbmV3IEJNYXAuTWFya2VyKG5ld09wdHMpO1xyXG4gIH1cclxufVxyXG5cclxuTWFya2VyLnByb3RvdHlwZSA9IHtcclxuICBzZXRNYXA6IG9iYy5zZXRNYXAsXHJcbiAgZ2V0TWFwOiBvYmMuZ2V0TWFwLFxyXG4gIGhpZGU6IG9iYy5oaWRlLFxyXG4gIHNob3c6IG9iYy5zaG93LFxyXG4gIG9uOiBvbk9mZi5vbixcclxuICBvZmY6IG9uT2ZmLm9mZlxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBNYXJrZXI7XHJcblxyXG5cclxuXHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2JtYXAvTWFya2VyLmpzXG4vLyBtb2R1bGUgaWQgPSAzNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 35 */
/***/ function(module, exports) {

	eval("/**\r\n * Created by fizz on 2017/2/17.\r\n */\r\n\r\nmodule.exports = {\r\n  setMap: function(map) {\r\n    if(map !== null) {\r\n      this._inner._smap = map;\r\n      map._overLayers[this._type].push(this);\r\n      this._inner.setMap(map._inner);\r\n    } else {\r\n      this._inner.setMap(null);\r\n    }\r\n  },\r\n\r\n  getMap: function() {\r\n    return this._inner._smap;\r\n  },\r\n\r\n  hide: function() {\r\n    this._inner.setVisible(false);\r\n  },\r\n\r\n  show: function() {\r\n    this._inner.setVisible(true);\r\n  },\r\n\r\n  addOverlay: function(opts, self) {\r\n    if('map' in opts) {\r\n      opts.map._overLayers[self._type].push(self);\r\n    }\r\n  }\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9vdmVybGF5QmFzZUNsYXNzLmpzP2I3ZWYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiMzUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBmaXp6IG9uIDIwMTcvMi8xNy5cclxuICovXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICBzZXRNYXA6IGZ1bmN0aW9uKG1hcCkge1xyXG4gICAgaWYobWFwICE9PSBudWxsKSB7XHJcbiAgICAgIHRoaXMuX2lubmVyLl9zbWFwID0gbWFwO1xyXG4gICAgICBtYXAuX292ZXJMYXllcnNbdGhpcy5fdHlwZV0ucHVzaCh0aGlzKTtcclxuICAgICAgdGhpcy5faW5uZXIuc2V0TWFwKG1hcC5faW5uZXIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faW5uZXIuc2V0TWFwKG51bGwpO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIGdldE1hcDogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5uZXIuX3NtYXA7XHJcbiAgfSxcclxuXHJcbiAgaGlkZTogZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLl9pbm5lci5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICB9LFxyXG5cclxuICBzaG93OiBmdW5jdGlvbigpIHtcclxuICAgIHRoaXMuX2lubmVyLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgfSxcclxuXHJcbiAgYWRkT3ZlcmxheTogZnVuY3Rpb24ob3B0cywgc2VsZikge1xyXG4gICAgaWYoJ21hcCcgaW4gb3B0cykge1xyXG4gICAgICBvcHRzLm1hcC5fb3ZlckxheWVyc1tzZWxmLl90eXBlXS5wdXNoKHNlbGYpO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9vdmVybGF5QmFzZUNsYXNzLmpzXG4vLyBtb2R1bGUgaWQgPSAzNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 36 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/14.\r\n * @constructor InfoWindow\r\n *\r\n * 高德有 change 事件，百度没有\r\n */\r\nvar onOff = __webpack_require__(29);\r\nvar formatOpts = __webpack_require__(33);\r\nvar obc = __webpack_require__(35);\r\nvar LngLat = __webpack_require__(24);\r\n\r\n/**\r\n * @constructor\r\n * @opts {Object} opts\r\n * */\r\nfunction InfoWindow(opts) {\r\n  this._type = 'InfoWindow';\r\n  obc.addOverlay(opts, this);\r\n\r\n  var newOpts = formatOpts.infoWindow(opts);\r\n  this._inner = new BMap.InfoWindow(newOpts.content, newOpts);\r\n}\r\n\r\nInfoWindow.prototype = {\r\n  /**\r\n   * @function open a infoWindow in the position\r\n   * @map {Map} map required\r\n   * @pos {LngLat} position lngLat\r\n   * */\r\n  open: function(map, pos) {\r\n    if(pos) {\r\n      this._inner.setPosition(pos);\r\n    }\r\n    this._inner.open(map._inner);\r\n    this._inner._smap = map;\r\n    map._overLayers.InfoWindow.push(this);\r\n    this._isOpen = true;\r\n  },\r\n\r\n  close: function() {\r\n    this._inner.close();\r\n    this._isOpen = false;\r\n    var infoWindows = this._inner._smap._overLayers.InfoWindow;\r\n    infoWindows.filter( function(item, index) {\r\n      if(item == this) {\r\n        infoWindows.splice(index, 1);\r\n      }\r\n    });\r\n  },\r\n\r\n  getIsOpen: function() {\r\n    return this._isOpen;\r\n  },\r\n\r\n  /**\r\n   * @function setContent\r\n   * @content {String|htmlDOM} content\r\n   * */\r\n  setContent: function(content) {\r\n    this._inner.setContent(content);\r\n  },\r\n\r\n  getContent: function() {\r\n    return this._inner.getContent();\r\n  },\r\n\r\n  // TODO: 百度没有setPosition\r\n  // setPosition: function(lngLat) {\r\n  //   this._inner.setPosition(lngLat);\r\n  // },\r\n\r\n  getPosition: function() {\r\n    return new LngLat('', '', this._inner.getPosition());\r\n  },\r\n\r\n  // todo: google 不支持\r\n  setSize: function(size) {\r\n\r\n  },\r\n\r\n  // todo: google 不支持\r\n  getSize: function() {\r\n\r\n  },\r\n\r\n  on: onOff.on,\r\n  off: onOff.off\r\n};\r\n\r\n\r\n\r\nmodule.exports = InfoWindow;\r\n\r\n\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9JbmZvV2luZG93LmpzP2E2NGYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFVBQVUsT0FBTztBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxJQUFJO0FBQ2YsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxlQUFlLGVBQWU7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxNQUFNOztBQUVOO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUEsR0FBRzs7QUFFSDtBQUNBOztBQUVBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOzs7O0FBSUEiLCJmaWxlIjoiMzYuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBmaXp6IG9uIDIwMTcvMi8xNC5cclxuICogQGNvbnN0cnVjdG9yIEluZm9XaW5kb3dcclxuICpcclxuICog6auY5b635pyJIGNoYW5nZSDkuovku7bvvIznmb7luqbmsqHmnIlcclxuICovXHJcbnZhciBvbk9mZiA9IHJlcXVpcmUoJy4vb25PZmYnKTtcclxudmFyIGZvcm1hdE9wdHMgPSByZXF1aXJlKCcuL2Zvcm1hdE9wdCcpO1xyXG52YXIgb2JjID0gcmVxdWlyZSgnLi9vdmVybGF5QmFzZUNsYXNzJyk7XHJcbnZhciBMbmdMYXQgPSByZXF1aXJlKCcuL0xuZ0xhdCcpO1xyXG5cclxuLyoqXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAb3B0cyB7T2JqZWN0fSBvcHRzXHJcbiAqICovXHJcbmZ1bmN0aW9uIEluZm9XaW5kb3cob3B0cykge1xyXG4gIHRoaXMuX3R5cGUgPSAnSW5mb1dpbmRvdyc7XHJcbiAgb2JjLmFkZE92ZXJsYXkob3B0cywgdGhpcyk7XHJcblxyXG4gIHZhciBuZXdPcHRzID0gZm9ybWF0T3B0cy5pbmZvV2luZG93KG9wdHMpO1xyXG4gIHRoaXMuX2lubmVyID0gbmV3IEJNYXAuSW5mb1dpbmRvdyhuZXdPcHRzLmNvbnRlbnQsIG5ld09wdHMpO1xyXG59XHJcblxyXG5JbmZvV2luZG93LnByb3RvdHlwZSA9IHtcclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gb3BlbiBhIGluZm9XaW5kb3cgaW4gdGhlIHBvc2l0aW9uXHJcbiAgICogQG1hcCB7TWFwfSBtYXAgcmVxdWlyZWRcclxuICAgKiBAcG9zIHtMbmdMYXR9IHBvc2l0aW9uIGxuZ0xhdFxyXG4gICAqICovXHJcbiAgb3BlbjogZnVuY3Rpb24obWFwLCBwb3MpIHtcclxuICAgIGlmKHBvcykge1xyXG4gICAgICB0aGlzLl9pbm5lci5zZXRQb3NpdGlvbihwb3MpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5faW5uZXIub3BlbihtYXAuX2lubmVyKTtcclxuICAgIHRoaXMuX2lubmVyLl9zbWFwID0gbWFwO1xyXG4gICAgbWFwLl9vdmVyTGF5ZXJzLkluZm9XaW5kb3cucHVzaCh0aGlzKTtcclxuICAgIHRoaXMuX2lzT3BlbiA9IHRydWU7XHJcbiAgfSxcclxuXHJcbiAgY2xvc2U6IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy5faW5uZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX2lzT3BlbiA9IGZhbHNlO1xyXG4gICAgdmFyIGluZm9XaW5kb3dzID0gdGhpcy5faW5uZXIuX3NtYXAuX292ZXJMYXllcnMuSW5mb1dpbmRvdztcclxuICAgIGluZm9XaW5kb3dzLmZpbHRlciggZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcclxuICAgICAgaWYoaXRlbSA9PSB0aGlzKSB7XHJcbiAgICAgICAgaW5mb1dpbmRvd3Muc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSxcclxuXHJcbiAgZ2V0SXNPcGVuOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9pc09wZW47XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIHNldENvbnRlbnRcclxuICAgKiBAY29udGVudCB7U3RyaW5nfGh0bWxET019IGNvbnRlbnRcclxuICAgKiAqL1xyXG4gIHNldENvbnRlbnQ6IGZ1bmN0aW9uKGNvbnRlbnQpIHtcclxuICAgIHRoaXMuX2lubmVyLnNldENvbnRlbnQoY29udGVudCk7XHJcbiAgfSxcclxuXHJcbiAgZ2V0Q29udGVudDogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5uZXIuZ2V0Q29udGVudCgpO1xyXG4gIH0sXHJcblxyXG4gIC8vIFRPRE86IOeZvuW6puayoeaciXNldFBvc2l0aW9uXHJcbiAgLy8gc2V0UG9zaXRpb246IGZ1bmN0aW9uKGxuZ0xhdCkge1xyXG4gIC8vICAgdGhpcy5faW5uZXIuc2V0UG9zaXRpb24obG5nTGF0KTtcclxuICAvLyB9LFxyXG5cclxuICBnZXRQb3NpdGlvbjogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gbmV3IExuZ0xhdCgnJywgJycsIHRoaXMuX2lubmVyLmdldFBvc2l0aW9uKCkpO1xyXG4gIH0sXHJcblxyXG4gIC8vIHRvZG86IGdvb2dsZSDkuI3mlK/mjIFcclxuICBzZXRTaXplOiBmdW5jdGlvbihzaXplKSB7XHJcblxyXG4gIH0sXHJcblxyXG4gIC8vIHRvZG86IGdvb2dsZSDkuI3mlK/mjIFcclxuICBnZXRTaXplOiBmdW5jdGlvbigpIHtcclxuXHJcbiAgfSxcclxuXHJcbiAgb246IG9uT2ZmLm9uLFxyXG4gIG9mZjogb25PZmYub2ZmXHJcbn07XHJcblxyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gSW5mb1dpbmRvdztcclxuXHJcblxyXG5cclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9JbmZvV2luZG93LmpzXG4vLyBtb2R1bGUgaWQgPSAzNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 37 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/13.\r\n * @constructor Polyline\r\n */\r\n\r\nvar obc = __webpack_require__(35);\r\nvar onOff = __webpack_require__(29);\r\nvar formatOpts = __webpack_require__(33);\r\nvar Bounds = __webpack_require__(25);\r\n\r\n/**\r\n * @constructor\r\n * @opts {Object} options\r\n * @return an object, inner is prime google map Polyline instance.\r\n * */\r\nfunction Polyline(opts) {\r\n  this._type = 'Polyline';\r\n  obc.addOverlay(opts, this);\r\n\r\n  var newOpts = formatOpts.polyline(opts);\r\n  this._inner = new BMap.Polyline(newOpts.path, newOpts);\r\n  // this._inner._self = this;\r\n}\r\n\r\nPolyline.prototype = {\r\n\r\n  /**\r\n   * @param {Array} path\r\n   * */\r\n  setPath: function(path) {\r\n    this._inner.setPath(formatOpts.path(path));\r\n  },\r\n\r\n  getPath: function() {\r\n    return this._inner.getPath();\r\n  },\r\n\r\n  // TODO： 百度没有setOptions\r\n  setOptions: function() {},\r\n  getOptions: function() {},\r\n  getLength: function() {},\r\n\r\n  getBounds: function() {\r\n    return new Bounds('', '', this._inner.getBounds());\r\n  },\r\n\r\n  hide: obc.hide,\r\n  show: obc.show,\r\n  setMap: obc.setMap,\r\n\r\n  /**\r\n   * @ext {any} extData\r\n   * */\r\n  setExtData: function(ext) {\r\n    this._inner.extDate = ext;\r\n  },\r\n\r\n  getExtData: function() {\r\n    return this._inner.extDate;\r\n  },\r\n\r\n  on: onOff.on,\r\n  off: onOff.off\r\n};\r\n\r\nvar PolylineEventMap = {\r\n\r\n};\r\n\r\nmodule.exports = Polyline;\r\n\r\n\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9Qb2x5bGluZS5qcz8wMmY2Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVLE9BQU87QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLGFBQWEsTUFBTTtBQUNuQjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0EsMkJBQTJCO0FBQzNCLDJCQUEyQjtBQUMzQiwwQkFBMEI7O0FBRTFCO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFdBQVcsSUFBSTtBQUNmO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBIiwiZmlsZSI6IjM3LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTMuXHJcbiAqIEBjb25zdHJ1Y3RvciBQb2x5bGluZVxyXG4gKi9cclxuXHJcbnZhciBvYmMgPSByZXF1aXJlKCcuL292ZXJsYXlCYXNlQ2xhc3MnKTtcclxudmFyIG9uT2ZmID0gcmVxdWlyZSgnLi9vbk9mZicpO1xyXG52YXIgZm9ybWF0T3B0cyA9IHJlcXVpcmUoJy4vZm9ybWF0T3B0Jyk7XHJcbnZhciBCb3VuZHMgPSByZXF1aXJlKCcuL0JvdW5kcycpO1xyXG5cclxuLyoqXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAb3B0cyB7T2JqZWN0fSBvcHRpb25zXHJcbiAqIEByZXR1cm4gYW4gb2JqZWN0LCBpbm5lciBpcyBwcmltZSBnb29nbGUgbWFwIFBvbHlsaW5lIGluc3RhbmNlLlxyXG4gKiAqL1xyXG5mdW5jdGlvbiBQb2x5bGluZShvcHRzKSB7XHJcbiAgdGhpcy5fdHlwZSA9ICdQb2x5bGluZSc7XHJcbiAgb2JjLmFkZE92ZXJsYXkob3B0cywgdGhpcyk7XHJcblxyXG4gIHZhciBuZXdPcHRzID0gZm9ybWF0T3B0cy5wb2x5bGluZShvcHRzKTtcclxuICB0aGlzLl9pbm5lciA9IG5ldyBCTWFwLlBvbHlsaW5lKG5ld09wdHMucGF0aCwgbmV3T3B0cyk7XHJcbiAgLy8gdGhpcy5faW5uZXIuX3NlbGYgPSB0aGlzO1xyXG59XHJcblxyXG5Qb2x5bGluZS5wcm90b3R5cGUgPSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7QXJyYXl9IHBhdGhcclxuICAgKiAqL1xyXG4gIHNldFBhdGg6IGZ1bmN0aW9uKHBhdGgpIHtcclxuICAgIHRoaXMuX2lubmVyLnNldFBhdGgoZm9ybWF0T3B0cy5wYXRoKHBhdGgpKTtcclxuICB9LFxyXG5cclxuICBnZXRQYXRoOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbm5lci5nZXRQYXRoKCk7XHJcbiAgfSxcclxuXHJcbiAgLy8gVE9ET++8miDnmb7luqbmsqHmnIlzZXRPcHRpb25zXHJcbiAgc2V0T3B0aW9uczogZnVuY3Rpb24oKSB7fSxcclxuICBnZXRPcHRpb25zOiBmdW5jdGlvbigpIHt9LFxyXG4gIGdldExlbmd0aDogZnVuY3Rpb24oKSB7fSxcclxuXHJcbiAgZ2V0Qm91bmRzOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBuZXcgQm91bmRzKCcnLCAnJywgdGhpcy5faW5uZXIuZ2V0Qm91bmRzKCkpO1xyXG4gIH0sXHJcblxyXG4gIGhpZGU6IG9iYy5oaWRlLFxyXG4gIHNob3c6IG9iYy5zaG93LFxyXG4gIHNldE1hcDogb2JjLnNldE1hcCxcclxuXHJcbiAgLyoqXHJcbiAgICogQGV4dCB7YW55fSBleHREYXRhXHJcbiAgICogKi9cclxuICBzZXRFeHREYXRhOiBmdW5jdGlvbihleHQpIHtcclxuICAgIHRoaXMuX2lubmVyLmV4dERhdGUgPSBleHQ7XHJcbiAgfSxcclxuXHJcbiAgZ2V0RXh0RGF0YTogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5uZXIuZXh0RGF0ZTtcclxuICB9LFxyXG5cclxuICBvbjogb25PZmYub24sXHJcbiAgb2ZmOiBvbk9mZi5vZmZcclxufTtcclxuXHJcbnZhciBQb2x5bGluZUV2ZW50TWFwID0ge1xyXG5cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUG9seWxpbmU7XHJcblxyXG5cclxuXHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2JtYXAvUG9seWxpbmUuanNcbi8vIG1vZHVsZSBpZCA9IDM3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 38 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/13.\r\n * @constructor Polygon\r\n */\r\n\r\n// var event = require('./event');\r\nvar onOff = __webpack_require__(29);\r\nvar formatOpts = __webpack_require__(33);\r\nvar obc = __webpack_require__(35);\r\n\r\n/**\r\n * @constructor\r\n * @param {Object} opts\r\n * @return an object, inner is prime google map Polygon instance.\r\n * */\r\nfunction Polygon(opts) {\r\n  this._type = 'Polygon';\r\n  obc.addOverlay(opts, this);\r\n\r\n  var newOpts = formatOpts.polygon(opts);\r\n  this._inner = new BMap.Polygon(newOpts.path, newOpts);\r\n\r\n}\r\n\r\nPolygon.prototype = {\r\n\r\n  setMap: obc.setMap,\r\n\r\n  /**\r\n   * @param {path:Array LngLat | Array lngLat} path\r\n   * */\r\n  setPath: function(path) {\r\n    this._inner.setPath( path );\r\n  },\r\n  getPath: function() {},\r\n\r\n  setOptions: function() {\r\n    this._inner.setOptions( formatOpts.polygon(opts) );\r\n  },\r\n\r\n  getOptions: function() {},\r\n\r\n  getBounds: function() {},\r\n\r\n  getArea: function() {},\r\n\r\n  hide: obc.hide,\r\n\r\n  show: obc.show,\r\n\r\n\r\n\r\n  /**\r\n   * @param {any} ext extData\r\n   * */\r\n  setExtData: function(ext) {\r\n    this._inner.extDate = ext;\r\n  },\r\n\r\n  getExtData: function() {\r\n    return this._inner.extDate;\r\n  },\r\n\r\n  /**\r\n   * @function judge whether a point in the polygon inner\r\n   * @param {LngLat} point\r\n   * */\r\n  contains: function(point) {\r\n\r\n  },\r\n\r\n  on: onOff.on,\r\n  off: onOff.off\r\n};\r\n\r\nmodule.exports = Polygon;\r\n\r\n\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9Qb2x5Z29uLmpzPzBiZDciXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQSxhQUFhLGlDQUFpQztBQUM5QztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsd0JBQXdCOztBQUV4QjtBQUNBO0FBQ0EsR0FBRzs7QUFFSCwyQkFBMkI7O0FBRTNCLDBCQUEwQjs7QUFFMUIsd0JBQXdCOztBQUV4Qjs7QUFFQTs7OztBQUlBO0FBQ0EsYUFBYSxJQUFJO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQjtBQUNBOztBQUVBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6IjM4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZml6eiBvbiAyMDE3LzIvMTMuXHJcbiAqIEBjb25zdHJ1Y3RvciBQb2x5Z29uXHJcbiAqL1xyXG5cclxuLy8gdmFyIGV2ZW50ID0gcmVxdWlyZSgnLi9ldmVudCcpO1xyXG52YXIgb25PZmYgPSByZXF1aXJlKCcuL29uT2ZmJyk7XHJcbnZhciBmb3JtYXRPcHRzID0gcmVxdWlyZSgnLi9mb3JtYXRPcHQnKTtcclxudmFyIG9iYyA9IHJlcXVpcmUoJy4vb3ZlcmxheUJhc2VDbGFzcycpO1xyXG5cclxuLyoqXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0c1xyXG4gKiBAcmV0dXJuIGFuIG9iamVjdCwgaW5uZXIgaXMgcHJpbWUgZ29vZ2xlIG1hcCBQb2x5Z29uIGluc3RhbmNlLlxyXG4gKiAqL1xyXG5mdW5jdGlvbiBQb2x5Z29uKG9wdHMpIHtcclxuICB0aGlzLl90eXBlID0gJ1BvbHlnb24nO1xyXG4gIG9iYy5hZGRPdmVybGF5KG9wdHMsIHRoaXMpO1xyXG5cclxuICB2YXIgbmV3T3B0cyA9IGZvcm1hdE9wdHMucG9seWdvbihvcHRzKTtcclxuICB0aGlzLl9pbm5lciA9IG5ldyBCTWFwLlBvbHlnb24obmV3T3B0cy5wYXRoLCBuZXdPcHRzKTtcclxuXHJcbn1cclxuXHJcblBvbHlnb24ucHJvdG90eXBlID0ge1xyXG5cclxuICBzZXRNYXA6IG9iYy5zZXRNYXAsXHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7cGF0aDpBcnJheSBMbmdMYXQgfCBBcnJheSBsbmdMYXR9IHBhdGhcclxuICAgKiAqL1xyXG4gIHNldFBhdGg6IGZ1bmN0aW9uKHBhdGgpIHtcclxuICAgIHRoaXMuX2lubmVyLnNldFBhdGgoIHBhdGggKTtcclxuICB9LFxyXG4gIGdldFBhdGg6IGZ1bmN0aW9uKCkge30sXHJcblxyXG4gIHNldE9wdGlvbnM6IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy5faW5uZXIuc2V0T3B0aW9ucyggZm9ybWF0T3B0cy5wb2x5Z29uKG9wdHMpICk7XHJcbiAgfSxcclxuXHJcbiAgZ2V0T3B0aW9uczogZnVuY3Rpb24oKSB7fSxcclxuXHJcbiAgZ2V0Qm91bmRzOiBmdW5jdGlvbigpIHt9LFxyXG5cclxuICBnZXRBcmVhOiBmdW5jdGlvbigpIHt9LFxyXG5cclxuICBoaWRlOiBvYmMuaGlkZSxcclxuXHJcbiAgc2hvdzogb2JjLnNob3csXHJcblxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHthbnl9IGV4dCBleHREYXRhXHJcbiAgICogKi9cclxuICBzZXRFeHREYXRhOiBmdW5jdGlvbihleHQpIHtcclxuICAgIHRoaXMuX2lubmVyLmV4dERhdGUgPSBleHQ7XHJcbiAgfSxcclxuXHJcbiAgZ2V0RXh0RGF0YTogZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5uZXIuZXh0RGF0ZTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24ganVkZ2Ugd2hldGhlciBhIHBvaW50IGluIHRoZSBwb2x5Z29uIGlubmVyXHJcbiAgICogQHBhcmFtIHtMbmdMYXR9IHBvaW50XHJcbiAgICogKi9cclxuICBjb250YWluczogZnVuY3Rpb24ocG9pbnQpIHtcclxuXHJcbiAgfSxcclxuXHJcbiAgb246IG9uT2ZmLm9uLFxyXG4gIG9mZjogb25PZmYub2ZmXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFBvbHlnb247XHJcblxyXG5cclxuXHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2JtYXAvUG9seWdvbi5qc1xuLy8gbW9kdWxlIGlkID0gMzhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 39 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/13.\r\n * @constructor Circle\r\n */\r\n\r\n// var event = require('./event');\r\nvar onOff = __webpack_require__(29);\r\nvar formatOpts = __webpack_require__(33);\r\nvar obc = __webpack_require__(35);\r\nvar LngLat = __webpack_require__(24);\r\n\r\n/**\r\n * @constructor\r\n * @opts {Object} opts\r\n * @return an object, inner is prime google map Circle instance.\r\n * */\r\nfunction Circle(opts) {\r\n  this._type = 'Circle';\r\n  obc.addOverlay(opts, this);\r\n\r\n  var newOpts = formatOpts.circle(opts);\r\n  this._inner = new google.maps.Circle(newOpts);\r\n}\r\n\r\nCircle.prototype = {\r\n\r\n  setMap: obc.setMap,\r\n\r\n  setCenter: function(center) {\r\n    this._inner.setCenter(center);\r\n  },\r\n\r\n  getCenter: function() {\r\n    return new LngLat(' ',' ',this._inner.getCenter());\r\n  },\r\n\r\n  getBounds: function() {\r\n\r\n  },\r\n\r\n  /**\r\n   * @param {Number} radius\r\n   * */\r\n  setRadius: function(radius) {\r\n    this._inner.setRadius(radius);\r\n  },\r\n\r\n  getRadius: function() {\r\n    return this._inner.getRadius();\r\n  },\r\n\r\n  setOptions: function() {\r\n    this._inner.setOptions( formatOpts.polygon(opts) );\r\n  },\r\n\r\n  getOptions: function() {},\r\n\r\n  getArea: function() {},\r\n\r\n  hide: obc.hide,\r\n\r\n  show: obc.show,\r\n\r\n  /**\r\n   * @ext {any} extData\r\n   * */\r\n  setExtData: function(ext) {\r\n    this._inner.extDate = ext;\r\n  },\r\n\r\n  getExtData: function() {\r\n    return this._inner.extDate;\r\n  },\r\n\r\n  /**\r\n   * @function judge whether a point in the polygon inner\r\n   * @point {LngLat}\r\n   * @return {Boolean} true or false\r\n   * */\r\n  contains: function(point) {\r\n\r\n  },\r\n\r\n  on: onOff.on,\r\n  off: onOff.off\r\n};\r\n\r\nvar CircleEventMap = {\r\n\r\n};\r\n\r\nmodule.exports = Circle;\r\n\r\n\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9DaXJjbGUuanM/N2E4NCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVLE9BQU87QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUEsR0FBRzs7QUFFSDtBQUNBLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVILDJCQUEyQjs7QUFFM0Isd0JBQXdCOztBQUV4Qjs7QUFFQTs7QUFFQTtBQUNBLFdBQVcsSUFBSTtBQUNmO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLGFBQWE7QUFDYixjQUFjLFFBQVE7QUFDdEI7QUFDQTs7QUFFQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSIsImZpbGUiOiIzOS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGZpenogb24gMjAxNy8yLzEzLlxyXG4gKiBAY29uc3RydWN0b3IgQ2lyY2xlXHJcbiAqL1xyXG5cclxuLy8gdmFyIGV2ZW50ID0gcmVxdWlyZSgnLi9ldmVudCcpO1xyXG52YXIgb25PZmYgPSByZXF1aXJlKCcuL29uT2ZmJyk7XHJcbnZhciBmb3JtYXRPcHRzID0gcmVxdWlyZSgnLi9mb3JtYXRPcHQnKTtcclxudmFyIG9iYyA9IHJlcXVpcmUoJy4vb3ZlcmxheUJhc2VDbGFzcycpO1xyXG52YXIgTG5nTGF0ID0gcmVxdWlyZSgnLi9MbmdMYXQnKTtcclxuXHJcbi8qKlxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQG9wdHMge09iamVjdH0gb3B0c1xyXG4gKiBAcmV0dXJuIGFuIG9iamVjdCwgaW5uZXIgaXMgcHJpbWUgZ29vZ2xlIG1hcCBDaXJjbGUgaW5zdGFuY2UuXHJcbiAqICovXHJcbmZ1bmN0aW9uIENpcmNsZShvcHRzKSB7XHJcbiAgdGhpcy5fdHlwZSA9ICdDaXJjbGUnO1xyXG4gIG9iYy5hZGRPdmVybGF5KG9wdHMsIHRoaXMpO1xyXG5cclxuICB2YXIgbmV3T3B0cyA9IGZvcm1hdE9wdHMuY2lyY2xlKG9wdHMpO1xyXG4gIHRoaXMuX2lubmVyID0gbmV3IGdvb2dsZS5tYXBzLkNpcmNsZShuZXdPcHRzKTtcclxufVxyXG5cclxuQ2lyY2xlLnByb3RvdHlwZSA9IHtcclxuXHJcbiAgc2V0TWFwOiBvYmMuc2V0TWFwLFxyXG5cclxuICBzZXRDZW50ZXI6IGZ1bmN0aW9uKGNlbnRlcikge1xyXG4gICAgdGhpcy5faW5uZXIuc2V0Q2VudGVyKGNlbnRlcik7XHJcbiAgfSxcclxuXHJcbiAgZ2V0Q2VudGVyOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBuZXcgTG5nTGF0KCcgJywnICcsdGhpcy5faW5uZXIuZ2V0Q2VudGVyKCkpO1xyXG4gIH0sXHJcblxyXG4gIGdldEJvdW5kczogZnVuY3Rpb24oKSB7XHJcblxyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSByYWRpdXNcclxuICAgKiAqL1xyXG4gIHNldFJhZGl1czogZnVuY3Rpb24ocmFkaXVzKSB7XHJcbiAgICB0aGlzLl9pbm5lci5zZXRSYWRpdXMocmFkaXVzKTtcclxuICB9LFxyXG5cclxuICBnZXRSYWRpdXM6IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lubmVyLmdldFJhZGl1cygpO1xyXG4gIH0sXHJcblxyXG4gIHNldE9wdGlvbnM6IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy5faW5uZXIuc2V0T3B0aW9ucyggZm9ybWF0T3B0cy5wb2x5Z29uKG9wdHMpICk7XHJcbiAgfSxcclxuXHJcbiAgZ2V0T3B0aW9uczogZnVuY3Rpb24oKSB7fSxcclxuXHJcbiAgZ2V0QXJlYTogZnVuY3Rpb24oKSB7fSxcclxuXHJcbiAgaGlkZTogb2JjLmhpZGUsXHJcblxyXG4gIHNob3c6IG9iYy5zaG93LFxyXG5cclxuICAvKipcclxuICAgKiBAZXh0IHthbnl9IGV4dERhdGFcclxuICAgKiAqL1xyXG4gIHNldEV4dERhdGE6IGZ1bmN0aW9uKGV4dCkge1xyXG4gICAgdGhpcy5faW5uZXIuZXh0RGF0ZSA9IGV4dDtcclxuICB9LFxyXG5cclxuICBnZXRFeHREYXRhOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbm5lci5leHREYXRlO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBqdWRnZSB3aGV0aGVyIGEgcG9pbnQgaW4gdGhlIHBvbHlnb24gaW5uZXJcclxuICAgKiBAcG9pbnQge0xuZ0xhdH1cclxuICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlIG9yIGZhbHNlXHJcbiAgICogKi9cclxuICBjb250YWluczogZnVuY3Rpb24ocG9pbnQpIHtcclxuXHJcbiAgfSxcclxuXHJcbiAgb246IG9uT2ZmLm9uLFxyXG4gIG9mZjogb25PZmYub2ZmXHJcbn07XHJcblxyXG52YXIgQ2lyY2xlRXZlbnRNYXAgPSB7XHJcblxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBDaXJjbGU7XHJcblxyXG5cclxuXHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvbWFwL2JtYXAvQ2lyY2xlLmpzXG4vLyBtb2R1bGUgaWQgPSAzOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 40 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by fizz on 2017/2/15.\r\n */\r\n\r\nvar formatOpts = __webpack_require__(33);\r\nvar obc = __webpack_require__(35)\r\n\r\n/**\r\n * @constructor\r\n * @map {Map.Object}\r\n * @marker {Marker}\r\n * @opts {MarkerClustererOptions}\r\n * */\r\nfunction Clusterer(map, markers, opts) {\r\n  if(markers.length < 1) return;\r\n\r\n  this._type = 'MarkerClusterer';\r\n  obc.addOverlay({map: map}, this);\r\n\r\n  var newOpts = formatOpts.markerClusterer(map, markers, opts);\r\n  this._inner = new MarkerClusterer(newOpts.map, newOpts.markers, newOpts.opts);\r\n  this._inner._smap = map;\r\n}\r\n\r\nClusterer.prototype = {\r\n  getSize: function() {},\r\n\r\n  setMap: obc.setMap,\r\n\r\n  getMap: function() {\r\n    return this._inner.getMap();\r\n  },\r\n\r\n  addMarker: function() {},\r\n  removeMarker: function() {},\r\n\r\n  /**\r\n   * @param {Array} styles\r\n   * */\r\n  setStyles: function(styles) {\r\n\r\n  }\r\n};\r\n\r\nmodule.exports = Clusterer;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvYm1hcC9NYXJrZXJDbHVzdGVyZXIuanM/ZWZhOCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNULFlBQVk7QUFDWixVQUFVO0FBQ1Y7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0JBQWtCLFNBQVM7O0FBRTNCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esd0JBQXdCOztBQUV4Qjs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSCwwQkFBMEI7QUFDMUIsNkJBQTZCOztBQUU3QjtBQUNBLGFBQWEsTUFBTTtBQUNuQjtBQUNBOztBQUVBO0FBQ0E7O0FBRUEiLCJmaWxlIjoiNDAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBmaXp6IG9uIDIwMTcvMi8xNS5cclxuICovXHJcblxyXG52YXIgZm9ybWF0T3B0cyA9IHJlcXVpcmUoJy4vZm9ybWF0T3B0Jyk7XHJcbnZhciBvYmMgPSByZXF1aXJlKCcuL292ZXJsYXlCYXNlQ2xhc3MnKVxyXG5cclxuLyoqXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAbWFwIHtNYXAuT2JqZWN0fVxyXG4gKiBAbWFya2VyIHtNYXJrZXJ9XHJcbiAqIEBvcHRzIHtNYXJrZXJDbHVzdGVyZXJPcHRpb25zfVxyXG4gKiAqL1xyXG5mdW5jdGlvbiBDbHVzdGVyZXIobWFwLCBtYXJrZXJzLCBvcHRzKSB7XHJcbiAgaWYobWFya2Vycy5sZW5ndGggPCAxKSByZXR1cm47XHJcblxyXG4gIHRoaXMuX3R5cGUgPSAnTWFya2VyQ2x1c3RlcmVyJztcclxuICBvYmMuYWRkT3ZlcmxheSh7bWFwOiBtYXB9LCB0aGlzKTtcclxuXHJcbiAgdmFyIG5ld09wdHMgPSBmb3JtYXRPcHRzLm1hcmtlckNsdXN0ZXJlcihtYXAsIG1hcmtlcnMsIG9wdHMpO1xyXG4gIHRoaXMuX2lubmVyID0gbmV3IE1hcmtlckNsdXN0ZXJlcihuZXdPcHRzLm1hcCwgbmV3T3B0cy5tYXJrZXJzLCBuZXdPcHRzLm9wdHMpO1xyXG4gIHRoaXMuX2lubmVyLl9zbWFwID0gbWFwO1xyXG59XHJcblxyXG5DbHVzdGVyZXIucHJvdG90eXBlID0ge1xyXG4gIGdldFNpemU6IGZ1bmN0aW9uKCkge30sXHJcblxyXG4gIHNldE1hcDogb2JjLnNldE1hcCxcclxuXHJcbiAgZ2V0TWFwOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbm5lci5nZXRNYXAoKTtcclxuICB9LFxyXG5cclxuICBhZGRNYXJrZXI6IGZ1bmN0aW9uKCkge30sXHJcbiAgcmVtb3ZlTWFya2VyOiBmdW5jdGlvbigpIHt9LFxyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge0FycmF5fSBzdHlsZXNcclxuICAgKiAqL1xyXG4gIHNldFN0eWxlczogZnVuY3Rpb24oc3R5bGVzKSB7XHJcblxyXG4gIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gQ2x1c3RlcmVyO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzL21hcC9ibWFwL01hcmtlckNsdXN0ZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gNDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 41 */
/***/ function(module, exports) {

	eval("/**\n *  地图api封装\n *  van\n *  15年11月\n *\n *  使用高德地图 命名方式与高德地图api呼应 简化了层次 方便调用\n *  依赖jq\n **/\n\n;document.write('<script src=\"http://webapi.amap.com/maps?v=1.3&key=a3b3d16e95cfd8d858300d093f839c5f\"></script>');\n(function(){\n    window.XMapSdk=function (opt,theme){\n        return new mapSdk(opt,theme);\n    };\n\n    var mapSdk=function(opt,theme){\n        var defaultTheme={\n            strokeColor: \"#2e90df\",\n            strokeOpacity: 1,\n            strokeWeight: 3,\n            strokeStyle:'solid',\n            fillColor: \"#d2e8f5\",\n            fillOpacity: 0.5\n        };\n\n        var latLng = [104.056435,30.671192];//默认\n        var defaultOpt={\n            zoom:13,\n            pulgin:[],\n            center:latLng\n        };\n\n        this.opt= $.extend(true,{},defaultOpt,opt);\n        this.theme= $.extend(true,{},defaultTheme,theme);\n\n\n\n        this.mapObj=new AMap.Map(opt['dom'],this.opt);\n        var mapObj= this.mapObj;\n        for (var x in this.opt.pulgin)\n        {\n            opt= this.opt.pulgin[x];\n            switch(x)\n            {\n                case 'scale':\n                    this.mapObj.plugin([\"AMap.Scale\"],function(){\n                        var scale = new AMap.Scale(opt);\n                        mapObj.addControl(scale);\n                    });\n                    break;\n                case 'toolBar':\n                    this.mapObj.plugin([\"AMap.ToolBar\"], function () {\n                        var toolBar = new AMap.ToolBar(opt);\n                        mapObj.addControl(toolBar);\n                    });\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    };\n    mapSdk.prototype={\n        clearMap:function (){\n            this.mapObj.clearMap();\n        },\n        destroy:function (){\n\n            this.mapObj.destroy();\n        },\n        setFitView:function (){\n            this.mapObj.setFitView();\n        },\n        setMap:function (el){\n            el.setMap(this.mapObj);\n        },\n        lngLat:function (lng,lat){\n            return new AMap.LngLat(lng,lat);\n        },\n        icon:function (img){\n            if(img){\n                return new AMap.Icon({\n                    image:img\n                });\n            }else{\n                return new AMap.Icon();\n            }\n        },\n        pixel:function (x,y){\n            return new AMap.Pixel(x,y);\n        },\n        size:function (w,h){\n            return new AMap.Size(w,h);\n        },\n        marker:function (lnglatXY,img,x,y,opt){\n            var defaultOpt={\n                map:this.mapObj,\n                position: lnglatXY,\n                zIndex:9999\n            };\n            if(img){\n                opt.icon=this.icon(img)\n            }\n            if(x  &&  y){\n                opt.offset=this.pixel(x,y);\n            }\n            return new AMap.Marker(this._handlerOpt(defaultOpt,opt));\n        },\n        infoWindow:function (content){\n            return new AMap.InfoWindow({\n                content:content,\n                size:this.size(300, 0),\n                autoMove:true,\n                offset:this.pixel(0,-30)\n            });\n        },\n        placeSearch:function (keyword,size,cb){\n            AMap.service([\"AMap.PlaceSearch\"], function() {\n                var placeSearch = new AMap.PlaceSearch({ //构造地点查询类\n                    //map: mapObj,\n                    pageSize:size,\n                    pageIndex:1\n                });\n                placeSearch.search(keyword,function (status,res){\n                    if(status == 'complete'  && res.poiList.pois.length){\n                        //todo  处理是信息不全导致的没有结果  res.cityList有结果\n\n                        cb(res.poiList.pois);\n                    }\n                });\n\n            });\n        },\n        //地理编码和反地理编码\n        unGeoCoder:function(lnglatXY,completeCb) {\n            //var that=this;\n\n            this.mapObj.plugin([\"AMap.Geocoder\"], function() {\n                var geocoder = new AMap.Geocoder({\n                    radius: 1000,\n                    extensions: \"base\"\n                });\n                geocoder.getAddress(lnglatXY,function(e,res){\n                    if(e == 'complete'){\n                        completeCb(res.regeocode.formattedAddress);\n                    }\n                });\n            });\n        },\n        geoCoder:function(address,completeCb) {\n            //var that=this;\n\n            this.mapObj.plugin([\"AMap.Geocoder\"], function() {\n                var geocoder = new AMap.Geocoder({\n                    radius: 1000,\n                    extensions: \"base\"\n                });\n                geocoder.getLocation(address,function(e,res){\n                    console.log(res);\n                    if(e == 'complete' && res.info ==='OK'){\n\n                        completeCb(res.geocodes);\n                    }\n                });\n            });\n        },\n\n        popMap:function(data,markerCb,mouseCb){\n            var that = this;\n            var markerData = Array();\n            var mouseData = Array();\n            var markerArray = Array();\n\n            $(\".x-popMap\").fadeIn('slow');\n            //注册事件\n            $(\"body\").on('click','.x-popMap-cancel',function(){\n                that.closePopMap();\n            });\n\n            $(\"body\").on('click','.x-popMap-ok',function(){\n                that.closePopMap();\n                markerCb(markerData);//当前选中marker点的数据\n            });\n\n            for (var i = 0; i < data.length; i++) {\n                var obj = data[i];\n                var marker = this.marker([obj.lng,obj.lat],'img/marker_icon1.png',-20,-40,{\n                    content:'<div class=\"marker\"><img src=\"img/marker_icon1.png\"></div>'\n                });\n                marker['extData'] = obj['extData'];\n                markerArray.push(marker);\n                console.log(marker.getIcon());\n                marker.on('click',function(e){\n                    $.each(markerArray,function(i,value){\n                        value.setContent('<div class=\"marker\"><img src=\"img/marker_icon1.png\"></div>');\n                    });\n                    this.setContent('<div class=\"marker\"><img src=\"img/marker_select.png\"></div>');\n                    markerData = e.target.extData;\n                });\n            }\n            //注册鼠标右击事件    右击获取地址和坐标\n            this.mapObj.on('click',function(e){\n                console.log(\"222\");\n                that.unGeoCoder(e.lnglat,function(data){\n                    mouseCb( {lngLat:e.lnglat,address:data});//返回坐标和地址\n                    that.closePopMap();\n                });\n            });\n            \n            console.log(markerArray);\n        },\n        closePopMap:function(){\n            $(\".x-popMap\").fadeOut('slow');\n        },\n\n        //搜索   keyword：关键字  type:类型   cb:回调函数\n        districtSearch:function (keyword,type,cb){\n            AMap.service([\"AMap.DistrictSearch\"], function() {\n                if(type== 'boundaries'){\n                    var districtSearch = new AMap.DistrictSearch({ //构造地点查询类\n                        extensions:'all',\n                        subdistrict:0\n                    });\n                    districtSearch.search(keyword,function (status,res){\n                        if(status == 'complete'){\n                            var area=res.districtList[0];\n\n                            var maxLength=0;\n                            var maxboundaries=[];\n                            for(var i =0;i< area.boundaries.length;i++){\n                                if(area.boundaries[i].length > maxLength){\n                                    maxLength=area.boundaries[i].length;\n                                    maxboundaries=area.boundaries[i];\n                                }\n                            }\n\n                            if(maxboundaries.length){\n                                cb(true,{'name':area.name,'boundaries':maxboundaries});\n                            }else{\n                                cb(false,status);\n                            }\n                        }else{\n                            cb(false,status);\n                        }\n                    });\n                }else if(type== 'district'){\n                    //todo  搜行政区名称\n                    //var districtSearch = new AMap.DistrictSearch({ //构造地点查询类\n                    //    subdistrict:3\n                    //});\n                    //...\n                }\n\n            });\n        },\n        mouseTool:function (type,drawCb,opt){\n            var mapObj=this.mapObj;\n            var that=this;\n            var mouseTool;\n            mapObj.plugin([\"AMap.MouseTool\"], function() {\n                mouseTool= new AMap.MouseTool(mapObj);\n                //todo  别的类型的绘制\n\n                switch(type){\n                    case 'polyLine':\n                        mouseTool.polyline(opt);\n                        break;\n                    case 'polygon':\n                        mouseTool.polygon(opt);\n                        break;\n                    case 'marker':\n                        mouseTool.marker(opt);\n                        break;\n                    case 'circle':\n                        mouseTool.circle(opt);\n                        break;\n                    default :\n                        console.log(\"参数不正确\");\n                        break;\n                }\n\n\n                that.addListener(mouseTool, \"draw\", function (e){\n                    drawCb(e,mouseTool);\n                });\n            });\n            return mouseTool;\n\n        },\n        //编辑多边形    polygon:多边形对象    endCb：编辑结束后的回调\n        polygonEdit:function (polygon,endCb){\n            var mapObj=this.mapObj;\n            var polyEditor;\n            var that=this;\n\n            mapObj.plugin([\"AMap.PolyEditor\"], function() {\n                polyEditor = new AMap.PolyEditor(mapObj, polygon);\n                polyEditor.open();\n\n                that.addListener(polyEditor, \"end\", function (e){\n                    endCb(e.target);\n                });\n            });\n\n            return polyEditor;\n\n        },\n        //编辑圆   圆对象  endCb：编辑结束后的callBack  adjustCb:鼠标调整圆半径的时候触发   moveCB：移动的时候触发\n        circleEditor:function(circle,endCb,adjustCb,moveCb){\n            var mapObj=this.mapObj;\n            var that=this;\n            var circleEditor;\n            mapObj.plugin([\"AMap.CircleEditor\"], function() {\n                circleEditor= new AMap.CircleEditor(mapObj, circle);\n                circleEditor.open();\n                that.addListener(circleEditor,'end',function (e){\n\n                    endCb(e.target);\n                });\n                if(adjustCb){\n                    that.addListener(circleEditor,'adjust',function (e){\n                        adjustCb(e.target);\n                    });\n                }\n                if(moveCb){\n                    that.addListener(circleEditor,'move',function (e){\n                        moveCb(e.target);\n                    });\n                }\n\n\n            });\n            return  circleEditor;\n        },\n        polyLine:function(points,opt){\n            return new AMap.Polyline(this._handlerOpt({\n                map:this.mapObj,\n                path:points\n            },opt));\n        },\n        polygon:function (points,opt){\n            return new AMap.Polygon(this._handlerOpt({\n                map: this.mapObj,\n                path: points\n            },opt));\n        },\n        //画圆\n        circle:function (lnglatXY,rauids,opt){\n            var el=new AMap.Circle(this._handlerOpt({\n                center: lnglatXY,// 圆心位置\n                radius: rauids\n            },opt));\n            this.setMap(el);\n            return el;\n        },\n        cluster:function(sts,markers){\n            var cluster;\n            var mapObj = this.mapObj;\n            mapObj.plugin([\"AMap.MarkerClusterer\"], function () {\n                cluster = new AMap.MarkerClusterer(mapObj, markers, {\n                    styles: sts,\n                    zoomOnClick: false\n                });\n            });\n        },\n        calculateCenter:function (lnglatarr) {\n            //获取多边形中间位置\n            var total = lnglatarr.length;\n            var X = 0, Y = 0, Z = 0;\n            $.each(lnglatarr, function (index, lnglat) {\n                //            console.log(lnglat);\n                var lng = lnglat[0] * Math.PI / 180;\n                var lat = lnglat[1] * Math.PI / 180;\n                var x, y, z;\n                x = Math.cos(lat) * Math.cos(lng);\n                y = Math.cos(lat) * Math.sin(lng);\n                z = Math.sin(lat);\n                X += x;\n                Y += y;\n                Z += z;\n            });\n            X = X / total;\n            Y = Y / total;\n            Z = Z / total;\n\n            var Lng = Math.atan2(Y, X);\n            var Hyp = Math.sqrt(X * X + Y * Y);\n            var Lat = Math.atan2(Z, Hyp);\n\n            return new AMap.LngLat(Lng * 180 / Math.PI, Lat * 180 / Math.PI);\n        },\n        on:function (){\n\n            this.addListener(arguments);\n        },\n        off:function (){\n            this.removeListener(arguments);\n        },\n        addListener:function (){\n            var param=arguments;\n            if(arguments.length==2){\n                return AMap.event.addListener(this.mapObj,param[0],param[1]);\n            }else{\n                return AMap.event.addListener(param[0],param[1],param[2]);\n            }\n        },\n        removeListener:function (listener){\n            AMap.event.removeListener(listener);\n        },\n        _handlerOpt:function (opt,theme){\n            if(opt){\n                return $.extend(true,{},this.theme,theme,opt);\n            }else{\n                return $.extend(true,{},this.theme,theme);\n\n            }\n        }\n\n    };\n})();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYXAvTWFwU0RLLmpzP2Q4OTkiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGtDQUFrQztBQUNsQyxvQ0FBb0M7Ozs7QUFJcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0Esd0RBQXdEO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYixTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckMsYUFBYTs7QUFFYiwyQkFBMkIsaUJBQWlCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDZCQUE2QixFQUFFO0FBQzdEO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7O0FBRWI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRUFBa0U7QUFDbEU7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHlDQUF5QywwQkFBMEI7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHlDQUF5Qyw0Q0FBNEM7QUFDckYsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakI7QUFDQSxvRUFBb0U7QUFDcEU7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTs7QUFFQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiOztBQUVBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7O0FBRWI7O0FBRUEsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7OztBQUdBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkMsYUFBYTtBQUNiLHVDQUF1Qzs7QUFFdkM7QUFDQTs7QUFFQTtBQUNBLENBQUMiLCJmaWxlIjoiNDEuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqICDlnLDlm75hcGnlsIHoo4VcbiAqICB2YW5cbiAqICAxNeW5tDEx5pyIXG4gKlxuICogIOS9v+eUqOmrmOW+t+WcsOWbviDlkb3lkI3mlrnlvI/kuI7pq5jlvrflnLDlm75hcGnlkbzlupQg566A5YyW5LqG5bGC5qyhIOaWueS+v+iwg+eUqFxuICogIOS+nei1lmpxXG4gKiovXG5cbjtkb2N1bWVudC53cml0ZSgnPHNjcmlwdCBzcmM9XCJodHRwOi8vd2ViYXBpLmFtYXAuY29tL21hcHM/dj0xLjMma2V5PWEzYjNkMTZlOTVjZmQ4ZDg1ODMwMGQwOTNmODM5YzVmXCI+PC9zY3JpcHQ+Jyk7XG4oZnVuY3Rpb24oKXtcbiAgICB3aW5kb3cuWE1hcFNkaz1mdW5jdGlvbiAob3B0LHRoZW1lKXtcbiAgICAgICAgcmV0dXJuIG5ldyBtYXBTZGsob3B0LHRoZW1lKTtcbiAgICB9O1xuXG4gICAgdmFyIG1hcFNkaz1mdW5jdGlvbihvcHQsdGhlbWUpe1xuICAgICAgICB2YXIgZGVmYXVsdFRoZW1lPXtcbiAgICAgICAgICAgIHN0cm9rZUNvbG9yOiBcIiMyZTkwZGZcIixcbiAgICAgICAgICAgIHN0cm9rZU9wYWNpdHk6IDEsXG4gICAgICAgICAgICBzdHJva2VXZWlnaHQ6IDMsXG4gICAgICAgICAgICBzdHJva2VTdHlsZTonc29saWQnLFxuICAgICAgICAgICAgZmlsbENvbG9yOiBcIiNkMmU4ZjVcIixcbiAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjVcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgbGF0TG5nID0gWzEwNC4wNTY0MzUsMzAuNjcxMTkyXTsvL+m7mOiupFxuICAgICAgICB2YXIgZGVmYXVsdE9wdD17XG4gICAgICAgICAgICB6b29tOjEzLFxuICAgICAgICAgICAgcHVsZ2luOltdLFxuICAgICAgICAgICAgY2VudGVyOmxhdExuZ1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMub3B0PSAkLmV4dGVuZCh0cnVlLHt9LGRlZmF1bHRPcHQsb3B0KTtcbiAgICAgICAgdGhpcy50aGVtZT0gJC5leHRlbmQodHJ1ZSx7fSxkZWZhdWx0VGhlbWUsdGhlbWUpO1xuXG5cblxuICAgICAgICB0aGlzLm1hcE9iaj1uZXcgQU1hcC5NYXAob3B0Wydkb20nXSx0aGlzLm9wdCk7XG4gICAgICAgIHZhciBtYXBPYmo9IHRoaXMubWFwT2JqO1xuICAgICAgICBmb3IgKHZhciB4IGluIHRoaXMub3B0LnB1bGdpbilcbiAgICAgICAge1xuICAgICAgICAgICAgb3B0PSB0aGlzLm9wdC5wdWxnaW5beF07XG4gICAgICAgICAgICBzd2l0Y2goeClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjYXNlICdzY2FsZSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFwT2JqLnBsdWdpbihbXCJBTWFwLlNjYWxlXCJdLGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2NhbGUgPSBuZXcgQU1hcC5TY2FsZShvcHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFwT2JqLmFkZENvbnRyb2woc2NhbGUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndG9vbEJhcic6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFwT2JqLnBsdWdpbihbXCJBTWFwLlRvb2xCYXJcIl0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0b29sQmFyID0gbmV3IEFNYXAuVG9vbEJhcihvcHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFwT2JqLmFkZENvbnRyb2wodG9vbEJhcik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgbWFwU2RrLnByb3RvdHlwZT17XG4gICAgICAgIGNsZWFyTWFwOmZ1bmN0aW9uICgpe1xuICAgICAgICAgICAgdGhpcy5tYXBPYmouY2xlYXJNYXAoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZGVzdHJveTpmdW5jdGlvbiAoKXtcblxuICAgICAgICAgICAgdGhpcy5tYXBPYmouZGVzdHJveSgpO1xuICAgICAgICB9LFxuICAgICAgICBzZXRGaXRWaWV3OmZ1bmN0aW9uICgpe1xuICAgICAgICAgICAgdGhpcy5tYXBPYmouc2V0Rml0VmlldygpO1xuICAgICAgICB9LFxuICAgICAgICBzZXRNYXA6ZnVuY3Rpb24gKGVsKXtcbiAgICAgICAgICAgIGVsLnNldE1hcCh0aGlzLm1hcE9iaik7XG4gICAgICAgIH0sXG4gICAgICAgIGxuZ0xhdDpmdW5jdGlvbiAobG5nLGxhdCl7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEFNYXAuTG5nTGF0KGxuZyxsYXQpO1xuICAgICAgICB9LFxuICAgICAgICBpY29uOmZ1bmN0aW9uIChpbWcpe1xuICAgICAgICAgICAgaWYoaW1nKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFNYXAuSWNvbih7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlOmltZ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBTWFwLkljb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcGl4ZWw6ZnVuY3Rpb24gKHgseSl7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEFNYXAuUGl4ZWwoeCx5KTtcbiAgICAgICAgfSxcbiAgICAgICAgc2l6ZTpmdW5jdGlvbiAodyxoKXtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQU1hcC5TaXplKHcsaCk7XG4gICAgICAgIH0sXG4gICAgICAgIG1hcmtlcjpmdW5jdGlvbiAobG5nbGF0WFksaW1nLHgseSxvcHQpe1xuICAgICAgICAgICAgdmFyIGRlZmF1bHRPcHQ9e1xuICAgICAgICAgICAgICAgIG1hcDp0aGlzLm1hcE9iaixcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbG5nbGF0WFksXG4gICAgICAgICAgICAgICAgekluZGV4Ojk5OTlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZihpbWcpe1xuICAgICAgICAgICAgICAgIG9wdC5pY29uPXRoaXMuaWNvbihpbWcpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZih4ICAmJiAgeSl7XG4gICAgICAgICAgICAgICAgb3B0Lm9mZnNldD10aGlzLnBpeGVsKHgseSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IEFNYXAuTWFya2VyKHRoaXMuX2hhbmRsZXJPcHQoZGVmYXVsdE9wdCxvcHQpKTtcbiAgICAgICAgfSxcbiAgICAgICAgaW5mb1dpbmRvdzpmdW5jdGlvbiAoY29udGVudCl7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEFNYXAuSW5mb1dpbmRvdyh7XG4gICAgICAgICAgICAgICAgY29udGVudDpjb250ZW50LFxuICAgICAgICAgICAgICAgIHNpemU6dGhpcy5zaXplKDMwMCwgMCksXG4gICAgICAgICAgICAgICAgYXV0b01vdmU6dHJ1ZSxcbiAgICAgICAgICAgICAgICBvZmZzZXQ6dGhpcy5waXhlbCgwLC0zMClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBwbGFjZVNlYXJjaDpmdW5jdGlvbiAoa2V5d29yZCxzaXplLGNiKXtcbiAgICAgICAgICAgIEFNYXAuc2VydmljZShbXCJBTWFwLlBsYWNlU2VhcmNoXCJdLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGxhY2VTZWFyY2ggPSBuZXcgQU1hcC5QbGFjZVNlYXJjaCh7IC8v5p6E6YCg5Zyw54K55p+l6K+i57G7XG4gICAgICAgICAgICAgICAgICAgIC8vbWFwOiBtYXBPYmosXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VTaXplOnNpemUsXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VJbmRleDoxXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcGxhY2VTZWFyY2guc2VhcmNoKGtleXdvcmQsZnVuY3Rpb24gKHN0YXR1cyxyZXMpe1xuICAgICAgICAgICAgICAgICAgICBpZihzdGF0dXMgPT0gJ2NvbXBsZXRlJyAgJiYgcmVzLnBvaUxpc3QucG9pcy5sZW5ndGgpe1xuICAgICAgICAgICAgICAgICAgICAgICAgLy90b2RvICDlpITnkIbmmK/kv6Hmga/kuI3lhajlr7zoh7TnmoTmsqHmnInnu5PmnpwgIHJlcy5jaXR5TGlzdOaciee7k+aenFxuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYihyZXMucG9pTGlzdC5wb2lzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLy/lnLDnkIbnvJbnoIHlkozlj43lnLDnkIbnvJbnoIFcbiAgICAgICAgdW5HZW9Db2RlcjpmdW5jdGlvbihsbmdsYXRYWSxjb21wbGV0ZUNiKSB7XG4gICAgICAgICAgICAvL3ZhciB0aGF0PXRoaXM7XG5cbiAgICAgICAgICAgIHRoaXMubWFwT2JqLnBsdWdpbihbXCJBTWFwLkdlb2NvZGVyXCJdLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ2VvY29kZXIgPSBuZXcgQU1hcC5HZW9jb2Rlcih7XG4gICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAwMCxcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW5zaW9uczogXCJiYXNlXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBnZW9jb2Rlci5nZXRBZGRyZXNzKGxuZ2xhdFhZLGZ1bmN0aW9uKGUscmVzKXtcbiAgICAgICAgICAgICAgICAgICAgaWYoZSA9PSAnY29tcGxldGUnKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlQ2IocmVzLnJlZ2VvY29kZS5mb3JtYXR0ZWRBZGRyZXNzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGdlb0NvZGVyOmZ1bmN0aW9uKGFkZHJlc3MsY29tcGxldGVDYikge1xuICAgICAgICAgICAgLy92YXIgdGhhdD10aGlzO1xuXG4gICAgICAgICAgICB0aGlzLm1hcE9iai5wbHVnaW4oW1wiQU1hcC5HZW9jb2RlclwiXSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdlb2NvZGVyID0gbmV3IEFNYXAuR2VvY29kZXIoe1xuICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwMDAsXG4gICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbnM6IFwiYmFzZVwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZ2VvY29kZXIuZ2V0TG9jYXRpb24oYWRkcmVzcyxmdW5jdGlvbihlLHJlcyl7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmKGUgPT0gJ2NvbXBsZXRlJyAmJiByZXMuaW5mbyA9PT0nT0snKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGVDYihyZXMuZ2VvY29kZXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBwb3BNYXA6ZnVuY3Rpb24oZGF0YSxtYXJrZXJDYixtb3VzZUNiKXtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBtYXJrZXJEYXRhID0gQXJyYXkoKTtcbiAgICAgICAgICAgIHZhciBtb3VzZURhdGEgPSBBcnJheSgpO1xuICAgICAgICAgICAgdmFyIG1hcmtlckFycmF5ID0gQXJyYXkoKTtcblxuICAgICAgICAgICAgJChcIi54LXBvcE1hcFwiKS5mYWRlSW4oJ3Nsb3cnKTtcbiAgICAgICAgICAgIC8v5rOo5YaM5LqL5Lu2XG4gICAgICAgICAgICAkKFwiYm9keVwiKS5vbignY2xpY2snLCcueC1wb3BNYXAtY2FuY2VsJyxmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHRoYXQuY2xvc2VQb3BNYXAoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkKFwiYm9keVwiKS5vbignY2xpY2snLCcueC1wb3BNYXAtb2snLGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgdGhhdC5jbG9zZVBvcE1hcCgpO1xuICAgICAgICAgICAgICAgIG1hcmtlckNiKG1hcmtlckRhdGEpOy8v5b2T5YmN6YCJ5LitbWFya2Vy54K555qE5pWw5o2uXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9iaiA9IGRhdGFbaV07XG4gICAgICAgICAgICAgICAgdmFyIG1hcmtlciA9IHRoaXMubWFya2VyKFtvYmoubG5nLG9iai5sYXRdLCdpbWcvbWFya2VyX2ljb24xLnBuZycsLTIwLC00MCx7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6JzxkaXYgY2xhc3M9XCJtYXJrZXJcIj48aW1nIHNyYz1cImltZy9tYXJrZXJfaWNvbjEucG5nXCI+PC9kaXY+J1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIG1hcmtlclsnZXh0RGF0YSddID0gb2JqWydleHREYXRhJ107XG4gICAgICAgICAgICAgICAgbWFya2VyQXJyYXkucHVzaChtYXJrZXIpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1hcmtlci5nZXRJY29uKCkpO1xuICAgICAgICAgICAgICAgIG1hcmtlci5vbignY2xpY2snLGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgICAgICAgICAkLmVhY2gobWFya2VyQXJyYXksZnVuY3Rpb24oaSx2YWx1ZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5zZXRDb250ZW50KCc8ZGl2IGNsYXNzPVwibWFya2VyXCI+PGltZyBzcmM9XCJpbWcvbWFya2VyX2ljb24xLnBuZ1wiPjwvZGl2PicpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDb250ZW50KCc8ZGl2IGNsYXNzPVwibWFya2VyXCI+PGltZyBzcmM9XCJpbWcvbWFya2VyX3NlbGVjdC5wbmdcIj48L2Rpdj4nKTtcbiAgICAgICAgICAgICAgICAgICAgbWFya2VyRGF0YSA9IGUudGFyZ2V0LmV4dERhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL+azqOWGjOm8oOagh+WPs+WHu+S6i+S7tiAgICDlj7Plh7vojrflj5blnLDlnYDlkozlnZDmoIdcbiAgICAgICAgICAgIHRoaXMubWFwT2JqLm9uKCdjbGljaycsZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCIyMjJcIik7XG4gICAgICAgICAgICAgICAgdGhhdC51bkdlb0NvZGVyKGUubG5nbGF0LGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgICAgICBtb3VzZUNiKCB7bG5nTGF0OmUubG5nbGF0LGFkZHJlc3M6ZGF0YX0pOy8v6L+U5Zue5Z2Q5qCH5ZKM5Zyw5Z2AXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuY2xvc2VQb3BNYXAoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhtYXJrZXJBcnJheSk7XG4gICAgICAgIH0sXG4gICAgICAgIGNsb3NlUG9wTWFwOmZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAkKFwiLngtcG9wTWFwXCIpLmZhZGVPdXQoJ3Nsb3cnKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvL+aQnOe0oiAgIGtleXdvcmTvvJrlhbPplK7lrZcgIHR5cGU657G75Z6LICAgY2I65Zue6LCD5Ye95pWwXG4gICAgICAgIGRpc3RyaWN0U2VhcmNoOmZ1bmN0aW9uIChrZXl3b3JkLHR5cGUsY2Ipe1xuICAgICAgICAgICAgQU1hcC5zZXJ2aWNlKFtcIkFNYXAuRGlzdHJpY3RTZWFyY2hcIl0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmKHR5cGU9PSAnYm91bmRhcmllcycpe1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGlzdHJpY3RTZWFyY2ggPSBuZXcgQU1hcC5EaXN0cmljdFNlYXJjaCh7IC8v5p6E6YCg5Zyw54K55p+l6K+i57G7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHRlbnNpb25zOidhbGwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3ViZGlzdHJpY3Q6MFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgZGlzdHJpY3RTZWFyY2guc2VhcmNoKGtleXdvcmQsZnVuY3Rpb24gKHN0YXR1cyxyZXMpe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3RhdHVzID09ICdjb21wbGV0ZScpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcmVhPXJlcy5kaXN0cmljdExpc3RbMF07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF4TGVuZ3RoPTA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1heGJvdW5kYXJpZXM9W107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpID0wO2k8IGFyZWEuYm91bmRhcmllcy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoYXJlYS5ib3VuZGFyaWVzW2ldLmxlbmd0aCA+IG1heExlbmd0aCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhMZW5ndGg9YXJlYS5ib3VuZGFyaWVzW2ldLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heGJvdW5kYXJpZXM9YXJlYS5ib3VuZGFyaWVzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobWF4Ym91bmRhcmllcy5sZW5ndGgpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYih0cnVlLHsnbmFtZSc6YXJlYS5uYW1lLCdib3VuZGFyaWVzJzptYXhib3VuZGFyaWVzfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNiKGZhbHNlLHN0YXR1cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2IoZmFsc2Usc3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfWVsc2UgaWYodHlwZT09ICdkaXN0cmljdCcpe1xuICAgICAgICAgICAgICAgICAgICAvL3RvZG8gIOaQnOihjOaUv+WMuuWQjeensFxuICAgICAgICAgICAgICAgICAgICAvL3ZhciBkaXN0cmljdFNlYXJjaCA9IG5ldyBBTWFwLkRpc3RyaWN0U2VhcmNoKHsgLy/mnoTpgKDlnLDngrnmn6Xor6LnsbtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgc3ViZGlzdHJpY3Q6M1xuICAgICAgICAgICAgICAgICAgICAvL30pO1xuICAgICAgICAgICAgICAgICAgICAvLy4uLlxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIG1vdXNlVG9vbDpmdW5jdGlvbiAodHlwZSxkcmF3Q2Isb3B0KXtcbiAgICAgICAgICAgIHZhciBtYXBPYmo9dGhpcy5tYXBPYmo7XG4gICAgICAgICAgICB2YXIgdGhhdD10aGlzO1xuICAgICAgICAgICAgdmFyIG1vdXNlVG9vbDtcbiAgICAgICAgICAgIG1hcE9iai5wbHVnaW4oW1wiQU1hcC5Nb3VzZVRvb2xcIl0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIG1vdXNlVG9vbD0gbmV3IEFNYXAuTW91c2VUb29sKG1hcE9iaik7XG4gICAgICAgICAgICAgICAgLy90b2RvICDliKvnmoTnsbvlnovnmoTnu5jliLZcblxuICAgICAgICAgICAgICAgIHN3aXRjaCh0eXBlKXtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncG9seUxpbmUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbW91c2VUb29sLnBvbHlsaW5lKG9wdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncG9seWdvbic6XG4gICAgICAgICAgICAgICAgICAgICAgICBtb3VzZVRvb2wucG9seWdvbihvcHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ21hcmtlcic6XG4gICAgICAgICAgICAgICAgICAgICAgICBtb3VzZVRvb2wubWFya2VyKG9wdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY2lyY2xlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdXNlVG9vbC5jaXJjbGUob3B0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0IDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5Y+C5pWw5LiN5q2j56GuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICB0aGF0LmFkZExpc3RlbmVyKG1vdXNlVG9vbCwgXCJkcmF3XCIsIGZ1bmN0aW9uIChlKXtcbiAgICAgICAgICAgICAgICAgICAgZHJhd0NiKGUsbW91c2VUb29sKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIG1vdXNlVG9vbDtcblxuICAgICAgICB9LFxuICAgICAgICAvL+e8lui+keWkmui+ueW9oiAgICBwb2x5Z29uOuWkmui+ueW9ouWvueixoSAgICBlbmRDYu+8mue8lui+kee7k+adn+WQjueahOWbnuiwg1xuICAgICAgICBwb2x5Z29uRWRpdDpmdW5jdGlvbiAocG9seWdvbixlbmRDYil7XG4gICAgICAgICAgICB2YXIgbWFwT2JqPXRoaXMubWFwT2JqO1xuICAgICAgICAgICAgdmFyIHBvbHlFZGl0b3I7XG4gICAgICAgICAgICB2YXIgdGhhdD10aGlzO1xuXG4gICAgICAgICAgICBtYXBPYmoucGx1Z2luKFtcIkFNYXAuUG9seUVkaXRvclwiXSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcG9seUVkaXRvciA9IG5ldyBBTWFwLlBvbHlFZGl0b3IobWFwT2JqLCBwb2x5Z29uKTtcbiAgICAgICAgICAgICAgICBwb2x5RWRpdG9yLm9wZW4oKTtcblxuICAgICAgICAgICAgICAgIHRoYXQuYWRkTGlzdGVuZXIocG9seUVkaXRvciwgXCJlbmRcIiwgZnVuY3Rpb24gKGUpe1xuICAgICAgICAgICAgICAgICAgICBlbmRDYihlLnRhcmdldCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIHBvbHlFZGl0b3I7XG5cbiAgICAgICAgfSxcbiAgICAgICAgLy/nvJbovpHlnIYgICDlnIblr7nosaEgIGVuZENi77ya57yW6L6R57uT5p2f5ZCO55qEY2FsbEJhY2sgIGFkanVzdENiOum8oOagh+iwg+aVtOWchuWNiuW+hOeahOaXtuWAmeinpuWPkSAgIG1vdmVDQu+8muenu+WKqOeahOaXtuWAmeinpuWPkVxuICAgICAgICBjaXJjbGVFZGl0b3I6ZnVuY3Rpb24oY2lyY2xlLGVuZENiLGFkanVzdENiLG1vdmVDYil7XG4gICAgICAgICAgICB2YXIgbWFwT2JqPXRoaXMubWFwT2JqO1xuICAgICAgICAgICAgdmFyIHRoYXQ9dGhpcztcbiAgICAgICAgICAgIHZhciBjaXJjbGVFZGl0b3I7XG4gICAgICAgICAgICBtYXBPYmoucGx1Z2luKFtcIkFNYXAuQ2lyY2xlRWRpdG9yXCJdLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjaXJjbGVFZGl0b3I9IG5ldyBBTWFwLkNpcmNsZUVkaXRvcihtYXBPYmosIGNpcmNsZSk7XG4gICAgICAgICAgICAgICAgY2lyY2xlRWRpdG9yLm9wZW4oKTtcbiAgICAgICAgICAgICAgICB0aGF0LmFkZExpc3RlbmVyKGNpcmNsZUVkaXRvciwnZW5kJyxmdW5jdGlvbiAoZSl7XG5cbiAgICAgICAgICAgICAgICAgICAgZW5kQ2IoZS50YXJnZXQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmKGFkanVzdENiKXtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5hZGRMaXN0ZW5lcihjaXJjbGVFZGl0b3IsJ2FkanVzdCcsZnVuY3Rpb24gKGUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRqdXN0Q2IoZS50YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYobW92ZUNiKXtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5hZGRMaXN0ZW5lcihjaXJjbGVFZGl0b3IsJ21vdmUnLGZ1bmN0aW9uIChlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVDYihlLnRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiAgY2lyY2xlRWRpdG9yO1xuICAgICAgICB9LFxuICAgICAgICBwb2x5TGluZTpmdW5jdGlvbihwb2ludHMsb3B0KXtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQU1hcC5Qb2x5bGluZSh0aGlzLl9oYW5kbGVyT3B0KHtcbiAgICAgICAgICAgICAgICBtYXA6dGhpcy5tYXBPYmosXG4gICAgICAgICAgICAgICAgcGF0aDpwb2ludHNcbiAgICAgICAgICAgIH0sb3B0KSk7XG4gICAgICAgIH0sXG4gICAgICAgIHBvbHlnb246ZnVuY3Rpb24gKHBvaW50cyxvcHQpe1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBBTWFwLlBvbHlnb24odGhpcy5faGFuZGxlck9wdCh7XG4gICAgICAgICAgICAgICAgbWFwOiB0aGlzLm1hcE9iaixcbiAgICAgICAgICAgICAgICBwYXRoOiBwb2ludHNcbiAgICAgICAgICAgIH0sb3B0KSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8v55S75ZyGXG4gICAgICAgIGNpcmNsZTpmdW5jdGlvbiAobG5nbGF0WFkscmF1aWRzLG9wdCl7XG4gICAgICAgICAgICB2YXIgZWw9bmV3IEFNYXAuQ2lyY2xlKHRoaXMuX2hhbmRsZXJPcHQoe1xuICAgICAgICAgICAgICAgIGNlbnRlcjogbG5nbGF0WFksLy8g5ZyG5b+D5L2N572uXG4gICAgICAgICAgICAgICAgcmFkaXVzOiByYXVpZHNcbiAgICAgICAgICAgIH0sb3B0KSk7XG4gICAgICAgICAgICB0aGlzLnNldE1hcChlbCk7XG4gICAgICAgICAgICByZXR1cm4gZWw7XG4gICAgICAgIH0sXG4gICAgICAgIGNsdXN0ZXI6ZnVuY3Rpb24oc3RzLG1hcmtlcnMpe1xuICAgICAgICAgICAgdmFyIGNsdXN0ZXI7XG4gICAgICAgICAgICB2YXIgbWFwT2JqID0gdGhpcy5tYXBPYmo7XG4gICAgICAgICAgICBtYXBPYmoucGx1Z2luKFtcIkFNYXAuTWFya2VyQ2x1c3RlcmVyXCJdLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgY2x1c3RlciA9IG5ldyBBTWFwLk1hcmtlckNsdXN0ZXJlcihtYXBPYmosIG1hcmtlcnMsIHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVzOiBzdHMsXG4gICAgICAgICAgICAgICAgICAgIHpvb21PbkNsaWNrOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGNhbGN1bGF0ZUNlbnRlcjpmdW5jdGlvbiAobG5nbGF0YXJyKSB7XG4gICAgICAgICAgICAvL+iOt+WPluWkmui+ueW9ouS4remXtOS9jee9rlxuICAgICAgICAgICAgdmFyIHRvdGFsID0gbG5nbGF0YXJyLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBYID0gMCwgWSA9IDAsIFogPSAwO1xuICAgICAgICAgICAgJC5lYWNoKGxuZ2xhdGFyciwgZnVuY3Rpb24gKGluZGV4LCBsbmdsYXQpIHtcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgIGNvbnNvbGUubG9nKGxuZ2xhdCk7XG4gICAgICAgICAgICAgICAgdmFyIGxuZyA9IGxuZ2xhdFswXSAqIE1hdGguUEkgLyAxODA7XG4gICAgICAgICAgICAgICAgdmFyIGxhdCA9IGxuZ2xhdFsxXSAqIE1hdGguUEkgLyAxODA7XG4gICAgICAgICAgICAgICAgdmFyIHgsIHksIHo7XG4gICAgICAgICAgICAgICAgeCA9IE1hdGguY29zKGxhdCkgKiBNYXRoLmNvcyhsbmcpO1xuICAgICAgICAgICAgICAgIHkgPSBNYXRoLmNvcyhsYXQpICogTWF0aC5zaW4obG5nKTtcbiAgICAgICAgICAgICAgICB6ID0gTWF0aC5zaW4obGF0KTtcbiAgICAgICAgICAgICAgICBYICs9IHg7XG4gICAgICAgICAgICAgICAgWSArPSB5O1xuICAgICAgICAgICAgICAgIFogKz0gejtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgWCA9IFggLyB0b3RhbDtcbiAgICAgICAgICAgIFkgPSBZIC8gdG90YWw7XG4gICAgICAgICAgICBaID0gWiAvIHRvdGFsO1xuXG4gICAgICAgICAgICB2YXIgTG5nID0gTWF0aC5hdGFuMihZLCBYKTtcbiAgICAgICAgICAgIHZhciBIeXAgPSBNYXRoLnNxcnQoWCAqIFggKyBZICogWSk7XG4gICAgICAgICAgICB2YXIgTGF0ID0gTWF0aC5hdGFuMihaLCBIeXApO1xuXG4gICAgICAgICAgICByZXR1cm4gbmV3IEFNYXAuTG5nTGF0KExuZyAqIDE4MCAvIE1hdGguUEksIExhdCAqIDE4MCAvIE1hdGguUEkpO1xuICAgICAgICB9LFxuICAgICAgICBvbjpmdW5jdGlvbiAoKXtcblxuICAgICAgICAgICAgdGhpcy5hZGRMaXN0ZW5lcihhcmd1bWVudHMpO1xuICAgICAgICB9LFxuICAgICAgICBvZmY6ZnVuY3Rpb24gKCl7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKGFyZ3VtZW50cyk7XG4gICAgICAgIH0sXG4gICAgICAgIGFkZExpc3RlbmVyOmZ1bmN0aW9uICgpe1xuICAgICAgICAgICAgdmFyIHBhcmFtPWFyZ3VtZW50cztcbiAgICAgICAgICAgIGlmKGFyZ3VtZW50cy5sZW5ndGg9PTIpe1xuICAgICAgICAgICAgICAgIHJldHVybiBBTWFwLmV2ZW50LmFkZExpc3RlbmVyKHRoaXMubWFwT2JqLHBhcmFtWzBdLHBhcmFtWzFdKTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHJldHVybiBBTWFwLmV2ZW50LmFkZExpc3RlbmVyKHBhcmFtWzBdLHBhcmFtWzFdLHBhcmFtWzJdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmVtb3ZlTGlzdGVuZXI6ZnVuY3Rpb24gKGxpc3RlbmVyKXtcbiAgICAgICAgICAgIEFNYXAuZXZlbnQucmVtb3ZlTGlzdGVuZXIobGlzdGVuZXIpO1xuICAgICAgICB9LFxuICAgICAgICBfaGFuZGxlck9wdDpmdW5jdGlvbiAob3B0LHRoZW1lKXtcbiAgICAgICAgICAgIGlmKG9wdCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuICQuZXh0ZW5kKHRydWUse30sdGhpcy50aGVtZSx0aGVtZSxvcHQpO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgcmV0dXJuICQuZXh0ZW5kKHRydWUse30sdGhpcy50aGVtZSx0aGVtZSk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgfTtcbn0pKCk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzL21hcC9NYXBTREsuanNcbi8vIG1vZHVsZSBpZCA9IDQxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 42 */
/***/ function(module, exports) {

	eval("/**\r\n * Created by jesse on 2017/2/23.\r\n */\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvamNjLmpzP2ZhMDUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBIiwiZmlsZSI6IjQyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgamVzc2Ugb24gMjAxNy8yLzIzLlxyXG4gKi9cclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvamNjLmpzXG4vLyBtb2R1bGUgaWQgPSA0MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 43 */
/***/ function(module, exports) {

	eval("/**\r\n * Created by jesse on 2017/2/23.\r\n */\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZHVhbnNpamlhLmpzPzY0MmUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBIiwiZmlsZSI6IjQzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgamVzc2Ugb24gMjAxNy8yLzIzLlxyXG4gKi9cclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZHVhbnNpamlhLmpzXG4vLyBtb2R1bGUgaWQgPSA0M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 44 */
/***/ function(module, exports) {

	eval("/**\r\n * Created by jesse on 2017/2/23.\r\n */\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbW1mLmpzPzIyOTQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBIiwiZmlsZSI6IjQ0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgamVzc2Ugb24gMjAxNy8yLzIzLlxyXG4gKi9cclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbW1mLmpzXG4vLyBtb2R1bGUgaWQgPSA0NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 45 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by jesse on 2017/2/23.\r\n */\r\n\r\n\r\n__webpack_require__(46)//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvenEuanM/ODNkMyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7OztBQUdBIiwiZmlsZSI6IjQ1LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgamVzc2Ugb24gMjAxNy8yLzIzLlxyXG4gKi9cclxuXHJcblxyXG5yZXF1aXJlKCcuL2NvbXBvbmVudHMvdXBsb2FkL2luZGV4LmpzJylcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy96cS5qc1xuLy8gbW9kdWxlIGlkID0gNDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 46 */
/***/ function(module, exports, __webpack_require__) {

	eval("/**\r\n * Created by jesse on 2017/2/22.\r\n */\r\n\r\n__webpack_require__(47);\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy91cGxvYWQvaW5kZXguanM/ZTVkZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUEiLCJmaWxlIjoiNDYuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBqZXNzZSBvbiAyMDE3LzIvMjIuXHJcbiAqL1xyXG5cclxucmVxdWlyZSgnLi91cGxvYWQnKTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy91cGxvYWQvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDQ2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 47 */
/***/ function(module, exports, __webpack_require__) {

	eval("\r\nvar WebUploader = __webpack_require__(48);\r\n\r\n// 当domReady的时候开始初始化\r\n(function($) {\r\n    var $wrap = $('.x-uploader'),\r\n\r\n    // 图片容器   多文件的时候\r\n        $queue = $( '<ul class=\"x-filelist\"></ul>' )\r\n            .appendTo( $wrap.find( '.x-queueList' ) ),\r\n    // 状态栏，包括进度和控制按钮\r\n        $statusBar = $wrap.find( '.x-statusBar' ),\r\n\r\n    // 文件总体选择信息。\r\n        $info = $statusBar.find( '.x-info' ),\r\n\r\n    // 上传按钮\r\n        $upload = $wrap.find( '.x-uploadBtn' ),\r\n\r\n    // 没选择文件之前的内容。\r\n        $placeHolder = $wrap.find( '.x-placeholder' ),\r\n\r\n        $progress = $statusBar.find( '.progress' ).hide(),\r\n\r\n\r\n    // 添加的文件数量\r\n        fileCount = 0,\r\n\r\n    // 添加的文件总大小\r\n        fileSize = 0,\r\n\r\n    // 优化retina, 在retina下这个值是2\r\n        ratio = window.devicePixelRatio || 1,\r\n\r\n    // 缩略图大小\r\n        thumbnailWidth = 110 * ratio,\r\n        thumbnailHeight = 110 * ratio,\r\n\r\n    // 可能有pedding, ready, uploading, confirm, done.\r\n        state = 'pedding',\r\n\r\n    // 所有文件的进度信息，key为file id\r\n        percentages = {},\r\n    // 判断浏览器是否支持图片的base64\r\n\r\n    // WebUploader实例\r\n        uploader;\r\n\r\n    //图片上传和文件上传区分 参数\r\n    var opt_file = {\r\n        dom:'',\r\n        fileButton: {\r\n            id: '.x-filePicker',\r\n            label: '批量上传'\r\n        },\r\n        addButton:{\r\n            id: '.x-filePicker-add',\r\n            label: '继续添加'\r\n        },\r\n        dnd: '.x-dndArea',\r\n        paste: '.x-uploader',\r\n        swf: '../../dist/Uploader.swf',\r\n        chunked: false,\r\n        chunkSize: 512 * 1024,\r\n        server: '?m=Admin&c=Upload&a=upload',\r\n        compress:false,\r\n        // 禁掉全局的拖拽功能。这样不会出现图片拖进页面的时候，把图片打开。\r\n        disableGlobalDnd: true,\r\n        fileNumLimit: 300,\r\n        fileSizeLimit: 200 * 1024 * 1024,    // 200 M\r\n        fileSingleSizeLimit: 50 * 1024 * 1024    // 50 M\r\n    };\r\n\r\n\r\n    // 实例化\r\n    window.xUpload = function (opt) {\r\n        return new upload(opt);\r\n    };\r\n\r\n    var defaultOption = opt_file;\r\n    var upload=function(opt,dom){\r\n        this.opt = $.extend(true,{},defaultOption,opt);\r\n        if(this.isFlash){\r\n            this.init(this.opt);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    upload.prototype ={\r\n        isSupportBase64:( function() {\r\n            var data = new Image();\r\n            var support = true;\r\n            data.onload = data.onerror = function() {\r\n                if( this.width != 1 || this.height != 1 ) {\r\n                    support = false;\r\n                }\r\n            };\r\n            data.src = \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==\";\r\n            return support;\r\n        } )(),\r\n        //检测是否已经安装flash，检测flash的版本\r\n        flashVersion : ( function() {\r\n            var version;\r\n            try {\r\n                version = navigator.plugins[ 'Shockwave Flash' ];\r\n                version = version.description;\r\n            } catch ( ex ) {\r\n                try {\r\n                    version = new ActiveXObject('ShockwaveFlash.ShockwaveFlash')\r\n                        .GetVariable('$version');\r\n                } catch ( ex2 ) {\r\n                    version = '0.0';\r\n                }\r\n            }\r\n            version = version.match( /\\d+/g );\r\n            return parseFloat( version[ 0 ] + '.' + version[ 1 ], 10 );\r\n        } )(),\r\n\r\n        supportTransition : (function(){\r\n            var s = document.createElement('p').style,\r\n                r = 'transition' in s ||\r\n                    'WebkitTransition' in s ||\r\n                    'MozTransition' in s ||\r\n                    'msTransition' in s ||\r\n                    'OTransition' in s;\r\n            s = null;\r\n            return r;\r\n        })(),\r\n        isFlash:function(){\r\n            if ( !WebUploader.Uploader.support('flash') && WebUploader.browser.ie ) {\r\n\r\n                // flash 安装了但是版本过低。\r\n                if (this.flashVersion) {\r\n                    (function(container) {\r\n                        window['expressinstallcallback'] = function( state ) {\r\n                            switch(state) {\r\n                                case 'Download.Cancelled':\r\n                                    alert('您取消了更新！');\r\n                                    break;\r\n\r\n                                case 'Download.Failed':\r\n                                    alert('安装失败');\r\n                                    break;\r\n\r\n                                default:\r\n                                    alert('安装已成功，请刷新！');\r\n                                    break;\r\n                            }\r\n                            delete window['expressinstallcallback'];\r\n                        };\r\n\r\n                        var swf = './expressInstall.swf';\r\n                        // insert flash object\r\n                        var html = '<object type=\"application/' +\r\n                            'x-shockwave-flash\" data=\"' +  swf + '\" ';\r\n\r\n                        if (WebUploader.browser.ie) {\r\n                            html += 'classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" ';\r\n                        }\r\n\r\n                        html += 'width=\"100%\" height=\"100%\" style=\"outline:0\">'  +\r\n                            '<param name=\"movie\" value=\"' + swf + '\" />' +\r\n                            '<param name=\"wmode\" value=\"transparent\" />' +\r\n                            '<param name=\"allowscriptaccess\" value=\"always\" />' +\r\n                            '</object>';\r\n\r\n                        container.html(html);\r\n\r\n                    })($wrap);\r\n\r\n                    // 压根就没有安转。\r\n                } else {\r\n                    $wrap.html('<a href=\"http://www.adobe.com/go/getflashplayer\" target=\"_blank\" border=\"0\"><img alt=\"get flash player\" src=\"http://www.adobe.com/macromedia/style_guide/images/160x41_Get_Flash_Player.jpg\" /></a>');\r\n                }\r\n\r\n                return;\r\n            } else if (!WebUploader.Uploader.support()) {\r\n                alert( 'Web Uploader 不支持您的浏览器！');\r\n                return;\r\n            }\r\n        },\r\n        init:function(opt){\r\n\r\n            var fileType = opt.fileType;\r\n            var addButton = opt.addButton;\r\n\r\n            opt.pick = opt.fileButton;\r\n            var _that = this;\r\n            if(fileType == 1){\r\n                opt['accept'] = {\r\n                    title: 'Images',\r\n                    extensions: 'gif,jpg,jpeg,bmp,png',\r\n                    mimeTypes:'image/gif,image/jpg,image/jpeg,image/bmp,image/png'\r\n                };\r\n                opt['fileButton']['multiple'] = false;\r\n            }\r\n            uploader = WebUploader.create(opt);\r\n            // 添加“添加文件”的按钮，\r\n            uploader.addButton(addButton);\r\n\r\n\r\n            uploader.on('ready', function() {\r\n                window.uploader = uploader;\r\n            });\r\n\r\n            uploader.onUploadProgress = function( file, percentage ) {\r\n                //进度条回调\r\n                if(fileType==2) {\r\n                    var $li = $('#' + file.id),\r\n                        $percent = $li.find('.progress span');\r\n\r\n                    $percent.css('width', percentage * 100 + '%');\r\n                    percentages[file.id][1] = percentage;\r\n                    updateTotalProgress();\r\n                }else if(fileType == 1){\r\n\r\n                    $statusBar.show();\r\n                    this.options.progress(Math.round( percentage * 100 ) + '%');\r\n                }\r\n\r\n            };\r\n\r\n            uploader.onUploadSuccess = function(file){\r\n                //上传成功后调用\r\n                if(fileType ==1){\r\n                    $wrap.find('.x-info').text('头像上传成功，总大小：'+getSize(file.size));\r\n                }\r\n            };\r\n\r\n            uploader.onUploadAccept = function(object,ret){\r\n                this.options.success(object,ret);\r\n            };\r\n\r\n            uploader.onFileQueued = function( file ) {\r\n                //添加到队列\r\n                if(fileType == 2){\r\n                    fileCount++;\r\n                    fileSize += file.size;\r\n\r\n                    if ( fileCount === 1 ) {\r\n                        $placeHolder.addClass( 'element-invisible' );\r\n                        $statusBar.show();\r\n                        //$statusBar.css({'display':'block'})\r\n                    }\r\n                    addFile( file );\r\n                    setState( 'ready' );\r\n                    updateTotalProgress();\r\n                }else if(fileType ==1){\r\n                    //单张图片\r\n\r\n                    addFileImg(file);\r\n                    if ( state === 'ready' ) {\r\n\r\n                        uploader.upload(file);\r\n\r\n                    } else if ( state === 'paused' ) {\r\n                        uploader.upload(file);\r\n                    } else if ( state === 'uploading' ) {\r\n                        uploader.stop(file);\r\n                    }\r\n                }\r\n            };\r\n            uploader.onUploadError = function(file,reason){\r\n                if(reason =='http'){\r\n                    console.log(\"服务器错误\");\r\n                }\r\n                return;\r\n            };\r\n            uploader.onFileDequeued = function( file ) {\r\n                //文件从队列中移除\r\n                if(fileType==2){\r\n                    fileCount--;\r\n                    fileSize -= file.size;\r\n\r\n                    if ( !fileCount ) {\r\n                        setState( 'pedding' );\r\n                    }\r\n\r\n                    removeFile( file );\r\n                    updateTotalProgress();\r\n                }\r\n\r\n\r\n            };\r\n            uploader.onUploadFinished = function(){\r\n                if(fileType == 2){\r\n                    setState( 'confirm' );\r\n                }\r\n            };\r\n            uploader.onStartUpload = function(file){\r\n                setState( 'uploading' );\r\n\r\n            };\r\n            uploader.onStopUpload = function(){\r\n                console.log(\"暂停\");\r\n                setState( 'paused' );\r\n            };\r\n\r\n            uploader.onError = function( code ) {\r\n                //错误信息\r\n                switch (code) {\r\n                    case 'Q_TYPE_DENIED' :\r\n                        alert('不符合的文件类型');\r\n                        break;\r\n                    case 'Q_EXCEED_SIZE_LIMIT':\r\n                        alert('文件总大小超出，请重新设置');\r\n                        break;\r\n                    case 'Q_EXCEED_NUM_LIMIT':\r\n                        alert('文件数量过多，请分批上传');\r\n                        break;\r\n                }\r\n            };\r\n\r\n\r\n\r\n            $upload.on('click', function() {\r\n                //点击上传按钮\r\n                console.log(\"开始上传\");\r\n                if ( $(this).hasClass( 'disabled' ) ) {\r\n                    return false;\r\n                }\r\n\r\n                if ( state === 'ready' ) {\r\n                    uploader.upload();\r\n                } else if ( state === 'paused' ) {\r\n                    uploader.upload();\r\n                } else if ( state === 'uploading' ) {\r\n                    uploader.stop();\r\n                }\r\n            });\r\n\r\n            $wrap.on( 'click', '.retry', function() {\r\n\r\n                uploader.retry();\r\n            } );\r\n\r\n\r\n\r\n            $upload.addClass( 'state-' + state );\r\n            function addFile( file ) {\r\n                //html文件列表\r\n\r\n                var $li = $( '<li id=\"' + file.id + '\">' +\r\n                        '<p class=\"title\">' + file.name + '</p>' +\r\n                        '<p class=\"imgWrap\"></p>'+\r\n                        '<p class=\"progress\"><span></span></p>' +\r\n                        '</li>' ),\r\n\r\n                    $btns = $('<div class=\"file-panel\">' +\r\n                        '<span class=\"cancel\">删除</span>' +\r\n                        '<span class=\"rotateRight\">向右旋转</span>' +\r\n                        '<span class=\"rotateLeft\">向左旋转</span></div>').appendTo( $li ),\r\n                    $prgress = $li.find('p.progress span'),\r\n                    $wrap = $li.find( 'p.imgWrap' ),\r\n                    $info = $('<p class=\"error\"></p>'),\r\n                    text = '',\r\n                    showError = function( code ) {\r\n                        switch( code ) {\r\n                            case 'exceed_size':\r\n                                text = '文件大小超出';\r\n                                break;\r\n\r\n                            case 'interrupt':\r\n                                text = '上传暂停';\r\n                                break;\r\n\r\n                            default:\r\n                                text = '上传失败，请重试';\r\n                                break;\r\n                        }\r\n                        console.log(text);\r\n                        $info.text( text ).appendTo( $li );\r\n                    };\r\n\r\n\r\n                if ( file.getStatus() === 'invalid' ) {\r\n                    showError( file.statusText );\r\n                    console.log(file.getStatus());\r\n                } else {\r\n                    // @todo lazyload\r\n                    $wrap.text( '预览中' );\r\n                    uploader.makeThumb( file, function( error, src ) {\r\n                        var img;\r\n                        if ( error ) {\r\n                            $wrap.text( '不能预览' );\r\n                            return;\r\n                        }\r\n                        if( _that.isSupportBase64 ) {\r\n                            img = $('<img src=\"'+src+'\">');\r\n                            $wrap.empty().append( img );\r\n                        } else {\r\n                            console.log(\"预览出错\");\r\n                        }\r\n                    }, thumbnailWidth, thumbnailHeight );\r\n\r\n                    percentages[ file.id ] = [ file.size, 0 ];\r\n                    file.rotation = 0;\r\n                }\r\n\r\n                file.on('statuschange', function( cur, prev ) {\r\n                    //状态改变\r\n                    if ( prev === 'progress' ) {\r\n                        $prgress.hide().width(0);\r\n                    } else if ( prev === 'queued' ) {\r\n                        $li.off( 'mouseenter mouseleave' );\r\n                        $btns.remove();\r\n                    }\r\n\r\n                    // 成功\r\n                    if ( cur === 'error' || cur === 'invalid' ) {\r\n                        console.log( file.statusText );\r\n                        showError( file.statusText );\r\n                        percentages[ file.id ][ 1 ] = 1;\r\n                    } else if ( cur === 'interrupt' ) {\r\n                        showError( 'interrupt' );\r\n                    } else if ( cur === 'queued' ) {\r\n                        $info.remove();\r\n                        $prgress.css('display', 'block');\r\n                        percentages[ file.id ][ 1 ] = 0;\r\n                    } else if ( cur === 'progress' ) {\r\n                        $info.remove();\r\n                        $prgress.css('display', 'block');\r\n                    } else if ( cur === 'complete' ) {\r\n                        $prgress.hide().width(0);\r\n                        $li.append( '<span class=\"success\"></span>' );\r\n                    }\r\n\r\n                    $li.removeClass( 'state-' + prev ).addClass( 'state-' + cur );\r\n                });\r\n\r\n                $li.on( 'mouseenter', function() {\r\n                    $btns.stop().animate({height: 30});\r\n                });\r\n\r\n                $li.on( 'mouseleave', function() {\r\n                    $btns.stop().animate({height: 0});\r\n                });\r\n\r\n                $btns.on( 'click', 'span', function() {\r\n                    var index = $(this).index(),\r\n                        deg;\r\n                    switch ( index ) {\r\n                        case 0:\r\n                            uploader.removeFile( file );\r\n                            return;\r\n\r\n                        case 1:\r\n                            file.rotation += 90;\r\n                            break;\r\n\r\n                        case 2:\r\n                            file.rotation -= 90;\r\n                            break;\r\n                    }\r\n\r\n                    if ( supportTransition ) {\r\n                        deg = 'rotate(' + file.rotation + 'deg)';\r\n                        $wrap.css({\r\n                            '-webkit-transform': deg,\r\n                            '-mos-transform': deg,\r\n                            '-o-transform': deg,\r\n                            'transform': deg\r\n                        });\r\n                    } else {\r\n                        $wrap.css( 'filter', 'progid:DXImageTransform.Microsoft.BasicImage(rotation='+ (~~((file.rotation/90)%4 + 4)%4) +')');\r\n                    }\r\n\r\n\r\n                });\r\n\r\n                $li.appendTo($queue);\r\n\r\n\r\n\r\n\r\n            }\r\n\r\n            // 负责view的销毁\r\n            function removeFile( file ) {\r\n                var $li = $('#'+file.id);\r\n\r\n                delete percentages[ file.id ];\r\n                updateTotalProgress();\r\n                $li.off().find('.file-panel').off().end().remove();\r\n            }\r\n\r\n            function updateTotalProgress() {\r\n                var loaded = 0,\r\n                    total = 0,\r\n                    spans = $progress.children(),\r\n                    percent;\r\n\r\n                $.each( percentages, function( k, v ) {\r\n                    total += v[ 0 ];\r\n                    loaded += v[ 0 ] * v[ 1 ];\r\n                } );\r\n\r\n                percent = total ? loaded / total : 0;\r\n\r\n                opt.progress(Math.round( percent * 100 ) + '%');\r\n                spans.eq( 0 ).text( Math.round( percent * 100 ) + '%' );\r\n                spans.eq( 1 ).css( 'width', Math.round( percent * 100 ) + '%' );\r\n                if(fileType == 2){\r\n                    updateStatus();\r\n                }\r\n\r\n            }\r\n\r\n            function updateStatus() {\r\n                var text = '', stats;\r\n\r\n                if ( state === 'ready' ) {\r\n                    text = '选中' + fileCount + '个文件，共' +\r\n                        WebUploader.formatSize( fileSize ) + '。';\r\n                } else if ( state === 'confirm' ) {\r\n                    stats = uploader.getStats();\r\n                    if ( stats.uploadFailNum ) {\r\n                        text = '已成功上传' + stats.successNum+ '个文件，'+\r\n                            stats.uploadFailNum + '个文件上传失败，<a class=\"retry\" href=\"#\">重新上传</a>失败文件';\r\n                    }\r\n\r\n                } else {\r\n                    stats = uploader.getStats();\r\n                    text = '共' + fileCount + '张（' +\r\n                        WebUploader.formatSize( fileSize )  +\r\n                        '），已上传' + stats.successNum + '张';\r\n\r\n                    if ( stats.uploadFailNum ) {\r\n                        text += '，失败' + stats.uploadFailNum + '张';\r\n                    }\r\n                }\r\n\r\n                $info.html( text );\r\n            }\r\n\r\n            function setState( val ) {\r\n                var file, stats;\r\n\r\n                if ( val === state ) {\r\n                    return;\r\n                }\r\n\r\n                $upload.removeClass( 'state-' + state );\r\n                $upload.addClass( 'state-' + val );\r\n                state = val;\r\n\r\n                switch ( state ) {\r\n                    case 'pedding':\r\n                        $placeHolder.removeClass( 'element-invisible' );\r\n                        $queue.hide();\r\n                        $statusBar.addClass( 'element-invisible' );\r\n                        uploader.refresh();\r\n                        break;\r\n\r\n                    case 'ready':\r\n                        $placeHolder.addClass( 'element-invisible' );\r\n                        $( addButton.id ).removeClass( 'element-invisible');\r\n                        $queue.show();\r\n                        $statusBar.removeClass('element-invisible');\r\n                        uploader.refresh();\r\n                        break;\r\n\r\n                    case 'uploading':\r\n                        $( addButton.id ).addClass( 'element-invisible' );\r\n                        $progress.show();\r\n                        $upload.text( '暂停上传' );\r\n                        break;\r\n\r\n                    case 'paused':\r\n                        $progress.show();\r\n                        $upload.text( '继续上传' );\r\n                        break;\r\n\r\n                    case 'confirm':\r\n                        $progress.hide();\r\n                        $( addButton.id ).removeClass( 'element-invisible' );\r\n                        $upload.text( '开始上传' );\r\n\r\n                        stats = uploader.getStats();\r\n                        if ( stats.successNum && !stats.uploadFailNum ) {\r\n                            setState( 'finish' );\r\n                            return;\r\n                        }\r\n                        break;\r\n                    case 'finish':\r\n                        stats = uploader.getStats();\r\n                        if ( stats.successNum ) {\r\n                            console.log( '上传成功' );\r\n                        } else {\r\n                            // 没有成功的图片，重设\r\n                            state = 'done';\r\n                            location.reload();\r\n                        }\r\n                        break;\r\n                }\r\n                if(fileType == 2){\r\n                    updateStatus();\r\n                }\r\n            }\r\n            function getSize(size){\r\n                var str;\r\n                if(size/1024>1){\r\n                    size = size/1024;\r\n                    str = 'KB';\r\n                }\r\n\r\n                if(size/1024>1){\r\n                    size = size/1024;\r\n                    str = 'MB';\r\n                }\r\n                if(size/1024 >1){\r\n                    size = size/1024;\r\n                    str = 'GB';\r\n                }\r\n                size =   size.toFixed(2);\r\n                str = size + str;\r\n                return str;\r\n            }\r\n\r\n            function addFileImg(file){\r\n                var html = '<div class=\"imgFile\">' +\r\n                    '<img src=\"\">' +\r\n                    '</div>';\r\n                var img;\r\n                var   $info = $('<p class=\"error\"></p>');\r\n                var   text = '';\r\n                var  showError = function( code ) {\r\n                    switch( code ) {\r\n                        case 'exceed_size':\r\n                            text = '文件大小超出';\r\n                            break;\r\n\r\n                        case 'interrupt':\r\n                            text = '上传暂停';\r\n                            break;\r\n\r\n                        default:\r\n\r\n                            text = '上传失败，请重试 '+'<a class=\"retry\" href=\"#\">重新上传</a>';\r\n                            break;\r\n                    }\r\n\r\n\r\n\r\n                    $info.html( text ).appendTo( $wrap );\r\n\r\n                };\r\n\r\n                if ( file.getStatus() === 'invalid' ) {\r\n                    showError( file.statusText );\r\n                } else {\r\n                    uploader.makeThumb(file, function (error, src) {\r\n\r\n                        if (error) {\r\n                            //$wrap.text( '不能预览' );\r\n                            //return;\r\n                        }\r\n                        if (_that.isSupportBase64) {\r\n                            img = $('<img src=\"' + src + '\"><span class=\"x-fileName\">' + file.name + '</span>');\r\n                            $wrap.find(\".x-imgFile\").append(img);\r\n                        } else {\r\n                            console.log(\"预览出错\");\r\n                        }\r\n                    }, thumbnailWidth, thumbnailHeight);\r\n                }\r\n\r\n\r\n\r\n                file.on('statuschange', function( cur, prev ) {\r\n                    //状态改变\r\n                    // 成功\r\n                    if ( cur === 'error' || cur === 'invalid' ) {\r\n                        console.log( file.statusText );\r\n                        showError( file.statusText );\r\n                    } else if ( cur === 'interrupt' ) {\r\n                        showError( 'interrupt' );\r\n                    } else if ( cur === 'queued' ) {\r\n                        $info.remove();\r\n                    } else if ( cur === 'progress' ) {\r\n                        $info.remove();\r\n                    } else if ( cur === 'complete' ) {\r\n\r\n                    }\r\n\r\n                });\r\n\r\n\r\n\r\n                setState( 'ready' );\r\n\r\n                $(\".x-statusBar .x-upload-btns\").remove();\r\n                //$wrap.append($progress);\r\n                //$(\".x-queueList\").remove();\r\n            }\r\n\r\n            updateTotalProgress();\r\n        }\r\n    };\r\n    //uploader = WebUploader.create(opt_img);\r\n\r\n\r\n    // 当有文件添加进来时执行，负责view的创建\r\n\r\n\r\n\r\n})( $ );\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy91cGxvYWQvdXBsb2FkLmpzPzgxYTgiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLHdCQUF3QjtBQUN4Qjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEscUJBQXFCOztB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Q0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7Ozs7QUFJQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxxQkFBcUI7O0FBRXJCOztBQUVBLGlCQUFpQjs7OztBQUlqQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7Ozs7QUFJQSxDQUFDIiwiZmlsZSI6IjQ3LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbnZhciBXZWJVcGxvYWRlciA9IHJlcXVpcmUoJy4vd2VidXBsb2FkZXIuanMnKTtcclxuXHJcbi8vIOW9k2RvbVJlYWR555qE5pe25YCZ5byA5aeL5Yid5aeL5YyWXHJcbihmdW5jdGlvbigkKSB7XHJcbiAgICB2YXIgJHdyYXAgPSAkKCcueC11cGxvYWRlcicpLFxyXG5cclxuICAgIC8vIOWbvueJh+WuueWZqCAgIOWkmuaWh+S7tueahOaXtuWAmVxyXG4gICAgICAgICRxdWV1ZSA9ICQoICc8dWwgY2xhc3M9XCJ4LWZpbGVsaXN0XCI+PC91bD4nIClcclxuICAgICAgICAgICAgLmFwcGVuZFRvKCAkd3JhcC5maW5kKCAnLngtcXVldWVMaXN0JyApICksXHJcbiAgICAvLyDnirbmgIHmoI/vvIzljIXmi6zov5vluqblkozmjqfliLbmjInpkq5cclxuICAgICAgICAkc3RhdHVzQmFyID0gJHdyYXAuZmluZCggJy54LXN0YXR1c0JhcicgKSxcclxuXHJcbiAgICAvLyDmlofku7bmgLvkvZPpgInmi6nkv6Hmga/jgIJcclxuICAgICAgICAkaW5mbyA9ICRzdGF0dXNCYXIuZmluZCggJy54LWluZm8nICksXHJcblxyXG4gICAgLy8g5LiK5Lyg5oyJ6ZKuXHJcbiAgICAgICAgJHVwbG9hZCA9ICR3cmFwLmZpbmQoICcueC11cGxvYWRCdG4nICksXHJcblxyXG4gICAgLy8g5rKh6YCJ5oup5paH5Lu25LmL5YmN55qE5YaF5a6544CCXHJcbiAgICAgICAgJHBsYWNlSG9sZGVyID0gJHdyYXAuZmluZCggJy54LXBsYWNlaG9sZGVyJyApLFxyXG5cclxuICAgICAgICAkcHJvZ3Jlc3MgPSAkc3RhdHVzQmFyLmZpbmQoICcucHJvZ3Jlc3MnICkuaGlkZSgpLFxyXG5cclxuXHJcbiAgICAvLyDmt7vliqDnmoTmlofku7bmlbDph49cclxuICAgICAgICBmaWxlQ291bnQgPSAwLFxyXG5cclxuICAgIC8vIOa3u+WKoOeahOaWh+S7tuaAu+Wkp+Wwj1xyXG4gICAgICAgIGZpbGVTaXplID0gMCxcclxuXHJcbiAgICAvLyDkvJjljJZyZXRpbmEsIOWcqHJldGluYeS4i+i/meS4quWAvOaYrzJcclxuICAgICAgICByYXRpbyA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDEsXHJcblxyXG4gICAgLy8g57yp55Wl5Zu+5aSn5bCPXHJcbiAgICAgICAgdGh1bWJuYWlsV2lkdGggPSAxMTAgKiByYXRpbyxcclxuICAgICAgICB0aHVtYm5haWxIZWlnaHQgPSAxMTAgKiByYXRpbyxcclxuXHJcbiAgICAvLyDlj6/og73mnIlwZWRkaW5nLCByZWFkeSwgdXBsb2FkaW5nLCBjb25maXJtLCBkb25lLlxyXG4gICAgICAgIHN0YXRlID0gJ3BlZGRpbmcnLFxyXG5cclxuICAgIC8vIOaJgOacieaWh+S7tueahOi/m+W6puS/oeaBr++8jGtleeS4umZpbGUgaWRcclxuICAgICAgICBwZXJjZW50YWdlcyA9IHt9LFxyXG4gICAgLy8g5Yik5pat5rWP6KeI5Zmo5piv5ZCm5pSv5oyB5Zu+54mH55qEYmFzZTY0XHJcblxyXG4gICAgLy8gV2ViVXBsb2FkZXLlrp7kvotcclxuICAgICAgICB1cGxvYWRlcjtcclxuXHJcbiAgICAvL+WbvueJh+S4iuS8oOWSjOaWh+S7tuS4iuS8oOWMuuWIhiDlj4LmlbBcclxuICAgIHZhciBvcHRfZmlsZSA9IHtcclxuICAgICAgICBkb206JycsXHJcbiAgICAgICAgZmlsZUJ1dHRvbjoge1xyXG4gICAgICAgICAgICBpZDogJy54LWZpbGVQaWNrZXInLFxyXG4gICAgICAgICAgICBsYWJlbDogJ+aJuemHj+S4iuS8oCdcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFkZEJ1dHRvbjp7XHJcbiAgICAgICAgICAgIGlkOiAnLngtZmlsZVBpY2tlci1hZGQnLFxyXG4gICAgICAgICAgICBsYWJlbDogJ+e7p+e7rea3u+WKoCdcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRuZDogJy54LWRuZEFyZWEnLFxyXG4gICAgICAgIHBhc3RlOiAnLngtdXBsb2FkZXInLFxyXG4gICAgICAgIHN3ZjogJy4uLy4uL2Rpc3QvVXBsb2FkZXIuc3dmJyxcclxuICAgICAgICBjaHVua2VkOiBmYWxzZSxcclxuICAgICAgICBjaHVua1NpemU6IDUxMiAqIDEwMjQsXHJcbiAgICAgICAgc2VydmVyOiAnP209QWRtaW4mYz1VcGxvYWQmYT11cGxvYWQnLFxyXG4gICAgICAgIGNvbXByZXNzOmZhbHNlLFxyXG4gICAgICAgIC8vIOemgeaOieWFqOWxgOeahOaLluaLveWKn+iDveOAgui/meagt+S4jeS8muWHuueOsOWbvueJh+aLlui/m+mhtemdoueahOaXtuWAme+8jOaKiuWbvueJh+aJk+W8gOOAglxyXG4gICAgICAgIGRpc2FibGVHbG9iYWxEbmQ6IHRydWUsXHJcbiAgICAgICAgZmlsZU51bUxpbWl0OiAzMDAsXHJcbiAgICAgICAgZmlsZVNpemVMaW1pdDogMjAwICogMTAyNCAqIDEwMjQsICAgIC8vIDIwMCBNXHJcbiAgICAgICAgZmlsZVNpbmdsZVNpemVMaW1pdDogNTAgKiAxMDI0ICogMTAyNCAgICAvLyA1MCBNXHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyDlrp7kvovljJZcclxuICAgIHdpbmRvdy54VXBsb2FkID0gZnVuY3Rpb24gKG9wdCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgdXBsb2FkKG9wdCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBkZWZhdWx0T3B0aW9uID0gb3B0X2ZpbGU7XHJcbiAgICB2YXIgdXBsb2FkPWZ1bmN0aW9uKG9wdCxkb20pe1xyXG4gICAgICAgIHRoaXMub3B0ID0gJC5leHRlbmQodHJ1ZSx7fSxkZWZhdWx0T3B0aW9uLG9wdCk7XHJcbiAgICAgICAgaWYodGhpcy5pc0ZsYXNoKXtcclxuICAgICAgICAgICAgdGhpcy5pbml0KHRoaXMub3B0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG5cclxuICAgIHVwbG9hZC5wcm90b3R5cGUgPXtcclxuICAgICAgICBpc1N1cHBvcnRCYXNlNjQ6KCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICAgICAgdmFyIHN1cHBvcnQgPSB0cnVlO1xyXG4gICAgICAgICAgICBkYXRhLm9ubG9hZCA9IGRhdGEub25lcnJvciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgaWYoIHRoaXMud2lkdGggIT0gMSB8fCB0aGlzLmhlaWdodCAhPSAxICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1cHBvcnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgZGF0YS5zcmMgPSBcImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSUFBQUFBQUFQLy8veXdBQUFBQUFRQUJBQUFDQVV3QU93PT1cIjtcclxuICAgICAgICAgICAgcmV0dXJuIHN1cHBvcnQ7XHJcbiAgICAgICAgfSApKCksXHJcbiAgICAgICAgLy/mo4DmtYvmmK/lkKblt7Lnu4/lronoo4VmbGFzaO+8jOajgOa1i2ZsYXNo55qE54mI5pysXHJcbiAgICAgICAgZmxhc2hWZXJzaW9uIDogKCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHZlcnNpb247XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB2ZXJzaW9uID0gbmF2aWdhdG9yLnBsdWdpbnNbICdTaG9ja3dhdmUgRmxhc2gnIF07XHJcbiAgICAgICAgICAgICAgICB2ZXJzaW9uID0gdmVyc2lvbi5kZXNjcmlwdGlvbjtcclxuICAgICAgICAgICAgfSBjYXRjaCAoIGV4ICkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uID0gbmV3IEFjdGl2ZVhPYmplY3QoJ1Nob2Nrd2F2ZUZsYXNoLlNob2Nrd2F2ZUZsYXNoJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLkdldFZhcmlhYmxlKCckdmVyc2lvbicpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoIGV4MiApIHtcclxuICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uID0gJzAuMCc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmVyc2lvbiA9IHZlcnNpb24ubWF0Y2goIC9cXGQrL2cgKTtcclxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoIHZlcnNpb25bIDAgXSArICcuJyArIHZlcnNpb25bIDEgXSwgMTAgKTtcclxuICAgICAgICB9ICkoKSxcclxuXHJcbiAgICAgICAgc3VwcG9ydFRyYW5zaXRpb24gOiAoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdmFyIHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJykuc3R5bGUsXHJcbiAgICAgICAgICAgICAgICByID0gJ3RyYW5zaXRpb24nIGluIHMgfHxcclxuICAgICAgICAgICAgICAgICAgICAnV2Via2l0VHJhbnNpdGlvbicgaW4gcyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICdNb3pUcmFuc2l0aW9uJyBpbiBzIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgJ21zVHJhbnNpdGlvbicgaW4gcyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICdPVHJhbnNpdGlvbicgaW4gcztcclxuICAgICAgICAgICAgcyA9IG51bGw7XHJcbiAgICAgICAgICAgIHJldHVybiByO1xyXG4gICAgICAgIH0pKCksXHJcbiAgICAgICAgaXNGbGFzaDpmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBpZiAoICFXZWJVcGxvYWRlci5VcGxvYWRlci5zdXBwb3J0KCdmbGFzaCcpICYmIFdlYlVwbG9hZGVyLmJyb3dzZXIuaWUgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gZmxhc2gg5a6J6KOF5LqG5L2G5piv54mI5pys6L+H5L2O44CCXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mbGFzaFZlcnNpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24oY29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvd1snZXhwcmVzc2luc3RhbGxjYWxsYmFjayddID0gZnVuY3Rpb24oIHN0YXRlICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKHN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnRG93bmxvYWQuQ2FuY2VsbGVkJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ+aCqOWPlua2iOS6huabtOaWsO+8gScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnRG93bmxvYWQuRmFpbGVkJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ+WuieijheWksei0pScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ+WuieijheW3suaIkOWKn++8jOivt+WIt+aWsO+8gScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB3aW5kb3dbJ2V4cHJlc3NpbnN0YWxsY2FsbGJhY2snXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzd2YgPSAnLi9leHByZXNzSW5zdGFsbC5zd2YnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpbnNlcnQgZmxhc2ggb2JqZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBodG1sID0gJzxvYmplY3QgdHlwZT1cImFwcGxpY2F0aW9uLycgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3gtc2hvY2t3YXZlLWZsYXNoXCIgZGF0YT1cIicgKyAgc3dmICsgJ1wiICc7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoV2ViVXBsb2FkZXIuYnJvd3Nlci5pZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnY2xhc3NpZD1cImNsc2lkOmQyN2NkYjZlLWFlNmQtMTFjZi05NmI4LTQ0NDU1MzU0MDAwMFwiICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJ3dpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEwMCVcIiBzdHlsZT1cIm91dGxpbmU6MFwiPicgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8cGFyYW0gbmFtZT1cIm1vdmllXCIgdmFsdWU9XCInICsgc3dmICsgJ1wiIC8+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHBhcmFtIG5hbWU9XCJ3bW9kZVwiIHZhbHVlPVwidHJhbnNwYXJlbnRcIiAvPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxwYXJhbSBuYW1lPVwiYWxsb3dzY3JpcHRhY2Nlc3NcIiB2YWx1ZT1cImFsd2F5c1wiIC8+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9vYmplY3Q+JztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5odG1sKGh0bWwpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9KSgkd3JhcCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWOi+agueWwseayoeacieWuiei9rOOAglxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkd3JhcC5odG1sKCc8YSBocmVmPVwiaHR0cDovL3d3dy5hZG9iZS5jb20vZ28vZ2V0Zmxhc2hwbGF5ZXJcIiB0YXJnZXQ9XCJfYmxhbmtcIiBib3JkZXI9XCIwXCI+PGltZyBhbHQ9XCJnZXQgZmxhc2ggcGxheWVyXCIgc3JjPVwiaHR0cDovL3d3dy5hZG9iZS5jb20vbWFjcm9tZWRpYS9zdHlsZV9ndWlkZS9pbWFnZXMvMTYweDQxX0dldF9GbGFzaF9QbGF5ZXIuanBnXCIgLz48L2E+Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFXZWJVcGxvYWRlci5VcGxvYWRlci5zdXBwb3J0KCkpIHtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KCAnV2ViIFVwbG9hZGVyIOS4jeaUr+aMgeaCqOeahOa1j+iniOWZqO+8gScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBpbml0OmZ1bmN0aW9uKG9wdCl7XHJcblxyXG4gICAgICAgICAgICB2YXIgZmlsZVR5cGUgPSBvcHQuZmlsZVR5cGU7XHJcbiAgICAgICAgICAgIHZhciBhZGRCdXR0b24gPSBvcHQuYWRkQnV0dG9uO1xyXG5cclxuICAgICAgICAgICAgb3B0LnBpY2sgPSBvcHQuZmlsZUJ1dHRvbjtcclxuICAgICAgICAgICAgdmFyIF90aGF0ID0gdGhpcztcclxuICAgICAgICAgICAgaWYoZmlsZVR5cGUgPT0gMSl7XHJcbiAgICAgICAgICAgICAgICBvcHRbJ2FjY2VwdCddID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnSW1hZ2VzJyxcclxuICAgICAgICAgICAgICAgICAgICBleHRlbnNpb25zOiAnZ2lmLGpwZyxqcGVnLGJtcCxwbmcnLFxyXG4gICAgICAgICAgICAgICAgICAgIG1pbWVUeXBlczonaW1hZ2UvZ2lmLGltYWdlL2pwZyxpbWFnZS9qcGVnLGltYWdlL2JtcCxpbWFnZS9wbmcnXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgb3B0WydmaWxlQnV0dG9uJ11bJ211bHRpcGxlJ10gPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB1cGxvYWRlciA9IFdlYlVwbG9hZGVyLmNyZWF0ZShvcHQpO1xyXG4gICAgICAgICAgICAvLyDmt7vliqDigJzmt7vliqDmlofku7bigJ3nmoTmjInpkq7vvIxcclxuICAgICAgICAgICAgdXBsb2FkZXIuYWRkQnV0dG9uKGFkZEJ1dHRvbik7XHJcblxyXG5cclxuICAgICAgICAgICAgdXBsb2FkZXIub24oJ3JlYWR5JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cudXBsb2FkZXIgPSB1cGxvYWRlcjtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB1cGxvYWRlci5vblVwbG9hZFByb2dyZXNzID0gZnVuY3Rpb24oIGZpbGUsIHBlcmNlbnRhZ2UgKSB7XHJcbiAgICAgICAgICAgICAgICAvL+i/m+W6puadoeWbnuiwg1xyXG4gICAgICAgICAgICAgICAgaWYoZmlsZVR5cGU9PTIpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgJGxpID0gJCgnIycgKyBmaWxlLmlkKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHBlcmNlbnQgPSAkbGkuZmluZCgnLnByb2dyZXNzIHNwYW4nKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHBlcmNlbnQuY3NzKCd3aWR0aCcsIHBlcmNlbnRhZ2UgKiAxMDAgKyAnJScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBlcmNlbnRhZ2VzW2ZpbGUuaWRdWzFdID0gcGVyY2VudGFnZTtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVUb3RhbFByb2dyZXNzKCk7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZihmaWxlVHlwZSA9PSAxKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHN0YXR1c0Jhci5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLnByb2dyZXNzKE1hdGgucm91bmQoIHBlcmNlbnRhZ2UgKiAxMDAgKSArICclJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdXBsb2FkZXIub25VcGxvYWRTdWNjZXNzID0gZnVuY3Rpb24oZmlsZSl7XHJcbiAgICAgICAgICAgICAgICAvL+S4iuS8oOaIkOWKn+WQjuiwg+eUqFxyXG4gICAgICAgICAgICAgICAgaWYoZmlsZVR5cGUgPT0xKXtcclxuICAgICAgICAgICAgICAgICAgICAkd3JhcC5maW5kKCcueC1pbmZvJykudGV4dCgn5aS05YOP5LiK5Lyg5oiQ5Yqf77yM5oC75aSn5bCP77yaJytnZXRTaXplKGZpbGUuc2l6ZSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdXBsb2FkZXIub25VcGxvYWRBY2NlcHQgPSBmdW5jdGlvbihvYmplY3QscmV0KXtcclxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5zdWNjZXNzKG9iamVjdCxyZXQpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdXBsb2FkZXIub25GaWxlUXVldWVkID0gZnVuY3Rpb24oIGZpbGUgKSB7XHJcbiAgICAgICAgICAgICAgICAvL+a3u+WKoOWIsOmYn+WIl1xyXG4gICAgICAgICAgICAgICAgaWYoZmlsZVR5cGUgPT0gMil7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZUNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZVNpemUgKz0gZmlsZS5zaXplO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGZpbGVDb3VudCA9PT0gMSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHBsYWNlSG9sZGVyLmFkZENsYXNzKCAnZWxlbWVudC1pbnZpc2libGUnICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzdGF0dXNCYXIuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyRzdGF0dXNCYXIuY3NzKHsnZGlzcGxheSc6J2Jsb2NrJ30pXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGFkZEZpbGUoIGZpbGUgKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRTdGF0ZSggJ3JlYWR5JyApO1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVRvdGFsUHJvZ3Jlc3MoKTtcclxuICAgICAgICAgICAgICAgIH1lbHNlIGlmKGZpbGVUeXBlID09MSl7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/ljZXlvKDlm77niYdcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYWRkRmlsZUltZyhmaWxlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIHN0YXRlID09PSAncmVhZHknICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBsb2FkZXIudXBsb2FkKGZpbGUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBzdGF0ZSA9PT0gJ3BhdXNlZCcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwbG9hZGVyLnVwbG9hZChmaWxlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBzdGF0ZSA9PT0gJ3VwbG9hZGluZycgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwbG9hZGVyLnN0b3AoZmlsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB1cGxvYWRlci5vblVwbG9hZEVycm9yID0gZnVuY3Rpb24oZmlsZSxyZWFzb24pe1xyXG4gICAgICAgICAgICAgICAgaWYocmVhc29uID09J2h0dHAnKXtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuacjeWKoeWZqOmUmeivr1wiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdXBsb2FkZXIub25GaWxlRGVxdWV1ZWQgPSBmdW5jdGlvbiggZmlsZSApIHtcclxuICAgICAgICAgICAgICAgIC8v5paH5Lu25LuO6Zif5YiX5Lit56e76ZmkXHJcbiAgICAgICAgICAgICAgICBpZihmaWxlVHlwZT09Mil7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZUNvdW50LS07XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZVNpemUgLT0gZmlsZS5zaXplO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoICFmaWxlQ291bnQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFN0YXRlKCAncGVkZGluZycgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUZpbGUoIGZpbGUgKTtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVUb3RhbFByb2dyZXNzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdXBsb2FkZXIub25VcGxvYWRGaW5pc2hlZCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBpZihmaWxlVHlwZSA9PSAyKXtcclxuICAgICAgICAgICAgICAgICAgICBzZXRTdGF0ZSggJ2NvbmZpcm0nICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHVwbG9hZGVyLm9uU3RhcnRVcGxvYWQgPSBmdW5jdGlvbihmaWxlKXtcclxuICAgICAgICAgICAgICAgIHNldFN0YXRlKCAndXBsb2FkaW5nJyApO1xyXG5cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdXBsb2FkZXIub25TdG9wVXBsb2FkID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5pqC5YGcXCIpO1xyXG4gICAgICAgICAgICAgICAgc2V0U3RhdGUoICdwYXVzZWQnICk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB1cGxvYWRlci5vbkVycm9yID0gZnVuY3Rpb24oIGNvZGUgKSB7XHJcbiAgICAgICAgICAgICAgICAvL+mUmeivr+S/oeaBr1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChjb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnUV9UWVBFX0RFTklFRCcgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgn5LiN56ym5ZCI55qE5paH5Lu257G75Z6LJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1FfRVhDRUVEX1NJWkVfTElNSVQnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgn5paH5Lu25oC75aSn5bCP6LaF5Ye677yM6K+36YeN5paw6K6+572uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1FfRVhDRUVEX05VTV9MSU1JVCc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfmlofku7bmlbDph4/ov4flpJrvvIzor7fliIbmibnkuIrkvKAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICR1cGxvYWQub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAvL+eCueWHu+S4iuS8oOaMiemSrlxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLlvIDlp4vkuIrkvKBcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoICQodGhpcykuaGFzQ2xhc3MoICdkaXNhYmxlZCcgKSApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCBzdGF0ZSA9PT0gJ3JlYWR5JyApIHtcclxuICAgICAgICAgICAgICAgICAgICB1cGxvYWRlci51cGxvYWQoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHN0YXRlID09PSAncGF1c2VkJyApIHtcclxuICAgICAgICAgICAgICAgICAgICB1cGxvYWRlci51cGxvYWQoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHN0YXRlID09PSAndXBsb2FkaW5nJyApIHtcclxuICAgICAgICAgICAgICAgICAgICB1cGxvYWRlci5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgJHdyYXAub24oICdjbGljaycsICcucmV0cnknLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB1cGxvYWRlci5yZXRyeSgpO1xyXG4gICAgICAgICAgICB9ICk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICR1cGxvYWQuYWRkQ2xhc3MoICdzdGF0ZS0nICsgc3RhdGUgKTtcclxuICAgICAgICAgICAgZnVuY3Rpb24gYWRkRmlsZSggZmlsZSApIHtcclxuICAgICAgICAgICAgICAgIC8vaHRtbOaWh+S7tuWIl+ihqFxyXG5cclxuICAgICAgICAgICAgICAgIHZhciAkbGkgPSAkKCAnPGxpIGlkPVwiJyArIGZpbGUuaWQgKyAnXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8cCBjbGFzcz1cInRpdGxlXCI+JyArIGZpbGUubmFtZSArICc8L3A+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8cCBjbGFzcz1cImltZ1dyYXBcIj48L3A+JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxwIGNsYXNzPVwicHJvZ3Jlc3NcIj48c3Bhbj48L3NwYW4+PC9wPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPC9saT4nICksXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRidG5zID0gJCgnPGRpdiBjbGFzcz1cImZpbGUtcGFuZWxcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiY2FuY2VsXCI+5Yig6ZmkPC9zcGFuPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJyb3RhdGVSaWdodFwiPuWQkeWPs+aXi+i9rDwvc3Bhbj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwicm90YXRlTGVmdFwiPuWQkeW3puaXi+i9rDwvc3Bhbj48L2Rpdj4nKS5hcHBlbmRUbyggJGxpICksXHJcbiAgICAgICAgICAgICAgICAgICAgJHByZ3Jlc3MgPSAkbGkuZmluZCgncC5wcm9ncmVzcyBzcGFuJyksXHJcbiAgICAgICAgICAgICAgICAgICAgJHdyYXAgPSAkbGkuZmluZCggJ3AuaW1nV3JhcCcgKSxcclxuICAgICAgICAgICAgICAgICAgICAkaW5mbyA9ICQoJzxwIGNsYXNzPVwiZXJyb3JcIj48L3A+JyksXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dCA9ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHNob3dFcnJvciA9IGZ1bmN0aW9uKCBjb2RlICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2goIGNvZGUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdleGNlZWRfc2l6ZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA9ICfmlofku7blpKflsI/otoXlh7onO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2ludGVycnVwdCc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA9ICfkuIrkvKDmmoLlgZwnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA9ICfkuIrkvKDlpLHotKXvvIzor7fph43or5UnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkaW5mby50ZXh0KCB0ZXh0ICkuYXBwZW5kVG8oICRsaSApO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGlmICggZmlsZS5nZXRTdGF0dXMoKSA9PT0gJ2ludmFsaWQnICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNob3dFcnJvciggZmlsZS5zdGF0dXNUZXh0ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZmlsZS5nZXRTdGF0dXMoKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEB0b2RvIGxhenlsb2FkXHJcbiAgICAgICAgICAgICAgICAgICAgJHdyYXAudGV4dCggJ+mihOiniOS4rScgKTtcclxuICAgICAgICAgICAgICAgICAgICB1cGxvYWRlci5tYWtlVGh1bWIoIGZpbGUsIGZ1bmN0aW9uKCBlcnJvciwgc3JjICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW1nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGVycm9yICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHdyYXAudGV4dCggJ+S4jeiDvemihOiniCcgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX3RoYXQuaXNTdXBwb3J0QmFzZTY0ICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nID0gJCgnPGltZyBzcmM9XCInK3NyYysnXCI+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkd3JhcC5lbXB0eSgpLmFwcGVuZCggaW1nICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIumihOiniOWHuumUmVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIHRodW1ibmFpbFdpZHRoLCB0aHVtYm5haWxIZWlnaHQgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcGVyY2VudGFnZXNbIGZpbGUuaWQgXSA9IFsgZmlsZS5zaXplLCAwIF07XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZS5yb3RhdGlvbiA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZmlsZS5vbignc3RhdHVzY2hhbmdlJywgZnVuY3Rpb24oIGN1ciwgcHJldiApIHtcclxuICAgICAgICAgICAgICAgICAgICAvL+eKtuaAgeaUueWPmFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggcHJldiA9PT0gJ3Byb2dyZXNzJyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHByZ3Jlc3MuaGlkZSgpLndpZHRoKDApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHByZXYgPT09ICdxdWV1ZWQnICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkbGkub2ZmKCAnbW91c2VlbnRlciBtb3VzZWxlYXZlJyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkYnRucy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOaIkOWKn1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICggY3VyID09PSAnZXJyb3InIHx8IGN1ciA9PT0gJ2ludmFsaWQnICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggZmlsZS5zdGF0dXNUZXh0ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dFcnJvciggZmlsZS5zdGF0dXNUZXh0ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcmNlbnRhZ2VzWyBmaWxlLmlkIF1bIDEgXSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggY3VyID09PSAnaW50ZXJydXB0JyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0Vycm9yKCAnaW50ZXJydXB0JyApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIGN1ciA9PT0gJ3F1ZXVlZCcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbmZvLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkcHJncmVzcy5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGVyY2VudGFnZXNbIGZpbGUuaWQgXVsgMSBdID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBjdXIgPT09ICdwcm9ncmVzcycgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbmZvLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkcHJncmVzcy5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBjdXIgPT09ICdjb21wbGV0ZScgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRwcmdyZXNzLmhpZGUoKS53aWR0aCgwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGxpLmFwcGVuZCggJzxzcGFuIGNsYXNzPVwic3VjY2Vzc1wiPjwvc3Bhbj4nICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAkbGkucmVtb3ZlQ2xhc3MoICdzdGF0ZS0nICsgcHJldiApLmFkZENsYXNzKCAnc3RhdGUtJyArIGN1ciApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgJGxpLm9uKCAnbW91c2VlbnRlcicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRidG5zLnN0b3AoKS5hbmltYXRlKHtoZWlnaHQ6IDMwfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAkbGkub24oICdtb3VzZWxlYXZlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGJ0bnMuc3RvcCgpLmFuaW1hdGUoe2hlaWdodDogMH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgJGJ0bnMub24oICdjbGljaycsICdzcGFuJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gJCh0aGlzKS5pbmRleCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWc7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggaW5kZXggKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwbG9hZGVyLnJlbW92ZUZpbGUoIGZpbGUgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUucm90YXRpb24gKz0gOTA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUucm90YXRpb24gLT0gOTA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggc3VwcG9ydFRyYW5zaXRpb24gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZyA9ICdyb3RhdGUoJyArIGZpbGUucm90YXRpb24gKyAnZGVnKSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR3cmFwLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiBkZWcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLW1vcy10cmFuc2Zvcm0nOiBkZWcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLW8tdHJhbnNmb3JtJzogZGVnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6IGRlZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkd3JhcC5jc3MoICdmaWx0ZXInLCAncHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LkJhc2ljSW1hZ2Uocm90YXRpb249JysgKH5+KChmaWxlLnJvdGF0aW9uLzkwKSU0ICsgNCklNCkgKycpJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAkbGkuYXBwZW5kVG8oJHF1ZXVlKTtcclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIOi0n+i0o3ZpZXfnmoTplIDmr4FcclxuICAgICAgICAgICAgZnVuY3Rpb24gcmVtb3ZlRmlsZSggZmlsZSApIHtcclxuICAgICAgICAgICAgICAgIHZhciAkbGkgPSAkKCcjJytmaWxlLmlkKTtcclxuXHJcbiAgICAgICAgICAgICAgICBkZWxldGUgcGVyY2VudGFnZXNbIGZpbGUuaWQgXTtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVRvdGFsUHJvZ3Jlc3MoKTtcclxuICAgICAgICAgICAgICAgICRsaS5vZmYoKS5maW5kKCcuZmlsZS1wYW5lbCcpLm9mZigpLmVuZCgpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVUb3RhbFByb2dyZXNzKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxvYWRlZCA9IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgdG90YWwgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHNwYW5zID0gJHByb2dyZXNzLmNoaWxkcmVuKCksXHJcbiAgICAgICAgICAgICAgICAgICAgcGVyY2VudDtcclxuXHJcbiAgICAgICAgICAgICAgICAkLmVhY2goIHBlcmNlbnRhZ2VzLCBmdW5jdGlvbiggaywgdiApIHtcclxuICAgICAgICAgICAgICAgICAgICB0b3RhbCArPSB2WyAwIF07XHJcbiAgICAgICAgICAgICAgICAgICAgbG9hZGVkICs9IHZbIDAgXSAqIHZbIDEgXTtcclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBwZXJjZW50ID0gdG90YWwgPyBsb2FkZWQgLyB0b3RhbCA6IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgb3B0LnByb2dyZXNzKE1hdGgucm91bmQoIHBlcmNlbnQgKiAxMDAgKSArICclJyk7XHJcbiAgICAgICAgICAgICAgICBzcGFucy5lcSggMCApLnRleHQoIE1hdGgucm91bmQoIHBlcmNlbnQgKiAxMDAgKSArICclJyApO1xyXG4gICAgICAgICAgICAgICAgc3BhbnMuZXEoIDEgKS5jc3MoICd3aWR0aCcsIE1hdGgucm91bmQoIHBlcmNlbnQgKiAxMDAgKSArICclJyApO1xyXG4gICAgICAgICAgICAgICAgaWYoZmlsZVR5cGUgPT0gMil7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlU3RhdHVzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVTdGF0dXMoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGV4dCA9ICcnLCBzdGF0cztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIHN0YXRlID09PSAncmVhZHknICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQgPSAn6YCJ5LitJyArIGZpbGVDb3VudCArICfkuKrmlofku7bvvIzlhbEnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgV2ViVXBsb2FkZXIuZm9ybWF0U2l6ZSggZmlsZVNpemUgKSArICfjgIInO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggc3RhdGUgPT09ICdjb25maXJtJyApIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGF0cyA9IHVwbG9hZGVyLmdldFN0YXRzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBzdGF0cy51cGxvYWRGYWlsTnVtICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gJ+W3suaIkOWKn+S4iuS8oCcgKyBzdGF0cy5zdWNjZXNzTnVtKyAn5Liq5paH5Lu277yMJytcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzLnVwbG9hZEZhaWxOdW0gKyAn5Liq5paH5Lu25LiK5Lyg5aSx6LSl77yMPGEgY2xhc3M9XCJyZXRyeVwiIGhyZWY9XCIjXCI+6YeN5paw5LiK5LygPC9hPuWksei0peaWh+S7tic7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHMgPSB1cGxvYWRlci5nZXRTdGF0cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQgPSAn5YWxJyArIGZpbGVDb3VudCArICflvKDvvIgnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgV2ViVXBsb2FkZXIuZm9ybWF0U2l6ZSggZmlsZVNpemUgKSAgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAn77yJ77yM5bey5LiK5LygJyArIHN0YXRzLnN1Y2Nlc3NOdW0gKyAn5bygJztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBzdGF0cy51cGxvYWRGYWlsTnVtICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9ICfvvIzlpLHotKUnICsgc3RhdHMudXBsb2FkRmFpbE51bSArICflvKAnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAkaW5mby5odG1sKCB0ZXh0ICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHNldFN0YXRlKCB2YWwgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmlsZSwgc3RhdHM7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCB2YWwgPT09IHN0YXRlICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAkdXBsb2FkLnJlbW92ZUNsYXNzKCAnc3RhdGUtJyArIHN0YXRlICk7XHJcbiAgICAgICAgICAgICAgICAkdXBsb2FkLmFkZENsYXNzKCAnc3RhdGUtJyArIHZhbCApO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUgPSB2YWw7XHJcblxyXG4gICAgICAgICAgICAgICAgc3dpdGNoICggc3RhdGUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncGVkZGluZyc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRwbGFjZUhvbGRlci5yZW1vdmVDbGFzcyggJ2VsZW1lbnQtaW52aXNpYmxlJyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkcXVldWUuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc3RhdHVzQmFyLmFkZENsYXNzKCAnZWxlbWVudC1pbnZpc2libGUnICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwbG9hZGVyLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlYWR5JzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHBsYWNlSG9sZGVyLmFkZENsYXNzKCAnZWxlbWVudC1pbnZpc2libGUnICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoIGFkZEJ1dHRvbi5pZCApLnJlbW92ZUNsYXNzKCAnZWxlbWVudC1pbnZpc2libGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHF1ZXVlLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHN0YXR1c0Jhci5yZW1vdmVDbGFzcygnZWxlbWVudC1pbnZpc2libGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBsb2FkZXIucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndXBsb2FkaW5nJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCggYWRkQnV0dG9uLmlkICkuYWRkQ2xhc3MoICdlbGVtZW50LWludmlzaWJsZScgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHByb2dyZXNzLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHVwbG9hZC50ZXh0KCAn5pqC5YGc5LiK5LygJyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncGF1c2VkJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHByb2dyZXNzLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHVwbG9hZC50ZXh0KCAn57un57ut5LiK5LygJyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29uZmlybSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRwcm9ncmVzcy5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoIGFkZEJ1dHRvbi5pZCApLnJlbW92ZUNsYXNzKCAnZWxlbWVudC1pbnZpc2libGUnICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR1cGxvYWQudGV4dCggJ+W8gOWni+S4iuS8oCcgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzID0gdXBsb2FkZXIuZ2V0U3RhdHMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBzdGF0cy5zdWNjZXNzTnVtICYmICFzdGF0cy51cGxvYWRGYWlsTnVtICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0U3RhdGUoICdmaW5pc2gnICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZmluaXNoJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHMgPSB1cGxvYWRlci5nZXRTdGF0cygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHN0YXRzLnN1Y2Nlc3NOdW0gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggJ+S4iuS8oOaIkOWKnycgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOayoeacieaIkOWKn+eahOWbvueJh++8jOmHjeiuvlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSAnZG9uZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKGZpbGVUeXBlID09IDIpe1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVN0YXR1cygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFNpemUoc2l6ZSl7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RyO1xyXG4gICAgICAgICAgICAgICAgaWYoc2l6ZS8xMDI0PjEpe1xyXG4gICAgICAgICAgICAgICAgICAgIHNpemUgPSBzaXplLzEwMjQ7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyID0gJ0tCJztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZihzaXplLzEwMjQ+MSl7XHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZSA9IHNpemUvMTAyNDtcclxuICAgICAgICAgICAgICAgICAgICBzdHIgPSAnTUInO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoc2l6ZS8xMDI0ID4xKXtcclxuICAgICAgICAgICAgICAgICAgICBzaXplID0gc2l6ZS8xMDI0O1xyXG4gICAgICAgICAgICAgICAgICAgIHN0ciA9ICdHQic7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzaXplID0gICBzaXplLnRvRml4ZWQoMik7XHJcbiAgICAgICAgICAgICAgICBzdHIgPSBzaXplICsgc3RyO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0cjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gYWRkRmlsZUltZyhmaWxlKXtcclxuICAgICAgICAgICAgICAgIHZhciBodG1sID0gJzxkaXYgY2xhc3M9XCJpbWdGaWxlXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxpbWcgc3JjPVwiXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW1nO1xyXG4gICAgICAgICAgICAgICAgdmFyICAgJGluZm8gPSAkKCc8cCBjbGFzcz1cImVycm9yXCI+PC9wPicpO1xyXG4gICAgICAgICAgICAgICAgdmFyICAgdGV4dCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgdmFyICBzaG93RXJyb3IgPSBmdW5jdGlvbiggY29kZSApIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2goIGNvZGUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2V4Y2VlZF9zaXplJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSAn5paH5Lu25aSn5bCP6LaF5Ye6JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnaW50ZXJydXB0JzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSAn5LiK5Lyg5pqC5YGcJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gJ+S4iuS8oOWksei0pe+8jOivt+mHjeivlSAnKyc8YSBjbGFzcz1cInJldHJ5XCIgaHJlZj1cIiNcIj7ph43mlrDkuIrkvKA8L2E+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAkaW5mby5odG1sKCB0ZXh0ICkuYXBwZW5kVG8oICR3cmFwICk7XHJcblxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIGZpbGUuZ2V0U3RhdHVzKCkgPT09ICdpbnZhbGlkJyApIHtcclxuICAgICAgICAgICAgICAgICAgICBzaG93RXJyb3IoIGZpbGUuc3RhdHVzVGV4dCApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB1cGxvYWRlci5tYWtlVGh1bWIoZmlsZSwgZnVuY3Rpb24gKGVycm9yLCBzcmMpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8kd3JhcC50ZXh0KCAn5LiN6IO96aKE6KeIJyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9yZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGF0LmlzU3VwcG9ydEJhc2U2NCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nID0gJCgnPGltZyBzcmM9XCInICsgc3JjICsgJ1wiPjxzcGFuIGNsYXNzPVwieC1maWxlTmFtZVwiPicgKyBmaWxlLm5hbWUgKyAnPC9zcGFuPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHdyYXAuZmluZChcIi54LWltZ0ZpbGVcIikuYXBwZW5kKGltZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIumihOiniOWHuumUmVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIHRodW1ibmFpbFdpZHRoLCB0aHVtYm5haWxIZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgZmlsZS5vbignc3RhdHVzY2hhbmdlJywgZnVuY3Rpb24oIGN1ciwgcHJldiApIHtcclxuICAgICAgICAgICAgICAgICAgICAvL+eKtuaAgeaUueWPmFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOaIkOWKn1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICggY3VyID09PSAnZXJyb3InIHx8IGN1ciA9PT0gJ2ludmFsaWQnICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggZmlsZS5zdGF0dXNUZXh0ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dFcnJvciggZmlsZS5zdGF0dXNUZXh0ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggY3VyID09PSAnaW50ZXJydXB0JyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0Vycm9yKCAnaW50ZXJydXB0JyApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIGN1ciA9PT0gJ3F1ZXVlZCcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbmZvLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIGN1ciA9PT0gJ3Byb2dyZXNzJyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGluZm8ucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggY3VyID09PSAnY29tcGxldGUnICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBzZXRTdGF0ZSggJ3JlYWR5JyApO1xyXG5cclxuICAgICAgICAgICAgICAgICQoXCIueC1zdGF0dXNCYXIgLngtdXBsb2FkLWJ0bnNcIikucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAvLyR3cmFwLmFwcGVuZCgkcHJvZ3Jlc3MpO1xyXG4gICAgICAgICAgICAgICAgLy8kKFwiLngtcXVldWVMaXN0XCIpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB1cGRhdGVUb3RhbFByb2dyZXNzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vdXBsb2FkZXIgPSBXZWJVcGxvYWRlci5jcmVhdGUob3B0X2ltZyk7XHJcblxyXG5cclxuICAgIC8vIOW9k+acieaWh+S7tua3u+WKoOi/m+adpeaXtuaJp+ihjO+8jOi0n+i0o3ZpZXfnmoTliJvlu7pcclxuXHJcblxyXG5cclxufSkoICQgKTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50cy91cGxvYWQvdXBsb2FkLmpzXG4vLyBtb2R1bGUgaWQgPSA0N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 48 */
/***/ function(module, exports, __webpack_require__) {

	eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*! WebUploader 0.1.6 */\r\n\r\n\r\n/**\r\n * @fileOverview 让内部各个部件的代码可以用[amd](https://github.com/amdjs/amdjs-api/wiki/AMD)模块定义方式组织起来。\r\n *\r\n * AMD API 内部的简单不完全实现，请忽略。只有当WebUploader被合并成一个文件的时候才会引入。\r\n */\r\n(function( root, factory ) {\r\n    var modules = {},\r\n\r\n        // 内部require, 简单不完全实现。\r\n        // https://github.com/amdjs/amdjs-api/wiki/require\r\n        _require = function( deps, callback ) {\r\n            var args, len, i;\r\n\r\n            // 如果deps不是数组，则直接返回指定module\r\n            if ( typeof deps === 'string' ) {\r\n                return getModule( deps );\r\n            } else {\r\n                args = [];\r\n                for( len = deps.length, i = 0; i < len; i++ ) {\r\n                    args.push( getModule( deps[ i ] ) );\r\n                }\r\n\r\n                return callback.apply( null, args );\r\n            }\r\n        },\r\n\r\n        // 内部define，暂时不支持不指定id.\r\n        _define = function( id, deps, factory ) {\r\n            if ( arguments.length === 2 ) {\r\n                factory = deps;\r\n                deps = null;\r\n            }\r\n\r\n            _require( deps || [], function() {\r\n                setModule( id, factory, arguments );\r\n            });\r\n        },\r\n\r\n        // 设置module, 兼容CommonJs写法。\r\n        setModule = function( id, factory, args ) {\r\n            var module = {\r\n                    exports: factory\r\n                },\r\n                returned;\r\n\r\n            if ( typeof factory === 'function' ) {\r\n                args.length || (args = [ _require, module.exports, module ]);\r\n                returned = factory.apply( null, args );\r\n                returned !== undefined && (module.exports = returned);\r\n            }\r\n\r\n            modules[ id ] = module.exports;\r\n        },\r\n\r\n        // 根据id获取module\r\n        getModule = function( id ) {\r\n            var module = modules[ id ] || root[ id ];\r\n\r\n            if ( !module ) {\r\n                throw new Error( '`' + id + '` is undefined' );\r\n            }\r\n\r\n            return module;\r\n        },\r\n\r\n        // 将所有modules，将路径ids装换成对象。\r\n        exportsTo = function( obj ) {\r\n            var key, host, parts, part, last, ucFirst;\r\n\r\n            // make the first character upper case.\r\n            ucFirst = function( str ) {\r\n                return str && (str.charAt( 0 ).toUpperCase() + str.substr( 1 ));\r\n            };\r\n\r\n            for ( key in modules ) {\r\n                host = obj;\r\n\r\n                if ( !modules.hasOwnProperty( key ) ) {\r\n                    continue;\r\n                }\r\n\r\n                parts = key.split('/');\r\n                last = ucFirst( parts.pop() );\r\n\r\n                while( (part = ucFirst( parts.shift() )) ) {\r\n                    host[ part ] = host[ part ] || {};\r\n                    host = host[ part ];\r\n                }\r\n\r\n                host[ last ] = modules[ key ];\r\n            }\r\n\r\n            return obj;\r\n        },\r\n\r\n        makeExport = function( dollar ) {\r\n            root.__dollar = dollar;\r\n\r\n            // exports every module.\r\n            return exportsTo( factory( root, _define, _require ) );\r\n        },\r\n\r\n        origin;\r\n\r\n    if ( typeof module === 'object' && typeof module.exports === 'object' ) {\r\n\r\n        // For CommonJS and CommonJS-like environments where a proper window is present,\r\n        module.exports = makeExport();\r\n    } else if ( true ) {\r\n\r\n        // Allow using this built library as an AMD module\r\n        // in another project. That other project will only\r\n        // see this AMD call, not the internal modules in\r\n        // the closure below.\r\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(49) ], __WEBPACK_AMD_DEFINE_FACTORY__ = (makeExport), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n    } else {\r\n\r\n        // Browser globals case. Just assign the\r\n        // result to a property on the global.\r\n        origin = root.WebUploader;\r\n        root.WebUploader = makeExport();\r\n        root.WebUploader.noConflict = function() {\r\n            root.WebUploader = origin;\r\n        };\r\n    }\r\n})( window, function( window, define, require ) {\r\n\r\n\r\n    /**\r\n     * @fileOverview jQuery or Zepto\r\n     * @require \"jquery\"\r\n     * @require \"zepto\"\r\n     */\r\n    define('dollar-third',[],function() {\r\n        var req = window.require;\r\n        var $ = window.__dollar || \r\n            window.jQuery || \r\n            window.Zepto || \r\n            req('jquery') || \r\n            req('zepto');\r\n    \r\n        if ( !$ ) {\r\n            throw new Error('jQuery or Zepto not found!');\r\n        }\r\n    \r\n        return $;\r\n    });\r\n    \r\n    /**\r\n     * @fileOverview Dom 操作相关\r\n     */\r\n    define('dollar',[\r\n        'dollar-third'\r\n    ], function( _ ) {\r\n        return _;\r\n    });\r\n    /**\r\n     * @fileOverview 使用jQuery的Promise\r\n     */\r\n    define('promise-third',[\r\n        'dollar'\r\n    ], function( $ ) {\r\n        return {\r\n            Deferred: $.Deferred,\r\n            when: $.when,\r\n    \r\n            isPromise: function( anything ) {\r\n                return anything && typeof anything.then === 'function';\r\n            }\r\n        };\r\n    });\r\n    /**\r\n     * @fileOverview Promise/A+\r\n     */\r\n    define('promise',[\r\n        'promise-third'\r\n    ], function( _ ) {\r\n        return _;\r\n    });\r\n    /**\r\n     * @fileOverview 基础类方法。\r\n     */\r\n    \r\n    /**\r\n     * Web Uploader内部类的详细说明，以下提及的功能类，都可以在`WebUploader`这个变量中访问到。\r\n     *\r\n     * As you know, Web Uploader的每个文件都是用过[AMD](https://github.com/amdjs/amdjs-api/wiki/AMD)规范中的`define`组织起来的, 每个Module都会有个module id.\r\n     * 默认module id为该文件的路径，而此路径将会转化成名字空间存放在WebUploader中。如：\r\n     *\r\n     * * module `base`：WebUploader.Base\r\n     * * module `file`: WebUploader.File\r\n     * * module `lib/dnd`: WebUploader.Lib.Dnd\r\n     * * module `runtime/html5/dnd`: WebUploader.Runtime.Html5.Dnd\r\n     *\r\n     *\r\n     * 以下文档中对类的使用可能省略掉了`WebUploader`前缀。\r\n     * @module WebUploader\r\n     * @title WebUploader API文档\r\n     */\r\n    define('base',[\r\n        'dollar',\r\n        'promise'\r\n    ], function( $, promise ) {\r\n    \r\n        var noop = function() {},\r\n            call = Function.call;\r\n    \r\n        // http://jsperf.com/uncurrythis\r\n        // 反科里化\r\n        function uncurryThis( fn ) {\r\n            return function() {\r\n                return call.apply( fn, arguments );\r\n            };\r\n        }\r\n    \r\n        function bindFn( fn, context ) {\r\n            return function() {\r\n                return fn.apply( context, arguments );\r\n            };\r\n        }\r\n    \r\n        function createObject( proto ) {\r\n            var f;\r\n    \r\n            if ( Object.create ) {\r\n                return Object.create( proto );\r\n            } else {\r\n                f = function() {};\r\n                f.prototype = proto;\r\n                return new f();\r\n            }\r\n        }\r\n    \r\n    \r\n        /**\r\n         * 基础类，提供一些简单常用的方法。\r\n         * @class Base\r\n         */\r\n        return {\r\n    \r\n            /**\r\n             * @property {String} version 当前版本号。\r\n             */\r\n            version: '0.1.6',\r\n    \r\n            /**\r\n             * @property {jQuery|Zepto} $ 引用依赖的jQuery或者Zepto对象。\r\n             */\r\n            $: $,\r\n    \r\n            Deferred: promise.Deferred,\r\n    \r\n            isPromise: promise.isPromise,\r\n    \r\n            when: promise.when,\r\n    \r\n            /**\r\n             * @description  简单的浏览器检查结果。\r\n             *\r\n             * * `webkit`  webkit版本号，如果浏览器为非webkit内核，此属性为`undefined`。\r\n             * * `chrome`  chrome浏览器版本号，如果浏览器为chrome，此属性为`undefined`。\r\n             * * `ie`  ie浏览器版本号，如果浏览器为非ie，此属性为`undefined`。**暂不支持ie10+**\r\n             * * `firefox`  firefox浏览器版本号，如果浏览器为非firefox，此属性为`undefined`。\r\n             * * `safari`  safari浏览器版本号，如果浏览器为非safari，此属性为`undefined`。\r\n             * * `opera`  opera浏览器版本号，如果浏览器为非opera，此属性为`undefined`。\r\n             *\r\n             * @property {Object} [browser]\r\n             */\r\n            browser: (function( ua ) {\r\n                var ret = {},\r\n                    webkit = ua.match( /WebKit\\/([\\d.]+)/ ),\r\n                    chrome = ua.match( /Chrome\\/([\\d.]+)/ ) ||\r\n                        ua.match( /CriOS\\/([\\d.]+)/ ),\r\n    \r\n                    ie = ua.match( /MSIE\\s([\\d\\.]+)/ ) ||\r\n                        ua.match( /(?:trident)(?:.*rv:([\\w.]+))?/i ),\r\n                    firefox = ua.match( /Firefox\\/([\\d.]+)/ ),\r\n                    safari = ua.match( /Safari\\/([\\d.]+)/ ),\r\n                    opera = ua.match( /OPR\\/([\\d.]+)/ );\r\n    \r\n                webkit && (ret.webkit = parseFloat( webkit[ 1 ] ));\r\n                chrome && (ret.chrome = parseFloat( chrome[ 1 ] ));\r\n                ie && (ret.ie = parseFloat( ie[ 1 ] ));\r\n                firefox && (ret.firefox = parseFloat( firefox[ 1 ] ));\r\n                safari && (ret.safari = parseFloat( safari[ 1 ] ));\r\n                opera && (ret.opera = parseFloat( opera[ 1 ] ));\r\n    \r\n                return ret;\r\n            })( navigator.userAgent ),\r\n    \r\n            /**\r\n             * @description  操作系统检查结果。\r\n             *\r\n             * * `android`  如果在android浏览器环境下，此值为对应的android版本号，否则为`undefined`。\r\n             * * `ios` 如果在ios浏览器环境下，此值为对应的ios版本号，否则为`undefined`。\r\n             * @property {Object} [os]\r\n             */\r\n            os: (function( ua ) {\r\n                var ret = {},\r\n    \r\n                    // osx = !!ua.match( /\\(Macintosh\\; Intel / ),\r\n                    android = ua.match( /(?:Android);?[\\s\\/]+([\\d.]+)?/ ),\r\n                    ios = ua.match( /(?:iPad|iPod|iPhone).*OS\\s([\\d_]+)/ );\r\n    \r\n                // osx && (ret.osx = true);\r\n                android && (ret.android = parseFloat( android[ 1 ] ));\r\n                ios && (ret.ios = parseFloat( ios[ 1 ].replace( /_/g, '.' ) ));\r\n    \r\n                return ret;\r\n            })( navigator.userAgent ),\r\n    \r\n            /**\r\n             * 实现类与类之间的继承。\r\n             * @method inherits\r\n             * @grammar Base.inherits( super ) => child\r\n             * @grammar Base.inherits( super, protos ) => child\r\n             * @grammar Base.inherits( super, protos, statics ) => child\r\n             * @param  {Class} super 父类\r\n             * @param  {Object | Function} [protos] 子类或者对象。如果对象中包含constructor，子类将是用此属性值。\r\n             * @param  {Function} [protos.constructor] 子类构造器，不指定的话将创建个临时的直接执行父类构造器的方法。\r\n             * @param  {Object} [statics] 静态属性或方法。\r\n             * @return {Class} 返回子类。\r\n             * @example\r\n             * function Person() {\r\n             *     console.log( 'Super' );\r\n             * }\r\n             * Person.prototype.hello = function() {\r\n             *     console.log( 'hello' );\r\n             * };\r\n             *\r\n             * var Manager = Base.inherits( Person, {\r\n             *     world: function() {\r\n             *         console.log( 'World' );\r\n             *     }\r\n             * });\r\n             *\r\n             * // 因为没有指定构造器，父类的构造器将会执行。\r\n             * var instance = new Manager();    // => Super\r\n             *\r\n             * // 继承子父类的方法\r\n             * instance.hello();    // => hello\r\n             * instance.world();    // => World\r\n             *\r\n             * // 子类的__super__属性指向父类\r\n             * console.log( Manager.__super__ === Person );    // => true\r\n             */\r\n            inherits: function( Super, protos, staticProtos ) {\r\n                var child;\r\n    \r\n                if ( typeof protos === 'function' ) {\r\n                    child = protos;\r\n                    protos = null;\r\n                } else if ( protos && protos.hasOwnProperty('constructor') ) {\r\n                    child = protos.constructor;\r\n                } else {\r\n                    child = function() {\r\n                        return Super.apply( this, arguments );\r\n                    };\r\n                }\r\n    \r\n                // 复制静态方法\r\n                $.extend( true, child, Super, staticProtos || {} );\r\n    \r\n                /* jshint camelcase: false */\r\n    \r\n                // 让子类的__super__属性指向父类。\r\n                child.__super__ = Super.prototype;\r\n    \r\n                // 构建原型，添加原型方法或属性。\r\n                // 暂时用Object.create实现。\r\n                child.prototype = createObject( Super.prototype );\r\n                protos && $.extend( true, child.prototype, protos );\r\n    \r\n                return child;\r\n            },\r\n    \r\n            /**\r\n             * 一个不做任何事情的方法。可以用来赋值给默认的callback.\r\n             * @method noop\r\n             */\r\n            noop: noop,\r\n    \r\n            /**\r\n             * 返回一个新的方法，此方法将已指定的`context`来执行。\r\n             * @grammar Base.bindFn( fn, context ) => Function\r\n             * @method bindFn\r\n             * @example\r\n             * var doSomething = function() {\r\n             *         console.log( this.name );\r\n             *     },\r\n             *     obj = {\r\n             *         name: 'Object Name'\r\n             *     },\r\n             *     aliasFn = Base.bind( doSomething, obj );\r\n             *\r\n             *  aliasFn();    // => Object Name\r\n             *\r\n             */\r\n            bindFn: bindFn,\r\n    \r\n            /**\r\n             * 引用Console.log如果存在的话，否则引用一个[空函数noop](#WebUploader:Base.noop)。\r\n             * @grammar Base.log( args... ) => undefined\r\n             * @method log\r\n             */\r\n            log: (function() {\r\n                if ( window.console ) {\r\n                    return bindFn( console.log, console );\r\n                }\r\n                return noop;\r\n            })(),\r\n    \r\n            nextTick: (function() {\r\n    \r\n                return function( cb ) {\r\n                    setTimeout( cb, 1 );\r\n                };\r\n    \r\n                // @bug 当浏览器不在当前窗口时就停了。\r\n                // var next = window.requestAnimationFrame ||\r\n                //     window.webkitRequestAnimationFrame ||\r\n                //     window.mozRequestAnimationFrame ||\r\n                //     function( cb ) {\r\n                //         window.setTimeout( cb, 1000 / 60 );\r\n                //     };\r\n    \r\n                // // fix: Uncaught TypeError: Illegal invocation\r\n                // return bindFn( next, window );\r\n            })(),\r\n    \r\n            /**\r\n             * 被[uncurrythis](http://www.2ality.com/2011/11/uncurrying-this.html)的数组slice方法。\r\n             * 将用来将非数组对象转化成数组对象。\r\n             * @grammar Base.slice( target, start[, end] ) => Array\r\n             * @method slice\r\n             * @example\r\n             * function doSomthing() {\r\n             *     var args = Base.slice( arguments, 1 );\r\n             *     console.log( args );\r\n             * }\r\n             *\r\n             * doSomthing( 'ignored', 'arg2', 'arg3' );    // => Array [\"arg2\", \"arg3\"]\r\n             */\r\n            slice: uncurryThis( [].slice ),\r\n    \r\n            /**\r\n             * 生成唯一的ID\r\n             * @method guid\r\n             * @grammar Base.guid() => String\r\n             * @grammar Base.guid( prefx ) => String\r\n             */\r\n            guid: (function() {\r\n                var counter = 0;\r\n    \r\n                return function( prefix ) {\r\n                    var guid = (+new Date()).toString( 32 ),\r\n                        i = 0;\r\n    \r\n                    for ( ; i < 5; i++ ) {\r\n                        guid += Math.floor( Math.random() * 65535 ).toString( 32 );\r\n                    }\r\n    \r\n                    return (prefix || 'wu_') + guid + (counter++).toString( 32 );\r\n                };\r\n            })(),\r\n    \r\n            /**\r\n             * 格式化文件大小, 输出成带单位的字符串\r\n             * @method formatSize\r\n             * @grammar Base.formatSize( size ) => String\r\n             * @grammar Base.formatSize( size, pointLength ) => String\r\n             * @grammar Base.formatSize( size, pointLength, units ) => String\r\n             * @param {Number} size 文件大小\r\n             * @param {Number} [pointLength=2] 精确到的小数点数。\r\n             * @param {Array} [units=[ 'B', 'K', 'M', 'G', 'TB' ]] 单位数组。从字节，到千字节，一直往上指定。如果单位数组里面只指定了到了K(千字节)，同时文件大小大于M, 此方法的输出将还是显示成多少K.\r\n             * @example\r\n             * console.log( Base.formatSize( 100 ) );    // => 100B\r\n             * console.log( Base.formatSize( 1024 ) );    // => 1.00K\r\n             * console.log( Base.formatSize( 1024, 0 ) );    // => 1K\r\n             * console.log( Base.formatSize( 1024 * 1024 ) );    // => 1.00M\r\n             * console.log( Base.formatSize( 1024 * 1024 * 1024 ) );    // => 1.00G\r\n             * console.log( Base.formatSize( 1024 * 1024 * 1024, 0, ['B', 'KB', 'MB'] ) );    // => 1024MB\r\n             */\r\n            formatSize: function( size, pointLength, units ) {\r\n                var unit;\r\n    \r\n                units = units || [ 'B', 'K', 'M', 'G', 'TB' ];\r\n    \r\n                while ( (unit = units.shift()) && size > 1024 ) {\r\n                    size = size / 1024;\r\n                }\r\n    \r\n                return (unit === 'B' ? size : size.toFixed( pointLength || 2 )) +\r\n                        unit;\r\n            }\r\n        };\r\n    });\r\n    /**\r\n     * 事件处理类，可以独立使用，也可以扩展给对象使用。\r\n     * @fileOverview Mediator\r\n     */\r\n    define('mediator',[\r\n        'base'\r\n    ], function( Base ) {\r\n        var $ = Base.$,\r\n            slice = [].slice,\r\n            separator = /\\s+/,\r\n            protos;\r\n    \r\n        // 根据条件过滤出事件handlers.\r\n        function findHandlers( arr, name, callback, context ) {\r\n            return $.grep( arr, function( handler ) {\r\n                return handler &&\r\n                        (!name || handler.e === name) &&\r\n                        (!callback || handler.cb === callback ||\r\n                        handler.cb._cb === callback) &&\r\n                        (!context || handler.ctx === context);\r\n            });\r\n        }\r\n    \r\n        function eachEvent( events, callback, iterator ) {\r\n            // 不支持对象，只支持多个event用空格隔开\r\n            $.each( (events || '').split( separator ), function( _, key ) {\r\n                iterator( key, callback );\r\n            });\r\n        }\r\n    \r\n        function triggerHanders( events, args ) {\r\n            var stoped = false,\r\n                i = -1,\r\n                len = events.length,\r\n                handler;\r\n    \r\n            while ( ++i < len ) {\r\n                handler = events[ i ];\r\n    \r\n                if ( handler.cb.apply( handler.ctx2, args ) === false ) {\r\n                    stoped = true;\r\n                    break;\r\n                }\r\n            }\r\n    \r\n            return !stoped;\r\n        }\r\n    \r\n        protos = {\r\n    \r\n            /**\r\n             * 绑定事件。\r\n             *\r\n             * `callback`方法在执行时，arguments将会来源于trigger的时候携带的参数。如\r\n             * ```javascript\r\n             * var obj = {};\r\n             *\r\n             * // 使得obj有事件行为\r\n             * Mediator.installTo( obj );\r\n             *\r\n             * obj.on( 'testa', function( arg1, arg2 ) {\r\n             *     console.log( arg1, arg2 ); // => 'arg1', 'arg2'\r\n             * });\r\n             *\r\n             * obj.trigger( 'testa', 'arg1', 'arg2' );\r\n             * ```\r\n             *\r\n             * 如果`callback`中，某一个方法`return false`了，则后续的其他`callback`都不会被执行到。\r\n             * 切会影响到`trigger`方法的返回值，为`false`。\r\n             *\r\n             * `on`还可以用来添加一个特殊事件`all`, 这样所有的事件触发都会响应到。同时此类`callback`中的arguments有一个不同处，\r\n             * 就是第一个参数为`type`，记录当前是什么事件在触发。此类`callback`的优先级比脚低，会再正常`callback`执行完后触发。\r\n             * ```javascript\r\n             * obj.on( 'all', function( type, arg1, arg2 ) {\r\n             *     console.log( type, arg1, arg2 ); // => 'testa', 'arg1', 'arg2'\r\n             * });\r\n             * ```\r\n             *\r\n             * @method on\r\n             * @grammar on( name, callback[, context] ) => self\r\n             * @param  {String}   name     事件名，支持多个事件用空格隔开\r\n             * @param  {Function} callback 事件处理器\r\n             * @param  {Object}   [context]  事件处理器的上下文。\r\n             * @return {self} 返回自身，方便链式\r\n             * @chainable\r\n             * @class Mediator\r\n             */\r\n            on: function( name, callback, context ) {\r\n                var me = this,\r\n                    set;\r\n    \r\n                if ( !callback ) {\r\n                    return this;\r\n                }\r\n    \r\n                set = this._events || (this._events = []);\r\n    \r\n                eachEvent( name, callback, function( name, callback ) {\r\n                    var handler = { e: name };\r\n    \r\n                    handler.cb = callback;\r\n                    handler.ctx = context;\r\n                    handler.ctx2 = context || me;\r\n                    handler.id = set.length;\r\n    \r\n                    set.push( handler );\r\n                });\r\n    \r\n                return this;\r\n            },\r\n    \r\n            /**\r\n             * 绑定事件，且当handler执行完后，自动解除绑定。\r\n             * @method once\r\n             * @grammar once( name, callback[, context] ) => self\r\n             * @param  {String}   name     事件名\r\n             * @param  {Function} callback 事件处理器\r\n             * @param  {Object}   [context]  事件处理器的上下文。\r\n             * @return {self} 返回自身，方便链式\r\n             * @chainable\r\n             */\r\n            once: function( name, callback, context ) {\r\n                var me = this;\r\n    \r\n                if ( !callback ) {\r\n                    return me;\r\n                }\r\n    \r\n                eachEvent( name, callback, function( name, callback ) {\r\n                    var once = function() {\r\n                            me.off( name, once );\r\n                            return callback.apply( context || me, arguments );\r\n                        };\r\n    \r\n                    once._cb = callback;\r\n                    me.on( name, once, context );\r\n                });\r\n    \r\n                return me;\r\n            },\r\n    \r\n            /**\r\n             * 解除事件绑定\r\n             * @method off\r\n             * @grammar off( [name[, callback[, context] ] ] ) => self\r\n             * @param  {String}   [name]     事件名\r\n             * @param  {Function} [callback] 事件处理器\r\n             * @param  {Object}   [context]  事件处理器的上下文。\r\n             * @return {self} 返回自身，方便链式\r\n             * @chainable\r\n             */\r\n            off: function( name, cb, ctx ) {\r\n                var events = this._events;\r\n    \r\n                if ( !events ) {\r\n                    return this;\r\n                }\r\n    \r\n                if ( !name && !cb && !ctx ) {\r\n                    this._events = [];\r\n                    return this;\r\n                }\r\n    \r\n                eachEvent( name, cb, function( name, cb ) {\r\n                    $.each( findHandlers( events, name, cb, ctx ), function() {\r\n                        delete events[ this.id ];\r\n                    });\r\n                });\r\n    \r\n                return this;\r\n            },\r\n    \r\n            /**\r\n             * 触发事件\r\n             * @method trigger\r\n             * @grammar trigger( name[, args...] ) => self\r\n             * @param  {String}   type     事件名\r\n             * @param  {*} [...] 任意参数\r\n             * @return {Boolean} 如果handler中return false了，则返回false, 否则返回true\r\n             */\r\n            trigger: function( type ) {\r\n                var args, events, allEvents;\r\n    \r\n                if ( !this._events || !type ) {\r\n                    return this;\r\n                }\r\n    \r\n                args = slice.call( arguments, 1 );\r\n                events = findHandlers( this._events, type );\r\n                allEvents = findHandlers( this._events, 'all' );\r\n    \r\n                return triggerHanders( events, args ) &&\r\n                        triggerHanders( allEvents, arguments );\r\n            }\r\n        };\r\n    \r\n        /**\r\n         * 中介者，它本身是个单例，但可以通过[installTo](#WebUploader:Mediator:installTo)方法，使任何对象具备事件行为。\r\n         * 主要目的是负责模块与模块之间的合作，降低耦合度。\r\n         *\r\n         * @class Mediator\r\n         */\r\n        return $.extend({\r\n    \r\n            /**\r\n             * 可以通过这个接口，使任何对象具备事件功能。\r\n             * @method installTo\r\n             * @param  {Object} obj 需要具备事件行为的对象。\r\n             * @return {Object} 返回obj.\r\n             */\r\n            installTo: function( obj ) {\r\n                return $.extend( obj, protos );\r\n            }\r\n    \r\n        }, protos );\r\n    });\r\n    /**\r\n     * @fileOverview Uploader上传类\r\n     */\r\n    define('uploader',[\r\n        'base',\r\n        'mediator'\r\n    ], function( Base, Mediator ) {\r\n    \r\n        var $ = Base.$;\r\n    \r\n        /**\r\n         * 上传入口类。\r\n         * @class Uploader\r\n         * @constructor\r\n         * @grammar new Uploader( opts ) => Uploader\r\n         * @example\r\n         * var uploader = WebUploader.Uploader({\r\n         *     swf: 'path_of_swf/Uploader.swf',\r\n         *\r\n         *     // 开起分片上传。\r\n         *     chunked: true\r\n         * });\r\n         */\r\n        function Uploader( opts ) {\r\n            this.options = $.extend( true, {}, Uploader.options, opts );\r\n            this._init( this.options );\r\n        }\r\n    \r\n        // default Options\r\n        // widgets中有相应扩展\r\n        Uploader.options = {};\r\n        Mediator.installTo( Uploader.prototype );\r\n    \r\n        // 批量添加纯命令式方法。\r\n        $.each({\r\n            upload: 'start-upload',\r\n            stop: 'stop-upload',\r\n            getFile: 'get-file',\r\n            getFiles: 'get-files',\r\n            addFile: 'add-file',\r\n            addFiles: 'add-file',\r\n            sort: 'sort-files',\r\n            removeFile: 'remove-file',\r\n            cancelFile: 'cancel-file',\r\n            skipFile: 'skip-file',\r\n            retry: 'retry',\r\n            isInProgress: 'is-in-progress',\r\n            makeThumb: 'make-thumb',\r\n            md5File: 'md5-file',\r\n            getDimension: 'get-dimension',\r\n            addButton: 'add-btn',\r\n            predictRuntimeType: 'predict-runtime-type',\r\n            refresh: 'refresh',\r\n            disable: 'disable',\r\n            enable: 'enable',\r\n            reset: 'reset'\r\n        }, function( fn, command ) {\r\n            Uploader.prototype[ fn ] = function() {\r\n                return this.request( command, arguments );\r\n            };\r\n        });\r\n    \r\n        $.extend( Uploader.prototype, {\r\n            state: 'pending',\r\n    \r\n            _init: function( opts ) {\r\n                var me = this;\r\n    \r\n                me.request( 'init', opts, function() {\r\n                    me.state = 'ready';\r\n                    me.trigger('ready');\r\n                });\r\n            },\r\n    \r\n            /**\r\n             * 获取或者设置Uploader配置项。\r\n             * @method option\r\n             * @grammar option( key ) => *\r\n             * @grammar option( key, val ) => self\r\n             * @example\r\n             *\r\n             * // 初始状态图片上传前不会压缩\r\n             * var uploader = new WebUploader.Uploader({\r\n             *     compress: null;\r\n             * });\r\n             *\r\n             * // 修改后图片上传前，尝试将图片压缩到1600 * 1600\r\n             * uploader.option( 'compress', {\r\n             *     width: 1600,\r\n             *     height: 1600\r\n             * });\r\n             */\r\n            option: function( key, val ) {\r\n                var opts = this.options;\r\n    \r\n                // setter\r\n                if ( arguments.length > 1 ) {\r\n    \r\n                    if ( $.isPlainObject( val ) &&\r\n                            $.isPlainObject( opts[ key ] ) ) {\r\n                        $.extend( opts[ key ], val );\r\n                    } else {\r\n                        opts[ key ] = val;\r\n                    }\r\n    \r\n                } else {    // getter\r\n                    return key ? opts[ key ] : opts;\r\n                }\r\n            },\r\n    \r\n            /**\r\n             * 获取文件统计信息。返回一个包含一下信息的对象。\r\n             * * `successNum` 上传成功的文件数\r\n             * * `progressNum` 上传中的文件数\r\n             * * `cancelNum` 被删除的文件数\r\n             * * `invalidNum` 无效的文件数\r\n             * * `uploadFailNum` 上传失败的文件数\r\n             * * `queueNum` 还在队列中的文件数\r\n             * * `interruptNum` 被暂停的文件数\r\n             * @method getStats\r\n             * @grammar getStats() => Object\r\n             */\r\n            getStats: function() {\r\n                // return this._mgr.getStats.apply( this._mgr, arguments );\r\n                var stats = this.request('get-stats');\r\n    \r\n                return stats ? {\r\n                    successNum: stats.numOfSuccess,\r\n                    progressNum: stats.numOfProgress,\r\n    \r\n                    // who care?\r\n                    // queueFailNum: 0,\r\n                    cancelNum: stats.numOfCancel,\r\n                    invalidNum: stats.numOfInvalid,\r\n                    uploadFailNum: stats.numOfUploadFailed,\r\n                    queueNum: stats.numOfQueue,\r\n                    interruptNum: stats.numofInterrupt\r\n                } : {};\r\n            },\r\n    \r\n            // 需要重写此方法来来支持opts.onEvent和instance.onEvent的处理器\r\n            trigger: function( type/*, args...*/ ) {\r\n                var args = [].slice.call( arguments, 1 ),\r\n                    opts = this.options,\r\n                    name = 'on' + type.substring( 0, 1 ).toUpperCase() +\r\n                        type.substring( 1 );\r\n    \r\n                if (\r\n                        // 调用通过on方法注册的handler.\r\n                        Mediator.trigger.apply( this, arguments ) === false ||\r\n    \r\n                        // 调用opts.onEvent\r\n                        $.isFunction( opts[ name ] ) &&\r\n                        opts[ name ].apply( this, args ) === false ||\r\n    \r\n                        // 调用this.onEvent\r\n                        $.isFunction( this[ name ] ) &&\r\n                        this[ name ].apply( this, args ) === false ||\r\n    \r\n                        // 广播所有uploader的事件。\r\n                        Mediator.trigger.apply( Mediator,\r\n                        [ this, type ].concat( args ) ) === false ) {\r\n    \r\n                    return false;\r\n                }\r\n    \r\n                return true;\r\n            },\r\n    \r\n            /**\r\n             * 销毁 webuploader 实例\r\n             * @method destroy\r\n             * @grammar destroy() => undefined\r\n             */\r\n            destroy: function() {\r\n                this.request( 'destroy', arguments );\r\n                this.off();\r\n            },\r\n    \r\n            // widgets/widget.js将补充此方法的详细文档。\r\n            request: Base.noop\r\n        });\r\n    \r\n        /**\r\n         * 创建Uploader实例，等同于new Uploader( opts );\r\n         * @method create\r\n         * @class Base\r\n         * @static\r\n         * @grammar Base.create( opts ) => Uploader\r\n         */\r\n        Base.create = Uploader.create = function( opts ) {\r\n            return new Uploader( opts );\r\n        };\r\n    \r\n        // 暴露Uploader，可以通过它来扩展业务逻辑。\r\n        Base.Uploader = Uploader;\r\n    \r\n        return Uploader;\r\n    });\r\n    /**\r\n     * @fileOverview Runtime管理器，负责Runtime的选择, 连接\r\n     */\r\n    define('runtime/runtime',[\r\n        'base',\r\n        'mediator'\r\n    ], function( Base, Mediator ) {\r\n    \r\n        var $ = Base.$,\r\n            factories = {},\r\n    \r\n            // 获取对象的第一个key\r\n            getFirstKey = function( obj ) {\r\n                for ( var key in obj ) {\r\n                    if ( obj.hasOwnProperty( key ) ) {\r\n                        return key;\r\n                    }\r\n                }\r\n                return null;\r\n            };\r\n    \r\n        // 接口类。\r\n        function Runtime( options ) {\r\n            this.options = $.extend({\r\n                container: document.body\r\n            }, options );\r\n            this.uid = Base.guid('rt_');\r\n        }\r\n    \r\n        $.extend( Runtime.prototype, {\r\n    \r\n            getContainer: function() {\r\n                var opts = this.options,\r\n                    parent, container;\r\n    \r\n                if ( this._container ) {\r\n                    return this._container;\r\n                }\r\n    \r\n                parent = $( opts.container || document.body );\r\n                container = $( document.createElement('div') );\r\n    \r\n                container.attr( 'id', 'rt_' + this.uid );\r\n                container.css({\r\n                    position: 'absolute',\r\n                    top: '0px',\r\n                    left: '0px',\r\n                    width: '1px',\r\n                    height: '1px',\r\n                    overflow: 'hidden'\r\n                });\r\n    \r\n                parent.append( container );\r\n                parent.addClass('webuploader-container');\r\n                this._container = container;\r\n                this._parent = parent;\r\n                return container;\r\n            },\r\n    \r\n            init: Base.noop,\r\n            exec: Base.noop,\r\n    \r\n            destroy: function() {\r\n                this._container && this._container.remove();\r\n                this._parent && this._parent.removeClass('webuploader-container');\r\n                this.off();\r\n            }\r\n        });\r\n    \r\n        Runtime.orders = 'html5,flash';\r\n    \r\n    \r\n        /**\r\n         * 添加Runtime实现。\r\n         * @param {String} type    类型\r\n         * @param {Runtime} factory 具体Runtime实现。\r\n         */\r\n        Runtime.addRuntime = function( type, factory ) {\r\n            factories[ type ] = factory;\r\n        };\r\n    \r\n        Runtime.hasRuntime = function( type ) {\r\n            return !!(type ? factories[ type ] : getFirstKey( factories ));\r\n        };\r\n    \r\n        Runtime.create = function( opts, orders ) {\r\n            var type, runtime;\r\n    \r\n            orders = orders || Runtime.orders;\r\n            $.each( orders.split( /\\s*,\\s*/g ), function() {\r\n                if ( factories[ this ] ) {\r\n                    type = this;\r\n                    return false;\r\n                }\r\n            });\r\n    \r\n            type = type || getFirstKey( factories );\r\n    \r\n            if ( !type ) {\r\n                throw new Error('Runtime Error');\r\n            }\r\n    \r\n            runtime = new factories[ type ]( opts );\r\n            return runtime;\r\n        };\r\n    \r\n        Mediator.installTo( Runtime.prototype );\r\n        return Runtime;\r\n    });\r\n    \r\n    /**\r\n     * @fileOverview Runtime管理器，负责Runtime的选择, 连接\r\n     */\r\n    define('runtime/client',[\r\n        'base',\r\n        'mediator',\r\n        'runtime/runtime'\r\n    ], function( Base, Mediator, Runtime ) {\r\n    \r\n        var cache;\r\n    \r\n        cache = (function() {\r\n            var obj = {};\r\n    \r\n            return {\r\n                add: function( runtime ) {\r\n                    obj[ runtime.uid ] = runtime;\r\n                },\r\n    \r\n                get: function( ruid, standalone ) {\r\n                    var i;\r\n    \r\n                    if ( ruid ) {\r\n                        return obj[ ruid ];\r\n                    }\r\n    \r\n                    for ( i in obj ) {\r\n                        // 有些类型不能重用，比如filepicker.\r\n                        if ( standalone && obj[ i ].__standalone ) {\r\n                            continue;\r\n                        }\r\n    \r\n                        return obj[ i ];\r\n                    }\r\n    \r\n                    return null;\r\n                },\r\n    \r\n                remove: function( runtime ) {\r\n                    delete obj[ runtime.uid ];\r\n                }\r\n            };\r\n        })();\r\n    \r\n        function RuntimeClient( component, standalone ) {\r\n            var deferred = Base.Deferred(),\r\n                runtime;\r\n    \r\n            this.uid = Base.guid('client_');\r\n    \r\n            // 允许runtime没有初始化之前，注册一些方法在初始化后执行。\r\n            this.runtimeReady = function( cb ) {\r\n                return deferred.done( cb );\r\n            };\r\n    \r\n            this.connectRuntime = function( opts, cb ) {\r\n    \r\n                // already connected.\r\n                if ( runtime ) {\r\n                    throw new Error('already connected!');\r\n                }\r\n    \r\n                deferred.done( cb );\r\n    \r\n                if ( typeof opts === 'string' && cache.get( opts ) ) {\r\n                    runtime = cache.get( opts );\r\n                }\r\n    \r\n                // 像filePicker只能独立存在，不能公用。\r\n                runtime = runtime || cache.get( null, standalone );\r\n    \r\n                // 需要创建\r\n                if ( !runtime ) {\r\n                    runtime = Runtime.create( opts, opts.runtimeOrder );\r\n                    runtime.__promise = deferred.promise();\r\n                    runtime.once( 'ready', deferred.resolve );\r\n                    runtime.init();\r\n                    cache.add( runtime );\r\n                    runtime.__client = 1;\r\n                } else {\r\n                    // 来自cache\r\n                    Base.$.extend( runtime.options, opts );\r\n                    runtime.__promise.then( deferred.resolve );\r\n                    runtime.__client++;\r\n                }\r\n    \r\n                standalone && (runtime.__standalone = standalone);\r\n                return runtime;\r\n            };\r\n    \r\n            this.getRuntime = function() {\r\n                return runtime;\r\n            };\r\n    \r\n            this.disconnectRuntime = function() {\r\n                if ( !runtime ) {\r\n                    return;\r\n                }\r\n    \r\n                runtime.__client--;\r\n    \r\n                if ( runtime.__client <= 0 ) {\r\n                    cache.remove( runtime );\r\n                    delete runtime.__promise;\r\n                    runtime.destroy();\r\n                }\r\n    \r\n                runtime = null;\r\n            };\r\n    \r\n            this.exec = function() {\r\n                if ( !runtime ) {\r\n                    return;\r\n                }\r\n    \r\n                var args = Base.slice( arguments );\r\n                component && args.unshift( component );\r\n    \r\n                return runtime.exec.apply( this, args );\r\n            };\r\n    \r\n            this.getRuid = function() {\r\n                return runtime && runtime.uid;\r\n            };\r\n    \r\n            this.destroy = (function( destroy ) {\r\n                return function() {\r\n                    destroy && destroy.apply( this, arguments );\r\n                    this.trigger('destroy');\r\n                    this.off();\r\n                    this.exec('destroy');\r\n                    this.disconnectRuntime();\r\n                };\r\n            })( this.destroy );\r\n        }\r\n    \r\n        Mediator.installTo( RuntimeClient.prototype );\r\n        return RuntimeClient;\r\n    });\r\n    /**\r\n     * @fileOverview 错误信息\r\n     */\r\n    define('lib/dnd',[\r\n        'base',\r\n        'mediator',\r\n        'runtime/client'\r\n    ], function( Base, Mediator, RuntimeClent ) {\r\n    \r\n        var $ = Base.$;\r\n    \r\n        function DragAndDrop( opts ) {\r\n            opts = this.options = $.extend({}, DragAndDrop.options, opts );\r\n    \r\n            opts.container = $( opts.container );\r\n    \r\n            if ( !opts.container.length ) {\r\n                return;\r\n            }\r\n    \r\n            RuntimeClent.call( this, 'DragAndDrop' );\r\n        }\r\n    \r\n        DragAndDrop.options = {\r\n            accept: null,\r\n            disableGlobalDnd: false\r\n        };\r\n    \r\n        Base.inherits( RuntimeClent, {\r\n            constructor: DragAndDrop,\r\n    \r\n            init: function() {\r\n                var me = this;\r\n    \r\n                me.connectRuntime( me.options, function() {\r\n                    me.exec('init');\r\n                    me.trigger('ready');\r\n                });\r\n            }\r\n        });\r\n    \r\n        Mediator.installTo( DragAndDrop.prototype );\r\n    \r\n        return DragAndDrop;\r\n    });\r\n    /**\r\n     * @fileOverview 组件基类。\r\n     */\r\n    define('widgets/widget',[\r\n        'base',\r\n        'uploader'\r\n    ], function( Base, Uploader ) {\r\n    \r\n        var $ = Base.$,\r\n            _init = Uploader.prototype._init,\r\n            _destroy = Uploader.prototype.destroy,\r\n            IGNORE = {},\r\n            widgetClass = [];\r\n    \r\n        function isArrayLike( obj ) {\r\n            if ( !obj ) {\r\n                return false;\r\n            }\r\n    \r\n            var length = obj.length,\r\n                type = $.type( obj );\r\n    \r\n            if ( obj.nodeType === 1 && length ) {\r\n                return true;\r\n            }\r\n    \r\n            return type === 'array' || type !== 'function' && type !== 'string' &&\r\n                    (length === 0 || typeof length === 'number' && length > 0 &&\r\n                    (length - 1) in obj);\r\n        }\r\n    \r\n        function Widget( uploader ) {\r\n            this.owner = uploader;\r\n            this.options = uploader.options;\r\n        }\r\n    \r\n        $.extend( Widget.prototype, {\r\n    \r\n            init: Base.noop,\r\n    \r\n            // 类Backbone的事件监听声明，监听uploader实例上的事件\r\n            // widget直接无法监听事件，事件只能通过uploader来传递\r\n            invoke: function( apiName, args ) {\r\n    \r\n                /*\r\n                    {\r\n                        'make-thumb': 'makeThumb'\r\n                    }\r\n                 */\r\n                var map = this.responseMap;\r\n    \r\n                // 如果无API响应声明则忽略\r\n                if ( !map || !(apiName in map) || !(map[ apiName ] in this) ||\r\n                        !$.isFunction( this[ map[ apiName ] ] ) ) {\r\n    \r\n                    return IGNORE;\r\n                }\r\n    \r\n                return this[ map[ apiName ] ].apply( this, args );\r\n    \r\n            },\r\n    \r\n            /**\r\n             * 发送命令。当传入`callback`或者`handler`中返回`promise`时。返回一个当所有`handler`中的promise都完成后完成的新`promise`。\r\n             * @method request\r\n             * @grammar request( command, args ) => * | Promise\r\n             * @grammar request( command, args, callback ) => Promise\r\n             * @for  Uploader\r\n             */\r\n            request: function() {\r\n                return this.owner.request.apply( this.owner, arguments );\r\n            }\r\n        });\r\n    \r\n        // 扩展Uploader.\r\n        $.extend( Uploader.prototype, {\r\n    \r\n            /**\r\n             * @property {String | Array} [disableWidgets=undefined]\r\n             * @namespace options\r\n             * @for Uploader\r\n             * @description 默认所有 Uploader.register 了的 widget 都会被加载，如果禁用某一部分，请通过此 option 指定黑名单。\r\n             */\r\n    \r\n            // 覆写_init用来初始化widgets\r\n            _init: function() {\r\n                var me = this,\r\n                    widgets = me._widgets = [],\r\n                    deactives = me.options.disableWidgets || '';\r\n    \r\n                $.each( widgetClass, function( _, klass ) {\r\n                    (!deactives || !~deactives.indexOf( klass._name )) &&\r\n                        widgets.push( new klass( me ) );\r\n                });\r\n    \r\n                return _init.apply( me, arguments );\r\n            },\r\n    \r\n            request: function( apiName, args, callback ) {\r\n                var i = 0,\r\n                    widgets = this._widgets,\r\n                    len = widgets && widgets.length,\r\n                    rlts = [],\r\n                    dfds = [],\r\n                    widget, rlt, promise, key;\r\n    \r\n                args = isArrayLike( args ) ? args : [ args ];\r\n    \r\n                for ( ; i < len; i++ ) {\r\n                    widget = widgets[ i ];\r\n                    rlt = widget.invoke( apiName, args );\r\n    \r\n                    if ( rlt !== IGNORE ) {\r\n    \r\n                        // Deferred对象\r\n                        if ( Base.isPromise( rlt ) ) {\r\n                            dfds.push( rlt );\r\n                        } else {\r\n                            rlts.push( rlt );\r\n                        }\r\n                    }\r\n                }\r\n    \r\n                // 如果有callback，则用异步方式。\r\n                if ( callback || dfds.length ) {\r\n                    promise = Base.when.apply( Base, dfds );\r\n                    key = promise.pipe ? 'pipe' : 'then';\r\n    \r\n                    // 很重要不能删除。删除了会死循环。\r\n                    // 保证执行顺序。让callback总是在下一个 tick 中执行。\r\n                    return promise[ key ](function() {\r\n                                var deferred = Base.Deferred(),\r\n                                    args = arguments;\r\n    \r\n                                if ( args.length === 1 ) {\r\n                                    args = args[ 0 ];\r\n                                }\r\n    \r\n                                setTimeout(function() {\r\n                                    deferred.resolve( args );\r\n                                }, 1 );\r\n    \r\n                                return deferred.promise();\r\n                            })[ callback ? key : 'done' ]( callback || Base.noop );\r\n                } else {\r\n                    return rlts[ 0 ];\r\n                }\r\n            },\r\n    \r\n            destroy: function() {\r\n                _destroy.apply( this, arguments );\r\n                this._widgets = null;\r\n            }\r\n        });\r\n    \r\n        /**\r\n         * 添加组件\r\n         * @grammar Uploader.register(proto);\r\n         * @grammar Uploader.register(map, proto);\r\n         * @param  {object} responseMap API 名称与函数实现的映射\r\n         * @param  {object} proto 组件原型，构造函数通过 constructor 属性定义\r\n         * @method Uploader.register\r\n         * @for Uploader\r\n         * @example\r\n         * Uploader.register({\r\n         *     'make-thumb': 'makeThumb'\r\n         * }, {\r\n         *     init: function( options ) {},\r\n         *     makeThumb: function() {}\r\n         * });\r\n         *\r\n         * Uploader.register({\r\n         *     'make-thumb': function() {\r\n         *         \r\n         *     }\r\n         * });\r\n         */\r\n        Uploader.register = Widget.register = function( responseMap, widgetProto ) {\r\n            var map = { init: 'init', destroy: 'destroy', name: 'anonymous' },\r\n                klass;\r\n    \r\n            if ( arguments.length === 1 ) {\r\n                widgetProto = responseMap;\r\n    \r\n                // 自动生成 map 表。\r\n                $.each(widgetProto, function(key) {\r\n                    if ( key[0] === '_' || key === 'name' ) {\r\n                        key === 'name' && (map.name = widgetProto.name);\r\n                        return;\r\n                    }\r\n    \r\n                    map[key.replace(/[A-Z]/g, '-$&').toLowerCase()] = key;\r\n                });\r\n    \r\n            } else {\r\n                map = $.extend( map, responseMap );\r\n            }\r\n    \r\n            widgetProto.responseMap = map;\r\n            klass = Base.inherits( Widget, widgetProto );\r\n            klass._name = map.name;\r\n            widgetClass.push( klass );\r\n    \r\n            return klass;\r\n        };\r\n    \r\n        /**\r\n         * 删除插件，只有在注册时指定了名字的才能被删除。\r\n         * @grammar Uploader.unRegister(name);\r\n         * @param  {string} name 组件名字\r\n         * @method Uploader.unRegister\r\n         * @for Uploader\r\n         * @example\r\n         *\r\n         * Uploader.register({\r\n         *     name: 'custom',\r\n         *     \r\n         *     'make-thumb': function() {\r\n         *         \r\n         *     }\r\n         * });\r\n         *\r\n         * Uploader.unRegister('custom');\r\n         */\r\n        Uploader.unRegister = Widget.unRegister = function( name ) {\r\n            if ( !name || name === 'anonymous' ) {\r\n                return;\r\n            }\r\n            \r\n            // 删除指定的插件。\r\n            for ( var i = widgetClass.length; i--; ) {\r\n                if ( widgetClass[i]._name === name ) {\r\n                    widgetClass.splice(i, 1)\r\n                }\r\n            }\r\n        };\r\n    \r\n        return Widget;\r\n    });\r\n    /**\r\n     * @fileOverview DragAndDrop Widget。\r\n     */\r\n    define('widgets/filednd',[\r\n        'base',\r\n        'uploader',\r\n        'lib/dnd',\r\n        'widgets/widget'\r\n    ], function( Base, Uploader, Dnd ) {\r\n        var $ = Base.$;\r\n    \r\n        Uploader.options.dnd = '';\r\n    \r\n        /**\r\n         * @property {Selector} [dnd=undefined]  指定Drag And Drop拖拽的容器，如果不指定，则不启动。\r\n         * @namespace options\r\n         * @for Uploader\r\n         */\r\n        \r\n        /**\r\n         * @property {Selector} [disableGlobalDnd=false]  是否禁掉整个页面的拖拽功能，如果不禁用，图片拖进来的时候会默认被浏览器打开。\r\n         * @namespace options\r\n         * @for Uploader\r\n         */\r\n    \r\n        /**\r\n         * @event dndAccept\r\n         * @param {DataTransferItemList} items DataTransferItem\r\n         * @description 阻止此事件可以拒绝某些类型的文件拖入进来。目前只有 chrome 提供这样的 API，且只能通过 mime-type 验证。\r\n         * @for  Uploader\r\n         */\r\n        return Uploader.register({\r\n            name: 'dnd',\r\n            \r\n            init: function( opts ) {\r\n    \r\n                if ( !opts.dnd ||\r\n                        this.request('predict-runtime-type') !== 'html5' ) {\r\n                    return;\r\n                }\r\n    \r\n                var me = this,\r\n                    deferred = Base.Deferred(),\r\n                    options = $.extend({}, {\r\n                        disableGlobalDnd: opts.disableGlobalDnd,\r\n                        container: opts.dnd,\r\n                        accept: opts.accept\r\n                    }),\r\n                    dnd;\r\n    \r\n                this.dnd = dnd = new Dnd( options );\r\n    \r\n                dnd.once( 'ready', deferred.resolve );\r\n                dnd.on( 'drop', function( files ) {\r\n                    me.request( 'add-file', [ files ]);\r\n                });\r\n    \r\n                // 检测文件是否全部允许添加。\r\n                dnd.on( 'accept', function( items ) {\r\n                    return me.owner.trigger( 'dndAccept', items );\r\n                });\r\n    \r\n                dnd.init();\r\n    \r\n                return deferred.promise();\r\n            },\r\n    \r\n            destroy: function() {\r\n                this.dnd && this.dnd.destroy();\r\n            }\r\n        });\r\n    });\r\n    \r\n    /**\r\n     * @fileOverview 错误信息\r\n     */\r\n    define('lib/filepaste',[\r\n        'base',\r\n        'mediator',\r\n        'runtime/client'\r\n    ], function( Base, Mediator, RuntimeClent ) {\r\n    \r\n        var $ = Base.$;\r\n    \r\n        function FilePaste( opts ) {\r\n            opts = this.options = $.extend({}, opts );\r\n            opts.container = $( opts.container || document.body );\r\n            RuntimeClent.call( this, 'FilePaste' );\r\n        }\r\n    \r\n        Base.inherits( RuntimeClent, {\r\n            constructor: FilePaste,\r\n    \r\n            init: function() {\r\n                var me = this;\r\n    \r\n                me.connectRuntime( me.options, function() {\r\n                    me.exec('init');\r\n                    me.trigger('ready');\r\n                });\r\n            }\r\n        });\r\n    \r\n        Mediator.installTo( FilePaste.prototype );\r\n    \r\n        return FilePaste;\r\n    });\r\n    /**\r\n     * @fileOverview 组件基类。\r\n     */\r\n    define('widgets/filepaste',[\r\n        'base',\r\n        'uploader',\r\n        'lib/filepaste',\r\n        'widgets/widget'\r\n    ], function( Base, Uploader, FilePaste ) {\r\n        var $ = Base.$;\r\n    \r\n        /**\r\n         * @property {Selector} [paste=undefined]  指定监听paste事件的容器，如果不指定，不启用此功能。此功能为通过粘贴来添加截屏的图片。建议设置为`document.body`.\r\n         * @namespace options\r\n         * @for Uploader\r\n         */\r\n        return Uploader.register({\r\n            name: 'paste',\r\n            \r\n            init: function( opts ) {\r\n    \r\n                if ( !opts.paste ||\r\n                        this.request('predict-runtime-type') !== 'html5' ) {\r\n                    return;\r\n                }\r\n    \r\n                var me = this,\r\n                    deferred = Base.Deferred(),\r\n                    options = $.extend({}, {\r\n                        container: opts.paste,\r\n                        accept: opts.accept\r\n                    }),\r\n                    paste;\r\n    \r\n                this.paste = paste = new FilePaste( options );\r\n    \r\n                paste.once( 'ready', deferred.resolve );\r\n                paste.on( 'paste', function( files ) {\r\n                    me.owner.request( 'add-file', [ files ]);\r\n                });\r\n                paste.init();\r\n    \r\n                return deferred.promise();\r\n            },\r\n    \r\n            destroy: function() {\r\n                this.paste && this.paste.destroy();\r\n            }\r\n        });\r\n    });\r\n    /**\r\n     * @fileOverview Blob\r\n     */\r\n    define('lib/blob',[\r\n        'base',\r\n        'runtime/client'\r\n    ], function( Base, RuntimeClient ) {\r\n    \r\n        function Blob( ruid, source ) {\r\n            var me = this;\r\n    \r\n            me.source = source;\r\n            me.ruid = ruid;\r\n            this.size = source.size || 0;\r\n    \r\n            // 如果没有指定 mimetype, 但是知道文件后缀。\r\n            if ( !source.type && this.ext &&\r\n                    ~'jpg,jpeg,png,gif,bmp'.indexOf( this.ext ) ) {\r\n                this.type = 'image/' + (this.ext === 'jpg' ? 'jpeg' : this.ext);\r\n            } else {\r\n                this.type = source.type || 'application/octet-stream';\r\n            }\r\n    \r\n            RuntimeClient.call( me, 'Blob' );\r\n            this.uid = source.uid || this.uid;\r\n    \r\n            if ( ruid ) {\r\n                me.connectRuntime( ruid );\r\n            }\r\n        }\r\n    \r\n        Base.inherits( RuntimeClient, {\r\n            constructor: Blob,\r\n    \r\n            slice: function( start, end ) {\r\n                return this.exec( 'slice', start, end );\r\n            },\r\n    \r\n            getSource: function() {\r\n                return this.source;\r\n            }\r\n        });\r\n    \r\n        return Blob;\r\n    });\r\n    /**\r\n     * 为了统一化Flash的File和HTML5的File而存在。\r\n     * 以至于要调用Flash里面的File，也可以像调用HTML5版本的File一下。\r\n     * @fileOverview File\r\n     */\r\n    define('lib/file',[\r\n        'base',\r\n        'lib/blob'\r\n    ], function( Base, Blob ) {\r\n    \r\n        var uid = 1,\r\n            rExt = /\\.([^.]+)$/;\r\n    \r\n        function File( ruid, file ) {\r\n            var ext;\r\n    \r\n            this.name = file.name || ('untitled' + uid++);\r\n            ext = rExt.exec( file.name ) ? RegExp.$1.toLowerCase() : '';\r\n    \r\n            // todo 支持其他类型文件的转换。\r\n            // 如果有 mimetype, 但是文件名里面没有找出后缀规律\r\n            if ( !ext && file.type ) {\r\n                ext = /\\/(jpg|jpeg|png|gif|bmp)$/i.exec( file.type ) ?\r\n                        RegExp.$1.toLowerCase() : '';\r\n                this.name += '.' + ext;\r\n            }\r\n    \r\n            this.ext = ext;\r\n            this.lastModifiedDate = file.lastModifiedDate ||\r\n                    (new Date()).toLocaleString();\r\n    \r\n            Blob.apply( this, arguments );\r\n        }\r\n    \r\n        return Base.inherits( Blob, File );\r\n    });\r\n    \r\n    /**\r\n     * @fileOverview 错误信息\r\n     */\r\n    define('lib/filepicker',[\r\n        'base',\r\n        'runtime/client',\r\n        'lib/file'\r\n    ], function( Base, RuntimeClient, File ) {\r\n    \r\n        var $ = Base.$;\r\n    \r\n        function FilePicker( opts ) {\r\n            opts = this.options = $.extend({}, FilePicker.options, opts );\r\n    \r\n            opts.container = $( opts.id );\r\n    \r\n            if ( !opts.container.length ) {\r\n                throw new Error('按钮指定错误');\r\n            }\r\n    \r\n            opts.innerHTML = opts.innerHTML || opts.label ||\r\n                    opts.container.html() || '';\r\n    \r\n            opts.button = $( opts.button || document.createElement('div') );\r\n            opts.button.html( opts.innerHTML );\r\n            opts.container.html( opts.button );\r\n    \r\n            RuntimeClient.call( this, 'FilePicker', true );\r\n        }\r\n    \r\n        FilePicker.options = {\r\n            button: null,\r\n            container: null,\r\n            label: null,\r\n            innerHTML: null,\r\n            multiple: true,\r\n            accept: null,\r\n            name: 'file',\r\n            style: 'webuploader-pick'   //pick element class attribute, default is \"webuploader-pick\"\r\n        };\r\n    \r\n        Base.inherits( RuntimeClient, {\r\n            constructor: FilePicker,\r\n    \r\n            init: function() {\r\n                var me = this,\r\n                    opts = me.options,\r\n                    button = opts.button,\r\n                    style = opts.style;\r\n    \r\n                if (style)\r\n                    button.addClass('webuploader-pick');\r\n    \r\n                me.on( 'all', function( type ) {\r\n                    var files;\r\n    \r\n                    switch ( type ) {\r\n                        case 'mouseenter':\r\n                            if (style)\r\n                                button.addClass('webuploader-pick-hover');\r\n                            break;\r\n    \r\n                        case 'mouseleave':\r\n                            if (style)\r\n                                button.removeClass('webuploader-pick-hover');\r\n                            break;\r\n    \r\n                        case 'change':\r\n                            files = me.exec('getFiles');\r\n                            me.trigger( 'select', $.map( files, function( file ) {\r\n                                file = new File( me.getRuid(), file );\r\n    \r\n                                // 记录来源。\r\n                                file._refer = opts.container;\r\n                                return file;\r\n                            }), opts.container );\r\n                            break;\r\n                    }\r\n                });\r\n    \r\n                me.connectRuntime( opts, function() {\r\n                    me.refresh();\r\n                    me.exec( 'init', opts );\r\n                    me.trigger('ready');\r\n                });\r\n    \r\n                this._resizeHandler = Base.bindFn( this.refresh, this );\r\n                $( window ).on( 'resize', this._resizeHandler );\r\n            },\r\n    \r\n            refresh: function() {\r\n                var shimContainer = this.getRuntime().getContainer(),\r\n                    button = this.options.button,\r\n                    width = button.outerWidth ?\r\n                            button.outerWidth() : button.width(),\r\n    \r\n                    height = button.outerHeight ?\r\n                            button.outerHeight() : button.height(),\r\n    \r\n                    pos = button.offset();\r\n    \r\n                width && height && shimContainer.css({\r\n                    bottom: 'auto',\r\n                    right: 'auto',\r\n                    width: width + 'px',\r\n                    height: height + 'px'\r\n                }).offset( pos );\r\n            },\r\n    \r\n            enable: function() {\r\n                var btn = this.options.button;\r\n    \r\n                btn.removeClass('webuploader-pick-disable');\r\n                this.refresh();\r\n            },\r\n    \r\n            disable: function() {\r\n                var btn = this.options.button;\r\n    \r\n                this.getRuntime().getContainer().css({\r\n                    top: '-99999px'\r\n                });\r\n    \r\n                btn.addClass('webuploader-pick-disable');\r\n            },\r\n    \r\n            destroy: function() {\r\n                var btn = this.options.button;\r\n                $( window ).off( 'resize', this._resizeHandler );\r\n                btn.removeClass('webuploader-pick-disable webuploader-pick-hover ' +\r\n                    'webuploader-pick');\r\n            }\r\n        });\r\n    \r\n        return FilePicker;\r\n    });\r\n    \r\n    /**\r\n     * @fileOverview 文件选择相关\r\n     */\r\n    define('widgets/filepicker',[\r\n        'base',\r\n        'uploader',\r\n        'lib/filepicker',\r\n        'widgets/widget'\r\n    ], function( Base, Uploader, FilePicker ) {\r\n        var $ = Base.$;\r\n    \r\n        $.extend( Uploader.options, {\r\n    \r\n            /**\r\n             * @property {Selector | Object} [pick=undefined]\r\n             * @namespace options\r\n             * @for Uploader\r\n             * @description 指定选择文件的按钮容器，不指定则不创建按钮。\r\n             *\r\n             * * `id` {Seletor|dom} 指定选择文件的按钮容器，不指定则不创建按钮。**注意** 这里虽然写的是 id, 但是不是只支持 id, 还支持 class, 或者 dom 节点。\r\n             * * `label` {String} 请采用 `innerHTML` 代替\r\n             * * `innerHTML` {String} 指定按钮文字。不指定时优先从指定的容器中看是否自带文字。\r\n             * * `multiple` {Boolean} 是否开起同时选择多个文件能力。\r\n             */\r\n            pick: null,\r\n    \r\n            /**\r\n             * @property {Arroy} [accept=null]\r\n             * @namespace options\r\n             * @for Uploader\r\n             * @description 指定接受哪些类型的文件。 由于目前还有ext转mimeType表，所以这里需要分开指定。\r\n             *\r\n             * * `title` {String} 文字描述\r\n             * * `extensions` {String} 允许的文件后缀，不带点，多个用逗号分割。\r\n             * * `mimeTypes` {String} 多个用逗号分割。\r\n             *\r\n             * 如：\r\n             *\r\n             * ```\r\n             * {\r\n             *     title: 'Images',\r\n             *     extensions: 'gif,jpg,jpeg,bmp,png',\r\n             *     mimeTypes: 'image/*'\r\n             * }\r\n             * ```\r\n             */\r\n            accept: null/*{\r\n                title: 'Images',\r\n                extensions: 'gif,jpg,jpeg,bmp,png',\r\n                mimeTypes: 'image/*'\r\n            }*/\r\n        });\r\n    \r\n        return Uploader.register({\r\n            name: 'picker',\r\n    \r\n            init: function( opts ) {\r\n                this.pickers = [];\r\n                return opts.pick && this.addBtn( opts.pick );\r\n            },\r\n    \r\n            refresh: function() {\r\n                $.each( this.pickers, function() {\r\n                    this.refresh();\r\n                });\r\n            },\r\n    \r\n            /**\r\n             * @method addBtn\r\n             * @for Uploader\r\n             * @grammar addBtn( pick ) => Promise\r\n             * @description\r\n             * 添加文件选择按钮，如果一个按钮不够，需要调用此方法来添加。参数跟[options.pick](#WebUploader:Uploader:options)一致。\r\n             * @example\r\n             * uploader.addBtn({\r\n             *     id: '#btnContainer',\r\n             *     innerHTML: '选择文件'\r\n             * });\r\n             */\r\n            addBtn: function( pick ) {\r\n                var me = this,\r\n                    opts = me.options,\r\n                    accept = opts.accept,\r\n                    promises = [];\r\n    \r\n                if ( !pick ) {\r\n                    return;\r\n                }\r\n    \r\n                $.isPlainObject( pick ) || (pick = {\r\n                    id: pick\r\n                });\r\n    \r\n                $( pick.id ).each(function() {\r\n                    var options, picker, deferred;\r\n    \r\n                    deferred = Base.Deferred();\r\n    \r\n                    options = $.extend({}, pick, {\r\n                        accept: $.isPlainObject( accept ) ? [ accept ] : accept,\r\n                        swf: opts.swf,\r\n                        runtimeOrder: opts.runtimeOrder,\r\n                        id: this\r\n                    });\r\n    \r\n                    picker = new FilePicker( options );\r\n    \r\n                    picker.once( 'ready', deferred.resolve );\r\n                    picker.on( 'select', function( files ) {\r\n                        me.owner.request( 'add-file', [ files ]);\r\n                    });\r\n                    picker.on('dialogopen', function() {\r\n                        me.owner.trigger('dialogOpen', picker.button);\r\n                    });\r\n                    picker.init();\r\n    \r\n                    me.pickers.push( picker );\r\n    \r\n                    promises.push( deferred.promise() );\r\n                });\r\n    \r\n                return Base.when.apply( Base, promises );\r\n            },\r\n    \r\n            disable: function() {\r\n                $.each( this.pickers, function() {\r\n                    this.disable();\r\n                });\r\n            },\r\n    \r\n            enable: function() {\r\n                $.each( this.pickers, function() {\r\n                    this.enable();\r\n                });\r\n            },\r\n    \r\n            destroy: function() {\r\n                $.each( this.pickers, function() {\r\n                    this.destroy();\r\n                });\r\n                this.pickers = null;\r\n            }\r\n        });\r\n    });\r\n    /**\r\n     * @fileOverview Image\r\n     */\r\n    define('lib/image',[\r\n        'base',\r\n        'runtime/client',\r\n        'lib/blob'\r\n    ], function( Base, RuntimeClient, Blob ) {\r\n        var $ = Base.$;\r\n    \r\n        // 构造器。\r\n        function Image( opts ) {\r\n            this.options = $.extend({}, Image.options, opts );\r\n            RuntimeClient.call( this, 'Image' );\r\n    \r\n            this.on( 'load', function() {\r\n                this._info = this.exec('info');\r\n                this._meta = this.exec('meta');\r\n            });\r\n        }\r\n    \r\n        // 默认选项。\r\n        Image.options = {\r\n    \r\n            // 默认的图片处理质量\r\n            quality: 90,\r\n    \r\n            // 是否裁剪\r\n            crop: false,\r\n    \r\n            // 是否保留头部信息\r\n            preserveHeaders: false,\r\n    \r\n            // 是否允许放大。\r\n            allowMagnify: false\r\n        };\r\n    \r\n        // 继承RuntimeClient.\r\n        Base.inherits( RuntimeClient, {\r\n            constructor: Image,\r\n    \r\n            info: function( val ) {\r\n    \r\n                // setter\r\n                if ( val ) {\r\n                    this._info = val;\r\n                    return this;\r\n                }\r\n    \r\n                // getter\r\n                return this._info;\r\n            },\r\n    \r\n            meta: function( val ) {\r\n    \r\n                // setter\r\n                if ( val ) {\r\n                    this._meta = val;\r\n                    return this;\r\n                }\r\n    \r\n                // getter\r\n                return this._meta;\r\n            },\r\n    \r\n            loadFromBlob: function( blob ) {\r\n                var me = this,\r\n                    ruid = blob.getRuid();\r\n    \r\n                this.connectRuntime( ruid, function() {\r\n                    me.exec( 'init', me.options );\r\n                    me.exec( 'loadFromBlob', blob );\r\n                });\r\n            },\r\n    \r\n            resize: function() {\r\n                var args = Base.slice( arguments );\r\n                return this.exec.apply( this, [ 'resize' ].concat( args ) );\r\n            },\r\n    \r\n            crop: function() {\r\n                var args = Base.slice( arguments );\r\n                return this.exec.apply( this, [ 'crop' ].concat( args ) );\r\n            },\r\n    \r\n            getAsDataUrl: function( type ) {\r\n                return this.exec( 'getAsDataUrl', type );\r\n            },\r\n    \r\n            getAsBlob: function( type ) {\r\n                var blob = this.exec( 'getAsBlob', type );\r\n    \r\n                return new Blob( this.getRuid(), blob );\r\n            }\r\n        });\r\n    \r\n        return Image;\r\n    });\r\n    /**\r\n     * @fileOverview 图片操作, 负责预览图片和上传前压缩图片\r\n     */\r\n    define('widgets/image',[\r\n        'base',\r\n        'uploader',\r\n        'lib/image',\r\n        'widgets/widget'\r\n    ], function( Base, Uploader, Image ) {\r\n    \r\n        var $ = Base.$,\r\n            throttle;\r\n    \r\n        // 根据要处理的文件大小来节流，一次不能处理太多，会卡。\r\n        throttle = (function( max ) {\r\n            var occupied = 0,\r\n                waiting = [],\r\n                tick = function() {\r\n                    var item;\r\n    \r\n                    while ( waiting.length && occupied < max ) {\r\n                        item = waiting.shift();\r\n                        occupied += item[ 0 ];\r\n                        item[ 1 ]();\r\n                    }\r\n                };\r\n    \r\n            return function( emiter, size, cb ) {\r\n                waiting.push([ size, cb ]);\r\n                emiter.once( 'destroy', function() {\r\n                    occupied -= size;\r\n                    setTimeout( tick, 1 );\r\n                });\r\n                setTimeout( tick, 1 );\r\n            };\r\n        })( 5 * 1024 * 1024 );\r\n    \r\n        $.extend( Uploader.options, {\r\n    \r\n            /**\r\n             * @property {Object} [thumb]\r\n             * @namespace options\r\n             * @for Uploader\r\n             * @description 配置生成缩略图的选项。\r\n             *\r\n             * 默认为：\r\n             *\r\n             * ```javascript\r\n             * {\r\n             *     width: 110,\r\n             *     height: 110,\r\n             *\r\n             *     // 图片质量，只有type为`image/jpeg`的时候才有效。\r\n             *     quality: 70,\r\n             *\r\n             *     // 是否允许放大，如果想要生成小图的时候不失真，此选项应该设置为false.\r\n             *     allowMagnify: true,\r\n             *\r\n             *     // 是否允许裁剪。\r\n             *     crop: true,\r\n             *\r\n             *     // 为空的话则保留原有图片格式。\r\n             *     // 否则强制转换成指定的类型。\r\n             *     type: 'image/jpeg'\r\n             * }\r\n             * ```\r\n             */\r\n            thumb: {\r\n                width: 110,\r\n                height: 110,\r\n                quality: 70,\r\n                allowMagnify: true,\r\n                crop: true,\r\n                preserveHeaders: false,\r\n    \r\n                // 为空的话则保留原有图片格式。\r\n                // 否则强制转换成指定的类型。\r\n                // IE 8下面 base64 大小不能超过 32K 否则预览失败，而非 jpeg 编码的图片很可\r\n                // 能会超过 32k, 所以这里设置成预览的时候都是 image/jpeg\r\n                type: 'image/jpeg'\r\n            },\r\n    \r\n            /**\r\n             * @property {Object} [compress]\r\n             * @namespace options\r\n             * @for Uploader\r\n             * @description 配置压缩的图片的选项。如果此选项为`false`, 则图片在上传前不进行压缩。\r\n             *\r\n             * 默认为：\r\n             *\r\n             * ```javascript\r\n             * {\r\n             *     width: 1600,\r\n             *     height: 1600,\r\n             *\r\n             *     // 图片质量，只有type为`image/jpeg`的时候才有效。\r\n             *     quality: 90,\r\n             *\r\n             *     // 是否允许放大，如果想要生成小图的时候不失真，此选项应该设置为false.\r\n             *     allowMagnify: false,\r\n             *\r\n             *     // 是否允许裁剪。\r\n             *     crop: false,\r\n             *\r\n             *     // 是否保留头部meta信息。\r\n             *     preserveHeaders: true,\r\n             *\r\n             *     // 如果发现压缩后文件大小比原来还大，则使用原来图片\r\n             *     // 此属性可能会影响图片自动纠正功能\r\n             *     noCompressIfLarger: false,\r\n             *\r\n             *     // 单位字节，如果图片大小小于此值，不会采用压缩。\r\n             *     compressSize: 0\r\n             * }\r\n             * ```\r\n             */\r\n            compress: {\r\n                width: 1600,\r\n                height: 1600,\r\n                quality: 90,\r\n                allowMagnify: false,\r\n                crop: false,\r\n                preserveHeaders: true\r\n            }\r\n        });\r\n    \r\n        return Uploader.register({\r\n    \r\n            name: 'image',\r\n    \r\n    \r\n            /**\r\n             * 生成缩略图，此过程为异步，所以需要传入`callback`。\r\n             * 通常情况在图片加入队里后调用此方法来生成预览图以增强交互效果。\r\n             *\r\n             * 当 width 或者 height 的值介于 0 - 1 时，被当成百分比使用。\r\n             *\r\n             * `callback`中可以接收到两个参数。\r\n             * * 第一个为error，如果生成缩略图有错误，此error将为真。\r\n             * * 第二个为ret, 缩略图的Data URL值。\r\n             *\r\n             * **注意**\r\n             * Date URL在IE6/7中不支持，所以不用调用此方法了，直接显示一张暂不支持预览图片好了。\r\n             * 也可以借助服务端，将 base64 数据传给服务端，生成一个临时文件供预览。\r\n             *\r\n             * @method makeThumb\r\n             * @grammar makeThumb( file, callback ) => undefined\r\n             * @grammar makeThumb( file, callback, width, height ) => undefined\r\n             * @for Uploader\r\n             * @example\r\n             *\r\n             * uploader.on( 'fileQueued', function( file ) {\r\n             *     var $li = ...;\r\n             *\r\n             *     uploader.makeThumb( file, function( error, ret ) {\r\n             *         if ( error ) {\r\n             *             $li.text('预览错误');\r\n             *         } else {\r\n             *             $li.append('<img alt=\"\" src=\"' + ret + '\" />');\r\n             *         }\r\n             *     });\r\n             *\r\n             * });\r\n             */\r\n            makeThumb: function( file, cb, width, height ) {\r\n                var opts, image;\r\n    \r\n                file = this.request( 'get-file', file );\r\n    \r\n                // 只预览图片格式。\r\n                if ( !file.type.match( /^image/ ) ) {\r\n                    cb( true );\r\n                    return;\r\n                }\r\n    \r\n                opts = $.extend({}, this.options.thumb );\r\n    \r\n                // 如果传入的是object.\r\n                if ( $.isPlainObject( width ) ) {\r\n                    opts = $.extend( opts, width );\r\n                    width = null;\r\n                }\r\n    \r\n                width = width || opts.width;\r\n                height = height || opts.height;\r\n    \r\n                image = new Image( opts );\r\n    \r\n                image.once( 'load', function() {\r\n                    file._info = file._info || image.info();\r\n                    file._meta = file._meta || image.meta();\r\n    \r\n                    // 如果 width 的值介于 0 - 1\r\n                    // 说明设置的是百分比。\r\n                    if ( width <= 1 && width > 0 ) {\r\n                        width = file._info.width * width;\r\n                    }\r\n    \r\n                    // 同样的规则应用于 height\r\n                    if ( height <= 1 && height > 0 ) {\r\n                        height = file._info.height * height;\r\n                    }\r\n    \r\n                    image.resize( width, height );\r\n                });\r\n    \r\n                // 当 resize 完后\r\n                image.once( 'complete', function() {\r\n                    cb( false, image.getAsDataUrl( opts.type ) );\r\n                    image.destroy();\r\n                });\r\n    \r\n                image.once( 'error', function( reason ) {\r\n                    cb( reason || true );\r\n                    image.destroy();\r\n                });\r\n    \r\n                throttle( image, file.source.size, function() {\r\n                    file._info && image.info( file._info );\r\n                    file._meta && image.meta( file._meta );\r\n                    image.loadFromBlob( file.source );\r\n                });\r\n            },\r\n    \r\n            beforeSendFile: function( file ) {\r\n                var opts = this.options.compress || this.options.resize,\r\n                    compressSize = opts && opts.compressSize || 0,\r\n                    noCompressIfLarger = opts && opts.noCompressIfLarger || false,\r\n                    image, deferred;\r\n    \r\n                file = this.request( 'get-file', file );\r\n    \r\n                // 只压缩 jpeg 图片格式。\r\n                // gif 可能会丢失针\r\n                // bmp png 基本上尺寸都不大，且压缩比比较小。\r\n                if ( !opts || !~'image/jpeg,image/jpg'.indexOf( file.type ) ||\r\n                        file.size < compressSize ||\r\n                        file._compressed ) {\r\n                    return;\r\n                }\r\n    \r\n                opts = $.extend({}, opts );\r\n                deferred = Base.Deferred();\r\n    \r\n                image = new Image( opts );\r\n    \r\n                deferred.always(function() {\r\n                    image.destroy();\r\n                    image = null;\r\n                });\r\n                image.once( 'error', deferred.reject );\r\n                image.once( 'load', function() {\r\n                    var width = opts.width,\r\n                        height = opts.height;\r\n    \r\n                    file._info = file._info || image.info();\r\n                    file._meta = file._meta || image.meta();\r\n    \r\n                    // 如果 width 的值介于 0 - 1\r\n                    // 说明设置的是百分比。\r\n                    if ( width <= 1 && width > 0 ) {\r\n                        width = file._info.width * width;\r\n                    }\r\n    \r\n                    // 同样的规则应用于 height\r\n                    if ( height <= 1 && height > 0 ) {\r\n                        height = file._info.height * height;\r\n                    }\r\n    \r\n                    image.resize( width, height );\r\n                });\r\n    \r\n                image.once( 'complete', function() {\r\n                    var blob, size;\r\n    \r\n                    // 移动端 UC / qq 浏览器的无图模式下\r\n                    // ctx.getImageData 处理大图的时候会报 Exception\r\n                    // INDEX_SIZE_ERR: DOM Exception 1\r\n                    try {\r\n                        blob = image.getAsBlob( opts.type );\r\n    \r\n                        size = file.size;\r\n    \r\n                        // 如果压缩后，比原来还大则不用压缩后的。\r\n                        if ( !noCompressIfLarger || blob.size < size ) {\r\n                            // file.source.destroy && file.source.destroy();\r\n                            file.source = blob;\r\n                            file.size = blob.size;\r\n    \r\n                            file.trigger( 'resize', blob.size, size );\r\n                        }\r\n    \r\n                        // 标记，避免重复压缩。\r\n                        file._compressed = true;\r\n                        deferred.resolve();\r\n                    } catch ( e ) {\r\n                        // 出错了直接继续，让其上传原始图片\r\n                        deferred.resolve();\r\n                    }\r\n                });\r\n    \r\n                file._info && image.info( file._info );\r\n                file._meta && image.meta( file._meta );\r\n    \r\n                image.loadFromBlob( file.source );\r\n                return deferred.promise();\r\n            }\r\n        });\r\n    });\r\n    /**\r\n     * @fileOverview 文件属性封装\r\n     */\r\n    define('file',[\r\n        'base',\r\n        'mediator'\r\n    ], function( Base, Mediator ) {\r\n    \r\n        var $ = Base.$,\r\n            idPrefix = 'WU_FILE_',\r\n            idSuffix = 0,\r\n            rExt = /\\.([^.]+)$/,\r\n            statusMap = {};\r\n    \r\n        function gid() {\r\n            return idPrefix + idSuffix++;\r\n        }\r\n    \r\n        /**\r\n         * 文件类\r\n         * @class File\r\n         * @constructor 构造函数\r\n         * @grammar new File( source ) => File\r\n         * @param {Lib.File} source [lib.File](#Lib.File)实例, 此source对象是带有Runtime信息的。\r\n         */\r\n        function WUFile( source ) {\r\n    \r\n            /**\r\n             * 文件名，包括扩展名（后缀）\r\n             * @property name\r\n             * @type {string}\r\n             */\r\n            this.name = source.name || 'Untitled';\r\n    \r\n            /**\r\n             * 文件体积（字节）\r\n             * @property size\r\n             * @type {uint}\r\n             * @default 0\r\n             */\r\n            this.size = source.size || 0;\r\n    \r\n            /**\r\n             * 文件MIMETYPE类型，与文件类型的对应关系请参考[http://t.cn/z8ZnFny](http://t.cn/z8ZnFny)\r\n             * @property type\r\n             * @type {string}\r\n             * @default 'application/octet-stream'\r\n             */\r\n            this.type = source.type || 'application/octet-stream';\r\n    \r\n            /**\r\n             * 文件最后修改日期\r\n             * @property lastModifiedDate\r\n             * @type {int}\r\n             * @default 当前时间戳\r\n             */\r\n            this.lastModifiedDate = source.lastModifiedDate || (new Date() * 1);\r\n    \r\n            /**\r\n             * 文件ID，每个对象具有唯一ID，与文件名无关\r\n             * @property id\r\n             * @type {string}\r\n             */\r\n            this.id = gid();\r\n    \r\n            /**\r\n             * 文件扩展名，通过文件名获取，例如test.png的扩展名为png\r\n             * @property ext\r\n             * @type {string}\r\n             */\r\n            this.ext = rExt.exec( this.name ) ? RegExp.$1 : '';\r\n    \r\n    \r\n            /**\r\n             * 状态文字说明。在不同的status语境下有不同的用途。\r\n             * @property statusText\r\n             * @type {string}\r\n             */\r\n            this.statusText = '';\r\n    \r\n            // 存储文件状态，防止通过属性直接修改\r\n            statusMap[ this.id ] = WUFile.Status.INITED;\r\n    \r\n            this.source = source;\r\n            this.loaded = 0;\r\n    \r\n            this.on( 'error', function( msg ) {\r\n                this.setStatus( WUFile.Status.ERROR, msg );\r\n            });\r\n        }\r\n    \r\n        $.extend( WUFile.prototype, {\r\n    \r\n            /**\r\n             * 设置状态，状态变化时会触发`change`事件。\r\n             * @method setStatus\r\n             * @grammar setStatus( status[, statusText] );\r\n             * @param {File.Status|String} status [文件状态值](#WebUploader:File:File.Status)\r\n             * @param {String} [statusText=''] 状态说明，常在error时使用，用http, abort,server等来标记是由于什么原因导致文件错误。\r\n             */\r\n            setStatus: function( status, text ) {\r\n    \r\n                var prevStatus = statusMap[ this.id ];\r\n    \r\n                typeof text !== 'undefined' && (this.statusText = text);\r\n    \r\n                if ( status !== prevStatus ) {\r\n                    statusMap[ this.id ] = status;\r\n                    /**\r\n                     * 文件状态变化\r\n                     * @event statuschange\r\n                     */\r\n                    this.trigger( 'statuschange', status, prevStatus );\r\n                }\r\n    \r\n            },\r\n    \r\n            /**\r\n             * 获取文件状态\r\n             * @return {File.Status}\r\n             * @example\r\n                     文件状态具体包括以下几种类型：\r\n                     {\r\n                         // 初始化\r\n                        INITED:     0,\r\n                        // 已入队列\r\n                        QUEUED:     1,\r\n                        // 正在上传\r\n                        PROGRESS:     2,\r\n                        // 上传出错\r\n                        ERROR:         3,\r\n                        // 上传成功\r\n                        COMPLETE:     4,\r\n                        // 上传取消\r\n                        CANCELLED:     5\r\n                    }\r\n             */\r\n            getStatus: function() {\r\n                return statusMap[ this.id ];\r\n            },\r\n    \r\n            /**\r\n             * 获取文件原始信息。\r\n             * @return {*}\r\n             */\r\n            getSource: function() {\r\n                return this.source;\r\n            },\r\n    \r\n            destroy: function() {\r\n                this.off();\r\n                delete statusMap[ this.id ];\r\n            }\r\n        });\r\n    \r\n        Mediator.installTo( WUFile.prototype );\r\n    \r\n        /**\r\n         * 文件状态值，具体包括以下几种类型：\r\n         * * `inited` 初始状态\r\n         * * `queued` 已经进入队列, 等待上传\r\n         * * `progress` 上传中\r\n         * * `complete` 上传完成。\r\n         * * `error` 上传出错，可重试\r\n         * * `interrupt` 上传中断，可续传。\r\n         * * `invalid` 文件不合格，不能重试上传。会自动从队列中移除。\r\n         * * `cancelled` 文件被移除。\r\n         * @property {Object} Status\r\n         * @namespace File\r\n         * @class File\r\n         * @static\r\n         */\r\n        WUFile.Status = {\r\n            INITED:     'inited',    // 初始状态\r\n            QUEUED:     'queued',    // 已经进入队列, 等待上传\r\n            PROGRESS:   'progress',    // 上传中\r\n            ERROR:      'error',    // 上传出错，可重试\r\n            COMPLETE:   'complete',    // 上传完成。\r\n            CANCELLED:  'cancelled',    // 上传取消。\r\n            INTERRUPT:  'interrupt',    // 上传中断，可续传。\r\n            INVALID:    'invalid'    // 文件不合格，不能重试上传。\r\n        };\r\n    \r\n        return WUFile;\r\n    });\r\n    \r\n    /**\r\n     * @fileOverview 文件队列\r\n     */\r\n    define('queue',[\r\n        'base',\r\n        'mediator',\r\n        'file'\r\n    ], function( Base, Mediator, WUFile ) {\r\n    \r\n        var $ = Base.$,\r\n            STATUS = WUFile.Status;\r\n    \r\n        /**\r\n         * 文件队列, 用来存储各个状态中的文件。\r\n         * @class Queue\r\n         * @extends Mediator\r\n         */\r\n        function Queue() {\r\n    \r\n            /**\r\n             * 统计文件数。\r\n             * * `numOfQueue` 队列中的文件数。\r\n             * * `numOfSuccess` 上传成功的文件数\r\n             * * `numOfCancel` 被取消的文件数\r\n             * * `numOfProgress` 正在上传中的文件数\r\n             * * `numOfUploadFailed` 上传错误的文件数。\r\n             * * `numOfInvalid` 无效的文件数。\r\n             * * `numofDeleted` 被移除的文件数。\r\n             * @property {Object} stats\r\n             */\r\n            this.stats = {\r\n                numOfQueue: 0,\r\n                numOfSuccess: 0,\r\n                numOfCancel: 0,\r\n                numOfProgress: 0,\r\n                numOfUploadFailed: 0,\r\n                numOfInvalid: 0,\r\n                numofDeleted: 0,\r\n                numofInterrupt: 0\r\n            };\r\n    \r\n            // 上传队列，仅包括等待上传的文件\r\n            this._queue = [];\r\n    \r\n            // 存储所有文件\r\n            this._map = {};\r\n        }\r\n    \r\n        $.extend( Queue.prototype, {\r\n    \r\n            /**\r\n             * 将新文件加入对队列尾部\r\n             *\r\n             * @method append\r\n             * @param  {File} file   文件对象\r\n             */\r\n            append: function( file ) {\r\n                this._queue.push( file );\r\n                this._fileAdded( file );\r\n                return this;\r\n            },\r\n    \r\n            /**\r\n             * 将新文件加入对队列头部\r\n             *\r\n             * @method prepend\r\n             * @param  {File} file   文件对象\r\n             */\r\n            prepend: function( file ) {\r\n                this._queue.unshift( file );\r\n                this._fileAdded( file );\r\n                return this;\r\n            },\r\n    \r\n            /**\r\n             * 获取文件对象\r\n             *\r\n             * @method getFile\r\n             * @param  {String} fileId   文件ID\r\n             * @return {File}\r\n             */\r\n            getFile: function( fileId ) {\r\n                if ( typeof fileId !== 'string' ) {\r\n                    return fileId;\r\n                }\r\n                return this._map[ fileId ];\r\n            },\r\n    \r\n            /**\r\n             * 从队列中取出一个指定状态的文件。\r\n             * @grammar fetch( status ) => File\r\n             * @method fetch\r\n             * @param {String} status [文件状态值](#WebUploader:File:File.Status)\r\n             * @return {File} [File](#WebUploader:File)\r\n             */\r\n            fetch: function( status ) {\r\n                var len = this._queue.length,\r\n                    i, file;\r\n    \r\n                status = status || STATUS.QUEUED;\r\n    \r\n                for ( i = 0; i < len; i++ ) {\r\n                    file = this._queue[ i ];\r\n    \r\n                    if ( status === file.getStatus() ) {\r\n                        return file;\r\n                    }\r\n                }\r\n    \r\n                return null;\r\n            },\r\n    \r\n            /**\r\n             * 对队列进行排序，能够控制文件上传顺序。\r\n             * @grammar sort( fn ) => undefined\r\n             * @method sort\r\n             * @param {Function} fn 排序方法\r\n             */\r\n            sort: function( fn ) {\r\n                if ( typeof fn === 'function' ) {\r\n                    this._queue.sort( fn );\r\n                }\r\n            },\r\n    \r\n            /**\r\n             * 获取指定类型的文件列表, 列表中每一个成员为[File](#WebUploader:File)对象。\r\n             * @grammar getFiles( [status1[, status2 ...]] ) => Array\r\n             * @method getFiles\r\n             * @param {String} [status] [文件状态值](#WebUploader:File:File.Status)\r\n             */\r\n            getFiles: function() {\r\n                var sts = [].slice.call( arguments, 0 ),\r\n                    ret = [],\r\n                    i = 0,\r\n                    len = this._queue.length,\r\n                    file;\r\n    \r\n                for ( ; i < len; i++ ) {\r\n                    file = this._queue[ i ];\r\n    \r\n                    if ( sts.length && !~$.inArray( file.getStatus(), sts ) ) {\r\n                        continue;\r\n                    }\r\n    \r\n                    ret.push( file );\r\n                }\r\n    \r\n                return ret;\r\n            },\r\n    \r\n            /**\r\n             * 在队列中删除文件。\r\n             * @grammar removeFile( file ) => Array\r\n             * @method removeFile\r\n             * @param {File} 文件对象。\r\n             */\r\n            removeFile: function( file ) {\r\n                var me = this,\r\n                    existing = this._map[ file.id ];\r\n    \r\n                if ( existing ) {\r\n                    delete this._map[ file.id ];\r\n                    file.destroy();\r\n                    this.stats.numofDeleted++;\r\n                }\r\n            },\r\n    \r\n            _fileAdded: function( file ) {\r\n                var me = this,\r\n                    existing = this._map[ file.id ];\r\n    \r\n                if ( !existing ) {\r\n                    this._map[ file.id ] = file;\r\n    \r\n                    file.on( 'statuschange', function( cur, pre ) {\r\n                        me._onFileStatusChange( cur, pre );\r\n                    });\r\n                }\r\n            },\r\n    \r\n            _onFileStatusChange: function( curStatus, preStatus ) {\r\n                var stats = this.stats;\r\n    \r\n                switch ( preStatus ) {\r\n                    case STATUS.PROGRESS:\r\n                        stats.numOfProgress--;\r\n                        break;\r\n    \r\n                    case STATUS.QUEUED:\r\n                        stats.numOfQueue --;\r\n                        break;\r\n    \r\n                    case STATUS.ERROR:\r\n                        stats.numOfUploadFailed--;\r\n                        break;\r\n    \r\n                    case STATUS.INVALID:\r\n                        stats.numOfInvalid--;\r\n                        break;\r\n    \r\n                    case STATUS.INTERRUPT:\r\n                        stats.numofInterrupt--;\r\n                        break;\r\n                }\r\n    \r\n                switch ( curStatus ) {\r\n                    case STATUS.QUEUED:\r\n                        stats.numOfQueue++;\r\n                        break;\r\n    \r\n                    case STATUS.PROGRESS:\r\n                        stats.numOfProgress++;\r\n                        break;\r\n    \r\n                    case STATUS.ERROR:\r\n                        stats.numOfUploadFailed++;\r\n                        break;\r\n    \r\n                    case STATUS.COMPLETE:\r\n                        stats.numOfSuccess++;\r\n                        break;\r\n    \r\n                    case STATUS.CANCELLED:\r\n                        stats.numOfCancel++;\r\n                        break;\r\n    \r\n    \r\n                    case STATUS.INVALID:\r\n                        stats.numOfInvalid++;\r\n                        break;\r\n    \r\n                    case STATUS.INTERRUPT:\r\n                        stats.numofInterrupt++;\r\n                        break;\r\n                }\r\n            }\r\n    \r\n        });\r\n    \r\n        Mediator.installTo( Queue.prototype );\r\n    \r\n        return Queue;\r\n    });\r\n    /**\r\n     * @fileOverview 队列\r\n     */\r\n    define('widgets/queue',[\r\n        'base',\r\n        'uploader',\r\n        'queue',\r\n        'file',\r\n        'lib/file',\r\n        'runtime/client',\r\n        'widgets/widget'\r\n    ], function( Base, Uploader, Queue, WUFile, File, RuntimeClient ) {\r\n    \r\n        var $ = Base.$,\r\n            rExt = /\\.\\w+$/,\r\n            Status = WUFile.Status;\r\n    \r\n        return Uploader.register({\r\n            name: 'queue',\r\n    \r\n            init: function( opts ) {\r\n                var me = this,\r\n                    deferred, len, i, item, arr, accept, runtime;\r\n    \r\n                if ( $.isPlainObject( opts.accept ) ) {\r\n                    opts.accept = [ opts.accept ];\r\n                }\r\n    \r\n                // accept中的中生成匹配正则。\r\n                if ( opts.accept ) {\r\n                    arr = [];\r\n    \r\n                    for ( i = 0, len = opts.accept.length; i < len; i++ ) {\r\n                        item = opts.accept[ i ].extensions;\r\n                        item && arr.push( item );\r\n                    }\r\n    \r\n                    if ( arr.length ) {\r\n                        accept = '\\\\.' + arr.join(',')\r\n                                .replace( /,/g, '$|\\\\.' )\r\n                                .replace( /\\*/g, '.*' ) + '$';\r\n                    }\r\n    \r\n                    me.accept = new RegExp( accept, 'i' );\r\n                }\r\n    \r\n                me.queue = new Queue();\r\n                me.stats = me.queue.stats;\r\n    \r\n                // 如果当前不是html5运行时，那就算了。\r\n                // 不执行后续操作\r\n                if ( this.request('predict-runtime-type') !== 'html5' ) {\r\n                    return;\r\n                }\r\n    \r\n                // 创建一个 html5 运行时的 placeholder\r\n                // 以至于外部添加原生 File 对象的时候能正确包裹一下供 webuploader 使用。\r\n                deferred = Base.Deferred();\r\n                this.placeholder = runtime = new RuntimeClient('Placeholder');\r\n                runtime.connectRuntime({\r\n                    runtimeOrder: 'html5'\r\n                }, function() {\r\n                    me._ruid = runtime.getRuid();\r\n                    deferred.resolve();\r\n                });\r\n                return deferred.promise();\r\n            },\r\n    \r\n    \r\n            // 为了支持外部直接添加一个原生File对象。\r\n            _wrapFile: function( file ) {\r\n                if ( !(file instanceof WUFile) ) {\r\n    \r\n                    if ( !(file instanceof File) ) {\r\n                        if ( !this._ruid ) {\r\n                            throw new Error('Can\\'t add external files.');\r\n                        }\r\n                        file = new File( this._ruid, file );\r\n                    }\r\n    \r\n                    file = new WUFile( file );\r\n                }\r\n    \r\n                return file;\r\n            },\r\n    \r\n            // 判断文件是否可以被加入队列\r\n            acceptFile: function( file ) {\r\n                var invalid = !file || !file.size || this.accept &&\r\n    \r\n                        // 如果名字中有后缀，才做后缀白名单处理。\r\n                        rExt.exec( file.name ) && !this.accept.test( file.name );\r\n    \r\n                return !invalid;\r\n            },\r\n    \r\n    \r\n            /**\r\n             * @event beforeFileQueued\r\n             * @param {File} file File对象\r\n             * @description 当文件被加入队列之前触发，此事件的handler返回值为`false`，则此文件不会被添加进入队列。\r\n             * @for  Uploader\r\n             */\r\n    \r\n            /**\r\n             * @event fileQueued\r\n             * @param {File} file File对象\r\n             * @description 当文件被加入队列以后触发。\r\n             * @for  Uploader\r\n             */\r\n    \r\n            _addFile: function( file ) {\r\n                var me = this;\r\n    \r\n                file = me._wrapFile( file );\r\n    \r\n                // 不过类型判断允许不允许，先派送 `beforeFileQueued`\r\n                if ( !me.owner.trigger( 'beforeFileQueued', file ) ) {\r\n                    return;\r\n                }\r\n    \r\n                // 类型不匹配，则派送错误事件，并返回。\r\n                if ( !me.acceptFile( file ) ) {\r\n                    me.owner.trigger( 'error', 'Q_TYPE_DENIED', file );\r\n                    return;\r\n                }\r\n    \r\n                me.queue.append( file );\r\n                me.owner.trigger( 'fileQueued', file );\r\n                return file;\r\n            },\r\n    \r\n            getFile: function( fileId ) {\r\n                return this.queue.getFile( fileId );\r\n            },\r\n    \r\n            /**\r\n             * @event filesQueued\r\n             * @param {File} files 数组，内容为原始File(lib/File）对象。\r\n             * @description 当一批文件添加进队列以后触发。\r\n             * @for  Uploader\r\n             */\r\n            \r\n            /**\r\n             * @property {Boolean} [auto=false]\r\n             * @namespace options\r\n             * @for Uploader\r\n             * @description 设置为 true 后，不需要手动调用上传，有文件选择即开始上传。\r\n             * \r\n             */\r\n    \r\n            /**\r\n             * @method addFiles\r\n             * @grammar addFiles( file ) => undefined\r\n             * @grammar addFiles( [file1, file2 ...] ) => undefined\r\n             * @param {Array of File or File} [files] Files 对象 数组\r\n             * @description 添加文件到队列\r\n             * @for  Uploader\r\n             */\r\n            addFile: function( files ) {\r\n                var me = this;\r\n    \r\n                if ( !files.length ) {\r\n                    files = [ files ];\r\n                }\r\n    \r\n                files = $.map( files, function( file ) {\r\n                    return me._addFile( file );\r\n                });\r\n    \t\t\t\r\n    \t\t\tif ( files.length ) {\r\n    \r\n                    me.owner.trigger( 'filesQueued', files );\r\n    \r\n    \t\t\t\tif ( me.options.auto ) {\r\n    \t\t\t\t\tsetTimeout(function() {\r\n    \t\t\t\t\t\tme.request('start-upload');\r\n    \t\t\t\t\t}, 20 );\r\n    \t\t\t\t}\r\n                }\r\n            },\r\n    \r\n            getStats: function() {\r\n                return this.stats;\r\n            },\r\n    \r\n            /**\r\n             * @event fileDequeued\r\n             * @param {File} file File对象\r\n             * @description 当文件被移除队列后触发。\r\n             * @for  Uploader\r\n             */\r\n    \r\n             /**\r\n             * @method removeFile\r\n             * @grammar removeFile( file ) => undefined\r\n             * @grammar removeFile( id ) => undefined\r\n             * @grammar removeFile( file, true ) => undefined\r\n             * @grammar removeFile( id, true ) => undefined\r\n             * @param {File|id} file File对象或这File对象的id\r\n             * @description 移除某一文件, 默认只会标记文件状态为已取消，如果第二个参数为 `true` 则会从 queue 中移除。\r\n             * @for  Uploader\r\n             * @example\r\n             *\r\n             * $li.on('click', '.remove-this', function() {\r\n             *     uploader.removeFile( file );\r\n             * })\r\n             */\r\n            removeFile: function( file, remove ) {\r\n                var me = this;\r\n    \r\n                file = file.id ? file : me.queue.getFile( file );\r\n    \r\n                this.request( 'cancel-file', file );\r\n    \r\n                if ( remove ) {\r\n                    this.queue.removeFile( file );\r\n                }\r\n            },\r\n    \r\n            /**\r\n             * @method getFiles\r\n             * @grammar getFiles() => Array\r\n             * @grammar getFiles( status1, status2, status... ) => Array\r\n             * @description 返回指定状态的文件集合，不传参数将返回所有状态的文件。\r\n             * @for  Uploader\r\n             * @example\r\n             * console.log( uploader.getFiles() );    // => all files\r\n             * console.log( uploader.getFiles('error') )    // => all error files.\r\n             */\r\n            getFiles: function() {\r\n                return this.queue.getFiles.apply( this.queue, arguments );\r\n            },\r\n    \r\n            fetchFile: function() {\r\n                return this.queue.fetch.apply( this.queue, arguments );\r\n            },\r\n    \r\n            /**\r\n             * @method retry\r\n             * @grammar retry() => undefined\r\n             * @grammar retry( file ) => undefined\r\n             * @description 重试上传，重试指定文件，或者从出错的文件开始重新上传。\r\n             * @for  Uploader\r\n             * @example\r\n             * function retry() {\r\n             *     uploader.retry();\r\n             * }\r\n             */\r\n            retry: function( file, noForceStart ) {\r\n                var me = this,\r\n                    files, i, len;\r\n    \r\n                if ( file ) {\r\n                    file = file.id ? file : me.queue.getFile( file );\r\n                    file.setStatus( Status.QUEUED );\r\n                    noForceStart || me.request('start-upload');\r\n                    return;\r\n                }\r\n    \r\n                files = me.queue.getFiles( Status.ERROR );\r\n                i = 0;\r\n                len = files.length;\r\n    \r\n                for ( ; i < len; i++ ) {\r\n                    file = files[ i ];\r\n                    file.setStatus( Status.QUEUED );\r\n                }\r\n    \r\n                me.request('start-upload');\r\n            },\r\n    \r\n            /**\r\n             * @method sort\r\n             * @grammar sort( fn ) => undefined\r\n             * @description 排序队列中的文件，在上传之前调整可以控制上传顺序。\r\n             * @for  Uploader\r\n             */\r\n            sortFiles: function() {\r\n                return this.queue.sort.apply( this.queue, arguments );\r\n            },\r\n    \r\n            /**\r\n             * @event reset\r\n             * @description 当 uploader 被重置的时候触发。\r\n             * @for  Uploader\r\n             */\r\n    \r\n            /**\r\n             * @method reset\r\n             * @grammar reset() => undefined\r\n             * @description 重置uploader。目前只重置了队列。\r\n             * @for  Uploader\r\n             * @example\r\n             * uploader.reset();\r\n             */\r\n            reset: function() {\r\n                this.owner.trigger('reset');\r\n                this.queue = new Queue();\r\n                this.stats = this.queue.stats;\r\n            },\r\n    \r\n            destroy: function() {\r\n                this.reset();\r\n                this.placeholder && this.placeholder.destroy();\r\n            }\r\n        });\r\n    \r\n    });\r\n    /**\r\n     * @fileOverview 添加获取Runtime相关信息的方法。\r\n     */\r\n    define('widgets/runtime',[\r\n        'uploader',\r\n        'runtime/runtime',\r\n        'widgets/widget'\r\n    ], function( Uploader, Runtime ) {\r\n    \r\n        Uploader.support = function() {\r\n            return Runtime.hasRuntime.apply( Runtime, arguments );\r\n        };\r\n    \r\n        /**\r\n         * @property {Object} [runtimeOrder=html5,flash]\r\n         * @namespace options\r\n         * @for Uploader\r\n         * @description 指定运行时启动顺序。默认会想尝试 html5 是否支持，如果支持则使用 html5, 否则则使用 flash.\r\n         *\r\n         * 可以将此值设置成 `flash`，来强制使用 flash 运行时。\r\n         */\r\n    \r\n        return Uploader.register({\r\n            name: 'runtime',\r\n    \r\n            init: function() {\r\n                if ( !this.predictRuntimeType() ) {\r\n                    throw Error('Runtime Error');\r\n                }\r\n            },\r\n    \r\n            /**\r\n             * 预测Uploader将采用哪个`Runtime`\r\n             * @grammar predictRuntimeType() => String\r\n             * @method predictRuntimeType\r\n             * @for  Uploader\r\n             */\r\n            predictRuntimeType: function() {\r\n                var orders = this.options.runtimeOrder || Runtime.orders,\r\n                    type = this.type,\r\n                    i, len;\r\n    \r\n                if ( !type ) {\r\n                    orders = orders.split( /\\s*,\\s*/g );\r\n    \r\n                    for ( i = 0, len = orders.length; i < len; i++ ) {\r\n                        if ( Runtime.hasRuntime( orders[ i ] ) ) {\r\n                            this.type = type = orders[ i ];\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n    \r\n                return type;\r\n            }\r\n        });\r\n    });\r\n    /**\r\n     * @fileOverview Transport\r\n     */\r\n    define('lib/transport',[\r\n        'base',\r\n        'runtime/client',\r\n        'mediator'\r\n    ], function( Base, RuntimeClient, Mediator ) {\r\n    \r\n        var $ = Base.$;\r\n    \r\n        function Transport( opts ) {\r\n            var me = this;\r\n    \r\n            opts = me.options = $.extend( true, {}, Transport.options, opts || {} );\r\n            RuntimeClient.call( this, 'Transport' );\r\n    \r\n            this._blob = null;\r\n            this._formData = opts.formData || {};\r\n            this._headers = opts.headers || {};\r\n    \r\n            this.on( 'progress', this._timeout );\r\n            this.on( 'load error', function() {\r\n                me.trigger( 'progress', 1 );\r\n                clearTimeout( me._timer );\r\n            });\r\n        }\r\n    \r\n        Transport.options = {\r\n            server: '',\r\n            method: 'POST',\r\n    \r\n            // 跨域时，是否允许携带cookie, 只有html5 runtime才有效\r\n            withCredentials: false,\r\n            fileVal: 'file',\r\n            timeout: 2 * 60 * 1000,    // 2分钟\r\n            formData: {},\r\n            headers: {},\r\n            sendAsBinary: false\r\n        };\r\n    \r\n        $.extend( Transport.prototype, {\r\n    \r\n            // 添加Blob, 只能添加一次，最后一次有效。\r\n            appendBlob: function( key, blob, filename ) {\r\n                var me = this,\r\n                    opts = me.options;\r\n    \r\n                if ( me.getRuid() ) {\r\n                    me.disconnectRuntime();\r\n                }\r\n    \r\n                // 连接到blob归属的同一个runtime.\r\n                me.connectRuntime( blob.ruid, function() {\r\n                    me.exec('init');\r\n                });\r\n    \r\n                me._blob = blob;\r\n                opts.fileVal = key || opts.fileVal;\r\n                opts.filename = filename || opts.filename;\r\n            },\r\n    \r\n            // 添加其他字段\r\n            append: function( key, value ) {\r\n                if ( typeof key === 'object' ) {\r\n                    $.extend( this._formData, key );\r\n                } else {\r\n                    this._formData[ key ] = value;\r\n                }\r\n            },\r\n    \r\n            setRequestHeader: function( key, value ) {\r\n                if ( typeof key === 'object' ) {\r\n                    $.extend( this._headers, key );\r\n                } else {\r\n                    this._headers[ key ] = value;\r\n                }\r\n            },\r\n    \r\n            send: function( method ) {\r\n                this.exec( 'send', method );\r\n                this._timeout();\r\n            },\r\n    \r\n            abort: function() {\r\n                clearTimeout( this._timer );\r\n                return this.exec('abort');\r\n            },\r\n    \r\n            destroy: function() {\r\n                this.trigger('destroy');\r\n                this.off();\r\n                this.exec('destroy');\r\n                this.disconnectRuntime();\r\n            },\r\n    \r\n            getResponse: function() {\r\n                return this.exec('getResponse');\r\n            },\r\n    \r\n            getResponseAsJson: function() {\r\n                return this.exec('getResponseAsJson');\r\n            },\r\n    \r\n            getStatus: function() {\r\n                return this.exec('getStatus');\r\n            },\r\n    \r\n            _timeout: function() {\r\n                var me = this,\r\n                    duration = me.options.timeout;\r\n    \r\n                if ( !duration ) {\r\n                    return;\r\n                }\r\n    \r\n                clearTimeout( me._timer );\r\n                me._timer = setTimeout(function() {\r\n                    me.abort();\r\n                    me.trigger( 'error', 'timeout' );\r\n                }, duration );\r\n            }\r\n    \r\n        });\r\n    \r\n        // 让Transport具备事件功能。\r\n        Mediator.installTo( Transport.prototype );\r\n    \r\n        return Transport;\r\n    });\r\n    /**\r\n     * @fileOverview 负责文件上传相关。\r\n     */\r\n    define('widgets/upload',[\r\n        'base',\r\n        'uploader',\r\n        'file',\r\n        'lib/transport',\r\n        'widgets/widget'\r\n    ], function( Base, Uploader, WUFile, Transport ) {\r\n    \r\n        var $ = Base.$,\r\n            isPromise = Base.isPromise,\r\n            Status = WUFile.Status;\r\n    \r\n        // 添加默认配置项\r\n        $.extend( Uploader.options, {\r\n    \r\n    \r\n            /**\r\n             * @property {Boolean} [prepareNextFile=false]\r\n             * @namespace options\r\n             * @for Uploader\r\n             * @description 是否允许在文件传输时提前把下一个文件准备好。\r\n             * 对于一个文件的准备工作比较耗时，比如图片压缩，md5序列化。\r\n             * 如果能提前在当前文件传输期处理，可以节省总体耗时。\r\n             */\r\n            prepareNextFile: false,\r\n    \r\n            /**\r\n             * @property {Boolean} [chunked=false]\r\n             * @namespace options\r\n             * @for Uploader\r\n             * @description 是否要分片处理大文件上传。\r\n             */\r\n            chunked: false,\r\n    \r\n            /**\r\n             * @property {Boolean} [chunkSize=5242880]\r\n             * @namespace options\r\n             * @for Uploader\r\n             * @description 如果要分片，分多大一片？ 默认大小为5M.\r\n             */\r\n            chunkSize: 5 * 1024 * 1024,\r\n    \r\n            /**\r\n             * @property {Boolean} [chunkRetry=2]\r\n             * @namespace options\r\n             * @for Uploader\r\n             * @description 如果某个分片由于网络问题出错，允许自动重传多少次？\r\n             */\r\n            chunkRetry: 2,\r\n    \r\n            /**\r\n             * @property {Boolean} [threads=3]\r\n             * @namespace options\r\n             * @for Uploader\r\n             * @description 上传并发数。允许同时最大上传进程数。\r\n             */\r\n            threads: 3,\r\n    \r\n    \r\n            /**\r\n             * @property {Object} [formData={}]\r\n             * @namespace options\r\n             * @for Uploader\r\n             * @description 文件上传请求的参数表，每次发送都会发送此对象中的参数。\r\n             */\r\n            formData: {}\r\n    \r\n            /**\r\n             * @property {Object} [fileVal='file']\r\n             * @namespace options\r\n             * @for Uploader\r\n             * @description 设置文件上传域的name。\r\n             */\r\n    \r\n            /**\r\n             * @property {Object} [sendAsBinary=false]\r\n             * @namespace options\r\n             * @for Uploader\r\n             * @description 是否已二进制的流的方式发送文件，这样整个上传内容`php://input`都为文件内容，\r\n             * 其他参数在$_GET数组中。\r\n             */\r\n        });\r\n    \r\n        // 负责将文件切片。\r\n        function CuteFile( file, chunkSize ) {\r\n            var pending = [],\r\n                blob = file.source,\r\n                total = blob.size,\r\n                chunks = chunkSize ? Math.ceil( total / chunkSize ) : 1,\r\n                start = 0,\r\n                index = 0,\r\n                len, api;\r\n    \r\n            api = {\r\n                file: file,\r\n    \r\n                has: function() {\r\n                    return !!pending.length;\r\n                },\r\n    \r\n                shift: function() {\r\n                    return pending.shift();\r\n                },\r\n    \r\n                unshift: function( block ) {\r\n                    pending.unshift( block );\r\n                }\r\n            };\r\n    \r\n            while ( index < chunks ) {\r\n                len = Math.min( chunkSize, total - start );\r\n    \r\n                pending.push({\r\n                    file: file,\r\n                    start: start,\r\n                    end: chunkSize ? (start + len) : total,\r\n                    total: total,\r\n                    chunks: chunks,\r\n                    chunk: index++,\r\n                    cuted: api\r\n                });\r\n                start += len;\r\n            }\r\n    \r\n            file.blocks = pending.concat();\r\n            file.remaning = pending.length;\r\n    \r\n            return api;\r\n        }\r\n    \r\n        Uploader.register({\r\n            name: 'upload',\r\n    \r\n            init: function() {\r\n                var owner = this.owner,\r\n                    me = this;\r\n    \r\n                this.runing = false;\r\n                this.progress = false;\r\n    \r\n                owner\r\n                    .on( 'startUpload', function() {\r\n                        me.progress = true;\r\n                    })\r\n                    .on( 'uploadFinished', function() {\r\n                        me.progress = false;\r\n                    });\r\n    \r\n                // 记录当前正在传的数据，跟threads相关\r\n                this.pool = [];\r\n    \r\n                // 缓存分好片的文件。\r\n                this.stack = [];\r\n    \r\n                // 缓存即将上传的文件。\r\n                this.pending = [];\r\n    \r\n                // 跟踪还有多少分片在上传中但是没有完成上传。\r\n                this.remaning = 0;\r\n                this.__tick = Base.bindFn( this._tick, this );\r\n    \r\n                // 销毁上传相关的属性。\r\n                owner.on( 'uploadComplete', function( file ) {\r\n    \r\n                    // 把其他块取消了。\r\n                    file.blocks && $.each( file.blocks, function( _, v ) {\r\n                        v.transport && (v.transport.abort(), v.transport.destroy());\r\n                        delete v.transport;\r\n                    });\r\n    \r\n                    delete file.blocks;\r\n                    delete file.remaning;\r\n                });\r\n            },\r\n    \r\n            reset: function() {\r\n                this.request( 'stop-upload', true );\r\n                this.runing = false;\r\n                this.pool = [];\r\n                this.stack = [];\r\n                this.pending = [];\r\n                this.remaning = 0;\r\n                this._trigged = false;\r\n                this._promise = null;\r\n            },\r\n    \r\n            /**\r\n             * @event startUpload\r\n             * @description 当开始上传流程时触发。\r\n             * @for  Uploader\r\n             */\r\n    \r\n            /**\r\n             * 开始上传。此方法可以从初始状态调用开始上传流程，也可以从暂停状态调用，继续上传流程。\r\n             *\r\n             * 可以指定开始某一个文件。\r\n             * @grammar upload() => undefined\r\n             * @grammar upload( file | fileId) => undefined\r\n             * @method upload\r\n             * @for  Uploader\r\n             */\r\n            startUpload: function(file) {\r\n                var me = this;\r\n    \r\n                // 移出invalid的文件\r\n                $.each( me.request( 'get-files', Status.INVALID ), function() {\r\n                    me.request( 'remove-file', this );\r\n                });\r\n    \r\n                // 如果指定了开始某个文件，则只开始指定的文件。\r\n                if ( file ) {\r\n                    file = file.id ? file : me.request( 'get-file', file );\r\n    \r\n                    if (file.getStatus() === Status.INTERRUPT) {\r\n                        file.setStatus( Status.QUEUED );\r\n    \r\n                        $.each( me.pool, function( _, v ) {\r\n    \r\n                            // 之前暂停过。\r\n                            if (v.file !== file) {\r\n                                return;\r\n                            }\r\n    \r\n                            v.transport && v.transport.send();\r\n                            file.setStatus( Status.PROGRESS );\r\n                        });\r\n    \r\n                        \r\n                    } else if (file.getStatus() !== Status.PROGRESS) {\r\n                        file.setStatus( Status.QUEUED );\r\n                    }\r\n                } else {\r\n                    $.each( me.request( 'get-files', [ Status.INITED ] ), function() {\r\n                        this.setStatus( Status.QUEUED );\r\n                    });\r\n                }\r\n    \r\n                if ( me.runing ) {\r\n                    return Base.nextTick( me.__tick );\r\n                }\r\n    \r\n                me.runing = true;\r\n                var files = [];\r\n    \r\n                // 如果有暂停的，则续传\r\n                file || $.each( me.pool, function( _, v ) {\r\n                    var file = v.file;\r\n    \r\n                    if ( file.getStatus() === Status.INTERRUPT ) {\r\n                        me._trigged = false;\r\n                        files.push(file);\r\n                        v.transport && v.transport.send();\r\n                    }\r\n                });\r\n    \r\n                $.each(files, function() {\r\n                    this.setStatus( Status.PROGRESS );\r\n                });\r\n    \r\n                file || $.each( me.request( 'get-files',\r\n                        Status.INTERRUPT ), function() {\r\n                    this.setStatus( Status.PROGRESS );\r\n                });\r\n    \r\n                me._trigged = false;\r\n                Base.nextTick( me.__tick );\r\n                me.owner.trigger('startUpload');\r\n            },\r\n    \r\n            /**\r\n             * @event stopUpload\r\n             * @description 当开始上传流程暂停时触发。\r\n             * @for  Uploader\r\n             */\r\n    \r\n            /**\r\n             * 暂停上传。第一个参数为是否中断上传当前正在上传的文件。\r\n             *\r\n             * 如果第一个参数是文件，则只暂停指定文件。\r\n             * @grammar stop() => undefined\r\n             * @grammar stop( true ) => undefined\r\n             * @grammar stop( file ) => undefined\r\n             * @method stop\r\n             * @for  Uploader\r\n             */\r\n            stopUpload: function( file, interrupt ) {\r\n                var me = this,\r\n                    block;\r\n    \r\n                if (file === true) {\r\n                    interrupt = file;\r\n                    file = null;\r\n                }\r\n    \r\n                if ( me.runing === false ) {\r\n                    return;\r\n                }\r\n    \r\n                // 如果只是暂停某个文件。\r\n                if ( file ) {\r\n                    file = file.id ? file : me.request( 'get-file', file );\r\n    \r\n                    if ( file.getStatus() !== Status.PROGRESS &&\r\n                            file.getStatus() !== Status.QUEUED ) {\r\n                        return;\r\n                    }\r\n    \r\n                    file.setStatus( Status.INTERRUPT );\r\n    \r\n    \r\n                    $.each( me.pool, function( _, v ) {\r\n    \r\n                        // 只 abort 指定的文件。\r\n                        if (v.file === file) {\r\n                            block = v;\r\n                            return false;\r\n                        }\r\n                    });\r\n    \r\n                    block.transport && block.transport.abort();\r\n    \r\n                    if (interrupt) {\r\n                        me._putback(block);\r\n                        me._popBlock(block);\r\n                    }\r\n    \r\n                    return Base.nextTick( me.__tick );\r\n                }\r\n    \r\n                me.runing = false;\r\n    \r\n                // 正在准备中的文件。\r\n                if (this._promise && this._promise.file) {\r\n                    this._promise.file.setStatus( Status.INTERRUPT );\r\n                }\r\n    \r\n                interrupt && $.each( me.pool, function( _, v ) {\r\n                    v.transport && v.transport.abort();\r\n                    v.file.setStatus( Status.INTERRUPT );\r\n                });\r\n    \r\n                me.owner.trigger('stopUpload');\r\n            },\r\n    \r\n            /**\r\n             * @method cancelFile\r\n             * @grammar cancelFile( file ) => undefined\r\n             * @grammar cancelFile( id ) => undefined\r\n             * @param {File|id} file File对象或这File对象的id\r\n             * @description 标记文件状态为已取消, 同时将中断文件传输。\r\n             * @for  Uploader\r\n             * @example\r\n             *\r\n             * $li.on('click', '.remove-this', function() {\r\n             *     uploader.cancelFile( file );\r\n             * })\r\n             */\r\n            cancelFile: function( file ) {\r\n                file = file.id ? file : this.request( 'get-file', file );\r\n    \r\n                // 如果正在上传。\r\n                file.blocks && $.each( file.blocks, function( _, v ) {\r\n                    var _tr = v.transport;\r\n    \r\n                    if ( _tr ) {\r\n                        _tr.abort();\r\n                        _tr.destroy();\r\n                        delete v.transport;\r\n                    }\r\n                });\r\n    \r\n                file.setStatus( Status.CANCELLED );\r\n                this.owner.trigger( 'fileDequeued', file );\r\n            },\r\n    \r\n            /**\r\n             * 判断`Uplaode`r是否正在上传中。\r\n             * @grammar isInProgress() => Boolean\r\n             * @method isInProgress\r\n             * @for  Uploader\r\n             */\r\n            isInProgress: function() {\r\n                return !!this.progress;\r\n            },\r\n    \r\n            _getStats: function() {\r\n                return this.request('get-stats');\r\n            },\r\n    \r\n            /**\r\n             * 掉过一个文件上传，直接标记指定文件为已上传状态。\r\n             * @grammar skipFile( file ) => undefined\r\n             * @method skipFile\r\n             * @for  Uploader\r\n             */\r\n            skipFile: function( file, status ) {\r\n                file = file.id ? file : this.request( 'get-file', file );\r\n    \r\n                file.setStatus( status || Status.COMPLETE );\r\n                file.skipped = true;\r\n    \r\n                // 如果正在上传。\r\n                file.blocks && $.each( file.blocks, function( _, v ) {\r\n                    var _tr = v.transport;\r\n    \r\n                    if ( _tr ) {\r\n                        _tr.abort();\r\n                        _tr.destroy();\r\n                        delete v.transport;\r\n                    }\r\n                });\r\n    \r\n                this.owner.trigger( 'uploadSkip', file );\r\n            },\r\n    \r\n            /**\r\n             * @event uploadFinished\r\n             * @description 当所有文件上传结束时触发。\r\n             * @for  Uploader\r\n             */\r\n            _tick: function() {\r\n                var me = this,\r\n                    opts = me.options,\r\n                    fn, val;\r\n    \r\n                // 上一个promise还没有结束，则等待完成后再执行。\r\n                if ( me._promise ) {\r\n                    return me._promise.always( me.__tick );\r\n                }\r\n    \r\n                // 还有位置，且还有文件要处理的话。\r\n                if ( me.pool.length < opts.threads && (val = me._nextBlock()) ) {\r\n                    me._trigged = false;\r\n    \r\n                    fn = function( val ) {\r\n                        me._promise = null;\r\n    \r\n                        // 有可能是reject过来的，所以要检测val的类型。\r\n                        val && val.file && me._startSend( val );\r\n                        Base.nextTick( me.__tick );\r\n                    };\r\n    \r\n                    me._promise = isPromise( val ) ? val.always( fn ) : fn( val );\r\n    \r\n                // 没有要上传的了，且没有正在传输的了。\r\n                } else if ( !me.remaning && !me._getStats().numOfQueue &&\r\n                    !me._getStats().numofInterrupt ) {\r\n                    me.runing = false;\r\n    \r\n                    me._trigged || Base.nextTick(function() {\r\n                        me.owner.trigger('uploadFinished');\r\n                    });\r\n                    me._trigged = true;\r\n                }\r\n            },\r\n    \r\n            _putback: function(block) {\r\n                var idx;\r\n    \r\n                block.cuted.unshift(block);\r\n                idx = this.stack.indexOf(block.cuted);\r\n    \r\n                if (!~idx) {\r\n                    this.stack.unshift(block.cuted);\r\n                }\r\n            },\r\n    \r\n            _getStack: function() {\r\n                var i = 0,\r\n                    act;\r\n    \r\n                while ( (act = this.stack[ i++ ]) ) {\r\n                    if ( act.has() && act.file.getStatus() === Status.PROGRESS ) {\r\n                        return act;\r\n                    } else if (!act.has() ||\r\n                            act.file.getStatus() !== Status.PROGRESS &&\r\n                            act.file.getStatus() !== Status.INTERRUPT ) {\r\n    \r\n                        // 把已经处理完了的，或者，状态为非 progress（上传中）、\r\n                        // interupt（暂停中） 的移除。\r\n                        this.stack.splice( --i, 1 );\r\n                    }\r\n                }\r\n    \r\n                return null;\r\n            },\r\n    \r\n            _nextBlock: function() {\r\n                var me = this,\r\n                    opts = me.options,\r\n                    act, next, done, preparing;\r\n    \r\n                // 如果当前文件还有没有需要传输的，则直接返回剩下的。\r\n                if ( (act = this._getStack()) ) {\r\n    \r\n                    // 是否提前准备下一个文件\r\n                    if ( opts.prepareNextFile && !me.pending.length ) {\r\n                        me._prepareNextFile();\r\n                    }\r\n    \r\n                    return act.shift();\r\n    \r\n                // 否则，如果正在运行，则准备下一个文件，并等待完成后返回下个分片。\r\n                } else if ( me.runing ) {\r\n    \r\n                    // 如果缓存中有，则直接在缓存中取，没有则去queue中取。\r\n                    if ( !me.pending.length && me._getStats().numOfQueue ) {\r\n                        me._prepareNextFile();\r\n                    }\r\n    \r\n                    next = me.pending.shift();\r\n                    done = function( file ) {\r\n                        if ( !file ) {\r\n                            return null;\r\n                        }\r\n    \r\n                        act = CuteFile( file, opts.chunked ? opts.chunkSize : 0 );\r\n                        me.stack.push(act);\r\n                        return act.shift();\r\n                    };\r\n    \r\n                    // 文件可能还在prepare中，也有可能已经完全准备好了。\r\n                    if ( isPromise( next) ) {\r\n                        preparing = next.file;\r\n                        next = next[ next.pipe ? 'pipe' : 'then' ]( done );\r\n                        next.file = preparing;\r\n                        return next;\r\n                    }\r\n    \r\n                    return done( next );\r\n                }\r\n            },\r\n    \r\n    \r\n            /**\r\n             * @event uploadStart\r\n             * @param {File} file File对象\r\n             * @description 某个文件开始上传前触发，一个文件只会触发一次。\r\n             * @for  Uploader\r\n             */\r\n            _prepareNextFile: function() {\r\n                var me = this,\r\n                    file = me.request('fetch-file'),\r\n                    pending = me.pending,\r\n                    promise;\r\n    \r\n                if ( file ) {\r\n                    promise = me.request( 'before-send-file', file, function() {\r\n    \r\n                        // 有可能文件被skip掉了。文件被skip掉后，状态坑定不是Queued.\r\n                        if ( file.getStatus() === Status.PROGRESS ||\r\n                            file.getStatus() === Status.INTERRUPT ) {\r\n                            return file;\r\n                        }\r\n    \r\n                        return me._finishFile( file );\r\n                    });\r\n    \r\n                    me.owner.trigger( 'uploadStart', file );\r\n                    file.setStatus( Status.PROGRESS );\r\n    \r\n                    promise.file = file;\r\n    \r\n                    // 如果还在pending中，则替换成文件本身。\r\n                    promise.done(function() {\r\n                        var idx = $.inArray( promise, pending );\r\n    \r\n                        ~idx && pending.splice( idx, 1, file );\r\n                    });\r\n    \r\n                    // befeore-send-file的钩子就有错误发生。\r\n                    promise.fail(function( reason ) {\r\n                        file.setStatus( Status.ERROR, reason );\r\n                        me.owner.trigger( 'uploadError', file, reason );\r\n                        me.owner.trigger( 'uploadComplete', file );\r\n                    });\r\n    \r\n                    pending.push( promise );\r\n                }\r\n            },\r\n    \r\n            // 让出位置了，可以让其他分片开始上传\r\n            _popBlock: function( block ) {\r\n                var idx = $.inArray( block, this.pool );\r\n    \r\n                this.pool.splice( idx, 1 );\r\n                block.file.remaning--;\r\n                this.remaning--;\r\n            },\r\n    \r\n            // 开始上传，可以被掉过。如果promise被reject了，则表示跳过此分片。\r\n            _startSend: function( block ) {\r\n                var me = this,\r\n                    file = block.file,\r\n                    promise;\r\n    \r\n                // 有可能在 before-send-file 的 promise 期间改变了文件状态。\r\n                // 如：暂停，取消\r\n                // 我们不能中断 promise, 但是可以在 promise 完后，不做上传操作。\r\n                if ( file.getStatus() !== Status.PROGRESS ) {\r\n    \r\n                    // 如果是中断，则还需要放回去。\r\n                    if (file.getStatus() === Status.INTERRUPT) {\r\n                        me._putback(block);\r\n                    }\r\n    \r\n                    return;\r\n                }\r\n    \r\n                me.pool.push( block );\r\n                me.remaning++;\r\n    \r\n                // 如果没有分片，则直接使用原始的。\r\n                // 不会丢失content-type信息。\r\n                block.blob = block.chunks === 1 ? file.source :\r\n                        file.source.slice( block.start, block.end );\r\n    \r\n                // hook, 每个分片发送之前可能要做些异步的事情。\r\n                promise = me.request( 'before-send', block, function() {\r\n    \r\n                    // 有可能文件已经上传出错了，所以不需要再传输了。\r\n                    if ( file.getStatus() === Status.PROGRESS ) {\r\n                        me._doSend( block );\r\n                    } else {\r\n                        me._popBlock( block );\r\n                        Base.nextTick( me.__tick );\r\n                    }\r\n                });\r\n    \r\n                // 如果为fail了，则跳过此分片。\r\n                promise.fail(function() {\r\n                    if ( file.remaning === 1 ) {\r\n                        me._finishFile( file ).always(function() {\r\n                            block.percentage = 1;\r\n                            me._popBlock( block );\r\n                            me.owner.trigger( 'uploadComplete', file );\r\n                            Base.nextTick( me.__tick );\r\n                        });\r\n                    } else {\r\n                        block.percentage = 1;\r\n                        me.updateFileProgress( file );\r\n                        me._popBlock( block );\r\n                        Base.nextTick( me.__tick );\r\n                    }\r\n                });\r\n            },\r\n    \r\n    \r\n            /**\r\n             * @event uploadBeforeSend\r\n             * @param {Object} object\r\n             * @param {Object} data 默认的上传参数，可以扩展此对象来控制上传参数。\r\n             * @param {Object} headers 可以扩展此对象来控制上传头部。\r\n             * @description 当某个文件的分块在发送前触发，主要用来询问是否要添加附带参数，大文件在开起分片上传的前提下此事件可能会触发多次。\r\n             * @for  Uploader\r\n             */\r\n    \r\n            /**\r\n             * @event uploadAccept\r\n             * @param {Object} object\r\n             * @param {Object} ret 服务端的返回数据，json格式，如果服务端不是json格式，从ret._raw中取数据，自行解析。\r\n             * @description 当某个文件上传到服务端响应后，会派送此事件来询问服务端响应是否有效。如果此事件handler返回值为`false`, 则此文件将派送`server`类型的`uploadError`事件。\r\n             * @for  Uploader\r\n             */\r\n    \r\n            /**\r\n             * @event uploadProgress\r\n             * @param {File} file File对象\r\n             * @param {Number} percentage 上传进度\r\n             * @description 上传过程中触发，携带上传进度。\r\n             * @for  Uploader\r\n             */\r\n    \r\n    \r\n            /**\r\n             * @event uploadError\r\n             * @param {File} file File对象\r\n             * @param {String} reason 出错的code\r\n             * @description 当文件上传出错时触发。\r\n             * @for  Uploader\r\n             */\r\n    \r\n            /**\r\n             * @event uploadSuccess\r\n             * @param {File} file File对象\r\n             * @param {Object} response 服务端返回的数据\r\n             * @description 当文件上传成功时触发。\r\n             * @for  Uploader\r\n             */\r\n    \r\n            /**\r\n             * @event uploadComplete\r\n             * @param {File} [file] File对象\r\n             * @description 不管成功或者失败，文件上传完成时触发。\r\n             * @for  Uploader\r\n             */\r\n    \r\n            // 做上传操作。\r\n            _doSend: function( block ) {\r\n                var me = this,\r\n                    owner = me.owner,\r\n                    opts = me.options,\r\n                    file = block.file,\r\n                    tr = new Transport( opts ),\r\n                    data = $.extend({}, opts.formData ),\r\n                    headers = $.extend({}, opts.headers ),\r\n                    requestAccept, ret;\r\n    \r\n                block.transport = tr;\r\n    \r\n                tr.on( 'destroy', function() {\r\n                    delete block.transport;\r\n                    me._popBlock( block );\r\n                    Base.nextTick( me.__tick );\r\n                });\r\n    \r\n                // 广播上传进度。以文件为单位。\r\n                tr.on( 'progress', function( percentage ) {\r\n                    block.percentage = percentage;\r\n                    me.updateFileProgress( file );\r\n                });\r\n    \r\n                // 用来询问，是否返回的结果是有错误的。\r\n                requestAccept = function( reject ) {\r\n                    var fn;\r\n    \r\n                    ret = tr.getResponseAsJson() || {};\r\n                    ret._raw = tr.getResponse();\r\n                    fn = function( value ) {\r\n                        reject = value;\r\n                    };\r\n    \r\n                    // 服务端响应了，不代表成功了，询问是否响应正确。\r\n                    if ( !owner.trigger( 'uploadAccept', block, ret, fn ) ) {\r\n                        reject = reject || 'server';\r\n                    }\r\n    \r\n                    return reject;\r\n                };\r\n    \r\n                // 尝试重试，然后广播文件上传出错。\r\n                tr.on( 'error', function( type, flag ) {\r\n                    block.retried = block.retried || 0;\r\n    \r\n                    // 自动重试\r\n                    if ( block.chunks > 1 && ~'http,abort'.indexOf( type ) &&\r\n                            block.retried < opts.chunkRetry ) {\r\n    \r\n                        block.retried++;\r\n                        tr.send();\r\n    \r\n                    } else {\r\n    \r\n                        // http status 500 ~ 600\r\n                        if ( !flag && type === 'server' ) {\r\n                            type = requestAccept( type );\r\n                        }\r\n    \r\n                        file.setStatus( Status.ERROR, type );\r\n                        owner.trigger( 'uploadError', file, type );\r\n                        owner.trigger( 'uploadComplete', file );\r\n                    }\r\n                });\r\n    \r\n                // 上传成功\r\n                tr.on( 'load', function() {\r\n                    var reason;\r\n    \r\n                    // 如果非预期，转向上传出错。\r\n                    if ( (reason = requestAccept()) ) {\r\n                        tr.trigger( 'error', reason, true );\r\n                        return;\r\n                    }\r\n    \r\n                    // 全部上传完成。\r\n                    if ( file.remaning === 1 ) {\r\n                        me._finishFile( file, ret );\r\n                    } else {\r\n                        tr.destroy();\r\n                    }\r\n                });\r\n    \r\n                // 配置默认的上传字段。\r\n                data = $.extend( data, {\r\n                    id: file.id,\r\n                    name: file.name,\r\n                    type: file.type,\r\n                    lastModifiedDate: file.lastModifiedDate,\r\n                    size: file.size\r\n                });\r\n    \r\n                block.chunks > 1 && $.extend( data, {\r\n                    chunks: block.chunks,\r\n                    chunk: block.chunk\r\n                });\r\n    \r\n                // 在发送之间可以添加字段什么的。。。\r\n                // 如果默认的字段不够使用，可以通过监听此事件来扩展\r\n                owner.trigger( 'uploadBeforeSend', block, data, headers );\r\n    \r\n                // 开始发送。\r\n                tr.appendBlob( opts.fileVal, block.blob, file.name );\r\n                tr.append( data );\r\n                tr.setRequestHeader( headers );\r\n                tr.send();\r\n            },\r\n    \r\n            // 完成上传。\r\n            _finishFile: function( file, ret, hds ) {\r\n                var owner = this.owner;\r\n    \r\n                return owner\r\n                        .request( 'after-send-file', arguments, function() {\r\n                            file.setStatus( Status.COMPLETE );\r\n                            owner.trigger( 'uploadSuccess', file, ret, hds );\r\n                        })\r\n                        .fail(function( reason ) {\r\n    \r\n                            // 如果外部已经标记为invalid什么的，不再改状态。\r\n                            if ( file.getStatus() === Status.PROGRESS ) {\r\n                                file.setStatus( Status.ERROR, reason );\r\n                            }\r\n    \r\n                            owner.trigger( 'uploadError', file, reason );\r\n                        })\r\n                        .always(function() {\r\n                            owner.trigger( 'uploadComplete', file );\r\n                        });\r\n            },\r\n    \r\n            updateFileProgress: function(file) {\r\n                var totalPercent = 0,\r\n                    uploaded = 0;\r\n    \r\n                if (!file.blocks) {\r\n                    return;\r\n                }\r\n    \r\n                $.each( file.blocks, function( _, v ) {\r\n                    uploaded += (v.percentage || 0) * (v.end - v.start);\r\n                });\r\n    \r\n                totalPercent = uploaded / file.size;\r\n                this.owner.trigger( 'uploadProgress', file, totalPercent || 0 );\r\n            }\r\n    \r\n        });\r\n    });\r\n    \r\n    /**\r\n     * @fileOverview 各种验证，包括文件总大小是否超出、单文件是否超出和文件是否重复。\r\n     */\r\n    \r\n    define('widgets/validator',[\r\n        'base',\r\n        'uploader',\r\n        'file',\r\n        'widgets/widget'\r\n    ], function( Base, Uploader, WUFile ) {\r\n    \r\n        var $ = Base.$,\r\n            validators = {},\r\n            api;\r\n    \r\n        /**\r\n         * @event error\r\n         * @param {String} type 错误类型。\r\n         * @description 当validate不通过时，会以派送错误事件的形式通知调用者。通过`upload.on('error', handler)`可以捕获到此类错误，目前有以下错误会在特定的情况下派送错来。\r\n         *\r\n         * * `Q_EXCEED_NUM_LIMIT` 在设置了`fileNumLimit`且尝试给`uploader`添加的文件数量超出这个值时派送。\r\n         * * `Q_EXCEED_SIZE_LIMIT` 在设置了`Q_EXCEED_SIZE_LIMIT`且尝试给`uploader`添加的文件总大小超出这个值时派送。\r\n         * * `Q_TYPE_DENIED` 当文件类型不满足时触发。。\r\n         * @for  Uploader\r\n         */\r\n    \r\n        // 暴露给外面的api\r\n        api = {\r\n    \r\n            // 添加验证器\r\n            addValidator: function( type, cb ) {\r\n                validators[ type ] = cb;\r\n            },\r\n    \r\n            // 移除验证器\r\n            removeValidator: function( type ) {\r\n                delete validators[ type ];\r\n            }\r\n        };\r\n    \r\n        // 在Uploader初始化的时候启动Validators的初始化\r\n        Uploader.register({\r\n            name: 'validator',\r\n    \r\n            init: function() {\r\n                var me = this;\r\n                Base.nextTick(function() {\r\n                    $.each( validators, function() {\r\n                        this.call( me.owner );\r\n                    });\r\n                });\r\n            }\r\n        });\r\n    \r\n        /**\r\n         * @property {int} [fileNumLimit=undefined]\r\n         * @namespace options\r\n         * @for Uploader\r\n         * @description 验证文件总数量, 超出则不允许加入队列。\r\n         */\r\n        api.addValidator( 'fileNumLimit', function() {\r\n            var uploader = this,\r\n                opts = uploader.options,\r\n                count = 0,\r\n                max = parseInt( opts.fileNumLimit, 10 ),\r\n                flag = true;\r\n    \r\n            if ( !max ) {\r\n                return;\r\n            }\r\n    \r\n            uploader.on( 'beforeFileQueued', function( file ) {\r\n    \r\n                if ( count >= max && flag ) {\r\n                    flag = false;\r\n                    this.trigger( 'error', 'Q_EXCEED_NUM_LIMIT', max, file );\r\n                    setTimeout(function() {\r\n                        flag = true;\r\n                    }, 1 );\r\n                }\r\n    \r\n                return count >= max ? false : true;\r\n            });\r\n    \r\n            uploader.on( 'fileQueued', function() {\r\n                count++;\r\n            });\r\n    \r\n            uploader.on( 'fileDequeued', function() {\r\n                count--;\r\n            });\r\n    \r\n            uploader.on( 'reset', function() {\r\n                count = 0;\r\n            });\r\n        });\r\n    \r\n    \r\n        /**\r\n         * @property {int} [fileSizeLimit=undefined]\r\n         * @namespace options\r\n         * @for Uploader\r\n         * @description 验证文件总大小是否超出限制, 超出则不允许加入队列。\r\n         */\r\n        api.addValidator( 'fileSizeLimit', function() {\r\n            var uploader = this,\r\n                opts = uploader.options,\r\n                count = 0,\r\n                max = parseInt( opts.fileSizeLimit, 10 ),\r\n                flag = true;\r\n    \r\n            if ( !max ) {\r\n                return;\r\n            }\r\n    \r\n            uploader.on( 'beforeFileQueued', function( file ) {\r\n                var invalid = count + file.size > max;\r\n    \r\n                if ( invalid && flag ) {\r\n                    flag = false;\r\n                    this.trigger( 'error', 'Q_EXCEED_SIZE_LIMIT', max, file );\r\n                    setTimeout(function() {\r\n                        flag = true;\r\n                    }, 1 );\r\n                }\r\n    \r\n                return invalid ? false : true;\r\n            });\r\n    \r\n            uploader.on( 'fileQueued', function( file ) {\r\n                count += file.size;\r\n            });\r\n    \r\n            uploader.on( 'fileDequeued', function( file ) {\r\n                count -= file.size;\r\n            });\r\n    \r\n            uploader.on( 'reset', function() {\r\n                count = 0;\r\n            });\r\n        });\r\n    \r\n        /**\r\n         * @property {int} [fileSingleSizeLimit=undefined]\r\n         * @namespace options\r\n         * @for Uploader\r\n         * @description 验证单个文件大小是否超出限制, 超出则不允许加入队列。\r\n         */\r\n        api.addValidator( 'fileSingleSizeLimit', function() {\r\n            var uploader = this,\r\n                opts = uploader.options,\r\n                max = opts.fileSingleSizeLimit;\r\n    \r\n            if ( !max ) {\r\n                return;\r\n            }\r\n    \r\n            uploader.on( 'beforeFileQueued', function( file ) {\r\n    \r\n                if ( file.size > max ) {\r\n                    file.setStatus( WUFile.Status.INVALID, 'exceed_size' );\r\n                    this.trigger( 'error', 'F_EXCEED_SIZE', max, file );\r\n                    return false;\r\n                }\r\n    \r\n            });\r\n    \r\n        });\r\n    \r\n        /**\r\n         * @property {Boolean} [duplicate=undefined]\r\n         * @namespace options\r\n         * @for Uploader\r\n         * @description 去重， 根据文件名字、文件大小和最后修改时间来生成hash Key.\r\n         */\r\n        api.addValidator( 'duplicate', function() {\r\n            var uploader = this,\r\n                opts = uploader.options,\r\n                mapping = {};\r\n    \r\n            if ( opts.duplicate ) {\r\n                return;\r\n            }\r\n    \r\n            function hashString( str ) {\r\n                var hash = 0,\r\n                    i = 0,\r\n                    len = str.length,\r\n                    _char;\r\n    \r\n                for ( ; i < len; i++ ) {\r\n                    _char = str.charCodeAt( i );\r\n                    hash = _char + (hash << 6) + (hash << 16) - hash;\r\n                }\r\n    \r\n                return hash;\r\n            }\r\n    \r\n            uploader.on( 'beforeFileQueued', function( file ) {\r\n                var hash = file.__hash || (file.__hash = hashString( file.name +\r\n                        file.size + file.lastModifiedDate ));\r\n    \r\n                // 已经重复了\r\n                if ( mapping[ hash ] ) {\r\n                    this.trigger( 'error', 'F_DUPLICATE', file );\r\n                    return false;\r\n                }\r\n            });\r\n    \r\n            uploader.on( 'fileQueued', function( file ) {\r\n                var hash = file.__hash;\r\n    \r\n                hash && (mapping[ hash ] = true);\r\n            });\r\n    \r\n            uploader.on( 'fileDequeued', function( file ) {\r\n                var hash = file.__hash;\r\n    \r\n                hash && (delete mapping[ hash ]);\r\n            });\r\n    \r\n            uploader.on( 'reset', function() {\r\n                mapping = {};\r\n            });\r\n        });\r\n    \r\n        return api;\r\n    });\r\n    \r\n    /**\r\n     * @fileOverview Md5\r\n     */\r\n    define('lib/md5',[\r\n        'runtime/client',\r\n        'mediator'\r\n    ], function( RuntimeClient, Mediator ) {\r\n    \r\n        function Md5() {\r\n            RuntimeClient.call( this, 'Md5' );\r\n        }\r\n    \r\n        // 让 Md5 具备事件功能。\r\n        Mediator.installTo( Md5.prototype );\r\n    \r\n        Md5.prototype.loadFromBlob = function( blob ) {\r\n            var me = this;\r\n    \r\n            if ( me.getRuid() ) {\r\n                me.disconnectRuntime();\r\n            }\r\n    \r\n            // 连接到blob归属的同一个runtime.\r\n            me.connectRuntime( blob.ruid, function() {\r\n                me.exec('init');\r\n                me.exec( 'loadFromBlob', blob );\r\n            });\r\n        };\r\n    \r\n        Md5.prototype.getResult = function() {\r\n            return this.exec('getResult');\r\n        };\r\n    \r\n        return Md5;\r\n    });\r\n    /**\r\n     * @fileOverview 图片操作, 负责预览图片和上传前压缩图片\r\n     */\r\n    define('widgets/md5',[\r\n        'base',\r\n        'uploader',\r\n        'lib/md5',\r\n        'lib/blob',\r\n        'widgets/widget'\r\n    ], function( Base, Uploader, Md5, Blob ) {\r\n    \r\n        return Uploader.register({\r\n            name: 'md5',\r\n    \r\n    \r\n            /**\r\n             * 计算文件 md5 值，返回一个 promise 对象，可以监听 progress 进度。\r\n             *\r\n             *\r\n             * @method md5File\r\n             * @grammar md5File( file[, start[, end]] ) => promise\r\n             * @for Uploader\r\n             * @example\r\n             *\r\n             * uploader.on( 'fileQueued', function( file ) {\r\n             *     var $li = ...;\r\n             *\r\n             *     uploader.md5File( file )\r\n             *\r\n             *         // 及时显示进度\r\n             *         .progress(function(percentage) {\r\n             *             console.log('Percentage:', percentage);\r\n             *         })\r\n             *\r\n             *         // 完成\r\n             *         .then(function(val) {\r\n             *             console.log('md5 result:', val);\r\n             *         });\r\n             *\r\n             * });\r\n             */\r\n            md5File: function( file, start, end ) {\r\n                var md5 = new Md5(),\r\n                    deferred = Base.Deferred(),\r\n                    blob = (file instanceof Blob) ? file :\r\n                        this.request( 'get-file', file ).source;\r\n    \r\n                md5.on( 'progress load', function( e ) {\r\n                    e = e || {};\r\n                    deferred.notify( e.total ? e.loaded / e.total : 1 );\r\n                });\r\n    \r\n                md5.on( 'complete', function() {\r\n                    deferred.resolve( md5.getResult() );\r\n                });\r\n    \r\n                md5.on( 'error', function( reason ) {\r\n                    deferred.reject( reason );\r\n                });\r\n    \r\n                if ( arguments.length > 1 ) {\r\n                    start = start || 0;\r\n                    end = end || 0;\r\n                    start < 0 && (start = blob.size + start);\r\n                    end < 0 && (end = blob.size + end);\r\n                    end = Math.min( end, blob.size );\r\n                    blob = blob.slice( start, end );\r\n                }\r\n    \r\n                md5.loadFromBlob( blob );\r\n    \r\n                return deferred.promise();\r\n            }\r\n        });\r\n    });\r\n    /**\r\n     * @fileOverview Runtime管理器，负责Runtime的选择, 连接\r\n     */\r\n    define('runtime/compbase',[],function() {\r\n    \r\n        function CompBase( owner, runtime ) {\r\n    \r\n            this.owner = owner;\r\n            this.options = owner.options;\r\n    \r\n            this.getRuntime = function() {\r\n                return runtime;\r\n            };\r\n    \r\n            this.getRuid = function() {\r\n                return runtime.uid;\r\n            };\r\n    \r\n            this.trigger = function() {\r\n                return owner.trigger.apply( owner, arguments );\r\n            };\r\n        }\r\n    \r\n        return CompBase;\r\n    });\r\n    /**\r\n     * @fileOverview Html5Runtime\r\n     */\r\n    define('runtime/html5/runtime',[\r\n        'base',\r\n        'runtime/runtime',\r\n        'runtime/compbase'\r\n    ], function( Base, Runtime, CompBase ) {\r\n    \r\n        var type = 'html5',\r\n            components = {};\r\n    \r\n        function Html5Runtime() {\r\n            var pool = {},\r\n                me = this,\r\n                destroy = this.destroy;\r\n    \r\n            Runtime.apply( me, arguments );\r\n            me.type = type;\r\n    \r\n    \r\n            // 这个方法的调用者，实际上是RuntimeClient\r\n            me.exec = function( comp, fn/*, args...*/) {\r\n                var client = this,\r\n                    uid = client.uid,\r\n                    args = Base.slice( arguments, 2 ),\r\n                    instance;\r\n    \r\n                if ( components[ comp ] ) {\r\n                    instance = pool[ uid ] = pool[ uid ] ||\r\n                            new components[ comp ]( client, me );\r\n    \r\n                    if ( instance[ fn ] ) {\r\n                        return instance[ fn ].apply( instance, args );\r\n                    }\r\n                }\r\n            };\r\n    \r\n            me.destroy = function() {\r\n                // @todo 删除池子中的所有实例\r\n                return destroy && destroy.apply( this, arguments );\r\n            };\r\n        }\r\n    \r\n        Base.inherits( Runtime, {\r\n            constructor: Html5Runtime,\r\n    \r\n            // 不需要连接其他程序，直接执行callback\r\n            init: function() {\r\n                var me = this;\r\n                setTimeout(function() {\r\n                    me.trigger('ready');\r\n                }, 1 );\r\n            }\r\n    \r\n        });\r\n    \r\n        // 注册Components\r\n        Html5Runtime.register = function( name, component ) {\r\n            var klass = components[ name ] = Base.inherits( CompBase, component );\r\n            return klass;\r\n        };\r\n    \r\n        // 注册html5运行时。\r\n        // 只有在支持的前提下注册。\r\n        if ( window.Blob && window.FileReader && window.DataView ) {\r\n            Runtime.addRuntime( type, Html5Runtime );\r\n        }\r\n    \r\n        return Html5Runtime;\r\n    });\r\n    /**\r\n     * @fileOverview Blob Html实现\r\n     */\r\n    define('runtime/html5/blob',[\r\n        'runtime/html5/runtime',\r\n        'lib/blob'\r\n    ], function( Html5Runtime, Blob ) {\r\n    \r\n        return Html5Runtime.register( 'Blob', {\r\n            slice: function( start, end ) {\r\n                var blob = this.owner.source,\r\n                    slice = blob.slice || blob.webkitSlice || blob.mozSlice;\r\n    \r\n                blob = slice.call( blob, start, end );\r\n    \r\n                return new Blob( this.getRuid(), blob );\r\n            }\r\n        });\r\n    });\r\n    /**\r\n     * @fileOverview FilePaste\r\n     */\r\n    define('runtime/html5/dnd',[\r\n        'base',\r\n        'runtime/html5/runtime',\r\n        'lib/file'\r\n    ], function( Base, Html5Runtime, File ) {\r\n    \r\n        var $ = Base.$,\r\n            prefix = 'webuploader-dnd-';\r\n    \r\n        return Html5Runtime.register( 'DragAndDrop', {\r\n            init: function() {\r\n                var elem = this.elem = this.options.container;\r\n    \r\n                this.dragEnterHandler = Base.bindFn( this._dragEnterHandler, this );\r\n                this.dragOverHandler = Base.bindFn( this._dragOverHandler, this );\r\n                this.dragLeaveHandler = Base.bindFn( this._dragLeaveHandler, this );\r\n                this.dropHandler = Base.bindFn( this._dropHandler, this );\r\n                this.dndOver = false;\r\n    \r\n                elem.on( 'dragenter', this.dragEnterHandler );\r\n                elem.on( 'dragover', this.dragOverHandler );\r\n                elem.on( 'dragleave', this.dragLeaveHandler );\r\n                elem.on( 'drop', this.dropHandler );\r\n    \r\n                if ( this.options.disableGlobalDnd ) {\r\n                    $( document ).on( 'dragover', this.dragOverHandler );\r\n                    $( document ).on( 'drop', this.dropHandler );\r\n                }\r\n            },\r\n    \r\n            _dragEnterHandler: function( e ) {\r\n                var me = this,\r\n                    denied = me._denied || false,\r\n                    items;\r\n    \r\n                e = e.originalEvent || e;\r\n    \r\n                if ( !me.dndOver ) {\r\n                    me.dndOver = true;\r\n    \r\n                    // 注意只有 chrome 支持。\r\n                    items = e.dataTransfer.items;\r\n    \r\n                    if ( items && items.length ) {\r\n                        me._denied = denied = !me.trigger( 'accept', items );\r\n                    }\r\n    \r\n                    me.elem.addClass( prefix + 'over' );\r\n                    me.elem[ denied ? 'addClass' :\r\n                            'removeClass' ]( prefix + 'denied' );\r\n                }\r\n    \r\n                e.dataTransfer.dropEffect = denied ? 'none' : 'copy';\r\n    \r\n                return false;\r\n            },\r\n    \r\n            _dragOverHandler: function( e ) {\r\n                // 只处理框内的。\r\n                var parentElem = this.elem.parent().get( 0 );\r\n                if ( parentElem && !$.contains( parentElem, e.currentTarget ) ) {\r\n                    return false;\r\n                }\r\n    \r\n                clearTimeout( this._leaveTimer );\r\n                this._dragEnterHandler.call( this, e );\r\n    \r\n                return false;\r\n            },\r\n    \r\n            _dragLeaveHandler: function() {\r\n                var me = this,\r\n                    handler;\r\n    \r\n                handler = function() {\r\n                    me.dndOver = false;\r\n                    me.elem.removeClass( prefix + 'over ' + prefix + 'denied' );\r\n                };\r\n    \r\n                clearTimeout( me._leaveTimer );\r\n                me._leaveTimer = setTimeout( handler, 100 );\r\n                return false;\r\n            },\r\n    \r\n            _dropHandler: function( e ) {\r\n                var me = this,\r\n                    ruid = me.getRuid(),\r\n                    parentElem = me.elem.parent().get( 0 ),\r\n                    dataTransfer, data;\r\n    \r\n                // 只处理框内的。\r\n                if ( parentElem && !$.contains( parentElem, e.currentTarget ) ) {\r\n                    return false;\r\n                }\r\n    \r\n                e = e.originalEvent || e;\r\n                dataTransfer = e.dataTransfer;\r\n    \r\n                // 如果是页面内拖拽，还不能处理，不阻止事件。\r\n                // 此处 ie11 下会报参数错误，\r\n                try {\r\n                    data = dataTransfer.getData('text/html');\r\n                } catch( err ) {\r\n                }\r\n    \r\n                me.dndOver = false;\r\n                me.elem.removeClass( prefix + 'over' );\r\n    \r\n                if ( data ) {\r\n                    return;\r\n                }\r\n    \r\n                me._getTansferFiles( dataTransfer, function( results ) {\r\n                    me.trigger( 'drop', $.map( results, function( file ) {\r\n                        return new File( ruid, file );\r\n                    }) );\r\n                });\r\n    \r\n                return false;\r\n            },\r\n    \r\n            // 如果传入 callback 则去查看文件夹，否则只管当前文件夹。\r\n            _getTansferFiles: function( dataTransfer, callback ) {\r\n                var results  = [],\r\n                    promises = [],\r\n                    items, files, file, item, i, len, canAccessFolder;\r\n    \r\n                items = dataTransfer.items;\r\n                files = dataTransfer.files;\r\n    \r\n                canAccessFolder = !!(items && items[ 0 ].webkitGetAsEntry);\r\n    \r\n                for ( i = 0, len = files.length; i < len; i++ ) {\r\n                    file = files[ i ];\r\n                    item = items && items[ i ];\r\n    \r\n                    if ( canAccessFolder && item.webkitGetAsEntry().isDirectory ) {\r\n    \r\n                        promises.push( this._traverseDirectoryTree(\r\n                                item.webkitGetAsEntry(), results ) );\r\n                    } else {\r\n                        results.push( file );\r\n                    }\r\n                }\r\n    \r\n                Base.when.apply( Base, promises ).done(function() {\r\n    \r\n                    if ( !results.length ) {\r\n                        return;\r\n                    }\r\n    \r\n                    callback( results );\r\n                });\r\n            },\r\n    \r\n            _traverseDirectoryTree: function( entry, results ) {\r\n                var deferred = Base.Deferred(),\r\n                    me = this;\r\n    \r\n                if ( entry.isFile ) {\r\n                    entry.file(function( file ) {\r\n                        results.push( file );\r\n                        deferred.resolve();\r\n                    });\r\n                } else if ( entry.isDirectory ) {\r\n                    entry.createReader().readEntries(function( entries ) {\r\n                        var len = entries.length,\r\n                            promises = [],\r\n                            arr = [],    // 为了保证顺序。\r\n                            i;\r\n    \r\n                        for ( i = 0; i < len; i++ ) {\r\n                            promises.push( me._traverseDirectoryTree(\r\n                                    entries[ i ], arr ) );\r\n                        }\r\n    \r\n                        Base.when.apply( Base, promises ).then(function() {\r\n                            results.push.apply( results, arr );\r\n                            deferred.resolve();\r\n                        }, deferred.reject );\r\n                    });\r\n                }\r\n    \r\n                return deferred.promise();\r\n            },\r\n    \r\n            destroy: function() {\r\n                var elem = this.elem;\r\n    \r\n                // 还没 init 就调用 destroy\r\n                if (!elem) {\r\n                    return;\r\n                }\r\n    \r\n                elem.off( 'dragenter', this.dragEnterHandler );\r\n                elem.off( 'dragover', this.dragOverHandler );\r\n                elem.off( 'dragleave', this.dragLeaveHandler );\r\n                elem.off( 'drop', this.dropHandler );\r\n    \r\n                if ( this.options.disableGlobalDnd ) {\r\n                    $( document ).off( 'dragover', this.dragOverHandler );\r\n                    $( document ).off( 'drop', this.dropHandler );\r\n                }\r\n            }\r\n        });\r\n    });\r\n    \r\n    /**\r\n     * @fileOverview FilePaste\r\n     */\r\n    define('runtime/html5/filepaste',[\r\n        'base',\r\n        'runtime/html5/runtime',\r\n        'lib/file'\r\n    ], function( Base, Html5Runtime, File ) {\r\n    \r\n        return Html5Runtime.register( 'FilePaste', {\r\n            init: function() {\r\n                var opts = this.options,\r\n                    elem = this.elem = opts.container,\r\n                    accept = '.*',\r\n                    arr, i, len, item;\r\n    \r\n                // accetp的mimeTypes中生成匹配正则。\r\n                if ( opts.accept ) {\r\n                    arr = [];\r\n    \r\n                    for ( i = 0, len = opts.accept.length; i < len; i++ ) {\r\n                        item = opts.accept[ i ].mimeTypes;\r\n                        item && arr.push( item );\r\n                    }\r\n    \r\n                    if ( arr.length ) {\r\n                        accept = arr.join(',');\r\n                        accept = accept.replace( /,/g, '|' ).replace( /\\*/g, '.*' );\r\n                    }\r\n                }\r\n                this.accept = accept = new RegExp( accept, 'i' );\r\n                this.hander = Base.bindFn( this._pasteHander, this );\r\n                elem.on( 'paste', this.hander );\r\n            },\r\n    \r\n            _pasteHander: function( e ) {\r\n                var allowed = [],\r\n                    ruid = this.getRuid(),\r\n                    items, item, blob, i, len;\r\n    \r\n                e = e.originalEvent || e;\r\n                items = e.clipboardData.items;\r\n    \r\n                for ( i = 0, len = items.length; i < len; i++ ) {\r\n                    item = items[ i ];\r\n    \r\n                    if ( item.kind !== 'file' || !(blob = item.getAsFile()) ) {\r\n                        continue;\r\n                    }\r\n    \r\n                    allowed.push( new File( ruid, blob ) );\r\n                }\r\n    \r\n                if ( allowed.length ) {\r\n                    // 不阻止非文件粘贴（文字粘贴）的事件冒泡\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n                    this.trigger( 'paste', allowed );\r\n                }\r\n            },\r\n    \r\n            destroy: function() {\r\n                this.elem.off( 'paste', this.hander );\r\n            }\r\n        });\r\n    });\r\n    \r\n    /**\r\n     * @fileOverview FilePicker\r\n     */\r\n    define('runtime/html5/filepicker',[\r\n        'base',\r\n        'runtime/html5/runtime'\r\n    ], function( Base, Html5Runtime ) {\r\n    \r\n        var $ = Base.$;\r\n    \r\n        return Html5Runtime.register( 'FilePicker', {\r\n            init: function() {\r\n                var container = this.getRuntime().getContainer(),\r\n                    me = this,\r\n                    owner = me.owner,\r\n                    opts = me.options,\r\n                    label = this.label = $( document.createElement('label') ),\r\n                    input =  this.input = $( document.createElement('input') ),\r\n                    arr, i, len, mouseHandler;\r\n    \r\n                input.attr( 'type', 'file' );\r\n                input.attr( 'capture', 'camera');\r\n                input.attr( 'name', opts.name );\r\n                input.addClass('webuploader-element-invisible');\r\n    \r\n                label.on( 'click', function(e) {\r\n                    input.trigger('click');\r\n                    e.stopPropagation();\r\n                    owner.trigger('dialogopen');\r\n                });\r\n    \r\n                label.css({\r\n                    opacity: 0,\r\n                    width: '100%',\r\n                    height: '100%',\r\n                    display: 'block',\r\n                    cursor: 'pointer',\r\n                    background: '#ffffff'\r\n                });\r\n    \r\n                if ( opts.multiple ) {\r\n                    input.attr( 'multiple', 'multiple' );\r\n                }\r\n    \r\n                // @todo Firefox不支持单独指定后缀\r\n                if ( opts.accept && opts.accept.length > 0 ) {\r\n                    arr = [];\r\n    \r\n                    for ( i = 0, len = opts.accept.length; i < len; i++ ) {\r\n                        arr.push( opts.accept[ i ].mimeTypes );\r\n                    }\r\n    \r\n                    input.attr( 'accept', arr.join(',') );\r\n                }\r\n    \r\n                container.append( input );\r\n                container.append( label );\r\n    \r\n                mouseHandler = function( e ) {\r\n                    owner.trigger( e.type );\r\n                };\r\n    \r\n                input.on( 'change', function( e ) {\r\n                    var fn = arguments.callee,\r\n                        clone;\r\n    \r\n                    me.files = e.target.files;\r\n    \r\n                    // reset input\r\n                    clone = this.cloneNode( true );\r\n                    clone.value = null;\r\n                    this.parentNode.replaceChild( clone, this );\r\n    \r\n                    input.off();\r\n                    input = $( clone ).on( 'change', fn )\r\n                            .on( 'mouseenter mouseleave', mouseHandler );\r\n    \r\n                    owner.trigger('change');\r\n                });\r\n    \r\n                label.on( 'mouseenter mouseleave', mouseHandler );\r\n    \r\n            },\r\n    \r\n    \r\n            getFiles: function() {\r\n                return this.files;\r\n            },\r\n    \r\n            destroy: function() {\r\n                this.input.off();\r\n                this.label.off();\r\n            }\r\n        });\r\n    });\r\n    \r\n    /**\r\n     * Terms:\r\n     *\r\n     * Uint8Array, FileReader, BlobBuilder, atob, ArrayBuffer\r\n     * @fileOverview Image控件\r\n     */\r\n    define('runtime/html5/util',[\r\n        'base'\r\n    ], function( Base ) {\r\n    \r\n        var urlAPI = window.createObjectURL && window ||\r\n                window.URL && URL.revokeObjectURL && URL ||\r\n                window.webkitURL,\r\n            createObjectURL = Base.noop,\r\n            revokeObjectURL = createObjectURL;\r\n    \r\n        if ( urlAPI ) {\r\n    \r\n            // 更安全的方式调用，比如android里面就能把context改成其他的对象。\r\n            createObjectURL = function() {\r\n                return urlAPI.createObjectURL.apply( urlAPI, arguments );\r\n            };\r\n    \r\n            revokeObjectURL = function() {\r\n                return urlAPI.revokeObjectURL.apply( urlAPI, arguments );\r\n            };\r\n        }\r\n    \r\n        return {\r\n            createObjectURL: createObjectURL,\r\n            revokeObjectURL: revokeObjectURL,\r\n    \r\n            dataURL2Blob: function( dataURI ) {\r\n                var byteStr, intArray, ab, i, mimetype, parts;\r\n    \r\n                parts = dataURI.split(',');\r\n    \r\n                if ( ~parts[ 0 ].indexOf('base64') ) {\r\n                    byteStr = atob( parts[ 1 ] );\r\n                } else {\r\n                    byteStr = decodeURIComponent( parts[ 1 ] );\r\n                }\r\n    \r\n                ab = new ArrayBuffer( byteStr.length );\r\n                intArray = new Uint8Array( ab );\r\n    \r\n                for ( i = 0; i < byteStr.length; i++ ) {\r\n                    intArray[ i ] = byteStr.charCodeAt( i );\r\n                }\r\n    \r\n                mimetype = parts[ 0 ].split(':')[ 1 ].split(';')[ 0 ];\r\n    \r\n                return this.arrayBufferToBlob( ab, mimetype );\r\n            },\r\n    \r\n            dataURL2ArrayBuffer: function( dataURI ) {\r\n                var byteStr, intArray, i, parts;\r\n    \r\n                parts = dataURI.split(',');\r\n    \r\n                if ( ~parts[ 0 ].indexOf('base64') ) {\r\n                    byteStr = atob( parts[ 1 ] );\r\n                } else {\r\n                    byteStr = decodeURIComponent( parts[ 1 ] );\r\n                }\r\n    \r\n                intArray = new Uint8Array( byteStr.length );\r\n    \r\n                for ( i = 0; i < byteStr.length; i++ ) {\r\n                    intArray[ i ] = byteStr.charCodeAt( i );\r\n                }\r\n    \r\n                return intArray.buffer;\r\n            },\r\n    \r\n            arrayBufferToBlob: function( buffer, type ) {\r\n                var builder = window.BlobBuilder || window.WebKitBlobBuilder,\r\n                    bb;\r\n    \r\n                // android不支持直接new Blob, 只能借助blobbuilder.\r\n                if ( builder ) {\r\n                    bb = new builder();\r\n                    bb.append( buffer );\r\n                    return bb.getBlob( type );\r\n                }\r\n    \r\n                return new Blob([ buffer ], type ? { type: type } : {} );\r\n            },\r\n    \r\n            // 抽出来主要是为了解决android下面canvas.toDataUrl不支持jpeg.\r\n            // 你得到的结果是png.\r\n            canvasToDataUrl: function( canvas, type, quality ) {\r\n                return canvas.toDataURL( type, quality / 100 );\r\n            },\r\n    \r\n            // imagemeat会复写这个方法，如果用户选择加载那个文件了的话。\r\n            parseMeta: function( blob, callback ) {\r\n                callback( false, {});\r\n            },\r\n    \r\n            // imagemeat会复写这个方法，如果用户选择加载那个文件了的话。\r\n            updateImageHead: function( data ) {\r\n                return data;\r\n            }\r\n        };\r\n    });\r\n    /**\r\n     * Terms:\r\n     *\r\n     * Uint8Array, FileReader, BlobBuilder, atob, ArrayBuffer\r\n     * @fileOverview Image控件\r\n     */\r\n    define('runtime/html5/imagemeta',[\r\n        'runtime/html5/util'\r\n    ], function( Util ) {\r\n    \r\n        var api;\r\n    \r\n        api = {\r\n            parsers: {\r\n                0xffe1: []\r\n            },\r\n    \r\n            maxMetaDataSize: 262144,\r\n    \r\n            parse: function( blob, cb ) {\r\n                var me = this,\r\n                    fr = new FileReader();\r\n    \r\n                fr.onload = function() {\r\n                    cb( false, me._parse( this.result ) );\r\n                    fr = fr.onload = fr.onerror = null;\r\n                };\r\n    \r\n                fr.onerror = function( e ) {\r\n                    cb( e.message );\r\n                    fr = fr.onload = fr.onerror = null;\r\n                };\r\n    \r\n                blob = blob.slice( 0, me.maxMetaDataSize );\r\n                fr.readAsArrayBuffer( blob.getSource() );\r\n            },\r\n    \r\n            _parse: function( buffer, noParse ) {\r\n                if ( buffer.byteLength < 6 ) {\r\n                    return;\r\n                }\r\n    \r\n                var dataview = new DataView( buffer ),\r\n                    offset = 2,\r\n                    maxOffset = dataview.byteLength - 4,\r\n                    headLength = offset,\r\n                    ret = {},\r\n                    markerBytes, markerLength, parsers, i;\r\n    \r\n                if ( dataview.getUint16( 0 ) === 0xffd8 ) {\r\n    \r\n                    while ( offset < maxOffset ) {\r\n                        markerBytes = dataview.getUint16( offset );\r\n    \r\n                        if ( markerBytes >= 0xffe0 && markerBytes <= 0xffef ||\r\n                                markerBytes === 0xfffe ) {\r\n    \r\n                            markerLength = dataview.getUint16( offset + 2 ) + 2;\r\n    \r\n                            if ( offset + markerLength > dataview.byteLength ) {\r\n                                break;\r\n                            }\r\n    \r\n                            parsers = api.parsers[ markerBytes ];\r\n    \r\n                            if ( !noParse && parsers ) {\r\n                                for ( i = 0; i < parsers.length; i += 1 ) {\r\n                                    parsers[ i ].call( api, dataview, offset,\r\n                                            markerLength, ret );\r\n                                }\r\n                            }\r\n    \r\n                            offset += markerLength;\r\n                            headLength = offset;\r\n                        } else {\r\n                            break;\r\n                        }\r\n                    }\r\n    \r\n                    if ( headLength > 6 ) {\r\n                        if ( buffer.slice ) {\r\n                            ret.imageHead = buffer.slice( 2, headLength );\r\n                        } else {\r\n                            // Workaround for IE10, which does not yet\r\n                            // support ArrayBuffer.slice:\r\n                            ret.imageHead = new Uint8Array( buffer )\r\n                                    .subarray( 2, headLength );\r\n                        }\r\n                    }\r\n                }\r\n    \r\n                return ret;\r\n            },\r\n    \r\n            updateImageHead: function( buffer, head ) {\r\n                var data = this._parse( buffer, true ),\r\n                    buf1, buf2, bodyoffset;\r\n    \r\n    \r\n                bodyoffset = 2;\r\n                if ( data.imageHead ) {\r\n                    bodyoffset = 2 + data.imageHead.byteLength;\r\n                }\r\n    \r\n                if ( buffer.slice ) {\r\n                    buf2 = buffer.slice( bodyoffset );\r\n                } else {\r\n                    buf2 = new Uint8Array( buffer ).subarray( bodyoffset );\r\n                }\r\n    \r\n                buf1 = new Uint8Array( head.byteLength + 2 + buf2.byteLength );\r\n    \r\n                buf1[ 0 ] = 0xFF;\r\n                buf1[ 1 ] = 0xD8;\r\n                buf1.set( new Uint8Array( head ), 2 );\r\n                buf1.set( new Uint8Array( buf2 ), head.byteLength + 2 );\r\n    \r\n                return buf1.buffer;\r\n            }\r\n        };\r\n    \r\n        Util.parseMeta = function() {\r\n            return api.parse.apply( api, arguments );\r\n        };\r\n    \r\n        Util.updateImageHead = function() {\r\n            return api.updateImageHead.apply( api, arguments );\r\n        };\r\n    \r\n        return api;\r\n    });\r\n    /**\r\n     * 代码来自于：https://github.com/blueimp/JavaScript-Load-Image\r\n     * 暂时项目中只用了orientation.\r\n     *\r\n     * 去除了 Exif Sub IFD Pointer, GPS Info IFD Pointer, Exif Thumbnail.\r\n     * @fileOverview EXIF解析\r\n     */\r\n    \r\n    // Sample\r\n    // ====================================\r\n    // Make : Apple\r\n    // Model : iPhone 4S\r\n    // Orientation : 1\r\n    // XResolution : 72 [72/1]\r\n    // YResolution : 72 [72/1]\r\n    // ResolutionUnit : 2\r\n    // Software : QuickTime 7.7.1\r\n    // DateTime : 2013:09:01 22:53:55\r\n    // ExifIFDPointer : 190\r\n    // ExposureTime : 0.058823529411764705 [1/17]\r\n    // FNumber : 2.4 [12/5]\r\n    // ExposureProgram : Normal program\r\n    // ISOSpeedRatings : 800\r\n    // ExifVersion : 0220\r\n    // DateTimeOriginal : 2013:09:01 22:52:51\r\n    // DateTimeDigitized : 2013:09:01 22:52:51\r\n    // ComponentsConfiguration : YCbCr\r\n    // ShutterSpeedValue : 4.058893515764426\r\n    // ApertureValue : 2.5260688216892597 [4845/1918]\r\n    // BrightnessValue : -0.3126686601998395\r\n    // MeteringMode : Pattern\r\n    // Flash : Flash did not fire, compulsory flash mode\r\n    // FocalLength : 4.28 [107/25]\r\n    // SubjectArea : [4 values]\r\n    // FlashpixVersion : 0100\r\n    // ColorSpace : 1\r\n    // PixelXDimension : 2448\r\n    // PixelYDimension : 3264\r\n    // SensingMethod : One-chip color area sensor\r\n    // ExposureMode : 0\r\n    // WhiteBalance : Auto white balance\r\n    // FocalLengthIn35mmFilm : 35\r\n    // SceneCaptureType : Standard\r\n    define('runtime/html5/imagemeta/exif',[\r\n        'base',\r\n        'runtime/html5/imagemeta'\r\n    ], function( Base, ImageMeta ) {\r\n    \r\n        var EXIF = {};\r\n    \r\n        EXIF.ExifMap = function() {\r\n            return this;\r\n        };\r\n    \r\n        EXIF.ExifMap.prototype.map = {\r\n            'Orientation': 0x0112\r\n        };\r\n    \r\n        EXIF.ExifMap.prototype.get = function( id ) {\r\n            return this[ id ] || this[ this.map[ id ] ];\r\n        };\r\n    \r\n        EXIF.exifTagTypes = {\r\n            // byte, 8-bit unsigned int:\r\n            1: {\r\n                getValue: function( dataView, dataOffset ) {\r\n                    return dataView.getUint8( dataOffset );\r\n                },\r\n                size: 1\r\n            },\r\n    \r\n            // ascii, 8-bit byte:\r\n            2: {\r\n                getValue: function( dataView, dataOffset ) {\r\n                    return String.fromCharCode( dataView.getUint8( dataOffset ) );\r\n                },\r\n                size: 1,\r\n                ascii: true\r\n            },\r\n    \r\n            // short, 16 bit int:\r\n            3: {\r\n                getValue: function( dataView, dataOffset, littleEndian ) {\r\n                    return dataView.getUint16( dataOffset, littleEndian );\r\n                },\r\n                size: 2\r\n            },\r\n    \r\n            // long, 32 bit int:\r\n            4: {\r\n                getValue: function( dataView, dataOffset, littleEndian ) {\r\n                    return dataView.getUint32( dataOffset, littleEndian );\r\n                },\r\n                size: 4\r\n            },\r\n    \r\n            // rational = two long values,\r\n            // first is numerator, second is denominator:\r\n            5: {\r\n                getValue: function( dataView, dataOffset, littleEndian ) {\r\n                    return dataView.getUint32( dataOffset, littleEndian ) /\r\n                        dataView.getUint32( dataOffset + 4, littleEndian );\r\n                },\r\n                size: 8\r\n            },\r\n    \r\n            // slong, 32 bit signed int:\r\n            9: {\r\n                getValue: function( dataView, dataOffset, littleEndian ) {\r\n                    return dataView.getInt32( dataOffset, littleEndian );\r\n                },\r\n                size: 4\r\n            },\r\n    \r\n            // srational, two slongs, first is numerator, second is denominator:\r\n            10: {\r\n                getValue: function( dataView, dataOffset, littleEndian ) {\r\n                    return dataView.getInt32( dataOffset, littleEndian ) /\r\n                        dataView.getInt32( dataOffset + 4, littleEndian );\r\n                },\r\n                size: 8\r\n            }\r\n        };\r\n    \r\n        // undefined, 8-bit byte, value depending on field:\r\n        EXIF.exifTagTypes[ 7 ] = EXIF.exifTagTypes[ 1 ];\r\n    \r\n        EXIF.getExifValue = function( dataView, tiffOffset, offset, type, length,\r\n                littleEndian ) {\r\n    \r\n            var tagType = EXIF.exifTagTypes[ type ],\r\n                tagSize, dataOffset, values, i, str, c;\r\n    \r\n            if ( !tagType ) {\r\n                Base.log('Invalid Exif data: Invalid tag type.');\r\n                return;\r\n            }\r\n    \r\n            tagSize = tagType.size * length;\r\n    \r\n            // Determine if the value is contained in the dataOffset bytes,\r\n            // or if the value at the dataOffset is a pointer to the actual data:\r\n            dataOffset = tagSize > 4 ? tiffOffset + dataView.getUint32( offset + 8,\r\n                    littleEndian ) : (offset + 8);\r\n    \r\n            if ( dataOffset + tagSize > dataView.byteLength ) {\r\n                Base.log('Invalid Exif data: Invalid data offset.');\r\n                return;\r\n            }\r\n    \r\n            if ( length === 1 ) {\r\n                return tagType.getValue( dataView, dataOffset, littleEndian );\r\n            }\r\n    \r\n            values = [];\r\n    \r\n            for ( i = 0; i < length; i += 1 ) {\r\n                values[ i ] = tagType.getValue( dataView,\r\n                        dataOffset + i * tagType.size, littleEndian );\r\n            }\r\n    \r\n            if ( tagType.ascii ) {\r\n                str = '';\r\n    \r\n                // Concatenate the chars:\r\n                for ( i = 0; i < values.length; i += 1 ) {\r\n                    c = values[ i ];\r\n    \r\n                    // Ignore the terminating NULL byte(s):\r\n                    if ( c === '\\u0000' ) {\r\n                        break;\r\n                    }\r\n                    str += c;\r\n                }\r\n    \r\n                return str;\r\n            }\r\n            return values;\r\n        };\r\n    \r\n        EXIF.parseExifTag = function( dataView, tiffOffset, offset, littleEndian,\r\n                data ) {\r\n    \r\n            var tag = dataView.getUint16( offset, littleEndian );\r\n            data.exif[ tag ] = EXIF.getExifValue( dataView, tiffOffset, offset,\r\n                    dataView.getUint16( offset + 2, littleEndian ),    // tag type\r\n                    dataView.getUint32( offset + 4, littleEndian ),    // tag length\r\n                    littleEndian );\r\n        };\r\n    \r\n        EXIF.parseExifTags = function( dataView, tiffOffset, dirOffset,\r\n                littleEndian, data ) {\r\n    \r\n            var tagsNumber, dirEndOffset, i;\r\n    \r\n            if ( dirOffset + 6 > dataView.byteLength ) {\r\n                Base.log('Invalid Exif data: Invalid directory offset.');\r\n                return;\r\n            }\r\n    \r\n            tagsNumber = dataView.getUint16( dirOffset, littleEndian );\r\n            dirEndOffset = dirOffset + 2 + 12 * tagsNumber;\r\n    \r\n            if ( dirEndOffset + 4 > dataView.byteLength ) {\r\n                Base.log('Invalid Exif data: Invalid directory size.');\r\n                return;\r\n            }\r\n    \r\n            for ( i = 0; i < tagsNumber; i += 1 ) {\r\n                this.parseExifTag( dataView, tiffOffset,\r\n                        dirOffset + 2 + 12 * i,    // tag offset\r\n                        littleEndian, data );\r\n            }\r\n    \r\n            // Return the offset to the next directory:\r\n            return dataView.getUint32( dirEndOffset, littleEndian );\r\n        };\r\n    \r\n        // EXIF.getExifThumbnail = function(dataView, offset, length) {\r\n        //     var hexData,\r\n        //         i,\r\n        //         b;\r\n        //     if (!length || offset + length > dataView.byteLength) {\r\n        //         Base.log('Invalid Exif data: Invalid thumbnail data.');\r\n        //         return;\r\n        //     }\r\n        //     hexData = [];\r\n        //     for (i = 0; i < length; i += 1) {\r\n        //         b = dataView.getUint8(offset + i);\r\n        //         hexData.push((b < 16 ? '0' : '') + b.toString(16));\r\n        //     }\r\n        //     return 'data:image/jpeg,%' + hexData.join('%');\r\n        // };\r\n    \r\n        EXIF.parseExifData = function( dataView, offset, length, data ) {\r\n    \r\n            var tiffOffset = offset + 10,\r\n                littleEndian, dirOffset;\r\n    \r\n            // Check for the ASCII code for \"Exif\" (0x45786966):\r\n            if ( dataView.getUint32( offset + 4 ) !== 0x45786966 ) {\r\n                // No Exif data, might be XMP data instead\r\n                return;\r\n            }\r\n            if ( tiffOffset + 8 > dataView.byteLength ) {\r\n                Base.log('Invalid Exif data: Invalid segment size.');\r\n                return;\r\n            }\r\n    \r\n            // Check for the two null bytes:\r\n            if ( dataView.getUint16( offset + 8 ) !== 0x0000 ) {\r\n                Base.log('Invalid Exif data: Missing byte alignment offset.');\r\n                return;\r\n            }\r\n    \r\n            // Check the byte alignment:\r\n            switch ( dataView.getUint16( tiffOffset ) ) {\r\n                case 0x4949:\r\n                    littleEndian = true;\r\n                    break;\r\n    \r\n                case 0x4D4D:\r\n                    littleEndian = false;\r\n                    break;\r\n    \r\n                default:\r\n                    Base.log('Invalid Exif data: Invalid byte alignment marker.');\r\n                    return;\r\n            }\r\n    \r\n            // Check for the TIFF tag marker (0x002A):\r\n            if ( dataView.getUint16( tiffOffset + 2, littleEndian ) !== 0x002A ) {\r\n                Base.log('Invalid Exif data: Missing TIFF marker.');\r\n                return;\r\n            }\r\n    \r\n            // Retrieve the directory offset bytes, usually 0x00000008 or 8 decimal:\r\n            dirOffset = dataView.getUint32( tiffOffset + 4, littleEndian );\r\n            // Create the exif object to store the tags:\r\n            data.exif = new EXIF.ExifMap();\r\n            // Parse the tags of the main image directory and retrieve the\r\n            // offset to the next directory, usually the thumbnail directory:\r\n            dirOffset = EXIF.parseExifTags( dataView, tiffOffset,\r\n                    tiffOffset + dirOffset, littleEndian, data );\r\n    \r\n            // 尝试读取缩略图\r\n            // if ( dirOffset ) {\r\n            //     thumbnailData = {exif: {}};\r\n            //     dirOffset = EXIF.parseExifTags(\r\n            //         dataView,\r\n            //         tiffOffset,\r\n            //         tiffOffset + dirOffset,\r\n            //         littleEndian,\r\n            //         thumbnailData\r\n            //     );\r\n    \r\n            //     // Check for JPEG Thumbnail offset:\r\n            //     if (thumbnailData.exif[0x0201]) {\r\n            //         data.exif.Thumbnail = EXIF.getExifThumbnail(\r\n            //             dataView,\r\n            //             tiffOffset + thumbnailData.exif[0x0201],\r\n            //             thumbnailData.exif[0x0202] // Thumbnail data length\r\n            //         );\r\n            //     }\r\n            // }\r\n        };\r\n    \r\n        ImageMeta.parsers[ 0xffe1 ].push( EXIF.parseExifData );\r\n        return EXIF;\r\n    });\r\n    /**\r\n     * 这个方式性能不行，但是可以解决android里面的toDataUrl的bug\r\n     * android里面toDataUrl('image/jpege')得到的结果却是png.\r\n     *\r\n     * 所以这里没辙，只能借助这个工具\r\n     * @fileOverview jpeg encoder\r\n     */\r\n    define('runtime/html5/jpegencoder',[], function( require, exports, module ) {\r\n    \r\n        /*\r\n          Copyright (c) 2008, Adobe Systems Incorporated\r\n          All rights reserved.\r\n    \r\n          Redistribution and use in source and binary forms, with or without\r\n          modification, are permitted provided that the following conditions are\r\n          met:\r\n    \r\n          * Redistributions of source code must retain the above copyright notice,\r\n            this list of conditions and the following disclaimer.\r\n    \r\n          * Redistributions in binary form must reproduce the above copyright\r\n            notice, this list of conditions and the following disclaimer in the\r\n            documentation and/or other materials provided with the distribution.\r\n    \r\n          * Neither the name of Adobe Systems Incorporated nor the names of its\r\n            contributors may be used to endorse or promote products derived from\r\n            this software without specific prior written permission.\r\n    \r\n          THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS\r\n          IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,\r\n          THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\r\n          PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR\r\n          CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\r\n          EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\r\n          PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\r\n          PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\r\n          LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\r\n          NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n          SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n        */\r\n        /*\r\n        JPEG encoder ported to JavaScript and optimized by Andreas Ritter, www.bytestrom.eu, 11/2009\r\n    \r\n        Basic GUI blocking jpeg encoder\r\n        */\r\n    \r\n        function JPEGEncoder(quality) {\r\n          var self = this;\r\n            var fround = Math.round;\r\n            var ffloor = Math.floor;\r\n            var YTable = new Array(64);\r\n            var UVTable = new Array(64);\r\n            var fdtbl_Y = new Array(64);\r\n            var fdtbl_UV = new Array(64);\r\n            var YDC_HT;\r\n            var UVDC_HT;\r\n            var YAC_HT;\r\n            var UVAC_HT;\r\n    \r\n            var bitcode = new Array(65535);\r\n            var category = new Array(65535);\r\n            var outputfDCTQuant = new Array(64);\r\n            var DU = new Array(64);\r\n            var byteout = [];\r\n            var bytenew = 0;\r\n            var bytepos = 7;\r\n    \r\n            var YDU = new Array(64);\r\n            var UDU = new Array(64);\r\n            var VDU = new Array(64);\r\n            var clt = new Array(256);\r\n            var RGB_YUV_TABLE = new Array(2048);\r\n            var currentQuality;\r\n    \r\n            var ZigZag = [\r\n                     0, 1, 5, 6,14,15,27,28,\r\n                     2, 4, 7,13,16,26,29,42,\r\n                     3, 8,12,17,25,30,41,43,\r\n                     9,11,18,24,31,40,44,53,\r\n                    10,19,23,32,39,45,52,54,\r\n                    20,22,33,38,46,51,55,60,\r\n                    21,34,37,47,50,56,59,61,\r\n                    35,36,48,49,57,58,62,63\r\n                ];\r\n    \r\n            var std_dc_luminance_nrcodes = [0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0];\r\n            var std_dc_luminance_values = [0,1,2,3,4,5,6,7,8,9,10,11];\r\n            var std_ac_luminance_nrcodes = [0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,0x7d];\r\n            var std_ac_luminance_values = [\r\n                    0x01,0x02,0x03,0x00,0x04,0x11,0x05,0x12,\r\n                    0x21,0x31,0x41,0x06,0x13,0x51,0x61,0x07,\r\n                    0x22,0x71,0x14,0x32,0x81,0x91,0xa1,0x08,\r\n                    0x23,0x42,0xb1,0xc1,0x15,0x52,0xd1,0xf0,\r\n                    0x24,0x33,0x62,0x72,0x82,0x09,0x0a,0x16,\r\n                    0x17,0x18,0x19,0x1a,0x25,0x26,0x27,0x28,\r\n                    0x29,0x2a,0x34,0x35,0x36,0x37,0x38,0x39,\r\n                    0x3a,0x43,0x44,0x45,0x46,0x47,0x48,0x49,\r\n                    0x4a,0x53,0x54,0x55,0x56,0x57,0x58,0x59,\r\n                    0x5a,0x63,0x64,0x65,0x66,0x67,0x68,0x69,\r\n                    0x6a,0x73,0x74,0x75,0x76,0x77,0x78,0x79,\r\n                    0x7a,0x83,0x84,0x85,0x86,0x87,0x88,0x89,\r\n                    0x8a,0x92,0x93,0x94,0x95,0x96,0x97,0x98,\r\n                    0x99,0x9a,0xa2,0xa3,0xa4,0xa5,0xa6,0xa7,\r\n                    0xa8,0xa9,0xaa,0xb2,0xb3,0xb4,0xb5,0xb6,\r\n                    0xb7,0xb8,0xb9,0xba,0xc2,0xc3,0xc4,0xc5,\r\n                    0xc6,0xc7,0xc8,0xc9,0xca,0xd2,0xd3,0xd4,\r\n                    0xd5,0xd6,0xd7,0xd8,0xd9,0xda,0xe1,0xe2,\r\n                    0xe3,0xe4,0xe5,0xe6,0xe7,0xe8,0xe9,0xea,\r\n                    0xf1,0xf2,0xf3,0xf4,0xf5,0xf6,0xf7,0xf8,\r\n                    0xf9,0xfa\r\n                ];\r\n    \r\n            var std_dc_chrominance_nrcodes = [0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0];\r\n            var std_dc_chrominance_values = [0,1,2,3,4,5,6,7,8,9,10,11];\r\n            var std_ac_chrominance_nrcodes = [0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,0x77];\r\n            var std_ac_chrominance_values = [\r\n                    0x00,0x01,0x02,0x03,0x11,0x04,0x05,0x21,\r\n                    0x31,0x06,0x12,0x41,0x51,0x07,0x61,0x71,\r\n                    0x13,0x22,0x32,0x81,0x08,0x14,0x42,0x91,\r\n                    0xa1,0xb1,0xc1,0x09,0x23,0x33,0x52,0xf0,\r\n                    0x15,0x62,0x72,0xd1,0x0a,0x16,0x24,0x34,\r\n                    0xe1,0x25,0xf1,0x17,0x18,0x19,0x1a,0x26,\r\n                    0x27,0x28,0x29,0x2a,0x35,0x36,0x37,0x38,\r\n                    0x39,0x3a,0x43,0x44,0x45,0x46,0x47,0x48,\r\n                    0x49,0x4a,0x53,0x54,0x55,0x56,0x57,0x58,\r\n                    0x59,0x5a,0x63,0x64,0x65,0x66,0x67,0x68,\r\n                    0x69,0x6a,0x73,0x74,0x75,0x76,0x77,0x78,\r\n                    0x79,0x7a,0x82,0x83,0x84,0x85,0x86,0x87,\r\n                    0x88,0x89,0x8a,0x92,0x93,0x94,0x95,0x96,\r\n                    0x97,0x98,0x99,0x9a,0xa2,0xa3,0xa4,0xa5,\r\n                    0xa6,0xa7,0xa8,0xa9,0xaa,0xb2,0xb3,0xb4,\r\n                    0xb5,0xb6,0xb7,0xb8,0xb9,0xba,0xc2,0xc3,\r\n                    0xc4,0xc5,0xc6,0xc7,0xc8,0xc9,0xca,0xd2,\r\n                    0xd3,0xd4,0xd5,0xd6,0xd7,0xd8,0xd9,0xda,\r\n                    0xe2,0xe3,0xe4,0xe5,0xe6,0xe7,0xe8,0xe9,\r\n                    0xea,0xf2,0xf3,0xf4,0xf5,0xf6,0xf7,0xf8,\r\n                    0xf9,0xfa\r\n                ];\r\n    \r\n            function initQuantTables(sf){\r\n                    var YQT = [\r\n                        16, 11, 10, 16, 24, 40, 51, 61,\r\n                        12, 12, 14, 19, 26, 58, 60, 55,\r\n                        14, 13, 16, 24, 40, 57, 69, 56,\r\n                        14, 17, 22, 29, 51, 87, 80, 62,\r\n                        18, 22, 37, 56, 68,109,103, 77,\r\n                        24, 35, 55, 64, 81,104,113, 92,\r\n                        49, 64, 78, 87,103,121,120,101,\r\n                        72, 92, 95, 98,112,100,103, 99\r\n                    ];\r\n    \r\n                    for (var i = 0; i < 64; i++) {\r\n                        var t = ffloor((YQT[i]*sf+50)/100);\r\n                        if (t < 1) {\r\n                            t = 1;\r\n                        } else if (t > 255) {\r\n                            t = 255;\r\n                        }\r\n                        YTable[ZigZag[i]] = t;\r\n                    }\r\n                    var UVQT = [\r\n                        17, 18, 24, 47, 99, 99, 99, 99,\r\n                        18, 21, 26, 66, 99, 99, 99, 99,\r\n                        24, 26, 56, 99, 99, 99, 99, 99,\r\n                        47, 66, 99, 99, 99, 99, 99, 99,\r\n                        99, 99, 99, 99, 99, 99, 99, 99,\r\n                        99, 99, 99, 99, 99, 99, 99, 99,\r\n                        99, 99, 99, 99, 99, 99, 99, 99,\r\n                        99, 99, 99, 99, 99, 99, 99, 99\r\n                    ];\r\n                    for (var j = 0; j < 64; j++) {\r\n                        var u = ffloor((UVQT[j]*sf+50)/100);\r\n                        if (u < 1) {\r\n                            u = 1;\r\n                        } else if (u > 255) {\r\n                            u = 255;\r\n                        }\r\n                        UVTable[ZigZag[j]] = u;\r\n                    }\r\n                    var aasf = [\r\n                        1.0, 1.387039845, 1.306562965, 1.175875602,\r\n                        1.0, 0.785694958, 0.541196100, 0.275899379\r\n                    ];\r\n                    var k = 0;\r\n                    for (var row = 0; row < 8; row++)\r\n                    {\r\n                        for (var col = 0; col < 8; col++)\r\n                        {\r\n                            fdtbl_Y[k]  = (1.0 / (YTable [ZigZag[k]] * aasf[row] * aasf[col] * 8.0));\r\n                            fdtbl_UV[k] = (1.0 / (UVTable[ZigZag[k]] * aasf[row] * aasf[col] * 8.0));\r\n                            k++;\r\n                        }\r\n                    }\r\n                }\r\n    \r\n                function computeHuffmanTbl(nrcodes, std_table){\r\n                    var codevalue = 0;\r\n                    var pos_in_table = 0;\r\n                    var HT = new Array();\r\n                    for (var k = 1; k <= 16; k++) {\r\n                        for (var j = 1; j <= nrcodes[k]; j++) {\r\n                            HT[std_table[pos_in_table]] = [];\r\n                            HT[std_table[pos_in_table]][0] = codevalue;\r\n                            HT[std_table[pos_in_table]][1] = k;\r\n                            pos_in_table++;\r\n                            codevalue++;\r\n                        }\r\n                        codevalue*=2;\r\n                    }\r\n                    return HT;\r\n                }\r\n    \r\n                function initHuffmanTbl()\r\n                {\r\n                    YDC_HT = computeHuffmanTbl(std_dc_luminance_nrcodes,std_dc_luminance_values);\r\n                    UVDC_HT = computeHuffmanTbl(std_dc_chrominance_nrcodes,std_dc_chrominance_values);\r\n                    YAC_HT = computeHuffmanTbl(std_ac_luminance_nrcodes,std_ac_luminance_values);\r\n                    UVAC_HT = computeHuffmanTbl(std_ac_chrominance_nrcodes,std_ac_chrominance_values);\r\n                }\r\n    \r\n                function initCategoryNumber()\r\n                {\r\n                    var nrlower = 1;\r\n                    var nrupper = 2;\r\n                    for (var cat = 1; cat <= 15; cat++) {\r\n                        //Positive numbers\r\n                        for (var nr = nrlower; nr<nrupper; nr++) {\r\n                            category[32767+nr] = cat;\r\n                            bitcode[32767+nr] = [];\r\n                            bitcode[32767+nr][1] = cat;\r\n                            bitcode[32767+nr][0] = nr;\r\n                        }\r\n                        //Negative numbers\r\n                        for (var nrneg =-(nrupper-1); nrneg<=-nrlower; nrneg++) {\r\n                            category[32767+nrneg] = cat;\r\n                            bitcode[32767+nrneg] = [];\r\n                            bitcode[32767+nrneg][1] = cat;\r\n                            bitcode[32767+nrneg][0] = nrupper-1+nrneg;\r\n                        }\r\n                        nrlower <<= 1;\r\n                        nrupper <<= 1;\r\n                    }\r\n                }\r\n    \r\n                function initRGBYUVTable() {\r\n                    for(var i = 0; i < 256;i++) {\r\n                        RGB_YUV_TABLE[i]            =  19595 * i;\r\n                        RGB_YUV_TABLE[(i+ 256)>>0]  =  38470 * i;\r\n                        RGB_YUV_TABLE[(i+ 512)>>0]  =   7471 * i + 0x8000;\r\n                        RGB_YUV_TABLE[(i+ 768)>>0]  = -11059 * i;\r\n                        RGB_YUV_TABLE[(i+1024)>>0]  = -21709 * i;\r\n                        RGB_YUV_TABLE[(i+1280)>>0]  =  32768 * i + 0x807FFF;\r\n                        RGB_YUV_TABLE[(i+1536)>>0]  = -27439 * i;\r\n                        RGB_YUV_TABLE[(i+1792)>>0]  = - 5329 * i;\r\n                    }\r\n                }\r\n    \r\n                // IO functions\r\n                function writeBits(bs)\r\n                {\r\n                    var value = bs[0];\r\n                    var posval = bs[1]-1;\r\n                    while ( posval >= 0 ) {\r\n                        if (value & (1 << posval) ) {\r\n                            bytenew |= (1 << bytepos);\r\n                        }\r\n                        posval--;\r\n                        bytepos--;\r\n                        if (bytepos < 0) {\r\n                            if (bytenew == 0xFF) {\r\n                                writeByte(0xFF);\r\n                                writeByte(0);\r\n                            }\r\n                            else {\r\n                                writeByte(bytenew);\r\n                            }\r\n                            bytepos=7;\r\n                            bytenew=0;\r\n                        }\r\n                    }\r\n                }\r\n    \r\n                function writeByte(value)\r\n                {\r\n                    byteout.push(clt[value]); // write char directly instead of converting later\r\n                }\r\n    \r\n                function writeWord(value)\r\n                {\r\n                    writeByte((value>>8)&0xFF);\r\n                    writeByte((value   )&0xFF);\r\n                }\r\n    \r\n                // DCT & quantization core\r\n                function fDCTQuant(data, fdtbl)\r\n                {\r\n                    var d0, d1, d2, d3, d4, d5, d6, d7;\r\n                    /* Pass 1: process rows. */\r\n                    var dataOff=0;\r\n                    var i;\r\n                    var I8 = 8;\r\n                    var I64 = 64;\r\n                    for (i=0; i<I8; ++i)\r\n                    {\r\n                        d0 = data[dataOff];\r\n                        d1 = data[dataOff+1];\r\n                        d2 = data[dataOff+2];\r\n                        d3 = data[dataOff+3];\r\n                        d4 = data[dataOff+4];\r\n                        d5 = data[dataOff+5];\r\n                        d6 = data[dataOff+6];\r\n                        d7 = data[dataOff+7];\r\n    \r\n                        var tmp0 = d0 + d7;\r\n                        var tmp7 = d0 - d7;\r\n                        var tmp1 = d1 + d6;\r\n                        var tmp6 = d1 - d6;\r\n                        var tmp2 = d2 + d5;\r\n                        var tmp5 = d2 - d5;\r\n                        var tmp3 = d3 + d4;\r\n                        var tmp4 = d3 - d4;\r\n    \r\n                        /* Even part */\r\n                        var tmp10 = tmp0 + tmp3;    /* phase 2 */\r\n                        var tmp13 = tmp0 - tmp3;\r\n                        var tmp11 = tmp1 + tmp2;\r\n                        var tmp12 = tmp1 - tmp2;\r\n    \r\n                        data[dataOff] = tmp10 + tmp11; /* phase 3 */\r\n                        data[dataOff+4] = tmp10 - tmp11;\r\n    \r\n                        var z1 = (tmp12 + tmp13) * 0.707106781; /* c4 */\r\n                        data[dataOff+2] = tmp13 + z1; /* phase 5 */\r\n                        data[dataOff+6] = tmp13 - z1;\r\n    \r\n                        /* Odd part */\r\n                        tmp10 = tmp4 + tmp5; /* phase 2 */\r\n                        tmp11 = tmp5 + tmp6;\r\n                        tmp12 = tmp6 + tmp7;\r\n    \r\n                        /* The rotator is modified from fig 4-8 to avoid extra negations. */\r\n                        var z5 = (tmp10 - tmp12) * 0.382683433; /* c6 */\r\n                        var z2 = 0.541196100 * tmp10 + z5; /* c2-c6 */\r\n                        var z4 = 1.306562965 * tmp12 + z5; /* c2+c6 */\r\n                        var z3 = tmp11 * 0.707106781; /* c4 */\r\n    \r\n                        var z11 = tmp7 + z3;    /* phase 5 */\r\n                        var z13 = tmp7 - z3;\r\n    \r\n                        data[dataOff+5] = z13 + z2; /* phase 6 */\r\n                        data[dataOff+3] = z13 - z2;\r\n                        data[dataOff+1] = z11 + z4;\r\n                        data[dataOff+7] = z11 - z4;\r\n    \r\n                        dataOff += 8; /* advance pointer to next row */\r\n                    }\r\n    \r\n                    /* Pass 2: process columns. */\r\n                    dataOff = 0;\r\n                    for (i=0; i<I8; ++i)\r\n                    {\r\n                        d0 = data[dataOff];\r\n                        d1 = data[dataOff + 8];\r\n                        d2 = data[dataOff + 16];\r\n                        d3 = data[dataOff + 24];\r\n                        d4 = data[dataOff + 32];\r\n                        d5 = data[dataOff + 40];\r\n                        d6 = data[dataOff + 48];\r\n                        d7 = data[dataOff + 56];\r\n    \r\n                        var tmp0p2 = d0 + d7;\r\n                        var tmp7p2 = d0 - d7;\r\n                        var tmp1p2 = d1 + d6;\r\n                        var tmp6p2 = d1 - d6;\r\n                        var tmp2p2 = d2 + d5;\r\n                        var tmp5p2 = d2 - d5;\r\n                        var tmp3p2 = d3 + d4;\r\n                        var tmp4p2 = d3 - d4;\r\n    \r\n                        /* Even part */\r\n                        var tmp10p2 = tmp0p2 + tmp3p2;  /* phase 2 */\r\n                        var tmp13p2 = tmp0p2 - tmp3p2;\r\n                        var tmp11p2 = tmp1p2 + tmp2p2;\r\n                        var tmp12p2 = tmp1p2 - tmp2p2;\r\n    \r\n                        data[dataOff] = tmp10p2 + tmp11p2; /* phase 3 */\r\n                        data[dataOff+32] = tmp10p2 - tmp11p2;\r\n    \r\n                        var z1p2 = (tmp12p2 + tmp13p2) * 0.707106781; /* c4 */\r\n                        data[dataOff+16] = tmp13p2 + z1p2; /* phase 5 */\r\n                        data[dataOff+48] = tmp13p2 - z1p2;\r\n    \r\n                        /* Odd part */\r\n                        tmp10p2 = tmp4p2 + tmp5p2; /* phase 2 */\r\n                        tmp11p2 = tmp5p2 + tmp6p2;\r\n                        tmp12p2 = tmp6p2 + tmp7p2;\r\n    \r\n                        /* The rotator is modified from fig 4-8 to avoid extra negations. */\r\n                        var z5p2 = (tmp10p2 - tmp12p2) * 0.382683433; /* c6 */\r\n                        var z2p2 = 0.541196100 * tmp10p2 + z5p2; /* c2-c6 */\r\n                        var z4p2 = 1.306562965 * tmp12p2 + z5p2; /* c2+c6 */\r\n                        var z3p2 = tmp11p2 * 0.707106781; /* c4 */\r\n    \r\n                        var z11p2 = tmp7p2 + z3p2;  /* phase 5 */\r\n                        var z13p2 = tmp7p2 - z3p2;\r\n    \r\n                        data[dataOff+40] = z13p2 + z2p2; /* phase 6 */\r\n                        data[dataOff+24] = z13p2 - z2p2;\r\n                        data[dataOff+ 8] = z11p2 + z4p2;\r\n                        data[dataOff+56] = z11p2 - z4p2;\r\n    \r\n                        dataOff++; /* advance pointer to next column */\r\n                    }\r\n    \r\n                    // Quantize/descale the coefficients\r\n                    var fDCTQuant;\r\n                    for (i=0; i<I64; ++i)\r\n                    {\r\n                        // Apply the quantization and scaling factor & Round to nearest integer\r\n                        fDCTQuant = data[i]*fdtbl[i];\r\n                        outputfDCTQuant[i] = (fDCTQuant > 0.0) ? ((fDCTQuant + 0.5)|0) : ((fDCTQuant - 0.5)|0);\r\n                        //outputfDCTQuant[i] = fround(fDCTQuant);\r\n    \r\n                    }\r\n                    return outputfDCTQuant;\r\n                }\r\n    \r\n                function writeAPP0()\r\n                {\r\n                    writeWord(0xFFE0); // marker\r\n                    writeWord(16); // length\r\n                    writeByte(0x4A); // J\r\n                    writeByte(0x46); // F\r\n                    writeByte(0x49); // I\r\n                    writeByte(0x46); // F\r\n                    writeByte(0); // = \"JFIF\",'\\0'\r\n                    writeByte(1); // versionhi\r\n                    writeByte(1); // versionlo\r\n                    writeByte(0); // xyunits\r\n                    writeWord(1); // xdensity\r\n                    writeWord(1); // ydensity\r\n                    writeByte(0); // thumbnwidth\r\n                    writeByte(0); // thumbnheight\r\n                }\r\n    \r\n                function writeSOF0(width, height)\r\n                {\r\n                    writeWord(0xFFC0); // marker\r\n                    writeWord(17);   // length, truecolor YUV JPG\r\n                    writeByte(8);    // precision\r\n                    writeWord(height);\r\n                    writeWord(width);\r\n                    writeByte(3);    // nrofcomponents\r\n                    writeByte(1);    // IdY\r\n                    writeByte(0x11); // HVY\r\n                    writeByte(0);    // QTY\r\n                    writeByte(2);    // IdU\r\n                    writeByte(0x11); // HVU\r\n                    writeByte(1);    // QTU\r\n                    writeByte(3);    // IdV\r\n                    writeByte(0x11); // HVV\r\n                    writeByte(1);    // QTV\r\n                }\r\n    \r\n                function writeDQT()\r\n                {\r\n                    writeWord(0xFFDB); // marker\r\n                    writeWord(132);    // length\r\n                    writeByte(0);\r\n                    for (var i=0; i<64; i++) {\r\n                        writeByte(YTable[i]);\r\n                    }\r\n                    writeByte(1);\r\n                    for (var j=0; j<64; j++) {\r\n                        writeByte(UVTable[j]);\r\n                    }\r\n                }\r\n    \r\n                function writeDHT()\r\n                {\r\n                    writeWord(0xFFC4); // marker\r\n                    writeWord(0x01A2); // length\r\n    \r\n                    writeByte(0); // HTYDCinfo\r\n                    for (var i=0; i<16; i++) {\r\n                        writeByte(std_dc_luminance_nrcodes[i+1]);\r\n                    }\r\n                    for (var j=0; j<=11; j++) {\r\n                        writeByte(std_dc_luminance_values[j]);\r\n                    }\r\n    \r\n                    writeByte(0x10); // HTYACinfo\r\n                    for (var k=0; k<16; k++) {\r\n                        writeByte(std_ac_luminance_nrcodes[k+1]);\r\n                    }\r\n                    for (var l=0; l<=161; l++) {\r\n                        writeByte(std_ac_luminance_values[l]);\r\n                    }\r\n    \r\n                    writeByte(1); // HTUDCinfo\r\n                    for (var m=0; m<16; m++) {\r\n                        writeByte(std_dc_chrominance_nrcodes[m+1]);\r\n                    }\r\n                    for (var n=0; n<=11; n++) {\r\n                        writeByte(std_dc_chrominance_values[n]);\r\n                    }\r\n    \r\n                    writeByte(0x11); // HTUACinfo\r\n                    for (var o=0; o<16; o++) {\r\n                        writeByte(std_ac_chrominance_nrcodes[o+1]);\r\n                    }\r\n                    for (var p=0; p<=161; p++) {\r\n                        writeByte(std_ac_chrominance_values[p]);\r\n                    }\r\n                }\r\n    \r\n                function writeSOS()\r\n                {\r\n                    writeWord(0xFFDA); // marker\r\n                    writeWord(12); // length\r\n                    writeByte(3); // nrofcomponents\r\n                    writeByte(1); // IdY\r\n                    writeByte(0); // HTY\r\n                    writeByte(2); // IdU\r\n                    writeByte(0x11); // HTU\r\n                    writeByte(3); // IdV\r\n                    writeByte(0x11); // HTV\r\n                    writeByte(0); // Ss\r\n                    writeByte(0x3f); // Se\r\n                    writeByte(0); // Bf\r\n                }\r\n    \r\n                function processDU(CDU, fdtbl, DC, HTDC, HTAC){\r\n                    var EOB = HTAC[0x00];\r\n                    var M16zeroes = HTAC[0xF0];\r\n                    var pos;\r\n                    var I16 = 16;\r\n                    var I63 = 63;\r\n                    var I64 = 64;\r\n                    var DU_DCT = fDCTQuant(CDU, fdtbl);\r\n                    //ZigZag reorder\r\n                    for (var j=0;j<I64;++j) {\r\n                        DU[ZigZag[j]]=DU_DCT[j];\r\n                    }\r\n                    var Diff = DU[0] - DC; DC = DU[0];\r\n                    //Encode DC\r\n                    if (Diff==0) {\r\n                        writeBits(HTDC[0]); // Diff might be 0\r\n                    } else {\r\n                        pos = 32767+Diff;\r\n                        writeBits(HTDC[category[pos]]);\r\n                        writeBits(bitcode[pos]);\r\n                    }\r\n                    //Encode ACs\r\n                    var end0pos = 63; // was const... which is crazy\r\n                    for (; (end0pos>0)&&(DU[end0pos]==0); end0pos--) {};\r\n                    //end0pos = first element in reverse order !=0\r\n                    if ( end0pos == 0) {\r\n                        writeBits(EOB);\r\n                        return DC;\r\n                    }\r\n                    var i = 1;\r\n                    var lng;\r\n                    while ( i <= end0pos ) {\r\n                        var startpos = i;\r\n                        for (; (DU[i]==0) && (i<=end0pos); ++i) {}\r\n                        var nrzeroes = i-startpos;\r\n                        if ( nrzeroes >= I16 ) {\r\n                            lng = nrzeroes>>4;\r\n                            for (var nrmarker=1; nrmarker <= lng; ++nrmarker)\r\n                                writeBits(M16zeroes);\r\n                            nrzeroes = nrzeroes&0xF;\r\n                        }\r\n                        pos = 32767+DU[i];\r\n                        writeBits(HTAC[(nrzeroes<<4)+category[pos]]);\r\n                        writeBits(bitcode[pos]);\r\n                        i++;\r\n                    }\r\n                    if ( end0pos != I63 ) {\r\n                        writeBits(EOB);\r\n                    }\r\n                    return DC;\r\n                }\r\n    \r\n                function initCharLookupTable(){\r\n                    var sfcc = String.fromCharCode;\r\n                    for(var i=0; i < 256; i++){ ///// ACHTUNG // 255\r\n                        clt[i] = sfcc(i);\r\n                    }\r\n                }\r\n    \r\n                this.encode = function(image,quality) // image data object\r\n                {\r\n                    // var time_start = new Date().getTime();\r\n    \r\n                    if(quality) setQuality(quality);\r\n    \r\n                    // Initialize bit writer\r\n                    byteout = new Array();\r\n                    bytenew=0;\r\n                    bytepos=7;\r\n    \r\n                    // Add JPEG headers\r\n                    writeWord(0xFFD8); // SOI\r\n                    writeAPP0();\r\n                    writeDQT();\r\n                    writeSOF0(image.width,image.height);\r\n                    writeDHT();\r\n                    writeSOS();\r\n    \r\n    \r\n                    // Encode 8x8 macroblocks\r\n                    var DCY=0;\r\n                    var DCU=0;\r\n                    var DCV=0;\r\n    \r\n                    bytenew=0;\r\n                    bytepos=7;\r\n    \r\n    \r\n                    this.encode.displayName = \"_encode_\";\r\n    \r\n                    var imageData = image.data;\r\n                    var width = image.width;\r\n                    var height = image.height;\r\n    \r\n                    var quadWidth = width*4;\r\n                    var tripleWidth = width*3;\r\n    \r\n                    var x, y = 0;\r\n                    var r, g, b;\r\n                    var start,p, col,row,pos;\r\n                    while(y < height){\r\n                        x = 0;\r\n                        while(x < quadWidth){\r\n                        start = quadWidth * y + x;\r\n                        p = start;\r\n                        col = -1;\r\n                        row = 0;\r\n    \r\n                        for(pos=0; pos < 64; pos++){\r\n                            row = pos >> 3;// /8\r\n                            col = ( pos & 7 ) * 4; // %8\r\n                            p = start + ( row * quadWidth ) + col;\r\n    \r\n                            if(y+row >= height){ // padding bottom\r\n                                p-= (quadWidth*(y+1+row-height));\r\n                            }\r\n    \r\n                            if(x+col >= quadWidth){ // padding right\r\n                                p-= ((x+col) - quadWidth +4)\r\n                            }\r\n    \r\n                            r = imageData[ p++ ];\r\n                            g = imageData[ p++ ];\r\n                            b = imageData[ p++ ];\r\n    \r\n    \r\n                            /* // calculate YUV values dynamically\r\n                            YDU[pos]=((( 0.29900)*r+( 0.58700)*g+( 0.11400)*b))-128; //-0x80\r\n                            UDU[pos]=(((-0.16874)*r+(-0.33126)*g+( 0.50000)*b));\r\n                            VDU[pos]=((( 0.50000)*r+(-0.41869)*g+(-0.08131)*b));\r\n                            */\r\n    \r\n                            // use lookup table (slightly faster)\r\n                            YDU[pos] = ((RGB_YUV_TABLE[r]             + RGB_YUV_TABLE[(g +  256)>>0] + RGB_YUV_TABLE[(b +  512)>>0]) >> 16)-128;\r\n                            UDU[pos] = ((RGB_YUV_TABLE[(r +  768)>>0] + RGB_YUV_TABLE[(g + 1024)>>0] + RGB_YUV_TABLE[(b + 1280)>>0]) >> 16)-128;\r\n                            VDU[pos] = ((RGB_YUV_TABLE[(r + 1280)>>0] + RGB_YUV_TABLE[(g + 1536)>>0] + RGB_YUV_TABLE[(b + 1792)>>0]) >> 16)-128;\r\n    \r\n                        }\r\n    \r\n                        DCY = processDU(YDU, fdtbl_Y, DCY, YDC_HT, YAC_HT);\r\n                        DCU = processDU(UDU, fdtbl_UV, DCU, UVDC_HT, UVAC_HT);\r\n                        DCV = processDU(VDU, fdtbl_UV, DCV, UVDC_HT, UVAC_HT);\r\n                        x+=32;\r\n                        }\r\n                        y+=8;\r\n                    }\r\n    \r\n    \r\n                    ////////////////////////////////////////////////////////////////\r\n    \r\n                    // Do the bit alignment of the EOI marker\r\n                    if ( bytepos >= 0 ) {\r\n                        var fillbits = [];\r\n                        fillbits[1] = bytepos+1;\r\n                        fillbits[0] = (1<<(bytepos+1))-1;\r\n                        writeBits(fillbits);\r\n                    }\r\n    \r\n                    writeWord(0xFFD9); //EOI\r\n    \r\n                    var jpegDataUri = 'data:image/jpeg;base64,' + btoa(byteout.join(''));\r\n    \r\n                    byteout = [];\r\n    \r\n                    // benchmarking\r\n                    // var duration = new Date().getTime() - time_start;\r\n                    // console.log('Encoding time: '+ currentQuality + 'ms');\r\n                    //\r\n    \r\n                    return jpegDataUri\r\n            }\r\n    \r\n            function setQuality(quality){\r\n                if (quality <= 0) {\r\n                    quality = 1;\r\n                }\r\n                if (quality > 100) {\r\n                    quality = 100;\r\n                }\r\n    \r\n                if(currentQuality == quality) return // don't recalc if unchanged\r\n    \r\n                var sf = 0;\r\n                if (quality < 50) {\r\n                    sf = Math.floor(5000 / quality);\r\n                } else {\r\n                    sf = Math.floor(200 - quality*2);\r\n                }\r\n    \r\n                initQuantTables(sf);\r\n                currentQuality = quality;\r\n                // console.log('Quality set to: '+quality +'%');\r\n            }\r\n    \r\n            function init(){\r\n                // var time_start = new Date().getTime();\r\n                if(!quality) quality = 50;\r\n                // Create tables\r\n                initCharLookupTable()\r\n                initHuffmanTbl();\r\n                initCategoryNumber();\r\n                initRGBYUVTable();\r\n    \r\n                setQuality(quality);\r\n                // var duration = new Date().getTime() - time_start;\r\n                // console.log('Initialization '+ duration + 'ms');\r\n            }\r\n    \r\n            init();\r\n    \r\n        };\r\n    \r\n        JPEGEncoder.encode = function( data, quality ) {\r\n            var encoder = new JPEGEncoder( quality );\r\n    \r\n            return encoder.encode( data );\r\n        }\r\n    \r\n        return JPEGEncoder;\r\n    });\r\n    /**\r\n     * @fileOverview Fix android canvas.toDataUrl bug.\r\n     */\r\n    define('runtime/html5/androidpatch',[\r\n        'runtime/html5/util',\r\n        'runtime/html5/jpegencoder',\r\n        'base'\r\n    ], function( Util, encoder, Base ) {\r\n        var origin = Util.canvasToDataUrl,\r\n            supportJpeg;\r\n    \r\n        Util.canvasToDataUrl = function( canvas, type, quality ) {\r\n            var ctx, w, h, fragement, parts;\r\n    \r\n            // 非android手机直接跳过。\r\n            if ( !Base.os.android ) {\r\n                return origin.apply( null, arguments );\r\n            }\r\n    \r\n            // 检测是否canvas支持jpeg导出，根据数据格式来判断。\r\n            // JPEG 前两位分别是：255, 216\r\n            if ( type === 'image/jpeg' && typeof supportJpeg === 'undefined' ) {\r\n                fragement = origin.apply( null, arguments );\r\n    \r\n                parts = fragement.split(',');\r\n    \r\n                if ( ~parts[ 0 ].indexOf('base64') ) {\r\n                    fragement = atob( parts[ 1 ] );\r\n                } else {\r\n                    fragement = decodeURIComponent( parts[ 1 ] );\r\n                }\r\n    \r\n                fragement = fragement.substring( 0, 2 );\r\n    \r\n                supportJpeg = fragement.charCodeAt( 0 ) === 255 &&\r\n                        fragement.charCodeAt( 1 ) === 216;\r\n            }\r\n    \r\n            // 只有在android环境下才修复\r\n            if ( type === 'image/jpeg' && !supportJpeg ) {\r\n                w = canvas.width;\r\n                h = canvas.height;\r\n                ctx = canvas.getContext('2d');\r\n    \r\n                return encoder.encode( ctx.getImageData( 0, 0, w, h ), quality );\r\n            }\r\n    \r\n            return origin.apply( null, arguments );\r\n        };\r\n    });\r\n    /**\r\n     * @fileOverview Image\r\n     */\r\n    define('runtime/html5/image',[\r\n        'base',\r\n        'runtime/html5/runtime',\r\n        'runtime/html5/util'\r\n    ], function( Base, Html5Runtime, Util ) {\r\n    \r\n        var BLANK = 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D';\r\n    \r\n        return Html5Runtime.register( 'Image', {\r\n    \r\n            // flag: 标记是否被修改过。\r\n            modified: false,\r\n    \r\n            init: function() {\r\n                var me = this,\r\n                    img = new Image();\r\n    \r\n                img.onload = function() {\r\n    \r\n                    me._info = {\r\n                        type: me.type,\r\n                        width: this.width,\r\n                        height: this.height\r\n                    };\r\n    \r\n                    //debugger;\r\n    \r\n                    // 读取meta信息。\r\n                    if ( !me._metas && 'image/jpeg' === me.type ) {\r\n                        Util.parseMeta( me._blob, function( error, ret ) {\r\n                            me._metas = ret;\r\n                            me.owner.trigger('load');\r\n                        });\r\n                    } else {\r\n                        me.owner.trigger('load');\r\n                    }\r\n                };\r\n    \r\n                img.onerror = function() {\r\n                    me.owner.trigger('error');\r\n                };\r\n    \r\n                me._img = img;\r\n            },\r\n    \r\n            loadFromBlob: function( blob ) {\r\n                var me = this,\r\n                    img = me._img;\r\n    \r\n                me._blob = blob;\r\n                me.type = blob.type;\r\n                img.src = Util.createObjectURL( blob.getSource() );\r\n                me.owner.once( 'load', function() {\r\n                    Util.revokeObjectURL( img.src );\r\n                });\r\n            },\r\n    \r\n            resize: function( width, height ) {\r\n                var canvas = this._canvas ||\r\n                        (this._canvas = document.createElement('canvas'));\r\n    \r\n                this._resize( this._img, canvas, width, height );\r\n                this._blob = null;    // 没用了，可以删掉了。\r\n                this.modified = true;\r\n                this.owner.trigger( 'complete', 'resize' );\r\n            },\r\n    \r\n            crop: function( x, y, w, h, s ) {\r\n                var cvs = this._canvas ||\r\n                        (this._canvas = document.createElement('canvas')),\r\n                    opts = this.options,\r\n                    img = this._img,\r\n                    iw = img.naturalWidth,\r\n                    ih = img.naturalHeight,\r\n                    orientation = this.getOrientation();\r\n    \r\n                s = s || 1;\r\n    \r\n                // todo 解决 orientation 的问题。\r\n                // values that require 90 degree rotation\r\n                // if ( ~[ 5, 6, 7, 8 ].indexOf( orientation ) ) {\r\n    \r\n                //     switch ( orientation ) {\r\n                //         case 6:\r\n                //             tmp = x;\r\n                //             x = y;\r\n                //             y = iw * s - tmp - w;\r\n                //             console.log(ih * s, tmp, w)\r\n                //             break;\r\n                //     }\r\n    \r\n                //     (w ^= h, h ^= w, w ^= h);\r\n                // }\r\n    \r\n                cvs.width = w;\r\n                cvs.height = h;\r\n    \r\n                opts.preserveHeaders || this._rotate2Orientaion( cvs, orientation );\r\n                this._renderImageToCanvas( cvs, img, -x, -y, iw * s, ih * s );\r\n    \r\n                this._blob = null;    // 没用了，可以删掉了。\r\n                this.modified = true;\r\n                this.owner.trigger( 'complete', 'crop' );\r\n            },\r\n    \r\n            getAsBlob: function( type ) {\r\n                var blob = this._blob,\r\n                    opts = this.options,\r\n                    canvas;\r\n    \r\n                type = type || this.type;\r\n    \r\n                // blob需要重新生成。\r\n                if ( this.modified || this.type !== type ) {\r\n                    canvas = this._canvas;\r\n    \r\n                    if ( type === 'image/jpeg' ) {\r\n    \r\n                        blob = Util.canvasToDataUrl( canvas, type, opts.quality );\r\n    \r\n                        if ( opts.preserveHeaders && this._metas &&\r\n                                this._metas.imageHead ) {\r\n    \r\n                            blob = Util.dataURL2ArrayBuffer( blob );\r\n                            blob = Util.updateImageHead( blob,\r\n                                    this._metas.imageHead );\r\n                            blob = Util.arrayBufferToBlob( blob, type );\r\n                            return blob;\r\n                        }\r\n                    } else {\r\n                        blob = Util.canvasToDataUrl( canvas, type );\r\n                    }\r\n    \r\n                    blob = Util.dataURL2Blob( blob );\r\n                }\r\n    \r\n                return blob;\r\n            },\r\n    \r\n            getAsDataUrl: function( type ) {\r\n                var opts = this.options;\r\n    \r\n                type = type || this.type;\r\n    \r\n                if ( type === 'image/jpeg' ) {\r\n                    return Util.canvasToDataUrl( this._canvas, type, opts.quality );\r\n                } else {\r\n                    return this._canvas.toDataURL( type );\r\n                }\r\n            },\r\n    \r\n            getOrientation: function() {\r\n                return this._metas && this._metas.exif &&\r\n                        this._metas.exif.get('Orientation') || 1;\r\n            },\r\n    \r\n            info: function( val ) {\r\n    \r\n                // setter\r\n                if ( val ) {\r\n                    this._info = val;\r\n                    return this;\r\n                }\r\n    \r\n                // getter\r\n                return this._info;\r\n            },\r\n    \r\n            meta: function( val ) {\r\n    \r\n                // setter\r\n                if ( val ) {\r\n                    this._metas = val;\r\n                    return this;\r\n                }\r\n    \r\n                // getter\r\n                return this._metas;\r\n            },\r\n    \r\n            destroy: function() {\r\n                var canvas = this._canvas;\r\n                this._img.onload = null;\r\n    \r\n                if ( canvas ) {\r\n                    canvas.getContext('2d')\r\n                            .clearRect( 0, 0, canvas.width, canvas.height );\r\n                    canvas.width = canvas.height = 0;\r\n                    this._canvas = null;\r\n                }\r\n    \r\n                // 释放内存。非常重要，否则释放不了image的内存。\r\n                this._img.src = BLANK;\r\n                this._img = this._blob = null;\r\n            },\r\n    \r\n            _resize: function( img, cvs, width, height ) {\r\n                var opts = this.options,\r\n                    naturalWidth = img.width,\r\n                    naturalHeight = img.height,\r\n                    orientation = this.getOrientation(),\r\n                    scale, w, h, x, y;\r\n    \r\n                // values that require 90 degree rotation\r\n                if ( ~[ 5, 6, 7, 8 ].indexOf( orientation ) ) {\r\n    \r\n                    // 交换width, height的值。\r\n                    width ^= height;\r\n                    height ^= width;\r\n                    width ^= height;\r\n                }\r\n    \r\n                scale = Math[ opts.crop ? 'max' : 'min' ]( width / naturalWidth,\r\n                        height / naturalHeight );\r\n    \r\n                // 不允许放大。\r\n                opts.allowMagnify || (scale = Math.min( 1, scale ));\r\n    \r\n                w = naturalWidth * scale;\r\n                h = naturalHeight * scale;\r\n    \r\n                if ( opts.crop ) {\r\n                    cvs.width = width;\r\n                    cvs.height = height;\r\n                } else {\r\n                    cvs.width = w;\r\n                    cvs.height = h;\r\n                }\r\n    \r\n                x = (cvs.width - w) / 2;\r\n                y = (cvs.height - h) / 2;\r\n    \r\n                opts.preserveHeaders || this._rotate2Orientaion( cvs, orientation );\r\n    \r\n                this._renderImageToCanvas( cvs, img, x, y, w, h );\r\n            },\r\n    \r\n            _rotate2Orientaion: function( canvas, orientation ) {\r\n                var width = canvas.width,\r\n                    height = canvas.height,\r\n                    ctx = canvas.getContext('2d');\r\n    \r\n                switch ( orientation ) {\r\n                    case 5:\r\n                    case 6:\r\n                    case 7:\r\n                    case 8:\r\n                        canvas.width = height;\r\n                        canvas.height = width;\r\n                        break;\r\n                }\r\n    \r\n                switch ( orientation ) {\r\n                    case 2:    // horizontal flip\r\n                        ctx.translate( width, 0 );\r\n                        ctx.scale( -1, 1 );\r\n                        break;\r\n    \r\n                    case 3:    // 180 rotate left\r\n                        ctx.translate( width, height );\r\n                        ctx.rotate( Math.PI );\r\n                        break;\r\n    \r\n                    case 4:    // vertical flip\r\n                        ctx.translate( 0, height );\r\n                        ctx.scale( 1, -1 );\r\n                        break;\r\n    \r\n                    case 5:    // vertical flip + 90 rotate right\r\n                        ctx.rotate( 0.5 * Math.PI );\r\n                        ctx.scale( 1, -1 );\r\n                        break;\r\n    \r\n                    case 6:    // 90 rotate right\r\n                        ctx.rotate( 0.5 * Math.PI );\r\n                        ctx.translate( 0, -height );\r\n                        break;\r\n    \r\n                    case 7:    // horizontal flip + 90 rotate right\r\n                        ctx.rotate( 0.5 * Math.PI );\r\n                        ctx.translate( width, -height );\r\n                        ctx.scale( -1, 1 );\r\n                        break;\r\n    \r\n                    case 8:    // 90 rotate left\r\n                        ctx.rotate( -0.5 * Math.PI );\r\n                        ctx.translate( -width, 0 );\r\n                        break;\r\n                }\r\n            },\r\n    \r\n            // https://github.com/stomita/ios-imagefile-megapixel/\r\n            // blob/master/src/megapix-image.js\r\n            _renderImageToCanvas: (function() {\r\n    \r\n                // 如果不是ios, 不需要这么复杂！\r\n                if ( !Base.os.ios ) {\r\n                    return function( canvas ) {\r\n                        var args = Base.slice( arguments, 1 ),\r\n                            ctx = canvas.getContext('2d');\r\n    \r\n                        ctx.drawImage.apply( ctx, args );\r\n                    };\r\n                }\r\n    \r\n                /**\r\n                 * Detecting vertical squash in loaded image.\r\n                 * Fixes a bug which squash image vertically while drawing into\r\n                 * canvas for some images.\r\n                 */\r\n                function detectVerticalSquash( img, iw, ih ) {\r\n                    var canvas = document.createElement('canvas'),\r\n                        ctx = canvas.getContext('2d'),\r\n                        sy = 0,\r\n                        ey = ih,\r\n                        py = ih,\r\n                        data, alpha, ratio;\r\n    \r\n    \r\n                    canvas.width = 1;\r\n                    canvas.height = ih;\r\n                    ctx.drawImage( img, 0, 0 );\r\n                    data = ctx.getImageData( 0, 0, 1, ih ).data;\r\n    \r\n                    // search image edge pixel position in case\r\n                    // it is squashed vertically.\r\n                    while ( py > sy ) {\r\n                        alpha = data[ (py - 1) * 4 + 3 ];\r\n    \r\n                        if ( alpha === 0 ) {\r\n                            ey = py;\r\n                        } else {\r\n                            sy = py;\r\n                        }\r\n    \r\n                        py = (ey + sy) >> 1;\r\n                    }\r\n    \r\n                    ratio = (py / ih);\r\n                    return (ratio === 0) ? 1 : ratio;\r\n                }\r\n    \r\n                // fix ie7 bug\r\n                // http://stackoverflow.com/questions/11929099/\r\n                // html5-canvas-drawimage-ratio-bug-ios\r\n                if ( Base.os.ios >= 7 ) {\r\n                    return function( canvas, img, x, y, w, h ) {\r\n                        var iw = img.naturalWidth,\r\n                            ih = img.naturalHeight,\r\n                            vertSquashRatio = detectVerticalSquash( img, iw, ih );\r\n    \r\n                        return canvas.getContext('2d').drawImage( img, 0, 0,\r\n                                iw * vertSquashRatio, ih * vertSquashRatio,\r\n                                x, y, w, h );\r\n                    };\r\n                }\r\n    \r\n                /**\r\n                 * Detect subsampling in loaded image.\r\n                 * In iOS, larger images than 2M pixels may be\r\n                 * subsampled in rendering.\r\n                 */\r\n                function detectSubsampling( img ) {\r\n                    var iw = img.naturalWidth,\r\n                        ih = img.naturalHeight,\r\n                        canvas, ctx;\r\n    \r\n                    // subsampling may happen overmegapixel image\r\n                    if ( iw * ih > 1024 * 1024 ) {\r\n                        canvas = document.createElement('canvas');\r\n                        canvas.width = canvas.height = 1;\r\n                        ctx = canvas.getContext('2d');\r\n                        ctx.drawImage( img, -iw + 1, 0 );\r\n    \r\n                        // subsampled image becomes half smaller in rendering size.\r\n                        // check alpha channel value to confirm image is covering\r\n                        // edge pixel or not. if alpha value is 0\r\n                        // image is not covering, hence subsampled.\r\n                        return ctx.getImageData( 0, 0, 1, 1 ).data[ 3 ] === 0;\r\n                    } else {\r\n                        return false;\r\n                    }\r\n                }\r\n    \r\n    \r\n                return function( canvas, img, x, y, width, height ) {\r\n                    var iw = img.naturalWidth,\r\n                        ih = img.naturalHeight,\r\n                        ctx = canvas.getContext('2d'),\r\n                        subsampled = detectSubsampling( img ),\r\n                        doSquash = this.type === 'image/jpeg',\r\n                        d = 1024,\r\n                        sy = 0,\r\n                        dy = 0,\r\n                        tmpCanvas, tmpCtx, vertSquashRatio, dw, dh, sx, dx;\r\n    \r\n                    if ( subsampled ) {\r\n                        iw /= 2;\r\n                        ih /= 2;\r\n                    }\r\n    \r\n                    ctx.save();\r\n                    tmpCanvas = document.createElement('canvas');\r\n                    tmpCanvas.width = tmpCanvas.height = d;\r\n    \r\n                    tmpCtx = tmpCanvas.getContext('2d');\r\n                    vertSquashRatio = doSquash ?\r\n                            detectVerticalSquash( img, iw, ih ) : 1;\r\n    \r\n                    dw = Math.ceil( d * width / iw );\r\n                    dh = Math.ceil( d * height / ih / vertSquashRatio );\r\n    \r\n                    while ( sy < ih ) {\r\n                        sx = 0;\r\n                        dx = 0;\r\n                        while ( sx < iw ) {\r\n                            tmpCtx.clearRect( 0, 0, d, d );\r\n                            tmpCtx.drawImage( img, -sx, -sy );\r\n                            ctx.drawImage( tmpCanvas, 0, 0, d, d,\r\n                                    x + dx, y + dy, dw, dh );\r\n                            sx += d;\r\n                            dx += dw;\r\n                        }\r\n                        sy += d;\r\n                        dy += dh;\r\n                    }\r\n                    ctx.restore();\r\n                    tmpCanvas = tmpCtx = null;\r\n                };\r\n            })()\r\n        });\r\n    });\r\n    \r\n    /**\r\n     * @fileOverview Transport\r\n     * @todo 支持chunked传输，优势：\r\n     * 可以将大文件分成小块，挨个传输，可以提高大文件成功率，当失败的时候，也只需要重传那小部分，\r\n     * 而不需要重头再传一次。另外断点续传也需要用chunked方式。\r\n     */\r\n    define('runtime/html5/transport',[\r\n        'base',\r\n        'runtime/html5/runtime'\r\n    ], function( Base, Html5Runtime ) {\r\n    \r\n        var noop = Base.noop,\r\n            $ = Base.$;\r\n    \r\n        return Html5Runtime.register( 'Transport', {\r\n            init: function() {\r\n                this._status = 0;\r\n                this._response = null;\r\n            },\r\n    \r\n            send: function() {\r\n                var owner = this.owner,\r\n                    opts = this.options,\r\n                    xhr = this._initAjax(),\r\n                    blob = owner._blob,\r\n                    server = opts.server,\r\n                    formData, binary, fr;\r\n    \r\n                if ( opts.sendAsBinary ) {\r\n                    server += (/\\?/.test( server ) ? '&' : '?') +\r\n                            $.param( owner._formData );\r\n    \r\n                    binary = blob.getSource();\r\n                } else {\r\n                    formData = new FormData();\r\n                    $.each( owner._formData, function( k, v ) {\r\n                        formData.append( k, v );\r\n                    });\r\n    \r\n                    formData.append( opts.fileVal, blob.getSource(),\r\n                            opts.filename || owner._formData.name || '' );\r\n                }\r\n    \r\n                if ( opts.withCredentials && 'withCredentials' in xhr ) {\r\n                    xhr.open( opts.method, server, true );\r\n                    xhr.withCredentials = true;\r\n                } else {\r\n                    xhr.open( opts.method, server );\r\n                }\r\n    \r\n                this._setRequestHeader( xhr, opts.headers );\r\n    \r\n                if ( binary ) {\r\n                    // 强制设置成 content-type 为文件流。\r\n                    xhr.overrideMimeType &&\r\n                            xhr.overrideMimeType('application/octet-stream');\r\n    \r\n                    // android直接发送blob会导致服务端接收到的是空文件。\r\n                    // bug详情。\r\n                    // https://code.google.com/p/android/issues/detail?id=39882\r\n                    // 所以先用fileReader读取出来再通过arraybuffer的方式发送。\r\n                    if ( Base.os.android ) {\r\n                        fr = new FileReader();\r\n    \r\n                        fr.onload = function() {\r\n                            xhr.send( this.result );\r\n                            fr = fr.onload = null;\r\n                        };\r\n    \r\n                        fr.readAsArrayBuffer( binary );\r\n                    } else {\r\n                        xhr.send( binary );\r\n                    }\r\n                } else {\r\n                    xhr.send( formData );\r\n                }\r\n            },\r\n    \r\n            getResponse: function() {\r\n                return this._response;\r\n            },\r\n    \r\n            getResponseAsJson: function() {\r\n                return this._parseJson( this._response );\r\n            },\r\n    \r\n            getStatus: function() {\r\n                return this._status;\r\n            },\r\n    \r\n            abort: function() {\r\n                var xhr = this._xhr;\r\n    \r\n                if ( xhr ) {\r\n                    xhr.upload.onprogress = noop;\r\n                    xhr.onreadystatechange = noop;\r\n                    xhr.abort();\r\n    \r\n                    this._xhr = xhr = null;\r\n                }\r\n            },\r\n    \r\n            destroy: function() {\r\n                this.abort();\r\n            },\r\n    \r\n            _initAjax: function() {\r\n                var me = this,\r\n                    xhr = new XMLHttpRequest(),\r\n                    opts = this.options;\r\n    \r\n                if ( opts.withCredentials && !('withCredentials' in xhr) &&\r\n                        typeof XDomainRequest !== 'undefined' ) {\r\n                    xhr = new XDomainRequest();\r\n                }\r\n    \r\n                xhr.upload.onprogress = function( e ) {\r\n                    var percentage = 0;\r\n    \r\n                    if ( e.lengthComputable ) {\r\n                        percentage = e.loaded / e.total;\r\n                    }\r\n    \r\n                    return me.trigger( 'progress', percentage );\r\n                };\r\n    \r\n                xhr.onreadystatechange = function() {\r\n    \r\n                    if ( xhr.readyState !== 4 ) {\r\n                        return;\r\n                    }\r\n    \r\n                    xhr.upload.onprogress = noop;\r\n                    xhr.onreadystatechange = noop;\r\n                    me._xhr = null;\r\n                    me._status = xhr.status;\r\n    \r\n                    if ( xhr.status >= 200 && xhr.status < 300 ) {\r\n                        me._response = xhr.responseText;\r\n                        return me.trigger('load');\r\n                    } else if ( xhr.status >= 500 && xhr.status < 600 ) {\r\n                        me._response = xhr.responseText;\r\n                        return me.trigger( 'error', 'server' );\r\n                    }\r\n    \r\n    \r\n                    return me.trigger( 'error', me._status ? 'http' : 'abort' );\r\n                };\r\n    \r\n                me._xhr = xhr;\r\n                return xhr;\r\n            },\r\n    \r\n            _setRequestHeader: function( xhr, headers ) {\r\n                $.each( headers, function( key, val ) {\r\n                    xhr.setRequestHeader( key, val );\r\n                });\r\n            },\r\n    \r\n            _parseJson: function( str ) {\r\n                var json;\r\n    \r\n                try {\r\n                    json = JSON.parse( str );\r\n                } catch ( ex ) {\r\n                    json = {};\r\n                }\r\n    \r\n                return json;\r\n            }\r\n        });\r\n    });\r\n    /**\r\n     * @fileOverview  Transport flash实现\r\n     */\r\n    define('runtime/html5/md5',[\r\n        'runtime/html5/runtime'\r\n    ], function( FlashRuntime ) {\r\n    \r\n        /*\r\n         * Fastest md5 implementation around (JKM md5)\r\n         * Credits: Joseph Myers\r\n         *\r\n         * @see http://www.myersdaily.org/joseph/javascript/md5-text.html\r\n         * @see http://jsperf.com/md5-shootout/7\r\n         */\r\n    \r\n        /* this function is much faster,\r\n          so if possible we use it. Some IEs\r\n          are the only ones I know of that\r\n          need the idiotic second function,\r\n          generated by an if clause.  */\r\n        var add32 = function (a, b) {\r\n            return (a + b) & 0xFFFFFFFF;\r\n        },\r\n    \r\n        cmn = function (q, a, b, x, s, t) {\r\n            a = add32(add32(a, q), add32(x, t));\r\n            return add32((a << s) | (a >>> (32 - s)), b);\r\n        },\r\n    \r\n        ff = function (a, b, c, d, x, s, t) {\r\n            return cmn((b & c) | ((~b) & d), a, b, x, s, t);\r\n        },\r\n    \r\n        gg = function (a, b, c, d, x, s, t) {\r\n            return cmn((b & d) | (c & (~d)), a, b, x, s, t);\r\n        },\r\n    \r\n        hh = function (a, b, c, d, x, s, t) {\r\n            return cmn(b ^ c ^ d, a, b, x, s, t);\r\n        },\r\n    \r\n        ii = function (a, b, c, d, x, s, t) {\r\n            return cmn(c ^ (b | (~d)), a, b, x, s, t);\r\n        },\r\n    \r\n        md5cycle = function (x, k) {\r\n            var a = x[0],\r\n                b = x[1],\r\n                c = x[2],\r\n                d = x[3];\r\n    \r\n            a = ff(a, b, c, d, k[0], 7, -680876936);\r\n            d = ff(d, a, b, c, k[1], 12, -389564586);\r\n            c = ff(c, d, a, b, k[2], 17, 606105819);\r\n            b = ff(b, c, d, a, k[3], 22, -1044525330);\r\n            a = ff(a, b, c, d, k[4], 7, -176418897);\r\n            d = ff(d, a, b, c, k[5], 12, 1200080426);\r\n            c = ff(c, d, a, b, k[6], 17, -1473231341);\r\n            b = ff(b, c, d, a, k[7], 22, -45705983);\r\n            a = ff(a, b, c, d, k[8], 7, 1770035416);\r\n            d = ff(d, a, b, c, k[9], 12, -1958414417);\r\n            c = ff(c, d, a, b, k[10], 17, -42063);\r\n            b = ff(b, c, d, a, k[11], 22, -1990404162);\r\n            a = ff(a, b, c, d, k[12], 7, 1804603682);\r\n            d = ff(d, a, b, c, k[13], 12, -40341101);\r\n            c = ff(c, d, a, b, k[14], 17, -1502002290);\r\n            b = ff(b, c, d, a, k[15], 22, 1236535329);\r\n    \r\n            a = gg(a, b, c, d, k[1], 5, -165796510);\r\n            d = gg(d, a, b, c, k[6], 9, -1069501632);\r\n            c = gg(c, d, a, b, k[11], 14, 643717713);\r\n            b = gg(b, c, d, a, k[0], 20, -373897302);\r\n            a = gg(a, b, c, d, k[5], 5, -701558691);\r\n            d = gg(d, a, b, c, k[10], 9, 38016083);\r\n            c = gg(c, d, a, b, k[15], 14, -660478335);\r\n            b = gg(b, c, d, a, k[4], 20, -405537848);\r\n            a = gg(a, b, c, d, k[9], 5, 568446438);\r\n            d = gg(d, a, b, c, k[14], 9, -1019803690);\r\n            c = gg(c, d, a, b, k[3], 14, -187363961);\r\n            b = gg(b, c, d, a, k[8], 20, 1163531501);\r\n            a = gg(a, b, c, d, k[13], 5, -1444681467);\r\n            d = gg(d, a, b, c, k[2], 9, -51403784);\r\n            c = gg(c, d, a, b, k[7], 14, 1735328473);\r\n            b = gg(b, c, d, a, k[12], 20, -1926607734);\r\n    \r\n            a = hh(a, b, c, d, k[5], 4, -378558);\r\n            d = hh(d, a, b, c, k[8], 11, -2022574463);\r\n            c = hh(c, d, a, b, k[11], 16, 1839030562);\r\n            b = hh(b, c, d, a, k[14], 23, -35309556);\r\n            a = hh(a, b, c, d, k[1], 4, -1530992060);\r\n            d = hh(d, a, b, c, k[4], 11, 1272893353);\r\n            c = hh(c, d, a, b, k[7], 16, -155497632);\r\n            b = hh(b, c, d, a, k[10], 23, -1094730640);\r\n            a = hh(a, b, c, d, k[13], 4, 681279174);\r\n            d = hh(d, a, b, c, k[0], 11, -358537222);\r\n            c = hh(c, d, a, b, k[3], 16, -722521979);\r\n            b = hh(b, c, d, a, k[6], 23, 76029189);\r\n            a = hh(a, b, c, d, k[9], 4, -640364487);\r\n            d = hh(d, a, b, c, k[12], 11, -421815835);\r\n            c = hh(c, d, a, b, k[15], 16, 530742520);\r\n            b = hh(b, c, d, a, k[2], 23, -995338651);\r\n    \r\n            a = ii(a, b, c, d, k[0], 6, -198630844);\r\n            d = ii(d, a, b, c, k[7], 10, 1126891415);\r\n            c = ii(c, d, a, b, k[14], 15, -1416354905);\r\n            b = ii(b, c, d, a, k[5], 21, -57434055);\r\n            a = ii(a, b, c, d, k[12], 6, 1700485571);\r\n            d = ii(d, a, b, c, k[3], 10, -1894986606);\r\n            c = ii(c, d, a, b, k[10], 15, -1051523);\r\n            b = ii(b, c, d, a, k[1], 21, -2054922799);\r\n            a = ii(a, b, c, d, k[8], 6, 1873313359);\r\n            d = ii(d, a, b, c, k[15], 10, -30611744);\r\n            c = ii(c, d, a, b, k[6], 15, -1560198380);\r\n            b = ii(b, c, d, a, k[13], 21, 1309151649);\r\n            a = ii(a, b, c, d, k[4], 6, -145523070);\r\n            d = ii(d, a, b, c, k[11], 10, -1120210379);\r\n            c = ii(c, d, a, b, k[2], 15, 718787259);\r\n            b = ii(b, c, d, a, k[9], 21, -343485551);\r\n    \r\n            x[0] = add32(a, x[0]);\r\n            x[1] = add32(b, x[1]);\r\n            x[2] = add32(c, x[2]);\r\n            x[3] = add32(d, x[3]);\r\n        },\r\n    \r\n        /* there needs to be support for Unicode here,\r\n           * unless we pretend that we can redefine the MD-5\r\n           * algorithm for multi-byte characters (perhaps\r\n           * by adding every four 16-bit characters and\r\n           * shortening the sum to 32 bits). Otherwise\r\n           * I suggest performing MD-5 as if every character\r\n           * was two bytes--e.g., 0040 0025 = @%--but then\r\n           * how will an ordinary MD-5 sum be matched?\r\n           * There is no way to standardize text to something\r\n           * like UTF-8 before transformation; speed cost is\r\n           * utterly prohibitive. The JavaScript standard\r\n           * itself needs to look at this: it should start\r\n           * providing access to strings as preformed UTF-8\r\n           * 8-bit unsigned value arrays.\r\n           */\r\n        md5blk = function (s) {\r\n            var md5blks = [],\r\n                i; /* Andy King said do it this way. */\r\n    \r\n            for (i = 0; i < 64; i += 4) {\r\n                md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);\r\n            }\r\n            return md5blks;\r\n        },\r\n    \r\n        md5blk_array = function (a) {\r\n            var md5blks = [],\r\n                i; /* Andy King said do it this way. */\r\n    \r\n            for (i = 0; i < 64; i += 4) {\r\n                md5blks[i >> 2] = a[i] + (a[i + 1] << 8) + (a[i + 2] << 16) + (a[i + 3] << 24);\r\n            }\r\n            return md5blks;\r\n        },\r\n    \r\n        md51 = function (s) {\r\n            var n = s.length,\r\n                state = [1732584193, -271733879, -1732584194, 271733878],\r\n                i,\r\n                length,\r\n                tail,\r\n                tmp,\r\n                lo,\r\n                hi;\r\n    \r\n            for (i = 64; i <= n; i += 64) {\r\n                md5cycle(state, md5blk(s.substring(i - 64, i)));\r\n            }\r\n            s = s.substring(i - 64);\r\n            length = s.length;\r\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\r\n            for (i = 0; i < length; i += 1) {\r\n                tail[i >> 2] |= s.charCodeAt(i) << ((i % 4) << 3);\r\n            }\r\n            tail[i >> 2] |= 0x80 << ((i % 4) << 3);\r\n            if (i > 55) {\r\n                md5cycle(state, tail);\r\n                for (i = 0; i < 16; i += 1) {\r\n                    tail[i] = 0;\r\n                }\r\n            }\r\n    \r\n            // Beware that the final length might not fit in 32 bits so we take care of that\r\n            tmp = n * 8;\r\n            tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\r\n            lo = parseInt(tmp[2], 16);\r\n            hi = parseInt(tmp[1], 16) || 0;\r\n    \r\n            tail[14] = lo;\r\n            tail[15] = hi;\r\n    \r\n            md5cycle(state, tail);\r\n            return state;\r\n        },\r\n    \r\n        md51_array = function (a) {\r\n            var n = a.length,\r\n                state = [1732584193, -271733879, -1732584194, 271733878],\r\n                i,\r\n                length,\r\n                tail,\r\n                tmp,\r\n                lo,\r\n                hi;\r\n    \r\n            for (i = 64; i <= n; i += 64) {\r\n                md5cycle(state, md5blk_array(a.subarray(i - 64, i)));\r\n            }\r\n    \r\n            // Not sure if it is a bug, however IE10 will always produce a sub array of length 1\r\n            // containing the last element of the parent array if the sub array specified starts\r\n            // beyond the length of the parent array - weird.\r\n            // https://connect.microsoft.com/IE/feedback/details/771452/typed-array-subarray-issue\r\n            a = (i - 64) < n ? a.subarray(i - 64) : new Uint8Array(0);\r\n    \r\n            length = a.length;\r\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\r\n            for (i = 0; i < length; i += 1) {\r\n                tail[i >> 2] |= a[i] << ((i % 4) << 3);\r\n            }\r\n    \r\n            tail[i >> 2] |= 0x80 << ((i % 4) << 3);\r\n            if (i > 55) {\r\n                md5cycle(state, tail);\r\n                for (i = 0; i < 16; i += 1) {\r\n                    tail[i] = 0;\r\n                }\r\n            }\r\n    \r\n            // Beware that the final length might not fit in 32 bits so we take care of that\r\n            tmp = n * 8;\r\n            tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\r\n            lo = parseInt(tmp[2], 16);\r\n            hi = parseInt(tmp[1], 16) || 0;\r\n    \r\n            tail[14] = lo;\r\n            tail[15] = hi;\r\n    \r\n            md5cycle(state, tail);\r\n    \r\n            return state;\r\n        },\r\n    \r\n        hex_chr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'],\r\n    \r\n        rhex = function (n) {\r\n            var s = '',\r\n                j;\r\n            for (j = 0; j < 4; j += 1) {\r\n                s += hex_chr[(n >> (j * 8 + 4)) & 0x0F] + hex_chr[(n >> (j * 8)) & 0x0F];\r\n            }\r\n            return s;\r\n        },\r\n    \r\n        hex = function (x) {\r\n            var i;\r\n            for (i = 0; i < x.length; i += 1) {\r\n                x[i] = rhex(x[i]);\r\n            }\r\n            return x.join('');\r\n        },\r\n    \r\n        md5 = function (s) {\r\n            return hex(md51(s));\r\n        },\r\n    \r\n    \r\n    \r\n        ////////////////////////////////////////////////////////////////////////////\r\n    \r\n        /**\r\n         * SparkMD5 OOP implementation.\r\n         *\r\n         * Use this class to perform an incremental md5, otherwise use the\r\n         * static methods instead.\r\n         */\r\n        SparkMD5 = function () {\r\n            // call reset to init the instance\r\n            this.reset();\r\n        };\r\n    \r\n    \r\n        // In some cases the fast add32 function cannot be used..\r\n        if (md5('hello') !== '5d41402abc4b2a76b9719d911017c592') {\r\n            add32 = function (x, y) {\r\n                var lsw = (x & 0xFFFF) + (y & 0xFFFF),\r\n                    msw = (x >> 16) + (y >> 16) + (lsw >> 16);\r\n                return (msw << 16) | (lsw & 0xFFFF);\r\n            };\r\n        }\r\n    \r\n    \r\n        /**\r\n         * Appends a string.\r\n         * A conversion will be applied if an utf8 string is detected.\r\n         *\r\n         * @param {String} str The string to be appended\r\n         *\r\n         * @return {SparkMD5} The instance itself\r\n         */\r\n        SparkMD5.prototype.append = function (str) {\r\n            // converts the string to utf8 bytes if necessary\r\n            if (/[\\u0080-\\uFFFF]/.test(str)) {\r\n                str = unescape(encodeURIComponent(str));\r\n            }\r\n    \r\n            // then append as binary\r\n            this.appendBinary(str);\r\n    \r\n            return this;\r\n        };\r\n    \r\n        /**\r\n         * Appends a binary string.\r\n         *\r\n         * @param {String} contents The binary string to be appended\r\n         *\r\n         * @return {SparkMD5} The instance itself\r\n         */\r\n        SparkMD5.prototype.appendBinary = function (contents) {\r\n            this._buff += contents;\r\n            this._length += contents.length;\r\n    \r\n            var length = this._buff.length,\r\n                i;\r\n    \r\n            for (i = 64; i <= length; i += 64) {\r\n                md5cycle(this._state, md5blk(this._buff.substring(i - 64, i)));\r\n            }\r\n    \r\n            this._buff = this._buff.substr(i - 64);\r\n    \r\n            return this;\r\n        };\r\n    \r\n        /**\r\n         * Finishes the incremental computation, reseting the internal state and\r\n         * returning the result.\r\n         * Use the raw parameter to obtain the raw result instead of the hex one.\r\n         *\r\n         * @param {Boolean} raw True to get the raw result, false to get the hex result\r\n         *\r\n         * @return {String|Array} The result\r\n         */\r\n        SparkMD5.prototype.end = function (raw) {\r\n            var buff = this._buff,\r\n                length = buff.length,\r\n                i,\r\n                tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n                ret;\r\n    \r\n            for (i = 0; i < length; i += 1) {\r\n                tail[i >> 2] |= buff.charCodeAt(i) << ((i % 4) << 3);\r\n            }\r\n    \r\n            this._finish(tail, length);\r\n            ret = !!raw ? this._state : hex(this._state);\r\n    \r\n            this.reset();\r\n    \r\n            return ret;\r\n        };\r\n    \r\n        /**\r\n         * Finish the final calculation based on the tail.\r\n         *\r\n         * @param {Array}  tail   The tail (will be modified)\r\n         * @param {Number} length The length of the remaining buffer\r\n         */\r\n        SparkMD5.prototype._finish = function (tail, length) {\r\n            var i = length,\r\n                tmp,\r\n                lo,\r\n                hi;\r\n    \r\n            tail[i >> 2] |= 0x80 << ((i % 4) << 3);\r\n            if (i > 55) {\r\n                md5cycle(this._state, tail);\r\n                for (i = 0; i < 16; i += 1) {\r\n                    tail[i] = 0;\r\n                }\r\n            }\r\n    \r\n            // Do the final computation based on the tail and length\r\n            // Beware that the final length may not fit in 32 bits so we take care of that\r\n            tmp = this._length * 8;\r\n            tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\r\n            lo = parseInt(tmp[2], 16);\r\n            hi = parseInt(tmp[1], 16) || 0;\r\n    \r\n            tail[14] = lo;\r\n            tail[15] = hi;\r\n            md5cycle(this._state, tail);\r\n        };\r\n    \r\n        /**\r\n         * Resets the internal state of the computation.\r\n         *\r\n         * @return {SparkMD5} The instance itself\r\n         */\r\n        SparkMD5.prototype.reset = function () {\r\n            this._buff = \"\";\r\n            this._length = 0;\r\n            this._state = [1732584193, -271733879, -1732584194, 271733878];\r\n    \r\n            return this;\r\n        };\r\n    \r\n        /**\r\n         * Releases memory used by the incremental buffer and other aditional\r\n         * resources. If you plan to use the instance again, use reset instead.\r\n         */\r\n        SparkMD5.prototype.destroy = function () {\r\n            delete this._state;\r\n            delete this._buff;\r\n            delete this._length;\r\n        };\r\n    \r\n    \r\n        /**\r\n         * Performs the md5 hash on a string.\r\n         * A conversion will be applied if utf8 string is detected.\r\n         *\r\n         * @param {String}  str The string\r\n         * @param {Boolean} raw True to get the raw result, false to get the hex result\r\n         *\r\n         * @return {String|Array} The result\r\n         */\r\n        SparkMD5.hash = function (str, raw) {\r\n            // converts the string to utf8 bytes if necessary\r\n            if (/[\\u0080-\\uFFFF]/.test(str)) {\r\n                str = unescape(encodeURIComponent(str));\r\n            }\r\n    \r\n            var hash = md51(str);\r\n    \r\n            return !!raw ? hash : hex(hash);\r\n        };\r\n    \r\n        /**\r\n         * Performs the md5 hash on a binary string.\r\n         *\r\n         * @param {String}  content The binary string\r\n         * @param {Boolean} raw     True to get the raw result, false to get the hex result\r\n         *\r\n         * @return {String|Array} The result\r\n         */\r\n        SparkMD5.hashBinary = function (content, raw) {\r\n            var hash = md51(content);\r\n    \r\n            return !!raw ? hash : hex(hash);\r\n        };\r\n    \r\n        /**\r\n         * SparkMD5 OOP implementation for array buffers.\r\n         *\r\n         * Use this class to perform an incremental md5 ONLY for array buffers.\r\n         */\r\n        SparkMD5.ArrayBuffer = function () {\r\n            // call reset to init the instance\r\n            this.reset();\r\n        };\r\n    \r\n        ////////////////////////////////////////////////////////////////////////////\r\n    \r\n        /**\r\n         * Appends an array buffer.\r\n         *\r\n         * @param {ArrayBuffer} arr The array to be appended\r\n         *\r\n         * @return {SparkMD5.ArrayBuffer} The instance itself\r\n         */\r\n        SparkMD5.ArrayBuffer.prototype.append = function (arr) {\r\n            // TODO: we could avoid the concatenation here but the algorithm would be more complex\r\n            //       if you find yourself needing extra performance, please make a PR.\r\n            var buff = this._concatArrayBuffer(this._buff, arr),\r\n                length = buff.length,\r\n                i;\r\n    \r\n            this._length += arr.byteLength;\r\n    \r\n            for (i = 64; i <= length; i += 64) {\r\n                md5cycle(this._state, md5blk_array(buff.subarray(i - 64, i)));\r\n            }\r\n    \r\n            // Avoids IE10 weirdness (documented above)\r\n            this._buff = (i - 64) < length ? buff.subarray(i - 64) : new Uint8Array(0);\r\n    \r\n            return this;\r\n        };\r\n    \r\n        /**\r\n         * Finishes the incremental computation, reseting the internal state and\r\n         * returning the result.\r\n         * Use the raw parameter to obtain the raw result instead of the hex one.\r\n         *\r\n         * @param {Boolean} raw True to get the raw result, false to get the hex result\r\n         *\r\n         * @return {String|Array} The result\r\n         */\r\n        SparkMD5.ArrayBuffer.prototype.end = function (raw) {\r\n            var buff = this._buff,\r\n                length = buff.length,\r\n                tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n                i,\r\n                ret;\r\n    \r\n            for (i = 0; i < length; i += 1) {\r\n                tail[i >> 2] |= buff[i] << ((i % 4) << 3);\r\n            }\r\n    \r\n            this._finish(tail, length);\r\n            ret = !!raw ? this._state : hex(this._state);\r\n    \r\n            this.reset();\r\n    \r\n            return ret;\r\n        };\r\n    \r\n        SparkMD5.ArrayBuffer.prototype._finish = SparkMD5.prototype._finish;\r\n    \r\n        /**\r\n         * Resets the internal state of the computation.\r\n         *\r\n         * @return {SparkMD5.ArrayBuffer} The instance itself\r\n         */\r\n        SparkMD5.ArrayBuffer.prototype.reset = function () {\r\n            this._buff = new Uint8Array(0);\r\n            this._length = 0;\r\n            this._state = [1732584193, -271733879, -1732584194, 271733878];\r\n    \r\n            return this;\r\n        };\r\n    \r\n        /**\r\n         * Releases memory used by the incremental buffer and other aditional\r\n         * resources. If you plan to use the instance again, use reset instead.\r\n         */\r\n        SparkMD5.ArrayBuffer.prototype.destroy = SparkMD5.prototype.destroy;\r\n    \r\n        /**\r\n         * Concats two array buffers, returning a new one.\r\n         *\r\n         * @param  {ArrayBuffer} first  The first array buffer\r\n         * @param  {ArrayBuffer} second The second array buffer\r\n         *\r\n         * @return {ArrayBuffer} The new array buffer\r\n         */\r\n        SparkMD5.ArrayBuffer.prototype._concatArrayBuffer = function (first, second) {\r\n            var firstLength = first.length,\r\n                result = new Uint8Array(firstLength + second.byteLength);\r\n    \r\n            result.set(first);\r\n            result.set(new Uint8Array(second), firstLength);\r\n    \r\n            return result;\r\n        };\r\n    \r\n        /**\r\n         * Performs the md5 hash on an array buffer.\r\n         *\r\n         * @param {ArrayBuffer} arr The array buffer\r\n         * @param {Boolean}     raw True to get the raw result, false to get the hex result\r\n         *\r\n         * @return {String|Array} The result\r\n         */\r\n        SparkMD5.ArrayBuffer.hash = function (arr, raw) {\r\n            var hash = md51_array(new Uint8Array(arr));\r\n    \r\n            return !!raw ? hash : hex(hash);\r\n        };\r\n        \r\n        return FlashRuntime.register( 'Md5', {\r\n            init: function() {\r\n                // do nothing.\r\n            },\r\n    \r\n            loadFromBlob: function( file ) {\r\n                var blob = file.getSource(),\r\n                    chunkSize = 2 * 1024 * 1024,\r\n                    chunks = Math.ceil( blob.size / chunkSize ),\r\n                    chunk = 0,\r\n                    owner = this.owner,\r\n                    spark = new SparkMD5.ArrayBuffer(),\r\n                    me = this,\r\n                    blobSlice = blob.mozSlice || blob.webkitSlice || blob.slice,\r\n                    loadNext, fr;\r\n    \r\n                fr = new FileReader();\r\n    \r\n                loadNext = function() {\r\n                    var start, end;\r\n    \r\n                    start = chunk * chunkSize;\r\n                    end = Math.min( start + chunkSize, blob.size );\r\n    \r\n                    fr.onload = function( e ) {\r\n                        spark.append( e.target.result );\r\n                        owner.trigger( 'progress', {\r\n                            total: file.size,\r\n                            loaded: end\r\n                        });\r\n                    };\r\n    \r\n                    fr.onloadend = function() {\r\n                        fr.onloadend = fr.onload = null;\r\n    \r\n                        if ( ++chunk < chunks ) {\r\n                            setTimeout( loadNext, 1 );\r\n                        } else {\r\n                            setTimeout(function(){\r\n                                owner.trigger('load');\r\n                                me.result = spark.end();\r\n                                loadNext = file = blob = spark = null;\r\n                                owner.trigger('complete');\r\n                            }, 50 );\r\n                        }\r\n                    };\r\n    \r\n                    fr.readAsArrayBuffer( blobSlice.call( blob, start, end ) );\r\n                };\r\n    \r\n                loadNext();\r\n            },\r\n    \r\n            getResult: function() {\r\n                return this.result;\r\n            }\r\n        });\r\n    });\r\n    /**\r\n     * @fileOverview FlashRuntime\r\n     */\r\n    define('runtime/flash/runtime',[\r\n        'base',\r\n        'runtime/runtime',\r\n        'runtime/compbase'\r\n    ], function( Base, Runtime, CompBase ) {\r\n    \r\n        var $ = Base.$,\r\n            type = 'flash',\r\n            components = {};\r\n    \r\n    \r\n        function getFlashVersion() {\r\n            var version;\r\n    \r\n            try {\r\n                version = navigator.plugins[ 'Shockwave Flash' ];\r\n                version = version.description;\r\n            } catch ( ex ) {\r\n                try {\r\n                    version = new ActiveXObject('ShockwaveFlash.ShockwaveFlash')\r\n                            .GetVariable('$version');\r\n                } catch ( ex2 ) {\r\n                    version = '0.0';\r\n                }\r\n            }\r\n            version = version.match( /\\d+/g );\r\n            return parseFloat( version[ 0 ] + '.' + version[ 1 ], 10 );\r\n        }\r\n    \r\n        function FlashRuntime() {\r\n            var pool = {},\r\n                clients = {},\r\n                destroy = this.destroy,\r\n                me = this,\r\n                jsreciver = Base.guid('webuploader_');\r\n    \r\n            Runtime.apply( me, arguments );\r\n            me.type = type;\r\n    \r\n    \r\n            // 这个方法的调用者，实际上是RuntimeClient\r\n            me.exec = function( comp, fn/*, args...*/ ) {\r\n                var client = this,\r\n                    uid = client.uid,\r\n                    args = Base.slice( arguments, 2 ),\r\n                    instance;\r\n    \r\n                clients[ uid ] = client;\r\n    \r\n                if ( components[ comp ] ) {\r\n                    if ( !pool[ uid ] ) {\r\n                        pool[ uid ] = new components[ comp ]( client, me );\r\n                    }\r\n    \r\n                    instance = pool[ uid ];\r\n    \r\n                    if ( instance[ fn ] ) {\r\n                        return instance[ fn ].apply( instance, args );\r\n                    }\r\n                }\r\n    \r\n                return me.flashExec.apply( client, arguments );\r\n            };\r\n    \r\n            function handler( evt, obj ) {\r\n                var type = evt.type || evt,\r\n                    parts, uid;\r\n    \r\n                parts = type.split('::');\r\n                uid = parts[ 0 ];\r\n                type = parts[ 1 ];\r\n    \r\n                // console.log.apply( console, arguments );\r\n    \r\n                if ( type === 'Ready' && uid === me.uid ) {\r\n                    me.trigger('ready');\r\n                } else if ( clients[ uid ] ) {\r\n                    clients[ uid ].trigger( type.toLowerCase(), evt, obj );\r\n                }\r\n    \r\n                // Base.log( evt, obj );\r\n            }\r\n    \r\n            // flash的接受器。\r\n            window[ jsreciver ] = function() {\r\n                var args = arguments;\r\n    \r\n                // 为了能捕获得到。\r\n                setTimeout(function() {\r\n                    handler.apply( null, args );\r\n                }, 1 );\r\n            };\r\n    \r\n            this.jsreciver = jsreciver;\r\n    \r\n            this.destroy = function() {\r\n                // @todo 删除池子中的所有实例\r\n                return destroy && destroy.apply( this, arguments );\r\n            };\r\n    \r\n            this.flashExec = function( comp, fn ) {\r\n                var flash = me.getFlash(),\r\n                    args = Base.slice( arguments, 2 );\r\n    \r\n                return flash.exec( this.uid, comp, fn, args );\r\n            };\r\n    \r\n            // @todo\r\n        }\r\n    \r\n        Base.inherits( Runtime, {\r\n            constructor: FlashRuntime,\r\n    \r\n            init: function() {\r\n                var container = this.getContainer(),\r\n                    opts = this.options,\r\n                    html;\r\n    \r\n                // if not the minimal height, shims are not initialized\r\n                // in older browsers (e.g FF3.6, IE6,7,8, Safari 4.0,5.0, etc)\r\n                container.css({\r\n                    position: 'absolute',\r\n                    top: '-8px',\r\n                    left: '-8px',\r\n                    width: '9px',\r\n                    height: '9px',\r\n                    overflow: 'hidden'\r\n                });\r\n    \r\n                // insert flash object\r\n                html = '<object id=\"' + this.uid + '\" type=\"application/' +\r\n                        'x-shockwave-flash\" data=\"' +  opts.swf + '\" ';\r\n    \r\n                if ( Base.browser.ie ) {\r\n                    html += 'classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" ';\r\n                }\r\n    \r\n                html += 'width=\"100%\" height=\"100%\" style=\"outline:0\">'  +\r\n                    '<param name=\"movie\" value=\"' + opts.swf + '\" />' +\r\n                    '<param name=\"flashvars\" value=\"uid=' + this.uid +\r\n                    '&jsreciver=' + this.jsreciver + '\" />' +\r\n                    '<param name=\"wmode\" value=\"transparent\" />' +\r\n                    '<param name=\"allowscriptaccess\" value=\"always\" />' +\r\n                '</object>';\r\n    \r\n                container.html( html );\r\n            },\r\n    \r\n            getFlash: function() {\r\n                if ( this._flash ) {\r\n                    return this._flash;\r\n                }\r\n    \r\n                this._flash = $( '#' + this.uid ).get( 0 );\r\n                return this._flash;\r\n            }\r\n    \r\n        });\r\n    \r\n        FlashRuntime.register = function( name, component ) {\r\n            component = components[ name ] = Base.inherits( CompBase, $.extend({\r\n    \r\n                // @todo fix this later\r\n                flashExec: function() {\r\n                    var owner = this.owner,\r\n                        runtime = this.getRuntime();\r\n    \r\n                    return runtime.flashExec.apply( owner, arguments );\r\n                }\r\n            }, component ) );\r\n    \r\n            return component;\r\n        };\r\n    \r\n        if ( getFlashVersion() >= 11.4 ) {\r\n            Runtime.addRuntime( type, FlashRuntime );\r\n        }\r\n    \r\n        return FlashRuntime;\r\n    });\r\n    /**\r\n     * @fileOverview FilePicker\r\n     */\r\n    define('runtime/flash/filepicker',[\r\n        'base',\r\n        'runtime/flash/runtime'\r\n    ], function( Base, FlashRuntime ) {\r\n        var $ = Base.$;\r\n    \r\n        return FlashRuntime.register( 'FilePicker', {\r\n            init: function( opts ) {\r\n                var copy = $.extend({}, opts ),\r\n                    len, i;\r\n    \r\n                // 修复Flash再没有设置title的情况下无法弹出flash文件选择框的bug.\r\n                len = copy.accept && copy.accept.length;\r\n                for (  i = 0; i < len; i++ ) {\r\n                    if ( !copy.accept[ i ].title ) {\r\n                        copy.accept[ i ].title = 'Files';\r\n                    }\r\n                }\r\n    \r\n                delete copy.button;\r\n                delete copy.id;\r\n                delete copy.container;\r\n    \r\n                this.flashExec( 'FilePicker', 'init', copy );\r\n            },\r\n    \r\n            destroy: function() {\r\n                this.flashExec( 'FilePicker', 'destroy' );\r\n            }\r\n        });\r\n    });\r\n    /**\r\n     * @fileOverview 图片压缩\r\n     */\r\n    define('runtime/flash/image',[\r\n        'runtime/flash/runtime'\r\n    ], function( FlashRuntime ) {\r\n    \r\n        return FlashRuntime.register( 'Image', {\r\n            // init: function( options ) {\r\n            //     var owner = this.owner;\r\n    \r\n            //     this.flashExec( 'Image', 'init', options );\r\n            //     owner.on( 'load', function() {\r\n            //         debugger;\r\n            //     });\r\n            // },\r\n    \r\n            loadFromBlob: function( blob ) {\r\n                var owner = this.owner;\r\n    \r\n                owner.info() && this.flashExec( 'Image', 'info', owner.info() );\r\n                owner.meta() && this.flashExec( 'Image', 'meta', owner.meta() );\r\n    \r\n                this.flashExec( 'Image', 'loadFromBlob', blob.uid );\r\n            }\r\n        });\r\n    });\r\n    /**\r\n     * @fileOverview  Transport flash实现\r\n     */\r\n    define('runtime/flash/transport',[\r\n        'base',\r\n        'runtime/flash/runtime',\r\n        'runtime/client'\r\n    ], function( Base, FlashRuntime, RuntimeClient ) {\r\n        var $ = Base.$;\r\n    \r\n        return FlashRuntime.register( 'Transport', {\r\n            init: function() {\r\n                this._status = 0;\r\n                this._response = null;\r\n                this._responseJson = null;\r\n            },\r\n    \r\n            send: function() {\r\n                var owner = this.owner,\r\n                    opts = this.options,\r\n                    xhr = this._initAjax(),\r\n                    blob = owner._blob,\r\n                    server = opts.server,\r\n                    binary;\r\n    \r\n                xhr.connectRuntime( blob.ruid );\r\n    \r\n                if ( opts.sendAsBinary ) {\r\n                    server += (/\\?/.test( server ) ? '&' : '?') +\r\n                            $.param( owner._formData );\r\n    \r\n                    binary = blob.uid;\r\n                } else {\r\n                    $.each( owner._formData, function( k, v ) {\r\n                        xhr.exec( 'append', k, v );\r\n                    });\r\n    \r\n                    xhr.exec( 'appendBlob', opts.fileVal, blob.uid,\r\n                            opts.filename || owner._formData.name || '' );\r\n                }\r\n    \r\n                this._setRequestHeader( xhr, opts.headers );\r\n                xhr.exec( 'send', {\r\n                    method: opts.method,\r\n                    url: server,\r\n                    forceURLStream: opts.forceURLStream,\r\n                    mimeType: 'application/octet-stream'\r\n                }, binary );\r\n            },\r\n    \r\n            getStatus: function() {\r\n                return this._status;\r\n            },\r\n    \r\n            getResponse: function() {\r\n                return this._response || '';\r\n            },\r\n    \r\n            getResponseAsJson: function() {\r\n                return this._responseJson;\r\n            },\r\n    \r\n            abort: function() {\r\n                var xhr = this._xhr;\r\n    \r\n                if ( xhr ) {\r\n                    xhr.exec('abort');\r\n                    xhr.destroy();\r\n                    this._xhr = xhr = null;\r\n                }\r\n            },\r\n    \r\n            destroy: function() {\r\n                this.abort();\r\n            },\r\n    \r\n            _initAjax: function() {\r\n                var me = this,\r\n                    xhr = new RuntimeClient('XMLHttpRequest');\r\n    \r\n                xhr.on( 'uploadprogress progress', function( e ) {\r\n                    var percent = e.loaded / e.total;\r\n                    percent = Math.min( 1, Math.max( 0, percent ) );\r\n                    return me.trigger( 'progress', percent );\r\n                });\r\n    \r\n                xhr.on( 'load', function() {\r\n                    var status = xhr.exec('getStatus'),\r\n                        readBody = false,\r\n                        err = '',\r\n                        p;\r\n    \r\n                    xhr.off();\r\n                    me._xhr = null;\r\n    \r\n                    if ( status >= 200 && status < 300 ) {\r\n                        readBody = true;\r\n                    } else if ( status >= 500 && status < 600 ) {\r\n                        readBody = true;\r\n                        err = 'server';\r\n                    } else {\r\n                        err = 'http';\r\n                    }\r\n    \r\n                    if ( readBody ) {\r\n                        me._response = xhr.exec('getResponse');\r\n                        me._response = decodeURIComponent( me._response );\r\n    \r\n                        // flash 处理可能存在 bug, 没辙只能靠 js 了\r\n                        // try {\r\n                        //     me._responseJson = xhr.exec('getResponseAsJson');\r\n                        // } catch ( error ) {\r\n    \r\n                        p = function( s ) {\r\n                            try {\r\n                                if (window.JSON && window.JSON.parse) {\r\n                                    return JSON.parse(s);\r\n                                }\r\n    \r\n                                return new Function('return ' + s).call();\r\n                            } catch ( err ) {\r\n                                return {};\r\n                            }\r\n                        };\r\n                        me._responseJson  = me._response ? p(me._response) : {};\r\n    \r\n                        // }\r\n                    }\r\n    \r\n                    xhr.destroy();\r\n                    xhr = null;\r\n    \r\n                    return err ? me.trigger( 'error', err ) : me.trigger('load');\r\n                });\r\n    \r\n                xhr.on( 'error', function() {\r\n                    xhr.off();\r\n                    me._xhr = null;\r\n                    me.trigger( 'error', 'http' );\r\n                });\r\n    \r\n                me._xhr = xhr;\r\n                return xhr;\r\n            },\r\n    \r\n            _setRequestHeader: function( xhr, headers ) {\r\n                $.each( headers, function( key, val ) {\r\n                    xhr.exec( 'setRequestHeader', key, val );\r\n                });\r\n            }\r\n        });\r\n    });\r\n    \r\n    /**\r\n     * @fileOverview Blob Html实现\r\n     */\r\n    define('runtime/flash/blob',[\r\n        'runtime/flash/runtime',\r\n        'lib/blob'\r\n    ], function( FlashRuntime, Blob ) {\r\n    \r\n        return FlashRuntime.register( 'Blob', {\r\n            slice: function( start, end ) {\r\n                var blob = this.flashExec( 'Blob', 'slice', start, end );\r\n    \r\n                return new Blob( this.getRuid(), blob );\r\n            }\r\n        });\r\n    });\r\n    /**\r\n     * @fileOverview  Md5 flash实现\r\n     */\r\n    define('runtime/flash/md5',[\r\n        'runtime/flash/runtime'\r\n    ], function( FlashRuntime ) {\r\n        \r\n        return FlashRuntime.register( 'Md5', {\r\n            init: function() {\r\n                // do nothing.\r\n            },\r\n    \r\n            loadFromBlob: function( blob ) {\r\n                return this.flashExec( 'Md5', 'loadFromBlob', blob.uid );\r\n            }\r\n        });\r\n    });\r\n    /**\r\n     * @fileOverview 完全版本。\r\n     */\r\n    define('preset/all',[\r\n        'base',\r\n    \r\n        // widgets\r\n        'widgets/filednd',\r\n        'widgets/filepaste',\r\n        'widgets/filepicker',\r\n        'widgets/image',\r\n        'widgets/queue',\r\n        'widgets/runtime',\r\n        'widgets/upload',\r\n        'widgets/validator',\r\n        'widgets/md5',\r\n    \r\n        // runtimes\r\n        // html5\r\n        'runtime/html5/blob',\r\n        'runtime/html5/dnd',\r\n        'runtime/html5/filepaste',\r\n        'runtime/html5/filepicker',\r\n        'runtime/html5/imagemeta/exif',\r\n        'runtime/html5/androidpatch',\r\n        'runtime/html5/image',\r\n        'runtime/html5/transport',\r\n        'runtime/html5/md5',\r\n    \r\n        // flash\r\n        'runtime/flash/filepicker',\r\n        'runtime/flash/image',\r\n        'runtime/flash/transport',\r\n        'runtime/flash/blob',\r\n        'runtime/flash/md5'\r\n    ], function( Base ) {\r\n        return Base;\r\n    });\r\n    /**\r\n     * @fileOverview 日志组件，主要用来收集错误信息，可以帮助 webuploader 更好的定位问题和发展。\r\n     *\r\n     * 如果您不想要启用此功能，请在打包的时候去掉 log 模块。\r\n     *\r\n     * 或者可以在初始化的时候通过 options.disableWidgets 属性禁用。\r\n     *\r\n     * 如：\r\n     * WebUploader.create({\r\n     *     ...\r\n     *\r\n     *     disableWidgets: 'log',\r\n     *\r\n     *     ...\r\n     * })\r\n     */\r\n    define('widgets/log',[\r\n        'base',\r\n        'uploader',\r\n        'widgets/widget'\r\n    ], function( Base, Uploader ) {\r\n        var $ = Base.$,\r\n            logUrl = ' http://static.tieba.baidu.com/tb/pms/img/st.gif??',\r\n            product = (location.hostname || location.host || 'protected').toLowerCase(),\r\n    \r\n            // 只针对 baidu 内部产品用户做统计功能。\r\n            enable = product && /baidu/i.exec(product),\r\n            base;\r\n    \r\n        if (!enable) {\r\n            return;\r\n        }\r\n    \r\n        base = {\r\n            dv: 3,\r\n            master: 'webuploader',\r\n            online: /test/.exec(product) ? 0 : 1,\r\n            module: '',\r\n            product: product,\r\n            type: 0\r\n        };\r\n    \r\n        function send(data) {\r\n            var obj = $.extend({}, base, data),\r\n                url = logUrl.replace(/^(.*)\\?/, '$1' + $.param( obj )),\r\n                image = new Image();\r\n    \r\n            image.src = url;\r\n        }\r\n    \r\n        return Uploader.register({\r\n            name: 'log',\r\n    \r\n            init: function() {\r\n                var owner = this.owner,\r\n                    count = 0,\r\n                    size = 0;\r\n    \r\n                owner\r\n                    .on('error', function(code) {\r\n                        send({\r\n                            type: 2,\r\n                            c_error_code: code\r\n                        });\r\n                    })\r\n                    .on('uploadError', function(file, reason) {\r\n                        send({\r\n                            type: 2,\r\n                            c_error_code: 'UPLOAD_ERROR',\r\n                            c_reason: '' + reason\r\n                        });\r\n                    })\r\n                    .on('uploadComplete', function(file) {\r\n                        count++;\r\n                        size += file.size;\r\n                    }).\r\n                    on('uploadFinished', function() {\r\n                        send({\r\n                            c_count: count,\r\n                            c_size: size\r\n                        });\r\n                        count = size = 0;\r\n                    });\r\n    \r\n                send({\r\n                    c_usage: 1\r\n                });\r\n            }\r\n        });\r\n    });\r\n    /**\r\n     * @fileOverview Uploader上传类\r\n     */\r\n    define('webuploader',[\r\n        'preset/all',\r\n        'widgets/log'\r\n    ], function( preset ) {\r\n        return preset;\r\n    });\r\n    return require('webuploader');\r\n});\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy91cGxvYWQvd2VidXBsb2FkZXIuanM/ZTA0ZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9COztBQUVwQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSw4Q0FBOEMsU0FBUztBQUN2RDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7O0FBR0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTs7QUFFQSxpQkFBaUIsT0FBTztBQUN4QjtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMEJBQTBCOztBQUUxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDs7O0FBR0E7QUFDQTtBQUNBLG1CQUFtQixPQUFPO0FBQzFCLG1CQUFtQixRQUFRO0FBQzNCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSw2Q0FBNkM7O0FBRTdDOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxTQUFTOztBQUVUOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7O0FBRUE7QUFDQSwwQkFBMEIsZUFBZTtBQUN6QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLHVCQUF1QixTQUFTO0FBQ2hDO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQ0FBaUM7O0FBRWpDO0FBQ0EsNkJBQTZCO0FBQzdCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsT0FBTztBQUMzQixvQkFBb0IsT0FBTztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaLDJDQUEyQztBQUMzQztBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQSx1QkFBdUIsc0RBQXNEO0FBQzdFOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCOztBQUVqQixhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixPQUFPO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsNkNBQTZDLEtBQUs7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLHNCQUFzQixTQUFTO0FBQy9CO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHNCQUFzQixTQUFTO0FBQy9CO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsbUJBQW1CLHFCQUFxQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjs7QUFFQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLFNBQVM7O0FBRVQ7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxzQkFBc0IsU0FBUztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7O0FBRUE7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSw2Q0FBNkM7O0FBRTdDOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7O0FBRWI7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLDBCQUEwQixrQkFBa0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsWUFBWTtBQUNuQywwQkFBMEIsT0FBTztBQUNqQyw4QkFBOEIsT0FBTztBQUNyQyw2QkFBNkIsUUFBUTtBQUNyQztBQUNBOztBQUVBO0FBQ0EsMEJBQTBCLE1BQU07QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsT0FBTztBQUNqQywrQkFBK0IsT0FBTztBQUN0Qyw4QkFBOEIsT0FBTztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBOztBQUVBOztBQUVBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjs7QUFFckI7O0FBRUE7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7O0FBRUE7O0FBRUE7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhOztBQUViOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsU0FBUzs7QUFFVDs7QUFFQTtBQUNBLDBCQUEwQixPQUFPO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBLDBCQUEwQixPQUFPO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDs7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FB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O0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBUzs7QUFFVDs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsMERBQTBELFNBQVM7QUFDbkU7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxhQUFhOzs7QUFHYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsYUFBYTs7O0FBR2I7QUFDQTtBQUNBLHVCQUF1QixLQUFLO0FBQzVCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUJBQXVCLEtBQUs7QUFDNUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7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QUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsdUJBQXVCLFNBQVM7QUFDaEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7O0FBRUE7QUFDQSxhQUFhOztBQUViO0FBQ0E7O0FBRUE7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUzs7QUFFVDtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCOztBQUVBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7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QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0Q7QUFDdEQsa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtB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O0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhOztBQUViOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNULEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7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LEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QixxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QixxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0EscUJBQXFCOztBQUVyQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQyIsImZpbGUiOiI0OC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qISBXZWJVcGxvYWRlciAwLjEuNiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAZmlsZU92ZXJ2aWV3IOiuqeWGhemDqOWQhOS4qumDqOS7tueahOS7o+eggeWPr+S7peeUqFthbWRdKGh0dHBzOi8vZ2l0aHViLmNvbS9hbWRqcy9hbWRqcy1hcGkvd2lraS9BTUQp5qih5Z2X5a6a5LmJ5pa55byP57uE57uH6LW35p2l44CCXHJcbiAqXHJcbiAqIEFNRCBBUEkg5YaF6YOo55qE566A5Y2V5LiN5a6M5YWo5a6e546w77yM6K+35b+955Wl44CC5Y+q5pyJ5b2TV2ViVXBsb2FkZXLooqvlkIjlubbmiJDkuIDkuKrmlofku7bnmoTml7blgJnmiY3kvJrlvJXlhaXjgIJcclxuICovXHJcbihmdW5jdGlvbiggcm9vdCwgZmFjdG9yeSApIHtcclxuICAgIHZhciBtb2R1bGVzID0ge30sXHJcblxyXG4gICAgICAgIC8vIOWGhemDqHJlcXVpcmUsIOeugOWNleS4jeWujOWFqOWunueOsOOAglxyXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbWRqcy9hbWRqcy1hcGkvd2lraS9yZXF1aXJlXHJcbiAgICAgICAgX3JlcXVpcmUgPSBmdW5jdGlvbiggZGVwcywgY2FsbGJhY2sgKSB7XHJcbiAgICAgICAgICAgIHZhciBhcmdzLCBsZW4sIGk7XHJcblxyXG4gICAgICAgICAgICAvLyDlpoLmnpxkZXBz5LiN5piv5pWw57uE77yM5YiZ55u05o6l6L+U5Zue5oyH5a6abW9kdWxlXHJcbiAgICAgICAgICAgIGlmICggdHlwZW9mIGRlcHMgPT09ICdzdHJpbmcnICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldE1vZHVsZSggZGVwcyApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYXJncyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yKCBsZW4gPSBkZXBzLmxlbmd0aCwgaSA9IDA7IGkgPCBsZW47IGkrKyApIHtcclxuICAgICAgICAgICAgICAgICAgICBhcmdzLnB1c2goIGdldE1vZHVsZSggZGVwc1sgaSBdICkgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2suYXBwbHkoIG51bGwsIGFyZ3MgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8vIOWGhemDqGRlZmluZe+8jOaaguaXtuS4jeaUr+aMgeS4jeaMh+WummlkLlxyXG4gICAgICAgIF9kZWZpbmUgPSBmdW5jdGlvbiggaWQsIGRlcHMsIGZhY3RvcnkgKSB7XHJcbiAgICAgICAgICAgIGlmICggYXJndW1lbnRzLmxlbmd0aCA9PT0gMiApIHtcclxuICAgICAgICAgICAgICAgIGZhY3RvcnkgPSBkZXBzO1xyXG4gICAgICAgICAgICAgICAgZGVwcyA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIF9yZXF1aXJlKCBkZXBzIHx8IFtdLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHNldE1vZHVsZSggaWQsIGZhY3RvcnksIGFyZ3VtZW50cyApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvLyDorr7nva5tb2R1bGUsIOWFvOWuuUNvbW1vbkpz5YaZ5rOV44CCXHJcbiAgICAgICAgc2V0TW9kdWxlID0gZnVuY3Rpb24oIGlkLCBmYWN0b3J5LCBhcmdzICkge1xyXG4gICAgICAgICAgICB2YXIgbW9kdWxlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cG9ydHM6IGZhY3RvcnlcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICByZXR1cm5lZDtcclxuXHJcbiAgICAgICAgICAgIGlmICggdHlwZW9mIGZhY3RvcnkgPT09ICdmdW5jdGlvbicgKSB7XHJcbiAgICAgICAgICAgICAgICBhcmdzLmxlbmd0aCB8fCAoYXJncyA9IFsgX3JlcXVpcmUsIG1vZHVsZS5leHBvcnRzLCBtb2R1bGUgXSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm5lZCA9IGZhY3RvcnkuYXBwbHkoIG51bGwsIGFyZ3MgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybmVkICE9PSB1bmRlZmluZWQgJiYgKG1vZHVsZS5leHBvcnRzID0gcmV0dXJuZWQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBtb2R1bGVzWyBpZCBdID0gbW9kdWxlLmV4cG9ydHM7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLy8g5qC55o2uaWTojrflj5Ztb2R1bGVcclxuICAgICAgICBnZXRNb2R1bGUgPSBmdW5jdGlvbiggaWQgKSB7XHJcbiAgICAgICAgICAgIHZhciBtb2R1bGUgPSBtb2R1bGVzWyBpZCBdIHx8IHJvb3RbIGlkIF07XHJcblxyXG4gICAgICAgICAgICBpZiAoICFtb2R1bGUgKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoICdgJyArIGlkICsgJ2AgaXMgdW5kZWZpbmVkJyApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbW9kdWxlO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8vIOWwhuaJgOaciW1vZHVsZXPvvIzlsIbot6/lvoRpZHPoo4XmjaLmiJDlr7nosaHjgIJcclxuICAgICAgICBleHBvcnRzVG8gPSBmdW5jdGlvbiggb2JqICkge1xyXG4gICAgICAgICAgICB2YXIga2V5LCBob3N0LCBwYXJ0cywgcGFydCwgbGFzdCwgdWNGaXJzdDtcclxuXHJcbiAgICAgICAgICAgIC8vIG1ha2UgdGhlIGZpcnN0IGNoYXJhY3RlciB1cHBlciBjYXNlLlxyXG4gICAgICAgICAgICB1Y0ZpcnN0ID0gZnVuY3Rpb24oIHN0ciApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdHIgJiYgKHN0ci5jaGFyQXQoIDAgKS50b1VwcGVyQ2FzZSgpICsgc3RyLnN1YnN0ciggMSApKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoIGtleSBpbiBtb2R1bGVzICkge1xyXG4gICAgICAgICAgICAgICAgaG9zdCA9IG9iajtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoICFtb2R1bGVzLmhhc093blByb3BlcnR5KCBrZXkgKSApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBwYXJ0cyA9IGtleS5zcGxpdCgnLycpO1xyXG4gICAgICAgICAgICAgICAgbGFzdCA9IHVjRmlyc3QoIHBhcnRzLnBvcCgpICk7XHJcblxyXG4gICAgICAgICAgICAgICAgd2hpbGUoIChwYXJ0ID0gdWNGaXJzdCggcGFydHMuc2hpZnQoKSApKSApIHtcclxuICAgICAgICAgICAgICAgICAgICBob3N0WyBwYXJ0IF0gPSBob3N0WyBwYXJ0IF0gfHwge307XHJcbiAgICAgICAgICAgICAgICAgICAgaG9zdCA9IGhvc3RbIHBhcnQgXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBob3N0WyBsYXN0IF0gPSBtb2R1bGVzWyBrZXkgXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG9iajtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBtYWtlRXhwb3J0ID0gZnVuY3Rpb24oIGRvbGxhciApIHtcclxuICAgICAgICAgICAgcm9vdC5fX2RvbGxhciA9IGRvbGxhcjtcclxuXHJcbiAgICAgICAgICAgIC8vIGV4cG9ydHMgZXZlcnkgbW9kdWxlLlxyXG4gICAgICAgICAgICByZXR1cm4gZXhwb3J0c1RvKCBmYWN0b3J5KCByb290LCBfZGVmaW5lLCBfcmVxdWlyZSApICk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgb3JpZ2luO1xyXG5cclxuICAgIGlmICggdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSAnb2JqZWN0JyApIHtcclxuXHJcbiAgICAgICAgLy8gRm9yIENvbW1vbkpTIGFuZCBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB3aGVyZSBhIHByb3BlciB3aW5kb3cgaXMgcHJlc2VudCxcclxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IG1ha2VFeHBvcnQoKTtcclxuICAgIH0gZWxzZSBpZiAoIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCApIHtcclxuXHJcbiAgICAgICAgLy8gQWxsb3cgdXNpbmcgdGhpcyBidWlsdCBsaWJyYXJ5IGFzIGFuIEFNRCBtb2R1bGVcclxuICAgICAgICAvLyBpbiBhbm90aGVyIHByb2plY3QuIFRoYXQgb3RoZXIgcHJvamVjdCB3aWxsIG9ubHlcclxuICAgICAgICAvLyBzZWUgdGhpcyBBTUQgY2FsbCwgbm90IHRoZSBpbnRlcm5hbCBtb2R1bGVzIGluXHJcbiAgICAgICAgLy8gdGhlIGNsb3N1cmUgYmVsb3cuXHJcbiAgICAgICAgZGVmaW5lKFsgJ2pxdWVyeScgXSwgbWFrZUV4cG9ydCApO1xyXG4gICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgLy8gQnJvd3NlciBnbG9iYWxzIGNhc2UuIEp1c3QgYXNzaWduIHRoZVxyXG4gICAgICAgIC8vIHJlc3VsdCB0byBhIHByb3BlcnR5IG9uIHRoZSBnbG9iYWwuXHJcbiAgICAgICAgb3JpZ2luID0gcm9vdC5XZWJVcGxvYWRlcjtcclxuICAgICAgICByb290LldlYlVwbG9hZGVyID0gbWFrZUV4cG9ydCgpO1xyXG4gICAgICAgIHJvb3QuV2ViVXBsb2FkZXIubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByb290LldlYlVwbG9hZGVyID0gb3JpZ2luO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn0pKCB3aW5kb3csIGZ1bmN0aW9uKCB3aW5kb3csIGRlZmluZSwgcmVxdWlyZSApIHtcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IGpRdWVyeSBvciBaZXB0b1xyXG4gICAgICogQHJlcXVpcmUgXCJqcXVlcnlcIlxyXG4gICAgICogQHJlcXVpcmUgXCJ6ZXB0b1wiXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgnZG9sbGFyLXRoaXJkJyxbXSxmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgcmVxID0gd2luZG93LnJlcXVpcmU7XHJcbiAgICAgICAgdmFyICQgPSB3aW5kb3cuX19kb2xsYXIgfHwgXHJcbiAgICAgICAgICAgIHdpbmRvdy5qUXVlcnkgfHwgXHJcbiAgICAgICAgICAgIHdpbmRvdy5aZXB0byB8fCBcclxuICAgICAgICAgICAgcmVxKCdqcXVlcnknKSB8fCBcclxuICAgICAgICAgICAgcmVxKCd6ZXB0bycpO1xyXG4gICAgXHJcbiAgICAgICAgaWYgKCAhJCApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdqUXVlcnkgb3IgWmVwdG8gbm90IGZvdW5kIScpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIHJldHVybiAkO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyBEb20g5pON5L2c55u45YWzXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgnZG9sbGFyJyxbXHJcbiAgICAgICAgJ2RvbGxhci10aGlyZCdcclxuICAgIF0sIGZ1bmN0aW9uKCBfICkge1xyXG4gICAgICAgIHJldHVybiBfO1xyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIEBmaWxlT3ZlcnZpZXcg5L2/55SoalF1ZXJ555qEUHJvbWlzZVxyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ3Byb21pc2UtdGhpcmQnLFtcclxuICAgICAgICAnZG9sbGFyJ1xyXG4gICAgXSwgZnVuY3Rpb24oICQgKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgRGVmZXJyZWQ6ICQuRGVmZXJyZWQsXHJcbiAgICAgICAgICAgIHdoZW46ICQud2hlbixcclxuICAgIFxyXG4gICAgICAgICAgICBpc1Byb21pc2U6IGZ1bmN0aW9uKCBhbnl0aGluZyApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhbnl0aGluZyAmJiB0eXBlb2YgYW55dGhpbmcudGhlbiA9PT0gJ2Z1bmN0aW9uJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyBQcm9taXNlL0ErXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgncHJvbWlzZScsW1xyXG4gICAgICAgICdwcm9taXNlLXRoaXJkJ1xyXG4gICAgXSwgZnVuY3Rpb24oIF8gKSB7XHJcbiAgICAgICAgcmV0dXJuIF87XHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyDln7rnoYDnsbvmlrnms5XjgIJcclxuICAgICAqL1xyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFdlYiBVcGxvYWRlcuWGhemDqOexu+eahOivpue7huivtOaYju+8jOS7peS4i+aPkOWPiueahOWKn+iDveexu++8jOmDveWPr+S7peWcqGBXZWJVcGxvYWRlcmDov5nkuKrlj5jph4/kuK3orr/pl67liLDjgIJcclxuICAgICAqXHJcbiAgICAgKiBBcyB5b3Uga25vdywgV2ViIFVwbG9hZGVy55qE5q+P5Liq5paH5Lu26YO95piv55So6L+HW0FNRF0oaHR0cHM6Ly9naXRodWIuY29tL2FtZGpzL2FtZGpzLWFwaS93aWtpL0FNRCnop4TojIPkuK3nmoRgZGVmaW5lYOe7hOe7h+i1t+adpeeahCwg5q+P5LiqTW9kdWxl6YO95Lya5pyJ5LiqbW9kdWxlIGlkLlxyXG4gICAgICog6buY6K6kbW9kdWxlIGlk5Li66K+l5paH5Lu255qE6Lev5b6E77yM6ICM5q2k6Lev5b6E5bCG5Lya6L2s5YyW5oiQ5ZCN5a2X56m66Ze05a2Y5pS+5ZyoV2ViVXBsb2FkZXLkuK3jgILlpoLvvJpcclxuICAgICAqXHJcbiAgICAgKiAqIG1vZHVsZSBgYmFzZWDvvJpXZWJVcGxvYWRlci5CYXNlXHJcbiAgICAgKiAqIG1vZHVsZSBgZmlsZWA6IFdlYlVwbG9hZGVyLkZpbGVcclxuICAgICAqICogbW9kdWxlIGBsaWIvZG5kYDogV2ViVXBsb2FkZXIuTGliLkRuZFxyXG4gICAgICogKiBtb2R1bGUgYHJ1bnRpbWUvaHRtbDUvZG5kYDogV2ViVXBsb2FkZXIuUnVudGltZS5IdG1sNS5EbmRcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICog5Lul5LiL5paH5qGj5Lit5a+557G755qE5L2/55So5Y+v6IO955yB55Wl5o6J5LqGYFdlYlVwbG9hZGVyYOWJjee8gOOAglxyXG4gICAgICogQG1vZHVsZSBXZWJVcGxvYWRlclxyXG4gICAgICogQHRpdGxlIFdlYlVwbG9hZGVyIEFQSeaWh+aho1xyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ2Jhc2UnLFtcclxuICAgICAgICAnZG9sbGFyJyxcclxuICAgICAgICAncHJvbWlzZSdcclxuICAgIF0sIGZ1bmN0aW9uKCAkLCBwcm9taXNlICkge1xyXG4gICAgXHJcbiAgICAgICAgdmFyIG5vb3AgPSBmdW5jdGlvbigpIHt9LFxyXG4gICAgICAgICAgICBjYWxsID0gRnVuY3Rpb24uY2FsbDtcclxuICAgIFxyXG4gICAgICAgIC8vIGh0dHA6Ly9qc3BlcmYuY29tL3VuY3Vycnl0aGlzXHJcbiAgICAgICAgLy8g5Y+N56eR6YeM5YyWXHJcbiAgICAgICAgZnVuY3Rpb24gdW5jdXJyeVRoaXMoIGZuICkge1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbC5hcHBseSggZm4sIGFyZ3VtZW50cyApO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGJpbmRGbiggZm4sIGNvbnRleHQgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSggY29udGV4dCwgYXJndW1lbnRzICk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlT2JqZWN0KCBwcm90byApIHtcclxuICAgICAgICAgICAgdmFyIGY7XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKCBPYmplY3QuY3JlYXRlICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5jcmVhdGUoIHByb3RvICk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmID0gZnVuY3Rpb24oKSB7fTtcclxuICAgICAgICAgICAgICAgIGYucHJvdG90eXBlID0gcHJvdG87XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGYoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5Z+656GA57G777yM5o+Q5L6b5LiA5Lqb566A5Y2V5bi455So55qE5pa55rOV44CCXHJcbiAgICAgICAgICogQGNsYXNzIEJhc2VcclxuICAgICAgICAgKi9cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge1N0cmluZ30gdmVyc2lvbiDlvZPliY3niYjmnKzlj7fjgIJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHZlcnNpb246ICcwLjEuNicsXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7alF1ZXJ5fFplcHRvfSAkIOW8leeUqOS+nei1lueahGpRdWVyeeaIluiAhVplcHRv5a+56LGh44CCXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAkOiAkLFxyXG4gICAgXHJcbiAgICAgICAgICAgIERlZmVycmVkOiBwcm9taXNlLkRlZmVycmVkLFxyXG4gICAgXHJcbiAgICAgICAgICAgIGlzUHJvbWlzZTogcHJvbWlzZS5pc1Byb21pc2UsXHJcbiAgICBcclxuICAgICAgICAgICAgd2hlbjogcHJvbWlzZS53aGVuLFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24gIOeugOWNleeahOa1j+iniOWZqOajgOafpee7k+aenOOAglxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiAqIGB3ZWJraXRgICB3ZWJraXTniYjmnKzlj7fvvIzlpoLmnpzmtY/op4jlmajkuLrpnZ53ZWJraXTlhoXmoLjvvIzmraTlsZ7mgKfkuLpgdW5kZWZpbmVkYOOAglxyXG4gICAgICAgICAgICAgKiAqIGBjaHJvbWVgICBjaHJvbWXmtY/op4jlmajniYjmnKzlj7fvvIzlpoLmnpzmtY/op4jlmajkuLpjaHJvbWXvvIzmraTlsZ7mgKfkuLpgdW5kZWZpbmVkYOOAglxyXG4gICAgICAgICAgICAgKiAqIGBpZWAgIGll5rWP6KeI5Zmo54mI5pys5Y+377yM5aaC5p6c5rWP6KeI5Zmo5Li66Z2eaWXvvIzmraTlsZ7mgKfkuLpgdW5kZWZpbmVkYOOAgioq5pqC5LiN5pSv5oyBaWUxMCsqKlxyXG4gICAgICAgICAgICAgKiAqIGBmaXJlZm94YCAgZmlyZWZveOa1j+iniOWZqOeJiOacrOWPt++8jOWmguaenOa1j+iniOWZqOS4uumdnmZpcmVmb3jvvIzmraTlsZ7mgKfkuLpgdW5kZWZpbmVkYOOAglxyXG4gICAgICAgICAgICAgKiAqIGBzYWZhcmlgICBzYWZhcmnmtY/op4jlmajniYjmnKzlj7fvvIzlpoLmnpzmtY/op4jlmajkuLrpnZ5zYWZhcmnvvIzmraTlsZ7mgKfkuLpgdW5kZWZpbmVkYOOAglxyXG4gICAgICAgICAgICAgKiAqIGBvcGVyYWAgIG9wZXJh5rWP6KeI5Zmo54mI5pys5Y+377yM5aaC5p6c5rWP6KeI5Zmo5Li66Z2eb3BlcmHvvIzmraTlsZ7mgKfkuLpgdW5kZWZpbmVkYOOAglxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge09iamVjdH0gW2Jyb3dzZXJdXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBicm93c2VyOiAoZnVuY3Rpb24oIHVhICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJldCA9IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgIHdlYmtpdCA9IHVhLm1hdGNoKCAvV2ViS2l0XFwvKFtcXGQuXSspLyApLFxyXG4gICAgICAgICAgICAgICAgICAgIGNocm9tZSA9IHVhLm1hdGNoKCAvQ2hyb21lXFwvKFtcXGQuXSspLyApIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVhLm1hdGNoKCAvQ3JpT1NcXC8oW1xcZC5dKykvICksXHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZSA9IHVhLm1hdGNoKCAvTVNJRVxccyhbXFxkXFwuXSspLyApIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVhLm1hdGNoKCAvKD86dHJpZGVudCkoPzouKnJ2OihbXFx3Ll0rKSk/L2kgKSxcclxuICAgICAgICAgICAgICAgICAgICBmaXJlZm94ID0gdWEubWF0Y2goIC9GaXJlZm94XFwvKFtcXGQuXSspLyApLFxyXG4gICAgICAgICAgICAgICAgICAgIHNhZmFyaSA9IHVhLm1hdGNoKCAvU2FmYXJpXFwvKFtcXGQuXSspLyApLFxyXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhID0gdWEubWF0Y2goIC9PUFJcXC8oW1xcZC5dKykvICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHdlYmtpdCAmJiAocmV0LndlYmtpdCA9IHBhcnNlRmxvYXQoIHdlYmtpdFsgMSBdICkpO1xyXG4gICAgICAgICAgICAgICAgY2hyb21lICYmIChyZXQuY2hyb21lID0gcGFyc2VGbG9hdCggY2hyb21lWyAxIF0gKSk7XHJcbiAgICAgICAgICAgICAgICBpZSAmJiAocmV0LmllID0gcGFyc2VGbG9hdCggaWVbIDEgXSApKTtcclxuICAgICAgICAgICAgICAgIGZpcmVmb3ggJiYgKHJldC5maXJlZm94ID0gcGFyc2VGbG9hdCggZmlyZWZveFsgMSBdICkpO1xyXG4gICAgICAgICAgICAgICAgc2FmYXJpICYmIChyZXQuc2FmYXJpID0gcGFyc2VGbG9hdCggc2FmYXJpWyAxIF0gKSk7XHJcbiAgICAgICAgICAgICAgICBvcGVyYSAmJiAocmV0Lm9wZXJhID0gcGFyc2VGbG9hdCggb3BlcmFbIDEgXSApKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgICAgICAgfSkoIG5hdmlnYXRvci51c2VyQWdlbnQgKSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQGRlc2NyaXB0aW9uICDmk43kvZzns7vnu5/mo4Dmn6Xnu5PmnpzjgIJcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogKiBgYW5kcm9pZGAgIOWmguaenOWcqGFuZHJvaWTmtY/op4jlmajnjq/looPkuIvvvIzmraTlgLzkuLrlr7nlupTnmoRhbmRyb2lk54mI5pys5Y+377yM5ZCm5YiZ5Li6YHVuZGVmaW5lZGDjgIJcclxuICAgICAgICAgICAgICogKiBgaW9zYCDlpoLmnpzlnKhpb3PmtY/op4jlmajnjq/looPkuIvvvIzmraTlgLzkuLrlr7nlupTnmoRpb3PniYjmnKzlj7fvvIzlkKbliJnkuLpgdW5kZWZpbmVkYOOAglxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge09iamVjdH0gW29zXVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgb3M6IChmdW5jdGlvbiggdWEgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmV0ID0ge30sXHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBvc3ggPSAhIXVhLm1hdGNoKCAvXFwoTWFjaW50b3NoXFw7IEludGVsIC8gKSxcclxuICAgICAgICAgICAgICAgICAgICBhbmRyb2lkID0gdWEubWF0Y2goIC8oPzpBbmRyb2lkKTs/W1xcc1xcL10rKFtcXGQuXSspPy8gKSxcclxuICAgICAgICAgICAgICAgICAgICBpb3MgPSB1YS5tYXRjaCggLyg/OmlQYWR8aVBvZHxpUGhvbmUpLipPU1xccyhbXFxkX10rKS8gKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gb3N4ICYmIChyZXQub3N4ID0gdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBhbmRyb2lkICYmIChyZXQuYW5kcm9pZCA9IHBhcnNlRmxvYXQoIGFuZHJvaWRbIDEgXSApKTtcclxuICAgICAgICAgICAgICAgIGlvcyAmJiAocmV0LmlvcyA9IHBhcnNlRmxvYXQoIGlvc1sgMSBdLnJlcGxhY2UoIC9fL2csICcuJyApICkpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgICAgICAgICB9KSggbmF2aWdhdG9yLnVzZXJBZ2VudCApLFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiDlrp7njrDnsbvkuI7nsbvkuYvpl7TnmoTnu6fmib/jgIJcclxuICAgICAgICAgICAgICogQG1ldGhvZCBpbmhlcml0c1xyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBCYXNlLmluaGVyaXRzKCBzdXBlciApID0+IGNoaWxkXHJcbiAgICAgICAgICAgICAqIEBncmFtbWFyIEJhc2UuaW5oZXJpdHMoIHN1cGVyLCBwcm90b3MgKSA9PiBjaGlsZFxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBCYXNlLmluaGVyaXRzKCBzdXBlciwgcHJvdG9zLCBzdGF0aWNzICkgPT4gY2hpbGRcclxuICAgICAgICAgICAgICogQHBhcmFtICB7Q2xhc3N9IHN1cGVyIOeItuexu1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0gIHtPYmplY3QgfCBGdW5jdGlvbn0gW3Byb3Rvc10g5a2Q57G75oiW6ICF5a+56LGh44CC5aaC5p6c5a+56LGh5Lit5YyF5ZCrY29uc3RydWN0b3LvvIzlrZDnsbvlsIbmmK/nlKjmraTlsZ7mgKflgLzjgIJcclxuICAgICAgICAgICAgICogQHBhcmFtICB7RnVuY3Rpb259IFtwcm90b3MuY29uc3RydWN0b3JdIOWtkOexu+aehOmAoOWZqO+8jOS4jeaMh+WumueahOivneWwhuWIm+W7uuS4quS4tOaXtueahOebtOaOpeaJp+ihjOeItuexu+aehOmAoOWZqOeahOaWueazleOAglxyXG4gICAgICAgICAgICAgKiBAcGFyYW0gIHtPYmplY3R9IFtzdGF0aWNzXSDpnZnmgIHlsZ7mgKfmiJbmlrnms5XjgIJcclxuICAgICAgICAgICAgICogQHJldHVybiB7Q2xhc3N9IOi/lOWbnuWtkOexu+OAglxyXG4gICAgICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAgICAgKiBmdW5jdGlvbiBQZXJzb24oKSB7XHJcbiAgICAgICAgICAgICAqICAgICBjb25zb2xlLmxvZyggJ1N1cGVyJyApO1xyXG4gICAgICAgICAgICAgKiB9XHJcbiAgICAgICAgICAgICAqIFBlcnNvbi5wcm90b3R5cGUuaGVsbG8gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICogICAgIGNvbnNvbGUubG9nKCAnaGVsbG8nICk7XHJcbiAgICAgICAgICAgICAqIH07XHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIHZhciBNYW5hZ2VyID0gQmFzZS5pbmhlcml0cyggUGVyc29uLCB7XHJcbiAgICAgICAgICAgICAqICAgICB3b3JsZDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAqICAgICAgICAgY29uc29sZS5sb2coICdXb3JsZCcgKTtcclxuICAgICAgICAgICAgICogICAgIH1cclxuICAgICAgICAgICAgICogfSk7XHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIC8vIOWboOS4uuayoeacieaMh+WumuaehOmAoOWZqO+8jOeItuexu+eahOaehOmAoOWZqOWwhuS8muaJp+ihjOOAglxyXG4gICAgICAgICAgICAgKiB2YXIgaW5zdGFuY2UgPSBuZXcgTWFuYWdlcigpOyAgICAvLyA9PiBTdXBlclxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiAvLyDnu6fmib/lrZDniLbnsbvnmoTmlrnms5VcclxuICAgICAgICAgICAgICogaW5zdGFuY2UuaGVsbG8oKTsgICAgLy8gPT4gaGVsbG9cclxuICAgICAgICAgICAgICogaW5zdGFuY2Uud29ybGQoKTsgICAgLy8gPT4gV29ybGRcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogLy8g5a2Q57G755qEX19zdXBlcl9f5bGe5oCn5oyH5ZCR54i257G7XHJcbiAgICAgICAgICAgICAqIGNvbnNvbGUubG9nKCBNYW5hZ2VyLl9fc3VwZXJfXyA9PT0gUGVyc29uICk7ICAgIC8vID0+IHRydWVcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGluaGVyaXRzOiBmdW5jdGlvbiggU3VwZXIsIHByb3Rvcywgc3RhdGljUHJvdG9zICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIHR5cGVvZiBwcm90b3MgPT09ICdmdW5jdGlvbicgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQgPSBwcm90b3M7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvdG9zID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHByb3RvcyAmJiBwcm90b3MuaGFzT3duUHJvcGVydHkoJ2NvbnN0cnVjdG9yJykgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQgPSBwcm90b3MuY29uc3RydWN0b3I7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBTdXBlci5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g5aSN5Yi26Z2Z5oCB5pa55rOVXHJcbiAgICAgICAgICAgICAgICAkLmV4dGVuZCggdHJ1ZSwgY2hpbGQsIFN1cGVyLCBzdGF0aWNQcm90b3MgfHwge30gKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLyoganNoaW50IGNhbWVsY2FzZTogZmFsc2UgKi9cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g6K6p5a2Q57G755qEX19zdXBlcl9f5bGe5oCn5oyH5ZCR54i257G744CCXHJcbiAgICAgICAgICAgICAgICBjaGlsZC5fX3N1cGVyX18gPSBTdXBlci5wcm90b3R5cGU7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOaehOW7uuWOn+Wei++8jOa3u+WKoOWOn+Wei+aWueazleaIluWxnuaAp+OAglxyXG4gICAgICAgICAgICAgICAgLy8g5pqC5pe255SoT2JqZWN0LmNyZWF0ZeWunueOsOOAglxyXG4gICAgICAgICAgICAgICAgY2hpbGQucHJvdG90eXBlID0gY3JlYXRlT2JqZWN0KCBTdXBlci5wcm90b3R5cGUgKTtcclxuICAgICAgICAgICAgICAgIHByb3RvcyAmJiAkLmV4dGVuZCggdHJ1ZSwgY2hpbGQucHJvdG90eXBlLCBwcm90b3MgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiDkuIDkuKrkuI3lgZrku7vkvZXkuovmg4XnmoTmlrnms5XjgILlj6/ku6XnlKjmnaXotYvlgLznu5npu5jorqTnmoRjYWxsYmFjay5cclxuICAgICAgICAgICAgICogQG1ldGhvZCBub29wXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBub29wOiBub29wLFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiDov5Tlm57kuIDkuKrmlrDnmoTmlrnms5XvvIzmraTmlrnms5XlsIblt7LmjIflrprnmoRgY29udGV4dGDmnaXmiafooYzjgIJcclxuICAgICAgICAgICAgICogQGdyYW1tYXIgQmFzZS5iaW5kRm4oIGZuLCBjb250ZXh0ICkgPT4gRnVuY3Rpb25cclxuICAgICAgICAgICAgICogQG1ldGhvZCBiaW5kRm5cclxuICAgICAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgICAgICogdmFyIGRvU29tZXRoaW5nID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAqICAgICAgICAgY29uc29sZS5sb2coIHRoaXMubmFtZSApO1xyXG4gICAgICAgICAgICAgKiAgICAgfSxcclxuICAgICAgICAgICAgICogICAgIG9iaiA9IHtcclxuICAgICAgICAgICAgICogICAgICAgICBuYW1lOiAnT2JqZWN0IE5hbWUnXHJcbiAgICAgICAgICAgICAqICAgICB9LFxyXG4gICAgICAgICAgICAgKiAgICAgYWxpYXNGbiA9IEJhc2UuYmluZCggZG9Tb21ldGhpbmcsIG9iaiApO1xyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiAgYWxpYXNGbigpOyAgICAvLyA9PiBPYmplY3QgTmFtZVxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgYmluZEZuOiBiaW5kRm4sXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOW8leeUqENvbnNvbGUubG9n5aaC5p6c5a2Y5Zyo55qE6K+d77yM5ZCm5YiZ5byV55So5LiA5LiqW+epuuWHveaVsG5vb3BdKCNXZWJVcGxvYWRlcjpCYXNlLm5vb3Ap44CCXHJcbiAgICAgICAgICAgICAqIEBncmFtbWFyIEJhc2UubG9nKCBhcmdzLi4uICkgPT4gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAqIEBtZXRob2QgbG9nXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBsb2c6IChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGlmICggd2luZG93LmNvbnNvbGUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJpbmRGbiggY29uc29sZS5sb2csIGNvbnNvbGUgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBub29wO1xyXG4gICAgICAgICAgICB9KSgpLFxyXG4gICAgXHJcbiAgICAgICAgICAgIG5leHRUaWNrOiAoZnVuY3Rpb24oKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiggY2IgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggY2IsIDEgKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIEBidWcg5b2T5rWP6KeI5Zmo5LiN5Zyo5b2T5YmN56qX5Y+j5pe25bCx5YGc5LqG44CCXHJcbiAgICAgICAgICAgICAgICAvLyB2YXIgbmV4dCA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcclxuICAgICAgICAgICAgICAgIC8vICAgICB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgd2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxyXG4gICAgICAgICAgICAgICAgLy8gICAgIGZ1bmN0aW9uKCBjYiApIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoIGNiLCAxMDAwIC8gNjAgKTtcclxuICAgICAgICAgICAgICAgIC8vICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyAvLyBmaXg6IFVuY2F1Z2h0IFR5cGVFcnJvcjogSWxsZWdhbCBpbnZvY2F0aW9uXHJcbiAgICAgICAgICAgICAgICAvLyByZXR1cm4gYmluZEZuKCBuZXh0LCB3aW5kb3cgKTtcclxuICAgICAgICAgICAgfSkoKSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICog6KKrW3VuY3Vycnl0aGlzXShodHRwOi8vd3d3LjJhbGl0eS5jb20vMjAxMS8xMS91bmN1cnJ5aW5nLXRoaXMuaHRtbCnnmoTmlbDnu4RzbGljZeaWueazleOAglxyXG4gICAgICAgICAgICAgKiDlsIbnlKjmnaXlsIbpnZ7mlbDnu4Tlr7nosaHovazljJbmiJDmlbDnu4Tlr7nosaHjgIJcclxuICAgICAgICAgICAgICogQGdyYW1tYXIgQmFzZS5zbGljZSggdGFyZ2V0LCBzdGFydFssIGVuZF0gKSA9PiBBcnJheVxyXG4gICAgICAgICAgICAgKiBAbWV0aG9kIHNsaWNlXHJcbiAgICAgICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICAgICAqIGZ1bmN0aW9uIGRvU29tdGhpbmcoKSB7XHJcbiAgICAgICAgICAgICAqICAgICB2YXIgYXJncyA9IEJhc2Uuc2xpY2UoIGFyZ3VtZW50cywgMSApO1xyXG4gICAgICAgICAgICAgKiAgICAgY29uc29sZS5sb2coIGFyZ3MgKTtcclxuICAgICAgICAgICAgICogfVxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBkb1NvbXRoaW5nKCAnaWdub3JlZCcsICdhcmcyJywgJ2FyZzMnICk7ICAgIC8vID0+IEFycmF5IFtcImFyZzJcIiwgXCJhcmczXCJdXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBzbGljZTogdW5jdXJyeVRoaXMoIFtdLnNsaWNlICksXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOeUn+aIkOWUr+S4gOeahElEXHJcbiAgICAgICAgICAgICAqIEBtZXRob2QgZ3VpZFxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBCYXNlLmd1aWQoKSA9PiBTdHJpbmdcclxuICAgICAgICAgICAgICogQGdyYW1tYXIgQmFzZS5ndWlkKCBwcmVmeCApID0+IFN0cmluZ1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZ3VpZDogKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvdW50ZXIgPSAwO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oIHByZWZpeCApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZ3VpZCA9ICgrbmV3IERhdGUoKSkudG9TdHJpbmcoIDMyICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAwO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICggOyBpIDwgNTsgaSsrICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBndWlkICs9IE1hdGguZmxvb3IoIE1hdGgucmFuZG9tKCkgKiA2NTUzNSApLnRvU3RyaW5nKCAzMiApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAocHJlZml4IHx8ICd3dV8nKSArIGd1aWQgKyAoY291bnRlcisrKS50b1N0cmluZyggMzIgKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pKCksXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOagvOW8j+WMluaWh+S7tuWkp+Wwjywg6L6T5Ye65oiQ5bim5Y2V5L2N55qE5a2X56ym5LiyXHJcbiAgICAgICAgICAgICAqIEBtZXRob2QgZm9ybWF0U2l6ZVxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBCYXNlLmZvcm1hdFNpemUoIHNpemUgKSA9PiBTdHJpbmdcclxuICAgICAgICAgICAgICogQGdyYW1tYXIgQmFzZS5mb3JtYXRTaXplKCBzaXplLCBwb2ludExlbmd0aCApID0+IFN0cmluZ1xyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBCYXNlLmZvcm1hdFNpemUoIHNpemUsIHBvaW50TGVuZ3RoLCB1bml0cyApID0+IFN0cmluZ1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc2l6ZSDmlofku7blpKflsI9cclxuICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IFtwb2ludExlbmd0aD0yXSDnsr7noa7liLDnmoTlsI/mlbDngrnmlbDjgIJcclxuICAgICAgICAgICAgICogQHBhcmFtIHtBcnJheX0gW3VuaXRzPVsgJ0InLCAnSycsICdNJywgJ0cnLCAnVEInIF1dIOWNleS9jeaVsOe7hOOAguS7juWtl+iKgu+8jOWIsOWNg+Wtl+iKgu+8jOS4gOebtOW+gOS4iuaMh+WumuOAguWmguaenOWNleS9jeaVsOe7hOmHjOmdouWPquaMh+WumuS6huWIsOS6hkso5Y2D5a2X6IqCKe+8jOWQjOaXtuaWh+S7tuWkp+Wwj+Wkp+S6jk0sIOatpOaWueazleeahOi+k+WHuuWwhui/mOaYr+aYvuekuuaIkOWkmuWwkUsuXHJcbiAgICAgICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICAgICAqIGNvbnNvbGUubG9nKCBCYXNlLmZvcm1hdFNpemUoIDEwMCApICk7ICAgIC8vID0+IDEwMEJcclxuICAgICAgICAgICAgICogY29uc29sZS5sb2coIEJhc2UuZm9ybWF0U2l6ZSggMTAyNCApICk7ICAgIC8vID0+IDEuMDBLXHJcbiAgICAgICAgICAgICAqIGNvbnNvbGUubG9nKCBCYXNlLmZvcm1hdFNpemUoIDEwMjQsIDAgKSApOyAgICAvLyA9PiAxS1xyXG4gICAgICAgICAgICAgKiBjb25zb2xlLmxvZyggQmFzZS5mb3JtYXRTaXplKCAxMDI0ICogMTAyNCApICk7ICAgIC8vID0+IDEuMDBNXHJcbiAgICAgICAgICAgICAqIGNvbnNvbGUubG9nKCBCYXNlLmZvcm1hdFNpemUoIDEwMjQgKiAxMDI0ICogMTAyNCApICk7ICAgIC8vID0+IDEuMDBHXHJcbiAgICAgICAgICAgICAqIGNvbnNvbGUubG9nKCBCYXNlLmZvcm1hdFNpemUoIDEwMjQgKiAxMDI0ICogMTAyNCwgMCwgWydCJywgJ0tCJywgJ01CJ10gKSApOyAgICAvLyA9PiAxMDI0TUJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGZvcm1hdFNpemU6IGZ1bmN0aW9uKCBzaXplLCBwb2ludExlbmd0aCwgdW5pdHMgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdW5pdDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdW5pdHMgPSB1bml0cyB8fCBbICdCJywgJ0snLCAnTScsICdHJywgJ1RCJyBdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoICh1bml0ID0gdW5pdHMuc2hpZnQoKSkgJiYgc2l6ZSA+IDEwMjQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZSA9IHNpemUgLyAxMDI0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHVuaXQgPT09ICdCJyA/IHNpemUgOiBzaXplLnRvRml4ZWQoIHBvaW50TGVuZ3RoIHx8IDIgKSkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bml0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiDkuovku7blpITnkIbnsbvvvIzlj6/ku6Xni6znq4vkvb/nlKjvvIzkuZ/lj6/ku6XmianlsZXnu5nlr7nosaHkvb/nlKjjgIJcclxuICAgICAqIEBmaWxlT3ZlcnZpZXcgTWVkaWF0b3JcclxuICAgICAqL1xyXG4gICAgZGVmaW5lKCdtZWRpYXRvcicsW1xyXG4gICAgICAgICdiYXNlJ1xyXG4gICAgXSwgZnVuY3Rpb24oIEJhc2UgKSB7XHJcbiAgICAgICAgdmFyICQgPSBCYXNlLiQsXHJcbiAgICAgICAgICAgIHNsaWNlID0gW10uc2xpY2UsXHJcbiAgICAgICAgICAgIHNlcGFyYXRvciA9IC9cXHMrLyxcclxuICAgICAgICAgICAgcHJvdG9zO1xyXG4gICAgXHJcbiAgICAgICAgLy8g5qC55o2u5p2h5Lu26L+H5ruk5Ye65LqL5Lu2aGFuZGxlcnMuXHJcbiAgICAgICAgZnVuY3Rpb24gZmluZEhhbmRsZXJzKCBhcnIsIG5hbWUsIGNhbGxiYWNrLCBjb250ZXh0ICkge1xyXG4gICAgICAgICAgICByZXR1cm4gJC5ncmVwKCBhcnIsIGZ1bmN0aW9uKCBoYW5kbGVyICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZXIgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgKCFuYW1lIHx8IGhhbmRsZXIuZSA9PT0gbmFtZSkgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgKCFjYWxsYmFjayB8fCBoYW5kbGVyLmNiID09PSBjYWxsYmFjayB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLmNiLl9jYiA9PT0gY2FsbGJhY2spICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICghY29udGV4dCB8fCBoYW5kbGVyLmN0eCA9PT0gY29udGV4dCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGVhY2hFdmVudCggZXZlbnRzLCBjYWxsYmFjaywgaXRlcmF0b3IgKSB7XHJcbiAgICAgICAgICAgIC8vIOS4jeaUr+aMgeWvueixoe+8jOWPquaUr+aMgeWkmuS4qmV2ZW5055So56m65qC86ZqU5byAXHJcbiAgICAgICAgICAgICQuZWFjaCggKGV2ZW50cyB8fCAnJykuc3BsaXQoIHNlcGFyYXRvciApLCBmdW5jdGlvbiggXywga2V5ICkge1xyXG4gICAgICAgICAgICAgICAgaXRlcmF0b3IoIGtleSwgY2FsbGJhY2sgKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gdHJpZ2dlckhhbmRlcnMoIGV2ZW50cywgYXJncyApIHtcclxuICAgICAgICAgICAgdmFyIHN0b3BlZCA9IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgaSA9IC0xLFxyXG4gICAgICAgICAgICAgICAgbGVuID0gZXZlbnRzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIGhhbmRsZXI7XHJcbiAgICBcclxuICAgICAgICAgICAgd2hpbGUgKCArK2kgPCBsZW4gKSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVyID0gZXZlbnRzWyBpIF07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmICggaGFuZGxlci5jYi5hcHBseSggaGFuZGxlci5jdHgyLCBhcmdzICkgPT09IGZhbHNlICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0b3BlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gIXN0b3BlZDtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBwcm90b3MgPSB7XHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOe7keWumuS6i+S7tuOAglxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBgY2FsbGJhY2tg5pa55rOV5Zyo5omn6KGM5pe277yMYXJndW1lbnRz5bCG5Lya5p2l5rqQ5LqOdHJpZ2dlcueahOaXtuWAmeaQuuW4pueahOWPguaVsOOAguWmglxyXG4gICAgICAgICAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgICAgICAgICAqIHZhciBvYmogPSB7fTtcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogLy8g5L2/5b6Xb2Jq5pyJ5LqL5Lu26KGM5Li6XHJcbiAgICAgICAgICAgICAqIE1lZGlhdG9yLmluc3RhbGxUbyggb2JqICk7XHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIG9iai5vbiggJ3Rlc3RhJywgZnVuY3Rpb24oIGFyZzEsIGFyZzIgKSB7XHJcbiAgICAgICAgICAgICAqICAgICBjb25zb2xlLmxvZyggYXJnMSwgYXJnMiApOyAvLyA9PiAnYXJnMScsICdhcmcyJ1xyXG4gICAgICAgICAgICAgKiB9KTtcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogb2JqLnRyaWdnZXIoICd0ZXN0YScsICdhcmcxJywgJ2FyZzInICk7XHJcbiAgICAgICAgICAgICAqIGBgYFxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiDlpoLmnpxgY2FsbGJhY2tg5Lit77yM5p+Q5LiA5Liq5pa55rOVYHJldHVybiBmYWxzZWDkuobvvIzliJnlkI7nu63nmoTlhbbku5ZgY2FsbGJhY2tg6YO95LiN5Lya6KKr5omn6KGM5Yiw44CCXHJcbiAgICAgICAgICAgICAqIOWIh+S8muW9seWTjeWIsGB0cmlnZ2VyYOaWueazleeahOi/lOWbnuWAvO+8jOS4umBmYWxzZWDjgIJcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogYG9uYOi/mOWPr+S7peeUqOadpea3u+WKoOS4gOS4queJueauiuS6i+S7tmBhbGxgLCDov5nmoLfmiYDmnInnmoTkuovku7bop6blj5Hpg73kvJrlk43lupTliLDjgILlkIzml7bmraTnsbtgY2FsbGJhY2tg5Lit55qEYXJndW1lbnRz5pyJ5LiA5Liq5LiN5ZCM5aSE77yMXHJcbiAgICAgICAgICAgICAqIOWwseaYr+esrOS4gOS4quWPguaVsOS4umB0eXBlYO+8jOiusOW9leW9k+WJjeaYr+S7gOS5iOS6i+S7tuWcqOinpuWPkeOAguatpOexu2BjYWxsYmFja2DnmoTkvJjlhYjnuqfmr5TohJrkvY7vvIzkvJrlho3mraPluLhgY2FsbGJhY2tg5omn6KGM5a6M5ZCO6Kem5Y+R44CCXHJcbiAgICAgICAgICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAgICAgICAgICogb2JqLm9uKCAnYWxsJywgZnVuY3Rpb24oIHR5cGUsIGFyZzEsIGFyZzIgKSB7XHJcbiAgICAgICAgICAgICAqICAgICBjb25zb2xlLmxvZyggdHlwZSwgYXJnMSwgYXJnMiApOyAvLyA9PiAndGVzdGEnLCAnYXJnMScsICdhcmcyJ1xyXG4gICAgICAgICAgICAgKiB9KTtcclxuICAgICAgICAgICAgICogYGBgXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIEBtZXRob2Qgb25cclxuICAgICAgICAgICAgICogQGdyYW1tYXIgb24oIG5hbWUsIGNhbGxiYWNrWywgY29udGV4dF0gKSA9PiBzZWxmXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSAge1N0cmluZ30gICBuYW1lICAgICDkuovku7blkI3vvIzmlK/mjIHlpJrkuKrkuovku7bnlKjnqbrmoLzpmpTlvIBcclxuICAgICAgICAgICAgICogQHBhcmFtICB7RnVuY3Rpb259IGNhbGxiYWNrIOS6i+S7tuWkhOeQhuWZqFxyXG4gICAgICAgICAgICAgKiBAcGFyYW0gIHtPYmplY3R9ICAgW2NvbnRleHRdICDkuovku7blpITnkIblmajnmoTkuIrkuIvmlofjgIJcclxuICAgICAgICAgICAgICogQHJldHVybiB7c2VsZn0g6L+U5Zue6Ieq6Lqr77yM5pa55L6/6ZO+5byPXHJcbiAgICAgICAgICAgICAqIEBjaGFpbmFibGVcclxuICAgICAgICAgICAgICogQGNsYXNzIE1lZGlhdG9yXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBvbjogZnVuY3Rpb24oIG5hbWUsIGNhbGxiYWNrLCBjb250ZXh0ICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICBzZXQ7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmICggIWNhbGxiYWNrICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBzZXQgPSB0aGlzLl9ldmVudHMgfHwgKHRoaXMuX2V2ZW50cyA9IFtdKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZWFjaEV2ZW50KCBuYW1lLCBjYWxsYmFjaywgZnVuY3Rpb24oIG5hbWUsIGNhbGxiYWNrICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBoYW5kbGVyID0geyBlOiBuYW1lIH07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLmNiID0gY2FsbGJhY2s7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlci5jdHggPSBjb250ZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXIuY3R4MiA9IGNvbnRleHQgfHwgbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlci5pZCA9IHNldC5sZW5ndGg7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBzZXQucHVzaCggaGFuZGxlciApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiDnu5Hlrprkuovku7bvvIzkuJTlvZNoYW5kbGVy5omn6KGM5a6M5ZCO77yM6Ieq5Yqo6Kej6Zmk57uR5a6a44CCXHJcbiAgICAgICAgICAgICAqIEBtZXRob2Qgb25jZVxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBvbmNlKCBuYW1lLCBjYWxsYmFja1ssIGNvbnRleHRdICkgPT4gc2VsZlxyXG4gICAgICAgICAgICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgbmFtZSAgICAg5LqL5Lu25ZCNXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBjYWxsYmFjayDkuovku7blpITnkIblmahcclxuICAgICAgICAgICAgICogQHBhcmFtICB7T2JqZWN0fSAgIFtjb250ZXh0XSAg5LqL5Lu25aSE55CG5Zmo55qE5LiK5LiL5paH44CCXHJcbiAgICAgICAgICAgICAqIEByZXR1cm4ge3NlbGZ9IOi/lOWbnuiHqui6q++8jOaWueS+v+mTvuW8j1xyXG4gICAgICAgICAgICAgKiBAY2hhaW5hYmxlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBvbmNlOiBmdW5jdGlvbiggbmFtZSwgY2FsbGJhY2ssIGNvbnRleHQgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoICFjYWxsYmFjayApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGVhY2hFdmVudCggbmFtZSwgY2FsbGJhY2ssIGZ1bmN0aW9uKCBuYW1lLCBjYWxsYmFjayApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb25jZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUub2ZmKCBuYW1lLCBvbmNlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2suYXBwbHkoIGNvbnRleHQgfHwgbWUsIGFyZ3VtZW50cyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgb25jZS5fY2IgPSBjYWxsYmFjaztcclxuICAgICAgICAgICAgICAgICAgICBtZS5vbiggbmFtZSwgb25jZSwgY29udGV4dCApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBtZTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICog6Kej6Zmk5LqL5Lu257uR5a6aXHJcbiAgICAgICAgICAgICAqIEBtZXRob2Qgb2ZmXHJcbiAgICAgICAgICAgICAqIEBncmFtbWFyIG9mZiggW25hbWVbLCBjYWxsYmFja1ssIGNvbnRleHRdIF0gXSApID0+IHNlbGZcclxuICAgICAgICAgICAgICogQHBhcmFtICB7U3RyaW5nfSAgIFtuYW1lXSAgICAg5LqL5Lu25ZCNXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIOS6i+S7tuWkhOeQhuWZqFxyXG4gICAgICAgICAgICAgKiBAcGFyYW0gIHtPYmplY3R9ICAgW2NvbnRleHRdICDkuovku7blpITnkIblmajnmoTkuIrkuIvmlofjgIJcclxuICAgICAgICAgICAgICogQHJldHVybiB7c2VsZn0g6L+U5Zue6Ieq6Lqr77yM5pa55L6/6ZO+5byPXHJcbiAgICAgICAgICAgICAqIEBjaGFpbmFibGVcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIG9mZjogZnVuY3Rpb24oIG5hbWUsIGNiLCBjdHggKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoICFldmVudHMgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmICggIW5hbWUgJiYgIWNiICYmICFjdHggKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGVhY2hFdmVudCggbmFtZSwgY2IsIGZ1bmN0aW9uKCBuYW1lLCBjYiApIHtcclxuICAgICAgICAgICAgICAgICAgICAkLmVhY2goIGZpbmRIYW5kbGVycyggZXZlbnRzLCBuYW1lLCBjYiwgY3R4ICksIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZXZlbnRzWyB0aGlzLmlkIF07XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOinpuWPkeS6i+S7tlxyXG4gICAgICAgICAgICAgKiBAbWV0aG9kIHRyaWdnZXJcclxuICAgICAgICAgICAgICogQGdyYW1tYXIgdHJpZ2dlciggbmFtZVssIGFyZ3MuLi5dICkgPT4gc2VsZlxyXG4gICAgICAgICAgICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgdHlwZSAgICAg5LqL5Lu25ZCNXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSAgeyp9IFsuLi5dIOS7u+aEj+WPguaVsFxyXG4gICAgICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSDlpoLmnpxoYW5kbGVy5LitcmV0dXJuIGZhbHNl5LqG77yM5YiZ6L+U5ZueZmFsc2UsIOWQpuWImei/lOWbnnRydWVcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHRyaWdnZXI6IGZ1bmN0aW9uKCB0eXBlICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MsIGV2ZW50cywgYWxsRXZlbnRzO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoICF0aGlzLl9ldmVudHMgfHwgIXR5cGUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGFyZ3MgPSBzbGljZS5jYWxsKCBhcmd1bWVudHMsIDEgKTtcclxuICAgICAgICAgICAgICAgIGV2ZW50cyA9IGZpbmRIYW5kbGVycyggdGhpcy5fZXZlbnRzLCB0eXBlICk7XHJcbiAgICAgICAgICAgICAgICBhbGxFdmVudHMgPSBmaW5kSGFuZGxlcnMoIHRoaXMuX2V2ZW50cywgJ2FsbCcgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyaWdnZXJIYW5kZXJzKCBldmVudHMsIGFyZ3MgKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VySGFuZGVycyggYWxsRXZlbnRzLCBhcmd1bWVudHMgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDkuK3ku4vogIXvvIzlroPmnKzouqvmmK/kuKrljZXkvovvvIzkvYblj6/ku6XpgJrov4dbaW5zdGFsbFRvXSgjV2ViVXBsb2FkZXI6TWVkaWF0b3I6aW5zdGFsbFRvKeaWueazle+8jOS9v+S7u+S9leWvueixoeWFt+Wkh+S6i+S7tuihjOS4uuOAglxyXG4gICAgICAgICAqIOS4u+imgeebrueahOaYr+i0n+i0o+aooeWdl+S4juaooeWdl+S5i+mXtOeahOWQiOS9nO+8jOmZjeS9juiApuWQiOW6puOAglxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGNsYXNzIE1lZGlhdG9yXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcmV0dXJuICQuZXh0ZW5kKHtcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICog5Y+v5Lul6YCa6L+H6L+Z5Liq5o6l5Y+j77yM5L2/5Lu75L2V5a+56LGh5YW35aSH5LqL5Lu25Yqf6IO944CCXHJcbiAgICAgICAgICAgICAqIEBtZXRob2QgaW5zdGFsbFRvXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSAge09iamVjdH0gb2JqIOmcgOimgeWFt+Wkh+S6i+S7tuihjOS4uueahOWvueixoeOAglxyXG4gICAgICAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IOi/lOWbnm9iai5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGluc3RhbGxUbzogZnVuY3Rpb24oIG9iaiApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAkLmV4dGVuZCggb2JqLCBwcm90b3MgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgfSwgcHJvdG9zICk7XHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyBVcGxvYWRlcuS4iuS8oOexu1xyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ3VwbG9hZGVyJyxbXHJcbiAgICAgICAgJ2Jhc2UnLFxyXG4gICAgICAgICdtZWRpYXRvcidcclxuICAgIF0sIGZ1bmN0aW9uKCBCYXNlLCBNZWRpYXRvciApIHtcclxuICAgIFxyXG4gICAgICAgIHZhciAkID0gQmFzZS4kO1xyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5LiK5Lyg5YWl5Y+j57G744CCXHJcbiAgICAgICAgICogQGNsYXNzIFVwbG9hZGVyXHJcbiAgICAgICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICogQGdyYW1tYXIgbmV3IFVwbG9hZGVyKCBvcHRzICkgPT4gVXBsb2FkZXJcclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIHZhciB1cGxvYWRlciA9IFdlYlVwbG9hZGVyLlVwbG9hZGVyKHtcclxuICAgICAgICAgKiAgICAgc3dmOiAncGF0aF9vZl9zd2YvVXBsb2FkZXIuc3dmJyxcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqICAgICAvLyDlvIDotbfliIbniYfkuIrkvKDjgIJcclxuICAgICAgICAgKiAgICAgY2h1bmtlZDogdHJ1ZVxyXG4gICAgICAgICAqIH0pO1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIFVwbG9hZGVyKCBvcHRzICkge1xyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCggdHJ1ZSwge30sIFVwbG9hZGVyLm9wdGlvbnMsIG9wdHMgKTtcclxuICAgICAgICAgICAgdGhpcy5faW5pdCggdGhpcy5vcHRpb25zICk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLy8gZGVmYXVsdCBPcHRpb25zXHJcbiAgICAgICAgLy8gd2lkZ2V0c+S4reacieebuOW6lOaJqeWxlVxyXG4gICAgICAgIFVwbG9hZGVyLm9wdGlvbnMgPSB7fTtcclxuICAgICAgICBNZWRpYXRvci5pbnN0YWxsVG8oIFVwbG9hZGVyLnByb3RvdHlwZSApO1xyXG4gICAgXHJcbiAgICAgICAgLy8g5om56YeP5re75Yqg57qv5ZG95Luk5byP5pa55rOV44CCXHJcbiAgICAgICAgJC5lYWNoKHtcclxuICAgICAgICAgICAgdXBsb2FkOiAnc3RhcnQtdXBsb2FkJyxcclxuICAgICAgICAgICAgc3RvcDogJ3N0b3AtdXBsb2FkJyxcclxuICAgICAgICAgICAgZ2V0RmlsZTogJ2dldC1maWxlJyxcclxuICAgICAgICAgICAgZ2V0RmlsZXM6ICdnZXQtZmlsZXMnLFxyXG4gICAgICAgICAgICBhZGRGaWxlOiAnYWRkLWZpbGUnLFxyXG4gICAgICAgICAgICBhZGRGaWxlczogJ2FkZC1maWxlJyxcclxuICAgICAgICAgICAgc29ydDogJ3NvcnQtZmlsZXMnLFxyXG4gICAgICAgICAgICByZW1vdmVGaWxlOiAncmVtb3ZlLWZpbGUnLFxyXG4gICAgICAgICAgICBjYW5jZWxGaWxlOiAnY2FuY2VsLWZpbGUnLFxyXG4gICAgICAgICAgICBza2lwRmlsZTogJ3NraXAtZmlsZScsXHJcbiAgICAgICAgICAgIHJldHJ5OiAncmV0cnknLFxyXG4gICAgICAgICAgICBpc0luUHJvZ3Jlc3M6ICdpcy1pbi1wcm9ncmVzcycsXHJcbiAgICAgICAgICAgIG1ha2VUaHVtYjogJ21ha2UtdGh1bWInLFxyXG4gICAgICAgICAgICBtZDVGaWxlOiAnbWQ1LWZpbGUnLFxyXG4gICAgICAgICAgICBnZXREaW1lbnNpb246ICdnZXQtZGltZW5zaW9uJyxcclxuICAgICAgICAgICAgYWRkQnV0dG9uOiAnYWRkLWJ0bicsXHJcbiAgICAgICAgICAgIHByZWRpY3RSdW50aW1lVHlwZTogJ3ByZWRpY3QtcnVudGltZS10eXBlJyxcclxuICAgICAgICAgICAgcmVmcmVzaDogJ3JlZnJlc2gnLFxyXG4gICAgICAgICAgICBkaXNhYmxlOiAnZGlzYWJsZScsXHJcbiAgICAgICAgICAgIGVuYWJsZTogJ2VuYWJsZScsXHJcbiAgICAgICAgICAgIHJlc2V0OiAncmVzZXQnXHJcbiAgICAgICAgfSwgZnVuY3Rpb24oIGZuLCBjb21tYW5kICkge1xyXG4gICAgICAgICAgICBVcGxvYWRlci5wcm90b3R5cGVbIGZuIF0gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3QoIGNvbW1hbmQsIGFyZ3VtZW50cyApO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgJC5leHRlbmQoIFVwbG9hZGVyLnByb3RvdHlwZSwge1xyXG4gICAgICAgICAgICBzdGF0ZTogJ3BlbmRpbmcnLFxyXG4gICAgXHJcbiAgICAgICAgICAgIF9pbml0OiBmdW5jdGlvbiggb3B0cyApIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG1lLnJlcXVlc3QoICdpbml0Jywgb3B0cywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWUuc3RhdGUgPSAncmVhZHknO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLnRyaWdnZXIoJ3JlYWR5Jyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICog6I635Y+W5oiW6ICF6K6+572uVXBsb2FkZXLphY3nva7pobnjgIJcclxuICAgICAgICAgICAgICogQG1ldGhvZCBvcHRpb25cclxuICAgICAgICAgICAgICogQGdyYW1tYXIgb3B0aW9uKCBrZXkgKSA9PiAqXHJcbiAgICAgICAgICAgICAqIEBncmFtbWFyIG9wdGlvbigga2V5LCB2YWwgKSA9PiBzZWxmXHJcbiAgICAgICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIC8vIOWIneWni+eKtuaAgeWbvueJh+S4iuS8oOWJjeS4jeS8muWOi+e8qVxyXG4gICAgICAgICAgICAgKiB2YXIgdXBsb2FkZXIgPSBuZXcgV2ViVXBsb2FkZXIuVXBsb2FkZXIoe1xyXG4gICAgICAgICAgICAgKiAgICAgY29tcHJlc3M6IG51bGw7XHJcbiAgICAgICAgICAgICAqIH0pO1xyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiAvLyDkv67mlLnlkI7lm77niYfkuIrkvKDliY3vvIzlsJ3or5XlsIblm77niYfljovnvKnliLAxNjAwICogMTYwMFxyXG4gICAgICAgICAgICAgKiB1cGxvYWRlci5vcHRpb24oICdjb21wcmVzcycsIHtcclxuICAgICAgICAgICAgICogICAgIHdpZHRoOiAxNjAwLFxyXG4gICAgICAgICAgICAgKiAgICAgaGVpZ2h0OiAxNjAwXHJcbiAgICAgICAgICAgICAqIH0pO1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgb3B0aW9uOiBmdW5jdGlvbigga2V5LCB2YWwgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gc2V0dGVyXHJcbiAgICAgICAgICAgICAgICBpZiAoIGFyZ3VtZW50cy5sZW5ndGggPiAxICkge1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAkLmlzUGxhaW5PYmplY3QoIHZhbCApICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmlzUGxhaW5PYmplY3QoIG9wdHNbIGtleSBdICkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQuZXh0ZW5kKCBvcHRzWyBrZXkgXSwgdmFsICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0c1sga2V5IF0gPSB2YWw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgeyAgICAvLyBnZXR0ZXJcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5ID8gb3B0c1sga2V5IF0gOiBvcHRzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiDojrflj5bmlofku7bnu5/orqHkv6Hmga/jgILov5Tlm57kuIDkuKrljIXlkKvkuIDkuIvkv6Hmga/nmoTlr7nosaHjgIJcclxuICAgICAgICAgICAgICogKiBgc3VjY2Vzc051bWAg5LiK5Lyg5oiQ5Yqf55qE5paH5Lu25pWwXHJcbiAgICAgICAgICAgICAqICogYHByb2dyZXNzTnVtYCDkuIrkvKDkuK3nmoTmlofku7bmlbBcclxuICAgICAgICAgICAgICogKiBgY2FuY2VsTnVtYCDooqvliKDpmaTnmoTmlofku7bmlbBcclxuICAgICAgICAgICAgICogKiBgaW52YWxpZE51bWAg5peg5pWI55qE5paH5Lu25pWwXHJcbiAgICAgICAgICAgICAqICogYHVwbG9hZEZhaWxOdW1gIOS4iuS8oOWksei0peeahOaWh+S7tuaVsFxyXG4gICAgICAgICAgICAgKiAqIGBxdWV1ZU51bWAg6L+Y5Zyo6Zif5YiX5Lit55qE5paH5Lu25pWwXHJcbiAgICAgICAgICAgICAqICogYGludGVycnVwdE51bWAg6KKr5pqC5YGc55qE5paH5Lu25pWwXHJcbiAgICAgICAgICAgICAqIEBtZXRob2QgZ2V0U3RhdHNcclxuICAgICAgICAgICAgICogQGdyYW1tYXIgZ2V0U3RhdHMoKSA9PiBPYmplY3RcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGdldFN0YXRzOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIC8vIHJldHVybiB0aGlzLl9tZ3IuZ2V0U3RhdHMuYXBwbHkoIHRoaXMuX21nciwgYXJndW1lbnRzICk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RhdHMgPSB0aGlzLnJlcXVlc3QoJ2dldC1zdGF0cycpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhdHMgPyB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc051bTogc3RhdHMubnVtT2ZTdWNjZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb2dyZXNzTnVtOiBzdGF0cy5udW1PZlByb2dyZXNzLFxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2hvIGNhcmU/XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcXVldWVGYWlsTnVtOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbE51bTogc3RhdHMubnVtT2ZDYW5jZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZE51bTogc3RhdHMubnVtT2ZJbnZhbGlkLFxyXG4gICAgICAgICAgICAgICAgICAgIHVwbG9hZEZhaWxOdW06IHN0YXRzLm51bU9mVXBsb2FkRmFpbGVkLFxyXG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlTnVtOiBzdGF0cy5udW1PZlF1ZXVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVycnVwdE51bTogc3RhdHMubnVtb2ZJbnRlcnJ1cHRcclxuICAgICAgICAgICAgICAgIH0gOiB7fTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvLyDpnIDopoHph43lhpnmraTmlrnms5XmnaXmnaXmlK/mjIFvcHRzLm9uRXZlbnTlkoxpbnN0YW5jZS5vbkV2ZW5055qE5aSE55CG5ZmoXHJcbiAgICAgICAgICAgIHRyaWdnZXI6IGZ1bmN0aW9uKCB0eXBlLyosIGFyZ3MuLi4qLyApIHtcclxuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbCggYXJndW1lbnRzLCAxICksXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cyA9IHRoaXMub3B0aW9ucyxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lID0gJ29uJyArIHR5cGUuc3Vic3RyaW5nKCAwLCAxICkudG9VcHBlckNhc2UoKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUuc3Vic3RyaW5nKCAxICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g6LCD55So6YCa6L+Hb27mlrnms5Xms6jlhoznmoRoYW5kbGVyLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBNZWRpYXRvci50cmlnZ2VyLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKSA9PT0gZmFsc2UgfHxcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDosIPnlKhvcHRzLm9uRXZlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgJC5pc0Z1bmN0aW9uKCBvcHRzWyBuYW1lIF0gKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRzWyBuYW1lIF0uYXBwbHkoIHRoaXMsIGFyZ3MgKSA9PT0gZmFsc2UgfHxcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDosIPnlKh0aGlzLm9uRXZlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgJC5pc0Z1bmN0aW9uKCB0aGlzWyBuYW1lIF0gKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzWyBuYW1lIF0uYXBwbHkoIHRoaXMsIGFyZ3MgKSA9PT0gZmFsc2UgfHxcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDlub/mkq3miYDmnIl1cGxvYWRlcueahOS6i+S7tuOAglxyXG4gICAgICAgICAgICAgICAgICAgICAgICBNZWRpYXRvci50cmlnZ2VyLmFwcGx5KCBNZWRpYXRvcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgWyB0aGlzLCB0eXBlIF0uY29uY2F0KCBhcmdzICkgKSA9PT0gZmFsc2UgKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiDplIDmr4Egd2VidXBsb2FkZXIg5a6e5L6LXHJcbiAgICAgICAgICAgICAqIEBtZXRob2QgZGVzdHJveVxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBkZXN0cm95KCkgPT4gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdCggJ2Rlc3Ryb3knLCBhcmd1bWVudHMgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub2ZmKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLy8gd2lkZ2V0cy93aWRnZXQuanPlsIbooaXlhYXmraTmlrnms5XnmoTor6bnu4bmlofmoaPjgIJcclxuICAgICAgICAgICAgcmVxdWVzdDogQmFzZS5ub29wXHJcbiAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDliJvlu7pVcGxvYWRlcuWunuS+i++8jOetieWQjOS6jm5ldyBVcGxvYWRlciggb3B0cyApO1xyXG4gICAgICAgICAqIEBtZXRob2QgY3JlYXRlXHJcbiAgICAgICAgICogQGNsYXNzIEJhc2VcclxuICAgICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAgICogQGdyYW1tYXIgQmFzZS5jcmVhdGUoIG9wdHMgKSA9PiBVcGxvYWRlclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIEJhc2UuY3JlYXRlID0gVXBsb2FkZXIuY3JlYXRlID0gZnVuY3Rpb24oIG9wdHMgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVXBsb2FkZXIoIG9wdHMgKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgLy8g5pq06ZyyVXBsb2FkZXLvvIzlj6/ku6XpgJrov4flroPmnaXmianlsZXkuJrliqHpgLvovpHjgIJcclxuICAgICAgICBCYXNlLlVwbG9hZGVyID0gVXBsb2FkZXI7XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gVXBsb2FkZXI7XHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyBSdW50aW1l566h55CG5Zmo77yM6LSf6LSjUnVudGltZeeahOmAieaLqSwg6L+e5o6lXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgncnVudGltZS9ydW50aW1lJyxbXHJcbiAgICAgICAgJ2Jhc2UnLFxyXG4gICAgICAgICdtZWRpYXRvcidcclxuICAgIF0sIGZ1bmN0aW9uKCBCYXNlLCBNZWRpYXRvciApIHtcclxuICAgIFxyXG4gICAgICAgIHZhciAkID0gQmFzZS4kLFxyXG4gICAgICAgICAgICBmYWN0b3JpZXMgPSB7fSxcclxuICAgIFxyXG4gICAgICAgICAgICAvLyDojrflj5blr7nosaHnmoTnrKzkuIDkuKprZXlcclxuICAgICAgICAgICAgZ2V0Rmlyc3RLZXkgPSBmdW5jdGlvbiggb2JqICkge1xyXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGtleSBpbiBvYmogKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBvYmouaGFzT3duUHJvcGVydHkoIGtleSApICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgLy8g5o6l5Y+j57G744CCXHJcbiAgICAgICAgZnVuY3Rpb24gUnVudGltZSggb3B0aW9ucyApIHtcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyOiBkb2N1bWVudC5ib2R5XHJcbiAgICAgICAgICAgIH0sIG9wdGlvbnMgKTtcclxuICAgICAgICAgICAgdGhpcy51aWQgPSBCYXNlLmd1aWQoJ3J0XycpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICQuZXh0ZW5kKCBSdW50aW1lLnByb3RvdHlwZSwge1xyXG4gICAgXHJcbiAgICAgICAgICAgIGdldENvbnRhaW5lcjogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucyxcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQsIGNvbnRhaW5lcjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCB0aGlzLl9jb250YWluZXIgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRhaW5lcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcGFyZW50ID0gJCggb3B0cy5jb250YWluZXIgfHwgZG9jdW1lbnQuYm9keSApO1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyID0gJCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmF0dHIoICdpZCcsICdydF8nICsgdGhpcy51aWQgKTtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvcDogJzBweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogJzBweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcxcHgnLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogJzFweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcGFyZW50LmFwcGVuZCggY29udGFpbmVyICk7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnQuYWRkQ2xhc3MoJ3dlYnVwbG9hZGVyLWNvbnRhaW5lcicpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGFyZW50ID0gcGFyZW50O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBpbml0OiBCYXNlLm5vb3AsXHJcbiAgICAgICAgICAgIGV4ZWM6IEJhc2Uubm9vcCxcclxuICAgIFxyXG4gICAgICAgICAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbnRhaW5lciAmJiB0aGlzLl9jb250YWluZXIucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wYXJlbnQgJiYgdGhpcy5fcGFyZW50LnJlbW92ZUNsYXNzKCd3ZWJ1cGxvYWRlci1jb250YWluZXInKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub2ZmKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgIFJ1bnRpbWUub3JkZXJzID0gJ2h0bWw1LGZsYXNoJztcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5re75YqgUnVudGltZeWunueOsOOAglxyXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlICAgIOexu+Wei1xyXG4gICAgICAgICAqIEBwYXJhbSB7UnVudGltZX0gZmFjdG9yeSDlhbfkvZNSdW50aW1l5a6e546w44CCXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgUnVudGltZS5hZGRSdW50aW1lID0gZnVuY3Rpb24oIHR5cGUsIGZhY3RvcnkgKSB7XHJcbiAgICAgICAgICAgIGZhY3Rvcmllc1sgdHlwZSBdID0gZmFjdG9yeTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgUnVudGltZS5oYXNSdW50aW1lID0gZnVuY3Rpb24oIHR5cGUgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhISh0eXBlID8gZmFjdG9yaWVzWyB0eXBlIF0gOiBnZXRGaXJzdEtleSggZmFjdG9yaWVzICkpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBSdW50aW1lLmNyZWF0ZSA9IGZ1bmN0aW9uKCBvcHRzLCBvcmRlcnMgKSB7XHJcbiAgICAgICAgICAgIHZhciB0eXBlLCBydW50aW1lO1xyXG4gICAgXHJcbiAgICAgICAgICAgIG9yZGVycyA9IG9yZGVycyB8fCBSdW50aW1lLm9yZGVycztcclxuICAgICAgICAgICAgJC5lYWNoKCBvcmRlcnMuc3BsaXQoIC9cXHMqLFxccyovZyApLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGlmICggZmFjdG9yaWVzWyB0aGlzIF0gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICB0eXBlID0gdHlwZSB8fCBnZXRGaXJzdEtleSggZmFjdG9yaWVzICk7XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKCAhdHlwZSApIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUnVudGltZSBFcnJvcicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgcnVudGltZSA9IG5ldyBmYWN0b3JpZXNbIHR5cGUgXSggb3B0cyApO1xyXG4gICAgICAgICAgICByZXR1cm4gcnVudGltZTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgTWVkaWF0b3IuaW5zdGFsbFRvKCBSdW50aW1lLnByb3RvdHlwZSApO1xyXG4gICAgICAgIHJldHVybiBSdW50aW1lO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyBSdW50aW1l566h55CG5Zmo77yM6LSf6LSjUnVudGltZeeahOmAieaLqSwg6L+e5o6lXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgncnVudGltZS9jbGllbnQnLFtcclxuICAgICAgICAnYmFzZScsXHJcbiAgICAgICAgJ21lZGlhdG9yJyxcclxuICAgICAgICAncnVudGltZS9ydW50aW1lJ1xyXG4gICAgXSwgZnVuY3Rpb24oIEJhc2UsIE1lZGlhdG9yLCBSdW50aW1lICkge1xyXG4gICAgXHJcbiAgICAgICAgdmFyIGNhY2hlO1xyXG4gICAgXHJcbiAgICAgICAgY2FjaGUgPSAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBvYmogPSB7fTtcclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgYWRkOiBmdW5jdGlvbiggcnVudGltZSApIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmpbIHJ1bnRpbWUudWlkIF0gPSBydW50aW1lO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiggcnVpZCwgc3RhbmRhbG9uZSApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggcnVpZCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9ialsgcnVpZCBdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIGkgaW4gb2JqICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDmnInkupvnsbvlnovkuI3og73ph43nlKjvvIzmr5TlpoJmaWxlcGlja2VyLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHN0YW5kYWxvbmUgJiYgb2JqWyBpIF0uX19zdGFuZGFsb25lICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqWyBpIF07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uKCBydW50aW1lICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvYmpbIHJ1bnRpbWUudWlkIF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSkoKTtcclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIFJ1bnRpbWVDbGllbnQoIGNvbXBvbmVudCwgc3RhbmRhbG9uZSApIHtcclxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gQmFzZS5EZWZlcnJlZCgpLFxyXG4gICAgICAgICAgICAgICAgcnVudGltZTtcclxuICAgIFxyXG4gICAgICAgICAgICB0aGlzLnVpZCA9IEJhc2UuZ3VpZCgnY2xpZW50XycpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIOWFgeiuuHJ1bnRpbWXmsqHmnInliJ3lp4vljJbkuYvliY3vvIzms6jlhozkuIDkupvmlrnms5XlnKjliJ3lp4vljJblkI7miafooYzjgIJcclxuICAgICAgICAgICAgdGhpcy5ydW50aW1lUmVhZHkgPSBmdW5jdGlvbiggY2IgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQuZG9uZSggY2IgKTtcclxuICAgICAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3RSdW50aW1lID0gZnVuY3Rpb24oIG9wdHMsIGNiICkge1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBhbHJlYWR5IGNvbm5lY3RlZC5cclxuICAgICAgICAgICAgICAgIGlmICggcnVudGltZSApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2FscmVhZHkgY29ubmVjdGVkIScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5kb25lKCBjYiApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIHR5cGVvZiBvcHRzID09PSAnc3RyaW5nJyAmJiBjYWNoZS5nZXQoIG9wdHMgKSApIHtcclxuICAgICAgICAgICAgICAgICAgICBydW50aW1lID0gY2FjaGUuZ2V0KCBvcHRzICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOWDj2ZpbGVQaWNrZXLlj6rog73ni6znq4vlrZjlnKjvvIzkuI3og73lhaznlKjjgIJcclxuICAgICAgICAgICAgICAgIHJ1bnRpbWUgPSBydW50aW1lIHx8IGNhY2hlLmdldCggbnVsbCwgc3RhbmRhbG9uZSApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDpnIDopoHliJvlu7pcclxuICAgICAgICAgICAgICAgIGlmICggIXJ1bnRpbWUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcnVudGltZSA9IFJ1bnRpbWUuY3JlYXRlKCBvcHRzLCBvcHRzLnJ1bnRpbWVPcmRlciApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJ1bnRpbWUuX19wcm9taXNlID0gZGVmZXJyZWQucHJvbWlzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJ1bnRpbWUub25jZSggJ3JlYWR5JywgZGVmZXJyZWQucmVzb2x2ZSApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJ1bnRpbWUuaW5pdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlLmFkZCggcnVudGltZSApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJ1bnRpbWUuX19jbGllbnQgPSAxO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDmnaXoh6pjYWNoZVxyXG4gICAgICAgICAgICAgICAgICAgIEJhc2UuJC5leHRlbmQoIHJ1bnRpbWUub3B0aW9ucywgb3B0cyApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJ1bnRpbWUuX19wcm9taXNlLnRoZW4oIGRlZmVycmVkLnJlc29sdmUgKTtcclxuICAgICAgICAgICAgICAgICAgICBydW50aW1lLl9fY2xpZW50Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHN0YW5kYWxvbmUgJiYgKHJ1bnRpbWUuX19zdGFuZGFsb25lID0gc3RhbmRhbG9uZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcnVudGltZTtcclxuICAgICAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgICAgICB0aGlzLmdldFJ1bnRpbWUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBydW50aW1lO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgICAgIHRoaXMuZGlzY29ubmVjdFJ1bnRpbWUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGlmICggIXJ1bnRpbWUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBydW50aW1lLl9fY2xpZW50LS07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmICggcnVudGltZS5fX2NsaWVudCA8PSAwICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlLnJlbW92ZSggcnVudGltZSApO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBydW50aW1lLl9fcHJvbWlzZTtcclxuICAgICAgICAgICAgICAgICAgICBydW50aW1lLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcnVudGltZSA9IG51bGw7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgdGhpcy5leGVjID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoICFydW50aW1lICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBCYXNlLnNsaWNlKCBhcmd1bWVudHMgKTtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudCAmJiBhcmdzLnVuc2hpZnQoIGNvbXBvbmVudCApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcnVudGltZS5leGVjLmFwcGx5KCB0aGlzLCBhcmdzICk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgdGhpcy5nZXRSdWlkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcnVudGltZSAmJiBydW50aW1lLnVpZDtcclxuICAgICAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3kgPSAoZnVuY3Rpb24oIGRlc3Ryb3kgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVzdHJveSAmJiBkZXN0cm95LmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2Rlc3Ryb3knKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9mZigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhlYygnZGVzdHJveScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzY29ubmVjdFJ1bnRpbWUoKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pKCB0aGlzLmRlc3Ryb3kgKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBNZWRpYXRvci5pbnN0YWxsVG8oIFJ1bnRpbWVDbGllbnQucHJvdG90eXBlICk7XHJcbiAgICAgICAgcmV0dXJuIFJ1bnRpbWVDbGllbnQ7XHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyDplJnor6/kv6Hmga9cclxuICAgICAqL1xyXG4gICAgZGVmaW5lKCdsaWIvZG5kJyxbXHJcbiAgICAgICAgJ2Jhc2UnLFxyXG4gICAgICAgICdtZWRpYXRvcicsXHJcbiAgICAgICAgJ3J1bnRpbWUvY2xpZW50J1xyXG4gICAgXSwgZnVuY3Rpb24oIEJhc2UsIE1lZGlhdG9yLCBSdW50aW1lQ2xlbnQgKSB7XHJcbiAgICBcclxuICAgICAgICB2YXIgJCA9IEJhc2UuJDtcclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIERyYWdBbmREcm9wKCBvcHRzICkge1xyXG4gICAgICAgICAgICBvcHRzID0gdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sIERyYWdBbmREcm9wLm9wdGlvbnMsIG9wdHMgKTtcclxuICAgIFxyXG4gICAgICAgICAgICBvcHRzLmNvbnRhaW5lciA9ICQoIG9wdHMuY29udGFpbmVyICk7XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKCAhb3B0cy5jb250YWluZXIubGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgUnVudGltZUNsZW50LmNhbGwoIHRoaXMsICdEcmFnQW5kRHJvcCcgKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBEcmFnQW5kRHJvcC5vcHRpb25zID0ge1xyXG4gICAgICAgICAgICBhY2NlcHQ6IG51bGwsXHJcbiAgICAgICAgICAgIGRpc2FibGVHbG9iYWxEbmQ6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIEJhc2UuaW5oZXJpdHMoIFJ1bnRpbWVDbGVudCwge1xyXG4gICAgICAgICAgICBjb25zdHJ1Y3RvcjogRHJhZ0FuZERyb3AsXHJcbiAgICBcclxuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBtZS5jb25uZWN0UnVudGltZSggbWUub3B0aW9ucywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWUuZXhlYygnaW5pdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLnRyaWdnZXIoJ3JlYWR5Jyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgTWVkaWF0b3IuaW5zdGFsbFRvKCBEcmFnQW5kRHJvcC5wcm90b3R5cGUgKTtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBEcmFnQW5kRHJvcDtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IOe7hOS7tuWfuuexu+OAglxyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ3dpZGdldHMvd2lkZ2V0JyxbXHJcbiAgICAgICAgJ2Jhc2UnLFxyXG4gICAgICAgICd1cGxvYWRlcidcclxuICAgIF0sIGZ1bmN0aW9uKCBCYXNlLCBVcGxvYWRlciApIHtcclxuICAgIFxyXG4gICAgICAgIHZhciAkID0gQmFzZS4kLFxyXG4gICAgICAgICAgICBfaW5pdCA9IFVwbG9hZGVyLnByb3RvdHlwZS5faW5pdCxcclxuICAgICAgICAgICAgX2Rlc3Ryb3kgPSBVcGxvYWRlci5wcm90b3R5cGUuZGVzdHJveSxcclxuICAgICAgICAgICAgSUdOT1JFID0ge30sXHJcbiAgICAgICAgICAgIHdpZGdldENsYXNzID0gW107XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBpc0FycmF5TGlrZSggb2JqICkge1xyXG4gICAgICAgICAgICBpZiAoICFvYmogKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gb2JqLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIHR5cGUgPSAkLnR5cGUoIG9iaiApO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICggb2JqLm5vZGVUeXBlID09PSAxICYmIGxlbmd0aCApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHR5cGUgPT09ICdhcnJheScgfHwgdHlwZSAhPT0gJ2Z1bmN0aW9uJyAmJiB0eXBlICE9PSAnc3RyaW5nJyAmJlxyXG4gICAgICAgICAgICAgICAgICAgIChsZW5ndGggPT09IDAgfHwgdHlwZW9mIGxlbmd0aCA9PT0gJ251bWJlcicgJiYgbGVuZ3RoID4gMCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIChsZW5ndGggLSAxKSBpbiBvYmopO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIFdpZGdldCggdXBsb2FkZXIgKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3duZXIgPSB1cGxvYWRlcjtcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gdXBsb2FkZXIub3B0aW9ucztcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAkLmV4dGVuZCggV2lkZ2V0LnByb3RvdHlwZSwge1xyXG4gICAgXHJcbiAgICAgICAgICAgIGluaXQ6IEJhc2Uubm9vcCxcclxuICAgIFxyXG4gICAgICAgICAgICAvLyDnsbtCYWNrYm9uZeeahOS6i+S7tuebkeWQrOWjsOaYju+8jOebkeWQrHVwbG9hZGVy5a6e5L6L5LiK55qE5LqL5Lu2XHJcbiAgICAgICAgICAgIC8vIHdpZGdldOebtOaOpeaXoOazleebkeWQrOS6i+S7tu+8jOS6i+S7tuWPquiDvemAmui/h3VwbG9hZGVy5p2l5Lyg6YCSXHJcbiAgICAgICAgICAgIGludm9rZTogZnVuY3Rpb24oIGFwaU5hbWUsIGFyZ3MgKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnbWFrZS10aHVtYic6ICdtYWtlVGh1bWInXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICB2YXIgbWFwID0gdGhpcy5yZXNwb25zZU1hcDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c5pegQVBJ5ZON5bqU5aOw5piO5YiZ5b+955WlXHJcbiAgICAgICAgICAgICAgICBpZiAoICFtYXAgfHwgIShhcGlOYW1lIGluIG1hcCkgfHwgIShtYXBbIGFwaU5hbWUgXSBpbiB0aGlzKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAhJC5pc0Z1bmN0aW9uKCB0aGlzWyBtYXBbIGFwaU5hbWUgXSBdICkgKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSUdOT1JFO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpc1sgbWFwWyBhcGlOYW1lIF0gXS5hcHBseSggdGhpcywgYXJncyApO1xyXG4gICAgXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOWPkemAgeWRveS7pOOAguW9k+S8oOWFpWBjYWxsYmFja2DmiJbogIVgaGFuZGxlcmDkuK3ov5Tlm55gcHJvbWlzZWDml7bjgILov5Tlm57kuIDkuKrlvZPmiYDmnIlgaGFuZGxlcmDkuK3nmoRwcm9taXNl6YO95a6M5oiQ5ZCO5a6M5oiQ55qE5pawYHByb21pc2Vg44CCXHJcbiAgICAgICAgICAgICAqIEBtZXRob2QgcmVxdWVzdFxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciByZXF1ZXN0KCBjb21tYW5kLCBhcmdzICkgPT4gKiB8IFByb21pc2VcclxuICAgICAgICAgICAgICogQGdyYW1tYXIgcmVxdWVzdCggY29tbWFuZCwgYXJncywgY2FsbGJhY2sgKSA9PiBQcm9taXNlXHJcbiAgICAgICAgICAgICAqIEBmb3IgIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICByZXF1ZXN0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm93bmVyLnJlcXVlc3QuYXBwbHkoIHRoaXMub3duZXIsIGFyZ3VtZW50cyApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAvLyDmianlsZVVcGxvYWRlci5cclxuICAgICAgICAkLmV4dGVuZCggVXBsb2FkZXIucHJvdG90eXBlLCB7XHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7U3RyaW5nIHwgQXJyYXl9IFtkaXNhYmxlV2lkZ2V0cz11bmRlZmluZWRdXHJcbiAgICAgICAgICAgICAqIEBuYW1lc3BhY2Ugb3B0aW9uc1xyXG4gICAgICAgICAgICAgKiBAZm9yIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiDpu5jorqTmiYDmnIkgVXBsb2FkZXIucmVnaXN0ZXIg5LqG55qEIHdpZGdldCDpg73kvJrooqvliqDovb3vvIzlpoLmnpznpoHnlKjmn5DkuIDpg6jliIbvvIzor7fpgJrov4fmraQgb3B0aW9uIOaMh+Wumum7keWQjeWNleOAglxyXG4gICAgICAgICAgICAgKi9cclxuICAgIFxyXG4gICAgICAgICAgICAvLyDopoblhplfaW5pdOeUqOadpeWIneWni+WMlndpZGdldHNcclxuICAgICAgICAgICAgX2luaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICB3aWRnZXRzID0gbWUuX3dpZGdldHMgPSBbXSxcclxuICAgICAgICAgICAgICAgICAgICBkZWFjdGl2ZXMgPSBtZS5vcHRpb25zLmRpc2FibGVXaWRnZXRzIHx8ICcnO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAkLmVhY2goIHdpZGdldENsYXNzLCBmdW5jdGlvbiggXywga2xhc3MgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgKCFkZWFjdGl2ZXMgfHwgIX5kZWFjdGl2ZXMuaW5kZXhPZigga2xhc3MuX25hbWUgKSkgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0cy5wdXNoKCBuZXcga2xhc3MoIG1lICkgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX2luaXQuYXBwbHkoIG1lLCBhcmd1bWVudHMgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICByZXF1ZXN0OiBmdW5jdGlvbiggYXBpTmFtZSwgYXJncywgY2FsbGJhY2sgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaSA9IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0cyA9IHRoaXMuX3dpZGdldHMsXHJcbiAgICAgICAgICAgICAgICAgICAgbGVuID0gd2lkZ2V0cyAmJiB3aWRnZXRzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICBybHRzID0gW10sXHJcbiAgICAgICAgICAgICAgICAgICAgZGZkcyA9IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZGdldCwgcmx0LCBwcm9taXNlLCBrZXk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGFyZ3MgPSBpc0FycmF5TGlrZSggYXJncyApID8gYXJncyA6IFsgYXJncyBdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcclxuICAgICAgICAgICAgICAgICAgICB3aWRnZXQgPSB3aWRnZXRzWyBpIF07XHJcbiAgICAgICAgICAgICAgICAgICAgcmx0ID0gd2lkZ2V0Lmludm9rZSggYXBpTmFtZSwgYXJncyApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBybHQgIT09IElHTk9SRSApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEZWZlcnJlZOWvueixoVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIEJhc2UuaXNQcm9taXNlKCBybHQgKSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRmZHMucHVzaCggcmx0ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBybHRzLnB1c2goIHJsdCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzmnIljYWxsYmFja++8jOWImeeUqOW8guatpeaWueW8j+OAglxyXG4gICAgICAgICAgICAgICAgaWYgKCBjYWxsYmFjayB8fCBkZmRzLmxlbmd0aCApIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlID0gQmFzZS53aGVuLmFwcGx5KCBCYXNlLCBkZmRzICk7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5ID0gcHJvbWlzZS5waXBlID8gJ3BpcGUnIDogJ3RoZW4nO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5b6I6YeN6KaB5LiN6IO95Yig6Zmk44CC5Yig6Zmk5LqG5Lya5q275b6q546v44CCXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5L+d6K+B5omn6KGM6aG65bqP44CC6K6pY2FsbGJhY2vmgLvmmK/lnKjkuIvkuIDkuKogdGljayDkuK3miafooYzjgIJcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZVsga2V5IF0oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gQmFzZS5EZWZlcnJlZCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBhcmdzLmxlbmd0aCA9PT0gMSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncyA9IGFyZ3NbIDAgXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCBhcmdzICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMSApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pWyBjYWxsYmFjayA/IGtleSA6ICdkb25lJyBdKCBjYWxsYmFjayB8fCBCYXNlLm5vb3AgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJsdHNbIDAgXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIF9kZXN0cm95LmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3dpZGdldHMgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDmt7vliqDnu4Tku7ZcclxuICAgICAgICAgKiBAZ3JhbW1hciBVcGxvYWRlci5yZWdpc3Rlcihwcm90byk7XHJcbiAgICAgICAgICogQGdyYW1tYXIgVXBsb2FkZXIucmVnaXN0ZXIobWFwLCBwcm90byk7XHJcbiAgICAgICAgICogQHBhcmFtICB7b2JqZWN0fSByZXNwb25zZU1hcCBBUEkg5ZCN56ew5LiO5Ye95pWw5a6e546w55qE5pig5bCEXHJcbiAgICAgICAgICogQHBhcmFtICB7b2JqZWN0fSBwcm90byDnu4Tku7bljp/lnovvvIzmnoTpgKDlh73mlbDpgJrov4cgY29uc3RydWN0b3Ig5bGe5oCn5a6a5LmJXHJcbiAgICAgICAgICogQG1ldGhvZCBVcGxvYWRlci5yZWdpc3RlclxyXG4gICAgICAgICAqIEBmb3IgVXBsb2FkZXJcclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIFVwbG9hZGVyLnJlZ2lzdGVyKHtcclxuICAgICAgICAgKiAgICAgJ21ha2UtdGh1bWInOiAnbWFrZVRodW1iJ1xyXG4gICAgICAgICAqIH0sIHtcclxuICAgICAgICAgKiAgICAgaW5pdDogZnVuY3Rpb24oIG9wdGlvbnMgKSB7fSxcclxuICAgICAgICAgKiAgICAgbWFrZVRodW1iOiBmdW5jdGlvbigpIHt9XHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBVcGxvYWRlci5yZWdpc3Rlcih7XHJcbiAgICAgICAgICogICAgICdtYWtlLXRodW1iJzogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICogICAgICAgICBcclxuICAgICAgICAgKiAgICAgfVxyXG4gICAgICAgICAqIH0pO1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFVwbG9hZGVyLnJlZ2lzdGVyID0gV2lkZ2V0LnJlZ2lzdGVyID0gZnVuY3Rpb24oIHJlc3BvbnNlTWFwLCB3aWRnZXRQcm90byApIHtcclxuICAgICAgICAgICAgdmFyIG1hcCA9IHsgaW5pdDogJ2luaXQnLCBkZXN0cm95OiAnZGVzdHJveScsIG5hbWU6ICdhbm9ueW1vdXMnIH0sXHJcbiAgICAgICAgICAgICAgICBrbGFzcztcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgKSB7XHJcbiAgICAgICAgICAgICAgICB3aWRnZXRQcm90byA9IHJlc3BvbnNlTWFwO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDoh6rliqjnlJ/miJAgbWFwIOihqOOAglxyXG4gICAgICAgICAgICAgICAgJC5lYWNoKHdpZGdldFByb3RvLCBmdW5jdGlvbihrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGtleVswXSA9PT0gJ18nIHx8IGtleSA9PT0gJ25hbWUnICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXkgPT09ICduYW1lJyAmJiAobWFwLm5hbWUgPSB3aWRnZXRQcm90by5uYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcFtrZXkucmVwbGFjZSgvW0EtWl0vZywgJy0kJicpLnRvTG93ZXJDYXNlKCldID0ga2V5O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG1hcCA9ICQuZXh0ZW5kKCBtYXAsIHJlc3BvbnNlTWFwICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICB3aWRnZXRQcm90by5yZXNwb25zZU1hcCA9IG1hcDtcclxuICAgICAgICAgICAga2xhc3MgPSBCYXNlLmluaGVyaXRzKCBXaWRnZXQsIHdpZGdldFByb3RvICk7XHJcbiAgICAgICAgICAgIGtsYXNzLl9uYW1lID0gbWFwLm5hbWU7XHJcbiAgICAgICAgICAgIHdpZGdldENsYXNzLnB1c2goIGtsYXNzICk7XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIGtsYXNzO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDliKDpmaTmj5Lku7bvvIzlj6rmnInlnKjms6jlhozml7bmjIflrprkuoblkI3lrZfnmoTmiY3og73ooqvliKDpmaTjgIJcclxuICAgICAgICAgKiBAZ3JhbW1hciBVcGxvYWRlci51blJlZ2lzdGVyKG5hbWUpO1xyXG4gICAgICAgICAqIEBwYXJhbSAge3N0cmluZ30gbmFtZSDnu4Tku7blkI3lrZdcclxuICAgICAgICAgKiBAbWV0aG9kIFVwbG9hZGVyLnVuUmVnaXN0ZXJcclxuICAgICAgICAgKiBAZm9yIFVwbG9hZGVyXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFVwbG9hZGVyLnJlZ2lzdGVyKHtcclxuICAgICAgICAgKiAgICAgbmFtZTogJ2N1c3RvbScsXHJcbiAgICAgICAgICogICAgIFxyXG4gICAgICAgICAqICAgICAnbWFrZS10aHVtYic6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAqICAgICAgICAgXHJcbiAgICAgICAgICogICAgIH1cclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFVwbG9hZGVyLnVuUmVnaXN0ZXIoJ2N1c3RvbScpO1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFVwbG9hZGVyLnVuUmVnaXN0ZXIgPSBXaWRnZXQudW5SZWdpc3RlciA9IGZ1bmN0aW9uKCBuYW1lICkge1xyXG4gICAgICAgICAgICBpZiAoICFuYW1lIHx8IG5hbWUgPT09ICdhbm9ueW1vdXMnICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyDliKDpmaTmjIflrprnmoTmj5Lku7bjgIJcclxuICAgICAgICAgICAgZm9yICggdmFyIGkgPSB3aWRnZXRDbGFzcy5sZW5ndGg7IGktLTsgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHdpZGdldENsYXNzW2ldLl9uYW1lID09PSBuYW1lICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpZGdldENsYXNzLnNwbGljZShpLCAxKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBXaWRnZXQ7XHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyBEcmFnQW5kRHJvcCBXaWRnZXTjgIJcclxuICAgICAqL1xyXG4gICAgZGVmaW5lKCd3aWRnZXRzL2ZpbGVkbmQnLFtcclxuICAgICAgICAnYmFzZScsXHJcbiAgICAgICAgJ3VwbG9hZGVyJyxcclxuICAgICAgICAnbGliL2RuZCcsXHJcbiAgICAgICAgJ3dpZGdldHMvd2lkZ2V0J1xyXG4gICAgXSwgZnVuY3Rpb24oIEJhc2UsIFVwbG9hZGVyLCBEbmQgKSB7XHJcbiAgICAgICAgdmFyICQgPSBCYXNlLiQ7XHJcbiAgICBcclxuICAgICAgICBVcGxvYWRlci5vcHRpb25zLmRuZCA9ICcnO1xyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHByb3BlcnR5IHtTZWxlY3Rvcn0gW2RuZD11bmRlZmluZWRdICDmjIflrppEcmFnIEFuZCBEcm9w5ouW5ou955qE5a655Zmo77yM5aaC5p6c5LiN5oyH5a6a77yM5YiZ5LiN5ZCv5Yqo44CCXHJcbiAgICAgICAgICogQG5hbWVzcGFjZSBvcHRpb25zXHJcbiAgICAgICAgICogQGZvciBVcGxvYWRlclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7U2VsZWN0b3J9IFtkaXNhYmxlR2xvYmFsRG5kPWZhbHNlXSAg5piv5ZCm56aB5o6J5pW05Liq6aG16Z2i55qE5ouW5ou95Yqf6IO977yM5aaC5p6c5LiN56aB55So77yM5Zu+54mH5ouW6L+b5p2l55qE5pe25YCZ5Lya6buY6K6k6KKr5rWP6KeI5Zmo5omT5byA44CCXHJcbiAgICAgICAgICogQG5hbWVzcGFjZSBvcHRpb25zXHJcbiAgICAgICAgICogQGZvciBVcGxvYWRlclxyXG4gICAgICAgICAqL1xyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGV2ZW50IGRuZEFjY2VwdFxyXG4gICAgICAgICAqIEBwYXJhbSB7RGF0YVRyYW5zZmVySXRlbUxpc3R9IGl0ZW1zIERhdGFUcmFuc2Zlckl0ZW1cclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24g6Zi75q2i5q2k5LqL5Lu25Y+v5Lul5ouS57ud5p+Q5Lqb57G75Z6L55qE5paH5Lu25ouW5YWl6L+b5p2l44CC55uu5YmN5Y+q5pyJIGNocm9tZSDmj5Dkvpvov5nmoLfnmoQgQVBJ77yM5LiU5Y+q6IO96YCa6L+HIG1pbWUtdHlwZSDpqozor4HjgIJcclxuICAgICAgICAgKiBAZm9yICBVcGxvYWRlclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHJldHVybiBVcGxvYWRlci5yZWdpc3Rlcih7XHJcbiAgICAgICAgICAgIG5hbWU6ICdkbmQnLFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oIG9wdHMgKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmICggIW9wdHMuZG5kIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdCgncHJlZGljdC1ydW50aW1lLXR5cGUnKSAhPT0gJ2h0bWw1JyApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHZhciBtZSA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQgPSBCYXNlLkRlZmVycmVkKCksXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVHbG9iYWxEbmQ6IG9wdHMuZGlzYWJsZUdsb2JhbERuZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyOiBvcHRzLmRuZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXB0OiBvcHRzLmFjY2VwdFxyXG4gICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgIGRuZDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5kbmQgPSBkbmQgPSBuZXcgRG5kKCBvcHRpb25zICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGRuZC5vbmNlKCAncmVhZHknLCBkZWZlcnJlZC5yZXNvbHZlICk7XHJcbiAgICAgICAgICAgICAgICBkbmQub24oICdkcm9wJywgZnVuY3Rpb24oIGZpbGVzICkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLnJlcXVlc3QoICdhZGQtZmlsZScsIFsgZmlsZXMgXSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g5qOA5rWL5paH5Lu25piv5ZCm5YWo6YOo5YWB6K645re75Yqg44CCXHJcbiAgICAgICAgICAgICAgICBkbmQub24oICdhY2NlcHQnLCBmdW5jdGlvbiggaXRlbXMgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lLm93bmVyLnRyaWdnZXIoICdkbmRBY2NlcHQnLCBpdGVtcyApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGRuZC5pbml0KCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRuZCAmJiB0aGlzLmRuZC5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEBmaWxlT3ZlcnZpZXcg6ZSZ6K+v5L+h5oGvXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgnbGliL2ZpbGVwYXN0ZScsW1xyXG4gICAgICAgICdiYXNlJyxcclxuICAgICAgICAnbWVkaWF0b3InLFxyXG4gICAgICAgICdydW50aW1lL2NsaWVudCdcclxuICAgIF0sIGZ1bmN0aW9uKCBCYXNlLCBNZWRpYXRvciwgUnVudGltZUNsZW50ICkge1xyXG4gICAgXHJcbiAgICAgICAgdmFyICQgPSBCYXNlLiQ7XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBGaWxlUGFzdGUoIG9wdHMgKSB7XHJcbiAgICAgICAgICAgIG9wdHMgPSB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgb3B0cyApO1xyXG4gICAgICAgICAgICBvcHRzLmNvbnRhaW5lciA9ICQoIG9wdHMuY29udGFpbmVyIHx8IGRvY3VtZW50LmJvZHkgKTtcclxuICAgICAgICAgICAgUnVudGltZUNsZW50LmNhbGwoIHRoaXMsICdGaWxlUGFzdGUnICk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgQmFzZS5pbmhlcml0cyggUnVudGltZUNsZW50LCB7XHJcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yOiBGaWxlUGFzdGUsXHJcbiAgICBcclxuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBtZS5jb25uZWN0UnVudGltZSggbWUub3B0aW9ucywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWUuZXhlYygnaW5pdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLnRyaWdnZXIoJ3JlYWR5Jyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgTWVkaWF0b3IuaW5zdGFsbFRvKCBGaWxlUGFzdGUucHJvdG90eXBlICk7XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gRmlsZVBhc3RlO1xyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIEBmaWxlT3ZlcnZpZXcg57uE5Lu25Z+657G744CCXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgnd2lkZ2V0cy9maWxlcGFzdGUnLFtcclxuICAgICAgICAnYmFzZScsXHJcbiAgICAgICAgJ3VwbG9hZGVyJyxcclxuICAgICAgICAnbGliL2ZpbGVwYXN0ZScsXHJcbiAgICAgICAgJ3dpZGdldHMvd2lkZ2V0J1xyXG4gICAgXSwgZnVuY3Rpb24oIEJhc2UsIFVwbG9hZGVyLCBGaWxlUGFzdGUgKSB7XHJcbiAgICAgICAgdmFyICQgPSBCYXNlLiQ7XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcHJvcGVydHkge1NlbGVjdG9yfSBbcGFzdGU9dW5kZWZpbmVkXSAg5oyH5a6a55uR5ZCscGFzdGXkuovku7bnmoTlrrnlmajvvIzlpoLmnpzkuI3mjIflrprvvIzkuI3lkK/nlKjmraTlip/og73jgILmraTlip/og73kuLrpgJrov4fnspjotLTmnaXmt7vliqDmiKrlsY/nmoTlm77niYfjgILlu7rorq7orr7nva7kuLpgZG9jdW1lbnQuYm9keWAuXHJcbiAgICAgICAgICogQG5hbWVzcGFjZSBvcHRpb25zXHJcbiAgICAgICAgICogQGZvciBVcGxvYWRlclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHJldHVybiBVcGxvYWRlci5yZWdpc3Rlcih7XHJcbiAgICAgICAgICAgIG5hbWU6ICdwYXN0ZScsXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpbml0OiBmdW5jdGlvbiggb3B0cyApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCAhb3B0cy5wYXN0ZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlcXVlc3QoJ3ByZWRpY3QtcnVudGltZS10eXBlJykgIT09ICdodG1sNScgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB2YXIgbWUgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkID0gQmFzZS5EZWZlcnJlZCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXI6IG9wdHMucGFzdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY2VwdDogb3B0cy5hY2NlcHRcclxuICAgICAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgICAgICBwYXN0ZTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5wYXN0ZSA9IHBhc3RlID0gbmV3IEZpbGVQYXN0ZSggb3B0aW9ucyApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBwYXN0ZS5vbmNlKCAncmVhZHknLCBkZWZlcnJlZC5yZXNvbHZlICk7XHJcbiAgICAgICAgICAgICAgICBwYXN0ZS5vbiggJ3Bhc3RlJywgZnVuY3Rpb24oIGZpbGVzICkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLm93bmVyLnJlcXVlc3QoICdhZGQtZmlsZScsIFsgZmlsZXMgXSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHBhc3RlLmluaXQoKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFzdGUgJiYgdGhpcy5wYXN0ZS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IEJsb2JcclxuICAgICAqL1xyXG4gICAgZGVmaW5lKCdsaWIvYmxvYicsW1xyXG4gICAgICAgICdiYXNlJyxcclxuICAgICAgICAncnVudGltZS9jbGllbnQnXHJcbiAgICBdLCBmdW5jdGlvbiggQmFzZSwgUnVudGltZUNsaWVudCApIHtcclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIEJsb2IoIHJ1aWQsIHNvdXJjZSApIHtcclxuICAgICAgICAgICAgdmFyIG1lID0gdGhpcztcclxuICAgIFxyXG4gICAgICAgICAgICBtZS5zb3VyY2UgPSBzb3VyY2U7XHJcbiAgICAgICAgICAgIG1lLnJ1aWQgPSBydWlkO1xyXG4gICAgICAgICAgICB0aGlzLnNpemUgPSBzb3VyY2Uuc2l6ZSB8fCAwO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIOWmguaenOayoeacieaMh+WumiBtaW1ldHlwZSwg5L2G5piv55+l6YGT5paH5Lu25ZCO57yA44CCXHJcbiAgICAgICAgICAgIGlmICggIXNvdXJjZS50eXBlICYmIHRoaXMuZXh0ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgfidqcGcsanBlZyxwbmcsZ2lmLGJtcCcuaW5kZXhPZiggdGhpcy5leHQgKSApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudHlwZSA9ICdpbWFnZS8nICsgKHRoaXMuZXh0ID09PSAnanBnJyA/ICdqcGVnJyA6IHRoaXMuZXh0KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudHlwZSA9IHNvdXJjZS50eXBlIHx8ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgUnVudGltZUNsaWVudC5jYWxsKCBtZSwgJ0Jsb2InICk7XHJcbiAgICAgICAgICAgIHRoaXMudWlkID0gc291cmNlLnVpZCB8fCB0aGlzLnVpZDtcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoIHJ1aWQgKSB7XHJcbiAgICAgICAgICAgICAgICBtZS5jb25uZWN0UnVudGltZSggcnVpZCApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgQmFzZS5pbmhlcml0cyggUnVudGltZUNsaWVudCwge1xyXG4gICAgICAgICAgICBjb25zdHJ1Y3RvcjogQmxvYixcclxuICAgIFxyXG4gICAgICAgICAgICBzbGljZTogZnVuY3Rpb24oIHN0YXJ0LCBlbmQgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5leGVjKCAnc2xpY2UnLCBzdGFydCwgZW5kICk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgZ2V0U291cmNlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNvdXJjZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIEJsb2I7XHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICog5Li65LqG57uf5LiA5YyWRmxhc2jnmoRGaWxl5ZKMSFRNTDXnmoRGaWxl6ICM5a2Y5Zyo44CCXHJcbiAgICAgKiDku6Xoh7Pkuo7opoHosIPnlKhGbGFzaOmHjOmdoueahEZpbGXvvIzkuZ/lj6/ku6Xlg4/osIPnlKhIVE1MNeeJiOacrOeahEZpbGXkuIDkuIvjgIJcclxuICAgICAqIEBmaWxlT3ZlcnZpZXcgRmlsZVxyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ2xpYi9maWxlJyxbXHJcbiAgICAgICAgJ2Jhc2UnLFxyXG4gICAgICAgICdsaWIvYmxvYidcclxuICAgIF0sIGZ1bmN0aW9uKCBCYXNlLCBCbG9iICkge1xyXG4gICAgXHJcbiAgICAgICAgdmFyIHVpZCA9IDEsXHJcbiAgICAgICAgICAgIHJFeHQgPSAvXFwuKFteLl0rKSQvO1xyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gRmlsZSggcnVpZCwgZmlsZSApIHtcclxuICAgICAgICAgICAgdmFyIGV4dDtcclxuICAgIFxyXG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBmaWxlLm5hbWUgfHwgKCd1bnRpdGxlZCcgKyB1aWQrKyk7XHJcbiAgICAgICAgICAgIGV4dCA9IHJFeHQuZXhlYyggZmlsZS5uYW1lICkgPyBSZWdFeHAuJDEudG9Mb3dlckNhc2UoKSA6ICcnO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIHRvZG8g5pSv5oyB5YW25LuW57G75Z6L5paH5Lu255qE6L2s5o2i44CCXHJcbiAgICAgICAgICAgIC8vIOWmguaenOaciSBtaW1ldHlwZSwg5L2G5piv5paH5Lu25ZCN6YeM6Z2i5rKh5pyJ5om+5Ye65ZCO57yA6KeE5b6LXHJcbiAgICAgICAgICAgIGlmICggIWV4dCAmJiBmaWxlLnR5cGUgKSB7XHJcbiAgICAgICAgICAgICAgICBleHQgPSAvXFwvKGpwZ3xqcGVnfHBuZ3xnaWZ8Ym1wKSQvaS5leGVjKCBmaWxlLnR5cGUgKSA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlZ0V4cC4kMS50b0xvd2VyQ2FzZSgpIDogJyc7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5hbWUgKz0gJy4nICsgZXh0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgdGhpcy5leHQgPSBleHQ7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdE1vZGlmaWVkRGF0ZSA9IGZpbGUubGFzdE1vZGlmaWVkRGF0ZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIChuZXcgRGF0ZSgpKS50b0xvY2FsZVN0cmluZygpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIEJsb2IuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIHJldHVybiBCYXNlLmluaGVyaXRzKCBCbG9iLCBGaWxlICk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IOmUmeivr+S/oeaBr1xyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ2xpYi9maWxlcGlja2VyJyxbXHJcbiAgICAgICAgJ2Jhc2UnLFxyXG4gICAgICAgICdydW50aW1lL2NsaWVudCcsXHJcbiAgICAgICAgJ2xpYi9maWxlJ1xyXG4gICAgXSwgZnVuY3Rpb24oIEJhc2UsIFJ1bnRpbWVDbGllbnQsIEZpbGUgKSB7XHJcbiAgICBcclxuICAgICAgICB2YXIgJCA9IEJhc2UuJDtcclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIEZpbGVQaWNrZXIoIG9wdHMgKSB7XHJcbiAgICAgICAgICAgIG9wdHMgPSB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgRmlsZVBpY2tlci5vcHRpb25zLCBvcHRzICk7XHJcbiAgICBcclxuICAgICAgICAgICAgb3B0cy5jb250YWluZXIgPSAkKCBvcHRzLmlkICk7XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKCAhb3B0cy5jb250YWluZXIubGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfmjInpkq7mjIflrprplJnor68nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIG9wdHMuaW5uZXJIVE1MID0gb3B0cy5pbm5lckhUTUwgfHwgb3B0cy5sYWJlbCB8fFxyXG4gICAgICAgICAgICAgICAgICAgIG9wdHMuY29udGFpbmVyLmh0bWwoKSB8fCAnJztcclxuICAgIFxyXG4gICAgICAgICAgICBvcHRzLmJ1dHRvbiA9ICQoIG9wdHMuYnV0dG9uIHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpICk7XHJcbiAgICAgICAgICAgIG9wdHMuYnV0dG9uLmh0bWwoIG9wdHMuaW5uZXJIVE1MICk7XHJcbiAgICAgICAgICAgIG9wdHMuY29udGFpbmVyLmh0bWwoIG9wdHMuYnV0dG9uICk7XHJcbiAgICBcclxuICAgICAgICAgICAgUnVudGltZUNsaWVudC5jYWxsKCB0aGlzLCAnRmlsZVBpY2tlcicsIHRydWUgKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBGaWxlUGlja2VyLm9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGJ1dHRvbjogbnVsbCxcclxuICAgICAgICAgICAgY29udGFpbmVyOiBudWxsLFxyXG4gICAgICAgICAgICBsYWJlbDogbnVsbCxcclxuICAgICAgICAgICAgaW5uZXJIVE1MOiBudWxsLFxyXG4gICAgICAgICAgICBtdWx0aXBsZTogdHJ1ZSxcclxuICAgICAgICAgICAgYWNjZXB0OiBudWxsLFxyXG4gICAgICAgICAgICBuYW1lOiAnZmlsZScsXHJcbiAgICAgICAgICAgIHN0eWxlOiAnd2VidXBsb2FkZXItcGljaycgICAvL3BpY2sgZWxlbWVudCBjbGFzcyBhdHRyaWJ1dGUsIGRlZmF1bHQgaXMgXCJ3ZWJ1cGxvYWRlci1waWNrXCJcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgQmFzZS5pbmhlcml0cyggUnVudGltZUNsaWVudCwge1xyXG4gICAgICAgICAgICBjb25zdHJ1Y3RvcjogRmlsZVBpY2tlcixcclxuICAgIFxyXG4gICAgICAgICAgICBpbml0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZSA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cyA9IG1lLm9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uID0gb3B0cy5idXR0b24sXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUgPSBvcHRzLnN0eWxlO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoc3R5bGUpXHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmFkZENsYXNzKCd3ZWJ1cGxvYWRlci1waWNrJyk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG1lLm9uKCAnYWxsJywgZnVuY3Rpb24oIHR5cGUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVzO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggdHlwZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbW91c2VlbnRlcic6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3R5bGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmFkZENsYXNzKCd3ZWJ1cGxvYWRlci1waWNrLWhvdmVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdtb3VzZWxlYXZlJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHlsZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b24ucmVtb3ZlQ2xhc3MoJ3dlYnVwbG9hZGVyLXBpY2staG92ZXInKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NoYW5nZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlcyA9IG1lLmV4ZWMoJ2dldEZpbGVzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZS50cmlnZ2VyKCAnc2VsZWN0JywgJC5tYXAoIGZpbGVzLCBmdW5jdGlvbiggZmlsZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlID0gbmV3IEZpbGUoIG1lLmdldFJ1aWQoKSwgZmlsZSApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g6K6w5b2V5p2l5rqQ44CCXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZS5fcmVmZXIgPSBvcHRzLmNvbnRhaW5lcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBvcHRzLmNvbnRhaW5lciApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG1lLmNvbm5lY3RSdW50aW1lKCBvcHRzLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZS5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWUuZXhlYyggJ2luaXQnLCBvcHRzICk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWUudHJpZ2dlcigncmVhZHknKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZXNpemVIYW5kbGVyID0gQmFzZS5iaW5kRm4oIHRoaXMucmVmcmVzaCwgdGhpcyApO1xyXG4gICAgICAgICAgICAgICAgJCggd2luZG93ICkub24oICdyZXNpemUnLCB0aGlzLl9yZXNpemVIYW5kbGVyICk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgcmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2hpbUNvbnRhaW5lciA9IHRoaXMuZ2V0UnVudGltZSgpLmdldENvbnRhaW5lcigpLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbiA9IHRoaXMub3B0aW9ucy5idXR0b24sXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGggPSBidXR0b24ub3V0ZXJXaWR0aCA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b24ub3V0ZXJXaWR0aCgpIDogYnV0dG9uLndpZHRoKCksXHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQgPSBidXR0b24ub3V0ZXJIZWlnaHQgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLm91dGVySGVpZ2h0KCkgOiBidXR0b24uaGVpZ2h0KCksXHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBwb3MgPSBidXR0b24ub2Zmc2V0KCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHdpZHRoICYmIGhlaWdodCAmJiBzaGltQ29udGFpbmVyLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tOiAnYXV0bycsXHJcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6ICdhdXRvJyxcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogd2lkdGggKyAncHgnLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0ICsgJ3B4J1xyXG4gICAgICAgICAgICAgICAgfSkub2Zmc2V0KCBwb3MgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBlbmFibGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJ0biA9IHRoaXMub3B0aW9ucy5idXR0b247XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGJ0bi5yZW1vdmVDbGFzcygnd2VidXBsb2FkZXItcGljay1kaXNhYmxlJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBkaXNhYmxlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBidG4gPSB0aGlzLm9wdGlvbnMuYnV0dG9uO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldFJ1bnRpbWUoKS5nZXRDb250YWluZXIoKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIHRvcDogJy05OTk5OXB4J1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGJ0bi5hZGRDbGFzcygnd2VidXBsb2FkZXItcGljay1kaXNhYmxlJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYnRuID0gdGhpcy5vcHRpb25zLmJ1dHRvbjtcclxuICAgICAgICAgICAgICAgICQoIHdpbmRvdyApLm9mZiggJ3Jlc2l6ZScsIHRoaXMuX3Jlc2l6ZUhhbmRsZXIgKTtcclxuICAgICAgICAgICAgICAgIGJ0bi5yZW1vdmVDbGFzcygnd2VidXBsb2FkZXItcGljay1kaXNhYmxlIHdlYnVwbG9hZGVyLXBpY2staG92ZXIgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJ3dlYnVwbG9hZGVyLXBpY2snKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIEZpbGVQaWNrZXI7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IOaWh+S7tumAieaLqeebuOWFs1xyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ3dpZGdldHMvZmlsZXBpY2tlcicsW1xyXG4gICAgICAgICdiYXNlJyxcclxuICAgICAgICAndXBsb2FkZXInLFxyXG4gICAgICAgICdsaWIvZmlsZXBpY2tlcicsXHJcbiAgICAgICAgJ3dpZGdldHMvd2lkZ2V0J1xyXG4gICAgXSwgZnVuY3Rpb24oIEJhc2UsIFVwbG9hZGVyLCBGaWxlUGlja2VyICkge1xyXG4gICAgICAgIHZhciAkID0gQmFzZS4kO1xyXG4gICAgXHJcbiAgICAgICAgJC5leHRlbmQoIFVwbG9hZGVyLm9wdGlvbnMsIHtcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtTZWxlY3RvciB8IE9iamVjdH0gW3BpY2s9dW5kZWZpbmVkXVxyXG4gICAgICAgICAgICAgKiBAbmFtZXNwYWNlIG9wdGlvbnNcclxuICAgICAgICAgICAgICogQGZvciBVcGxvYWRlclxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g5oyH5a6a6YCJ5oup5paH5Lu255qE5oyJ6ZKu5a655Zmo77yM5LiN5oyH5a6a5YiZ5LiN5Yib5bu65oyJ6ZKu44CCXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqICogYGlkYCB7U2VsZXRvcnxkb219IOaMh+WumumAieaLqeaWh+S7tueahOaMiemSruWuueWZqO+8jOS4jeaMh+WumuWImeS4jeWIm+W7uuaMiemSruOAgioq5rOo5oSPKiog6L+Z6YeM6Jm954S25YaZ55qE5pivIGlkLCDkvYbmmK/kuI3mmK/lj6rmlK/mjIEgaWQsIOi/mOaUr+aMgSBjbGFzcywg5oiW6ICFIGRvbSDoioLngrnjgIJcclxuICAgICAgICAgICAgICogKiBgbGFiZWxgIHtTdHJpbmd9IOivt+mHh+eUqCBgaW5uZXJIVE1MYCDku6Pmm79cclxuICAgICAgICAgICAgICogKiBgaW5uZXJIVE1MYCB7U3RyaW5nfSDmjIflrprmjInpkq7mloflrZfjgILkuI3mjIflrprml7bkvJjlhYjku47mjIflrprnmoTlrrnlmajkuK3nnIvmmK/lkKboh6rluKbmloflrZfjgIJcclxuICAgICAgICAgICAgICogKiBgbXVsdGlwbGVgIHtCb29sZWFufSDmmK/lkKblvIDotbflkIzml7bpgInmi6nlpJrkuKrmlofku7bog73lipvjgIJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHBpY2s6IG51bGwsXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyb3l9IFthY2NlcHQ9bnVsbF1cclxuICAgICAgICAgICAgICogQG5hbWVzcGFjZSBvcHRpb25zXHJcbiAgICAgICAgICAgICAqIEBmb3IgVXBsb2FkZXJcclxuICAgICAgICAgICAgICogQGRlc2NyaXB0aW9uIOaMh+WumuaOpeWPl+WTquS6m+exu+Wei+eahOaWh+S7tuOAgiDnlLHkuo7nm67liY3ov5jmnIlleHTovaxtaW1lVHlwZeihqO+8jOaJgOS7pei/memHjOmcgOimgeWIhuW8gOaMh+WumuOAglxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiAqIGB0aXRsZWAge1N0cmluZ30g5paH5a2X5o+P6L+wXHJcbiAgICAgICAgICAgICAqICogYGV4dGVuc2lvbnNgIHtTdHJpbmd9IOWFgeiuuOeahOaWh+S7tuWQjue8gO+8jOS4jeW4pueCue+8jOWkmuS4queUqOmAl+WPt+WIhuWJsuOAglxyXG4gICAgICAgICAgICAgKiAqIGBtaW1lVHlwZXNgIHtTdHJpbmd9IOWkmuS4queUqOmAl+WPt+WIhuWJsuOAglxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiDlpoLvvJpcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogYGBgXHJcbiAgICAgICAgICAgICAqIHtcclxuICAgICAgICAgICAgICogICAgIHRpdGxlOiAnSW1hZ2VzJyxcclxuICAgICAgICAgICAgICogICAgIGV4dGVuc2lvbnM6ICdnaWYsanBnLGpwZWcsYm1wLHBuZycsXHJcbiAgICAgICAgICAgICAqICAgICBtaW1lVHlwZXM6ICdpbWFnZS8qJ1xyXG4gICAgICAgICAgICAgKiB9XHJcbiAgICAgICAgICAgICAqIGBgYFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgYWNjZXB0OiBudWxsLyp7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogJ0ltYWdlcycsXHJcbiAgICAgICAgICAgICAgICBleHRlbnNpb25zOiAnZ2lmLGpwZyxqcGVnLGJtcCxwbmcnLFxyXG4gICAgICAgICAgICAgICAgbWltZVR5cGVzOiAnaW1hZ2UvKidcclxuICAgICAgICAgICAgfSovXHJcbiAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gVXBsb2FkZXIucmVnaXN0ZXIoe1xyXG4gICAgICAgICAgICBuYW1lOiAncGlja2VyJyxcclxuICAgIFxyXG4gICAgICAgICAgICBpbml0OiBmdW5jdGlvbiggb3B0cyApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGlja2VycyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9wdHMucGljayAmJiB0aGlzLmFkZEJ0biggb3B0cy5waWNrICk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgcmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAkLmVhY2goIHRoaXMucGlja2VycywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQG1ldGhvZCBhZGRCdG5cclxuICAgICAgICAgICAgICogQGZvciBVcGxvYWRlclxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBhZGRCdG4oIHBpY2sgKSA9PiBQcm9taXNlXHJcbiAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAgICAgKiDmt7vliqDmlofku7bpgInmi6nmjInpkq7vvIzlpoLmnpzkuIDkuKrmjInpkq7kuI3lpJ/vvIzpnIDopoHosIPnlKjmraTmlrnms5XmnaXmt7vliqDjgILlj4LmlbDot59bb3B0aW9ucy5waWNrXSgjV2ViVXBsb2FkZXI6VXBsb2FkZXI6b3B0aW9ucynkuIDoh7TjgIJcclxuICAgICAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgICAgICogdXBsb2FkZXIuYWRkQnRuKHtcclxuICAgICAgICAgICAgICogICAgIGlkOiAnI2J0bkNvbnRhaW5lcicsXHJcbiAgICAgICAgICAgICAqICAgICBpbm5lckhUTUw6ICfpgInmi6nmlofku7YnXHJcbiAgICAgICAgICAgICAqIH0pO1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgYWRkQnRuOiBmdW5jdGlvbiggcGljayApIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZSA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cyA9IG1lLm9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjZXB0ID0gb3B0cy5hY2NlcHQsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXMgPSBbXTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCAhcGljayApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICQuaXNQbGFpbk9iamVjdCggcGljayApIHx8IChwaWNrID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBwaWNrXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgJCggcGljay5pZCApLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMsIHBpY2tlciwgZGVmZXJyZWQ7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZCA9IEJhc2UuRGVmZXJyZWQoKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgcGljaywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NlcHQ6ICQuaXNQbGFpbk9iamVjdCggYWNjZXB0ICkgPyBbIGFjY2VwdCBdIDogYWNjZXB0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2Y6IG9wdHMuc3dmLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBydW50aW1lT3JkZXI6IG9wdHMucnVudGltZU9yZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgcGlja2VyID0gbmV3IEZpbGVQaWNrZXIoIG9wdGlvbnMgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHBpY2tlci5vbmNlKCAncmVhZHknLCBkZWZlcnJlZC5yZXNvbHZlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgcGlja2VyLm9uKCAnc2VsZWN0JywgZnVuY3Rpb24oIGZpbGVzICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZS5vd25lci5yZXF1ZXN0KCAnYWRkLWZpbGUnLCBbIGZpbGVzIF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHBpY2tlci5vbignZGlhbG9nb3BlbicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZS5vd25lci50cmlnZ2VyKCdkaWFsb2dPcGVuJywgcGlja2VyLmJ1dHRvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcGlja2VyLmluaXQoKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIG1lLnBpY2tlcnMucHVzaCggcGlja2VyICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKCBkZWZlcnJlZC5wcm9taXNlKCkgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQmFzZS53aGVuLmFwcGx5KCBCYXNlLCBwcm9taXNlcyApO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIGRpc2FibGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgJC5lYWNoKCB0aGlzLnBpY2tlcnMsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgZW5hYmxlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICQuZWFjaCggdGhpcy5waWNrZXJzLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAkLmVhY2goIHRoaXMucGlja2VycywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGlja2VycyA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IEltYWdlXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgnbGliL2ltYWdlJyxbXHJcbiAgICAgICAgJ2Jhc2UnLFxyXG4gICAgICAgICdydW50aW1lL2NsaWVudCcsXHJcbiAgICAgICAgJ2xpYi9ibG9iJ1xyXG4gICAgXSwgZnVuY3Rpb24oIEJhc2UsIFJ1bnRpbWVDbGllbnQsIEJsb2IgKSB7XHJcbiAgICAgICAgdmFyICQgPSBCYXNlLiQ7XHJcbiAgICBcclxuICAgICAgICAvLyDmnoTpgKDlmajjgIJcclxuICAgICAgICBmdW5jdGlvbiBJbWFnZSggb3B0cyApIHtcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sIEltYWdlLm9wdGlvbnMsIG9wdHMgKTtcclxuICAgICAgICAgICAgUnVudGltZUNsaWVudC5jYWxsKCB0aGlzLCAnSW1hZ2UnICk7XHJcbiAgICBcclxuICAgICAgICAgICAgdGhpcy5vbiggJ2xvYWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2luZm8gPSB0aGlzLmV4ZWMoJ2luZm8nKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21ldGEgPSB0aGlzLmV4ZWMoJ21ldGEnKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLy8g6buY6K6k6YCJ6aG544CCXHJcbiAgICAgICAgSW1hZ2Uub3B0aW9ucyA9IHtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyDpu5jorqTnmoTlm77niYflpITnkIbotKjph49cclxuICAgICAgICAgICAgcXVhbGl0eTogOTAsXHJcbiAgICBcclxuICAgICAgICAgICAgLy8g5piv5ZCm6KOB5YmqXHJcbiAgICAgICAgICAgIGNyb3A6IGZhbHNlLFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIOaYr+WQpuS/neeVmeWktOmDqOS/oeaBr1xyXG4gICAgICAgICAgICBwcmVzZXJ2ZUhlYWRlcnM6IGZhbHNlLFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIOaYr+WQpuWFgeiuuOaUvuWkp+OAglxyXG4gICAgICAgICAgICBhbGxvd01hZ25pZnk6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIC8vIOe7p+aJv1J1bnRpbWVDbGllbnQuXHJcbiAgICAgICAgQmFzZS5pbmhlcml0cyggUnVudGltZUNsaWVudCwge1xyXG4gICAgICAgICAgICBjb25zdHJ1Y3RvcjogSW1hZ2UsXHJcbiAgICBcclxuICAgICAgICAgICAgaW5mbzogZnVuY3Rpb24oIHZhbCApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gc2V0dGVyXHJcbiAgICAgICAgICAgICAgICBpZiAoIHZhbCApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pbmZvID0gdmFsO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBnZXR0ZXJcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9pbmZvO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIG1ldGE6IGZ1bmN0aW9uKCB2YWwgKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIHNldHRlclxyXG4gICAgICAgICAgICAgICAgaWYgKCB2YWwgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWV0YSA9IHZhbDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gZ2V0dGVyXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fbWV0YTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBsb2FkRnJvbUJsb2I6IGZ1bmN0aW9uKCBibG9iICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICBydWlkID0gYmxvYi5nZXRSdWlkKCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdFJ1bnRpbWUoIHJ1aWQsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLmV4ZWMoICdpbml0JywgbWUub3B0aW9ucyApO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLmV4ZWMoICdsb2FkRnJvbUJsb2InLCBibG9iICk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBCYXNlLnNsaWNlKCBhcmd1bWVudHMgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmV4ZWMuYXBwbHkoIHRoaXMsIFsgJ3Jlc2l6ZScgXS5jb25jYXQoIGFyZ3MgKSApO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIGNyb3A6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBCYXNlLnNsaWNlKCBhcmd1bWVudHMgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmV4ZWMuYXBwbHkoIHRoaXMsIFsgJ2Nyb3AnIF0uY29uY2F0KCBhcmdzICkgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBnZXRBc0RhdGFVcmw6IGZ1bmN0aW9uKCB0eXBlICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhlYyggJ2dldEFzRGF0YVVybCcsIHR5cGUgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBnZXRBc0Jsb2I6IGZ1bmN0aW9uKCB0eXBlICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJsb2IgPSB0aGlzLmV4ZWMoICdnZXRBc0Jsb2InLCB0eXBlICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQmxvYiggdGhpcy5nZXRSdWlkKCksIGJsb2IgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIEltYWdlO1xyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIEBmaWxlT3ZlcnZpZXcg5Zu+54mH5pON5L2cLCDotJ/otKPpooTop4jlm77niYflkozkuIrkvKDliY3ljovnvKnlm77niYdcclxuICAgICAqL1xyXG4gICAgZGVmaW5lKCd3aWRnZXRzL2ltYWdlJyxbXHJcbiAgICAgICAgJ2Jhc2UnLFxyXG4gICAgICAgICd1cGxvYWRlcicsXHJcbiAgICAgICAgJ2xpYi9pbWFnZScsXHJcbiAgICAgICAgJ3dpZGdldHMvd2lkZ2V0J1xyXG4gICAgXSwgZnVuY3Rpb24oIEJhc2UsIFVwbG9hZGVyLCBJbWFnZSApIHtcclxuICAgIFxyXG4gICAgICAgIHZhciAkID0gQmFzZS4kLFxyXG4gICAgICAgICAgICB0aHJvdHRsZTtcclxuICAgIFxyXG4gICAgICAgIC8vIOagueaNruimgeWkhOeQhueahOaWh+S7tuWkp+Wwj+adpeiKgua1ge+8jOS4gOasoeS4jeiDveWkhOeQhuWkquWkmu+8jOS8muWNoeOAglxyXG4gICAgICAgIHRocm90dGxlID0gKGZ1bmN0aW9uKCBtYXggKSB7XHJcbiAgICAgICAgICAgIHZhciBvY2N1cGllZCA9IDAsXHJcbiAgICAgICAgICAgICAgICB3YWl0aW5nID0gW10sXHJcbiAgICAgICAgICAgICAgICB0aWNrID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoIHdhaXRpbmcubGVuZ3RoICYmIG9jY3VwaWVkIDwgbWF4ICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gd2FpdGluZy5zaGlmdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvY2N1cGllZCArPSBpdGVtWyAwIF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1bIDEgXSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCBlbWl0ZXIsIHNpemUsIGNiICkge1xyXG4gICAgICAgICAgICAgICAgd2FpdGluZy5wdXNoKFsgc2l6ZSwgY2IgXSk7XHJcbiAgICAgICAgICAgICAgICBlbWl0ZXIub25jZSggJ2Rlc3Ryb3knLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBvY2N1cGllZCAtPSBzaXplO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIHRpY2ssIDEgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggdGljaywgMSApO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pKCA1ICogMTAyNCAqIDEwMjQgKTtcclxuICAgIFxyXG4gICAgICAgICQuZXh0ZW5kKCBVcGxvYWRlci5vcHRpb25zLCB7XHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBbdGh1bWJdXHJcbiAgICAgICAgICAgICAqIEBuYW1lc3BhY2Ugb3B0aW9uc1xyXG4gICAgICAgICAgICAgKiBAZm9yIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiDphY3nva7nlJ/miJDnvKnnlaXlm77nmoTpgInpobnjgIJcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICog6buY6K6k5Li677yaXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAgICAgICAgICoge1xyXG4gICAgICAgICAgICAgKiAgICAgd2lkdGg6IDExMCxcclxuICAgICAgICAgICAgICogICAgIGhlaWdodDogMTEwLFxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiAgICAgLy8g5Zu+54mH6LSo6YeP77yM5Y+q5pyJdHlwZeS4umBpbWFnZS9qcGVnYOeahOaXtuWAmeaJjeacieaViOOAglxyXG4gICAgICAgICAgICAgKiAgICAgcXVhbGl0eTogNzAsXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqICAgICAvLyDmmK/lkKblhYHorrjmlL7lpKfvvIzlpoLmnpzmg7PopoHnlJ/miJDlsI/lm77nmoTml7blgJnkuI3lpLHnnJ/vvIzmraTpgInpobnlupTor6Xorr7nva7kuLpmYWxzZS5cclxuICAgICAgICAgICAgICogICAgIGFsbG93TWFnbmlmeTogdHJ1ZSxcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogICAgIC8vIOaYr+WQpuWFgeiuuOijgeWJquOAglxyXG4gICAgICAgICAgICAgKiAgICAgY3JvcDogdHJ1ZSxcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogICAgIC8vIOS4uuepuueahOivneWImeS/neeVmeWOn+acieWbvueJh+agvOW8j+OAglxyXG4gICAgICAgICAgICAgKiAgICAgLy8g5ZCm5YiZ5by65Yi26L2s5o2i5oiQ5oyH5a6a55qE57G75Z6L44CCXHJcbiAgICAgICAgICAgICAqICAgICB0eXBlOiAnaW1hZ2UvanBlZydcclxuICAgICAgICAgICAgICogfVxyXG4gICAgICAgICAgICAgKiBgYGBcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHRodW1iOiB7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMTEwLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMTAsXHJcbiAgICAgICAgICAgICAgICBxdWFsaXR5OiA3MCxcclxuICAgICAgICAgICAgICAgIGFsbG93TWFnbmlmeTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNyb3A6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBwcmVzZXJ2ZUhlYWRlcnM6IGZhbHNlLFxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDkuLrnqbrnmoTor53liJnkv53nlZnljp/mnInlm77niYfmoLzlvI/jgIJcclxuICAgICAgICAgICAgICAgIC8vIOWQpuWImeW8uuWItui9rOaNouaIkOaMh+WumueahOexu+Wei+OAglxyXG4gICAgICAgICAgICAgICAgLy8gSUUgOOS4i+mdoiBiYXNlNjQg5aSn5bCP5LiN6IO96LaF6L+HIDMySyDlkKbliJnpooTop4jlpLHotKXvvIzogIzpnZ4ganBlZyDnvJbnoIHnmoTlm77niYflvojlj69cclxuICAgICAgICAgICAgICAgIC8vIOiDveS8mui2hei/hyAzMmssIOaJgOS7pei/memHjOiuvue9ruaIkOmihOiniOeahOaXtuWAmemDveaYryBpbWFnZS9qcGVnXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnaW1hZ2UvanBlZydcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtPYmplY3R9IFtjb21wcmVzc11cclxuICAgICAgICAgICAgICogQG5hbWVzcGFjZSBvcHRpb25zXHJcbiAgICAgICAgICAgICAqIEBmb3IgVXBsb2FkZXJcclxuICAgICAgICAgICAgICogQGRlc2NyaXB0aW9uIOmFjee9ruWOi+e8qeeahOWbvueJh+eahOmAiemhueOAguWmguaenOatpOmAiemhueS4umBmYWxzZWAsIOWImeWbvueJh+WcqOS4iuS8oOWJjeS4jei/m+ihjOWOi+e8qeOAglxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiDpu5jorqTkuLrvvJpcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICAgICAgICAgKiB7XHJcbiAgICAgICAgICAgICAqICAgICB3aWR0aDogMTYwMCxcclxuICAgICAgICAgICAgICogICAgIGhlaWdodDogMTYwMCxcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogICAgIC8vIOWbvueJh+i0qOmHj++8jOWPquaciXR5cGXkuLpgaW1hZ2UvanBlZ2DnmoTml7blgJnmiY3mnInmlYjjgIJcclxuICAgICAgICAgICAgICogICAgIHF1YWxpdHk6IDkwLFxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiAgICAgLy8g5piv5ZCm5YWB6K645pS+5aSn77yM5aaC5p6c5oOz6KaB55Sf5oiQ5bCP5Zu+55qE5pe25YCZ5LiN5aSx55yf77yM5q2k6YCJ6aG55bqU6K+l6K6+572u5Li6ZmFsc2UuXHJcbiAgICAgICAgICAgICAqICAgICBhbGxvd01hZ25pZnk6IGZhbHNlLFxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiAgICAgLy8g5piv5ZCm5YWB6K646KOB5Ymq44CCXHJcbiAgICAgICAgICAgICAqICAgICBjcm9wOiBmYWxzZSxcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogICAgIC8vIOaYr+WQpuS/neeVmeWktOmDqG1ldGHkv6Hmga/jgIJcclxuICAgICAgICAgICAgICogICAgIHByZXNlcnZlSGVhZGVyczogdHJ1ZSxcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogICAgIC8vIOWmguaenOWPkeeOsOWOi+e8qeWQjuaWh+S7tuWkp+Wwj+avlOWOn+adpei/mOWkp++8jOWImeS9v+eUqOWOn+adpeWbvueJh1xyXG4gICAgICAgICAgICAgKiAgICAgLy8g5q2k5bGe5oCn5Y+v6IO95Lya5b2x5ZON5Zu+54mH6Ieq5Yqo57qg5q2j5Yqf6IO9XHJcbiAgICAgICAgICAgICAqICAgICBub0NvbXByZXNzSWZMYXJnZXI6IGZhbHNlLFxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiAgICAgLy8g5Y2V5L2N5a2X6IqC77yM5aaC5p6c5Zu+54mH5aSn5bCP5bCP5LqO5q2k5YC877yM5LiN5Lya6YeH55So5Y6L57yp44CCXHJcbiAgICAgICAgICAgICAqICAgICBjb21wcmVzc1NpemU6IDBcclxuICAgICAgICAgICAgICogfVxyXG4gICAgICAgICAgICAgKiBgYGBcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGNvbXByZXNzOiB7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMTYwMCxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMTYwMCxcclxuICAgICAgICAgICAgICAgIHF1YWxpdHk6IDkwLFxyXG4gICAgICAgICAgICAgICAgYWxsb3dNYWduaWZ5OiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGNyb3A6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgcHJlc2VydmVIZWFkZXJzOiB0cnVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBVcGxvYWRlci5yZWdpc3Rlcih7XHJcbiAgICBcclxuICAgICAgICAgICAgbmFtZTogJ2ltYWdlJyxcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiDnlJ/miJDnvKnnlaXlm77vvIzmraTov4fnqIvkuLrlvILmraXvvIzmiYDku6XpnIDopoHkvKDlhaVgY2FsbGJhY2tg44CCXHJcbiAgICAgICAgICAgICAqIOmAmuW4uOaDheWGteWcqOWbvueJh+WKoOWFpemYn+mHjOWQjuiwg+eUqOatpOaWueazleadpeeUn+aIkOmihOiniOWbvuS7peWinuW8uuS6pOS6kuaViOaenOOAglxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiDlvZMgd2lkdGgg5oiW6ICFIGhlaWdodCDnmoTlgLzku4vkuo4gMCAtIDEg5pe277yM6KKr5b2T5oiQ55m+5YiG5q+U5L2/55So44CCXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIGBjYWxsYmFja2DkuK3lj6/ku6XmjqXmlLbliLDkuKTkuKrlj4LmlbDjgIJcclxuICAgICAgICAgICAgICogKiDnrKzkuIDkuKrkuLplcnJvcu+8jOWmguaenOeUn+aIkOe8qeeVpeWbvuaciemUmeivr++8jOatpGVycm9y5bCG5Li655yf44CCXHJcbiAgICAgICAgICAgICAqICog56ys5LqM5Liq5Li6cmV0LCDnvKnnlaXlm77nmoREYXRhIFVSTOWAvOOAglxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiAqKuazqOaEjyoqXHJcbiAgICAgICAgICAgICAqIERhdGUgVVJM5ZyoSUU2LzfkuK3kuI3mlK/mjIHvvIzmiYDku6XkuI3nlKjosIPnlKjmraTmlrnms5XkuobvvIznm7TmjqXmmL7npLrkuIDlvKDmmoLkuI3mlK/mjIHpooTop4jlm77niYflpb3kuobjgIJcclxuICAgICAgICAgICAgICog5Lmf5Y+v5Lul5YCf5Yqp5pyN5Yqh56uv77yM5bCGIGJhc2U2NCDmlbDmja7kvKDnu5nmnI3liqHnq6/vvIznlJ/miJDkuIDkuKrkuLTml7bmlofku7bkvpvpooTop4jjgIJcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogQG1ldGhvZCBtYWtlVGh1bWJcclxuICAgICAgICAgICAgICogQGdyYW1tYXIgbWFrZVRodW1iKCBmaWxlLCBjYWxsYmFjayApID0+IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBtYWtlVGh1bWIoIGZpbGUsIGNhbGxiYWNrLCB3aWR0aCwgaGVpZ2h0ICkgPT4gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAqIEBmb3IgVXBsb2FkZXJcclxuICAgICAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogdXBsb2FkZXIub24oICdmaWxlUXVldWVkJywgZnVuY3Rpb24oIGZpbGUgKSB7XHJcbiAgICAgICAgICAgICAqICAgICB2YXIgJGxpID0gLi4uO1xyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiAgICAgdXBsb2FkZXIubWFrZVRodW1iKCBmaWxlLCBmdW5jdGlvbiggZXJyb3IsIHJldCApIHtcclxuICAgICAgICAgICAgICogICAgICAgICBpZiAoIGVycm9yICkge1xyXG4gICAgICAgICAgICAgKiAgICAgICAgICAgICAkbGkudGV4dCgn6aKE6KeI6ZSZ6K+vJyk7XHJcbiAgICAgICAgICAgICAqICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICogICAgICAgICAgICAgJGxpLmFwcGVuZCgnPGltZyBhbHQ9XCJcIiBzcmM9XCInICsgcmV0ICsgJ1wiIC8+Jyk7XHJcbiAgICAgICAgICAgICAqICAgICAgICAgfVxyXG4gICAgICAgICAgICAgKiAgICAgfSk7XHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIH0pO1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgbWFrZVRodW1iOiBmdW5jdGlvbiggZmlsZSwgY2IsIHdpZHRoLCBoZWlnaHQgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3B0cywgaW1hZ2U7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZpbGUgPSB0aGlzLnJlcXVlc3QoICdnZXQtZmlsZScsIGZpbGUgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g5Y+q6aKE6KeI5Zu+54mH5qC85byP44CCXHJcbiAgICAgICAgICAgICAgICBpZiAoICFmaWxlLnR5cGUubWF0Y2goIC9eaW1hZ2UvICkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2IoIHRydWUgKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG9wdHMgPSAkLmV4dGVuZCh7fSwgdGhpcy5vcHRpb25zLnRodW1iICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOWmguaenOS8oOWFpeeahOaYr29iamVjdC5cclxuICAgICAgICAgICAgICAgIGlmICggJC5pc1BsYWluT2JqZWN0KCB3aWR0aCApICkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdHMgPSAkLmV4dGVuZCggb3B0cywgd2lkdGggKTtcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHdpZHRoID0gd2lkdGggfHwgb3B0cy53aWR0aDtcclxuICAgICAgICAgICAgICAgIGhlaWdodCA9IGhlaWdodCB8fCBvcHRzLmhlaWdodDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaW1hZ2UgPSBuZXcgSW1hZ2UoIG9wdHMgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaW1hZ2Uub25jZSggJ2xvYWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlLl9pbmZvID0gZmlsZS5faW5mbyB8fCBpbWFnZS5pbmZvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZS5fbWV0YSA9IGZpbGUuX21ldGEgfHwgaW1hZ2UubWV0YSgpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6cIHdpZHRoIOeahOWAvOS7i+S6jiAwIC0gMVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOivtOaYjuiuvue9rueahOaYr+eZvuWIhuavlOOAglxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggd2lkdGggPD0gMSAmJiB3aWR0aCA+IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoID0gZmlsZS5faW5mby53aWR0aCAqIHdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWQjOagt+eahOinhOWImeW6lOeUqOS6jiBoZWlnaHRcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGhlaWdodCA8PSAxICYmIGhlaWdodCA+IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodCA9IGZpbGUuX2luZm8uaGVpZ2h0ICogaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlLnJlc2l6ZSggd2lkdGgsIGhlaWdodCApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOW9kyByZXNpemUg5a6M5ZCOXHJcbiAgICAgICAgICAgICAgICBpbWFnZS5vbmNlKCAnY29tcGxldGUnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYiggZmFsc2UsIGltYWdlLmdldEFzRGF0YVVybCggb3B0cy50eXBlICkgKTtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaW1hZ2Uub25jZSggJ2Vycm9yJywgZnVuY3Rpb24oIHJlYXNvbiApIHtcclxuICAgICAgICAgICAgICAgICAgICBjYiggcmVhc29uIHx8IHRydWUgKTtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdGhyb3R0bGUoIGltYWdlLCBmaWxlLnNvdXJjZS5zaXplLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlLl9pbmZvICYmIGltYWdlLmluZm8oIGZpbGUuX2luZm8gKTtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlLl9tZXRhICYmIGltYWdlLm1ldGEoIGZpbGUuX21ldGEgKTtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZS5sb2FkRnJvbUJsb2IoIGZpbGUuc291cmNlICk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBiZWZvcmVTZW5kRmlsZTogZnVuY3Rpb24oIGZpbGUgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucy5jb21wcmVzcyB8fCB0aGlzLm9wdGlvbnMucmVzaXplLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbXByZXNzU2l6ZSA9IG9wdHMgJiYgb3B0cy5jb21wcmVzc1NpemUgfHwgMCxcclxuICAgICAgICAgICAgICAgICAgICBub0NvbXByZXNzSWZMYXJnZXIgPSBvcHRzICYmIG9wdHMubm9Db21wcmVzc0lmTGFyZ2VyIHx8IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlLCBkZWZlcnJlZDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZmlsZSA9IHRoaXMucmVxdWVzdCggJ2dldC1maWxlJywgZmlsZSApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDlj6rljovnvKkganBlZyDlm77niYfmoLzlvI/jgIJcclxuICAgICAgICAgICAgICAgIC8vIGdpZiDlj6/og73kvJrkuKLlpLHpkohcclxuICAgICAgICAgICAgICAgIC8vIGJtcCBwbmcg5Z+65pys5LiK5bC65a+46YO95LiN5aSn77yM5LiU5Y6L57yp5q+U5q+U6L6D5bCP44CCXHJcbiAgICAgICAgICAgICAgICBpZiAoICFvcHRzIHx8ICF+J2ltYWdlL2pwZWcsaW1hZ2UvanBnJy5pbmRleE9mKCBmaWxlLnR5cGUgKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlLnNpemUgPCBjb21wcmVzc1NpemUgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZS5fY29tcHJlc3NlZCApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG9wdHMgPSAkLmV4dGVuZCh7fSwgb3B0cyApO1xyXG4gICAgICAgICAgICAgICAgZGVmZXJyZWQgPSBCYXNlLkRlZmVycmVkKCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGltYWdlID0gbmV3IEltYWdlKCBvcHRzICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGRlZmVycmVkLmFsd2F5cyhmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2UgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpbWFnZS5vbmNlKCAnZXJyb3InLCBkZWZlcnJlZC5yZWplY3QgKTtcclxuICAgICAgICAgICAgICAgIGltYWdlLm9uY2UoICdsb2FkJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gb3B0cy53aWR0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ID0gb3B0cy5oZWlnaHQ7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBmaWxlLl9pbmZvID0gZmlsZS5faW5mbyB8fCBpbWFnZS5pbmZvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZS5fbWV0YSA9IGZpbGUuX21ldGEgfHwgaW1hZ2UubWV0YSgpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6cIHdpZHRoIOeahOWAvOS7i+S6jiAwIC0gMVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOivtOaYjuiuvue9rueahOaYr+eZvuWIhuavlOOAglxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggd2lkdGggPD0gMSAmJiB3aWR0aCA+IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoID0gZmlsZS5faW5mby53aWR0aCAqIHdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWQjOagt+eahOinhOWImeW6lOeUqOS6jiBoZWlnaHRcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGhlaWdodCA8PSAxICYmIGhlaWdodCA+IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodCA9IGZpbGUuX2luZm8uaGVpZ2h0ICogaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlLnJlc2l6ZSggd2lkdGgsIGhlaWdodCApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGltYWdlLm9uY2UoICdjb21wbGV0ZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBibG9iLCBzaXplO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g56e75Yqo56uvIFVDIC8gcXEg5rWP6KeI5Zmo55qE5peg5Zu+5qih5byP5LiLXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY3R4LmdldEltYWdlRGF0YSDlpITnkIblpKflm77nmoTml7blgJnkvJrmiqUgRXhjZXB0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSU5ERVhfU0laRV9FUlI6IERPTSBFeGNlcHRpb24gMVxyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2IgPSBpbWFnZS5nZXRBc0Jsb2IoIG9wdHMudHlwZSApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemUgPSBmaWxlLnNpemU7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c5Y6L57yp5ZCO77yM5q+U5Y6f5p2l6L+Y5aSn5YiZ5LiN55So5Y6L57yp5ZCO55qE44CCXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggIW5vQ29tcHJlc3NJZkxhcmdlciB8fCBibG9iLnNpemUgPCBzaXplICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmlsZS5zb3VyY2UuZGVzdHJveSAmJiBmaWxlLnNvdXJjZS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlLnNvdXJjZSA9IGJsb2I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlLnNpemUgPSBibG9iLnNpemU7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUudHJpZ2dlciggJ3Jlc2l6ZScsIGJsb2Iuc2l6ZSwgc2l6ZSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5qCH6K6w77yM6YG/5YWN6YeN5aSN5Y6L57yp44CCXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUuX2NvbXByZXNzZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoIGUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWHuumUmeS6huebtOaOpee7p+e7re+8jOiuqeWFtuS4iuS8oOWOn+Wni+WbvueJh1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZpbGUuX2luZm8gJiYgaW1hZ2UuaW5mbyggZmlsZS5faW5mbyApO1xyXG4gICAgICAgICAgICAgICAgZmlsZS5fbWV0YSAmJiBpbWFnZS5tZXRhKCBmaWxlLl9tZXRhICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGltYWdlLmxvYWRGcm9tQmxvYiggZmlsZS5zb3VyY2UgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IOaWh+S7tuWxnuaAp+WwgeijhVxyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ2ZpbGUnLFtcclxuICAgICAgICAnYmFzZScsXHJcbiAgICAgICAgJ21lZGlhdG9yJ1xyXG4gICAgXSwgZnVuY3Rpb24oIEJhc2UsIE1lZGlhdG9yICkge1xyXG4gICAgXHJcbiAgICAgICAgdmFyICQgPSBCYXNlLiQsXHJcbiAgICAgICAgICAgIGlkUHJlZml4ID0gJ1dVX0ZJTEVfJyxcclxuICAgICAgICAgICAgaWRTdWZmaXggPSAwLFxyXG4gICAgICAgICAgICByRXh0ID0gL1xcLihbXi5dKykkLyxcclxuICAgICAgICAgICAgc3RhdHVzTWFwID0ge307XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBnaWQoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpZFByZWZpeCArIGlkU3VmZml4Kys7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5paH5Lu257G7XHJcbiAgICAgICAgICogQGNsYXNzIEZpbGVcclxuICAgICAgICAgKiBAY29uc3RydWN0b3Ig5p6E6YCg5Ye95pWwXHJcbiAgICAgICAgICogQGdyYW1tYXIgbmV3IEZpbGUoIHNvdXJjZSApID0+IEZpbGVcclxuICAgICAgICAgKiBAcGFyYW0ge0xpYi5GaWxlfSBzb3VyY2UgW2xpYi5GaWxlXSgjTGliLkZpbGUp5a6e5L6LLCDmraRzb3VyY2Xlr7nosaHmmK/luKbmnIlSdW50aW1l5L+h5oGv55qE44CCXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gV1VGaWxlKCBzb3VyY2UgKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOaWh+S7tuWQje+8jOWMheaLrOaJqeWxleWQje+8iOWQjue8gO+8iVxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkgbmFtZVxyXG4gICAgICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdGhpcy5uYW1lID0gc291cmNlLm5hbWUgfHwgJ1VudGl0bGVkJztcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICog5paH5Lu25L2T56ev77yI5a2X6IqC77yJXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSBzaXplXHJcbiAgICAgICAgICAgICAqIEB0eXBlIHt1aW50fVxyXG4gICAgICAgICAgICAgKiBAZGVmYXVsdCAwXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICB0aGlzLnNpemUgPSBzb3VyY2Uuc2l6ZSB8fCAwO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiDmlofku7ZNSU1FVFlQReexu+Wei++8jOS4juaWh+S7tuexu+Wei+eahOWvueW6lOWFs+ezu+ivt+WPguiAg1todHRwOi8vdC5jbi96OFpuRm55XShodHRwOi8vdC5jbi96OFpuRm55KVxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkgdHlwZVxyXG4gICAgICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxyXG4gICAgICAgICAgICAgKiBAZGVmYXVsdCAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJ1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdGhpcy50eXBlID0gc291cmNlLnR5cGUgfHwgJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSc7XHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOaWh+S7tuacgOWQjuS/ruaUueaXpeacn1xyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkgbGFzdE1vZGlmaWVkRGF0ZVxyXG4gICAgICAgICAgICAgKiBAdHlwZSB7aW50fVxyXG4gICAgICAgICAgICAgKiBAZGVmYXVsdCDlvZPliY3ml7bpl7TmiLNcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHRoaXMubGFzdE1vZGlmaWVkRGF0ZSA9IHNvdXJjZS5sYXN0TW9kaWZpZWREYXRlIHx8IChuZXcgRGF0ZSgpICogMSk7XHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOaWh+S7tklE77yM5q+P5Liq5a+56LGh5YW35pyJ5ZSv5LiASUTvvIzkuI7mlofku7blkI3ml6DlhbNcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IGlkXHJcbiAgICAgICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICB0aGlzLmlkID0gZ2lkKCk7XHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOaWh+S7tuaJqeWxleWQje+8jOmAmui/h+aWh+S7tuWQjeiOt+WPlu+8jOS+i+WmgnRlc3QucG5n55qE5omp5bGV5ZCN5Li6cG5nXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSBleHRcclxuICAgICAgICAgICAgICogQHR5cGUge3N0cmluZ31cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHRoaXMuZXh0ID0gckV4dC5leGVjKCB0aGlzLm5hbWUgKSA/IFJlZ0V4cC4kMSA6ICcnO1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOeKtuaAgeaWh+Wtl+ivtOaYjuOAguWcqOS4jeWQjOeahHN0YXR1c+ivreWig+S4i+acieS4jeWQjOeahOeUqOmAlOOAglxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkgc3RhdHVzVGV4dFxyXG4gICAgICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdGhpcy5zdGF0dXNUZXh0ID0gJyc7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8g5a2Y5YKo5paH5Lu254q25oCB77yM6Ziy5q2i6YCa6L+H5bGe5oCn55u05o6l5L+u5pS5XHJcbiAgICAgICAgICAgIHN0YXR1c01hcFsgdGhpcy5pZCBdID0gV1VGaWxlLlN0YXR1cy5JTklURUQ7XHJcbiAgICBcclxuICAgICAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZGVkID0gMDtcclxuICAgIFxyXG4gICAgICAgICAgICB0aGlzLm9uKCAnZXJyb3InLCBmdW5jdGlvbiggbXNnICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0dXMoIFdVRmlsZS5TdGF0dXMuRVJST1IsIG1zZyApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAkLmV4dGVuZCggV1VGaWxlLnByb3RvdHlwZSwge1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiDorr7nva7nirbmgIHvvIznirbmgIHlj5jljJbml7bkvJrop6blj5FgY2hhbmdlYOS6i+S7tuOAglxyXG4gICAgICAgICAgICAgKiBAbWV0aG9kIHNldFN0YXR1c1xyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBzZXRTdGF0dXMoIHN0YXR1c1ssIHN0YXR1c1RleHRdICk7XHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZS5TdGF0dXN8U3RyaW5nfSBzdGF0dXMgW+aWh+S7tueKtuaAgeWAvF0oI1dlYlVwbG9hZGVyOkZpbGU6RmlsZS5TdGF0dXMpXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbc3RhdHVzVGV4dD0nJ10g54q25oCB6K+05piO77yM5bi45ZyoZXJyb3Lml7bkvb/nlKjvvIznlKhodHRwLCBhYm9ydCxzZXJ2ZXLnrYnmnaXmoIforrDmmK/nlLHkuo7ku4DkuYjljp/lm6Dlr7zoh7Tmlofku7bplJnor6/jgIJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHNldFN0YXR1czogZnVuY3Rpb24oIHN0YXR1cywgdGV4dCApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdmFyIHByZXZTdGF0dXMgPSBzdGF0dXNNYXBbIHRoaXMuaWQgXTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdHlwZW9mIHRleHQgIT09ICd1bmRlZmluZWQnICYmICh0aGlzLnN0YXR1c1RleHQgPSB0ZXh0KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCBzdGF0dXMgIT09IHByZXZTdGF0dXMgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzTWFwWyB0aGlzLmlkIF0gPSBzdGF0dXM7XHJcbiAgICAgICAgICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAgICAgICAgICog5paH5Lu254q25oCB5Y+Y5YyWXHJcbiAgICAgICAgICAgICAgICAgICAgICogQGV2ZW50IHN0YXR1c2NoYW5nZVxyXG4gICAgICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlciggJ3N0YXR1c2NoYW5nZScsIHN0YXR1cywgcHJldlN0YXR1cyApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOiOt+WPluaWh+S7tueKtuaAgVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJuIHtGaWxlLlN0YXR1c31cclxuICAgICAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgICAgICAgICAgICAg5paH5Lu254q25oCB5YW35L2T5YyF5ous5Lul5LiL5Yeg56eN57G75Z6L77yaXHJcbiAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWIneWni+WMllxyXG4gICAgICAgICAgICAgICAgICAgICAgICBJTklURUQ6ICAgICAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDlt7LlhaXpmJ/liJdcclxuICAgICAgICAgICAgICAgICAgICAgICAgUVVFVUVEOiAgICAgMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5q2j5Zyo5LiK5LygXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFBST0dSRVNTOiAgICAgMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5LiK5Lyg5Ye66ZSZXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEVSUk9SOiAgICAgICAgIDMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOS4iuS8oOaIkOWKn1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDT01QTEVURTogICAgIDQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOS4iuS8oOWPlua2iFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBDQU5DRUxMRUQ6ICAgICA1XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZ2V0U3RhdHVzOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdGF0dXNNYXBbIHRoaXMuaWQgXTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICog6I635Y+W5paH5Lu25Y6f5aeL5L+h5oGv44CCXHJcbiAgICAgICAgICAgICAqIEByZXR1cm4geyp9XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBnZXRTb3VyY2U6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vZmYoKTtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBzdGF0dXNNYXBbIHRoaXMuaWQgXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgTWVkaWF0b3IuaW5zdGFsbFRvKCBXVUZpbGUucHJvdG90eXBlICk7XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDmlofku7bnirbmgIHlgLzvvIzlhbfkvZPljIXmi6zku6XkuIvlh6Dnp43nsbvlnovvvJpcclxuICAgICAgICAgKiAqIGBpbml0ZWRgIOWIneWni+eKtuaAgVxyXG4gICAgICAgICAqICogYHF1ZXVlZGAg5bey57uP6L+b5YWl6Zif5YiXLCDnrYnlvoXkuIrkvKBcclxuICAgICAgICAgKiAqIGBwcm9ncmVzc2Ag5LiK5Lyg5LitXHJcbiAgICAgICAgICogKiBgY29tcGxldGVgIOS4iuS8oOWujOaIkOOAglxyXG4gICAgICAgICAqICogYGVycm9yYCDkuIrkvKDlh7rplJnvvIzlj6/ph43or5VcclxuICAgICAgICAgKiAqIGBpbnRlcnJ1cHRgIOS4iuS8oOS4reaWre+8jOWPr+e7reS8oOOAglxyXG4gICAgICAgICAqICogYGludmFsaWRgIOaWh+S7tuS4jeWQiOagvO+8jOS4jeiDvemHjeivleS4iuS8oOOAguS8muiHquWKqOS7jumYn+WIl+S4reenu+mZpOOAglxyXG4gICAgICAgICAqICogYGNhbmNlbGxlZGAg5paH5Lu26KKr56e76Zmk44CCXHJcbiAgICAgICAgICogQHByb3BlcnR5IHtPYmplY3R9IFN0YXR1c1xyXG4gICAgICAgICAqIEBuYW1lc3BhY2UgRmlsZVxyXG4gICAgICAgICAqIEBjbGFzcyBGaWxlXHJcbiAgICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFdVRmlsZS5TdGF0dXMgPSB7XHJcbiAgICAgICAgICAgIElOSVRFRDogICAgICdpbml0ZWQnLCAgICAvLyDliJ3lp4vnirbmgIFcclxuICAgICAgICAgICAgUVVFVUVEOiAgICAgJ3F1ZXVlZCcsICAgIC8vIOW3sue7j+i/m+WFpemYn+WIlywg562J5b6F5LiK5LygXHJcbiAgICAgICAgICAgIFBST0dSRVNTOiAgICdwcm9ncmVzcycsICAgIC8vIOS4iuS8oOS4rVxyXG4gICAgICAgICAgICBFUlJPUjogICAgICAnZXJyb3InLCAgICAvLyDkuIrkvKDlh7rplJnvvIzlj6/ph43or5VcclxuICAgICAgICAgICAgQ09NUExFVEU6ICAgJ2NvbXBsZXRlJywgICAgLy8g5LiK5Lyg5a6M5oiQ44CCXHJcbiAgICAgICAgICAgIENBTkNFTExFRDogICdjYW5jZWxsZWQnLCAgICAvLyDkuIrkvKDlj5bmtojjgIJcclxuICAgICAgICAgICAgSU5URVJSVVBUOiAgJ2ludGVycnVwdCcsICAgIC8vIOS4iuS8oOS4reaWre+8jOWPr+e7reS8oOOAglxyXG4gICAgICAgICAgICBJTlZBTElEOiAgICAnaW52YWxpZCcgICAgLy8g5paH5Lu25LiN5ZCI5qC877yM5LiN6IO96YeN6K+V5LiK5Lyg44CCXHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBXVUZpbGU7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IOaWh+S7tumYn+WIl1xyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ3F1ZXVlJyxbXHJcbiAgICAgICAgJ2Jhc2UnLFxyXG4gICAgICAgICdtZWRpYXRvcicsXHJcbiAgICAgICAgJ2ZpbGUnXHJcbiAgICBdLCBmdW5jdGlvbiggQmFzZSwgTWVkaWF0b3IsIFdVRmlsZSApIHtcclxuICAgIFxyXG4gICAgICAgIHZhciAkID0gQmFzZS4kLFxyXG4gICAgICAgICAgICBTVEFUVVMgPSBXVUZpbGUuU3RhdHVzO1xyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5paH5Lu26Zif5YiXLCDnlKjmnaXlrZjlgqjlkITkuKrnirbmgIHkuK3nmoTmlofku7bjgIJcclxuICAgICAgICAgKiBAY2xhc3MgUXVldWVcclxuICAgICAgICAgKiBAZXh0ZW5kcyBNZWRpYXRvclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIFF1ZXVlKCkge1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiDnu5/orqHmlofku7bmlbDjgIJcclxuICAgICAgICAgICAgICogKiBgbnVtT2ZRdWV1ZWAg6Zif5YiX5Lit55qE5paH5Lu25pWw44CCXHJcbiAgICAgICAgICAgICAqICogYG51bU9mU3VjY2Vzc2Ag5LiK5Lyg5oiQ5Yqf55qE5paH5Lu25pWwXHJcbiAgICAgICAgICAgICAqICogYG51bU9mQ2FuY2VsYCDooqvlj5bmtojnmoTmlofku7bmlbBcclxuICAgICAgICAgICAgICogKiBgbnVtT2ZQcm9ncmVzc2Ag5q2j5Zyo5LiK5Lyg5Lit55qE5paH5Lu25pWwXHJcbiAgICAgICAgICAgICAqICogYG51bU9mVXBsb2FkRmFpbGVkYCDkuIrkvKDplJnor6/nmoTmlofku7bmlbDjgIJcclxuICAgICAgICAgICAgICogKiBgbnVtT2ZJbnZhbGlkYCDml6DmlYjnmoTmlofku7bmlbDjgIJcclxuICAgICAgICAgICAgICogKiBgbnVtb2ZEZWxldGVkYCDooqvnp7vpmaTnmoTmlofku7bmlbDjgIJcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtPYmplY3R9IHN0YXRzXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRzID0ge1xyXG4gICAgICAgICAgICAgICAgbnVtT2ZRdWV1ZTogMCxcclxuICAgICAgICAgICAgICAgIG51bU9mU3VjY2VzczogMCxcclxuICAgICAgICAgICAgICAgIG51bU9mQ2FuY2VsOiAwLFxyXG4gICAgICAgICAgICAgICAgbnVtT2ZQcm9ncmVzczogMCxcclxuICAgICAgICAgICAgICAgIG51bU9mVXBsb2FkRmFpbGVkOiAwLFxyXG4gICAgICAgICAgICAgICAgbnVtT2ZJbnZhbGlkOiAwLFxyXG4gICAgICAgICAgICAgICAgbnVtb2ZEZWxldGVkOiAwLFxyXG4gICAgICAgICAgICAgICAgbnVtb2ZJbnRlcnJ1cHQ6IDBcclxuICAgICAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyDkuIrkvKDpmJ/liJfvvIzku4XljIXmi6znrYnlvoXkuIrkvKDnmoTmlofku7ZcclxuICAgICAgICAgICAgdGhpcy5fcXVldWUgPSBbXTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyDlrZjlgqjmiYDmnInmlofku7ZcclxuICAgICAgICAgICAgdGhpcy5fbWFwID0ge307XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgJC5leHRlbmQoIFF1ZXVlLnByb3RvdHlwZSwge1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiDlsIbmlrDmlofku7bliqDlhaXlr7npmJ/liJflsL7pg6hcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogQG1ldGhvZCBhcHBlbmRcclxuICAgICAgICAgICAgICogQHBhcmFtICB7RmlsZX0gZmlsZSAgIOaWh+S7tuWvueixoVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgYXBwZW5kOiBmdW5jdGlvbiggZmlsZSApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3F1ZXVlLnB1c2goIGZpbGUgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2ZpbGVBZGRlZCggZmlsZSApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOWwhuaWsOaWh+S7tuWKoOWFpeWvuemYn+WIl+WktOmDqFxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBAbWV0aG9kIHByZXBlbmRcclxuICAgICAgICAgICAgICogQHBhcmFtICB7RmlsZX0gZmlsZSAgIOaWh+S7tuWvueixoVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgcHJlcGVuZDogZnVuY3Rpb24oIGZpbGUgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9xdWV1ZS51bnNoaWZ0KCBmaWxlICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9maWxlQWRkZWQoIGZpbGUgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiDojrflj5bmlofku7blr7nosaFcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogQG1ldGhvZCBnZXRGaWxlXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSAge1N0cmluZ30gZmlsZUlkICAg5paH5Lu2SURcclxuICAgICAgICAgICAgICogQHJldHVybiB7RmlsZX1cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGdldEZpbGU6IGZ1bmN0aW9uKCBmaWxlSWQgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHR5cGVvZiBmaWxlSWQgIT09ICdzdHJpbmcnICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWxlSWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fbWFwWyBmaWxlSWQgXTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICog5LuO6Zif5YiX5Lit5Y+W5Ye65LiA5Liq5oyH5a6a54q25oCB55qE5paH5Lu244CCXHJcbiAgICAgICAgICAgICAqIEBncmFtbWFyIGZldGNoKCBzdGF0dXMgKSA9PiBGaWxlXHJcbiAgICAgICAgICAgICAqIEBtZXRob2QgZmV0Y2hcclxuICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHN0YXR1cyBb5paH5Lu254q25oCB5YC8XSgjV2ViVXBsb2FkZXI6RmlsZTpGaWxlLlN0YXR1cylcclxuICAgICAgICAgICAgICogQHJldHVybiB7RmlsZX0gW0ZpbGVdKCNXZWJVcGxvYWRlcjpGaWxlKVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZmV0Y2g6IGZ1bmN0aW9uKCBzdGF0dXMgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGVuID0gdGhpcy5fcXVldWUubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgIGksIGZpbGU7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHN0YXR1cyA9IHN0YXR1cyB8fCBTVEFUVVMuUVVFVUVEO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbGUgPSB0aGlzLl9xdWV1ZVsgaSBdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBzdGF0dXMgPT09IGZpbGUuZ2V0U3RhdHVzKCkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWxlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOWvuemYn+WIl+i/m+ihjOaOkuW6j++8jOiDveWkn+aOp+WItuaWh+S7tuS4iuS8oOmhuuW6j+OAglxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBzb3J0KCBmbiApID0+IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgKiBAbWV0aG9kIHNvcnRcclxuICAgICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4g5o6S5bqP5pa55rOVXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBzb3J0OiBmdW5jdGlvbiggZm4gKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJyApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9xdWV1ZS5zb3J0KCBmbiApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiDojrflj5bmjIflrprnsbvlnovnmoTmlofku7bliJfooagsIOWIl+ihqOS4reavj+S4gOS4quaIkOWRmOS4ultGaWxlXSgjV2ViVXBsb2FkZXI6RmlsZSnlr7nosaHjgIJcclxuICAgICAgICAgICAgICogQGdyYW1tYXIgZ2V0RmlsZXMoIFtzdGF0dXMxWywgc3RhdHVzMiAuLi5dXSApID0+IEFycmF5XHJcbiAgICAgICAgICAgICAqIEBtZXRob2QgZ2V0RmlsZXNcclxuICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IFtzdGF0dXNdIFvmlofku7bnirbmgIHlgLxdKCNXZWJVcGxvYWRlcjpGaWxlOkZpbGUuU3RhdHVzKVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZ2V0RmlsZXM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0cyA9IFtdLnNsaWNlLmNhbGwoIGFyZ3VtZW50cywgMCApLFxyXG4gICAgICAgICAgICAgICAgICAgIHJldCA9IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIGkgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGxlbiA9IHRoaXMuX3F1ZXVlLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICBmaWxlO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlID0gdGhpcy5fcXVldWVbIGkgXTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggc3RzLmxlbmd0aCAmJiAhfiQuaW5BcnJheSggZmlsZS5nZXRTdGF0dXMoKSwgc3RzICkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldC5wdXNoKCBmaWxlICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOWcqOmYn+WIl+S4reWIoOmZpOaWh+S7tuOAglxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciByZW1vdmVGaWxlKCBmaWxlICkgPT4gQXJyYXlcclxuICAgICAgICAgICAgICogQG1ldGhvZCByZW1vdmVGaWxlXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZX0g5paH5Lu25a+56LGh44CCXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICByZW1vdmVGaWxlOiBmdW5jdGlvbiggZmlsZSApIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZSA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcgPSB0aGlzLl9tYXBbIGZpbGUuaWQgXTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCBleGlzdGluZyApIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fbWFwWyBmaWxlLmlkIF07XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0cy5udW1vZkRlbGV0ZWQrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBfZmlsZUFkZGVkOiBmdW5jdGlvbiggZmlsZSApIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZSA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcgPSB0aGlzLl9tYXBbIGZpbGUuaWQgXTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCAhZXhpc3RpbmcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFwWyBmaWxlLmlkIF0gPSBmaWxlO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZS5vbiggJ3N0YXR1c2NoYW5nZScsIGZ1bmN0aW9uKCBjdXIsIHByZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWUuX29uRmlsZVN0YXR1c0NoYW5nZSggY3VyLCBwcmUgKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBfb25GaWxlU3RhdHVzQ2hhbmdlOiBmdW5jdGlvbiggY3VyU3RhdHVzLCBwcmVTdGF0dXMgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RhdHMgPSB0aGlzLnN0YXRzO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKCBwcmVTdGF0dXMgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBTVEFUVVMuUFJPR1JFU1M6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzLm51bU9mUHJvZ3Jlc3MtLTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFNUQVRVUy5RVUVVRUQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzLm51bU9mUXVldWUgLS07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBTVEFUVVMuRVJST1I6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzLm51bU9mVXBsb2FkRmFpbGVkLS07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBTVEFUVVMuSU5WQUxJRDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHMubnVtT2ZJbnZhbGlkLS07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBTVEFUVVMuSU5URVJSVVBUOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0cy5udW1vZkludGVycnVwdC0tO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgc3dpdGNoICggY3VyU3RhdHVzICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgU1RBVFVTLlFVRVVFRDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHMubnVtT2ZRdWV1ZSsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgU1RBVFVTLlBST0dSRVNTOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0cy5udW1PZlByb2dyZXNzKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBTVEFUVVMuRVJST1I6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzLm51bU9mVXBsb2FkRmFpbGVkKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBTVEFUVVMuQ09NUExFVEU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzLm51bU9mU3VjY2VzcysrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgU1RBVFVTLkNBTkNFTExFRDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHMubnVtT2ZDYW5jZWwrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgU1RBVFVTLklOVkFMSUQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzLm51bU9mSW52YWxpZCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgU1RBVFVTLklOVEVSUlVQVDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHMubnVtb2ZJbnRlcnJ1cHQrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgTWVkaWF0b3IuaW5zdGFsbFRvKCBRdWV1ZS5wcm90b3R5cGUgKTtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBRdWV1ZTtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IOmYn+WIl1xyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ3dpZGdldHMvcXVldWUnLFtcclxuICAgICAgICAnYmFzZScsXHJcbiAgICAgICAgJ3VwbG9hZGVyJyxcclxuICAgICAgICAncXVldWUnLFxyXG4gICAgICAgICdmaWxlJyxcclxuICAgICAgICAnbGliL2ZpbGUnLFxyXG4gICAgICAgICdydW50aW1lL2NsaWVudCcsXHJcbiAgICAgICAgJ3dpZGdldHMvd2lkZ2V0J1xyXG4gICAgXSwgZnVuY3Rpb24oIEJhc2UsIFVwbG9hZGVyLCBRdWV1ZSwgV1VGaWxlLCBGaWxlLCBSdW50aW1lQ2xpZW50ICkge1xyXG4gICAgXHJcbiAgICAgICAgdmFyICQgPSBCYXNlLiQsXHJcbiAgICAgICAgICAgIHJFeHQgPSAvXFwuXFx3KyQvLFxyXG4gICAgICAgICAgICBTdGF0dXMgPSBXVUZpbGUuU3RhdHVzO1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIFVwbG9hZGVyLnJlZ2lzdGVyKHtcclxuICAgICAgICAgICAgbmFtZTogJ3F1ZXVlJyxcclxuICAgIFxyXG4gICAgICAgICAgICBpbml0OiBmdW5jdGlvbiggb3B0cyApIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZSA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQsIGxlbiwgaSwgaXRlbSwgYXJyLCBhY2NlcHQsIHJ1bnRpbWU7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmICggJC5pc1BsYWluT2JqZWN0KCBvcHRzLmFjY2VwdCApICkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdHMuYWNjZXB0ID0gWyBvcHRzLmFjY2VwdCBdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBhY2NlcHTkuK3nmoTkuK3nlJ/miJDljLnphY3mraPliJnjgIJcclxuICAgICAgICAgICAgICAgIGlmICggb3B0cy5hY2NlcHQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyID0gW107XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKCBpID0gMCwgbGVuID0gb3B0cy5hY2NlcHQubGVuZ3RoOyBpIDwgbGVuOyBpKysgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBvcHRzLmFjY2VwdFsgaSBdLmV4dGVuc2lvbnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gJiYgYXJyLnB1c2goIGl0ZW0gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGFyci5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY2VwdCA9ICdcXFxcLicgKyBhcnIuam9pbignLCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoIC8sL2csICckfFxcXFwuJyApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoIC9cXCovZywgJy4qJyApICsgJyQnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIG1lLmFjY2VwdCA9IG5ldyBSZWdFeHAoIGFjY2VwdCwgJ2knICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG1lLnF1ZXVlID0gbmV3IFF1ZXVlKCk7XHJcbiAgICAgICAgICAgICAgICBtZS5zdGF0cyA9IG1lLnF1ZXVlLnN0YXRzO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzlvZPliY3kuI3mmK9odG1sNei/kOihjOaXtu+8jOmCo+Wwseeul+S6huOAglxyXG4gICAgICAgICAgICAgICAgLy8g5LiN5omn6KGM5ZCO57ut5pON5L2cXHJcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMucmVxdWVzdCgncHJlZGljdC1ydW50aW1lLXR5cGUnKSAhPT0gJ2h0bWw1JyApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOWIm+W7uuS4gOS4qiBodG1sNSDov5DooYzml7bnmoQgcGxhY2Vob2xkZXJcclxuICAgICAgICAgICAgICAgIC8vIOS7peiHs+S6juWklumDqOa3u+WKoOWOn+eUnyBGaWxlIOWvueixoeeahOaXtuWAmeiDveato+ehruWMheijueS4gOS4i+S+myB3ZWJ1cGxvYWRlciDkvb/nlKjjgIJcclxuICAgICAgICAgICAgICAgIGRlZmVycmVkID0gQmFzZS5EZWZlcnJlZCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbGFjZWhvbGRlciA9IHJ1bnRpbWUgPSBuZXcgUnVudGltZUNsaWVudCgnUGxhY2Vob2xkZXInKTtcclxuICAgICAgICAgICAgICAgIHJ1bnRpbWUuY29ubmVjdFJ1bnRpbWUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHJ1bnRpbWVPcmRlcjogJ2h0bWw1J1xyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWUuX3J1aWQgPSBydW50aW1lLmdldFJ1aWQoKTtcclxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgICAgICAvLyDkuLrkuobmlK/mjIHlpJbpg6jnm7TmjqXmt7vliqDkuIDkuKrljp/nlJ9GaWxl5a+56LGh44CCXHJcbiAgICAgICAgICAgIF93cmFwRmlsZTogZnVuY3Rpb24oIGZpbGUgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoICEoZmlsZSBpbnN0YW5jZW9mIFdVRmlsZSkgKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoICEoZmlsZSBpbnN0YW5jZW9mIEZpbGUpICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoICF0aGlzLl9ydWlkICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5cXCd0IGFkZCBleHRlcm5hbCBmaWxlcy4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlID0gbmV3IEZpbGUoIHRoaXMuX3J1aWQsIGZpbGUgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBmaWxlID0gbmV3IFdVRmlsZSggZmlsZSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlsZTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvLyDliKTmlq3mlofku7bmmK/lkKblj6/ku6XooqvliqDlhaXpmJ/liJdcclxuICAgICAgICAgICAgYWNjZXB0RmlsZTogZnVuY3Rpb24oIGZpbGUgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW52YWxpZCA9ICFmaWxlIHx8ICFmaWxlLnNpemUgfHwgdGhpcy5hY2NlcHQgJiZcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpzlkI3lrZfkuK3mnInlkI7nvIDvvIzmiY3lgZrlkI7nvIDnmb3lkI3ljZXlpITnkIbjgIJcclxuICAgICAgICAgICAgICAgICAgICAgICAgckV4dC5leGVjKCBmaWxlLm5hbWUgKSAmJiAhdGhpcy5hY2NlcHQudGVzdCggZmlsZS5uYW1lICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiAhaW52YWxpZDtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBAZXZlbnQgYmVmb3JlRmlsZVF1ZXVlZFxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGV9IGZpbGUgRmlsZeWvueixoVxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g5b2T5paH5Lu26KKr5Yqg5YWl6Zif5YiX5LmL5YmN6Kem5Y+R77yM5q2k5LqL5Lu255qEaGFuZGxlcui/lOWbnuWAvOS4umBmYWxzZWDvvIzliJnmraTmlofku7bkuI3kvJrooqvmt7vliqDov5vlhaXpmJ/liJfjgIJcclxuICAgICAgICAgICAgICogQGZvciAgVXBsb2FkZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEBldmVudCBmaWxlUXVldWVkXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZX0gZmlsZSBGaWxl5a+56LGhXHJcbiAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiDlvZPmlofku7booqvliqDlhaXpmJ/liJfku6XlkI7op6blj5HjgIJcclxuICAgICAgICAgICAgICogQGZvciAgVXBsb2FkZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICBcclxuICAgICAgICAgICAgX2FkZEZpbGU6IGZ1bmN0aW9uKCBmaWxlICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lID0gdGhpcztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZmlsZSA9IG1lLl93cmFwRmlsZSggZmlsZSApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDkuI3ov4fnsbvlnovliKTmlq3lhYHorrjkuI3lhYHorrjvvIzlhYjmtL7pgIEgYGJlZm9yZUZpbGVRdWV1ZWRgXHJcbiAgICAgICAgICAgICAgICBpZiAoICFtZS5vd25lci50cmlnZ2VyKCAnYmVmb3JlRmlsZVF1ZXVlZCcsIGZpbGUgKSApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOexu+Wei+S4jeWMuemFje+8jOWImea0vumAgemUmeivr+S6i+S7tu+8jOW5tui/lOWbnuOAglxyXG4gICAgICAgICAgICAgICAgaWYgKCAhbWUuYWNjZXB0RmlsZSggZmlsZSApICkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLm93bmVyLnRyaWdnZXIoICdlcnJvcicsICdRX1RZUEVfREVOSUVEJywgZmlsZSApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgbWUucXVldWUuYXBwZW5kKCBmaWxlICk7XHJcbiAgICAgICAgICAgICAgICBtZS5vd25lci50cmlnZ2VyKCAnZmlsZVF1ZXVlZCcsIGZpbGUgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmaWxlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIGdldEZpbGU6IGZ1bmN0aW9uKCBmaWxlSWQgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5nZXRGaWxlKCBmaWxlSWQgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQGV2ZW50IGZpbGVzUXVldWVkXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZX0gZmlsZXMg5pWw57uE77yM5YaF5a655Li65Y6f5aeLRmlsZShsaWIvRmlsZe+8ieWvueixoeOAglxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g5b2T5LiA5om55paH5Lu25re75Yqg6L+b6Zif5YiX5Lul5ZCO6Kem5Y+R44CCXHJcbiAgICAgICAgICAgICAqIEBmb3IgIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gW2F1dG89ZmFsc2VdXHJcbiAgICAgICAgICAgICAqIEBuYW1lc3BhY2Ugb3B0aW9uc1xyXG4gICAgICAgICAgICAgKiBAZm9yIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiDorr7nva7kuLogdHJ1ZSDlkI7vvIzkuI3pnIDopoHmiYvliqjosIPnlKjkuIrkvKDvvIzmnInmlofku7bpgInmi6nljbPlvIDlp4vkuIrkvKDjgIJcclxuICAgICAgICAgICAgICogXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBAbWV0aG9kIGFkZEZpbGVzXHJcbiAgICAgICAgICAgICAqIEBncmFtbWFyIGFkZEZpbGVzKCBmaWxlICkgPT4gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAqIEBncmFtbWFyIGFkZEZpbGVzKCBbZmlsZTEsIGZpbGUyIC4uLl0gKSA9PiB1bmRlZmluZWRcclxuICAgICAgICAgICAgICogQHBhcmFtIHtBcnJheSBvZiBGaWxlIG9yIEZpbGV9IFtmaWxlc10gRmlsZXMg5a+56LGhIOaVsOe7hFxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g5re75Yqg5paH5Lu25Yiw6Zif5YiXXHJcbiAgICAgICAgICAgICAqIEBmb3IgIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBhZGRGaWxlOiBmdW5jdGlvbiggZmlsZXMgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoICFmaWxlcy5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZXMgPSBbIGZpbGVzIF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZpbGVzID0gJC5tYXAoIGZpbGVzLCBmdW5jdGlvbiggZmlsZSApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWUuX2FkZEZpbGUoIGZpbGUgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHRcdFx0XHJcbiAgICBcdFx0XHRpZiAoIGZpbGVzLmxlbmd0aCApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIG1lLm93bmVyLnRyaWdnZXIoICdmaWxlc1F1ZXVlZCcsIGZpbGVzICk7XHJcbiAgICBcclxuICAgIFx0XHRcdFx0aWYgKCBtZS5vcHRpb25zLmF1dG8gKSB7XHJcbiAgICBcdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgIFx0XHRcdFx0XHRcdG1lLnJlcXVlc3QoJ3N0YXJ0LXVwbG9hZCcpO1xyXG4gICAgXHRcdFx0XHRcdH0sIDIwICk7XHJcbiAgICBcdFx0XHRcdH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBnZXRTdGF0czogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0cztcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQGV2ZW50IGZpbGVEZXF1ZXVlZFxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGV9IGZpbGUgRmlsZeWvueixoVxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g5b2T5paH5Lu26KKr56e76Zmk6Zif5YiX5ZCO6Kem5Y+R44CCXHJcbiAgICAgICAgICAgICAqIEBmb3IgIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgXHJcbiAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQG1ldGhvZCByZW1vdmVGaWxlXHJcbiAgICAgICAgICAgICAqIEBncmFtbWFyIHJlbW92ZUZpbGUoIGZpbGUgKSA9PiB1bmRlZmluZWRcclxuICAgICAgICAgICAgICogQGdyYW1tYXIgcmVtb3ZlRmlsZSggaWQgKSA9PiB1bmRlZmluZWRcclxuICAgICAgICAgICAgICogQGdyYW1tYXIgcmVtb3ZlRmlsZSggZmlsZSwgdHJ1ZSApID0+IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciByZW1vdmVGaWxlKCBpZCwgdHJ1ZSApID0+IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGV8aWR9IGZpbGUgRmlsZeWvueixoeaIlui/mUZpbGXlr7nosaHnmoRpZFxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g56e76Zmk5p+Q5LiA5paH5Lu2LCDpu5jorqTlj6rkvJrmoIforrDmlofku7bnirbmgIHkuLrlt7Llj5bmtojvvIzlpoLmnpznrKzkuozkuKrlj4LmlbDkuLogYHRydWVgIOWImeS8muS7jiBxdWV1ZSDkuK3np7vpmaTjgIJcclxuICAgICAgICAgICAgICogQGZvciAgVXBsb2FkZXJcclxuICAgICAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogJGxpLm9uKCdjbGljaycsICcucmVtb3ZlLXRoaXMnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICogICAgIHVwbG9hZGVyLnJlbW92ZUZpbGUoIGZpbGUgKTtcclxuICAgICAgICAgICAgICogfSlcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHJlbW92ZUZpbGU6IGZ1bmN0aW9uKCBmaWxlLCByZW1vdmUgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmaWxlID0gZmlsZS5pZCA/IGZpbGUgOiBtZS5xdWV1ZS5nZXRGaWxlKCBmaWxlICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdCggJ2NhbmNlbC1maWxlJywgZmlsZSApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIHJlbW92ZSApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlLnJlbW92ZUZpbGUoIGZpbGUgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQG1ldGhvZCBnZXRGaWxlc1xyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBnZXRGaWxlcygpID0+IEFycmF5XHJcbiAgICAgICAgICAgICAqIEBncmFtbWFyIGdldEZpbGVzKCBzdGF0dXMxLCBzdGF0dXMyLCBzdGF0dXMuLi4gKSA9PiBBcnJheVxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g6L+U5Zue5oyH5a6a54q25oCB55qE5paH5Lu26ZuG5ZCI77yM5LiN5Lyg5Y+C5pWw5bCG6L+U5Zue5omA5pyJ54q25oCB55qE5paH5Lu244CCXHJcbiAgICAgICAgICAgICAqIEBmb3IgIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICAgICAqIGNvbnNvbGUubG9nKCB1cGxvYWRlci5nZXRGaWxlcygpICk7ICAgIC8vID0+IGFsbCBmaWxlc1xyXG4gICAgICAgICAgICAgKiBjb25zb2xlLmxvZyggdXBsb2FkZXIuZ2V0RmlsZXMoJ2Vycm9yJykgKSAgICAvLyA9PiBhbGwgZXJyb3IgZmlsZXMuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBnZXRGaWxlczogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5nZXRGaWxlcy5hcHBseSggdGhpcy5xdWV1ZSwgYXJndW1lbnRzICk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgZmV0Y2hGaWxlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXVlLmZldGNoLmFwcGx5KCB0aGlzLnF1ZXVlLCBhcmd1bWVudHMgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQG1ldGhvZCByZXRyeVxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciByZXRyeSgpID0+IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciByZXRyeSggZmlsZSApID0+IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g6YeN6K+V5LiK5Lyg77yM6YeN6K+V5oyH5a6a5paH5Lu277yM5oiW6ICF5LuO5Ye66ZSZ55qE5paH5Lu25byA5aeL6YeN5paw5LiK5Lyg44CCXHJcbiAgICAgICAgICAgICAqIEBmb3IgIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICAgICAqIGZ1bmN0aW9uIHJldHJ5KCkge1xyXG4gICAgICAgICAgICAgKiAgICAgdXBsb2FkZXIucmV0cnkoKTtcclxuICAgICAgICAgICAgICogfVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgcmV0cnk6IGZ1bmN0aW9uKCBmaWxlLCBub0ZvcmNlU3RhcnQgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWUgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGVzLCBpLCBsZW47XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmICggZmlsZSApIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlID0gZmlsZS5pZCA/IGZpbGUgOiBtZS5xdWV1ZS5nZXRGaWxlKCBmaWxlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZS5zZXRTdGF0dXMoIFN0YXR1cy5RVUVVRUQgKTtcclxuICAgICAgICAgICAgICAgICAgICBub0ZvcmNlU3RhcnQgfHwgbWUucmVxdWVzdCgnc3RhcnQtdXBsb2FkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmaWxlcyA9IG1lLnF1ZXVlLmdldEZpbGVzKCBTdGF0dXMuRVJST1IgKTtcclxuICAgICAgICAgICAgICAgIGkgPSAwO1xyXG4gICAgICAgICAgICAgICAgbGVuID0gZmlsZXMubGVuZ3RoO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlID0gZmlsZXNbIGkgXTtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlLnNldFN0YXR1cyggU3RhdHVzLlFVRVVFRCApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBtZS5yZXF1ZXN0KCdzdGFydC11cGxvYWQnKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQG1ldGhvZCBzb3J0XHJcbiAgICAgICAgICAgICAqIEBncmFtbWFyIHNvcnQoIGZuICkgPT4gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiDmjpLluo/pmJ/liJfkuK3nmoTmlofku7bvvIzlnKjkuIrkvKDkuYvliY3osIPmlbTlj6/ku6XmjqfliLbkuIrkvKDpobrluo/jgIJcclxuICAgICAgICAgICAgICogQGZvciAgVXBsb2FkZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHNvcnRGaWxlczogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5zb3J0LmFwcGx5KCB0aGlzLnF1ZXVlLCBhcmd1bWVudHMgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQGV2ZW50IHJlc2V0XHJcbiAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiDlvZMgdXBsb2FkZXIg6KKr6YeN572u55qE5pe25YCZ6Kem5Y+R44CCXHJcbiAgICAgICAgICAgICAqIEBmb3IgIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBAbWV0aG9kIHJlc2V0XHJcbiAgICAgICAgICAgICAqIEBncmFtbWFyIHJlc2V0KCkgPT4gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiDph43nva51cGxvYWRlcuOAguebruWJjeWPqumHjee9ruS6humYn+WIl+OAglxyXG4gICAgICAgICAgICAgKiBAZm9yICBVcGxvYWRlclxyXG4gICAgICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAgICAgKiB1cGxvYWRlci5yZXNldCgpO1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgcmVzZXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vd25lci50cmlnZ2VyKCdyZXNldCcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5xdWV1ZSA9IG5ldyBRdWV1ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0cyA9IHRoaXMucXVldWUuc3RhdHM7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYWNlaG9sZGVyICYmIHRoaXMucGxhY2Vob2xkZXIuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICBcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IOa3u+WKoOiOt+WPllJ1bnRpbWXnm7jlhbPkv6Hmga/nmoTmlrnms5XjgIJcclxuICAgICAqL1xyXG4gICAgZGVmaW5lKCd3aWRnZXRzL3J1bnRpbWUnLFtcclxuICAgICAgICAndXBsb2FkZXInLFxyXG4gICAgICAgICdydW50aW1lL3J1bnRpbWUnLFxyXG4gICAgICAgICd3aWRnZXRzL3dpZGdldCdcclxuICAgIF0sIGZ1bmN0aW9uKCBVcGxvYWRlciwgUnVudGltZSApIHtcclxuICAgIFxyXG4gICAgICAgIFVwbG9hZGVyLnN1cHBvcnQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFJ1bnRpbWUuaGFzUnVudGltZS5hcHBseSggUnVudGltZSwgYXJndW1lbnRzICk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBbcnVudGltZU9yZGVyPWh0bWw1LGZsYXNoXVxyXG4gICAgICAgICAqIEBuYW1lc3BhY2Ugb3B0aW9uc1xyXG4gICAgICAgICAqIEBmb3IgVXBsb2FkZXJcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24g5oyH5a6a6L+Q6KGM5pe25ZCv5Yqo6aG65bqP44CC6buY6K6k5Lya5oOz5bCd6K+VIGh0bWw1IOaYr+WQpuaUr+aMge+8jOWmguaenOaUr+aMgeWImeS9v+eUqCBodG1sNSwg5ZCm5YiZ5YiZ5L2/55SoIGZsYXNoLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICog5Y+v5Lul5bCG5q2k5YC86K6+572u5oiQIGBmbGFzaGDvvIzmnaXlvLrliLbkvb/nlKggZmxhc2gg6L+Q6KGM5pe244CCXHJcbiAgICAgICAgICovXHJcbiAgICBcclxuICAgICAgICByZXR1cm4gVXBsb2FkZXIucmVnaXN0ZXIoe1xyXG4gICAgICAgICAgICBuYW1lOiAncnVudGltZScsXHJcbiAgICBcclxuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoICF0aGlzLnByZWRpY3RSdW50aW1lVHlwZSgpICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IEVycm9yKCdSdW50aW1lIEVycm9yJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOmihOa1i1VwbG9hZGVy5bCG6YeH55So5ZOq5LiqYFJ1bnRpbWVgXHJcbiAgICAgICAgICAgICAqIEBncmFtbWFyIHByZWRpY3RSdW50aW1lVHlwZSgpID0+IFN0cmluZ1xyXG4gICAgICAgICAgICAgKiBAbWV0aG9kIHByZWRpY3RSdW50aW1lVHlwZVxyXG4gICAgICAgICAgICAgKiBAZm9yICBVcGxvYWRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgcHJlZGljdFJ1bnRpbWVUeXBlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvcmRlcnMgPSB0aGlzLm9wdGlvbnMucnVudGltZU9yZGVyIHx8IFJ1bnRpbWUub3JkZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSB0aGlzLnR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgaSwgbGVuO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoICF0eXBlICkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVycyA9IG9yZGVycy5zcGxpdCggL1xccyosXFxzKi9nICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKCBpID0gMCwgbGVuID0gb3JkZXJzLmxlbmd0aDsgaSA8IGxlbjsgaSsrICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIFJ1bnRpbWUuaGFzUnVudGltZSggb3JkZXJzWyBpIF0gKSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHlwZSA9IHR5cGUgPSBvcmRlcnNbIGkgXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIEBmaWxlT3ZlcnZpZXcgVHJhbnNwb3J0XHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgnbGliL3RyYW5zcG9ydCcsW1xyXG4gICAgICAgICdiYXNlJyxcclxuICAgICAgICAncnVudGltZS9jbGllbnQnLFxyXG4gICAgICAgICdtZWRpYXRvcidcclxuICAgIF0sIGZ1bmN0aW9uKCBCYXNlLCBSdW50aW1lQ2xpZW50LCBNZWRpYXRvciApIHtcclxuICAgIFxyXG4gICAgICAgIHZhciAkID0gQmFzZS4kO1xyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gVHJhbnNwb3J0KCBvcHRzICkge1xyXG4gICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgXHJcbiAgICAgICAgICAgIG9wdHMgPSBtZS5vcHRpb25zID0gJC5leHRlbmQoIHRydWUsIHt9LCBUcmFuc3BvcnQub3B0aW9ucywgb3B0cyB8fCB7fSApO1xyXG4gICAgICAgICAgICBSdW50aW1lQ2xpZW50LmNhbGwoIHRoaXMsICdUcmFuc3BvcnQnICk7XHJcbiAgICBcclxuICAgICAgICAgICAgdGhpcy5fYmxvYiA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuX2Zvcm1EYXRhID0gb3B0cy5mb3JtRGF0YSB8fCB7fTtcclxuICAgICAgICAgICAgdGhpcy5faGVhZGVycyA9IG9wdHMuaGVhZGVycyB8fCB7fTtcclxuICAgIFxyXG4gICAgICAgICAgICB0aGlzLm9uKCAncHJvZ3Jlc3MnLCB0aGlzLl90aW1lb3V0ICk7XHJcbiAgICAgICAgICAgIHRoaXMub24oICdsb2FkIGVycm9yJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBtZS50cmlnZ2VyKCAncHJvZ3Jlc3MnLCAxICk7XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoIG1lLl90aW1lciApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBUcmFuc3BvcnQub3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgc2VydmVyOiAnJyxcclxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICBcclxuICAgICAgICAgICAgLy8g6Leo5Z+f5pe277yM5piv5ZCm5YWB6K645pC65bimY29va2llLCDlj6rmnIlodG1sNSBydW50aW1l5omN5pyJ5pWIXHJcbiAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogZmFsc2UsXHJcbiAgICAgICAgICAgIGZpbGVWYWw6ICdmaWxlJyxcclxuICAgICAgICAgICAgdGltZW91dDogMiAqIDYwICogMTAwMCwgICAgLy8gMuWIhumSn1xyXG4gICAgICAgICAgICBmb3JtRGF0YToge30sXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHt9LFxyXG4gICAgICAgICAgICBzZW5kQXNCaW5hcnk6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgICQuZXh0ZW5kKCBUcmFuc3BvcnQucHJvdG90eXBlLCB7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8g5re75YqgQmxvYiwg5Y+q6IO95re75Yqg5LiA5qyh77yM5pyA5ZCO5LiA5qyh5pyJ5pWI44CCXHJcbiAgICAgICAgICAgIGFwcGVuZEJsb2I6IGZ1bmN0aW9uKCBrZXksIGJsb2IsIGZpbGVuYW1lICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICBvcHRzID0gbWUub3B0aW9ucztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCBtZS5nZXRSdWlkKCkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWUuZGlzY29ubmVjdFJ1bnRpbWUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g6L+e5o6l5YiwYmxvYuW9kuWxnueahOWQjOS4gOS4qnJ1bnRpbWUuXHJcbiAgICAgICAgICAgICAgICBtZS5jb25uZWN0UnVudGltZSggYmxvYi5ydWlkLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZS5leGVjKCdpbml0Jyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgbWUuX2Jsb2IgPSBibG9iO1xyXG4gICAgICAgICAgICAgICAgb3B0cy5maWxlVmFsID0ga2V5IHx8IG9wdHMuZmlsZVZhbDtcclxuICAgICAgICAgICAgICAgIG9wdHMuZmlsZW5hbWUgPSBmaWxlbmFtZSB8fCBvcHRzLmZpbGVuYW1lO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIOa3u+WKoOWFtuS7luWtl+autVxyXG4gICAgICAgICAgICBhcHBlbmQ6IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCB0eXBlb2Yga2V5ID09PSAnb2JqZWN0JyApIHtcclxuICAgICAgICAgICAgICAgICAgICAkLmV4dGVuZCggdGhpcy5fZm9ybURhdGEsIGtleSApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9mb3JtRGF0YVsga2V5IF0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBzZXRSZXF1ZXN0SGVhZGVyOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHtcclxuICAgICAgICAgICAgICAgIGlmICggdHlwZW9mIGtleSA9PT0gJ29iamVjdCcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5leHRlbmQoIHRoaXMuX2hlYWRlcnMsIGtleSApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9oZWFkZXJzWyBrZXkgXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIHNlbmQ6IGZ1bmN0aW9uKCBtZXRob2QgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV4ZWMoICdzZW5kJywgbWV0aG9kICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90aW1lb3V0KCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgYWJvcnQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KCB0aGlzLl90aW1lciApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhlYygnYWJvcnQnKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignZGVzdHJveScpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vZmYoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXhlYygnZGVzdHJveScpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0UnVudGltZSgpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIGdldFJlc3BvbnNlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmV4ZWMoJ2dldFJlc3BvbnNlJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgZ2V0UmVzcG9uc2VBc0pzb246IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhlYygnZ2V0UmVzcG9uc2VBc0pzb24nKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBnZXRTdGF0dXM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhlYygnZ2V0U3RhdHVzJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgX3RpbWVvdXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbiA9IG1lLm9wdGlvbnMudGltZW91dDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCAhZHVyYXRpb24gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoIG1lLl90aW1lciApO1xyXG4gICAgICAgICAgICAgICAgbWUuX3RpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZS5hYm9ydCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLnRyaWdnZXIoICdlcnJvcicsICd0aW1lb3V0JyApO1xyXG4gICAgICAgICAgICAgICAgfSwgZHVyYXRpb24gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAvLyDorqlUcmFuc3BvcnTlhbflpIfkuovku7blip/og73jgIJcclxuICAgICAgICBNZWRpYXRvci5pbnN0YWxsVG8oIFRyYW5zcG9ydC5wcm90b3R5cGUgKTtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBUcmFuc3BvcnQ7XHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyDotJ/otKPmlofku7bkuIrkvKDnm7jlhbPjgIJcclxuICAgICAqL1xyXG4gICAgZGVmaW5lKCd3aWRnZXRzL3VwbG9hZCcsW1xyXG4gICAgICAgICdiYXNlJyxcclxuICAgICAgICAndXBsb2FkZXInLFxyXG4gICAgICAgICdmaWxlJyxcclxuICAgICAgICAnbGliL3RyYW5zcG9ydCcsXHJcbiAgICAgICAgJ3dpZGdldHMvd2lkZ2V0J1xyXG4gICAgXSwgZnVuY3Rpb24oIEJhc2UsIFVwbG9hZGVyLCBXVUZpbGUsIFRyYW5zcG9ydCApIHtcclxuICAgIFxyXG4gICAgICAgIHZhciAkID0gQmFzZS4kLFxyXG4gICAgICAgICAgICBpc1Byb21pc2UgPSBCYXNlLmlzUHJvbWlzZSxcclxuICAgICAgICAgICAgU3RhdHVzID0gV1VGaWxlLlN0YXR1cztcclxuICAgIFxyXG4gICAgICAgIC8vIOa3u+WKoOm7mOiupOmFjee9rumhuVxyXG4gICAgICAgICQuZXh0ZW5kKCBVcGxvYWRlci5vcHRpb25zLCB7XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtCb29sZWFufSBbcHJlcGFyZU5leHRGaWxlPWZhbHNlXVxyXG4gICAgICAgICAgICAgKiBAbmFtZXNwYWNlIG9wdGlvbnNcclxuICAgICAgICAgICAgICogQGZvciBVcGxvYWRlclxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g5piv5ZCm5YWB6K645Zyo5paH5Lu25Lyg6L6T5pe25o+Q5YmN5oqK5LiL5LiA5Liq5paH5Lu25YeG5aSH5aW944CCXHJcbiAgICAgICAgICAgICAqIOWvueS6juS4gOS4quaWh+S7tueahOWHhuWkh+W3peS9nOavlOi+g+iAl+aXtu+8jOavlOWmguWbvueJh+WOi+e8qe+8jG1kNeW6j+WIl+WMluOAglxyXG4gICAgICAgICAgICAgKiDlpoLmnpzog73mj5DliY3lnKjlvZPliY3mlofku7bkvKDovpPmnJ/lpITnkIbvvIzlj6/ku6XoioLnnIHmgLvkvZPogJfml7bjgIJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHByZXBhcmVOZXh0RmlsZTogZmFsc2UsXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gW2NodW5rZWQ9ZmFsc2VdXHJcbiAgICAgICAgICAgICAqIEBuYW1lc3BhY2Ugb3B0aW9uc1xyXG4gICAgICAgICAgICAgKiBAZm9yIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiDmmK/lkKbopoHliIbniYflpITnkIblpKfmlofku7bkuIrkvKDjgIJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGNodW5rZWQ6IGZhbHNlLFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge0Jvb2xlYW59IFtjaHVua1NpemU9NTI0Mjg4MF1cclxuICAgICAgICAgICAgICogQG5hbWVzcGFjZSBvcHRpb25zXHJcbiAgICAgICAgICAgICAqIEBmb3IgVXBsb2FkZXJcclxuICAgICAgICAgICAgICogQGRlc2NyaXB0aW9uIOWmguaenOimgeWIhueJh++8jOWIhuWkmuWkp+S4gOeJh++8nyDpu5jorqTlpKflsI/kuLo1TS5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGNodW5rU2l6ZTogNSAqIDEwMjQgKiAxMDI0LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge0Jvb2xlYW59IFtjaHVua1JldHJ5PTJdXHJcbiAgICAgICAgICAgICAqIEBuYW1lc3BhY2Ugb3B0aW9uc1xyXG4gICAgICAgICAgICAgKiBAZm9yIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiDlpoLmnpzmn5DkuKrliIbniYfnlLHkuo7nvZHnu5zpl67popjlh7rplJnvvIzlhYHorrjoh6rliqjph43kvKDlpJrlsJHmrKHvvJ9cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGNodW5rUmV0cnk6IDIsXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gW3RocmVhZHM9M11cclxuICAgICAgICAgICAgICogQG5hbWVzcGFjZSBvcHRpb25zXHJcbiAgICAgICAgICAgICAqIEBmb3IgVXBsb2FkZXJcclxuICAgICAgICAgICAgICogQGRlc2NyaXB0aW9uIOS4iuS8oOW5tuWPkeaVsOOAguWFgeiuuOWQjOaXtuacgOWkp+S4iuS8oOi/m+eoi+aVsOOAglxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdGhyZWFkczogMyxcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge09iamVjdH0gW2Zvcm1EYXRhPXt9XVxyXG4gICAgICAgICAgICAgKiBAbmFtZXNwYWNlIG9wdGlvbnNcclxuICAgICAgICAgICAgICogQGZvciBVcGxvYWRlclxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g5paH5Lu25LiK5Lyg6K+35rGC55qE5Y+C5pWw6KGo77yM5q+P5qyh5Y+R6YCB6YO95Lya5Y+R6YCB5q2k5a+56LGh5Lit55qE5Y+C5pWw44CCXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBmb3JtRGF0YToge31cclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtPYmplY3R9IFtmaWxlVmFsPSdmaWxlJ11cclxuICAgICAgICAgICAgICogQG5hbWVzcGFjZSBvcHRpb25zXHJcbiAgICAgICAgICAgICAqIEBmb3IgVXBsb2FkZXJcclxuICAgICAgICAgICAgICogQGRlc2NyaXB0aW9uIOiuvue9ruaWh+S7tuS4iuS8oOWfn+eahG5hbWXjgIJcclxuICAgICAgICAgICAgICovXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBbc2VuZEFzQmluYXJ5PWZhbHNlXVxyXG4gICAgICAgICAgICAgKiBAbmFtZXNwYWNlIG9wdGlvbnNcclxuICAgICAgICAgICAgICogQGZvciBVcGxvYWRlclxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g5piv5ZCm5bey5LqM6L+b5Yi255qE5rWB55qE5pa55byP5Y+R6YCB5paH5Lu277yM6L+Z5qC35pW05Liq5LiK5Lyg5YaF5a65YHBocDovL2lucHV0YOmDveS4uuaWh+S7tuWGheWuue+8jFxyXG4gICAgICAgICAgICAgKiDlhbbku5blj4LmlbDlnKgkX0dFVOaVsOe7hOS4reOAglxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgIC8vIOi0n+i0o+WwhuaWh+S7tuWIh+eJh+OAglxyXG4gICAgICAgIGZ1bmN0aW9uIEN1dGVGaWxlKCBmaWxlLCBjaHVua1NpemUgKSB7XHJcbiAgICAgICAgICAgIHZhciBwZW5kaW5nID0gW10sXHJcbiAgICAgICAgICAgICAgICBibG9iID0gZmlsZS5zb3VyY2UsXHJcbiAgICAgICAgICAgICAgICB0b3RhbCA9IGJsb2Iuc2l6ZSxcclxuICAgICAgICAgICAgICAgIGNodW5rcyA9IGNodW5rU2l6ZSA/IE1hdGguY2VpbCggdG90YWwgLyBjaHVua1NpemUgKSA6IDEsXHJcbiAgICAgICAgICAgICAgICBzdGFydCA9IDAsXHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IDAsXHJcbiAgICAgICAgICAgICAgICBsZW4sIGFwaTtcclxuICAgIFxyXG4gICAgICAgICAgICBhcGkgPSB7XHJcbiAgICAgICAgICAgICAgICBmaWxlOiBmaWxlLFxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBoYXM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhIXBlbmRpbmcubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgc2hpZnQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwZW5kaW5nLnNoaWZ0KCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB1bnNoaWZ0OiBmdW5jdGlvbiggYmxvY2sgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZy51bnNoaWZ0KCBibG9jayApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgICAgIHdoaWxlICggaW5kZXggPCBjaHVua3MgKSB7XHJcbiAgICAgICAgICAgICAgICBsZW4gPSBNYXRoLm1pbiggY2h1bmtTaXplLCB0b3RhbCAtIHN0YXJ0ICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHBlbmRpbmcucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZTogZmlsZSxcclxuICAgICAgICAgICAgICAgICAgICBzdGFydDogc3RhcnQsXHJcbiAgICAgICAgICAgICAgICAgICAgZW5kOiBjaHVua1NpemUgPyAoc3RhcnQgKyBsZW4pIDogdG90YWwsXHJcbiAgICAgICAgICAgICAgICAgICAgdG90YWw6IHRvdGFsLFxyXG4gICAgICAgICAgICAgICAgICAgIGNodW5rczogY2h1bmtzLFxyXG4gICAgICAgICAgICAgICAgICAgIGNodW5rOiBpbmRleCsrLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1dGVkOiBhcGlcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgc3RhcnQgKz0gbGVuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgZmlsZS5ibG9ja3MgPSBwZW5kaW5nLmNvbmNhdCgpO1xyXG4gICAgICAgICAgICBmaWxlLnJlbWFuaW5nID0gcGVuZGluZy5sZW5ndGg7XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIGFwaTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBVcGxvYWRlci5yZWdpc3Rlcih7XHJcbiAgICAgICAgICAgIG5hbWU6ICd1cGxvYWQnLFxyXG4gICAgXHJcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG93bmVyID0gdGhpcy5vd25lcixcclxuICAgICAgICAgICAgICAgICAgICBtZSA9IHRoaXM7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHRoaXMucnVuaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gZmFsc2U7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG93bmVyXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uKCAnc3RhcnRVcGxvYWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWUucHJvZ3Jlc3MgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uKCAndXBsb2FkRmluaXNoZWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWUucHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g6K6w5b2V5b2T5YmN5q2j5Zyo5Lyg55qE5pWw5o2u77yM6LefdGhyZWFkc+ebuOWFs1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wb29sID0gW107XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOe8k+WtmOWIhuWlveeJh+eahOaWh+S7tuOAglxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFjayA9IFtdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDnvJPlrZjljbPlsIbkuIrkvKDnmoTmlofku7bjgIJcclxuICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZyA9IFtdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDot5/ouKrov5jmnInlpJrlsJHliIbniYflnKjkuIrkvKDkuK3kvYbmmK/msqHmnInlrozmiJDkuIrkvKDjgIJcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtYW5pbmcgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fX3RpY2sgPSBCYXNlLmJpbmRGbiggdGhpcy5fdGljaywgdGhpcyApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDplIDmr4HkuIrkvKDnm7jlhbPnmoTlsZ7mgKfjgIJcclxuICAgICAgICAgICAgICAgIG93bmVyLm9uKCAndXBsb2FkQ29tcGxldGUnLCBmdW5jdGlvbiggZmlsZSApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOaKiuWFtuS7luWdl+WPlua2iOS6huOAglxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGUuYmxvY2tzICYmICQuZWFjaCggZmlsZS5ibG9ja3MsIGZ1bmN0aW9uKCBfLCB2ICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2LnRyYW5zcG9ydCAmJiAodi50cmFuc3BvcnQuYWJvcnQoKSwgdi50cmFuc3BvcnQuZGVzdHJveSgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHYudHJhbnNwb3J0O1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGZpbGUuYmxvY2tzO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBmaWxlLnJlbWFuaW5nO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgcmVzZXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXF1ZXN0KCAnc3RvcC11cGxvYWQnLCB0cnVlICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJ1bmluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wb29sID0gW107XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YWNrID0gW107XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmcgPSBbXTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtYW5pbmcgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdHJpZ2dlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvbWlzZSA9IG51bGw7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEBldmVudCBzdGFydFVwbG9hZFxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g5b2T5byA5aeL5LiK5Lyg5rWB56iL5pe26Kem5Y+R44CCXHJcbiAgICAgICAgICAgICAqIEBmb3IgIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiDlvIDlp4vkuIrkvKDjgILmraTmlrnms5Xlj6/ku6Xku47liJ3lp4vnirbmgIHosIPnlKjlvIDlp4vkuIrkvKDmtYHnqIvvvIzkuZ/lj6/ku6Xku47mmoLlgZznirbmgIHosIPnlKjvvIznu6fnu63kuIrkvKDmtYHnqIvjgIJcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICog5Y+v5Lul5oyH5a6a5byA5aeL5p+Q5LiA5Liq5paH5Lu244CCXHJcbiAgICAgICAgICAgICAqIEBncmFtbWFyIHVwbG9hZCgpID0+IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciB1cGxvYWQoIGZpbGUgfCBmaWxlSWQpID0+IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgKiBAbWV0aG9kIHVwbG9hZFxyXG4gICAgICAgICAgICAgKiBAZm9yICBVcGxvYWRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgc3RhcnRVcGxvYWQ6IGZ1bmN0aW9uKGZpbGUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOenu+WHumludmFsaWTnmoTmlofku7ZcclxuICAgICAgICAgICAgICAgICQuZWFjaCggbWUucmVxdWVzdCggJ2dldC1maWxlcycsIFN0YXR1cy5JTlZBTElEICksIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLnJlcXVlc3QoICdyZW1vdmUtZmlsZScsIHRoaXMgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzmjIflrprkuoblvIDlp4vmn5DkuKrmlofku7bvvIzliJnlj6rlvIDlp4vmjIflrprnmoTmlofku7bjgIJcclxuICAgICAgICAgICAgICAgIGlmICggZmlsZSApIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlID0gZmlsZS5pZCA/IGZpbGUgOiBtZS5yZXF1ZXN0KCAnZ2V0LWZpbGUnLCBmaWxlICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZS5nZXRTdGF0dXMoKSA9PT0gU3RhdHVzLklOVEVSUlVQVCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlLnNldFN0YXR1cyggU3RhdHVzLlFVRVVFRCApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQuZWFjaCggbWUucG9vbCwgZnVuY3Rpb24oIF8sIHYgKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOS5i+WJjeaaguWBnOi/h+OAglxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYuZmlsZSAhPT0gZmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdi50cmFuc3BvcnQgJiYgdi50cmFuc3BvcnQuc2VuZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZS5zZXRTdGF0dXMoIFN0YXR1cy5QUk9HUkVTUyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGZpbGUuZ2V0U3RhdHVzKCkgIT09IFN0YXR1cy5QUk9HUkVTUykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlLnNldFN0YXR1cyggU3RhdHVzLlFVRVVFRCApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKCBtZS5yZXF1ZXN0KCAnZ2V0LWZpbGVzJywgWyBTdGF0dXMuSU5JVEVEIF0gKSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdHVzKCBTdGF0dXMuUVVFVUVEICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmICggbWUucnVuaW5nICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBCYXNlLm5leHRUaWNrKCBtZS5fX3RpY2sgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgbWUucnVuaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHZhciBmaWxlcyA9IFtdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzmnInmmoLlgZznmoTvvIzliJnnu63kvKBcclxuICAgICAgICAgICAgICAgIGZpbGUgfHwgJC5lYWNoKCBtZS5wb29sLCBmdW5jdGlvbiggXywgdiApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZSA9IHYuZmlsZTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggZmlsZS5nZXRTdGF0dXMoKSA9PT0gU3RhdHVzLklOVEVSUlVQVCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWUuX3RyaWdnZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZXMucHVzaChmaWxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdi50cmFuc3BvcnQgJiYgdi50cmFuc3BvcnQuc2VuZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAkLmVhY2goZmlsZXMsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdHVzKCBTdGF0dXMuUFJPR1JFU1MgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmaWxlIHx8ICQuZWFjaCggbWUucmVxdWVzdCggJ2dldC1maWxlcycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXR1cy5JTlRFUlJVUFQgKSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0dXMoIFN0YXR1cy5QUk9HUkVTUyApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG1lLl90cmlnZ2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBCYXNlLm5leHRUaWNrKCBtZS5fX3RpY2sgKTtcclxuICAgICAgICAgICAgICAgIG1lLm93bmVyLnRyaWdnZXIoJ3N0YXJ0VXBsb2FkJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEBldmVudCBzdG9wVXBsb2FkXHJcbiAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiDlvZPlvIDlp4vkuIrkvKDmtYHnqIvmmoLlgZzml7bop6blj5HjgIJcclxuICAgICAgICAgICAgICogQGZvciAgVXBsb2FkZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOaaguWBnOS4iuS8oOOAguesrOS4gOS4quWPguaVsOS4uuaYr+WQpuS4reaWreS4iuS8oOW9k+WJjeato+WcqOS4iuS8oOeahOaWh+S7tuOAglxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiDlpoLmnpznrKzkuIDkuKrlj4LmlbDmmK/mlofku7bvvIzliJnlj6rmmoLlgZzmjIflrprmlofku7bjgIJcclxuICAgICAgICAgICAgICogQGdyYW1tYXIgc3RvcCgpID0+IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBzdG9wKCB0cnVlICkgPT4gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAqIEBncmFtbWFyIHN0b3AoIGZpbGUgKSA9PiB1bmRlZmluZWRcclxuICAgICAgICAgICAgICogQG1ldGhvZCBzdG9wXHJcbiAgICAgICAgICAgICAqIEBmb3IgIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBzdG9wVXBsb2FkOiBmdW5jdGlvbiggZmlsZSwgaW50ZXJydXB0ICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICBibG9jaztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnRlcnJ1cHQgPSBmaWxlO1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbGUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIG1lLnJ1bmluZyA9PT0gZmFsc2UgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzlj6rmmK/mmoLlgZzmn5DkuKrmlofku7bjgIJcclxuICAgICAgICAgICAgICAgIGlmICggZmlsZSApIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlID0gZmlsZS5pZCA/IGZpbGUgOiBtZS5yZXF1ZXN0KCAnZ2V0LWZpbGUnLCBmaWxlICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGZpbGUuZ2V0U3RhdHVzKCkgIT09IFN0YXR1cy5QUk9HUkVTUyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZS5nZXRTdGF0dXMoKSAhPT0gU3RhdHVzLlFVRVVFRCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGUuc2V0U3RhdHVzKCBTdGF0dXMuSU5URVJSVVBUICk7XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICQuZWFjaCggbWUucG9vbCwgZnVuY3Rpb24oIF8sIHYgKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Y+qIGFib3J0IOaMh+WumueahOaWh+S7tuOAglxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodi5maWxlID09PSBmaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayA9IHY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGJsb2NrLnRyYW5zcG9ydCAmJiBibG9jay50cmFuc3BvcnQuYWJvcnQoKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnRlcnJ1cHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWUuX3B1dGJhY2soYmxvY2spO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZS5fcG9wQmxvY2soYmxvY2spO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBCYXNlLm5leHRUaWNrKCBtZS5fX3RpY2sgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgbWUucnVuaW5nID0gZmFsc2U7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOato+WcqOWHhuWkh+S4reeahOaWh+S7tuOAglxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3Byb21pc2UgJiYgdGhpcy5fcHJvbWlzZS5maWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJvbWlzZS5maWxlLnNldFN0YXR1cyggU3RhdHVzLklOVEVSUlVQVCApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpbnRlcnJ1cHQgJiYgJC5lYWNoKCBtZS5wb29sLCBmdW5jdGlvbiggXywgdiApIHtcclxuICAgICAgICAgICAgICAgICAgICB2LnRyYW5zcG9ydCAmJiB2LnRyYW5zcG9ydC5hYm9ydCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHYuZmlsZS5zZXRTdGF0dXMoIFN0YXR1cy5JTlRFUlJVUFQgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBtZS5vd25lci50cmlnZ2VyKCdzdG9wVXBsb2FkJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEBtZXRob2QgY2FuY2VsRmlsZVxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBjYW5jZWxGaWxlKCBmaWxlICkgPT4gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAqIEBncmFtbWFyIGNhbmNlbEZpbGUoIGlkICkgPT4gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZXxpZH0gZmlsZSBGaWxl5a+56LGh5oiW6L+ZRmlsZeWvueixoeeahGlkXHJcbiAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiDmoIforrDmlofku7bnirbmgIHkuLrlt7Llj5bmtogsIOWQjOaXtuWwhuS4reaWreaWh+S7tuS8oOi+k+OAglxyXG4gICAgICAgICAgICAgKiBAZm9yICBVcGxvYWRlclxyXG4gICAgICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiAkbGkub24oJ2NsaWNrJywgJy5yZW1vdmUtdGhpcycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgKiAgICAgdXBsb2FkZXIuY2FuY2VsRmlsZSggZmlsZSApO1xyXG4gICAgICAgICAgICAgKiB9KVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgY2FuY2VsRmlsZTogZnVuY3Rpb24oIGZpbGUgKSB7XHJcbiAgICAgICAgICAgICAgICBmaWxlID0gZmlsZS5pZCA/IGZpbGUgOiB0aGlzLnJlcXVlc3QoICdnZXQtZmlsZScsIGZpbGUgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c5q2j5Zyo5LiK5Lyg44CCXHJcbiAgICAgICAgICAgICAgICBmaWxlLmJsb2NrcyAmJiAkLmVhY2goIGZpbGUuYmxvY2tzLCBmdW5jdGlvbiggXywgdiApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgX3RyID0gdi50cmFuc3BvcnQ7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIF90ciApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RyLmFib3J0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90ci5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB2LnRyYW5zcG9ydDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZmlsZS5zZXRTdGF0dXMoIFN0YXR1cy5DQU5DRUxMRUQgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub3duZXIudHJpZ2dlciggJ2ZpbGVEZXF1ZXVlZCcsIGZpbGUgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICog5Yik5patYFVwbGFvZGVgcuaYr+WQpuato+WcqOS4iuS8oOS4reOAglxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBpc0luUHJvZ3Jlc3MoKSA9PiBCb29sZWFuXHJcbiAgICAgICAgICAgICAqIEBtZXRob2QgaXNJblByb2dyZXNzXHJcbiAgICAgICAgICAgICAqIEBmb3IgIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBpc0luUHJvZ3Jlc3M6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5wcm9ncmVzcztcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBfZ2V0U3RhdHM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCgnZ2V0LXN0YXRzJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOaOiei/h+S4gOS4quaWh+S7tuS4iuS8oO+8jOebtOaOpeagh+iusOaMh+WumuaWh+S7tuS4uuW3suS4iuS8oOeKtuaAgeOAglxyXG4gICAgICAgICAgICAgKiBAZ3JhbW1hciBza2lwRmlsZSggZmlsZSApID0+IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgKiBAbWV0aG9kIHNraXBGaWxlXHJcbiAgICAgICAgICAgICAqIEBmb3IgIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBza2lwRmlsZTogZnVuY3Rpb24oIGZpbGUsIHN0YXR1cyApIHtcclxuICAgICAgICAgICAgICAgIGZpbGUgPSBmaWxlLmlkID8gZmlsZSA6IHRoaXMucmVxdWVzdCggJ2dldC1maWxlJywgZmlsZSApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmaWxlLnNldFN0YXR1cyggc3RhdHVzIHx8IFN0YXR1cy5DT01QTEVURSApO1xyXG4gICAgICAgICAgICAgICAgZmlsZS5za2lwcGVkID0gdHJ1ZTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c5q2j5Zyo5LiK5Lyg44CCXHJcbiAgICAgICAgICAgICAgICBmaWxlLmJsb2NrcyAmJiAkLmVhY2goIGZpbGUuYmxvY2tzLCBmdW5jdGlvbiggXywgdiApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgX3RyID0gdi50cmFuc3BvcnQ7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIF90ciApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RyLmFib3J0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90ci5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB2LnRyYW5zcG9ydDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5vd25lci50cmlnZ2VyKCAndXBsb2FkU2tpcCcsIGZpbGUgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQGV2ZW50IHVwbG9hZEZpbmlzaGVkXHJcbiAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiDlvZPmiYDmnInmlofku7bkuIrkvKDnu5PmnZ/ml7bop6blj5HjgIJcclxuICAgICAgICAgICAgICogQGZvciAgVXBsb2FkZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIF90aWNrOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZSA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cyA9IG1lLm9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICAgICAgZm4sIHZhbDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g5LiK5LiA5LiqcHJvbWlzZei/mOayoeaciee7k+adn++8jOWImeetieW+heWujOaIkOWQjuWGjeaJp+ihjOOAglxyXG4gICAgICAgICAgICAgICAgaWYgKCBtZS5fcHJvbWlzZSApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWUuX3Byb21pc2UuYWx3YXlzKCBtZS5fX3RpY2sgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g6L+Y5pyJ5L2N572u77yM5LiU6L+Y5pyJ5paH5Lu26KaB5aSE55CG55qE6K+d44CCXHJcbiAgICAgICAgICAgICAgICBpZiAoIG1lLnBvb2wubGVuZ3RoIDwgb3B0cy50aHJlYWRzICYmICh2YWwgPSBtZS5fbmV4dEJsb2NrKCkpICkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLl90cmlnZ2VkID0gZmFsc2U7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBmbiA9IGZ1bmN0aW9uKCB2YWwgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lLl9wcm9taXNlID0gbnVsbDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDmnInlj6/og73mmK9yZWplY3Tov4fmnaXnmoTvvIzmiYDku6XopoHmo4DmtYt2YWznmoTnsbvlnovjgIJcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsICYmIHZhbC5maWxlICYmIG1lLl9zdGFydFNlbmQoIHZhbCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBCYXNlLm5leHRUaWNrKCBtZS5fX3RpY2sgKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgbWUuX3Byb21pc2UgPSBpc1Byb21pc2UoIHZhbCApID8gdmFsLmFsd2F5cyggZm4gKSA6IGZuKCB2YWwgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g5rKh5pyJ6KaB5LiK5Lyg55qE5LqG77yM5LiU5rKh5pyJ5q2j5Zyo5Lyg6L6T55qE5LqG44CCXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCAhbWUucmVtYW5pbmcgJiYgIW1lLl9nZXRTdGF0cygpLm51bU9mUXVldWUgJiZcclxuICAgICAgICAgICAgICAgICAgICAhbWUuX2dldFN0YXRzKCkubnVtb2ZJbnRlcnJ1cHQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWUucnVuaW5nID0gZmFsc2U7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBtZS5fdHJpZ2dlZCB8fCBCYXNlLm5leHRUaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZS5vd25lci50cmlnZ2VyKCd1cGxvYWRGaW5pc2hlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLl90cmlnZ2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBfcHV0YmFjazogZnVuY3Rpb24oYmxvY2spIHtcclxuICAgICAgICAgICAgICAgIHZhciBpZHg7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGJsb2NrLmN1dGVkLnVuc2hpZnQoYmxvY2spO1xyXG4gICAgICAgICAgICAgICAgaWR4ID0gdGhpcy5zdGFjay5pbmRleE9mKGJsb2NrLmN1dGVkKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCF+aWR4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFjay51bnNoaWZ0KGJsb2NrLmN1dGVkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBfZ2V0U3RhY2s6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGkgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGFjdDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgd2hpbGUgKCAoYWN0ID0gdGhpcy5zdGFja1sgaSsrIF0pICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICggYWN0LmhhcygpICYmIGFjdC5maWxlLmdldFN0YXR1cygpID09PSBTdGF0dXMuUFJPR1JFU1MgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhY3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghYWN0LmhhcygpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3QuZmlsZS5nZXRTdGF0dXMoKSAhPT0gU3RhdHVzLlBST0dSRVNTICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3QuZmlsZS5nZXRTdGF0dXMoKSAhPT0gU3RhdHVzLklOVEVSUlVQVCApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDmiorlt7Lnu4/lpITnkIblrozkuobnmoTvvIzmiJbogIXvvIznirbmgIHkuLrpnZ4gcHJvZ3Jlc3PvvIjkuIrkvKDkuK3vvInjgIFcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW50ZXJ1cHTvvIjmmoLlgZzkuK3vvIkg55qE56e76Zmk44CCXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhY2suc3BsaWNlKCAtLWksIDEgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIF9uZXh0QmxvY2s6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICBvcHRzID0gbWUub3B0aW9ucyxcclxuICAgICAgICAgICAgICAgICAgICBhY3QsIG5leHQsIGRvbmUsIHByZXBhcmluZztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c5b2T5YmN5paH5Lu26L+Y5pyJ5rKh5pyJ6ZyA6KaB5Lyg6L6T55qE77yM5YiZ55u05o6l6L+U5Zue5Ymp5LiL55qE44CCXHJcbiAgICAgICAgICAgICAgICBpZiAoIChhY3QgPSB0aGlzLl9nZXRTdGFjaygpKSApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOaYr+WQpuaPkOWJjeWHhuWkh+S4i+S4gOS4quaWh+S7tlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggb3B0cy5wcmVwYXJlTmV4dEZpbGUgJiYgIW1lLnBlbmRpbmcubGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZS5fcHJlcGFyZU5leHRGaWxlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjdC5zaGlmdCgpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDlkKbliJnvvIzlpoLmnpzmraPlnKjov5DooYzvvIzliJnlh4blpIfkuIvkuIDkuKrmlofku7bvvIzlubbnrYnlvoXlrozmiJDlkI7ov5Tlm57kuIvkuKrliIbniYfjgIJcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIG1lLnJ1bmluZyApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWmguaenOe8k+WtmOS4reacie+8jOWImeebtOaOpeWcqOe8k+WtmOS4reWPlu+8jOayoeacieWImeWOu3F1ZXVl5Lit5Y+W44CCXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhbWUucGVuZGluZy5sZW5ndGggJiYgbWUuX2dldFN0YXRzKCkubnVtT2ZRdWV1ZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWUuX3ByZXBhcmVOZXh0RmlsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIG5leHQgPSBtZS5wZW5kaW5nLnNoaWZ0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9uZSA9IGZ1bmN0aW9uKCBmaWxlICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoICFmaWxlICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3QgPSBDdXRlRmlsZSggZmlsZSwgb3B0cy5jaHVua2VkID8gb3B0cy5jaHVua1NpemUgOiAwICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lLnN0YWNrLnB1c2goYWN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjdC5zaGlmdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyDmlofku7blj6/og73ov5jlnKhwcmVwYXJl5Lit77yM5Lmf5pyJ5Y+v6IO95bey57uP5a6M5YWo5YeG5aSH5aW95LqG44CCXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBpc1Byb21pc2UoIG5leHQpICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVwYXJpbmcgPSBuZXh0LmZpbGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQgPSBuZXh0WyBuZXh0LnBpcGUgPyAncGlwZScgOiAndGhlbicgXSggZG9uZSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0LmZpbGUgPSBwcmVwYXJpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkb25lKCBuZXh0ICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQGV2ZW50IHVwbG9hZFN0YXJ0XHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZX0gZmlsZSBGaWxl5a+56LGhXHJcbiAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiDmn5DkuKrmlofku7blvIDlp4vkuIrkvKDliY3op6blj5HvvIzkuIDkuKrmlofku7blj6rkvJrop6blj5HkuIDmrKHjgIJcclxuICAgICAgICAgICAgICogQGZvciAgVXBsb2FkZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIF9wcmVwYXJlTmV4dEZpbGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICBmaWxlID0gbWUucmVxdWVzdCgnZmV0Y2gtZmlsZScpLFxyXG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmcgPSBtZS5wZW5kaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2U7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmICggZmlsZSApIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlID0gbWUucmVxdWVzdCggJ2JlZm9yZS1zZW5kLWZpbGUnLCBmaWxlLCBmdW5jdGlvbigpIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDmnInlj6/og73mlofku7booqtza2lw5o6J5LqG44CC5paH5Lu26KKrc2tpcOaOieWQju+8jOeKtuaAgeWdkeWumuS4jeaYr1F1ZXVlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBmaWxlLmdldFN0YXR1cygpID09PSBTdGF0dXMuUFJPR1JFU1MgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUuZ2V0U3RhdHVzKCkgPT09IFN0YXR1cy5JTlRFUlJVUFQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtZS5fZmluaXNoRmlsZSggZmlsZSApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgbWUub3duZXIudHJpZ2dlciggJ3VwbG9hZFN0YXJ0JywgZmlsZSApO1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbGUuc2V0U3RhdHVzKCBTdGF0dXMuUFJPR1JFU1MgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuZmlsZSA9IGZpbGU7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpzov5jlnKhwZW5kaW5n5Lit77yM5YiZ5pu/5o2i5oiQ5paH5Lu25pys6Lqr44CCXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5kb25lKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gJC5pbkFycmF5KCBwcm9taXNlLCBwZW5kaW5nICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfmlkeCAmJiBwZW5kaW5nLnNwbGljZSggaWR4LCAxLCBmaWxlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBiZWZlb3JlLXNlbmQtZmlsZeeahOmSqeWtkOWwseaciemUmeivr+WPkeeUn+OAglxyXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuZmFpbChmdW5jdGlvbiggcmVhc29uICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlLnNldFN0YXR1cyggU3RhdHVzLkVSUk9SLCByZWFzb24gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWUub3duZXIudHJpZ2dlciggJ3VwbG9hZEVycm9yJywgZmlsZSwgcmVhc29uICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lLm93bmVyLnRyaWdnZXIoICd1cGxvYWRDb21wbGV0ZScsIGZpbGUgKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmcucHVzaCggcHJvbWlzZSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIOiuqeWHuuS9jee9ruS6hu+8jOWPr+S7peiuqeWFtuS7luWIhueJh+W8gOWni+S4iuS8oFxyXG4gICAgICAgICAgICBfcG9wQmxvY2s6IGZ1bmN0aW9uKCBibG9jayApIHtcclxuICAgICAgICAgICAgICAgIHZhciBpZHggPSAkLmluQXJyYXkoIGJsb2NrLCB0aGlzLnBvb2wgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5wb29sLnNwbGljZSggaWR4LCAxICk7XHJcbiAgICAgICAgICAgICAgICBibG9jay5maWxlLnJlbWFuaW5nLS07XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbWFuaW5nLS07XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLy8g5byA5aeL5LiK5Lyg77yM5Y+v5Lul6KKr5o6J6L+H44CC5aaC5p6ccHJvbWlzZeiiq3JlamVjdOS6hu+8jOWImeihqOekuui3s+i/h+atpOWIhueJh+OAglxyXG4gICAgICAgICAgICBfc3RhcnRTZW5kOiBmdW5jdGlvbiggYmxvY2sgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWUgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGUgPSBibG9jay5maWxlLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2U7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOacieWPr+iDveWcqCBiZWZvcmUtc2VuZC1maWxlIOeahCBwcm9taXNlIOacn+mXtOaUueWPmOS6huaWh+S7tueKtuaAgeOAglxyXG4gICAgICAgICAgICAgICAgLy8g5aaC77ya5pqC5YGc77yM5Y+W5raIXHJcbiAgICAgICAgICAgICAgICAvLyDmiJHku6zkuI3og73kuK3mlq0gcHJvbWlzZSwg5L2G5piv5Y+v5Lul5ZyoIHByb21pc2Ug5a6M5ZCO77yM5LiN5YGa5LiK5Lyg5pON5L2c44CCXHJcbiAgICAgICAgICAgICAgICBpZiAoIGZpbGUuZ2V0U3RhdHVzKCkgIT09IFN0YXR1cy5QUk9HUkVTUyApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWmguaenOaYr+S4reaWre+8jOWImei/mOmcgOimgeaUvuWbnuWOu+OAglxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWxlLmdldFN0YXR1cygpID09PSBTdGF0dXMuSU5URVJSVVBUKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lLl9wdXRiYWNrKGJsb2NrKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG1lLnBvb2wucHVzaCggYmxvY2sgKTtcclxuICAgICAgICAgICAgICAgIG1lLnJlbWFuaW5nKys7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOWmguaenOayoeacieWIhueJh++8jOWImeebtOaOpeS9v+eUqOWOn+Wni+eahOOAglxyXG4gICAgICAgICAgICAgICAgLy8g5LiN5Lya5Lii5aSxY29udGVudC10eXBl5L+h5oGv44CCXHJcbiAgICAgICAgICAgICAgICBibG9jay5ibG9iID0gYmxvY2suY2h1bmtzID09PSAxID8gZmlsZS5zb3VyY2UgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlLnNvdXJjZS5zbGljZSggYmxvY2suc3RhcnQsIGJsb2NrLmVuZCApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBob29rLCDmr4/kuKrliIbniYflj5HpgIHkuYvliY3lj6/og73opoHlgZrkupvlvILmraXnmoTkuovmg4XjgIJcclxuICAgICAgICAgICAgICAgIHByb21pc2UgPSBtZS5yZXF1ZXN0KCAnYmVmb3JlLXNlbmQnLCBibG9jaywgZnVuY3Rpb24oKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyDmnInlj6/og73mlofku7blt7Lnu4/kuIrkvKDlh7rplJnkuobvvIzmiYDku6XkuI3pnIDopoHlho3kvKDovpPkuobjgIJcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGZpbGUuZ2V0U3RhdHVzKCkgPT09IFN0YXR1cy5QUk9HUkVTUyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWUuX2RvU2VuZCggYmxvY2sgKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZS5fcG9wQmxvY2soIGJsb2NrICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEJhc2UubmV4dFRpY2soIG1lLl9fdGljayApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzkuLpmYWls5LqG77yM5YiZ6Lez6L+H5q2k5YiG54mH44CCXHJcbiAgICAgICAgICAgICAgICBwcm9taXNlLmZhaWwoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBmaWxlLnJlbWFuaW5nID09PSAxICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZS5fZmluaXNoRmlsZSggZmlsZSApLmFsd2F5cyhmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLnBlcmNlbnRhZ2UgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUuX3BvcEJsb2NrKCBibG9jayApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUub3duZXIudHJpZ2dlciggJ3VwbG9hZENvbXBsZXRlJywgZmlsZSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQmFzZS5uZXh0VGljayggbWUuX190aWNrICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLnBlcmNlbnRhZ2UgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZS51cGRhdGVGaWxlUHJvZ3Jlc3MoIGZpbGUgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWUuX3BvcEJsb2NrKCBibG9jayApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBCYXNlLm5leHRUaWNrKCBtZS5fX3RpY2sgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBAZXZlbnQgdXBsb2FkQmVmb3JlU2VuZFxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIOm7mOiupOeahOS4iuS8oOWPguaVsO+8jOWPr+S7peaJqeWxleatpOWvueixoeadpeaOp+WItuS4iuS8oOWPguaVsOOAglxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVycyDlj6/ku6XmianlsZXmraTlr7nosaHmnaXmjqfliLbkuIrkvKDlpLTpg6jjgIJcclxuICAgICAgICAgICAgICogQGRlc2NyaXB0aW9uIOW9k+afkOS4quaWh+S7tueahOWIhuWdl+WcqOWPkemAgeWJjeinpuWPke+8jOS4u+imgeeUqOadpeivoumXruaYr+WQpuimgea3u+WKoOmZhOW4puWPguaVsO+8jOWkp+aWh+S7tuWcqOW8gOi1t+WIhueJh+S4iuS8oOeahOWJjeaPkOS4i+atpOS6i+S7tuWPr+iDveS8muinpuWPkeWkmuasoeOAglxyXG4gICAgICAgICAgICAgKiBAZm9yICBVcGxvYWRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQGV2ZW50IHVwbG9hZEFjY2VwdFxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXQg5pyN5Yqh56uv55qE6L+U5Zue5pWw5o2u77yManNvbuagvOW8j++8jOWmguaenOacjeWKoeerr+S4jeaYr2pzb27moLzlvI/vvIzku45yZXQuX3Jhd+S4reWPluaVsOaNru+8jOiHquihjOino+aekOOAglxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g5b2T5p+Q5Liq5paH5Lu25LiK5Lyg5Yiw5pyN5Yqh56uv5ZON5bqU5ZCO77yM5Lya5rS+6YCB5q2k5LqL5Lu25p2l6K+i6Zeu5pyN5Yqh56uv5ZON5bqU5piv5ZCm5pyJ5pWI44CC5aaC5p6c5q2k5LqL5Lu2aGFuZGxlcui/lOWbnuWAvOS4umBmYWxzZWAsIOWImeatpOaWh+S7tuWwhua0vumAgWBzZXJ2ZXJg57G75Z6L55qEYHVwbG9hZEVycm9yYOS6i+S7tuOAglxyXG4gICAgICAgICAgICAgKiBAZm9yICBVcGxvYWRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQGV2ZW50IHVwbG9hZFByb2dyZXNzXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZX0gZmlsZSBGaWxl5a+56LGhXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBwZXJjZW50YWdlIOS4iuS8oOi/m+W6plxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g5LiK5Lyg6L+H56iL5Lit6Kem5Y+R77yM5pC65bim5LiK5Lyg6L+b5bqm44CCXHJcbiAgICAgICAgICAgICAqIEBmb3IgIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEBldmVudCB1cGxvYWRFcnJvclxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGV9IGZpbGUgRmlsZeWvueixoVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gcmVhc29uIOWHuumUmeeahGNvZGVcclxuICAgICAgICAgICAgICogQGRlc2NyaXB0aW9uIOW9k+aWh+S7tuS4iuS8oOWHuumUmeaXtuinpuWPkeOAglxyXG4gICAgICAgICAgICAgKiBAZm9yICBVcGxvYWRlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgIFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQGV2ZW50IHVwbG9hZFN1Y2Nlc3NcclxuICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlfSBmaWxlIEZpbGXlr7nosaFcclxuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHJlc3BvbnNlIOacjeWKoeerr+i/lOWbnueahOaVsOaNrlxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g5b2T5paH5Lu25LiK5Lyg5oiQ5Yqf5pe26Kem5Y+R44CCXHJcbiAgICAgICAgICAgICAqIEBmb3IgIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBAZXZlbnQgdXBsb2FkQ29tcGxldGVcclxuICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlfSBbZmlsZV0gRmlsZeWvueixoVxyXG4gICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g5LiN566h5oiQ5Yqf5oiW6ICF5aSx6LSl77yM5paH5Lu25LiK5Lyg5a6M5oiQ5pe26Kem5Y+R44CCXHJcbiAgICAgICAgICAgICAqIEBmb3IgIFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIOWBmuS4iuS8oOaTjeS9nOOAglxyXG4gICAgICAgICAgICBfZG9TZW5kOiBmdW5jdGlvbiggYmxvY2sgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWUgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgIG93bmVyID0gbWUub3duZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cyA9IG1lLm9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZSA9IGJsb2NrLmZpbGUsXHJcbiAgICAgICAgICAgICAgICAgICAgdHIgPSBuZXcgVHJhbnNwb3J0KCBvcHRzICksXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9ICQuZXh0ZW5kKHt9LCBvcHRzLmZvcm1EYXRhICksXHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVycyA9ICQuZXh0ZW5kKHt9LCBvcHRzLmhlYWRlcnMgKSxcclxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0QWNjZXB0LCByZXQ7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGJsb2NrLnRyYW5zcG9ydCA9IHRyO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB0ci5vbiggJ2Rlc3Ryb3knLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgYmxvY2sudHJhbnNwb3J0O1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLl9wb3BCbG9jayggYmxvY2sgKTtcclxuICAgICAgICAgICAgICAgICAgICBCYXNlLm5leHRUaWNrKCBtZS5fX3RpY2sgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDlub/mkq3kuIrkvKDov5vluqbjgILku6Xmlofku7bkuLrljZXkvY3jgIJcclxuICAgICAgICAgICAgICAgIHRyLm9uKCAncHJvZ3Jlc3MnLCBmdW5jdGlvbiggcGVyY2VudGFnZSApIHtcclxuICAgICAgICAgICAgICAgICAgICBibG9jay5wZXJjZW50YWdlID0gcGVyY2VudGFnZTtcclxuICAgICAgICAgICAgICAgICAgICBtZS51cGRhdGVGaWxlUHJvZ3Jlc3MoIGZpbGUgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDnlKjmnaXor6Lpl67vvIzmmK/lkKbov5Tlm57nmoTnu5PmnpzmmK/mnInplJnor6/nmoTjgIJcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RBY2NlcHQgPSBmdW5jdGlvbiggcmVqZWN0ICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmbjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldCA9IHRyLmdldFJlc3BvbnNlQXNKc29uKCkgfHwge307XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0Ll9yYXcgPSB0ci5nZXRSZXNwb25zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZuID0gZnVuY3Rpb24oIHZhbHVlICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5pyN5Yqh56uv5ZON5bqU5LqG77yM5LiN5Luj6KGo5oiQ5Yqf5LqG77yM6K+i6Zeu5piv5ZCm5ZON5bqU5q2j56Gu44CCXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhb3duZXIudHJpZ2dlciggJ3VwbG9hZEFjY2VwdCcsIGJsb2NrLCByZXQsIGZuICkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCA9IHJlamVjdCB8fCAnc2VydmVyJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0O1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g5bCd6K+V6YeN6K+V77yM54S25ZCO5bm/5pKt5paH5Lu25LiK5Lyg5Ye66ZSZ44CCXHJcbiAgICAgICAgICAgICAgICB0ci5vbiggJ2Vycm9yJywgZnVuY3Rpb24oIHR5cGUsIGZsYWcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmxvY2sucmV0cmllZCA9IGJsb2NrLnJldHJpZWQgfHwgMDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOiHquWKqOmHjeivlVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggYmxvY2suY2h1bmtzID4gMSAmJiB+J2h0dHAsYWJvcnQnLmluZGV4T2YoIHR5cGUgKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sucmV0cmllZCA8IG9wdHMuY2h1bmtSZXRyeSApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBibG9jay5yZXRyaWVkKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyLnNlbmQoKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaHR0cCBzdGF0dXMgNTAwIH4gNjAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggIWZsYWcgJiYgdHlwZSA9PT0gJ3NlcnZlcicgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlID0gcmVxdWVzdEFjY2VwdCggdHlwZSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZS5zZXRTdGF0dXMoIFN0YXR1cy5FUlJPUiwgdHlwZSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvd25lci50cmlnZ2VyKCAndXBsb2FkRXJyb3InLCBmaWxlLCB0eXBlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG93bmVyLnRyaWdnZXIoICd1cGxvYWRDb21wbGV0ZScsIGZpbGUgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g5LiK5Lyg5oiQ5YqfXHJcbiAgICAgICAgICAgICAgICB0ci5vbiggJ2xvYWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVhc29uO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c6Z2e6aKE5pyf77yM6L2s5ZCR5LiK5Lyg5Ye66ZSZ44CCXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAocmVhc29uID0gcmVxdWVzdEFjY2VwdCgpKSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHIudHJpZ2dlciggJ2Vycm9yJywgcmVhc29uLCB0cnVlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyDlhajpg6jkuIrkvKDlrozmiJDjgIJcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGZpbGUucmVtYW5pbmcgPT09IDEgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lLl9maW5pc2hGaWxlKCBmaWxlLCByZXQgKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ci5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOmFjee9rum7mOiupOeahOS4iuS8oOWtl+auteOAglxyXG4gICAgICAgICAgICAgICAgZGF0YSA9ICQuZXh0ZW5kKCBkYXRhLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGZpbGUuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogZmlsZS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGZpbGUudHlwZSxcclxuICAgICAgICAgICAgICAgICAgICBsYXN0TW9kaWZpZWREYXRlOiBmaWxlLmxhc3RNb2RpZmllZERhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogZmlsZS5zaXplXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgYmxvY2suY2h1bmtzID4gMSAmJiAkLmV4dGVuZCggZGF0YSwge1xyXG4gICAgICAgICAgICAgICAgICAgIGNodW5rczogYmxvY2suY2h1bmtzLFxyXG4gICAgICAgICAgICAgICAgICAgIGNodW5rOiBibG9jay5jaHVua1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOWcqOWPkemAgeS5i+mXtOWPr+S7pea3u+WKoOWtl+auteS7gOS5iOeahOOAguOAguOAglxyXG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c6buY6K6k55qE5a2X5q615LiN5aSf5L2/55So77yM5Y+v5Lul6YCa6L+H55uR5ZCs5q2k5LqL5Lu25p2l5omp5bGVXHJcbiAgICAgICAgICAgICAgICBvd25lci50cmlnZ2VyKCAndXBsb2FkQmVmb3JlU2VuZCcsIGJsb2NrLCBkYXRhLCBoZWFkZXJzICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOW8gOWni+WPkemAgeOAglxyXG4gICAgICAgICAgICAgICAgdHIuYXBwZW5kQmxvYiggb3B0cy5maWxlVmFsLCBibG9jay5ibG9iLCBmaWxlLm5hbWUgKTtcclxuICAgICAgICAgICAgICAgIHRyLmFwcGVuZCggZGF0YSApO1xyXG4gICAgICAgICAgICAgICAgdHIuc2V0UmVxdWVzdEhlYWRlciggaGVhZGVycyApO1xyXG4gICAgICAgICAgICAgICAgdHIuc2VuZCgpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIOWujOaIkOS4iuS8oOOAglxyXG4gICAgICAgICAgICBfZmluaXNoRmlsZTogZnVuY3Rpb24oIGZpbGUsIHJldCwgaGRzICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG93bmVyID0gdGhpcy5vd25lcjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG93bmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXF1ZXN0KCAnYWZ0ZXItc2VuZC1maWxlJywgYXJndW1lbnRzLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUuc2V0U3RhdHVzKCBTdGF0dXMuQ09NUExFVEUgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG93bmVyLnRyaWdnZXIoICd1cGxvYWRTdWNjZXNzJywgZmlsZSwgcmV0LCBoZHMgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmZhaWwoZnVuY3Rpb24oIHJlYXNvbiApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c5aSW6YOo5bey57uP5qCH6K6w5Li6aW52YWxpZOS7gOS5iOeahO+8jOS4jeWGjeaUueeKtuaAgeOAglxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBmaWxlLmdldFN0YXR1cygpID09PSBTdGF0dXMuUFJPR1JFU1MgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZS5zZXRTdGF0dXMoIFN0YXR1cy5FUlJPUiwgcmVhc29uICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG93bmVyLnRyaWdnZXIoICd1cGxvYWRFcnJvcicsIGZpbGUsIHJlYXNvbiApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWx3YXlzKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3duZXIudHJpZ2dlciggJ3VwbG9hZENvbXBsZXRlJywgZmlsZSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICB1cGRhdGVGaWxlUHJvZ3Jlc3M6IGZ1bmN0aW9uKGZpbGUpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0b3RhbFBlcmNlbnQgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHVwbG9hZGVkID0gMDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCFmaWxlLmJsb2Nrcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgJC5lYWNoKCBmaWxlLmJsb2NrcywgZnVuY3Rpb24oIF8sIHYgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBsb2FkZWQgKz0gKHYucGVyY2VudGFnZSB8fCAwKSAqICh2LmVuZCAtIHYuc3RhcnQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHRvdGFsUGVyY2VudCA9IHVwbG9hZGVkIC8gZmlsZS5zaXplO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vd25lci50cmlnZ2VyKCAndXBsb2FkUHJvZ3Jlc3MnLCBmaWxlLCB0b3RhbFBlcmNlbnQgfHwgMCApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEBmaWxlT3ZlcnZpZXcg5ZCE56eN6aqM6K+B77yM5YyF5ous5paH5Lu25oC75aSn5bCP5piv5ZCm6LaF5Ye644CB5Y2V5paH5Lu25piv5ZCm6LaF5Ye65ZKM5paH5Lu25piv5ZCm6YeN5aSN44CCXHJcbiAgICAgKi9cclxuICAgIFxyXG4gICAgZGVmaW5lKCd3aWRnZXRzL3ZhbGlkYXRvcicsW1xyXG4gICAgICAgICdiYXNlJyxcclxuICAgICAgICAndXBsb2FkZXInLFxyXG4gICAgICAgICdmaWxlJyxcclxuICAgICAgICAnd2lkZ2V0cy93aWRnZXQnXHJcbiAgICBdLCBmdW5jdGlvbiggQmFzZSwgVXBsb2FkZXIsIFdVRmlsZSApIHtcclxuICAgIFxyXG4gICAgICAgIHZhciAkID0gQmFzZS4kLFxyXG4gICAgICAgICAgICB2YWxpZGF0b3JzID0ge30sXHJcbiAgICAgICAgICAgIGFwaTtcclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBldmVudCBlcnJvclxyXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIOmUmeivr+exu+Wei+OAglxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiDlvZN2YWxpZGF0ZeS4jemAmui/h+aXtu+8jOS8muS7pea0vumAgemUmeivr+S6i+S7tueahOW9ouW8j+mAmuefpeiwg+eUqOiAheOAgumAmui/h2B1cGxvYWQub24oJ2Vycm9yJywgaGFuZGxlcilg5Y+v5Lul5o2V6I635Yiw5q2k57G76ZSZ6K+v77yM55uu5YmN5pyJ5Lul5LiL6ZSZ6K+v5Lya5Zyo54m55a6a55qE5oOF5Ya15LiL5rS+6YCB6ZSZ5p2l44CCXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAqIGBRX0VYQ0VFRF9OVU1fTElNSVRgIOWcqOiuvue9ruS6hmBmaWxlTnVtTGltaXRg5LiU5bCd6K+V57uZYHVwbG9hZGVyYOa3u+WKoOeahOaWh+S7tuaVsOmHj+i2heWHuui/meS4quWAvOaXtua0vumAgeOAglxyXG4gICAgICAgICAqICogYFFfRVhDRUVEX1NJWkVfTElNSVRgIOWcqOiuvue9ruS6hmBRX0VYQ0VFRF9TSVpFX0xJTUlUYOS4lOWwneivlee7mWB1cGxvYWRlcmDmt7vliqDnmoTmlofku7bmgLvlpKflsI/otoXlh7rov5nkuKrlgLzml7bmtL7pgIHjgIJcclxuICAgICAgICAgKiAqIGBRX1RZUEVfREVOSUVEYCDlvZPmlofku7bnsbvlnovkuI3mu6HotrPml7bop6blj5HjgILjgIJcclxuICAgICAgICAgKiBAZm9yICBVcGxvYWRlclxyXG4gICAgICAgICAqL1xyXG4gICAgXHJcbiAgICAgICAgLy8g5pq06Zyy57uZ5aSW6Z2i55qEYXBpXHJcbiAgICAgICAgYXBpID0ge1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIOa3u+WKoOmqjOivgeWZqFxyXG4gICAgICAgICAgICBhZGRWYWxpZGF0b3I6IGZ1bmN0aW9uKCB0eXBlLCBjYiApIHtcclxuICAgICAgICAgICAgICAgIHZhbGlkYXRvcnNbIHR5cGUgXSA9IGNiO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIOenu+mZpOmqjOivgeWZqFxyXG4gICAgICAgICAgICByZW1vdmVWYWxpZGF0b3I6IGZ1bmN0aW9uKCB0eXBlICkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHZhbGlkYXRvcnNbIHR5cGUgXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAvLyDlnKhVcGxvYWRlcuWIneWni+WMlueahOaXtuWAmeWQr+WKqFZhbGlkYXRvcnPnmoTliJ3lp4vljJZcclxuICAgICAgICBVcGxvYWRlci5yZWdpc3Rlcih7XHJcbiAgICAgICAgICAgIG5hbWU6ICd2YWxpZGF0b3InLFxyXG4gICAgXHJcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lID0gdGhpcztcclxuICAgICAgICAgICAgICAgIEJhc2UubmV4dFRpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKCB2YWxpZGF0b3JzLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxsKCBtZS5vd25lciApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7aW50fSBbZmlsZU51bUxpbWl0PXVuZGVmaW5lZF1cclxuICAgICAgICAgKiBAbmFtZXNwYWNlIG9wdGlvbnNcclxuICAgICAgICAgKiBAZm9yIFVwbG9hZGVyXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIOmqjOivgeaWh+S7tuaAu+aVsOmHjywg6LaF5Ye65YiZ5LiN5YWB6K645Yqg5YWl6Zif5YiX44CCXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgYXBpLmFkZFZhbGlkYXRvciggJ2ZpbGVOdW1MaW1pdCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgdXBsb2FkZXIgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgb3B0cyA9IHVwbG9hZGVyLm9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICBjb3VudCA9IDAsXHJcbiAgICAgICAgICAgICAgICBtYXggPSBwYXJzZUludCggb3B0cy5maWxlTnVtTGltaXQsIDEwICksXHJcbiAgICAgICAgICAgICAgICBmbGFnID0gdHJ1ZTtcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoICFtYXggKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICB1cGxvYWRlci5vbiggJ2JlZm9yZUZpbGVRdWV1ZWQnLCBmdW5jdGlvbiggZmlsZSApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCBjb3VudCA+PSBtYXggJiYgZmxhZyApIHtcclxuICAgICAgICAgICAgICAgICAgICBmbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCAnZXJyb3InLCAnUV9FWENFRURfTlVNX0xJTUlUJywgbWF4LCBmaWxlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY291bnQgPj0gbWF4ID8gZmFsc2UgOiB0cnVlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICB1cGxvYWRlci5vbiggJ2ZpbGVRdWV1ZWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHVwbG9hZGVyLm9uKCAnZmlsZURlcXVldWVkJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBjb3VudC0tO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICB1cGxvYWRlci5vbiggJ3Jlc2V0JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBjb3VudCA9IDA7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcHJvcGVydHkge2ludH0gW2ZpbGVTaXplTGltaXQ9dW5kZWZpbmVkXVxyXG4gICAgICAgICAqIEBuYW1lc3BhY2Ugb3B0aW9uc1xyXG4gICAgICAgICAqIEBmb3IgVXBsb2FkZXJcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24g6aqM6K+B5paH5Lu25oC75aSn5bCP5piv5ZCm6LaF5Ye66ZmQ5Yi2LCDotoXlh7rliJnkuI3lhYHorrjliqDlhaXpmJ/liJfjgIJcclxuICAgICAgICAgKi9cclxuICAgICAgICBhcGkuYWRkVmFsaWRhdG9yKCAnZmlsZVNpemVMaW1pdCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgdXBsb2FkZXIgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgb3B0cyA9IHVwbG9hZGVyLm9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICBjb3VudCA9IDAsXHJcbiAgICAgICAgICAgICAgICBtYXggPSBwYXJzZUludCggb3B0cy5maWxlU2l6ZUxpbWl0LCAxMCApLFxyXG4gICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKCAhbWF4ICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgdXBsb2FkZXIub24oICdiZWZvcmVGaWxlUXVldWVkJywgZnVuY3Rpb24oIGZpbGUgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW52YWxpZCA9IGNvdW50ICsgZmlsZS5zaXplID4gbWF4O1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIGludmFsaWQgJiYgZmxhZyApIHtcclxuICAgICAgICAgICAgICAgICAgICBmbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCAnZXJyb3InLCAnUV9FWENFRURfU0laRV9MSU1JVCcsIG1heCwgZmlsZSApO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDEgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGludmFsaWQgPyBmYWxzZSA6IHRydWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHVwbG9hZGVyLm9uKCAnZmlsZVF1ZXVlZCcsIGZ1bmN0aW9uKCBmaWxlICkge1xyXG4gICAgICAgICAgICAgICAgY291bnQgKz0gZmlsZS5zaXplO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICB1cGxvYWRlci5vbiggJ2ZpbGVEZXF1ZXVlZCcsIGZ1bmN0aW9uKCBmaWxlICkge1xyXG4gICAgICAgICAgICAgICAgY291bnQgLT0gZmlsZS5zaXplO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICB1cGxvYWRlci5vbiggJ3Jlc2V0JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBjb3VudCA9IDA7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHByb3BlcnR5IHtpbnR9IFtmaWxlU2luZ2xlU2l6ZUxpbWl0PXVuZGVmaW5lZF1cclxuICAgICAgICAgKiBAbmFtZXNwYWNlIG9wdGlvbnNcclxuICAgICAgICAgKiBAZm9yIFVwbG9hZGVyXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIOmqjOivgeWNleS4quaWh+S7tuWkp+Wwj+aYr+WQpui2heWHuumZkOWItiwg6LaF5Ye65YiZ5LiN5YWB6K645Yqg5YWl6Zif5YiX44CCXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgYXBpLmFkZFZhbGlkYXRvciggJ2ZpbGVTaW5nbGVTaXplTGltaXQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHVwbG9hZGVyID0gdGhpcyxcclxuICAgICAgICAgICAgICAgIG9wdHMgPSB1cGxvYWRlci5vcHRpb25zLFxyXG4gICAgICAgICAgICAgICAgbWF4ID0gb3B0cy5maWxlU2luZ2xlU2l6ZUxpbWl0O1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICggIW1heCApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHVwbG9hZGVyLm9uKCAnYmVmb3JlRmlsZVF1ZXVlZCcsIGZ1bmN0aW9uKCBmaWxlICkge1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIGZpbGUuc2l6ZSA+IG1heCApIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlLnNldFN0YXR1cyggV1VGaWxlLlN0YXR1cy5JTlZBTElELCAnZXhjZWVkX3NpemUnICk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCAnZXJyb3InLCAnRl9FWENFRURfU0laRScsIG1heCwgZmlsZSApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHByb3BlcnR5IHtCb29sZWFufSBbZHVwbGljYXRlPXVuZGVmaW5lZF1cclxuICAgICAgICAgKiBAbmFtZXNwYWNlIG9wdGlvbnNcclxuICAgICAgICAgKiBAZm9yIFVwbG9hZGVyXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIOWOu+mHje+8jCDmoLnmja7mlofku7blkI3lrZfjgIHmlofku7blpKflsI/lkozmnIDlkI7kv67mlLnml7bpl7TmnaXnlJ/miJBoYXNoIEtleS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBhcGkuYWRkVmFsaWRhdG9yKCAnZHVwbGljYXRlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciB1cGxvYWRlciA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICBvcHRzID0gdXBsb2FkZXIub3B0aW9ucyxcclxuICAgICAgICAgICAgICAgIG1hcHBpbmcgPSB7fTtcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoIG9wdHMuZHVwbGljYXRlICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgZnVuY3Rpb24gaGFzaFN0cmluZyggc3RyICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGhhc2ggPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGkgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGxlbiA9IHN0ci5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgX2NoYXI7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xyXG4gICAgICAgICAgICAgICAgICAgIF9jaGFyID0gc3RyLmNoYXJDb2RlQXQoIGkgKTtcclxuICAgICAgICAgICAgICAgICAgICBoYXNoID0gX2NoYXIgKyAoaGFzaCA8PCA2KSArIChoYXNoIDw8IDE2KSAtIGhhc2g7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBoYXNoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgdXBsb2FkZXIub24oICdiZWZvcmVGaWxlUXVldWVkJywgZnVuY3Rpb24oIGZpbGUgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaGFzaCA9IGZpbGUuX19oYXNoIHx8IChmaWxlLl9faGFzaCA9IGhhc2hTdHJpbmcoIGZpbGUubmFtZSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUuc2l6ZSArIGZpbGUubGFzdE1vZGlmaWVkRGF0ZSApKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g5bey57uP6YeN5aSN5LqGXHJcbiAgICAgICAgICAgICAgICBpZiAoIG1hcHBpbmdbIGhhc2ggXSApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoICdlcnJvcicsICdGX0RVUExJQ0FURScsIGZpbGUgKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHVwbG9hZGVyLm9uKCAnZmlsZVF1ZXVlZCcsIGZ1bmN0aW9uKCBmaWxlICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGhhc2ggPSBmaWxlLl9faGFzaDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaGFzaCAmJiAobWFwcGluZ1sgaGFzaCBdID0gdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHVwbG9hZGVyLm9uKCAnZmlsZURlcXVldWVkJywgZnVuY3Rpb24oIGZpbGUgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaGFzaCA9IGZpbGUuX19oYXNoO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBoYXNoICYmIChkZWxldGUgbWFwcGluZ1sgaGFzaCBdKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgdXBsb2FkZXIub24oICdyZXNldCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgbWFwcGluZyA9IHt9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBhcGk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IE1kNVxyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ2xpYi9tZDUnLFtcclxuICAgICAgICAncnVudGltZS9jbGllbnQnLFxyXG4gICAgICAgICdtZWRpYXRvcidcclxuICAgIF0sIGZ1bmN0aW9uKCBSdW50aW1lQ2xpZW50LCBNZWRpYXRvciApIHtcclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIE1kNSgpIHtcclxuICAgICAgICAgICAgUnVudGltZUNsaWVudC5jYWxsKCB0aGlzLCAnTWQ1JyApO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8vIOiuqSBNZDUg5YW35aSH5LqL5Lu25Yqf6IO944CCXHJcbiAgICAgICAgTWVkaWF0b3IuaW5zdGFsbFRvKCBNZDUucHJvdG90eXBlICk7XHJcbiAgICBcclxuICAgICAgICBNZDUucHJvdG90eXBlLmxvYWRGcm9tQmxvYiA9IGZ1bmN0aW9uKCBibG9iICkge1xyXG4gICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICggbWUuZ2V0UnVpZCgpICkge1xyXG4gICAgICAgICAgICAgICAgbWUuZGlzY29ubmVjdFJ1bnRpbWUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIOi/nuaOpeWIsGJsb2LlvZLlsZ7nmoTlkIzkuIDkuKpydW50aW1lLlxyXG4gICAgICAgICAgICBtZS5jb25uZWN0UnVudGltZSggYmxvYi5ydWlkLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIG1lLmV4ZWMoJ2luaXQnKTtcclxuICAgICAgICAgICAgICAgIG1lLmV4ZWMoICdsb2FkRnJvbUJsb2InLCBibG9iICk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBNZDUucHJvdG90eXBlLmdldFJlc3VsdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5leGVjKCdnZXRSZXN1bHQnKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIE1kNTtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IOWbvueJh+aTjeS9nCwg6LSf6LSj6aKE6KeI5Zu+54mH5ZKM5LiK5Lyg5YmN5Y6L57yp5Zu+54mHXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgnd2lkZ2V0cy9tZDUnLFtcclxuICAgICAgICAnYmFzZScsXHJcbiAgICAgICAgJ3VwbG9hZGVyJyxcclxuICAgICAgICAnbGliL21kNScsXHJcbiAgICAgICAgJ2xpYi9ibG9iJyxcclxuICAgICAgICAnd2lkZ2V0cy93aWRnZXQnXHJcbiAgICBdLCBmdW5jdGlvbiggQmFzZSwgVXBsb2FkZXIsIE1kNSwgQmxvYiApIHtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBVcGxvYWRlci5yZWdpc3Rlcih7XHJcbiAgICAgICAgICAgIG5hbWU6ICdtZDUnLFxyXG4gICAgXHJcbiAgICBcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIOiuoeeul+aWh+S7tiBtZDUg5YC877yM6L+U5Zue5LiA5LiqIHByb21pc2Ug5a+56LGh77yM5Y+v5Lul55uR5ZCsIHByb2dyZXNzIOi/m+W6puOAglxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBAbWV0aG9kIG1kNUZpbGVcclxuICAgICAgICAgICAgICogQGdyYW1tYXIgbWQ1RmlsZSggZmlsZVssIHN0YXJ0WywgZW5kXV0gKSA9PiBwcm9taXNlXHJcbiAgICAgICAgICAgICAqIEBmb3IgVXBsb2FkZXJcclxuICAgICAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogdXBsb2FkZXIub24oICdmaWxlUXVldWVkJywgZnVuY3Rpb24oIGZpbGUgKSB7XHJcbiAgICAgICAgICAgICAqICAgICB2YXIgJGxpID0gLi4uO1xyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiAgICAgdXBsb2FkZXIubWQ1RmlsZSggZmlsZSApXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqICAgICAgICAgLy8g5Y+K5pe25pi+56S66L+b5bqmXHJcbiAgICAgICAgICAgICAqICAgICAgICAgLnByb2dyZXNzKGZ1bmN0aW9uKHBlcmNlbnRhZ2UpIHtcclxuICAgICAgICAgICAgICogICAgICAgICAgICAgY29uc29sZS5sb2coJ1BlcmNlbnRhZ2U6JywgcGVyY2VudGFnZSk7XHJcbiAgICAgICAgICAgICAqICAgICAgICAgfSlcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogICAgICAgICAvLyDlrozmiJBcclxuICAgICAgICAgICAgICogICAgICAgICAudGhlbihmdW5jdGlvbih2YWwpIHtcclxuICAgICAgICAgICAgICogICAgICAgICAgICAgY29uc29sZS5sb2coJ21kNSByZXN1bHQ6JywgdmFsKTtcclxuICAgICAgICAgICAgICogICAgICAgICB9KTtcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogfSk7XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBtZDVGaWxlOiBmdW5jdGlvbiggZmlsZSwgc3RhcnQsIGVuZCApIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZDUgPSBuZXcgTWQ1KCksXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQgPSBCYXNlLkRlZmVycmVkKCksXHJcbiAgICAgICAgICAgICAgICAgICAgYmxvYiA9IChmaWxlIGluc3RhbmNlb2YgQmxvYikgPyBmaWxlIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXF1ZXN0KCAnZ2V0LWZpbGUnLCBmaWxlICkuc291cmNlO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBtZDUub24oICdwcm9ncmVzcyBsb2FkJywgZnVuY3Rpb24oIGUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZSA9IGUgfHwge307XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQubm90aWZ5KCBlLnRvdGFsID8gZS5sb2FkZWQgLyBlLnRvdGFsIDogMSApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG1kNS5vbiggJ2NvbXBsZXRlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSggbWQ1LmdldFJlc3VsdCgpICk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgbWQ1Lm9uKCAnZXJyb3InLCBmdW5jdGlvbiggcmVhc29uICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCggcmVhc29uICk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCBhcmd1bWVudHMubGVuZ3RoID4gMSApIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGFydCA9IHN0YXJ0IHx8IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgZW5kID0gZW5kIHx8IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQgPCAwICYmIChzdGFydCA9IGJsb2Iuc2l6ZSArIHN0YXJ0KTtcclxuICAgICAgICAgICAgICAgICAgICBlbmQgPCAwICYmIChlbmQgPSBibG9iLnNpemUgKyBlbmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVuZCA9IE1hdGgubWluKCBlbmQsIGJsb2Iuc2l6ZSApO1xyXG4gICAgICAgICAgICAgICAgICAgIGJsb2IgPSBibG9iLnNsaWNlKCBzdGFydCwgZW5kICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG1kNS5sb2FkRnJvbUJsb2IoIGJsb2IgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIEBmaWxlT3ZlcnZpZXcgUnVudGltZeeuoeeQhuWZqO+8jOi0n+i0o1J1bnRpbWXnmoTpgInmi6ksIOi/nuaOpVxyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ3J1bnRpbWUvY29tcGJhc2UnLFtdLGZ1bmN0aW9uKCkge1xyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gQ29tcEJhc2UoIG93bmVyLCBydW50aW1lICkge1xyXG4gICAgXHJcbiAgICAgICAgICAgIHRoaXMub3duZXIgPSBvd25lcjtcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gb3duZXIub3B0aW9ucztcclxuICAgIFxyXG4gICAgICAgICAgICB0aGlzLmdldFJ1bnRpbWUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBydW50aW1lO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgICAgIHRoaXMuZ2V0UnVpZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJ1bnRpbWUudWlkO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG93bmVyLnRyaWdnZXIuYXBwbHkoIG93bmVyLCBhcmd1bWVudHMgKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gQ29tcEJhc2U7XHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyBIdG1sNVJ1bnRpbWVcclxuICAgICAqL1xyXG4gICAgZGVmaW5lKCdydW50aW1lL2h0bWw1L3J1bnRpbWUnLFtcclxuICAgICAgICAnYmFzZScsXHJcbiAgICAgICAgJ3J1bnRpbWUvcnVudGltZScsXHJcbiAgICAgICAgJ3J1bnRpbWUvY29tcGJhc2UnXHJcbiAgICBdLCBmdW5jdGlvbiggQmFzZSwgUnVudGltZSwgQ29tcEJhc2UgKSB7XHJcbiAgICBcclxuICAgICAgICB2YXIgdHlwZSA9ICdodG1sNScsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudHMgPSB7fTtcclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIEh0bWw1UnVudGltZSgpIHtcclxuICAgICAgICAgICAgdmFyIHBvb2wgPSB7fSxcclxuICAgICAgICAgICAgICAgIG1lID0gdGhpcyxcclxuICAgICAgICAgICAgICAgIGRlc3Ryb3kgPSB0aGlzLmRlc3Ryb3k7XHJcbiAgICBcclxuICAgICAgICAgICAgUnVudGltZS5hcHBseSggbWUsIGFyZ3VtZW50cyApO1xyXG4gICAgICAgICAgICBtZS50eXBlID0gdHlwZTtcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIOi/meS4quaWueazleeahOiwg+eUqOiAhe+8jOWunumZheS4iuaYr1J1bnRpbWVDbGllbnRcclxuICAgICAgICAgICAgbWUuZXhlYyA9IGZ1bmN0aW9uKCBjb21wLCBmbi8qLCBhcmdzLi4uKi8pIHtcclxuICAgICAgICAgICAgICAgIHZhciBjbGllbnQgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgIHVpZCA9IGNsaWVudC51aWQsXHJcbiAgICAgICAgICAgICAgICAgICAgYXJncyA9IEJhc2Uuc2xpY2UoIGFyZ3VtZW50cywgMiApLFxyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIGNvbXBvbmVudHNbIGNvbXAgXSApIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IHBvb2xbIHVpZCBdID0gcG9vbFsgdWlkIF0gfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBjb21wb25lbnRzWyBjb21wIF0oIGNsaWVudCwgbWUgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggaW5zdGFuY2VbIGZuIF0gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZVsgZm4gXS5hcHBseSggaW5zdGFuY2UsIGFyZ3MgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgbWUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQHRvZG8g5Yig6Zmk5rGg5a2Q5Lit55qE5omA5pyJ5a6e5L6LXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVzdHJveSAmJiBkZXN0cm95LmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBCYXNlLmluaGVyaXRzKCBSdW50aW1lLCB7XHJcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yOiBIdG1sNVJ1bnRpbWUsXHJcbiAgICBcclxuICAgICAgICAgICAgLy8g5LiN6ZyA6KaB6L+e5o6l5YW25LuW56iL5bqP77yM55u05o6l5omn6KGMY2FsbGJhY2tcclxuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZS50cmlnZ2VyKCdyZWFkeScpO1xyXG4gICAgICAgICAgICAgICAgfSwgMSApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgIC8vIOazqOWGjENvbXBvbmVudHNcclxuICAgICAgICBIdG1sNVJ1bnRpbWUucmVnaXN0ZXIgPSBmdW5jdGlvbiggbmFtZSwgY29tcG9uZW50ICkge1xyXG4gICAgICAgICAgICB2YXIga2xhc3MgPSBjb21wb25lbnRzWyBuYW1lIF0gPSBCYXNlLmluaGVyaXRzKCBDb21wQmFzZSwgY29tcG9uZW50ICk7XHJcbiAgICAgICAgICAgIHJldHVybiBrbGFzcztcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgLy8g5rOo5YaMaHRtbDXov5DooYzml7bjgIJcclxuICAgICAgICAvLyDlj6rmnInlnKjmlK/mjIHnmoTliY3mj5DkuIvms6jlhozjgIJcclxuICAgICAgICBpZiAoIHdpbmRvdy5CbG9iICYmIHdpbmRvdy5GaWxlUmVhZGVyICYmIHdpbmRvdy5EYXRhVmlldyApIHtcclxuICAgICAgICAgICAgUnVudGltZS5hZGRSdW50aW1lKCB0eXBlLCBIdG1sNVJ1bnRpbWUgKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gSHRtbDVSdW50aW1lO1xyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIEBmaWxlT3ZlcnZpZXcgQmxvYiBIdG1s5a6e546wXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgncnVudGltZS9odG1sNS9ibG9iJyxbXHJcbiAgICAgICAgJ3J1bnRpbWUvaHRtbDUvcnVudGltZScsXHJcbiAgICAgICAgJ2xpYi9ibG9iJ1xyXG4gICAgXSwgZnVuY3Rpb24oIEh0bWw1UnVudGltZSwgQmxvYiApIHtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBIdG1sNVJ1bnRpbWUucmVnaXN0ZXIoICdCbG9iJywge1xyXG4gICAgICAgICAgICBzbGljZTogZnVuY3Rpb24oIHN0YXJ0LCBlbmQgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmxvYiA9IHRoaXMub3duZXIuc291cmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNsaWNlID0gYmxvYi5zbGljZSB8fCBibG9iLndlYmtpdFNsaWNlIHx8IGJsb2IubW96U2xpY2U7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGJsb2IgPSBzbGljZS5jYWxsKCBibG9iLCBzdGFydCwgZW5kICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQmxvYiggdGhpcy5nZXRSdWlkKCksIGJsb2IgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIEBmaWxlT3ZlcnZpZXcgRmlsZVBhc3RlXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgncnVudGltZS9odG1sNS9kbmQnLFtcclxuICAgICAgICAnYmFzZScsXHJcbiAgICAgICAgJ3J1bnRpbWUvaHRtbDUvcnVudGltZScsXHJcbiAgICAgICAgJ2xpYi9maWxlJ1xyXG4gICAgXSwgZnVuY3Rpb24oIEJhc2UsIEh0bWw1UnVudGltZSwgRmlsZSApIHtcclxuICAgIFxyXG4gICAgICAgIHZhciAkID0gQmFzZS4kLFxyXG4gICAgICAgICAgICBwcmVmaXggPSAnd2VidXBsb2FkZXItZG5kLSc7XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gSHRtbDVSdW50aW1lLnJlZ2lzdGVyKCAnRHJhZ0FuZERyb3AnLCB7XHJcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGVsZW0gPSB0aGlzLmVsZW0gPSB0aGlzLm9wdGlvbnMuY29udGFpbmVyO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyYWdFbnRlckhhbmRsZXIgPSBCYXNlLmJpbmRGbiggdGhpcy5fZHJhZ0VudGVySGFuZGxlciwgdGhpcyApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kcmFnT3ZlckhhbmRsZXIgPSBCYXNlLmJpbmRGbiggdGhpcy5fZHJhZ092ZXJIYW5kbGVyLCB0aGlzICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyYWdMZWF2ZUhhbmRsZXIgPSBCYXNlLmJpbmRGbiggdGhpcy5fZHJhZ0xlYXZlSGFuZGxlciwgdGhpcyApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kcm9wSGFuZGxlciA9IEJhc2UuYmluZEZuKCB0aGlzLl9kcm9wSGFuZGxlciwgdGhpcyApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kbmRPdmVyID0gZmFsc2U7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGVsZW0ub24oICdkcmFnZW50ZXInLCB0aGlzLmRyYWdFbnRlckhhbmRsZXIgKTtcclxuICAgICAgICAgICAgICAgIGVsZW0ub24oICdkcmFnb3ZlcicsIHRoaXMuZHJhZ092ZXJIYW5kbGVyICk7XHJcbiAgICAgICAgICAgICAgICBlbGVtLm9uKCAnZHJhZ2xlYXZlJywgdGhpcy5kcmFnTGVhdmVIYW5kbGVyICk7XHJcbiAgICAgICAgICAgICAgICBlbGVtLm9uKCAnZHJvcCcsIHRoaXMuZHJvcEhhbmRsZXIgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCB0aGlzLm9wdGlvbnMuZGlzYWJsZUdsb2JhbERuZCApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCBkb2N1bWVudCApLm9uKCAnZHJhZ292ZXInLCB0aGlzLmRyYWdPdmVySGFuZGxlciApO1xyXG4gICAgICAgICAgICAgICAgICAgICQoIGRvY3VtZW50ICkub24oICdkcm9wJywgdGhpcy5kcm9wSGFuZGxlciApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIF9kcmFnRW50ZXJIYW5kbGVyOiBmdW5jdGlvbiggZSApIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZSA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgZGVuaWVkID0gbWUuX2RlbmllZCB8fCBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBpdGVtcztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZSA9IGUub3JpZ2luYWxFdmVudCB8fCBlO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoICFtZS5kbmRPdmVyICkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLmRuZE92ZXIgPSB0cnVlO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5rOo5oSP5Y+q5pyJIGNocm9tZSDmlK/mjIHjgIJcclxuICAgICAgICAgICAgICAgICAgICBpdGVtcyA9IGUuZGF0YVRyYW5zZmVyLml0ZW1zO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBpdGVtcyAmJiBpdGVtcy5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lLl9kZW5pZWQgPSBkZW5pZWQgPSAhbWUudHJpZ2dlciggJ2FjY2VwdCcsIGl0ZW1zICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgbWUuZWxlbS5hZGRDbGFzcyggcHJlZml4ICsgJ292ZXInICk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWUuZWxlbVsgZGVuaWVkID8gJ2FkZENsYXNzJyA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAncmVtb3ZlQ2xhc3MnIF0oIHByZWZpeCArICdkZW5pZWQnICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGUuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSBkZW5pZWQgPyAnbm9uZScgOiAnY29weSc7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBfZHJhZ092ZXJIYW5kbGVyOiBmdW5jdGlvbiggZSApIHtcclxuICAgICAgICAgICAgICAgIC8vIOWPquWkhOeQhuahhuWGheeahOOAglxyXG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudEVsZW0gPSB0aGlzLmVsZW0ucGFyZW50KCkuZ2V0KCAwICk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHBhcmVudEVsZW0gJiYgISQuY29udGFpbnMoIHBhcmVudEVsZW0sIGUuY3VycmVudFRhcmdldCApICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KCB0aGlzLl9sZWF2ZVRpbWVyICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kcmFnRW50ZXJIYW5kbGVyLmNhbGwoIHRoaXMsIGUgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIF9kcmFnTGVhdmVIYW5kbGVyOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZSA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlcjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaGFuZGxlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lLmRuZE92ZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBtZS5lbGVtLnJlbW92ZUNsYXNzKCBwcmVmaXggKyAnb3ZlciAnICsgcHJlZml4ICsgJ2RlbmllZCcgKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCggbWUuX2xlYXZlVGltZXIgKTtcclxuICAgICAgICAgICAgICAgIG1lLl9sZWF2ZVRpbWVyID0gc2V0VGltZW91dCggaGFuZGxlciwgMTAwICk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgX2Ryb3BIYW5kbGVyOiBmdW5jdGlvbiggZSApIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZSA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgcnVpZCA9IG1lLmdldFJ1aWQoKSxcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRFbGVtID0gbWUuZWxlbS5wYXJlbnQoKS5nZXQoIDAgKSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVHJhbnNmZXIsIGRhdGE7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOWPquWkhOeQhuahhuWGheeahOOAglxyXG4gICAgICAgICAgICAgICAgaWYgKCBwYXJlbnRFbGVtICYmICEkLmNvbnRhaW5zKCBwYXJlbnRFbGVtLCBlLmN1cnJlbnRUYXJnZXQgKSApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGUgPSBlLm9yaWdpbmFsRXZlbnQgfHwgZTtcclxuICAgICAgICAgICAgICAgIGRhdGFUcmFuc2ZlciA9IGUuZGF0YVRyYW5zZmVyO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzmmK/pobXpnaLlhoXmi5bmi73vvIzov5jkuI3og73lpITnkIbvvIzkuI3pmLvmraLkuovku7bjgIJcclxuICAgICAgICAgICAgICAgIC8vIOatpOWkhCBpZTExIOS4i+S8muaKpeWPguaVsOmUmeivr++8jFxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhID0gZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvaHRtbCcpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCggZXJyICkge1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBtZS5kbmRPdmVyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBtZS5lbGVtLnJlbW92ZUNsYXNzKCBwcmVmaXggKyAnb3ZlcicgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCBkYXRhICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgbWUuX2dldFRhbnNmZXJGaWxlcyggZGF0YVRyYW5zZmVyLCBmdW5jdGlvbiggcmVzdWx0cyApIHtcclxuICAgICAgICAgICAgICAgICAgICBtZS50cmlnZ2VyKCAnZHJvcCcsICQubWFwKCByZXN1bHRzLCBmdW5jdGlvbiggZmlsZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGaWxlKCBydWlkLCBmaWxlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLy8g5aaC5p6c5Lyg5YWlIGNhbGxiYWNrIOWImeWOu+afpeeci+aWh+S7tuWkue+8jOWQpuWImeWPqueuoeW9k+WJjeaWh+S7tuWkueOAglxyXG4gICAgICAgICAgICBfZ2V0VGFuc2ZlckZpbGVzOiBmdW5jdGlvbiggZGF0YVRyYW5zZmVyLCBjYWxsYmFjayApIHtcclxuICAgICAgICAgICAgICAgIHZhciByZXN1bHRzICA9IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2VzID0gW10sXHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMsIGZpbGVzLCBmaWxlLCBpdGVtLCBpLCBsZW4sIGNhbkFjY2Vzc0ZvbGRlcjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaXRlbXMgPSBkYXRhVHJhbnNmZXIuaXRlbXM7XHJcbiAgICAgICAgICAgICAgICBmaWxlcyA9IGRhdGFUcmFuc2Zlci5maWxlcztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgY2FuQWNjZXNzRm9sZGVyID0gISEoaXRlbXMgJiYgaXRlbXNbIDAgXS53ZWJraXRHZXRBc0VudHJ5KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZm9yICggaSA9IDAsIGxlbiA9IGZpbGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbGUgPSBmaWxlc1sgaSBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBpdGVtcyAmJiBpdGVtc1sgaSBdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjYW5BY2Nlc3NGb2xkZXIgJiYgaXRlbS53ZWJraXRHZXRBc0VudHJ5KCkuaXNEaXJlY3RvcnkgKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCggdGhpcy5fdHJhdmVyc2VEaXJlY3RvcnlUcmVlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0ud2Via2l0R2V0QXNFbnRyeSgpLCByZXN1bHRzICkgKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goIGZpbGUgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIEJhc2Uud2hlbi5hcHBseSggQmFzZSwgcHJvbWlzZXMgKS5kb25lKGZ1bmN0aW9uKCkge1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhcmVzdWx0cy5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayggcmVzdWx0cyApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgX3RyYXZlcnNlRGlyZWN0b3J5VHJlZTogZnVuY3Rpb24oIGVudHJ5LCByZXN1bHRzICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gQmFzZS5EZWZlcnJlZCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lID0gdGhpcztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCBlbnRyeS5pc0ZpbGUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnkuZmlsZShmdW5jdGlvbiggZmlsZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKCBmaWxlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIGVudHJ5LmlzRGlyZWN0b3J5ICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5LmNyZWF0ZVJlYWRlcigpLnJlYWRFbnRyaWVzKGZ1bmN0aW9uKCBlbnRyaWVzICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGVuID0gZW50cmllcy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlcyA9IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyID0gW10sICAgIC8vIOS4uuS6huS/neivgemhuuW6j+OAglxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCggbWUuX3RyYXZlcnNlRGlyZWN0b3J5VHJlZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50cmllc1sgaSBdLCBhcnIgKSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgQmFzZS53aGVuLmFwcGx5KCBCYXNlLCBwcm9taXNlcyApLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2guYXBwbHkoIHJlc3VsdHMsIGFyciApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBkZWZlcnJlZC5yZWplY3QgKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBlbGVtID0gdGhpcy5lbGVtO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDov5jmsqEgaW5pdCDlsLHosIPnlKggZGVzdHJveVxyXG4gICAgICAgICAgICAgICAgaWYgKCFlbGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBlbGVtLm9mZiggJ2RyYWdlbnRlcicsIHRoaXMuZHJhZ0VudGVySGFuZGxlciApO1xyXG4gICAgICAgICAgICAgICAgZWxlbS5vZmYoICdkcmFnb3ZlcicsIHRoaXMuZHJhZ092ZXJIYW5kbGVyICk7XHJcbiAgICAgICAgICAgICAgICBlbGVtLm9mZiggJ2RyYWdsZWF2ZScsIHRoaXMuZHJhZ0xlYXZlSGFuZGxlciApO1xyXG4gICAgICAgICAgICAgICAgZWxlbS5vZmYoICdkcm9wJywgdGhpcy5kcm9wSGFuZGxlciApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMub3B0aW9ucy5kaXNhYmxlR2xvYmFsRG5kICkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoIGRvY3VtZW50ICkub2ZmKCAnZHJhZ292ZXInLCB0aGlzLmRyYWdPdmVySGFuZGxlciApO1xyXG4gICAgICAgICAgICAgICAgICAgICQoIGRvY3VtZW50ICkub2ZmKCAnZHJvcCcsIHRoaXMuZHJvcEhhbmRsZXIgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyBGaWxlUGFzdGVcclxuICAgICAqL1xyXG4gICAgZGVmaW5lKCdydW50aW1lL2h0bWw1L2ZpbGVwYXN0ZScsW1xyXG4gICAgICAgICdiYXNlJyxcclxuICAgICAgICAncnVudGltZS9odG1sNS9ydW50aW1lJyxcclxuICAgICAgICAnbGliL2ZpbGUnXHJcbiAgICBdLCBmdW5jdGlvbiggQmFzZSwgSHRtbDVSdW50aW1lLCBGaWxlICkge1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIEh0bWw1UnVudGltZS5yZWdpc3RlciggJ0ZpbGVQYXN0ZScsIHtcclxuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucyxcclxuICAgICAgICAgICAgICAgICAgICBlbGVtID0gdGhpcy5lbGVtID0gb3B0cy5jb250YWluZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjZXB0ID0gJy4qJyxcclxuICAgICAgICAgICAgICAgICAgICBhcnIsIGksIGxlbiwgaXRlbTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gYWNjZXRw55qEbWltZVR5cGVz5Lit55Sf5oiQ5Yy56YWN5q2j5YiZ44CCXHJcbiAgICAgICAgICAgICAgICBpZiAoIG9wdHMuYWNjZXB0ICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFyciA9IFtdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICggaSA9IDAsIGxlbiA9IG9wdHMuYWNjZXB0Lmxlbmd0aDsgaSA8IGxlbjsgaSsrICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gb3B0cy5hY2NlcHRbIGkgXS5taW1lVHlwZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gJiYgYXJyLnB1c2goIGl0ZW0gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGFyci5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY2VwdCA9IGFyci5qb2luKCcsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY2VwdCA9IGFjY2VwdC5yZXBsYWNlKCAvLC9nLCAnfCcgKS5yZXBsYWNlKCAvXFwqL2csICcuKicgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjY2VwdCA9IGFjY2VwdCA9IG5ldyBSZWdFeHAoIGFjY2VwdCwgJ2knICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRlciA9IEJhc2UuYmluZEZuKCB0aGlzLl9wYXN0ZUhhbmRlciwgdGhpcyApO1xyXG4gICAgICAgICAgICAgICAgZWxlbS5vbiggJ3Bhc3RlJywgdGhpcy5oYW5kZXIgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBfcGFzdGVIYW5kZXI6IGZ1bmN0aW9uKCBlICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFsbG93ZWQgPSBbXSxcclxuICAgICAgICAgICAgICAgICAgICBydWlkID0gdGhpcy5nZXRSdWlkKCksXHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMsIGl0ZW0sIGJsb2IsIGksIGxlbjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZSA9IGUub3JpZ2luYWxFdmVudCB8fCBlO1xyXG4gICAgICAgICAgICAgICAgaXRlbXMgPSBlLmNsaXBib2FyZERhdGEuaXRlbXM7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZvciAoIGkgPSAwLCBsZW4gPSBpdGVtcy5sZW5ndGg7IGkgPCBsZW47IGkrKyApIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtID0gaXRlbXNbIGkgXTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggaXRlbS5raW5kICE9PSAnZmlsZScgfHwgIShibG9iID0gaXRlbS5nZXRBc0ZpbGUoKSkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGFsbG93ZWQucHVzaCggbmV3IEZpbGUoIHJ1aWQsIGJsb2IgKSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIGFsbG93ZWQubGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOS4jemYu+atoumdnuaWh+S7tueymOi0tO+8iOaWh+Wtl+eymOi0tO+8ieeahOS6i+S7tuWGkuazoVxyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlciggJ3Bhc3RlJywgYWxsb3dlZCApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtLm9mZiggJ3Bhc3RlJywgdGhpcy5oYW5kZXIgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyBGaWxlUGlja2VyXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgncnVudGltZS9odG1sNS9maWxlcGlja2VyJyxbXHJcbiAgICAgICAgJ2Jhc2UnLFxyXG4gICAgICAgICdydW50aW1lL2h0bWw1L3J1bnRpbWUnXHJcbiAgICBdLCBmdW5jdGlvbiggQmFzZSwgSHRtbDVSdW50aW1lICkge1xyXG4gICAgXHJcbiAgICAgICAgdmFyICQgPSBCYXNlLiQ7XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gSHRtbDVSdW50aW1lLnJlZ2lzdGVyKCAnRmlsZVBpY2tlcicsIHtcclxuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5nZXRSdW50aW1lKCkuZ2V0Q29udGFpbmVyKCksXHJcbiAgICAgICAgICAgICAgICAgICAgbWUgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgIG93bmVyID0gbWUub3duZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cyA9IG1lLm9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWwgPSB0aGlzLmxhYmVsID0gJCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKSApLFxyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0ID0gIHRoaXMuaW5wdXQgPSAkKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpICksXHJcbiAgICAgICAgICAgICAgICAgICAgYXJyLCBpLCBsZW4sIG1vdXNlSGFuZGxlcjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaW5wdXQuYXR0ciggJ3R5cGUnLCAnZmlsZScgKTtcclxuICAgICAgICAgICAgICAgIGlucHV0LmF0dHIoICdjYXB0dXJlJywgJ2NhbWVyYScpO1xyXG4gICAgICAgICAgICAgICAgaW5wdXQuYXR0ciggJ25hbWUnLCBvcHRzLm5hbWUgKTtcclxuICAgICAgICAgICAgICAgIGlucHV0LmFkZENsYXNzKCd3ZWJ1cGxvYWRlci1lbGVtZW50LWludmlzaWJsZScpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBsYWJlbC5vbiggJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0LnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICBvd25lci50cmlnZ2VyKCdkaWFsb2dvcGVuJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgbGFiZWwuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnMTAwJScsXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ2Jsb2NrJyxcclxuICAgICAgICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcclxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAnI2ZmZmZmZidcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIG9wdHMubXVsdGlwbGUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQuYXR0ciggJ211bHRpcGxlJywgJ211bHRpcGxlJyApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBAdG9kbyBGaXJlZm945LiN5pSv5oyB5Y2V54us5oyH5a6a5ZCO57yAXHJcbiAgICAgICAgICAgICAgICBpZiAoIG9wdHMuYWNjZXB0ICYmIG9wdHMuYWNjZXB0Lmxlbmd0aCA+IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyID0gW107XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKCBpID0gMCwgbGVuID0gb3B0cy5hY2NlcHQubGVuZ3RoOyBpIDwgbGVuOyBpKysgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyci5wdXNoKCBvcHRzLmFjY2VwdFsgaSBdLm1pbWVUeXBlcyApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0LmF0dHIoICdhY2NlcHQnLCBhcnIuam9pbignLCcpICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmQoIGlucHV0ICk7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kKCBsYWJlbCApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBtb3VzZUhhbmRsZXIgPSBmdW5jdGlvbiggZSApIHtcclxuICAgICAgICAgICAgICAgICAgICBvd25lci50cmlnZ2VyKCBlLnR5cGUgKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlucHV0Lm9uKCAnY2hhbmdlJywgZnVuY3Rpb24oIGUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZuID0gYXJndW1lbnRzLmNhbGxlZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmU7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBtZS5maWxlcyA9IGUudGFyZ2V0LmZpbGVzO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgaW5wdXRcclxuICAgICAgICAgICAgICAgICAgICBjbG9uZSA9IHRoaXMuY2xvbmVOb2RlKCB0cnVlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xvbmUudmFsdWUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoIGNsb25lLCB0aGlzICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpbnB1dC5vZmYoKTtcclxuICAgICAgICAgICAgICAgICAgICBpbnB1dCA9ICQoIGNsb25lICkub24oICdjaGFuZ2UnLCBmbiApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub24oICdtb3VzZWVudGVyIG1vdXNlbGVhdmUnLCBtb3VzZUhhbmRsZXIgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIG93bmVyLnRyaWdnZXIoJ2NoYW5nZScpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGxhYmVsLm9uKCAnbW91c2VlbnRlciBtb3VzZWxlYXZlJywgbW91c2VIYW5kbGVyICk7XHJcbiAgICBcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgICAgIGdldEZpbGVzOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbGVzO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dC5vZmYoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubGFiZWwub2ZmKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFRlcm1zOlxyXG4gICAgICpcclxuICAgICAqIFVpbnQ4QXJyYXksIEZpbGVSZWFkZXIsIEJsb2JCdWlsZGVyLCBhdG9iLCBBcnJheUJ1ZmZlclxyXG4gICAgICogQGZpbGVPdmVydmlldyBJbWFnZeaOp+S7tlxyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ3J1bnRpbWUvaHRtbDUvdXRpbCcsW1xyXG4gICAgICAgICdiYXNlJ1xyXG4gICAgXSwgZnVuY3Rpb24oIEJhc2UgKSB7XHJcbiAgICBcclxuICAgICAgICB2YXIgdXJsQVBJID0gd2luZG93LmNyZWF0ZU9iamVjdFVSTCAmJiB3aW5kb3cgfHxcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5VUkwgJiYgVVJMLnJldm9rZU9iamVjdFVSTCAmJiBVUkwgfHxcclxuICAgICAgICAgICAgICAgIHdpbmRvdy53ZWJraXRVUkwsXHJcbiAgICAgICAgICAgIGNyZWF0ZU9iamVjdFVSTCA9IEJhc2Uubm9vcCxcclxuICAgICAgICAgICAgcmV2b2tlT2JqZWN0VVJMID0gY3JlYXRlT2JqZWN0VVJMO1xyXG4gICAgXHJcbiAgICAgICAgaWYgKCB1cmxBUEkgKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8g5pu05a6J5YWo55qE5pa55byP6LCD55So77yM5q+U5aaCYW5kcm9pZOmHjOmdouWwseiDveaKimNvbnRleHTmlLnmiJDlhbbku5bnmoTlr7nosaHjgIJcclxuICAgICAgICAgICAgY3JlYXRlT2JqZWN0VVJMID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXJsQVBJLmNyZWF0ZU9iamVjdFVSTC5hcHBseSggdXJsQVBJLCBhcmd1bWVudHMgKTtcclxuICAgICAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgICAgICByZXZva2VPYmplY3RVUkwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1cmxBUEkucmV2b2tlT2JqZWN0VVJMLmFwcGx5KCB1cmxBUEksIGFyZ3VtZW50cyApO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGNyZWF0ZU9iamVjdFVSTDogY3JlYXRlT2JqZWN0VVJMLFxyXG4gICAgICAgICAgICByZXZva2VPYmplY3RVUkw6IHJldm9rZU9iamVjdFVSTCxcclxuICAgIFxyXG4gICAgICAgICAgICBkYXRhVVJMMkJsb2I6IGZ1bmN0aW9uKCBkYXRhVVJJICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJ5dGVTdHIsIGludEFycmF5LCBhYiwgaSwgbWltZXR5cGUsIHBhcnRzO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBwYXJ0cyA9IGRhdGFVUkkuc3BsaXQoJywnKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCB+cGFydHNbIDAgXS5pbmRleE9mKCdiYXNlNjQnKSApIHtcclxuICAgICAgICAgICAgICAgICAgICBieXRlU3RyID0gYXRvYiggcGFydHNbIDEgXSApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBieXRlU3RyID0gZGVjb2RlVVJJQ29tcG9uZW50KCBwYXJ0c1sgMSBdICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGFiID0gbmV3IEFycmF5QnVmZmVyKCBieXRlU3RyLmxlbmd0aCApO1xyXG4gICAgICAgICAgICAgICAgaW50QXJyYXkgPSBuZXcgVWludDhBcnJheSggYWIgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZm9yICggaSA9IDA7IGkgPCBieXRlU3RyLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGludEFycmF5WyBpIF0gPSBieXRlU3RyLmNoYXJDb2RlQXQoIGkgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgbWltZXR5cGUgPSBwYXJ0c1sgMCBdLnNwbGl0KCc6JylbIDEgXS5zcGxpdCgnOycpWyAwIF07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFycmF5QnVmZmVyVG9CbG9iKCBhYiwgbWltZXR5cGUgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBkYXRhVVJMMkFycmF5QnVmZmVyOiBmdW5jdGlvbiggZGF0YVVSSSApIHtcclxuICAgICAgICAgICAgICAgIHZhciBieXRlU3RyLCBpbnRBcnJheSwgaSwgcGFydHM7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHBhcnRzID0gZGF0YVVSSS5zcGxpdCgnLCcpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIH5wYXJ0c1sgMCBdLmluZGV4T2YoJ2Jhc2U2NCcpICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVTdHIgPSBhdG9iKCBwYXJ0c1sgMSBdICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVTdHIgPSBkZWNvZGVVUklDb21wb25lbnQoIHBhcnRzWyAxIF0gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaW50QXJyYXkgPSBuZXcgVWludDhBcnJheSggYnl0ZVN0ci5sZW5ndGggKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZm9yICggaSA9IDA7IGkgPCBieXRlU3RyLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGludEFycmF5WyBpIF0gPSBieXRlU3RyLmNoYXJDb2RlQXQoIGkgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGludEFycmF5LmJ1ZmZlcjtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBhcnJheUJ1ZmZlclRvQmxvYjogZnVuY3Rpb24oIGJ1ZmZlciwgdHlwZSApIHtcclxuICAgICAgICAgICAgICAgIHZhciBidWlsZGVyID0gd2luZG93LkJsb2JCdWlsZGVyIHx8IHdpbmRvdy5XZWJLaXRCbG9iQnVpbGRlcixcclxuICAgICAgICAgICAgICAgICAgICBiYjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gYW5kcm9pZOS4jeaUr+aMgeebtOaOpW5ldyBCbG9iLCDlj6rog73lgJ/liqlibG9iYnVpbGRlci5cclxuICAgICAgICAgICAgICAgIGlmICggYnVpbGRlciApIHtcclxuICAgICAgICAgICAgICAgICAgICBiYiA9IG5ldyBidWlsZGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYmIuYXBwZW5kKCBidWZmZXIgKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmIuZ2V0QmxvYiggdHlwZSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEJsb2IoWyBidWZmZXIgXSwgdHlwZSA/IHsgdHlwZTogdHlwZSB9IDoge30gKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvLyDmir3lh7rmnaXkuLvopoHmmK/kuLrkuobop6PlhrNhbmRyb2lk5LiL6Z2iY2FudmFzLnRvRGF0YVVybOS4jeaUr+aMgWpwZWcuXHJcbiAgICAgICAgICAgIC8vIOS9oOW+l+WIsOeahOe7k+aenOaYr3BuZy5cclxuICAgICAgICAgICAgY2FudmFzVG9EYXRhVXJsOiBmdW5jdGlvbiggY2FudmFzLCB0eXBlLCBxdWFsaXR5ICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbnZhcy50b0RhdGFVUkwoIHR5cGUsIHF1YWxpdHkgLyAxMDAgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBpbWFnZW1lYXTkvJrlpI3lhpnov5nkuKrmlrnms5XvvIzlpoLmnpznlKjmiLfpgInmi6nliqDovb3pgqPkuKrmlofku7bkuobnmoTor53jgIJcclxuICAgICAgICAgICAgcGFyc2VNZXRhOiBmdW5jdGlvbiggYmxvYiwgY2FsbGJhY2sgKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayggZmFsc2UsIHt9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBpbWFnZW1lYXTkvJrlpI3lhpnov5nkuKrmlrnms5XvvIzlpoLmnpznlKjmiLfpgInmi6nliqDovb3pgqPkuKrmlofku7bkuobnmoTor53jgIJcclxuICAgICAgICAgICAgdXBkYXRlSW1hZ2VIZWFkOiBmdW5jdGlvbiggZGF0YSApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUZXJtczpcclxuICAgICAqXHJcbiAgICAgKiBVaW50OEFycmF5LCBGaWxlUmVhZGVyLCBCbG9iQnVpbGRlciwgYXRvYiwgQXJyYXlCdWZmZXJcclxuICAgICAqIEBmaWxlT3ZlcnZpZXcgSW1hZ2Xmjqfku7ZcclxuICAgICAqL1xyXG4gICAgZGVmaW5lKCdydW50aW1lL2h0bWw1L2ltYWdlbWV0YScsW1xyXG4gICAgICAgICdydW50aW1lL2h0bWw1L3V0aWwnXHJcbiAgICBdLCBmdW5jdGlvbiggVXRpbCApIHtcclxuICAgIFxyXG4gICAgICAgIHZhciBhcGk7XHJcbiAgICBcclxuICAgICAgICBhcGkgPSB7XHJcbiAgICAgICAgICAgIHBhcnNlcnM6IHtcclxuICAgICAgICAgICAgICAgIDB4ZmZlMTogW11cclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBtYXhNZXRhRGF0YVNpemU6IDI2MjE0NCxcclxuICAgIFxyXG4gICAgICAgICAgICBwYXJzZTogZnVuY3Rpb24oIGJsb2IsIGNiICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICBmciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNiKCBmYWxzZSwgbWUuX3BhcnNlKCB0aGlzLnJlc3VsdCApICk7XHJcbiAgICAgICAgICAgICAgICAgICAgZnIgPSBmci5vbmxvYWQgPSBmci5vbmVycm9yID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZyLm9uZXJyb3IgPSBmdW5jdGlvbiggZSApIHtcclxuICAgICAgICAgICAgICAgICAgICBjYiggZS5tZXNzYWdlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgZnIgPSBmci5vbmxvYWQgPSBmci5vbmVycm9yID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGJsb2IgPSBibG9iLnNsaWNlKCAwLCBtZS5tYXhNZXRhRGF0YVNpemUgKTtcclxuICAgICAgICAgICAgICAgIGZyLnJlYWRBc0FycmF5QnVmZmVyKCBibG9iLmdldFNvdXJjZSgpICk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgX3BhcnNlOiBmdW5jdGlvbiggYnVmZmVyLCBub1BhcnNlICkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCBidWZmZXIuYnl0ZUxlbmd0aCA8IDYgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YXZpZXcgPSBuZXcgRGF0YVZpZXcoIGJ1ZmZlciApLFxyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IDIsXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4T2Zmc2V0ID0gZGF0YXZpZXcuYnl0ZUxlbmd0aCAtIDQsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZExlbmd0aCA9IG9mZnNldCxcclxuICAgICAgICAgICAgICAgICAgICByZXQgPSB7fSxcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXJCeXRlcywgbWFya2VyTGVuZ3RoLCBwYXJzZXJzLCBpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIGRhdGF2aWV3LmdldFVpbnQxNiggMCApID09PSAweGZmZDggKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoIG9mZnNldCA8IG1heE9mZnNldCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VyQnl0ZXMgPSBkYXRhdmlldy5nZXRVaW50MTYoIG9mZnNldCApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggbWFya2VyQnl0ZXMgPj0gMHhmZmUwICYmIG1hcmtlckJ5dGVzIDw9IDB4ZmZlZiB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlckJ5dGVzID09PSAweGZmZmUgKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlckxlbmd0aCA9IGRhdGF2aWV3LmdldFVpbnQxNiggb2Zmc2V0ICsgMiApICsgMjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBvZmZzZXQgKyBtYXJrZXJMZW5ndGggPiBkYXRhdmlldy5ieXRlTGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJzID0gYXBpLnBhcnNlcnNbIG1hcmtlckJ5dGVzIF07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggIW5vUGFyc2UgJiYgcGFyc2VycyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCBpID0gMDsgaSA8IHBhcnNlcnMubGVuZ3RoOyBpICs9IDEgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcnNbIGkgXS5jYWxsKCBhcGksIGRhdGF2aWV3LCBvZmZzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VyTGVuZ3RoLCByZXQgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSBtYXJrZXJMZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkTGVuZ3RoID0gb2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGhlYWRMZW5ndGggPiA2ICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGJ1ZmZlci5zbGljZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldC5pbWFnZUhlYWQgPSBidWZmZXIuc2xpY2UoIDIsIGhlYWRMZW5ndGggKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdvcmthcm91bmQgZm9yIElFMTAsIHdoaWNoIGRvZXMgbm90IHlldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3VwcG9ydCBBcnJheUJ1ZmZlci5zbGljZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldC5pbWFnZUhlYWQgPSBuZXcgVWludDhBcnJheSggYnVmZmVyIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN1YmFycmF5KCAyLCBoZWFkTGVuZ3RoICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgdXBkYXRlSW1hZ2VIZWFkOiBmdW5jdGlvbiggYnVmZmVyLCBoZWFkICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB0aGlzLl9wYXJzZSggYnVmZmVyLCB0cnVlICksXHJcbiAgICAgICAgICAgICAgICAgICAgYnVmMSwgYnVmMiwgYm9keW9mZnNldDtcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBib2R5b2Zmc2V0ID0gMjtcclxuICAgICAgICAgICAgICAgIGlmICggZGF0YS5pbWFnZUhlYWQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9keW9mZnNldCA9IDIgKyBkYXRhLmltYWdlSGVhZC5ieXRlTGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIGJ1ZmZlci5zbGljZSApIHtcclxuICAgICAgICAgICAgICAgICAgICBidWYyID0gYnVmZmVyLnNsaWNlKCBib2R5b2Zmc2V0ICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZjIgPSBuZXcgVWludDhBcnJheSggYnVmZmVyICkuc3ViYXJyYXkoIGJvZHlvZmZzZXQgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgYnVmMSA9IG5ldyBVaW50OEFycmF5KCBoZWFkLmJ5dGVMZW5ndGggKyAyICsgYnVmMi5ieXRlTGVuZ3RoICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGJ1ZjFbIDAgXSA9IDB4RkY7XHJcbiAgICAgICAgICAgICAgICBidWYxWyAxIF0gPSAweEQ4O1xyXG4gICAgICAgICAgICAgICAgYnVmMS5zZXQoIG5ldyBVaW50OEFycmF5KCBoZWFkICksIDIgKTtcclxuICAgICAgICAgICAgICAgIGJ1ZjEuc2V0KCBuZXcgVWludDhBcnJheSggYnVmMiApLCBoZWFkLmJ5dGVMZW5ndGggKyAyICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBidWYxLmJ1ZmZlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBVdGlsLnBhcnNlTWV0YSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXBpLnBhcnNlLmFwcGx5KCBhcGksIGFyZ3VtZW50cyApO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBVdGlsLnVwZGF0ZUltYWdlSGVhZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXBpLnVwZGF0ZUltYWdlSGVhZC5hcHBseSggYXBpLCBhcmd1bWVudHMgKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIGFwaTtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiDku6PnoIHmnaXoh6rkuo7vvJpodHRwczovL2dpdGh1Yi5jb20vYmx1ZWltcC9KYXZhU2NyaXB0LUxvYWQtSW1hZ2VcclxuICAgICAqIOaaguaXtumhueebruS4reWPqueUqOS6hm9yaWVudGF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIOWOu+mZpOS6hiBFeGlmIFN1YiBJRkQgUG9pbnRlciwgR1BTIEluZm8gSUZEIFBvaW50ZXIsIEV4aWYgVGh1bWJuYWlsLlxyXG4gICAgICogQGZpbGVPdmVydmlldyBFWElG6Kej5p6QXHJcbiAgICAgKi9cclxuICAgIFxyXG4gICAgLy8gU2FtcGxlXHJcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgIC8vIE1ha2UgOiBBcHBsZVxyXG4gICAgLy8gTW9kZWwgOiBpUGhvbmUgNFNcclxuICAgIC8vIE9yaWVudGF0aW9uIDogMVxyXG4gICAgLy8gWFJlc29sdXRpb24gOiA3MiBbNzIvMV1cclxuICAgIC8vIFlSZXNvbHV0aW9uIDogNzIgWzcyLzFdXHJcbiAgICAvLyBSZXNvbHV0aW9uVW5pdCA6IDJcclxuICAgIC8vIFNvZnR3YXJlIDogUXVpY2tUaW1lIDcuNy4xXHJcbiAgICAvLyBEYXRlVGltZSA6IDIwMTM6MDk6MDEgMjI6NTM6NTVcclxuICAgIC8vIEV4aWZJRkRQb2ludGVyIDogMTkwXHJcbiAgICAvLyBFeHBvc3VyZVRpbWUgOiAwLjA1ODgyMzUyOTQxMTc2NDcwNSBbMS8xN11cclxuICAgIC8vIEZOdW1iZXIgOiAyLjQgWzEyLzVdXHJcbiAgICAvLyBFeHBvc3VyZVByb2dyYW0gOiBOb3JtYWwgcHJvZ3JhbVxyXG4gICAgLy8gSVNPU3BlZWRSYXRpbmdzIDogODAwXHJcbiAgICAvLyBFeGlmVmVyc2lvbiA6IDAyMjBcclxuICAgIC8vIERhdGVUaW1lT3JpZ2luYWwgOiAyMDEzOjA5OjAxIDIyOjUyOjUxXHJcbiAgICAvLyBEYXRlVGltZURpZ2l0aXplZCA6IDIwMTM6MDk6MDEgMjI6NTI6NTFcclxuICAgIC8vIENvbXBvbmVudHNDb25maWd1cmF0aW9uIDogWUNiQ3JcclxuICAgIC8vIFNodXR0ZXJTcGVlZFZhbHVlIDogNC4wNTg4OTM1MTU3NjQ0MjZcclxuICAgIC8vIEFwZXJ0dXJlVmFsdWUgOiAyLjUyNjA2ODgyMTY4OTI1OTcgWzQ4NDUvMTkxOF1cclxuICAgIC8vIEJyaWdodG5lc3NWYWx1ZSA6IC0wLjMxMjY2ODY2MDE5OTgzOTVcclxuICAgIC8vIE1ldGVyaW5nTW9kZSA6IFBhdHRlcm5cclxuICAgIC8vIEZsYXNoIDogRmxhc2ggZGlkIG5vdCBmaXJlLCBjb21wdWxzb3J5IGZsYXNoIG1vZGVcclxuICAgIC8vIEZvY2FsTGVuZ3RoIDogNC4yOCBbMTA3LzI1XVxyXG4gICAgLy8gU3ViamVjdEFyZWEgOiBbNCB2YWx1ZXNdXHJcbiAgICAvLyBGbGFzaHBpeFZlcnNpb24gOiAwMTAwXHJcbiAgICAvLyBDb2xvclNwYWNlIDogMVxyXG4gICAgLy8gUGl4ZWxYRGltZW5zaW9uIDogMjQ0OFxyXG4gICAgLy8gUGl4ZWxZRGltZW5zaW9uIDogMzI2NFxyXG4gICAgLy8gU2Vuc2luZ01ldGhvZCA6IE9uZS1jaGlwIGNvbG9yIGFyZWEgc2Vuc29yXHJcbiAgICAvLyBFeHBvc3VyZU1vZGUgOiAwXHJcbiAgICAvLyBXaGl0ZUJhbGFuY2UgOiBBdXRvIHdoaXRlIGJhbGFuY2VcclxuICAgIC8vIEZvY2FsTGVuZ3RoSW4zNW1tRmlsbSA6IDM1XHJcbiAgICAvLyBTY2VuZUNhcHR1cmVUeXBlIDogU3RhbmRhcmRcclxuICAgIGRlZmluZSgncnVudGltZS9odG1sNS9pbWFnZW1ldGEvZXhpZicsW1xyXG4gICAgICAgICdiYXNlJyxcclxuICAgICAgICAncnVudGltZS9odG1sNS9pbWFnZW1ldGEnXHJcbiAgICBdLCBmdW5jdGlvbiggQmFzZSwgSW1hZ2VNZXRhICkge1xyXG4gICAgXHJcbiAgICAgICAgdmFyIEVYSUYgPSB7fTtcclxuICAgIFxyXG4gICAgICAgIEVYSUYuRXhpZk1hcCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgRVhJRi5FeGlmTWFwLnByb3RvdHlwZS5tYXAgPSB7XHJcbiAgICAgICAgICAgICdPcmllbnRhdGlvbic6IDB4MDExMlxyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBFWElGLkV4aWZNYXAucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKCBpZCApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXNbIGlkIF0gfHwgdGhpc1sgdGhpcy5tYXBbIGlkIF0gXTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgRVhJRi5leGlmVGFnVHlwZXMgPSB7XHJcbiAgICAgICAgICAgIC8vIGJ5dGUsIDgtYml0IHVuc2lnbmVkIGludDpcclxuICAgICAgICAgICAgMToge1xyXG4gICAgICAgICAgICAgICAgZ2V0VmFsdWU6IGZ1bmN0aW9uKCBkYXRhVmlldywgZGF0YU9mZnNldCApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YVZpZXcuZ2V0VWludDgoIGRhdGFPZmZzZXQgKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzaXplOiAxXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLy8gYXNjaWksIDgtYml0IGJ5dGU6XHJcbiAgICAgICAgICAgIDI6IHtcclxuICAgICAgICAgICAgICAgIGdldFZhbHVlOiBmdW5jdGlvbiggZGF0YVZpZXcsIGRhdGFPZmZzZXQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoIGRhdGFWaWV3LmdldFVpbnQ4KCBkYXRhT2Zmc2V0ICkgKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzaXplOiAxLFxyXG4gICAgICAgICAgICAgICAgYXNjaWk6IHRydWVcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBzaG9ydCwgMTYgYml0IGludDpcclxuICAgICAgICAgICAgMzoge1xyXG4gICAgICAgICAgICAgICAgZ2V0VmFsdWU6IGZ1bmN0aW9uKCBkYXRhVmlldywgZGF0YU9mZnNldCwgbGl0dGxlRW5kaWFuICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhVmlldy5nZXRVaW50MTYoIGRhdGFPZmZzZXQsIGxpdHRsZUVuZGlhbiApO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHNpemU6IDJcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBsb25nLCAzMiBiaXQgaW50OlxyXG4gICAgICAgICAgICA0OiB7XHJcbiAgICAgICAgICAgICAgICBnZXRWYWx1ZTogZnVuY3Rpb24oIGRhdGFWaWV3LCBkYXRhT2Zmc2V0LCBsaXR0bGVFbmRpYW4gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGFWaWV3LmdldFVpbnQzMiggZGF0YU9mZnNldCwgbGl0dGxlRW5kaWFuICk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogNFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIHJhdGlvbmFsID0gdHdvIGxvbmcgdmFsdWVzLFxyXG4gICAgICAgICAgICAvLyBmaXJzdCBpcyBudW1lcmF0b3IsIHNlY29uZCBpcyBkZW5vbWluYXRvcjpcclxuICAgICAgICAgICAgNToge1xyXG4gICAgICAgICAgICAgICAgZ2V0VmFsdWU6IGZ1bmN0aW9uKCBkYXRhVmlldywgZGF0YU9mZnNldCwgbGl0dGxlRW5kaWFuICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhVmlldy5nZXRVaW50MzIoIGRhdGFPZmZzZXQsIGxpdHRsZUVuZGlhbiApIC9cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuZ2V0VWludDMyKCBkYXRhT2Zmc2V0ICsgNCwgbGl0dGxlRW5kaWFuICk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogOFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIHNsb25nLCAzMiBiaXQgc2lnbmVkIGludDpcclxuICAgICAgICAgICAgOToge1xyXG4gICAgICAgICAgICAgICAgZ2V0VmFsdWU6IGZ1bmN0aW9uKCBkYXRhVmlldywgZGF0YU9mZnNldCwgbGl0dGxlRW5kaWFuICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhVmlldy5nZXRJbnQzMiggZGF0YU9mZnNldCwgbGl0dGxlRW5kaWFuICk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogNFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIHNyYXRpb25hbCwgdHdvIHNsb25ncywgZmlyc3QgaXMgbnVtZXJhdG9yLCBzZWNvbmQgaXMgZGVub21pbmF0b3I6XHJcbiAgICAgICAgICAgIDEwOiB7XHJcbiAgICAgICAgICAgICAgICBnZXRWYWx1ZTogZnVuY3Rpb24oIGRhdGFWaWV3LCBkYXRhT2Zmc2V0LCBsaXR0bGVFbmRpYW4gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGFWaWV3LmdldEludDMyKCBkYXRhT2Zmc2V0LCBsaXR0bGVFbmRpYW4gKSAvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LmdldEludDMyKCBkYXRhT2Zmc2V0ICsgNCwgbGl0dGxlRW5kaWFuICk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogOFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIC8vIHVuZGVmaW5lZCwgOC1iaXQgYnl0ZSwgdmFsdWUgZGVwZW5kaW5nIG9uIGZpZWxkOlxyXG4gICAgICAgIEVYSUYuZXhpZlRhZ1R5cGVzWyA3IF0gPSBFWElGLmV4aWZUYWdUeXBlc1sgMSBdO1xyXG4gICAgXHJcbiAgICAgICAgRVhJRi5nZXRFeGlmVmFsdWUgPSBmdW5jdGlvbiggZGF0YVZpZXcsIHRpZmZPZmZzZXQsIG9mZnNldCwgdHlwZSwgbGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgbGl0dGxlRW5kaWFuICkge1xyXG4gICAgXHJcbiAgICAgICAgICAgIHZhciB0YWdUeXBlID0gRVhJRi5leGlmVGFnVHlwZXNbIHR5cGUgXSxcclxuICAgICAgICAgICAgICAgIHRhZ1NpemUsIGRhdGFPZmZzZXQsIHZhbHVlcywgaSwgc3RyLCBjO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICggIXRhZ1R5cGUgKSB7XHJcbiAgICAgICAgICAgICAgICBCYXNlLmxvZygnSW52YWxpZCBFeGlmIGRhdGE6IEludmFsaWQgdGFnIHR5cGUuJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICB0YWdTaXplID0gdGFnVHlwZS5zaXplICogbGVuZ3RoO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIERldGVybWluZSBpZiB0aGUgdmFsdWUgaXMgY29udGFpbmVkIGluIHRoZSBkYXRhT2Zmc2V0IGJ5dGVzLFxyXG4gICAgICAgICAgICAvLyBvciBpZiB0aGUgdmFsdWUgYXQgdGhlIGRhdGFPZmZzZXQgaXMgYSBwb2ludGVyIHRvIHRoZSBhY3R1YWwgZGF0YTpcclxuICAgICAgICAgICAgZGF0YU9mZnNldCA9IHRhZ1NpemUgPiA0ID8gdGlmZk9mZnNldCArIGRhdGFWaWV3LmdldFVpbnQzMiggb2Zmc2V0ICsgOCxcclxuICAgICAgICAgICAgICAgICAgICBsaXR0bGVFbmRpYW4gKSA6IChvZmZzZXQgKyA4KTtcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoIGRhdGFPZmZzZXQgKyB0YWdTaXplID4gZGF0YVZpZXcuYnl0ZUxlbmd0aCApIHtcclxuICAgICAgICAgICAgICAgIEJhc2UubG9nKCdJbnZhbGlkIEV4aWYgZGF0YTogSW52YWxpZCBkYXRhIG9mZnNldC4nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICggbGVuZ3RoID09PSAxICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhZ1R5cGUuZ2V0VmFsdWUoIGRhdGFWaWV3LCBkYXRhT2Zmc2V0LCBsaXR0bGVFbmRpYW4gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHZhbHVlcyA9IFtdO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGZvciAoIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEgKSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZXNbIGkgXSA9IHRhZ1R5cGUuZ2V0VmFsdWUoIGRhdGFWaWV3LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhT2Zmc2V0ICsgaSAqIHRhZ1R5cGUuc2l6ZSwgbGl0dGxlRW5kaWFuICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoIHRhZ1R5cGUuYXNjaWkgKSB7XHJcbiAgICAgICAgICAgICAgICBzdHIgPSAnJztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gQ29uY2F0ZW5hdGUgdGhlIGNoYXJzOlxyXG4gICAgICAgICAgICAgICAgZm9yICggaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpICs9IDEgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYyA9IHZhbHVlc1sgaSBdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIHRoZSB0ZXJtaW5hdGluZyBOVUxMIGJ5dGUocyk6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjID09PSAnXFx1MDAwMCcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzdHIgKz0gYztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0cjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWVzO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBFWElGLnBhcnNlRXhpZlRhZyA9IGZ1bmN0aW9uKCBkYXRhVmlldywgdGlmZk9mZnNldCwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sXHJcbiAgICAgICAgICAgICAgICBkYXRhICkge1xyXG4gICAgXHJcbiAgICAgICAgICAgIHZhciB0YWcgPSBkYXRhVmlldy5nZXRVaW50MTYoIG9mZnNldCwgbGl0dGxlRW5kaWFuICk7XHJcbiAgICAgICAgICAgIGRhdGEuZXhpZlsgdGFnIF0gPSBFWElGLmdldEV4aWZWYWx1ZSggZGF0YVZpZXcsIHRpZmZPZmZzZXQsIG9mZnNldCxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5nZXRVaW50MTYoIG9mZnNldCArIDIsIGxpdHRsZUVuZGlhbiApLCAgICAvLyB0YWcgdHlwZVxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LmdldFVpbnQzMiggb2Zmc2V0ICsgNCwgbGl0dGxlRW5kaWFuICksICAgIC8vIHRhZyBsZW5ndGhcclxuICAgICAgICAgICAgICAgICAgICBsaXR0bGVFbmRpYW4gKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgRVhJRi5wYXJzZUV4aWZUYWdzID0gZnVuY3Rpb24oIGRhdGFWaWV3LCB0aWZmT2Zmc2V0LCBkaXJPZmZzZXQsXHJcbiAgICAgICAgICAgICAgICBsaXR0bGVFbmRpYW4sIGRhdGEgKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgdmFyIHRhZ3NOdW1iZXIsIGRpckVuZE9mZnNldCwgaTtcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoIGRpck9mZnNldCArIDYgPiBkYXRhVmlldy5ieXRlTGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgICAgQmFzZS5sb2coJ0ludmFsaWQgRXhpZiBkYXRhOiBJbnZhbGlkIGRpcmVjdG9yeSBvZmZzZXQuJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICB0YWdzTnVtYmVyID0gZGF0YVZpZXcuZ2V0VWludDE2KCBkaXJPZmZzZXQsIGxpdHRsZUVuZGlhbiApO1xyXG4gICAgICAgICAgICBkaXJFbmRPZmZzZXQgPSBkaXJPZmZzZXQgKyAyICsgMTIgKiB0YWdzTnVtYmVyO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICggZGlyRW5kT2Zmc2V0ICsgNCA+IGRhdGFWaWV3LmJ5dGVMZW5ndGggKSB7XHJcbiAgICAgICAgICAgICAgICBCYXNlLmxvZygnSW52YWxpZCBFeGlmIGRhdGE6IEludmFsaWQgZGlyZWN0b3J5IHNpemUuJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBmb3IgKCBpID0gMDsgaSA8IHRhZ3NOdW1iZXI7IGkgKz0gMSApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFyc2VFeGlmVGFnKCBkYXRhVmlldywgdGlmZk9mZnNldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlyT2Zmc2V0ICsgMiArIDEyICogaSwgICAgLy8gdGFnIG9mZnNldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXR0bGVFbmRpYW4sIGRhdGEgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHVybiB0aGUgb2Zmc2V0IHRvIHRoZSBuZXh0IGRpcmVjdG9yeTpcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGFWaWV3LmdldFVpbnQzMiggZGlyRW5kT2Zmc2V0LCBsaXR0bGVFbmRpYW4gKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgLy8gRVhJRi5nZXRFeGlmVGh1bWJuYWlsID0gZnVuY3Rpb24oZGF0YVZpZXcsIG9mZnNldCwgbGVuZ3RoKSB7XHJcbiAgICAgICAgLy8gICAgIHZhciBoZXhEYXRhLFxyXG4gICAgICAgIC8vICAgICAgICAgaSxcclxuICAgICAgICAvLyAgICAgICAgIGI7XHJcbiAgICAgICAgLy8gICAgIGlmICghbGVuZ3RoIHx8IG9mZnNldCArIGxlbmd0aCA+IGRhdGFWaWV3LmJ5dGVMZW5ndGgpIHtcclxuICAgICAgICAvLyAgICAgICAgIEJhc2UubG9nKCdJbnZhbGlkIEV4aWYgZGF0YTogSW52YWxpZCB0aHVtYm5haWwgZGF0YS4nKTtcclxuICAgICAgICAvLyAgICAgICAgIHJldHVybjtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vICAgICBoZXhEYXRhID0gW107XHJcbiAgICAgICAgLy8gICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgIC8vICAgICAgICAgYiA9IGRhdGFWaWV3LmdldFVpbnQ4KG9mZnNldCArIGkpO1xyXG4gICAgICAgIC8vICAgICAgICAgaGV4RGF0YS5wdXNoKChiIDwgMTYgPyAnMCcgOiAnJykgKyBiLnRvU3RyaW5nKDE2KSk7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyAgICAgcmV0dXJuICdkYXRhOmltYWdlL2pwZWcsJScgKyBoZXhEYXRhLmpvaW4oJyUnKTtcclxuICAgICAgICAvLyB9O1xyXG4gICAgXHJcbiAgICAgICAgRVhJRi5wYXJzZUV4aWZEYXRhID0gZnVuY3Rpb24oIGRhdGFWaWV3LCBvZmZzZXQsIGxlbmd0aCwgZGF0YSApIHtcclxuICAgIFxyXG4gICAgICAgICAgICB2YXIgdGlmZk9mZnNldCA9IG9mZnNldCArIDEwLFxyXG4gICAgICAgICAgICAgICAgbGl0dGxlRW5kaWFuLCBkaXJPZmZzZXQ7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIHRoZSBBU0NJSSBjb2RlIGZvciBcIkV4aWZcIiAoMHg0NTc4Njk2Nik6XHJcbiAgICAgICAgICAgIGlmICggZGF0YVZpZXcuZ2V0VWludDMyKCBvZmZzZXQgKyA0ICkgIT09IDB4NDU3ODY5NjYgKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBObyBFeGlmIGRhdGEsIG1pZ2h0IGJlIFhNUCBkYXRhIGluc3RlYWRcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIHRpZmZPZmZzZXQgKyA4ID4gZGF0YVZpZXcuYnl0ZUxlbmd0aCApIHtcclxuICAgICAgICAgICAgICAgIEJhc2UubG9nKCdJbnZhbGlkIEV4aWYgZGF0YTogSW52YWxpZCBzZWdtZW50IHNpemUuJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgdGhlIHR3byBudWxsIGJ5dGVzOlxyXG4gICAgICAgICAgICBpZiAoIGRhdGFWaWV3LmdldFVpbnQxNiggb2Zmc2V0ICsgOCApICE9PSAweDAwMDAgKSB7XHJcbiAgICAgICAgICAgICAgICBCYXNlLmxvZygnSW52YWxpZCBFeGlmIGRhdGE6IE1pc3NpbmcgYnl0ZSBhbGlnbm1lbnQgb2Zmc2V0LicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQ2hlY2sgdGhlIGJ5dGUgYWxpZ25tZW50OlxyXG4gICAgICAgICAgICBzd2l0Y2ggKCBkYXRhVmlldy5nZXRVaW50MTYoIHRpZmZPZmZzZXQgKSApIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMHg0OTQ5OlxyXG4gICAgICAgICAgICAgICAgICAgIGxpdHRsZUVuZGlhbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGNhc2UgMHg0RDREOlxyXG4gICAgICAgICAgICAgICAgICAgIGxpdHRsZUVuZGlhbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIEJhc2UubG9nKCdJbnZhbGlkIEV4aWYgZGF0YTogSW52YWxpZCBieXRlIGFsaWdubWVudCBtYXJrZXIuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIHRoZSBUSUZGIHRhZyBtYXJrZXIgKDB4MDAyQSk6XHJcbiAgICAgICAgICAgIGlmICggZGF0YVZpZXcuZ2V0VWludDE2KCB0aWZmT2Zmc2V0ICsgMiwgbGl0dGxlRW5kaWFuICkgIT09IDB4MDAyQSApIHtcclxuICAgICAgICAgICAgICAgIEJhc2UubG9nKCdJbnZhbGlkIEV4aWYgZGF0YTogTWlzc2luZyBUSUZGIG1hcmtlci4nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFJldHJpZXZlIHRoZSBkaXJlY3Rvcnkgb2Zmc2V0IGJ5dGVzLCB1c3VhbGx5IDB4MDAwMDAwMDggb3IgOCBkZWNpbWFsOlxyXG4gICAgICAgICAgICBkaXJPZmZzZXQgPSBkYXRhVmlldy5nZXRVaW50MzIoIHRpZmZPZmZzZXQgKyA0LCBsaXR0bGVFbmRpYW4gKTtcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBleGlmIG9iamVjdCB0byBzdG9yZSB0aGUgdGFnczpcclxuICAgICAgICAgICAgZGF0YS5leGlmID0gbmV3IEVYSUYuRXhpZk1hcCgpO1xyXG4gICAgICAgICAgICAvLyBQYXJzZSB0aGUgdGFncyBvZiB0aGUgbWFpbiBpbWFnZSBkaXJlY3RvcnkgYW5kIHJldHJpZXZlIHRoZVxyXG4gICAgICAgICAgICAvLyBvZmZzZXQgdG8gdGhlIG5leHQgZGlyZWN0b3J5LCB1c3VhbGx5IHRoZSB0aHVtYm5haWwgZGlyZWN0b3J5OlxyXG4gICAgICAgICAgICBkaXJPZmZzZXQgPSBFWElGLnBhcnNlRXhpZlRhZ3MoIGRhdGFWaWV3LCB0aWZmT2Zmc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgIHRpZmZPZmZzZXQgKyBkaXJPZmZzZXQsIGxpdHRsZUVuZGlhbiwgZGF0YSApO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIOWwneivleivu+WPlue8qeeVpeWbvlxyXG4gICAgICAgICAgICAvLyBpZiAoIGRpck9mZnNldCApIHtcclxuICAgICAgICAgICAgLy8gICAgIHRodW1ibmFpbERhdGEgPSB7ZXhpZjoge319O1xyXG4gICAgICAgICAgICAvLyAgICAgZGlyT2Zmc2V0ID0gRVhJRi5wYXJzZUV4aWZUYWdzKFxyXG4gICAgICAgICAgICAvLyAgICAgICAgIGRhdGFWaWV3LFxyXG4gICAgICAgICAgICAvLyAgICAgICAgIHRpZmZPZmZzZXQsXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdGlmZk9mZnNldCArIGRpck9mZnNldCxcclxuICAgICAgICAgICAgLy8gICAgICAgICBsaXR0bGVFbmRpYW4sXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdGh1bWJuYWlsRGF0YVxyXG4gICAgICAgICAgICAvLyAgICAgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyAgICAgLy8gQ2hlY2sgZm9yIEpQRUcgVGh1bWJuYWlsIG9mZnNldDpcclxuICAgICAgICAgICAgLy8gICAgIGlmICh0aHVtYm5haWxEYXRhLmV4aWZbMHgwMjAxXSkge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIGRhdGEuZXhpZi5UaHVtYm5haWwgPSBFWElGLmdldEV4aWZUaHVtYm5haWwoXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGRhdGFWaWV3LFxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICB0aWZmT2Zmc2V0ICsgdGh1bWJuYWlsRGF0YS5leGlmWzB4MDIwMV0sXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIHRodW1ibmFpbERhdGEuZXhpZlsweDAyMDJdIC8vIFRodW1ibmFpbCBkYXRhIGxlbmd0aFxyXG4gICAgICAgICAgICAvLyAgICAgICAgICk7XHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgSW1hZ2VNZXRhLnBhcnNlcnNbIDB4ZmZlMSBdLnB1c2goIEVYSUYucGFyc2VFeGlmRGF0YSApO1xyXG4gICAgICAgIHJldHVybiBFWElGO1xyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIOi/meS4quaWueW8j+aAp+iDveS4jeihjO+8jOS9huaYr+WPr+S7peino+WGs2FuZHJvaWTph4zpnaLnmoR0b0RhdGFVcmznmoRidWdcclxuICAgICAqIGFuZHJvaWTph4zpnaJ0b0RhdGFVcmwoJ2ltYWdlL2pwZWdlJynlvpfliLDnmoTnu5PmnpzljbTmmK9wbmcuXHJcbiAgICAgKlxyXG4gICAgICog5omA5Lul6L+Z6YeM5rKh6L6Z77yM5Y+q6IO95YCf5Yqp6L+Z5Liq5bel5YW3XHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IGpwZWcgZW5jb2RlclxyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ3J1bnRpbWUvaHRtbDUvanBlZ2VuY29kZXInLFtdLCBmdW5jdGlvbiggcmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlICkge1xyXG4gICAgXHJcbiAgICAgICAgLypcclxuICAgICAgICAgIENvcHlyaWdodCAoYykgMjAwOCwgQWRvYmUgU3lzdGVtcyBJbmNvcnBvcmF0ZWRcclxuICAgICAgICAgIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAgICBcclxuICAgICAgICAgIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxyXG4gICAgICAgICAgbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZVxyXG4gICAgICAgICAgbWV0OlxyXG4gICAgXHJcbiAgICAgICAgICAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSxcclxuICAgICAgICAgICAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cclxuICAgIFxyXG4gICAgICAgICAgKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodFxyXG4gICAgICAgICAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlXHJcbiAgICAgICAgICAgIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uXHJcbiAgICBcclxuICAgICAgICAgICogTmVpdGhlciB0aGUgbmFtZSBvZiBBZG9iZSBTeXN0ZW1zIEluY29ycG9yYXRlZCBub3IgdGhlIG5hbWVzIG9mIGl0c1xyXG4gICAgICAgICAgICBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbVxyXG4gICAgICAgICAgICB0aGlzIHNvZnR3YXJlIHdpdGhvdXQgc3BlY2lmaWMgcHJpb3Igd3JpdHRlbiBwZXJtaXNzaW9uLlxyXG4gICAgXHJcbiAgICAgICAgICBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTIFwiQVNcclxuICAgICAgICAgIElTXCIgQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sXHJcbiAgICAgICAgICBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSXHJcbiAgICAgICAgICBQVVJQT1NFIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIE9XTkVSIE9SXHJcbiAgICAgICAgICBDT05UUklCVVRPUlMgQkUgTElBQkxFIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCxcclxuICAgICAgICAgIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTyxcclxuICAgICAgICAgIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUlxyXG4gICAgICAgICAgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT04gQU5ZIFRIRU9SWSBPRlxyXG4gICAgICAgICAgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUIChJTkNMVURJTkdcclxuICAgICAgICAgIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJU1xyXG4gICAgICAgICAgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuXHJcbiAgICAgICAgKi9cclxuICAgICAgICAvKlxyXG4gICAgICAgIEpQRUcgZW5jb2RlciBwb3J0ZWQgdG8gSmF2YVNjcmlwdCBhbmQgb3B0aW1pemVkIGJ5IEFuZHJlYXMgUml0dGVyLCB3d3cuYnl0ZXN0cm9tLmV1LCAxMS8yMDA5XHJcbiAgICBcclxuICAgICAgICBCYXNpYyBHVUkgYmxvY2tpbmcganBlZyBlbmNvZGVyXHJcbiAgICAgICAgKi9cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIEpQRUdFbmNvZGVyKHF1YWxpdHkpIHtcclxuICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgdmFyIGZyb3VuZCA9IE1hdGgucm91bmQ7XHJcbiAgICAgICAgICAgIHZhciBmZmxvb3IgPSBNYXRoLmZsb29yO1xyXG4gICAgICAgICAgICB2YXIgWVRhYmxlID0gbmV3IEFycmF5KDY0KTtcclxuICAgICAgICAgICAgdmFyIFVWVGFibGUgPSBuZXcgQXJyYXkoNjQpO1xyXG4gICAgICAgICAgICB2YXIgZmR0YmxfWSA9IG5ldyBBcnJheSg2NCk7XHJcbiAgICAgICAgICAgIHZhciBmZHRibF9VViA9IG5ldyBBcnJheSg2NCk7XHJcbiAgICAgICAgICAgIHZhciBZRENfSFQ7XHJcbiAgICAgICAgICAgIHZhciBVVkRDX0hUO1xyXG4gICAgICAgICAgICB2YXIgWUFDX0hUO1xyXG4gICAgICAgICAgICB2YXIgVVZBQ19IVDtcclxuICAgIFxyXG4gICAgICAgICAgICB2YXIgYml0Y29kZSA9IG5ldyBBcnJheSg2NTUzNSk7XHJcbiAgICAgICAgICAgIHZhciBjYXRlZ29yeSA9IG5ldyBBcnJheSg2NTUzNSk7XHJcbiAgICAgICAgICAgIHZhciBvdXRwdXRmRENUUXVhbnQgPSBuZXcgQXJyYXkoNjQpO1xyXG4gICAgICAgICAgICB2YXIgRFUgPSBuZXcgQXJyYXkoNjQpO1xyXG4gICAgICAgICAgICB2YXIgYnl0ZW91dCA9IFtdO1xyXG4gICAgICAgICAgICB2YXIgYnl0ZW5ldyA9IDA7XHJcbiAgICAgICAgICAgIHZhciBieXRlcG9zID0gNztcclxuICAgIFxyXG4gICAgICAgICAgICB2YXIgWURVID0gbmV3IEFycmF5KDY0KTtcclxuICAgICAgICAgICAgdmFyIFVEVSA9IG5ldyBBcnJheSg2NCk7XHJcbiAgICAgICAgICAgIHZhciBWRFUgPSBuZXcgQXJyYXkoNjQpO1xyXG4gICAgICAgICAgICB2YXIgY2x0ID0gbmV3IEFycmF5KDI1Nik7XHJcbiAgICAgICAgICAgIHZhciBSR0JfWVVWX1RBQkxFID0gbmV3IEFycmF5KDIwNDgpO1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudFF1YWxpdHk7XHJcbiAgICBcclxuICAgICAgICAgICAgdmFyIFppZ1phZyA9IFtcclxuICAgICAgICAgICAgICAgICAgICAgMCwgMSwgNSwgNiwxNCwxNSwyNywyOCxcclxuICAgICAgICAgICAgICAgICAgICAgMiwgNCwgNywxMywxNiwyNiwyOSw0MixcclxuICAgICAgICAgICAgICAgICAgICAgMywgOCwxMiwxNywyNSwzMCw0MSw0MyxcclxuICAgICAgICAgICAgICAgICAgICAgOSwxMSwxOCwyNCwzMSw0MCw0NCw1MyxcclxuICAgICAgICAgICAgICAgICAgICAxMCwxOSwyMywzMiwzOSw0NSw1Miw1NCxcclxuICAgICAgICAgICAgICAgICAgICAyMCwyMiwzMywzOCw0Niw1MSw1NSw2MCxcclxuICAgICAgICAgICAgICAgICAgICAyMSwzNCwzNyw0Nyw1MCw1Niw1OSw2MSxcclxuICAgICAgICAgICAgICAgICAgICAzNSwzNiw0OCw0OSw1Nyw1OCw2Miw2M1xyXG4gICAgICAgICAgICAgICAgXTtcclxuICAgIFxyXG4gICAgICAgICAgICB2YXIgc3RkX2RjX2x1bWluYW5jZV9ucmNvZGVzID0gWzAsMCwxLDUsMSwxLDEsMSwxLDEsMCwwLDAsMCwwLDAsMF07XHJcbiAgICAgICAgICAgIHZhciBzdGRfZGNfbHVtaW5hbmNlX3ZhbHVlcyA9IFswLDEsMiwzLDQsNSw2LDcsOCw5LDEwLDExXTtcclxuICAgICAgICAgICAgdmFyIHN0ZF9hY19sdW1pbmFuY2VfbnJjb2RlcyA9IFswLDAsMiwxLDMsMywyLDQsMyw1LDUsNCw0LDAsMCwxLDB4N2RdO1xyXG4gICAgICAgICAgICB2YXIgc3RkX2FjX2x1bWluYW5jZV92YWx1ZXMgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgMHgwMSwweDAyLDB4MDMsMHgwMCwweDA0LDB4MTEsMHgwNSwweDEyLFxyXG4gICAgICAgICAgICAgICAgICAgIDB4MjEsMHgzMSwweDQxLDB4MDYsMHgxMywweDUxLDB4NjEsMHgwNyxcclxuICAgICAgICAgICAgICAgICAgICAweDIyLDB4NzEsMHgxNCwweDMyLDB4ODEsMHg5MSwweGExLDB4MDgsXHJcbiAgICAgICAgICAgICAgICAgICAgMHgyMywweDQyLDB4YjEsMHhjMSwweDE1LDB4NTIsMHhkMSwweGYwLFxyXG4gICAgICAgICAgICAgICAgICAgIDB4MjQsMHgzMywweDYyLDB4NzIsMHg4MiwweDA5LDB4MGEsMHgxNixcclxuICAgICAgICAgICAgICAgICAgICAweDE3LDB4MTgsMHgxOSwweDFhLDB4MjUsMHgyNiwweDI3LDB4MjgsXHJcbiAgICAgICAgICAgICAgICAgICAgMHgyOSwweDJhLDB4MzQsMHgzNSwweDM2LDB4MzcsMHgzOCwweDM5LFxyXG4gICAgICAgICAgICAgICAgICAgIDB4M2EsMHg0MywweDQ0LDB4NDUsMHg0NiwweDQ3LDB4NDgsMHg0OSxcclxuICAgICAgICAgICAgICAgICAgICAweDRhLDB4NTMsMHg1NCwweDU1LDB4NTYsMHg1NywweDU4LDB4NTksXHJcbiAgICAgICAgICAgICAgICAgICAgMHg1YSwweDYzLDB4NjQsMHg2NSwweDY2LDB4NjcsMHg2OCwweDY5LFxyXG4gICAgICAgICAgICAgICAgICAgIDB4NmEsMHg3MywweDc0LDB4NzUsMHg3NiwweDc3LDB4NzgsMHg3OSxcclxuICAgICAgICAgICAgICAgICAgICAweDdhLDB4ODMsMHg4NCwweDg1LDB4ODYsMHg4NywweDg4LDB4ODksXHJcbiAgICAgICAgICAgICAgICAgICAgMHg4YSwweDkyLDB4OTMsMHg5NCwweDk1LDB4OTYsMHg5NywweDk4LFxyXG4gICAgICAgICAgICAgICAgICAgIDB4OTksMHg5YSwweGEyLDB4YTMsMHhhNCwweGE1LDB4YTYsMHhhNyxcclxuICAgICAgICAgICAgICAgICAgICAweGE4LDB4YTksMHhhYSwweGIyLDB4YjMsMHhiNCwweGI1LDB4YjYsXHJcbiAgICAgICAgICAgICAgICAgICAgMHhiNywweGI4LDB4YjksMHhiYSwweGMyLDB4YzMsMHhjNCwweGM1LFxyXG4gICAgICAgICAgICAgICAgICAgIDB4YzYsMHhjNywweGM4LDB4YzksMHhjYSwweGQyLDB4ZDMsMHhkNCxcclxuICAgICAgICAgICAgICAgICAgICAweGQ1LDB4ZDYsMHhkNywweGQ4LDB4ZDksMHhkYSwweGUxLDB4ZTIsXHJcbiAgICAgICAgICAgICAgICAgICAgMHhlMywweGU0LDB4ZTUsMHhlNiwweGU3LDB4ZTgsMHhlOSwweGVhLFxyXG4gICAgICAgICAgICAgICAgICAgIDB4ZjEsMHhmMiwweGYzLDB4ZjQsMHhmNSwweGY2LDB4ZjcsMHhmOCxcclxuICAgICAgICAgICAgICAgICAgICAweGY5LDB4ZmFcclxuICAgICAgICAgICAgICAgIF07XHJcbiAgICBcclxuICAgICAgICAgICAgdmFyIHN0ZF9kY19jaHJvbWluYW5jZV9ucmNvZGVzID0gWzAsMCwzLDEsMSwxLDEsMSwxLDEsMSwxLDAsMCwwLDAsMF07XHJcbiAgICAgICAgICAgIHZhciBzdGRfZGNfY2hyb21pbmFuY2VfdmFsdWVzID0gWzAsMSwyLDMsNCw1LDYsNyw4LDksMTAsMTFdO1xyXG4gICAgICAgICAgICB2YXIgc3RkX2FjX2Nocm9taW5hbmNlX25yY29kZXMgPSBbMCwwLDIsMSwyLDQsNCwzLDQsNyw1LDQsNCwwLDEsMiwweDc3XTtcclxuICAgICAgICAgICAgdmFyIHN0ZF9hY19jaHJvbWluYW5jZV92YWx1ZXMgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAxLDB4MDIsMHgwMywweDExLDB4MDQsMHgwNSwweDIxLFxyXG4gICAgICAgICAgICAgICAgICAgIDB4MzEsMHgwNiwweDEyLDB4NDEsMHg1MSwweDA3LDB4NjEsMHg3MSxcclxuICAgICAgICAgICAgICAgICAgICAweDEzLDB4MjIsMHgzMiwweDgxLDB4MDgsMHgxNCwweDQyLDB4OTEsXHJcbiAgICAgICAgICAgICAgICAgICAgMHhhMSwweGIxLDB4YzEsMHgwOSwweDIzLDB4MzMsMHg1MiwweGYwLFxyXG4gICAgICAgICAgICAgICAgICAgIDB4MTUsMHg2MiwweDcyLDB4ZDEsMHgwYSwweDE2LDB4MjQsMHgzNCxcclxuICAgICAgICAgICAgICAgICAgICAweGUxLDB4MjUsMHhmMSwweDE3LDB4MTgsMHgxOSwweDFhLDB4MjYsXHJcbiAgICAgICAgICAgICAgICAgICAgMHgyNywweDI4LDB4MjksMHgyYSwweDM1LDB4MzYsMHgzNywweDM4LFxyXG4gICAgICAgICAgICAgICAgICAgIDB4MzksMHgzYSwweDQzLDB4NDQsMHg0NSwweDQ2LDB4NDcsMHg0OCxcclxuICAgICAgICAgICAgICAgICAgICAweDQ5LDB4NGEsMHg1MywweDU0LDB4NTUsMHg1NiwweDU3LDB4NTgsXHJcbiAgICAgICAgICAgICAgICAgICAgMHg1OSwweDVhLDB4NjMsMHg2NCwweDY1LDB4NjYsMHg2NywweDY4LFxyXG4gICAgICAgICAgICAgICAgICAgIDB4NjksMHg2YSwweDczLDB4NzQsMHg3NSwweDc2LDB4NzcsMHg3OCxcclxuICAgICAgICAgICAgICAgICAgICAweDc5LDB4N2EsMHg4MiwweDgzLDB4ODQsMHg4NSwweDg2LDB4ODcsXHJcbiAgICAgICAgICAgICAgICAgICAgMHg4OCwweDg5LDB4OGEsMHg5MiwweDkzLDB4OTQsMHg5NSwweDk2LFxyXG4gICAgICAgICAgICAgICAgICAgIDB4OTcsMHg5OCwweDk5LDB4OWEsMHhhMiwweGEzLDB4YTQsMHhhNSxcclxuICAgICAgICAgICAgICAgICAgICAweGE2LDB4YTcsMHhhOCwweGE5LDB4YWEsMHhiMiwweGIzLDB4YjQsXHJcbiAgICAgICAgICAgICAgICAgICAgMHhiNSwweGI2LDB4YjcsMHhiOCwweGI5LDB4YmEsMHhjMiwweGMzLFxyXG4gICAgICAgICAgICAgICAgICAgIDB4YzQsMHhjNSwweGM2LDB4YzcsMHhjOCwweGM5LDB4Y2EsMHhkMixcclxuICAgICAgICAgICAgICAgICAgICAweGQzLDB4ZDQsMHhkNSwweGQ2LDB4ZDcsMHhkOCwweGQ5LDB4ZGEsXHJcbiAgICAgICAgICAgICAgICAgICAgMHhlMiwweGUzLDB4ZTQsMHhlNSwweGU2LDB4ZTcsMHhlOCwweGU5LFxyXG4gICAgICAgICAgICAgICAgICAgIDB4ZWEsMHhmMiwweGYzLDB4ZjQsMHhmNSwweGY2LDB4ZjcsMHhmOCxcclxuICAgICAgICAgICAgICAgICAgICAweGY5LDB4ZmFcclxuICAgICAgICAgICAgICAgIF07XHJcbiAgICBcclxuICAgICAgICAgICAgZnVuY3Rpb24gaW5pdFF1YW50VGFibGVzKHNmKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgWVFUID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAxNiwgMTEsIDEwLCAxNiwgMjQsIDQwLCA1MSwgNjEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDEyLCAxMiwgMTQsIDE5LCAyNiwgNTgsIDYwLCA1NSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgMTQsIDEzLCAxNiwgMjQsIDQwLCA1NywgNjksIDU2LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAxNCwgMTcsIDIyLCAyOSwgNTEsIDg3LCA4MCwgNjIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDE4LCAyMiwgMzcsIDU2LCA2OCwxMDksMTAzLCA3NyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgMjQsIDM1LCA1NSwgNjQsIDgxLDEwNCwxMTMsIDkyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA0OSwgNjQsIDc4LCA4NywxMDMsMTIxLDEyMCwxMDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDcyLCA5MiwgOTUsIDk4LDExMiwxMDAsMTAzLCA5OVxyXG4gICAgICAgICAgICAgICAgICAgIF07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDY0OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBmZmxvb3IoKFlRVFtpXSpzZis1MCkvMTAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQgPCAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0ID4gMjU1KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gMjU1O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFlUYWJsZVtaaWdaYWdbaV1dID0gdDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIFVWUVQgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDE3LCAxOCwgMjQsIDQ3LCA5OSwgOTksIDk5LCA5OSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgMTgsIDIxLCAyNiwgNjYsIDk5LCA5OSwgOTksIDk5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAyNCwgMjYsIDU2LCA5OSwgOTksIDk5LCA5OSwgOTksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDQ3LCA2NiwgOTksIDk5LCA5OSwgOTksIDk5LCA5OSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgOTksIDk5LCA5OSwgOTksIDk5LCA5OSwgOTksIDk5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA5OSwgOTksIDk5LCA5OSwgOTksIDk5LCA5OSwgOTksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDk5LCA5OSwgOTksIDk5LCA5OSwgOTksIDk5LCA5OSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgOTksIDk5LCA5OSwgOTksIDk5LCA5OSwgOTksIDk5XHJcbiAgICAgICAgICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDY0OyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHUgPSBmZmxvb3IoKFVWUVRbal0qc2YrNTApLzEwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1IDwgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodSA+IDI1NSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IDI1NTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBVVlRhYmxlW1ppZ1phZ1tqXV0gPSB1O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgYWFzZiA9IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgMS4wLCAxLjM4NzAzOTg0NSwgMS4zMDY1NjI5NjUsIDEuMTc1ODc1NjAyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAxLjAsIDAuNzg1Njk0OTU4LCAwLjU0MTE5NjEwMCwgMC4yNzU4OTkzNzlcclxuICAgICAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBrID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByb3cgPSAwOyByb3cgPCA4OyByb3crKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGNvbCA9IDA7IGNvbCA8IDg7IGNvbCsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZHRibF9ZW2tdICA9ICgxLjAgLyAoWVRhYmxlIFtaaWdaYWdba11dICogYWFzZltyb3ddICogYWFzZltjb2xdICogOC4wKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZHRibF9VVltrXSA9ICgxLjAgLyAoVVZUYWJsZVtaaWdaYWdba11dICogYWFzZltyb3ddICogYWFzZltjb2xdICogOC4wKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNvbXB1dGVIdWZmbWFuVGJsKG5yY29kZXMsIHN0ZF90YWJsZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvZGV2YWx1ZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvc19pbl90YWJsZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIEhUID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDE7IGsgPD0gMTY7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMTsgaiA8PSBucmNvZGVzW2tdOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhUW3N0ZF90YWJsZVtwb3NfaW5fdGFibGVdXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgSFRbc3RkX3RhYmxlW3Bvc19pbl90YWJsZV1dWzBdID0gY29kZXZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgSFRbc3RkX3RhYmxlW3Bvc19pbl90YWJsZV1dWzFdID0gaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc19pbl90YWJsZSsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZXZhbHVlKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZXZhbHVlKj0yO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSFQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGluaXRIdWZmbWFuVGJsKClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBZRENfSFQgPSBjb21wdXRlSHVmZm1hblRibChzdGRfZGNfbHVtaW5hbmNlX25yY29kZXMsc3RkX2RjX2x1bWluYW5jZV92YWx1ZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIFVWRENfSFQgPSBjb21wdXRlSHVmZm1hblRibChzdGRfZGNfY2hyb21pbmFuY2VfbnJjb2RlcyxzdGRfZGNfY2hyb21pbmFuY2VfdmFsdWVzKTtcclxuICAgICAgICAgICAgICAgICAgICBZQUNfSFQgPSBjb21wdXRlSHVmZm1hblRibChzdGRfYWNfbHVtaW5hbmNlX25yY29kZXMsc3RkX2FjX2x1bWluYW5jZV92YWx1ZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIFVWQUNfSFQgPSBjb21wdXRlSHVmZm1hblRibChzdGRfYWNfY2hyb21pbmFuY2VfbnJjb2RlcyxzdGRfYWNfY2hyb21pbmFuY2VfdmFsdWVzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gaW5pdENhdGVnb3J5TnVtYmVyKClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbnJsb3dlciA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ydXBwZXIgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGNhdCA9IDE7IGNhdCA8PSAxNTsgY2F0KyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9Qb3NpdGl2ZSBudW1iZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG5yID0gbnJsb3dlcjsgbnI8bnJ1cHBlcjsgbnIrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlbMzI3NjcrbnJdID0gY2F0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYml0Y29kZVszMjc2Nytucl0gPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdGNvZGVbMzI3NjcrbnJdWzFdID0gY2F0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYml0Y29kZVszMjc2Nytucl1bMF0gPSBucjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL05lZ2F0aXZlIG51bWJlcnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbnJuZWcgPS0obnJ1cHBlci0xKTsgbnJuZWc8PS1ucmxvd2VyOyBucm5lZysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeVszMjc2Nytucm5lZ10gPSBjYXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRjb2RlWzMyNzY3K25ybmVnXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYml0Y29kZVszMjc2Nytucm5lZ11bMV0gPSBjYXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRjb2RlWzMyNzY3K25ybmVnXVswXSA9IG5ydXBwZXItMStucm5lZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBucmxvd2VyIDw8PSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBucnVwcGVyIDw8PSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gaW5pdFJHQllVVlRhYmxlKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCAyNTY7aSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJHQl9ZVVZfVEFCTEVbaV0gICAgICAgICAgICA9ICAxOTU5NSAqIGk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJHQl9ZVVZfVEFCTEVbKGkrIDI1Nik+PjBdICA9ICAzODQ3MCAqIGk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJHQl9ZVVZfVEFCTEVbKGkrIDUxMik+PjBdICA9ICAgNzQ3MSAqIGkgKyAweDgwMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJHQl9ZVVZfVEFCTEVbKGkrIDc2OCk+PjBdICA9IC0xMTA1OSAqIGk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJHQl9ZVVZfVEFCTEVbKGkrMTAyNCk+PjBdICA9IC0yMTcwOSAqIGk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJHQl9ZVVZfVEFCTEVbKGkrMTI4MCk+PjBdICA9ICAzMjc2OCAqIGkgKyAweDgwN0ZGRjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUkdCX1lVVl9UQUJMRVsoaSsxNTM2KT4+MF0gID0gLTI3NDM5ICogaTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUkdCX1lVVl9UQUJMRVsoaSsxNzkyKT4+MF0gID0gLSA1MzI5ICogaTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIElPIGZ1bmN0aW9uc1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gd3JpdGVCaXRzKGJzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJzWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3N2YWwgPSBic1sxXS0xO1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICggcG9zdmFsID49IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAmICgxIDw8IHBvc3ZhbCkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBieXRlbmV3IHw9ICgxIDw8IGJ5dGVwb3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc3ZhbC0tO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBieXRlcG9zLS07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChieXRlcG9zIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ5dGVuZXcgPT0gMHhGRikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZSgweEZGKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoYnl0ZW5ldyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBieXRlcG9zPTc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBieXRlbmV3PTA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHdyaXRlQnl0ZSh2YWx1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBieXRlb3V0LnB1c2goY2x0W3ZhbHVlXSk7IC8vIHdyaXRlIGNoYXIgZGlyZWN0bHkgaW5zdGVhZCBvZiBjb252ZXJ0aW5nIGxhdGVyXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHdyaXRlV29yZCh2YWx1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoKHZhbHVlPj44KSYweEZGKTtcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoKHZhbHVlICAgKSYweEZGKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gRENUICYgcXVhbnRpemF0aW9uIGNvcmVcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGZEQ1RRdWFudChkYXRhLCBmZHRibClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZDAsIGQxLCBkMiwgZDMsIGQ0LCBkNSwgZDYsIGQ3O1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIFBhc3MgMTogcHJvY2VzcyByb3dzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhT2ZmPTA7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIEk4ID0gODtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgSTY0ID0gNjQ7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpPTA7IGk8STg7ICsraSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQwID0gZGF0YVtkYXRhT2ZmXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZDEgPSBkYXRhW2RhdGFPZmYrMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQyID0gZGF0YVtkYXRhT2ZmKzJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkMyA9IGRhdGFbZGF0YU9mZiszXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZDQgPSBkYXRhW2RhdGFPZmYrNF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQ1ID0gZGF0YVtkYXRhT2ZmKzVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkNiA9IGRhdGFbZGF0YU9mZis2XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZDcgPSBkYXRhW2RhdGFPZmYrN107XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcDAgPSBkMCArIGQ3O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG1wNyA9IGQwIC0gZDc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXAxID0gZDEgKyBkNjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcDYgPSBkMSAtIGQ2O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG1wMiA9IGQyICsgZDU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXA1ID0gZDIgLSBkNTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcDMgPSBkMyArIGQ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG1wNCA9IGQzIC0gZDQ7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogRXZlbiBwYXJ0ICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXAxMCA9IHRtcDAgKyB0bXAzOyAgICAvKiBwaGFzZSAyICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXAxMyA9IHRtcDAgLSB0bXAzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG1wMTEgPSB0bXAxICsgdG1wMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcDEyID0gdG1wMSAtIHRtcDI7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtkYXRhT2ZmXSA9IHRtcDEwICsgdG1wMTE7IC8qIHBoYXNlIDMgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtkYXRhT2ZmKzRdID0gdG1wMTAgLSB0bXAxMTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgejEgPSAodG1wMTIgKyB0bXAxMykgKiAwLjcwNzEwNjc4MTsgLyogYzQgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtkYXRhT2ZmKzJdID0gdG1wMTMgKyB6MTsgLyogcGhhc2UgNSAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhW2RhdGFPZmYrNl0gPSB0bXAxMyAtIHoxO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIE9kZCBwYXJ0ICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcDEwID0gdG1wNCArIHRtcDU7IC8qIHBoYXNlIDIgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgdG1wMTEgPSB0bXA1ICsgdG1wNjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG1wMTIgPSB0bXA2ICsgdG1wNztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBUaGUgcm90YXRvciBpcyBtb2RpZmllZCBmcm9tIGZpZyA0LTggdG8gYXZvaWQgZXh0cmEgbmVnYXRpb25zLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgejUgPSAodG1wMTAgLSB0bXAxMikgKiAwLjM4MjY4MzQzMzsgLyogYzYgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHoyID0gMC41NDExOTYxMDAgKiB0bXAxMCArIHo1OyAvKiBjMi1jNiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgejQgPSAxLjMwNjU2Mjk2NSAqIHRtcDEyICsgejU7IC8qIGMyK2M2ICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB6MyA9IHRtcDExICogMC43MDcxMDY3ODE7IC8qIGM0ICovXHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHoxMSA9IHRtcDcgKyB6MzsgICAgLyogcGhhc2UgNSAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgejEzID0gdG1wNyAtIHozO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbZGF0YU9mZis1XSA9IHoxMyArIHoyOyAvKiBwaGFzZSA2ICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbZGF0YU9mZiszXSA9IHoxMyAtIHoyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhW2RhdGFPZmYrMV0gPSB6MTEgKyB6NDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtkYXRhT2ZmKzddID0gejExIC0gejQ7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YU9mZiArPSA4OyAvKiBhZHZhbmNlIHBvaW50ZXIgdG8gbmV4dCByb3cgKi9cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvKiBQYXNzIDI6IHByb2Nlc3MgY29sdW1ucy4gKi9cclxuICAgICAgICAgICAgICAgICAgICBkYXRhT2ZmID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGk9MDsgaTxJODsgKytpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZDAgPSBkYXRhW2RhdGFPZmZdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkMSA9IGRhdGFbZGF0YU9mZiArIDhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkMiA9IGRhdGFbZGF0YU9mZiArIDE2XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZDMgPSBkYXRhW2RhdGFPZmYgKyAyNF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQ0ID0gZGF0YVtkYXRhT2ZmICsgMzJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkNSA9IGRhdGFbZGF0YU9mZiArIDQwXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZDYgPSBkYXRhW2RhdGFPZmYgKyA0OF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQ3ID0gZGF0YVtkYXRhT2ZmICsgNTZdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXAwcDIgPSBkMCArIGQ3O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG1wN3AyID0gZDAgLSBkNztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcDFwMiA9IGQxICsgZDY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXA2cDIgPSBkMSAtIGQ2O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG1wMnAyID0gZDIgKyBkNTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcDVwMiA9IGQyIC0gZDU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXAzcDIgPSBkMyArIGQ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG1wNHAyID0gZDMgLSBkNDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBFdmVuIHBhcnQgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcDEwcDIgPSB0bXAwcDIgKyB0bXAzcDI7ICAvKiBwaGFzZSAyICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXAxM3AyID0gdG1wMHAyIC0gdG1wM3AyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG1wMTFwMiA9IHRtcDFwMiArIHRtcDJwMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcDEycDIgPSB0bXAxcDIgLSB0bXAycDI7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtkYXRhT2ZmXSA9IHRtcDEwcDIgKyB0bXAxMXAyOyAvKiBwaGFzZSAzICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbZGF0YU9mZiszMl0gPSB0bXAxMHAyIC0gdG1wMTFwMjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgejFwMiA9ICh0bXAxMnAyICsgdG1wMTNwMikgKiAwLjcwNzEwNjc4MTsgLyogYzQgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtkYXRhT2ZmKzE2XSA9IHRtcDEzcDIgKyB6MXAyOyAvKiBwaGFzZSA1ICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbZGF0YU9mZis0OF0gPSB0bXAxM3AyIC0gejFwMjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBPZGQgcGFydCAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0bXAxMHAyID0gdG1wNHAyICsgdG1wNXAyOyAvKiBwaGFzZSAyICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcDExcDIgPSB0bXA1cDIgKyB0bXA2cDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcDEycDIgPSB0bXA2cDIgKyB0bXA3cDI7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogVGhlIHJvdGF0b3IgaXMgbW9kaWZpZWQgZnJvbSBmaWcgNC04IHRvIGF2b2lkIGV4dHJhIG5lZ2F0aW9ucy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHo1cDIgPSAodG1wMTBwMiAtIHRtcDEycDIpICogMC4zODI2ODM0MzM7IC8qIGM2ICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB6MnAyID0gMC41NDExOTYxMDAgKiB0bXAxMHAyICsgejVwMjsgLyogYzItYzYgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHo0cDIgPSAxLjMwNjU2Mjk2NSAqIHRtcDEycDIgKyB6NXAyOyAvKiBjMitjNiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgejNwMiA9IHRtcDExcDIgKiAwLjcwNzEwNjc4MTsgLyogYzQgKi9cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgejExcDIgPSB0bXA3cDIgKyB6M3AyOyAgLyogcGhhc2UgNSAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgejEzcDIgPSB0bXA3cDIgLSB6M3AyO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbZGF0YU9mZis0MF0gPSB6MTNwMiArIHoycDI7IC8qIHBoYXNlIDYgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtkYXRhT2ZmKzI0XSA9IHoxM3AyIC0gejJwMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtkYXRhT2ZmKyA4XSA9IHoxMXAyICsgejRwMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtkYXRhT2ZmKzU2XSA9IHoxMXAyIC0gejRwMjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhT2ZmKys7IC8qIGFkdmFuY2UgcG9pbnRlciB0byBuZXh0IGNvbHVtbiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFF1YW50aXplL2Rlc2NhbGUgdGhlIGNvZWZmaWNpZW50c1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmRENUUXVhbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpPTA7IGk8STY0OyArK2kpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBcHBseSB0aGUgcXVhbnRpemF0aW9uIGFuZCBzY2FsaW5nIGZhY3RvciAmIFJvdW5kIHRvIG5lYXJlc3QgaW50ZWdlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmRENUUXVhbnQgPSBkYXRhW2ldKmZkdGJsW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRmRENUUXVhbnRbaV0gPSAoZkRDVFF1YW50ID4gMC4wKSA/ICgoZkRDVFF1YW50ICsgMC41KXwwKSA6ICgoZkRDVFF1YW50IC0gMC41KXwwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9vdXRwdXRmRENUUXVhbnRbaV0gPSBmcm91bmQoZkRDVFF1YW50KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3V0cHV0ZkRDVFF1YW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiB3cml0ZUFQUDAoKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlV29yZCgweEZGRTApOyAvLyBtYXJrZXJcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZVdvcmQoMTYpOyAvLyBsZW5ndGhcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMHg0QSk7IC8vIEpcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMHg0Nik7IC8vIEZcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMHg0OSk7IC8vIElcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMHg0Nik7IC8vIEZcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMCk7IC8vID0gXCJKRklGXCIsJ1xcMCdcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMSk7IC8vIHZlcnNpb25oaVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZSgxKTsgLy8gdmVyc2lvbmxvXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVCeXRlKDApOyAvLyB4eXVuaXRzXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVXb3JkKDEpOyAvLyB4ZGVuc2l0eVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlV29yZCgxKTsgLy8geWRlbnNpdHlcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMCk7IC8vIHRodW1ibndpZHRoXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVCeXRlKDApOyAvLyB0aHVtYm5oZWlnaHRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gd3JpdGVTT0YwKHdpZHRoLCBoZWlnaHQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVXb3JkKDB4RkZDMCk7IC8vIG1hcmtlclxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlV29yZCgxNyk7ICAgLy8gbGVuZ3RoLCB0cnVlY29sb3IgWVVWIEpQR1xyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZSg4KTsgICAgLy8gcHJlY2lzaW9uXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVXb3JkKGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVXb3JkKHdpZHRoKTtcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMyk7ICAgIC8vIG5yb2Zjb21wb25lbnRzXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVCeXRlKDEpOyAgICAvLyBJZFlcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMHgxMSk7IC8vIEhWWVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZSgwKTsgICAgLy8gUVRZXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVCeXRlKDIpOyAgICAvLyBJZFVcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMHgxMSk7IC8vIEhWVVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZSgxKTsgICAgLy8gUVRVXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVCeXRlKDMpOyAgICAvLyBJZFZcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMHgxMSk7IC8vIEhWVlxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZSgxKTsgICAgLy8gUVRWXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHdyaXRlRFFUKClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZVdvcmQoMHhGRkRCKTsgLy8gbWFya2VyXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVXb3JkKDEzMik7ICAgIC8vIGxlbmd0aFxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZSgwKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8NjQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoWVRhYmxlW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVCeXRlKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGo9MDsgajw2NDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZShVVlRhYmxlW2pdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHdyaXRlREhUKClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZVdvcmQoMHhGRkM0KTsgLy8gbWFya2VyXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVXb3JkKDB4MDFBMik7IC8vIGxlbmd0aFxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVCeXRlKDApOyAvLyBIVFlEQ2luZm9cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8MTY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoc3RkX2RjX2x1bWluYW5jZV9ucmNvZGVzW2krMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqPTA7IGo8PTExOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVCeXRlKHN0ZF9kY19sdW1pbmFuY2VfdmFsdWVzW2pdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMHgxMCk7IC8vIEhUWUFDaW5mb1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGs9MDsgazwxNjsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZShzdGRfYWNfbHVtaW5hbmNlX25yY29kZXNbaysxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGw9MDsgbDw9MTYxOyBsKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVCeXRlKHN0ZF9hY19sdW1pbmFuY2VfdmFsdWVzW2xdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMSk7IC8vIEhUVURDaW5mb1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG09MDsgbTwxNjsgbSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZShzdGRfZGNfY2hyb21pbmFuY2VfbnJjb2Rlc1ttKzFdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbj0wOyBuPD0xMTsgbisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZShzdGRfZGNfY2hyb21pbmFuY2VfdmFsdWVzW25dKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMHgxMSk7IC8vIEhUVUFDaW5mb1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG89MDsgbzwxNjsgbysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZShzdGRfYWNfY2hyb21pbmFuY2VfbnJjb2Rlc1tvKzFdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcD0wOyBwPD0xNjE7IHArKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoc3RkX2FjX2Nocm9taW5hbmNlX3ZhbHVlc1twXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiB3cml0ZVNPUygpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVXb3JkKDB4RkZEQSk7IC8vIG1hcmtlclxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlV29yZCgxMik7IC8vIGxlbmd0aFxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZSgzKTsgLy8gbnJvZmNvbXBvbmVudHNcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMSk7IC8vIElkWVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZSgwKTsgLy8gSFRZXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVCeXRlKDIpOyAvLyBJZFVcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMHgxMSk7IC8vIEhUVVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZSgzKTsgLy8gSWRWXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVCeXRlKDB4MTEpOyAvLyBIVFZcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZUJ5dGUoMCk7IC8vIFNzXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVCeXRlKDB4M2YpOyAvLyBTZVxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlQnl0ZSgwKTsgLy8gQmZcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcHJvY2Vzc0RVKENEVSwgZmR0YmwsIERDLCBIVERDLCBIVEFDKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgRU9CID0gSFRBQ1sweDAwXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTTE2emVyb2VzID0gSFRBQ1sweEYwXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcG9zO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBJMTYgPSAxNjtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgSTYzID0gNjM7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIEk2NCA9IDY0O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBEVV9EQ1QgPSBmRENUUXVhbnQoQ0RVLCBmZHRibCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9aaWdaYWcgcmVvcmRlclxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGo9MDtqPEk2NDsrK2opIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRFVbWmlnWmFnW2pdXT1EVV9EQ1Rbal07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBEaWZmID0gRFVbMF0gLSBEQzsgREMgPSBEVVswXTtcclxuICAgICAgICAgICAgICAgICAgICAvL0VuY29kZSBEQ1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChEaWZmPT0wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlQml0cyhIVERDWzBdKTsgLy8gRGlmZiBtaWdodCBiZSAwXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zID0gMzI3NjcrRGlmZjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVCaXRzKEhURENbY2F0ZWdvcnlbcG9zXV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZUJpdHMoYml0Y29kZVtwb3NdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy9FbmNvZGUgQUNzXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZDBwb3MgPSA2MzsgLy8gd2FzIGNvbnN0Li4uIHdoaWNoIGlzIGNyYXp5XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICg7IChlbmQwcG9zPjApJiYoRFVbZW5kMHBvc109PTApOyBlbmQwcG9zLS0pIHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIC8vZW5kMHBvcyA9IGZpcnN0IGVsZW1lbnQgaW4gcmV2ZXJzZSBvcmRlciAhPTBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGVuZDBwb3MgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZUJpdHMoRU9CKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERDO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxuZztcclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoIGkgPD0gZW5kMHBvcyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXJ0cG9zID0gaTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IChEVVtpXT09MCkgJiYgKGk8PWVuZDBwb3MpOyArK2kpIHt9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBucnplcm9lcyA9IGktc3RhcnRwb3M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggbnJ6ZXJvZXMgPj0gSTE2ICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG5nID0gbnJ6ZXJvZXM+PjQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBucm1hcmtlcj0xOyBucm1hcmtlciA8PSBsbmc7ICsrbnJtYXJrZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVCaXRzKE0xNnplcm9lcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBucnplcm9lcyA9IG5yemVyb2VzJjB4RjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3MgPSAzMjc2NytEVVtpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVCaXRzKEhUQUNbKG5yemVyb2VzPDw0KStjYXRlZ29yeVtwb3NdXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlQml0cyhiaXRjb2RlW3Bvc10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggZW5kMHBvcyAhPSBJNjMgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlQml0cyhFT0IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gREM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGluaXRDaGFyTG9va3VwVGFibGUoKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2ZjYyA9IFN0cmluZy5mcm9tQ2hhckNvZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7IGkgPCAyNTY7IGkrKyl7IC8vLy8vIEFDSFRVTkcgLy8gMjU1XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsdFtpXSA9IHNmY2MoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLmVuY29kZSA9IGZ1bmN0aW9uKGltYWdlLHF1YWxpdHkpIC8vIGltYWdlIGRhdGEgb2JqZWN0XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdmFyIHRpbWVfc3RhcnQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHF1YWxpdHkpIHNldFF1YWxpdHkocXVhbGl0eSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBJbml0aWFsaXplIGJpdCB3cml0ZXJcclxuICAgICAgICAgICAgICAgICAgICBieXRlb3V0ID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnl0ZW5ldz0wO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVwb3M9NztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFkZCBKUEVHIGhlYWRlcnNcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZVdvcmQoMHhGRkQ4KTsgLy8gU09JXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVBUFAwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVEUVQoKTtcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZVNPRjAoaW1hZ2Uud2lkdGgsaW1hZ2UuaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZURIVCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlU09TKCk7XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEVuY29kZSA4eDggbWFjcm9ibG9ja3NcclxuICAgICAgICAgICAgICAgICAgICB2YXIgRENZPTA7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIERDVT0wO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBEQ1Y9MDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVuZXc9MDtcclxuICAgICAgICAgICAgICAgICAgICBieXRlcG9zPTc7XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5jb2RlLmRpc3BsYXlOYW1lID0gXCJfZW5jb2RlX1wiO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGltYWdlRGF0YSA9IGltYWdlLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2Uud2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmhlaWdodDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBxdWFkV2lkdGggPSB3aWR0aCo0O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cmlwbGVXaWR0aCA9IHdpZHRoKjM7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeCwgeSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHIsIGcsIGI7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXJ0LHAsIGNvbCxyb3cscG9zO1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlKHkgPCBoZWlnaHQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUoeCA8IHF1YWRXaWR0aCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gcXVhZFdpZHRoICogeSArIHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBzdGFydDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sID0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdyA9IDA7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHBvcz0wOyBwb3MgPCA2NDsgcG9zKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93ID0gcG9zID4+IDM7Ly8gLzhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbCA9ICggcG9zICYgNyApICogNDsgLy8gJThcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBzdGFydCArICggcm93ICogcXVhZFdpZHRoICkgKyBjb2w7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHkrcm93ID49IGhlaWdodCl7IC8vIHBhZGRpbmcgYm90dG9tXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC09IChxdWFkV2lkdGgqKHkrMStyb3ctaGVpZ2h0KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHgrY29sID49IHF1YWRXaWR0aCl7IC8vIHBhZGRpbmcgcmlnaHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLT0gKCh4K2NvbCkgLSBxdWFkV2lkdGggKzQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBpbWFnZURhdGFbIHArKyBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZyA9IGltYWdlRGF0YVsgcCsrIF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID0gaW1hZ2VEYXRhWyBwKysgXTtcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAvLyBjYWxjdWxhdGUgWVVWIHZhbHVlcyBkeW5hbWljYWxseVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgWURVW3Bvc109KCgoIDAuMjk5MDApKnIrKCAwLjU4NzAwKSpnKyggMC4xMTQwMCkqYikpLTEyODsgLy8tMHg4MFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVURVW3Bvc109KCgoLTAuMTY4NzQpKnIrKC0wLjMzMTI2KSpnKyggMC41MDAwMCkqYikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVkRVW3Bvc109KCgoIDAuNTAwMDApKnIrKC0wLjQxODY5KSpnKygtMC4wODEzMSkqYikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXNlIGxvb2t1cCB0YWJsZSAoc2xpZ2h0bHkgZmFzdGVyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgWURVW3Bvc10gPSAoKFJHQl9ZVVZfVEFCTEVbcl0gICAgICAgICAgICAgKyBSR0JfWVVWX1RBQkxFWyhnICsgIDI1Nik+PjBdICsgUkdCX1lVVl9UQUJMRVsoYiArICA1MTIpPj4wXSkgPj4gMTYpLTEyODtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVEVVtwb3NdID0gKChSR0JfWVVWX1RBQkxFWyhyICsgIDc2OCk+PjBdICsgUkdCX1lVVl9UQUJMRVsoZyArIDEwMjQpPj4wXSArIFJHQl9ZVVZfVEFCTEVbKGIgKyAxMjgwKT4+MF0pID4+IDE2KS0xMjg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWRFVbcG9zXSA9ICgoUkdCX1lVVl9UQUJMRVsociArIDEyODApPj4wXSArIFJHQl9ZVVZfVEFCTEVbKGcgKyAxNTM2KT4+MF0gKyBSR0JfWVVWX1RBQkxFWyhiICsgMTc5Mik+PjBdKSA+PiAxNiktMTI4O1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBEQ1kgPSBwcm9jZXNzRFUoWURVLCBmZHRibF9ZLCBEQ1ksIFlEQ19IVCwgWUFDX0hUKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRENVID0gcHJvY2Vzc0RVKFVEVSwgZmR0YmxfVVYsIERDVSwgVVZEQ19IVCwgVVZBQ19IVCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIERDViA9IHByb2Nlc3NEVShWRFUsIGZkdGJsX1VWLCBEQ1YsIFVWRENfSFQsIFVWQUNfSFQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4Kz0zMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB5Kz04O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRG8gdGhlIGJpdCBhbGlnbm1lbnQgb2YgdGhlIEVPSSBtYXJrZXJcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGJ5dGVwb3MgPj0gMCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGxiaXRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxiaXRzWzFdID0gYnl0ZXBvcysxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxsYml0c1swXSA9ICgxPDwoYnl0ZXBvcysxKSktMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVCaXRzKGZpbGxiaXRzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZVdvcmQoMHhGRkQ5KTsgLy9FT0lcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBqcGVnRGF0YVVyaSA9ICdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LCcgKyBidG9hKGJ5dGVvdXQuam9pbignJykpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgYnl0ZW91dCA9IFtdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYmVuY2htYXJraW5nXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdmFyIGR1cmF0aW9uID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSB0aW1lX3N0YXJ0O1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdFbmNvZGluZyB0aW1lOiAnKyBjdXJyZW50UXVhbGl0eSArICdtcycpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vXHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ganBlZ0RhdGFVcmlcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHNldFF1YWxpdHkocXVhbGl0eSl7XHJcbiAgICAgICAgICAgICAgICBpZiAocXVhbGl0eSA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcXVhbGl0eSA9IDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAocXVhbGl0eSA+IDEwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHF1YWxpdHkgPSAxMDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmKGN1cnJlbnRRdWFsaXR5ID09IHF1YWxpdHkpIHJldHVybiAvLyBkb24ndCByZWNhbGMgaWYgdW5jaGFuZ2VkXHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHZhciBzZiA9IDA7XHJcbiAgICAgICAgICAgICAgICBpZiAocXVhbGl0eSA8IDUwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2YgPSBNYXRoLmZsb29yKDUwMDAgLyBxdWFsaXR5KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2YgPSBNYXRoLmZsb29yKDIwMCAtIHF1YWxpdHkqMik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGluaXRRdWFudFRhYmxlcyhzZik7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVhbGl0eSA9IHF1YWxpdHk7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnUXVhbGl0eSBzZXQgdG86ICcrcXVhbGl0eSArJyUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGluaXQoKXtcclxuICAgICAgICAgICAgICAgIC8vIHZhciB0aW1lX3N0YXJ0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICBpZighcXVhbGl0eSkgcXVhbGl0eSA9IDUwO1xyXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRhYmxlc1xyXG4gICAgICAgICAgICAgICAgaW5pdENoYXJMb29rdXBUYWJsZSgpXHJcbiAgICAgICAgICAgICAgICBpbml0SHVmZm1hblRibCgpO1xyXG4gICAgICAgICAgICAgICAgaW5pdENhdGVnb3J5TnVtYmVyKCk7XHJcbiAgICAgICAgICAgICAgICBpbml0UkdCWVVWVGFibGUoKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgc2V0UXVhbGl0eShxdWFsaXR5KTtcclxuICAgICAgICAgICAgICAgIC8vIHZhciBkdXJhdGlvbiA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gdGltZV9zdGFydDtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdJbml0aWFsaXphdGlvbiAnKyBkdXJhdGlvbiArICdtcycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgaW5pdCgpO1xyXG4gICAgXHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIEpQRUdFbmNvZGVyLmVuY29kZSA9IGZ1bmN0aW9uKCBkYXRhLCBxdWFsaXR5ICkge1xyXG4gICAgICAgICAgICB2YXIgZW5jb2RlciA9IG5ldyBKUEVHRW5jb2RlciggcXVhbGl0eSApO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiBlbmNvZGVyLmVuY29kZSggZGF0YSApO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIHJldHVybiBKUEVHRW5jb2RlcjtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IEZpeCBhbmRyb2lkIGNhbnZhcy50b0RhdGFVcmwgYnVnLlxyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ3J1bnRpbWUvaHRtbDUvYW5kcm9pZHBhdGNoJyxbXHJcbiAgICAgICAgJ3J1bnRpbWUvaHRtbDUvdXRpbCcsXHJcbiAgICAgICAgJ3J1bnRpbWUvaHRtbDUvanBlZ2VuY29kZXInLFxyXG4gICAgICAgICdiYXNlJ1xyXG4gICAgXSwgZnVuY3Rpb24oIFV0aWwsIGVuY29kZXIsIEJhc2UgKSB7XHJcbiAgICAgICAgdmFyIG9yaWdpbiA9IFV0aWwuY2FudmFzVG9EYXRhVXJsLFxyXG4gICAgICAgICAgICBzdXBwb3J0SnBlZztcclxuICAgIFxyXG4gICAgICAgIFV0aWwuY2FudmFzVG9EYXRhVXJsID0gZnVuY3Rpb24oIGNhbnZhcywgdHlwZSwgcXVhbGl0eSApIHtcclxuICAgICAgICAgICAgdmFyIGN0eCwgdywgaCwgZnJhZ2VtZW50LCBwYXJ0cztcclxuICAgIFxyXG4gICAgICAgICAgICAvLyDpnZ5hbmRyb2lk5omL5py655u05o6l6Lez6L+H44CCXHJcbiAgICAgICAgICAgIGlmICggIUJhc2Uub3MuYW5kcm9pZCApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvcmlnaW4uYXBwbHkoIG51bGwsIGFyZ3VtZW50cyApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8g5qOA5rWL5piv5ZCmY2FudmFz5pSv5oyBanBlZ+WvvOWHuu+8jOagueaNruaVsOaNruagvOW8j+adpeWIpOaWreOAglxyXG4gICAgICAgICAgICAvLyBKUEVHIOWJjeS4pOS9jeWIhuWIq+aYr++8mjI1NSwgMjE2XHJcbiAgICAgICAgICAgIGlmICggdHlwZSA9PT0gJ2ltYWdlL2pwZWcnICYmIHR5cGVvZiBzdXBwb3J0SnBlZyA9PT0gJ3VuZGVmaW5lZCcgKSB7XHJcbiAgICAgICAgICAgICAgICBmcmFnZW1lbnQgPSBvcmlnaW4uYXBwbHkoIG51bGwsIGFyZ3VtZW50cyApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBwYXJ0cyA9IGZyYWdlbWVudC5zcGxpdCgnLCcpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIH5wYXJ0c1sgMCBdLmluZGV4T2YoJ2Jhc2U2NCcpICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZyYWdlbWVudCA9IGF0b2IoIHBhcnRzWyAxIF0gKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJhZ2VtZW50ID0gZGVjb2RlVVJJQ29tcG9uZW50KCBwYXJ0c1sgMSBdICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGZyYWdlbWVudCA9IGZyYWdlbWVudC5zdWJzdHJpbmcoIDAsIDIgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgc3VwcG9ydEpwZWcgPSBmcmFnZW1lbnQuY2hhckNvZGVBdCggMCApID09PSAyNTUgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnJhZ2VtZW50LmNoYXJDb2RlQXQoIDEgKSA9PT0gMjE2O1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8g5Y+q5pyJ5ZyoYW5kcm9pZOeOr+Wig+S4i+aJjeS/ruWkjVxyXG4gICAgICAgICAgICBpZiAoIHR5cGUgPT09ICdpbWFnZS9qcGVnJyAmJiAhc3VwcG9ydEpwZWcgKSB7XHJcbiAgICAgICAgICAgICAgICB3ID0gY2FudmFzLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgaCA9IGNhbnZhcy5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVuY29kZXIuZW5jb2RlKCBjdHguZ2V0SW1hZ2VEYXRhKCAwLCAwLCB3LCBoICksIHF1YWxpdHkgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiBvcmlnaW4uYXBwbHkoIG51bGwsIGFyZ3VtZW50cyApO1xyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyBJbWFnZVxyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ3J1bnRpbWUvaHRtbDUvaW1hZ2UnLFtcclxuICAgICAgICAnYmFzZScsXHJcbiAgICAgICAgJ3J1bnRpbWUvaHRtbDUvcnVudGltZScsXHJcbiAgICAgICAgJ3J1bnRpbWUvaHRtbDUvdXRpbCdcclxuICAgIF0sIGZ1bmN0aW9uKCBCYXNlLCBIdG1sNVJ1bnRpbWUsIFV0aWwgKSB7XHJcbiAgICBcclxuICAgICAgICB2YXIgQkxBTksgPSAnZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFBRC9BQ3dBQUFBQUFRQUJBQUFDQURzJTNEJztcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBIdG1sNVJ1bnRpbWUucmVnaXN0ZXIoICdJbWFnZScsIHtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBmbGFnOiDmoIforrDmmK/lkKbooqvkv67mlLnov4fjgIJcclxuICAgICAgICAgICAgbW9kaWZpZWQ6IGZhbHNlLFxyXG4gICAgXHJcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICBpbWcgPSBuZXcgSW1hZ2UoKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgbWUuX2luZm8gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IG1lLnR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLndpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vZGVidWdnZXI7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyDor7vlj5ZtZXRh5L+h5oGv44CCXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhbWUuX21ldGFzICYmICdpbWFnZS9qcGVnJyA9PT0gbWUudHlwZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgVXRpbC5wYXJzZU1ldGEoIG1lLl9ibG9iLCBmdW5jdGlvbiggZXJyb3IsIHJldCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLl9tZXRhcyA9IHJldDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLm93bmVyLnRyaWdnZXIoJ2xvYWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWUub3duZXIudHJpZ2dlcignbG9hZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGltZy5vbmVycm9yID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWUub3duZXIudHJpZ2dlcignZXJyb3InKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG1lLl9pbWcgPSBpbWc7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgbG9hZEZyb21CbG9iOiBmdW5jdGlvbiggYmxvYiApIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZSA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgaW1nID0gbWUuX2ltZztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgbWUuX2Jsb2IgPSBibG9iO1xyXG4gICAgICAgICAgICAgICAgbWUudHlwZSA9IGJsb2IudHlwZTtcclxuICAgICAgICAgICAgICAgIGltZy5zcmMgPSBVdGlsLmNyZWF0ZU9iamVjdFVSTCggYmxvYi5nZXRTb3VyY2UoKSApO1xyXG4gICAgICAgICAgICAgICAgbWUub3duZXIub25jZSggJ2xvYWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBVdGlsLnJldm9rZU9iamVjdFVSTCggaW1nLnNyYyApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbiggd2lkdGgsIGhlaWdodCApIHtcclxuICAgICAgICAgICAgICAgIHZhciBjYW52YXMgPSB0aGlzLl9jYW52YXMgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuX2NhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVzaXplKCB0aGlzLl9pbWcsIGNhbnZhcywgd2lkdGgsIGhlaWdodCApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYmxvYiA9IG51bGw7ICAgIC8vIOayoeeUqOS6hu+8jOWPr+S7peWIoOaOieS6huOAglxyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RpZmllZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm93bmVyLnRyaWdnZXIoICdjb21wbGV0ZScsICdyZXNpemUnICk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgY3JvcDogZnVuY3Rpb24oIHgsIHksIHcsIGgsIHMgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3ZzID0gdGhpcy5fY2FudmFzIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLl9jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKSksXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cyA9IHRoaXMub3B0aW9ucyxcclxuICAgICAgICAgICAgICAgICAgICBpbWcgPSB0aGlzLl9pbWcsXHJcbiAgICAgICAgICAgICAgICAgICAgaXcgPSBpbWcubmF0dXJhbFdpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgIGloID0gaW1nLm5hdHVyYWxIZWlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JpZW50YXRpb24gPSB0aGlzLmdldE9yaWVudGF0aW9uKCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHMgPSBzIHx8IDE7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIHRvZG8g6Kej5YazIG9yaWVudGF0aW9uIOeahOmXrumimOOAglxyXG4gICAgICAgICAgICAgICAgLy8gdmFsdWVzIHRoYXQgcmVxdWlyZSA5MCBkZWdyZWUgcm90YXRpb25cclxuICAgICAgICAgICAgICAgIC8vIGlmICggflsgNSwgNiwgNywgOCBdLmluZGV4T2YoIG9yaWVudGF0aW9uICkgKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vICAgICBzd2l0Y2ggKCBvcmllbnRhdGlvbiApIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgdG1wID0geDtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHggPSB5O1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgeSA9IGl3ICogcyAtIHRtcCAtIHc7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBjb25zb2xlLmxvZyhpaCAqIHMsIHRtcCwgdylcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gICAgICh3IF49IGgsIGggXj0gdywgdyBePSBoKTtcclxuICAgICAgICAgICAgICAgIC8vIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgY3ZzLndpZHRoID0gdztcclxuICAgICAgICAgICAgICAgIGN2cy5oZWlnaHQgPSBoO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBvcHRzLnByZXNlcnZlSGVhZGVycyB8fCB0aGlzLl9yb3RhdGUyT3JpZW50YWlvbiggY3ZzLCBvcmllbnRhdGlvbiApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVySW1hZ2VUb0NhbnZhcyggY3ZzLCBpbWcsIC14LCAteSwgaXcgKiBzLCBpaCAqIHMgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fYmxvYiA9IG51bGw7ICAgIC8vIOayoeeUqOS6hu+8jOWPr+S7peWIoOaOieS6huOAglxyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RpZmllZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm93bmVyLnRyaWdnZXIoICdjb21wbGV0ZScsICdjcm9wJyApO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIGdldEFzQmxvYjogZnVuY3Rpb24oIHR5cGUgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmxvYiA9IHRoaXMuX2Jsb2IsXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cyA9IHRoaXMub3B0aW9ucyxcclxuICAgICAgICAgICAgICAgICAgICBjYW52YXM7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHR5cGUgPSB0eXBlIHx8IHRoaXMudHlwZTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gYmxvYumcgOimgemHjeaWsOeUn+aIkOOAglxyXG4gICAgICAgICAgICAgICAgaWYgKCB0aGlzLm1vZGlmaWVkIHx8IHRoaXMudHlwZSAhPT0gdHlwZSApIHtcclxuICAgICAgICAgICAgICAgICAgICBjYW52YXMgPSB0aGlzLl9jYW52YXM7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIHR5cGUgPT09ICdpbWFnZS9qcGVnJyApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBibG9iID0gVXRpbC5jYW52YXNUb0RhdGFVcmwoIGNhbnZhcywgdHlwZSwgb3B0cy5xdWFsaXR5ICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBvcHRzLnByZXNlcnZlSGVhZGVycyAmJiB0aGlzLl9tZXRhcyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX21ldGFzLmltYWdlSGVhZCApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvYiA9IFV0aWwuZGF0YVVSTDJBcnJheUJ1ZmZlciggYmxvYiApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvYiA9IFV0aWwudXBkYXRlSW1hZ2VIZWFkKCBibG9iLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tZXRhcy5pbWFnZUhlYWQgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2IgPSBVdGlsLmFycmF5QnVmZmVyVG9CbG9iKCBibG9iLCB0eXBlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmxvYjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2IgPSBVdGlsLmNhbnZhc1RvRGF0YVVybCggY2FudmFzLCB0eXBlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgYmxvYiA9IFV0aWwuZGF0YVVSTDJCbG9iKCBibG9iICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBibG9iO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIGdldEFzRGF0YVVybDogZnVuY3Rpb24oIHR5cGUgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdHlwZSA9IHR5cGUgfHwgdGhpcy50eXBlO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIHR5cGUgPT09ICdpbWFnZS9qcGVnJyApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gVXRpbC5jYW52YXNUb0RhdGFVcmwoIHRoaXMuX2NhbnZhcywgdHlwZSwgb3B0cy5xdWFsaXR5ICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYW52YXMudG9EYXRhVVJMKCB0eXBlICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgZ2V0T3JpZW50YXRpb246IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21ldGFzICYmIHRoaXMuX21ldGFzLmV4aWYgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWV0YXMuZXhpZi5nZXQoJ09yaWVudGF0aW9uJykgfHwgMTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBpbmZvOiBmdW5jdGlvbiggdmFsICkge1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBzZXR0ZXJcclxuICAgICAgICAgICAgICAgIGlmICggdmFsICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2luZm8gPSB2YWw7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIGdldHRlclxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2luZm87XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgbWV0YTogZnVuY3Rpb24oIHZhbCApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gc2V0dGVyXHJcbiAgICAgICAgICAgICAgICBpZiAoIHZhbCApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tZXRhcyA9IHZhbDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gZ2V0dGVyXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fbWV0YXM7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2FudmFzID0gdGhpcy5fY2FudmFzO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faW1nLm9ubG9hZCA9IG51bGw7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmICggY2FudmFzICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2xlYXJSZWN0KCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQgKTtcclxuICAgICAgICAgICAgICAgICAgICBjYW52YXMud2lkdGggPSBjYW52YXMuaGVpZ2h0ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYW52YXMgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDph4rmlL7lhoXlrZjjgILpnZ7luLjph43opoHvvIzlkKbliJnph4rmlL7kuI3kuoZpbWFnZeeahOWGheWtmOOAglxyXG4gICAgICAgICAgICAgICAgdGhpcy5faW1nLnNyYyA9IEJMQU5LO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faW1nID0gdGhpcy5fYmxvYiA9IG51bGw7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgX3Jlc2l6ZTogZnVuY3Rpb24oIGltZywgY3ZzLCB3aWR0aCwgaGVpZ2h0ICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9wdHMgPSB0aGlzLm9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICAgICAgbmF0dXJhbFdpZHRoID0gaW1nLndpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hdHVyYWxIZWlnaHQgPSBpbWcuaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uID0gdGhpcy5nZXRPcmllbnRhdGlvbigpLFxyXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlLCB3LCBoLCB4LCB5O1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyB2YWx1ZXMgdGhhdCByZXF1aXJlIDkwIGRlZ3JlZSByb3RhdGlvblxyXG4gICAgICAgICAgICAgICAgaWYgKCB+WyA1LCA2LCA3LCA4IF0uaW5kZXhPZiggb3JpZW50YXRpb24gKSApIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOS6pOaNondpZHRoLCBoZWlnaHTnmoTlgLzjgIJcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aCBePSBoZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0IF49IHdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoIF49IGhlaWdodDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgc2NhbGUgPSBNYXRoWyBvcHRzLmNyb3AgPyAnbWF4JyA6ICdtaW4nIF0oIHdpZHRoIC8gbmF0dXJhbFdpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQgLyBuYXR1cmFsSGVpZ2h0ICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIOS4jeWFgeiuuOaUvuWkp+OAglxyXG4gICAgICAgICAgICAgICAgb3B0cy5hbGxvd01hZ25pZnkgfHwgKHNjYWxlID0gTWF0aC5taW4oIDEsIHNjYWxlICkpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB3ID0gbmF0dXJhbFdpZHRoICogc2NhbGU7XHJcbiAgICAgICAgICAgICAgICBoID0gbmF0dXJhbEhlaWdodCAqIHNjYWxlO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIG9wdHMuY3JvcCApIHtcclxuICAgICAgICAgICAgICAgICAgICBjdnMud2lkdGggPSB3aWR0aDtcclxuICAgICAgICAgICAgICAgICAgICBjdnMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjdnMud2lkdGggPSB3O1xyXG4gICAgICAgICAgICAgICAgICAgIGN2cy5oZWlnaHQgPSBoO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB4ID0gKGN2cy53aWR0aCAtIHcpIC8gMjtcclxuICAgICAgICAgICAgICAgIHkgPSAoY3ZzLmhlaWdodCAtIGgpIC8gMjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgb3B0cy5wcmVzZXJ2ZUhlYWRlcnMgfHwgdGhpcy5fcm90YXRlMk9yaWVudGFpb24oIGN2cywgb3JpZW50YXRpb24gKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVySW1hZ2VUb0NhbnZhcyggY3ZzLCBpbWcsIHgsIHksIHcsIGggKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBfcm90YXRlMk9yaWVudGFpb246IGZ1bmN0aW9uKCBjYW52YXMsIG9yaWVudGF0aW9uICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gY2FudmFzLndpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCA9IGNhbnZhcy5oZWlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoIG9yaWVudGF0aW9uICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgODpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gd2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKCBvcmllbnRhdGlvbiApIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6ICAgIC8vIGhvcml6b250YWwgZmxpcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgudHJhbnNsYXRlKCB3aWR0aCwgMCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguc2NhbGUoIC0xLCAxICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiAgICAvLyAxODAgcm90YXRlIGxlZnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSggd2lkdGgsIGhlaWdodCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgucm90YXRlKCBNYXRoLlBJICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiAgICAvLyB2ZXJ0aWNhbCBmbGlwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoIDAsIGhlaWdodCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguc2NhbGUoIDEsIC0xICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OiAgICAvLyB2ZXJ0aWNhbCBmbGlwICsgOTAgcm90YXRlIHJpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5yb3RhdGUoIDAuNSAqIE1hdGguUEkgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnNjYWxlKCAxLCAtMSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjogICAgLy8gOTAgcm90YXRlIHJpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5yb3RhdGUoIDAuNSAqIE1hdGguUEkgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSggMCwgLWhlaWdodCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNzogICAgLy8gaG9yaXpvbnRhbCBmbGlwICsgOTAgcm90YXRlIHJpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5yb3RhdGUoIDAuNSAqIE1hdGguUEkgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSggd2lkdGgsIC1oZWlnaHQgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnNjYWxlKCAtMSwgMSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgODogICAgLy8gOTAgcm90YXRlIGxlZnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnJvdGF0ZSggLTAuNSAqIE1hdGguUEkgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSggLXdpZHRoLCAwICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9zdG9taXRhL2lvcy1pbWFnZWZpbGUtbWVnYXBpeGVsL1xyXG4gICAgICAgICAgICAvLyBibG9iL21hc3Rlci9zcmMvbWVnYXBpeC1pbWFnZS5qc1xyXG4gICAgICAgICAgICBfcmVuZGVySW1hZ2VUb0NhbnZhczogKGZ1bmN0aW9uKCkge1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzkuI3mmK9pb3MsIOS4jemcgOimgei/meS5iOWkjeadgu+8gVxyXG4gICAgICAgICAgICAgICAgaWYgKCAhQmFzZS5vcy5pb3MgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCBjYW52YXMgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcmdzID0gQmFzZS5zbGljZSggYXJndW1lbnRzLCAxICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlLmFwcGx5KCBjdHgsIGFyZ3MgKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICAgICAqIERldGVjdGluZyB2ZXJ0aWNhbCBzcXVhc2ggaW4gbG9hZGVkIGltYWdlLlxyXG4gICAgICAgICAgICAgICAgICogRml4ZXMgYSBidWcgd2hpY2ggc3F1YXNoIGltYWdlIHZlcnRpY2FsbHkgd2hpbGUgZHJhd2luZyBpbnRvXHJcbiAgICAgICAgICAgICAgICAgKiBjYW52YXMgZm9yIHNvbWUgaW1hZ2VzLlxyXG4gICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBkZXRlY3RWZXJ0aWNhbFNxdWFzaCggaW1nLCBpdywgaWggKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3kgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleSA9IGloLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBweSA9IGloLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLCBhbHBoYSwgcmF0aW87XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IGloO1xyXG4gICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoIGltZywgMCwgMCApO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKCAwLCAwLCAxLCBpaCApLmRhdGE7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBzZWFyY2ggaW1hZ2UgZWRnZSBwaXhlbCBwb3NpdGlvbiBpbiBjYXNlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaXQgaXMgc3F1YXNoZWQgdmVydGljYWxseS5cclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoIHB5ID4gc3kgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFscGhhID0gZGF0YVsgKHB5IC0gMSkgKiA0ICsgMyBdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggYWxwaGEgPT09IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleSA9IHB5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3kgPSBweTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHB5ID0gKGV5ICsgc3kpID4+IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgcmF0aW8gPSAocHkgLyBpaCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChyYXRpbyA9PT0gMCkgPyAxIDogcmF0aW87XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIGZpeCBpZTcgYnVnXHJcbiAgICAgICAgICAgICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzExOTI5MDk5L1xyXG4gICAgICAgICAgICAgICAgLy8gaHRtbDUtY2FudmFzLWRyYXdpbWFnZS1yYXRpby1idWctaW9zXHJcbiAgICAgICAgICAgICAgICBpZiAoIEJhc2Uub3MuaW9zID49IDcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCBjYW52YXMsIGltZywgeCwgeSwgdywgaCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl3ID0gaW1nLm5hdHVyYWxXaWR0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGloID0gaW1nLm5hdHVyYWxIZWlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0U3F1YXNoUmF0aW8gPSBkZXRlY3RWZXJ0aWNhbFNxdWFzaCggaW1nLCBpdywgaWggKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FudmFzLmdldENvbnRleHQoJzJkJykuZHJhd0ltYWdlKCBpbWcsIDAsIDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXcgKiB2ZXJ0U3F1YXNoUmF0aW8sIGloICogdmVydFNxdWFzaFJhdGlvLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHgsIHksIHcsIGggKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICAgICAqIERldGVjdCBzdWJzYW1wbGluZyBpbiBsb2FkZWQgaW1hZ2UuXHJcbiAgICAgICAgICAgICAgICAgKiBJbiBpT1MsIGxhcmdlciBpbWFnZXMgdGhhbiAyTSBwaXhlbHMgbWF5IGJlXHJcbiAgICAgICAgICAgICAgICAgKiBzdWJzYW1wbGVkIGluIHJlbmRlcmluZy5cclxuICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZGV0ZWN0U3Vic2FtcGxpbmcoIGltZyApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaXcgPSBpbWcubmF0dXJhbFdpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpaCA9IGltZy5uYXR1cmFsSGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMsIGN0eDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHN1YnNhbXBsaW5nIG1heSBoYXBwZW4gb3Zlcm1lZ2FwaXhlbCBpbWFnZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggaXcgKiBpaCA+IDEwMjQgKiAxMDI0ICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gY2FudmFzLmhlaWdodCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKCBpbWcsIC1pdyArIDEsIDAgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzdWJzYW1wbGVkIGltYWdlIGJlY29tZXMgaGFsZiBzbWFsbGVyIGluIHJlbmRlcmluZyBzaXplLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayBhbHBoYSBjaGFubmVsIHZhbHVlIHRvIGNvbmZpcm0gaW1hZ2UgaXMgY292ZXJpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWRnZSBwaXhlbCBvciBub3QuIGlmIGFscGhhIHZhbHVlIGlzIDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW1hZ2UgaXMgbm90IGNvdmVyaW5nLCBoZW5jZSBzdWJzYW1wbGVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3R4LmdldEltYWdlRGF0YSggMCwgMCwgMSwgMSApLmRhdGFbIDMgXSA9PT0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiggY2FudmFzLCBpbWcsIHgsIHksIHdpZHRoLCBoZWlnaHQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl3ID0gaW1nLm5hdHVyYWxXaWR0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWggPSBpbWcubmF0dXJhbEhlaWdodCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNhbXBsZWQgPSBkZXRlY3RTdWJzYW1wbGluZyggaW1nICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvU3F1YXNoID0gdGhpcy50eXBlID09PSAnaW1hZ2UvanBlZycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQgPSAxMDI0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzeSA9IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGR5ID0gMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG1wQ2FudmFzLCB0bXBDdHgsIHZlcnRTcXVhc2hSYXRpbywgZHcsIGRoLCBzeCwgZHg7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIHN1YnNhbXBsZWQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl3IC89IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGloIC89IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LnNhdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB0bXBDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgICAgICAgICAgICAgICAgICB0bXBDYW52YXMud2lkdGggPSB0bXBDYW52YXMuaGVpZ2h0ID0gZDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHRtcEN0eCA9IHRtcENhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZlcnRTcXVhc2hSYXRpbyA9IGRvU3F1YXNoID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldGVjdFZlcnRpY2FsU3F1YXNoKCBpbWcsIGl3LCBpaCApIDogMTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGR3ID0gTWF0aC5jZWlsKCBkICogd2lkdGggLyBpdyApO1xyXG4gICAgICAgICAgICAgICAgICAgIGRoID0gTWF0aC5jZWlsKCBkICogaGVpZ2h0IC8gaWggLyB2ZXJ0U3F1YXNoUmF0aW8gKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICggc3kgPCBpaCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3ggPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkeCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICggc3ggPCBpdyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcEN0eC5jbGVhclJlY3QoIDAsIDAsIGQsIGQgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcEN0eC5kcmF3SW1hZ2UoIGltZywgLXN4LCAtc3kgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoIHRtcENhbnZhcywgMCwgMCwgZCwgZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeCArIGR4LCB5ICsgZHksIGR3LCBkaCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ggKz0gZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR4ICs9IGR3O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN5ICs9IGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGR5ICs9IGRoO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRtcENhbnZhcyA9IHRtcEN0eCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KSgpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IFRyYW5zcG9ydFxyXG4gICAgICogQHRvZG8g5pSv5oyBY2h1bmtlZOS8oOi+k++8jOS8mOWKv++8mlxyXG4gICAgICog5Y+v5Lul5bCG5aSn5paH5Lu25YiG5oiQ5bCP5Z2X77yM5oyo5Liq5Lyg6L6T77yM5Y+v5Lul5o+Q6auY5aSn5paH5Lu25oiQ5Yqf546H77yM5b2T5aSx6LSl55qE5pe25YCZ77yM5Lmf5Y+q6ZyA6KaB6YeN5Lyg6YKj5bCP6YOo5YiG77yMXHJcbiAgICAgKiDogIzkuI3pnIDopoHph43lpLTlho3kvKDkuIDmrKHjgILlj6blpJbmlq3ngrnnu63kvKDkuZ/pnIDopoHnlKhjaHVua2Vk5pa55byP44CCXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgncnVudGltZS9odG1sNS90cmFuc3BvcnQnLFtcclxuICAgICAgICAnYmFzZScsXHJcbiAgICAgICAgJ3J1bnRpbWUvaHRtbDUvcnVudGltZSdcclxuICAgIF0sIGZ1bmN0aW9uKCBCYXNlLCBIdG1sNVJ1bnRpbWUgKSB7XHJcbiAgICBcclxuICAgICAgICB2YXIgbm9vcCA9IEJhc2Uubm9vcCxcclxuICAgICAgICAgICAgJCA9IEJhc2UuJDtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBIdG1sNVJ1bnRpbWUucmVnaXN0ZXIoICdUcmFuc3BvcnQnLCB7XHJcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc3RhdHVzID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Jlc3BvbnNlID0gbnVsbDtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBzZW5kOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvd25lciA9IHRoaXMub3duZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cyA9IHRoaXMub3B0aW9ucyxcclxuICAgICAgICAgICAgICAgICAgICB4aHIgPSB0aGlzLl9pbml0QWpheCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGJsb2IgPSBvd25lci5fYmxvYixcclxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXIgPSBvcHRzLnNlcnZlcixcclxuICAgICAgICAgICAgICAgICAgICBmb3JtRGF0YSwgYmluYXJ5LCBmcjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCBvcHRzLnNlbmRBc0JpbmFyeSApIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXIgKz0gKC9cXD8vLnRlc3QoIHNlcnZlciApID8gJyYnIDogJz8nKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLnBhcmFtKCBvd25lci5fZm9ybURhdGEgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGJpbmFyeSA9IGJsb2IuZ2V0U291cmNlKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKCBvd25lci5fZm9ybURhdGEsIGZ1bmN0aW9uKCBrLCB2ICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoIGssIHYgKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCggb3B0cy5maWxlVmFsLCBibG9iLmdldFNvdXJjZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0cy5maWxlbmFtZSB8fCBvd25lci5fZm9ybURhdGEubmFtZSB8fCAnJyApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIG9wdHMud2l0aENyZWRlbnRpYWxzICYmICd3aXRoQ3JlZGVudGlhbHMnIGluIHhociApIHtcclxuICAgICAgICAgICAgICAgICAgICB4aHIub3Blbiggb3B0cy5tZXRob2QsIHNlcnZlciwgdHJ1ZSApO1xyXG4gICAgICAgICAgICAgICAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB4aHIub3Blbiggb3B0cy5tZXRob2QsIHNlcnZlciApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRSZXF1ZXN0SGVhZGVyKCB4aHIsIG9wdHMuaGVhZGVycyApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIGJpbmFyeSApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDlvLrliLborr7nva7miJAgY29udGVudC10eXBlIOS4uuaWh+S7tua1geOAglxyXG4gICAgICAgICAgICAgICAgICAgIHhoci5vdmVycmlkZU1pbWVUeXBlICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIub3ZlcnJpZGVNaW1lVHlwZSgnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJyk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBhbmRyb2lk55u05o6l5Y+R6YCBYmxvYuS8muWvvOiHtOacjeWKoeerr+aOpeaUtuWIsOeahOaYr+epuuaWh+S7tuOAglxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGJ1Z+ivpuaDheOAglxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvYW5kcm9pZC9pc3N1ZXMvZGV0YWlsP2lkPTM5ODgyXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5omA5Lul5YWI55SoZmlsZVJlYWRlcuivu+WPluWHuuadpeWGjemAmui/h2FycmF5YnVmZmVy55qE5pa55byP5Y+R6YCB44CCXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBCYXNlLm9zLmFuZHJvaWQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhoci5zZW5kKCB0aGlzLnJlc3VsdCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnIgPSBmci5vbmxvYWQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyLnJlYWRBc0FycmF5QnVmZmVyKCBiaW5hcnkgKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4aHIuc2VuZCggYmluYXJ5ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB4aHIuc2VuZCggZm9ybURhdGEgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBnZXRSZXNwb25zZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVzcG9uc2U7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgZ2V0UmVzcG9uc2VBc0pzb246IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3BhcnNlSnNvbiggdGhpcy5fcmVzcG9uc2UgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBnZXRTdGF0dXM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXR1cztcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBhYm9ydDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeGhyID0gdGhpcy5feGhyO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIHhociApIHtcclxuICAgICAgICAgICAgICAgICAgICB4aHIudXBsb2FkLm9ucHJvZ3Jlc3MgPSBub29wO1xyXG4gICAgICAgICAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBub29wO1xyXG4gICAgICAgICAgICAgICAgICAgIHhoci5hYm9ydCgpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5feGhyID0geGhyID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWJvcnQoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBfaW5pdEFqYXg6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKSxcclxuICAgICAgICAgICAgICAgICAgICBvcHRzID0gdGhpcy5vcHRpb25zO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIG9wdHMud2l0aENyZWRlbnRpYWxzICYmICEoJ3dpdGhDcmVkZW50aWFscycgaW4geGhyKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YgWERvbWFpblJlcXVlc3QgIT09ICd1bmRlZmluZWQnICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHhociA9IG5ldyBYRG9tYWluUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB4aHIudXBsb2FkLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbiggZSApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGVyY2VudGFnZSA9IDA7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGUubGVuZ3RoQ29tcHV0YWJsZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGVyY2VudGFnZSA9IGUubG9hZGVkIC8gZS50b3RhbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWUudHJpZ2dlciggJ3Byb2dyZXNzJywgcGVyY2VudGFnZSApO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB4aHIucmVhZHlTdGF0ZSAhPT0gNCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHhoci51cGxvYWQub25wcm9ncmVzcyA9IG5vb3A7XHJcbiAgICAgICAgICAgICAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG5vb3A7XHJcbiAgICAgICAgICAgICAgICAgICAgbWUuX3hociA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgbWUuX3N0YXR1cyA9IHhoci5zdGF0dXM7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIHhoci5zdGF0dXMgPj0gMjAwICYmIHhoci5zdGF0dXMgPCAzMDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lLl9yZXNwb25zZSA9IHhoci5yZXNwb25zZVRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtZS50cmlnZ2VyKCdsb2FkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggeGhyLnN0YXR1cyA+PSA1MDAgJiYgeGhyLnN0YXR1cyA8IDYwMCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWUuX3Jlc3BvbnNlID0geGhyLnJlc3BvbnNlVGV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lLnRyaWdnZXIoICdlcnJvcicsICdzZXJ2ZXInICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWUudHJpZ2dlciggJ2Vycm9yJywgbWUuX3N0YXR1cyA/ICdodHRwJyA6ICdhYm9ydCcgKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG1lLl94aHIgPSB4aHI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geGhyO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIF9zZXRSZXF1ZXN0SGVhZGVyOiBmdW5jdGlvbiggeGhyLCBoZWFkZXJzICkge1xyXG4gICAgICAgICAgICAgICAgJC5lYWNoKCBoZWFkZXJzLCBmdW5jdGlvbigga2V5LCB2YWwgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoIGtleSwgdmFsICk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBfcGFyc2VKc29uOiBmdW5jdGlvbiggc3RyICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGpzb247XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAganNvbiA9IEpTT04ucGFyc2UoIHN0ciApO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoIGV4ICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGpzb24gPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGpzb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3ICBUcmFuc3BvcnQgZmxhc2jlrp7njrBcclxuICAgICAqL1xyXG4gICAgZGVmaW5lKCdydW50aW1lL2h0bWw1L21kNScsW1xyXG4gICAgICAgICdydW50aW1lL2h0bWw1L3J1bnRpbWUnXHJcbiAgICBdLCBmdW5jdGlvbiggRmxhc2hSdW50aW1lICkge1xyXG4gICAgXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBGYXN0ZXN0IG1kNSBpbXBsZW1lbnRhdGlvbiBhcm91bmQgKEpLTSBtZDUpXHJcbiAgICAgICAgICogQ3JlZGl0czogSm9zZXBoIE15ZXJzXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc2VlIGh0dHA6Ly93d3cubXllcnNkYWlseS5vcmcvam9zZXBoL2phdmFzY3JpcHQvbWQ1LXRleHQuaHRtbFxyXG4gICAgICAgICAqIEBzZWUgaHR0cDovL2pzcGVyZi5jb20vbWQ1LXNob290b3V0LzdcclxuICAgICAgICAgKi9cclxuICAgIFxyXG4gICAgICAgIC8qIHRoaXMgZnVuY3Rpb24gaXMgbXVjaCBmYXN0ZXIsXHJcbiAgICAgICAgICBzbyBpZiBwb3NzaWJsZSB3ZSB1c2UgaXQuIFNvbWUgSUVzXHJcbiAgICAgICAgICBhcmUgdGhlIG9ubHkgb25lcyBJIGtub3cgb2YgdGhhdFxyXG4gICAgICAgICAgbmVlZCB0aGUgaWRpb3RpYyBzZWNvbmQgZnVuY3Rpb24sXHJcbiAgICAgICAgICBnZW5lcmF0ZWQgYnkgYW4gaWYgY2xhdXNlLiAgKi9cclxuICAgICAgICB2YXIgYWRkMzIgPSBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICByZXR1cm4gKGEgKyBiKSAmIDB4RkZGRkZGRkY7XHJcbiAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgIGNtbiA9IGZ1bmN0aW9uIChxLCBhLCBiLCB4LCBzLCB0KSB7XHJcbiAgICAgICAgICAgIGEgPSBhZGQzMihhZGQzMihhLCBxKSwgYWRkMzIoeCwgdCkpO1xyXG4gICAgICAgICAgICByZXR1cm4gYWRkMzIoKGEgPDwgcykgfCAoYSA+Pj4gKDMyIC0gcykpLCBiKTtcclxuICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgZmYgPSBmdW5jdGlvbiAoYSwgYiwgYywgZCwgeCwgcywgdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gY21uKChiICYgYykgfCAoKH5iKSAmIGQpLCBhLCBiLCB4LCBzLCB0KTtcclxuICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgZ2cgPSBmdW5jdGlvbiAoYSwgYiwgYywgZCwgeCwgcywgdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gY21uKChiICYgZCkgfCAoYyAmICh+ZCkpLCBhLCBiLCB4LCBzLCB0KTtcclxuICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgaGggPSBmdW5jdGlvbiAoYSwgYiwgYywgZCwgeCwgcywgdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gY21uKGIgXiBjIF4gZCwgYSwgYiwgeCwgcywgdCk7XHJcbiAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgIGlpID0gZnVuY3Rpb24gKGEsIGIsIGMsIGQsIHgsIHMsIHQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNtbihjIF4gKGIgfCAofmQpKSwgYSwgYiwgeCwgcywgdCk7XHJcbiAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgIG1kNWN5Y2xlID0gZnVuY3Rpb24gKHgsIGspIHtcclxuICAgICAgICAgICAgdmFyIGEgPSB4WzBdLFxyXG4gICAgICAgICAgICAgICAgYiA9IHhbMV0sXHJcbiAgICAgICAgICAgICAgICBjID0geFsyXSxcclxuICAgICAgICAgICAgICAgIGQgPSB4WzNdO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGEgPSBmZihhLCBiLCBjLCBkLCBrWzBdLCA3LCAtNjgwODc2OTM2KTtcclxuICAgICAgICAgICAgZCA9IGZmKGQsIGEsIGIsIGMsIGtbMV0sIDEyLCAtMzg5NTY0NTg2KTtcclxuICAgICAgICAgICAgYyA9IGZmKGMsIGQsIGEsIGIsIGtbMl0sIDE3LCA2MDYxMDU4MTkpO1xyXG4gICAgICAgICAgICBiID0gZmYoYiwgYywgZCwgYSwga1szXSwgMjIsIC0xMDQ0NTI1MzMwKTtcclxuICAgICAgICAgICAgYSA9IGZmKGEsIGIsIGMsIGQsIGtbNF0sIDcsIC0xNzY0MTg4OTcpO1xyXG4gICAgICAgICAgICBkID0gZmYoZCwgYSwgYiwgYywga1s1XSwgMTIsIDEyMDAwODA0MjYpO1xyXG4gICAgICAgICAgICBjID0gZmYoYywgZCwgYSwgYiwga1s2XSwgMTcsIC0xNDczMjMxMzQxKTtcclxuICAgICAgICAgICAgYiA9IGZmKGIsIGMsIGQsIGEsIGtbN10sIDIyLCAtNDU3MDU5ODMpO1xyXG4gICAgICAgICAgICBhID0gZmYoYSwgYiwgYywgZCwga1s4XSwgNywgMTc3MDAzNTQxNik7XHJcbiAgICAgICAgICAgIGQgPSBmZihkLCBhLCBiLCBjLCBrWzldLCAxMiwgLTE5NTg0MTQ0MTcpO1xyXG4gICAgICAgICAgICBjID0gZmYoYywgZCwgYSwgYiwga1sxMF0sIDE3LCAtNDIwNjMpO1xyXG4gICAgICAgICAgICBiID0gZmYoYiwgYywgZCwgYSwga1sxMV0sIDIyLCAtMTk5MDQwNDE2Mik7XHJcbiAgICAgICAgICAgIGEgPSBmZihhLCBiLCBjLCBkLCBrWzEyXSwgNywgMTgwNDYwMzY4Mik7XHJcbiAgICAgICAgICAgIGQgPSBmZihkLCBhLCBiLCBjLCBrWzEzXSwgMTIsIC00MDM0MTEwMSk7XHJcbiAgICAgICAgICAgIGMgPSBmZihjLCBkLCBhLCBiLCBrWzE0XSwgMTcsIC0xNTAyMDAyMjkwKTtcclxuICAgICAgICAgICAgYiA9IGZmKGIsIGMsIGQsIGEsIGtbMTVdLCAyMiwgMTIzNjUzNTMyOSk7XHJcbiAgICBcclxuICAgICAgICAgICAgYSA9IGdnKGEsIGIsIGMsIGQsIGtbMV0sIDUsIC0xNjU3OTY1MTApO1xyXG4gICAgICAgICAgICBkID0gZ2coZCwgYSwgYiwgYywga1s2XSwgOSwgLTEwNjk1MDE2MzIpO1xyXG4gICAgICAgICAgICBjID0gZ2coYywgZCwgYSwgYiwga1sxMV0sIDE0LCA2NDM3MTc3MTMpO1xyXG4gICAgICAgICAgICBiID0gZ2coYiwgYywgZCwgYSwga1swXSwgMjAsIC0zNzM4OTczMDIpO1xyXG4gICAgICAgICAgICBhID0gZ2coYSwgYiwgYywgZCwga1s1XSwgNSwgLTcwMTU1ODY5MSk7XHJcbiAgICAgICAgICAgIGQgPSBnZyhkLCBhLCBiLCBjLCBrWzEwXSwgOSwgMzgwMTYwODMpO1xyXG4gICAgICAgICAgICBjID0gZ2coYywgZCwgYSwgYiwga1sxNV0sIDE0LCAtNjYwNDc4MzM1KTtcclxuICAgICAgICAgICAgYiA9IGdnKGIsIGMsIGQsIGEsIGtbNF0sIDIwLCAtNDA1NTM3ODQ4KTtcclxuICAgICAgICAgICAgYSA9IGdnKGEsIGIsIGMsIGQsIGtbOV0sIDUsIDU2ODQ0NjQzOCk7XHJcbiAgICAgICAgICAgIGQgPSBnZyhkLCBhLCBiLCBjLCBrWzE0XSwgOSwgLTEwMTk4MDM2OTApO1xyXG4gICAgICAgICAgICBjID0gZ2coYywgZCwgYSwgYiwga1szXSwgMTQsIC0xODczNjM5NjEpO1xyXG4gICAgICAgICAgICBiID0gZ2coYiwgYywgZCwgYSwga1s4XSwgMjAsIDExNjM1MzE1MDEpO1xyXG4gICAgICAgICAgICBhID0gZ2coYSwgYiwgYywgZCwga1sxM10sIDUsIC0xNDQ0NjgxNDY3KTtcclxuICAgICAgICAgICAgZCA9IGdnKGQsIGEsIGIsIGMsIGtbMl0sIDksIC01MTQwMzc4NCk7XHJcbiAgICAgICAgICAgIGMgPSBnZyhjLCBkLCBhLCBiLCBrWzddLCAxNCwgMTczNTMyODQ3Myk7XHJcbiAgICAgICAgICAgIGIgPSBnZyhiLCBjLCBkLCBhLCBrWzEyXSwgMjAsIC0xOTI2NjA3NzM0KTtcclxuICAgIFxyXG4gICAgICAgICAgICBhID0gaGgoYSwgYiwgYywgZCwga1s1XSwgNCwgLTM3ODU1OCk7XHJcbiAgICAgICAgICAgIGQgPSBoaChkLCBhLCBiLCBjLCBrWzhdLCAxMSwgLTIwMjI1NzQ0NjMpO1xyXG4gICAgICAgICAgICBjID0gaGgoYywgZCwgYSwgYiwga1sxMV0sIDE2LCAxODM5MDMwNTYyKTtcclxuICAgICAgICAgICAgYiA9IGhoKGIsIGMsIGQsIGEsIGtbMTRdLCAyMywgLTM1MzA5NTU2KTtcclxuICAgICAgICAgICAgYSA9IGhoKGEsIGIsIGMsIGQsIGtbMV0sIDQsIC0xNTMwOTkyMDYwKTtcclxuICAgICAgICAgICAgZCA9IGhoKGQsIGEsIGIsIGMsIGtbNF0sIDExLCAxMjcyODkzMzUzKTtcclxuICAgICAgICAgICAgYyA9IGhoKGMsIGQsIGEsIGIsIGtbN10sIDE2LCAtMTU1NDk3NjMyKTtcclxuICAgICAgICAgICAgYiA9IGhoKGIsIGMsIGQsIGEsIGtbMTBdLCAyMywgLTEwOTQ3MzA2NDApO1xyXG4gICAgICAgICAgICBhID0gaGgoYSwgYiwgYywgZCwga1sxM10sIDQsIDY4MTI3OTE3NCk7XHJcbiAgICAgICAgICAgIGQgPSBoaChkLCBhLCBiLCBjLCBrWzBdLCAxMSwgLTM1ODUzNzIyMik7XHJcbiAgICAgICAgICAgIGMgPSBoaChjLCBkLCBhLCBiLCBrWzNdLCAxNiwgLTcyMjUyMTk3OSk7XHJcbiAgICAgICAgICAgIGIgPSBoaChiLCBjLCBkLCBhLCBrWzZdLCAyMywgNzYwMjkxODkpO1xyXG4gICAgICAgICAgICBhID0gaGgoYSwgYiwgYywgZCwga1s5XSwgNCwgLTY0MDM2NDQ4Nyk7XHJcbiAgICAgICAgICAgIGQgPSBoaChkLCBhLCBiLCBjLCBrWzEyXSwgMTEsIC00MjE4MTU4MzUpO1xyXG4gICAgICAgICAgICBjID0gaGgoYywgZCwgYSwgYiwga1sxNV0sIDE2LCA1MzA3NDI1MjApO1xyXG4gICAgICAgICAgICBiID0gaGgoYiwgYywgZCwgYSwga1syXSwgMjMsIC05OTUzMzg2NTEpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGEgPSBpaShhLCBiLCBjLCBkLCBrWzBdLCA2LCAtMTk4NjMwODQ0KTtcclxuICAgICAgICAgICAgZCA9IGlpKGQsIGEsIGIsIGMsIGtbN10sIDEwLCAxMTI2ODkxNDE1KTtcclxuICAgICAgICAgICAgYyA9IGlpKGMsIGQsIGEsIGIsIGtbMTRdLCAxNSwgLTE0MTYzNTQ5MDUpO1xyXG4gICAgICAgICAgICBiID0gaWkoYiwgYywgZCwgYSwga1s1XSwgMjEsIC01NzQzNDA1NSk7XHJcbiAgICAgICAgICAgIGEgPSBpaShhLCBiLCBjLCBkLCBrWzEyXSwgNiwgMTcwMDQ4NTU3MSk7XHJcbiAgICAgICAgICAgIGQgPSBpaShkLCBhLCBiLCBjLCBrWzNdLCAxMCwgLTE4OTQ5ODY2MDYpO1xyXG4gICAgICAgICAgICBjID0gaWkoYywgZCwgYSwgYiwga1sxMF0sIDE1LCAtMTA1MTUyMyk7XHJcbiAgICAgICAgICAgIGIgPSBpaShiLCBjLCBkLCBhLCBrWzFdLCAyMSwgLTIwNTQ5MjI3OTkpO1xyXG4gICAgICAgICAgICBhID0gaWkoYSwgYiwgYywgZCwga1s4XSwgNiwgMTg3MzMxMzM1OSk7XHJcbiAgICAgICAgICAgIGQgPSBpaShkLCBhLCBiLCBjLCBrWzE1XSwgMTAsIC0zMDYxMTc0NCk7XHJcbiAgICAgICAgICAgIGMgPSBpaShjLCBkLCBhLCBiLCBrWzZdLCAxNSwgLTE1NjAxOTgzODApO1xyXG4gICAgICAgICAgICBiID0gaWkoYiwgYywgZCwgYSwga1sxM10sIDIxLCAxMzA5MTUxNjQ5KTtcclxuICAgICAgICAgICAgYSA9IGlpKGEsIGIsIGMsIGQsIGtbNF0sIDYsIC0xNDU1MjMwNzApO1xyXG4gICAgICAgICAgICBkID0gaWkoZCwgYSwgYiwgYywga1sxMV0sIDEwLCAtMTEyMDIxMDM3OSk7XHJcbiAgICAgICAgICAgIGMgPSBpaShjLCBkLCBhLCBiLCBrWzJdLCAxNSwgNzE4Nzg3MjU5KTtcclxuICAgICAgICAgICAgYiA9IGlpKGIsIGMsIGQsIGEsIGtbOV0sIDIxLCAtMzQzNDg1NTUxKTtcclxuICAgIFxyXG4gICAgICAgICAgICB4WzBdID0gYWRkMzIoYSwgeFswXSk7XHJcbiAgICAgICAgICAgIHhbMV0gPSBhZGQzMihiLCB4WzFdKTtcclxuICAgICAgICAgICAgeFsyXSA9IGFkZDMyKGMsIHhbMl0pO1xyXG4gICAgICAgICAgICB4WzNdID0gYWRkMzIoZCwgeFszXSk7XHJcbiAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgIC8qIHRoZXJlIG5lZWRzIHRvIGJlIHN1cHBvcnQgZm9yIFVuaWNvZGUgaGVyZSxcclxuICAgICAgICAgICAqIHVubGVzcyB3ZSBwcmV0ZW5kIHRoYXQgd2UgY2FuIHJlZGVmaW5lIHRoZSBNRC01XHJcbiAgICAgICAgICAgKiBhbGdvcml0aG0gZm9yIG11bHRpLWJ5dGUgY2hhcmFjdGVycyAocGVyaGFwc1xyXG4gICAgICAgICAgICogYnkgYWRkaW5nIGV2ZXJ5IGZvdXIgMTYtYml0IGNoYXJhY3RlcnMgYW5kXHJcbiAgICAgICAgICAgKiBzaG9ydGVuaW5nIHRoZSBzdW0gdG8gMzIgYml0cykuIE90aGVyd2lzZVxyXG4gICAgICAgICAgICogSSBzdWdnZXN0IHBlcmZvcm1pbmcgTUQtNSBhcyBpZiBldmVyeSBjaGFyYWN0ZXJcclxuICAgICAgICAgICAqIHdhcyB0d28gYnl0ZXMtLWUuZy4sIDAwNDAgMDAyNSA9IEAlLS1idXQgdGhlblxyXG4gICAgICAgICAgICogaG93IHdpbGwgYW4gb3JkaW5hcnkgTUQtNSBzdW0gYmUgbWF0Y2hlZD9cclxuICAgICAgICAgICAqIFRoZXJlIGlzIG5vIHdheSB0byBzdGFuZGFyZGl6ZSB0ZXh0IHRvIHNvbWV0aGluZ1xyXG4gICAgICAgICAgICogbGlrZSBVVEYtOCBiZWZvcmUgdHJhbnNmb3JtYXRpb247IHNwZWVkIGNvc3QgaXNcclxuICAgICAgICAgICAqIHV0dGVybHkgcHJvaGliaXRpdmUuIFRoZSBKYXZhU2NyaXB0IHN0YW5kYXJkXHJcbiAgICAgICAgICAgKiBpdHNlbGYgbmVlZHMgdG8gbG9vayBhdCB0aGlzOiBpdCBzaG91bGQgc3RhcnRcclxuICAgICAgICAgICAqIHByb3ZpZGluZyBhY2Nlc3MgdG8gc3RyaW5ncyBhcyBwcmVmb3JtZWQgVVRGLThcclxuICAgICAgICAgICAqIDgtYml0IHVuc2lnbmVkIHZhbHVlIGFycmF5cy5cclxuICAgICAgICAgICAqL1xyXG4gICAgICAgIG1kNWJsayA9IGZ1bmN0aW9uIChzKSB7XHJcbiAgICAgICAgICAgIHZhciBtZDVibGtzID0gW10sXHJcbiAgICAgICAgICAgICAgICBpOyAvKiBBbmR5IEtpbmcgc2FpZCBkbyBpdCB0aGlzIHdheS4gKi9cclxuICAgIFxyXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgNjQ7IGkgKz0gNCkge1xyXG4gICAgICAgICAgICAgICAgbWQ1Ymxrc1tpID4+IDJdID0gcy5jaGFyQ29kZUF0KGkpICsgKHMuY2hhckNvZGVBdChpICsgMSkgPDwgOCkgKyAocy5jaGFyQ29kZUF0KGkgKyAyKSA8PCAxNikgKyAocy5jaGFyQ29kZUF0KGkgKyAzKSA8PCAyNCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG1kNWJsa3M7XHJcbiAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgIG1kNWJsa19hcnJheSA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHZhciBtZDVibGtzID0gW10sXHJcbiAgICAgICAgICAgICAgICBpOyAvKiBBbmR5IEtpbmcgc2FpZCBkbyBpdCB0aGlzIHdheS4gKi9cclxuICAgIFxyXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgNjQ7IGkgKz0gNCkge1xyXG4gICAgICAgICAgICAgICAgbWQ1Ymxrc1tpID4+IDJdID0gYVtpXSArIChhW2kgKyAxXSA8PCA4KSArIChhW2kgKyAyXSA8PCAxNikgKyAoYVtpICsgM10gPDwgMjQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBtZDVibGtzO1xyXG4gICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICBtZDUxID0gZnVuY3Rpb24gKHMpIHtcclxuICAgICAgICAgICAgdmFyIG4gPSBzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIHN0YXRlID0gWzE3MzI1ODQxOTMsIC0yNzE3MzM4NzksIC0xNzMyNTg0MTk0LCAyNzE3MzM4NzhdLFxyXG4gICAgICAgICAgICAgICAgaSxcclxuICAgICAgICAgICAgICAgIGxlbmd0aCxcclxuICAgICAgICAgICAgICAgIHRhaWwsXHJcbiAgICAgICAgICAgICAgICB0bXAsXHJcbiAgICAgICAgICAgICAgICBsbyxcclxuICAgICAgICAgICAgICAgIGhpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGZvciAoaSA9IDY0OyBpIDw9IG47IGkgKz0gNjQpIHtcclxuICAgICAgICAgICAgICAgIG1kNWN5Y2xlKHN0YXRlLCBtZDVibGsocy5zdWJzdHJpbmcoaSAtIDY0LCBpKSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHMgPSBzLnN1YnN0cmluZyhpIC0gNjQpO1xyXG4gICAgICAgICAgICBsZW5ndGggPSBzLmxlbmd0aDtcclxuICAgICAgICAgICAgdGFpbCA9IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXTtcclxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgICAgICB0YWlsW2kgPj4gMl0gfD0gcy5jaGFyQ29kZUF0KGkpIDw8ICgoaSAlIDQpIDw8IDMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRhaWxbaSA+PiAyXSB8PSAweDgwIDw8ICgoaSAlIDQpIDw8IDMpO1xyXG4gICAgICAgICAgICBpZiAoaSA+IDU1KSB7XHJcbiAgICAgICAgICAgICAgICBtZDVjeWNsZShzdGF0ZSwgdGFpbCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgMTY7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhaWxbaV0gPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQmV3YXJlIHRoYXQgdGhlIGZpbmFsIGxlbmd0aCBtaWdodCBub3QgZml0IGluIDMyIGJpdHMgc28gd2UgdGFrZSBjYXJlIG9mIHRoYXRcclxuICAgICAgICAgICAgdG1wID0gbiAqIDg7XHJcbiAgICAgICAgICAgIHRtcCA9IHRtcC50b1N0cmluZygxNikubWF0Y2goLyguKj8pKC57MCw4fSkkLyk7XHJcbiAgICAgICAgICAgIGxvID0gcGFyc2VJbnQodG1wWzJdLCAxNik7XHJcbiAgICAgICAgICAgIGhpID0gcGFyc2VJbnQodG1wWzFdLCAxNikgfHwgMDtcclxuICAgIFxyXG4gICAgICAgICAgICB0YWlsWzE0XSA9IGxvO1xyXG4gICAgICAgICAgICB0YWlsWzE1XSA9IGhpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIG1kNWN5Y2xlKHN0YXRlLCB0YWlsKTtcclxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xyXG4gICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICBtZDUxX2FycmF5ID0gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgdmFyIG4gPSBhLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIHN0YXRlID0gWzE3MzI1ODQxOTMsIC0yNzE3MzM4NzksIC0xNzMyNTg0MTk0LCAyNzE3MzM4NzhdLFxyXG4gICAgICAgICAgICAgICAgaSxcclxuICAgICAgICAgICAgICAgIGxlbmd0aCxcclxuICAgICAgICAgICAgICAgIHRhaWwsXHJcbiAgICAgICAgICAgICAgICB0bXAsXHJcbiAgICAgICAgICAgICAgICBsbyxcclxuICAgICAgICAgICAgICAgIGhpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGZvciAoaSA9IDY0OyBpIDw9IG47IGkgKz0gNjQpIHtcclxuICAgICAgICAgICAgICAgIG1kNWN5Y2xlKHN0YXRlLCBtZDVibGtfYXJyYXkoYS5zdWJhcnJheShpIC0gNjQsIGkpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBOb3Qgc3VyZSBpZiBpdCBpcyBhIGJ1ZywgaG93ZXZlciBJRTEwIHdpbGwgYWx3YXlzIHByb2R1Y2UgYSBzdWIgYXJyYXkgb2YgbGVuZ3RoIDFcclxuICAgICAgICAgICAgLy8gY29udGFpbmluZyB0aGUgbGFzdCBlbGVtZW50IG9mIHRoZSBwYXJlbnQgYXJyYXkgaWYgdGhlIHN1YiBhcnJheSBzcGVjaWZpZWQgc3RhcnRzXHJcbiAgICAgICAgICAgIC8vIGJleW9uZCB0aGUgbGVuZ3RoIG9mIHRoZSBwYXJlbnQgYXJyYXkgLSB3ZWlyZC5cclxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9jb25uZWN0Lm1pY3Jvc29mdC5jb20vSUUvZmVlZGJhY2svZGV0YWlscy83NzE0NTIvdHlwZWQtYXJyYXktc3ViYXJyYXktaXNzdWVcclxuICAgICAgICAgICAgYSA9IChpIC0gNjQpIDwgbiA/IGEuc3ViYXJyYXkoaSAtIDY0KSA6IG5ldyBVaW50OEFycmF5KDApO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGxlbmd0aCA9IGEubGVuZ3RoO1xyXG4gICAgICAgICAgICB0YWlsID0gWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdO1xyXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgICAgIHRhaWxbaSA+PiAyXSB8PSBhW2ldIDw8ICgoaSAlIDQpIDw8IDMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgdGFpbFtpID4+IDJdIHw9IDB4ODAgPDwgKChpICUgNCkgPDwgMyk7XHJcbiAgICAgICAgICAgIGlmIChpID4gNTUpIHtcclxuICAgICAgICAgICAgICAgIG1kNWN5Y2xlKHN0YXRlLCB0YWlsKTtcclxuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCAxNjsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFpbFtpXSA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBCZXdhcmUgdGhhdCB0aGUgZmluYWwgbGVuZ3RoIG1pZ2h0IG5vdCBmaXQgaW4gMzIgYml0cyBzbyB3ZSB0YWtlIGNhcmUgb2YgdGhhdFxyXG4gICAgICAgICAgICB0bXAgPSBuICogODtcclxuICAgICAgICAgICAgdG1wID0gdG1wLnRvU3RyaW5nKDE2KS5tYXRjaCgvKC4qPykoLnswLDh9KSQvKTtcclxuICAgICAgICAgICAgbG8gPSBwYXJzZUludCh0bXBbMl0sIDE2KTtcclxuICAgICAgICAgICAgaGkgPSBwYXJzZUludCh0bXBbMV0sIDE2KSB8fCAwO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHRhaWxbMTRdID0gbG87XHJcbiAgICAgICAgICAgIHRhaWxbMTVdID0gaGk7XHJcbiAgICBcclxuICAgICAgICAgICAgbWQ1Y3ljbGUoc3RhdGUsIHRhaWwpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcclxuICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgaGV4X2NociA9IFsnMCcsICcxJywgJzInLCAnMycsICc0JywgJzUnLCAnNicsICc3JywgJzgnLCAnOScsICdhJywgJ2InLCAnYycsICdkJywgJ2UnLCAnZiddLFxyXG4gICAgXHJcbiAgICAgICAgcmhleCA9IGZ1bmN0aW9uIChuKSB7XHJcbiAgICAgICAgICAgIHZhciBzID0gJycsXHJcbiAgICAgICAgICAgICAgICBqO1xyXG4gICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgNDsgaiArPSAxKSB7XHJcbiAgICAgICAgICAgICAgICBzICs9IGhleF9jaHJbKG4gPj4gKGogKiA4ICsgNCkpICYgMHgwRl0gKyBoZXhfY2hyWyhuID4+IChqICogOCkpICYgMHgwRl07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHM7XHJcbiAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgIGhleCA9IGZ1bmN0aW9uICh4KSB7XHJcbiAgICAgICAgICAgIHZhciBpO1xyXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgeFtpXSA9IHJoZXgoeFtpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHguam9pbignJyk7XHJcbiAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgIG1kNSA9IGZ1bmN0aW9uIChzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBoZXgobWQ1MShzKSk7XHJcbiAgICAgICAgfSxcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTcGFya01ENSBPT1AgaW1wbGVtZW50YXRpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBVc2UgdGhpcyBjbGFzcyB0byBwZXJmb3JtIGFuIGluY3JlbWVudGFsIG1kNSwgb3RoZXJ3aXNlIHVzZSB0aGVcclxuICAgICAgICAgKiBzdGF0aWMgbWV0aG9kcyBpbnN0ZWFkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFNwYXJrTUQ1ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBjYWxsIHJlc2V0IHRvIGluaXQgdGhlIGluc3RhbmNlXHJcbiAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgICAvLyBJbiBzb21lIGNhc2VzIHRoZSBmYXN0IGFkZDMyIGZ1bmN0aW9uIGNhbm5vdCBiZSB1c2VkLi5cclxuICAgICAgICBpZiAobWQ1KCdoZWxsbycpICE9PSAnNWQ0MTQwMmFiYzRiMmE3NmI5NzE5ZDkxMTAxN2M1OTInKSB7XHJcbiAgICAgICAgICAgIGFkZDMyID0gZnVuY3Rpb24gKHgsIHkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsc3cgPSAoeCAmIDB4RkZGRikgKyAoeSAmIDB4RkZGRiksXHJcbiAgICAgICAgICAgICAgICAgICAgbXN3ID0gKHggPj4gMTYpICsgKHkgPj4gMTYpICsgKGxzdyA+PiAxNik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1zdyA8PCAxNikgfCAobHN3ICYgMHhGRkZGKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFwcGVuZHMgYSBzdHJpbmcuXHJcbiAgICAgICAgICogQSBjb252ZXJzaW9uIHdpbGwgYmUgYXBwbGllZCBpZiBhbiB1dGY4IHN0cmluZyBpcyBkZXRlY3RlZC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIHN0cmluZyB0byBiZSBhcHBlbmRlZFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7U3BhcmtNRDV9IFRoZSBpbnN0YW5jZSBpdHNlbGZcclxuICAgICAgICAgKi9cclxuICAgICAgICBTcGFya01ENS5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgICAgICAgICAvLyBjb252ZXJ0cyB0aGUgc3RyaW5nIHRvIHV0ZjggYnl0ZXMgaWYgbmVjZXNzYXJ5XHJcbiAgICAgICAgICAgIGlmICgvW1xcdTAwODAtXFx1RkZGRl0vLnRlc3Qoc3RyKSkge1xyXG4gICAgICAgICAgICAgICAgc3RyID0gdW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHN0cikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gdGhlbiBhcHBlbmQgYXMgYmluYXJ5XHJcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kQmluYXJ5KHN0cik7XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFwcGVuZHMgYSBiaW5hcnkgc3RyaW5nLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGNvbnRlbnRzIFRoZSBiaW5hcnkgc3RyaW5nIHRvIGJlIGFwcGVuZGVkXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtTcGFya01ENX0gVGhlIGluc3RhbmNlIGl0c2VsZlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFNwYXJrTUQ1LnByb3RvdHlwZS5hcHBlbmRCaW5hcnkgPSBmdW5jdGlvbiAoY29udGVudHMpIHtcclxuICAgICAgICAgICAgdGhpcy5fYnVmZiArPSBjb250ZW50cztcclxuICAgICAgICAgICAgdGhpcy5fbGVuZ3RoICs9IGNvbnRlbnRzLmxlbmd0aDtcclxuICAgIFxyXG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gdGhpcy5fYnVmZi5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICBpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGZvciAoaSA9IDY0OyBpIDw9IGxlbmd0aDsgaSArPSA2NCkge1xyXG4gICAgICAgICAgICAgICAgbWQ1Y3ljbGUodGhpcy5fc3RhdGUsIG1kNWJsayh0aGlzLl9idWZmLnN1YnN0cmluZyhpIC0gNjQsIGkpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICB0aGlzLl9idWZmID0gdGhpcy5fYnVmZi5zdWJzdHIoaSAtIDY0KTtcclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRmluaXNoZXMgdGhlIGluY3JlbWVudGFsIGNvbXB1dGF0aW9uLCByZXNldGluZyB0aGUgaW50ZXJuYWwgc3RhdGUgYW5kXHJcbiAgICAgICAgICogcmV0dXJuaW5nIHRoZSByZXN1bHQuXHJcbiAgICAgICAgICogVXNlIHRoZSByYXcgcGFyYW1ldGVyIHRvIG9idGFpbiB0aGUgcmF3IHJlc3VsdCBpbnN0ZWFkIG9mIHRoZSBoZXggb25lLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtCb29sZWFufSByYXcgVHJ1ZSB0byBnZXQgdGhlIHJhdyByZXN1bHQsIGZhbHNlIHRvIGdldCB0aGUgaGV4IHJlc3VsdFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7U3RyaW5nfEFycmF5fSBUaGUgcmVzdWx0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgU3BhcmtNRDUucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uIChyYXcpIHtcclxuICAgICAgICAgICAgdmFyIGJ1ZmYgPSB0aGlzLl9idWZmLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gYnVmZi5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICBpLFxyXG4gICAgICAgICAgICAgICAgdGFpbCA9IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcclxuICAgICAgICAgICAgICAgIHJldDtcclxuICAgIFxyXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgICAgIHRhaWxbaSA+PiAyXSB8PSBidWZmLmNoYXJDb2RlQXQoaSkgPDwgKChpICUgNCkgPDwgMyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICB0aGlzLl9maW5pc2godGFpbCwgbGVuZ3RoKTtcclxuICAgICAgICAgICAgcmV0ID0gISFyYXcgPyB0aGlzLl9zdGF0ZSA6IGhleCh0aGlzLl9zdGF0ZSk7XHJcbiAgICBcclxuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEZpbmlzaCB0aGUgZmluYWwgY2FsY3VsYXRpb24gYmFzZWQgb24gdGhlIHRhaWwuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSAgdGFpbCAgIFRoZSB0YWlsICh3aWxsIGJlIG1vZGlmaWVkKVxyXG4gICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBsZW5ndGggVGhlIGxlbmd0aCBvZiB0aGUgcmVtYWluaW5nIGJ1ZmZlclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFNwYXJrTUQ1LnByb3RvdHlwZS5fZmluaXNoID0gZnVuY3Rpb24gKHRhaWwsIGxlbmd0aCkge1xyXG4gICAgICAgICAgICB2YXIgaSA9IGxlbmd0aCxcclxuICAgICAgICAgICAgICAgIHRtcCxcclxuICAgICAgICAgICAgICAgIGxvLFxyXG4gICAgICAgICAgICAgICAgaGk7XHJcbiAgICBcclxuICAgICAgICAgICAgdGFpbFtpID4+IDJdIHw9IDB4ODAgPDwgKChpICUgNCkgPDwgMyk7XHJcbiAgICAgICAgICAgIGlmIChpID4gNTUpIHtcclxuICAgICAgICAgICAgICAgIG1kNWN5Y2xlKHRoaXMuX3N0YXRlLCB0YWlsKTtcclxuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCAxNjsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFpbFtpXSA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBEbyB0aGUgZmluYWwgY29tcHV0YXRpb24gYmFzZWQgb24gdGhlIHRhaWwgYW5kIGxlbmd0aFxyXG4gICAgICAgICAgICAvLyBCZXdhcmUgdGhhdCB0aGUgZmluYWwgbGVuZ3RoIG1heSBub3QgZml0IGluIDMyIGJpdHMgc28gd2UgdGFrZSBjYXJlIG9mIHRoYXRcclxuICAgICAgICAgICAgdG1wID0gdGhpcy5fbGVuZ3RoICogODtcclxuICAgICAgICAgICAgdG1wID0gdG1wLnRvU3RyaW5nKDE2KS5tYXRjaCgvKC4qPykoLnswLDh9KSQvKTtcclxuICAgICAgICAgICAgbG8gPSBwYXJzZUludCh0bXBbMl0sIDE2KTtcclxuICAgICAgICAgICAgaGkgPSBwYXJzZUludCh0bXBbMV0sIDE2KSB8fCAwO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHRhaWxbMTRdID0gbG87XHJcbiAgICAgICAgICAgIHRhaWxbMTVdID0gaGk7XHJcbiAgICAgICAgICAgIG1kNWN5Y2xlKHRoaXMuX3N0YXRlLCB0YWlsKTtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVzZXRzIHRoZSBpbnRlcm5hbCBzdGF0ZSBvZiB0aGUgY29tcHV0YXRpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtTcGFya01ENX0gVGhlIGluc3RhbmNlIGl0c2VsZlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFNwYXJrTUQ1LnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5fYnVmZiA9IFwiXCI7XHJcbiAgICAgICAgICAgIHRoaXMuX2xlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXRlID0gWzE3MzI1ODQxOTMsIC0yNzE3MzM4NzksIC0xNzMyNTg0MTk0LCAyNzE3MzM4NzhdO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZWxlYXNlcyBtZW1vcnkgdXNlZCBieSB0aGUgaW5jcmVtZW50YWwgYnVmZmVyIGFuZCBvdGhlciBhZGl0aW9uYWxcclxuICAgICAgICAgKiByZXNvdXJjZXMuIElmIHlvdSBwbGFuIHRvIHVzZSB0aGUgaW5zdGFuY2UgYWdhaW4sIHVzZSByZXNldCBpbnN0ZWFkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFNwYXJrTUQ1LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5fc3RhdGU7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9idWZmO1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5fbGVuZ3RoO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFBlcmZvcm1zIHRoZSBtZDUgaGFzaCBvbiBhIHN0cmluZy5cclxuICAgICAgICAgKiBBIGNvbnZlcnNpb24gd2lsbCBiZSBhcHBsaWVkIGlmIHV0Zjggc3RyaW5nIGlzIGRldGVjdGVkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9ICBzdHIgVGhlIHN0cmluZ1xyXG4gICAgICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmF3IFRydWUgdG8gZ2V0IHRoZSByYXcgcmVzdWx0LCBmYWxzZSB0byBnZXQgdGhlIGhleCByZXN1bHRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge1N0cmluZ3xBcnJheX0gVGhlIHJlc3VsdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFNwYXJrTUQ1Lmhhc2ggPSBmdW5jdGlvbiAoc3RyLCByYXcpIHtcclxuICAgICAgICAgICAgLy8gY29udmVydHMgdGhlIHN0cmluZyB0byB1dGY4IGJ5dGVzIGlmIG5lY2Vzc2FyeVxyXG4gICAgICAgICAgICBpZiAoL1tcXHUwMDgwLVxcdUZGRkZdLy50ZXN0KHN0cikpIHtcclxuICAgICAgICAgICAgICAgIHN0ciA9IHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChzdHIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHZhciBoYXNoID0gbWQ1MShzdHIpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiAhIXJhdyA/IGhhc2ggOiBoZXgoaGFzaCk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFBlcmZvcm1zIHRoZSBtZDUgaGFzaCBvbiBhIGJpbmFyeSBzdHJpbmcuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gIGNvbnRlbnQgVGhlIGJpbmFyeSBzdHJpbmdcclxuICAgICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJhdyAgICAgVHJ1ZSB0byBnZXQgdGhlIHJhdyByZXN1bHQsIGZhbHNlIHRvIGdldCB0aGUgaGV4IHJlc3VsdFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7U3RyaW5nfEFycmF5fSBUaGUgcmVzdWx0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgU3BhcmtNRDUuaGFzaEJpbmFyeSA9IGZ1bmN0aW9uIChjb250ZW50LCByYXcpIHtcclxuICAgICAgICAgICAgdmFyIGhhc2ggPSBtZDUxKGNvbnRlbnQpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiAhIXJhdyA/IGhhc2ggOiBoZXgoaGFzaCk7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNwYXJrTUQ1IE9PUCBpbXBsZW1lbnRhdGlvbiBmb3IgYXJyYXkgYnVmZmVycy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFVzZSB0aGlzIGNsYXNzIHRvIHBlcmZvcm0gYW4gaW5jcmVtZW50YWwgbWQ1IE9OTFkgZm9yIGFycmF5IGJ1ZmZlcnMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgU3BhcmtNRDUuQXJyYXlCdWZmZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIGNhbGwgcmVzZXQgdG8gaW5pdCB0aGUgaW5zdGFuY2VcclxuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBcHBlbmRzIGFuIGFycmF5IGJ1ZmZlci5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXlCdWZmZXJ9IGFyciBUaGUgYXJyYXkgdG8gYmUgYXBwZW5kZWRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge1NwYXJrTUQ1LkFycmF5QnVmZmVyfSBUaGUgaW5zdGFuY2UgaXRzZWxmXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgU3BhcmtNRDUuQXJyYXlCdWZmZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChhcnIpIHtcclxuICAgICAgICAgICAgLy8gVE9ETzogd2UgY291bGQgYXZvaWQgdGhlIGNvbmNhdGVuYXRpb24gaGVyZSBidXQgdGhlIGFsZ29yaXRobSB3b3VsZCBiZSBtb3JlIGNvbXBsZXhcclxuICAgICAgICAgICAgLy8gICAgICAgaWYgeW91IGZpbmQgeW91cnNlbGYgbmVlZGluZyBleHRyYSBwZXJmb3JtYW5jZSwgcGxlYXNlIG1ha2UgYSBQUi5cclxuICAgICAgICAgICAgdmFyIGJ1ZmYgPSB0aGlzLl9jb25jYXRBcnJheUJ1ZmZlcih0aGlzLl9idWZmLCBhcnIpLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gYnVmZi5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICBpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHRoaXMuX2xlbmd0aCArPSBhcnIuYnl0ZUxlbmd0aDtcclxuICAgIFxyXG4gICAgICAgICAgICBmb3IgKGkgPSA2NDsgaSA8PSBsZW5ndGg7IGkgKz0gNjQpIHtcclxuICAgICAgICAgICAgICAgIG1kNWN5Y2xlKHRoaXMuX3N0YXRlLCBtZDVibGtfYXJyYXkoYnVmZi5zdWJhcnJheShpIC0gNjQsIGkpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBBdm9pZHMgSUUxMCB3ZWlyZG5lc3MgKGRvY3VtZW50ZWQgYWJvdmUpXHJcbiAgICAgICAgICAgIHRoaXMuX2J1ZmYgPSAoaSAtIDY0KSA8IGxlbmd0aCA/IGJ1ZmYuc3ViYXJyYXkoaSAtIDY0KSA6IG5ldyBVaW50OEFycmF5KDApO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBGaW5pc2hlcyB0aGUgaW5jcmVtZW50YWwgY29tcHV0YXRpb24sIHJlc2V0aW5nIHRoZSBpbnRlcm5hbCBzdGF0ZSBhbmRcclxuICAgICAgICAgKiByZXR1cm5pbmcgdGhlIHJlc3VsdC5cclxuICAgICAgICAgKiBVc2UgdGhlIHJhdyBwYXJhbWV0ZXIgdG8gb2J0YWluIHRoZSByYXcgcmVzdWx0IGluc3RlYWQgb2YgdGhlIGhleCBvbmUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJhdyBUcnVlIHRvIGdldCB0aGUgcmF3IHJlc3VsdCwgZmFsc2UgdG8gZ2V0IHRoZSBoZXggcmVzdWx0XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtTdHJpbmd8QXJyYXl9IFRoZSByZXN1bHRcclxuICAgICAgICAgKi9cclxuICAgICAgICBTcGFya01ENS5BcnJheUJ1ZmZlci5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24gKHJhdykge1xyXG4gICAgICAgICAgICB2YXIgYnVmZiA9IHRoaXMuX2J1ZmYsXHJcbiAgICAgICAgICAgICAgICBsZW5ndGggPSBidWZmLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIHRhaWwgPSBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXHJcbiAgICAgICAgICAgICAgICBpLFxyXG4gICAgICAgICAgICAgICAgcmV0O1xyXG4gICAgXHJcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgdGFpbFtpID4+IDJdIHw9IGJ1ZmZbaV0gPDwgKChpICUgNCkgPDwgMyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICB0aGlzLl9maW5pc2godGFpbCwgbGVuZ3RoKTtcclxuICAgICAgICAgICAgcmV0ID0gISFyYXcgPyB0aGlzLl9zdGF0ZSA6IGhleCh0aGlzLl9zdGF0ZSk7XHJcbiAgICBcclxuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIFNwYXJrTUQ1LkFycmF5QnVmZmVyLnByb3RvdHlwZS5fZmluaXNoID0gU3BhcmtNRDUucHJvdG90eXBlLl9maW5pc2g7XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXNldHMgdGhlIGludGVybmFsIHN0YXRlIG9mIHRoZSBjb21wdXRhdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge1NwYXJrTUQ1LkFycmF5QnVmZmVyfSBUaGUgaW5zdGFuY2UgaXRzZWxmXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgU3BhcmtNRDUuQXJyYXlCdWZmZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLl9idWZmID0gbmV3IFVpbnQ4QXJyYXkoMCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2xlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXRlID0gWzE3MzI1ODQxOTMsIC0yNzE3MzM4NzksIC0xNzMyNTg0MTk0LCAyNzE3MzM4NzhdO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZWxlYXNlcyBtZW1vcnkgdXNlZCBieSB0aGUgaW5jcmVtZW50YWwgYnVmZmVyIGFuZCBvdGhlciBhZGl0aW9uYWxcclxuICAgICAgICAgKiByZXNvdXJjZXMuIElmIHlvdSBwbGFuIHRvIHVzZSB0aGUgaW5zdGFuY2UgYWdhaW4sIHVzZSByZXNldCBpbnN0ZWFkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFNwYXJrTUQ1LkFycmF5QnVmZmVyLnByb3RvdHlwZS5kZXN0cm95ID0gU3BhcmtNRDUucHJvdG90eXBlLmRlc3Ryb3k7XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDb25jYXRzIHR3byBhcnJheSBidWZmZXJzLCByZXR1cm5pbmcgYSBuZXcgb25lLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtICB7QXJyYXlCdWZmZXJ9IGZpcnN0ICBUaGUgZmlyc3QgYXJyYXkgYnVmZmVyXHJcbiAgICAgICAgICogQHBhcmFtICB7QXJyYXlCdWZmZXJ9IHNlY29uZCBUaGUgc2Vjb25kIGFycmF5IGJ1ZmZlclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7QXJyYXlCdWZmZXJ9IFRoZSBuZXcgYXJyYXkgYnVmZmVyXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgU3BhcmtNRDUuQXJyYXlCdWZmZXIucHJvdG90eXBlLl9jb25jYXRBcnJheUJ1ZmZlciA9IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XHJcbiAgICAgICAgICAgIHZhciBmaXJzdExlbmd0aCA9IGZpcnN0Lmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IG5ldyBVaW50OEFycmF5KGZpcnN0TGVuZ3RoICsgc2Vjb25kLmJ5dGVMZW5ndGgpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHJlc3VsdC5zZXQoZmlyc3QpO1xyXG4gICAgICAgICAgICByZXN1bHQuc2V0KG5ldyBVaW50OEFycmF5KHNlY29uZCksIGZpcnN0TGVuZ3RoKTtcclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBQZXJmb3JtcyB0aGUgbWQ1IGhhc2ggb24gYW4gYXJyYXkgYnVmZmVyLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gYXJyIFRoZSBhcnJheSBidWZmZXJcclxuICAgICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59ICAgICByYXcgVHJ1ZSB0byBnZXQgdGhlIHJhdyByZXN1bHQsIGZhbHNlIHRvIGdldCB0aGUgaGV4IHJlc3VsdFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7U3RyaW5nfEFycmF5fSBUaGUgcmVzdWx0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgU3BhcmtNRDUuQXJyYXlCdWZmZXIuaGFzaCA9IGZ1bmN0aW9uIChhcnIsIHJhdykge1xyXG4gICAgICAgICAgICB2YXIgaGFzaCA9IG1kNTFfYXJyYXkobmV3IFVpbnQ4QXJyYXkoYXJyKSk7XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuICEhcmF3ID8gaGFzaCA6IGhleChoYXNoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBGbGFzaFJ1bnRpbWUucmVnaXN0ZXIoICdNZDUnLCB7XHJcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gZG8gbm90aGluZy5cclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBsb2FkRnJvbUJsb2I6IGZ1bmN0aW9uKCBmaWxlICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJsb2IgPSBmaWxlLmdldFNvdXJjZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNodW5rU2l6ZSA9IDIgKiAxMDI0ICogMTAyNCxcclxuICAgICAgICAgICAgICAgICAgICBjaHVua3MgPSBNYXRoLmNlaWwoIGJsb2Iuc2l6ZSAvIGNodW5rU2l6ZSApLFxyXG4gICAgICAgICAgICAgICAgICAgIGNodW5rID0gMCxcclxuICAgICAgICAgICAgICAgICAgICBvd25lciA9IHRoaXMub3duZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3BhcmsgPSBuZXcgU3BhcmtNRDUuQXJyYXlCdWZmZXIoKSxcclxuICAgICAgICAgICAgICAgICAgICBtZSA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgYmxvYlNsaWNlID0gYmxvYi5tb3pTbGljZSB8fCBibG9iLndlYmtpdFNsaWNlIHx8IGJsb2Iuc2xpY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgbG9hZE5leHQsIGZyO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGxvYWROZXh0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXJ0LCBlbmQ7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBzdGFydCA9IGNodW5rICogY2h1bmtTaXplO1xyXG4gICAgICAgICAgICAgICAgICAgIGVuZCA9IE1hdGgubWluKCBzdGFydCArIGNodW5rU2l6ZSwgYmxvYi5zaXplICk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBmci5vbmxvYWQgPSBmdW5jdGlvbiggZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3BhcmsuYXBwZW5kKCBlLnRhcmdldC5yZXN1bHQgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3duZXIudHJpZ2dlciggJ3Byb2dyZXNzJywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWw6IGZpbGUuc2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRlZDogZW5kXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBmci5vbmxvYWRlbmQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnIub25sb2FkZW5kID0gZnIub25sb2FkID0gbnVsbDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoICsrY2h1bmsgPCBjaHVua3MgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBsb2FkTmV4dCwgMSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG93bmVyLnRyaWdnZXIoJ2xvYWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZS5yZXN1bHQgPSBzcGFyay5lbmQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkTmV4dCA9IGZpbGUgPSBibG9iID0gc3BhcmsgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG93bmVyLnRyaWdnZXIoJ2NvbXBsZXRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCA1MCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGZyLnJlYWRBc0FycmF5QnVmZmVyKCBibG9iU2xpY2UuY2FsbCggYmxvYiwgc3RhcnQsIGVuZCApICk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBsb2FkTmV4dCgpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIGdldFJlc3VsdDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IEZsYXNoUnVudGltZVxyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ3J1bnRpbWUvZmxhc2gvcnVudGltZScsW1xyXG4gICAgICAgICdiYXNlJyxcclxuICAgICAgICAncnVudGltZS9ydW50aW1lJyxcclxuICAgICAgICAncnVudGltZS9jb21wYmFzZSdcclxuICAgIF0sIGZ1bmN0aW9uKCBCYXNlLCBSdW50aW1lLCBDb21wQmFzZSApIHtcclxuICAgIFxyXG4gICAgICAgIHZhciAkID0gQmFzZS4kLFxyXG4gICAgICAgICAgICB0eXBlID0gJ2ZsYXNoJyxcclxuICAgICAgICAgICAgY29tcG9uZW50cyA9IHt9O1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBnZXRGbGFzaFZlcnNpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciB2ZXJzaW9uO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB2ZXJzaW9uID0gbmF2aWdhdG9yLnBsdWdpbnNbICdTaG9ja3dhdmUgRmxhc2gnIF07XHJcbiAgICAgICAgICAgICAgICB2ZXJzaW9uID0gdmVyc2lvbi5kZXNjcmlwdGlvbjtcclxuICAgICAgICAgICAgfSBjYXRjaCAoIGV4ICkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uID0gbmV3IEFjdGl2ZVhPYmplY3QoJ1Nob2Nrd2F2ZUZsYXNoLlNob2Nrd2F2ZUZsYXNoJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5HZXRWYXJpYWJsZSgnJHZlcnNpb24nKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKCBleDIgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbiA9ICcwLjAnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZlcnNpb24gPSB2ZXJzaW9uLm1hdGNoKCAvXFxkKy9nICk7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KCB2ZXJzaW9uWyAwIF0gKyAnLicgKyB2ZXJzaW9uWyAxIF0sIDEwICk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gRmxhc2hSdW50aW1lKCkge1xyXG4gICAgICAgICAgICB2YXIgcG9vbCA9IHt9LFxyXG4gICAgICAgICAgICAgICAgY2xpZW50cyA9IHt9LFxyXG4gICAgICAgICAgICAgICAgZGVzdHJveSA9IHRoaXMuZGVzdHJveSxcclxuICAgICAgICAgICAgICAgIG1lID0gdGhpcyxcclxuICAgICAgICAgICAgICAgIGpzcmVjaXZlciA9IEJhc2UuZ3VpZCgnd2VidXBsb2FkZXJfJyk7XHJcbiAgICBcclxuICAgICAgICAgICAgUnVudGltZS5hcHBseSggbWUsIGFyZ3VtZW50cyApO1xyXG4gICAgICAgICAgICBtZS50eXBlID0gdHlwZTtcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIOi/meS4quaWueazleeahOiwg+eUqOiAhe+8jOWunumZheS4iuaYr1J1bnRpbWVDbGllbnRcclxuICAgICAgICAgICAgbWUuZXhlYyA9IGZ1bmN0aW9uKCBjb21wLCBmbi8qLCBhcmdzLi4uKi8gKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2xpZW50ID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICB1aWQgPSBjbGllbnQudWlkLFxyXG4gICAgICAgICAgICAgICAgICAgIGFyZ3MgPSBCYXNlLnNsaWNlKCBhcmd1bWVudHMsIDIgKSxcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgY2xpZW50c1sgdWlkIF0gPSBjbGllbnQ7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmICggY29tcG9uZW50c1sgY29tcCBdICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICggIXBvb2xbIHVpZCBdICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb29sWyB1aWQgXSA9IG5ldyBjb21wb25lbnRzWyBjb21wIF0oIGNsaWVudCwgbWUgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IHBvb2xbIHVpZCBdO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBpbnN0YW5jZVsgZm4gXSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlWyBmbiBdLmFwcGx5KCBpbnN0YW5jZSwgYXJncyApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lLmZsYXNoRXhlYy5hcHBseSggY2xpZW50LCBhcmd1bWVudHMgKTtcclxuICAgICAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVyKCBldnQsIG9iaiApIHtcclxuICAgICAgICAgICAgICAgIHZhciB0eXBlID0gZXZ0LnR5cGUgfHwgZXZ0LFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcnRzLCB1aWQ7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHBhcnRzID0gdHlwZS5zcGxpdCgnOjonKTtcclxuICAgICAgICAgICAgICAgIHVpZCA9IHBhcnRzWyAwIF07XHJcbiAgICAgICAgICAgICAgICB0eXBlID0gcGFydHNbIDEgXTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cuYXBwbHkoIGNvbnNvbGUsIGFyZ3VtZW50cyApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIHR5cGUgPT09ICdSZWFkeScgJiYgdWlkID09PSBtZS51aWQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWUudHJpZ2dlcigncmVhZHknKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIGNsaWVudHNbIHVpZCBdICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudHNbIHVpZCBdLnRyaWdnZXIoIHR5cGUudG9Mb3dlckNhc2UoKSwgZXZ0LCBvYmogKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gQmFzZS5sb2coIGV2dCwgb2JqICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAvLyBmbGFzaOeahOaOpeWPl+WZqOOAglxyXG4gICAgICAgICAgICB3aW5kb3dbIGpzcmVjaXZlciBdID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g5Li65LqG6IO95o2V6I635b6X5Yiw44CCXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXIuYXBwbHkoIG51bGwsIGFyZ3MgKTtcclxuICAgICAgICAgICAgICAgIH0sIDEgKTtcclxuICAgICAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgICAgICB0aGlzLmpzcmVjaXZlciA9IGpzcmVjaXZlcjtcclxuICAgIFxyXG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIC8vIEB0b2RvIOWIoOmZpOaxoOWtkOS4reeahOaJgOacieWunuS+i1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlc3Ryb3kgJiYgZGVzdHJveS5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgdGhpcy5mbGFzaEV4ZWMgPSBmdW5jdGlvbiggY29tcCwgZm4gKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmxhc2ggPSBtZS5nZXRGbGFzaCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGFyZ3MgPSBCYXNlLnNsaWNlKCBhcmd1bWVudHMsIDIgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZsYXNoLmV4ZWMoIHRoaXMudWlkLCBjb21wLCBmbiwgYXJncyApO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIEB0b2RvXHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgQmFzZS5pbmhlcml0cyggUnVudGltZSwge1xyXG4gICAgICAgICAgICBjb25zdHJ1Y3RvcjogRmxhc2hSdW50aW1lLFxyXG4gICAgXHJcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZ2V0Q29udGFpbmVyKCksXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cyA9IHRoaXMub3B0aW9ucyxcclxuICAgICAgICAgICAgICAgICAgICBodG1sO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBpZiBub3QgdGhlIG1pbmltYWwgaGVpZ2h0LCBzaGltcyBhcmUgbm90IGluaXRpYWxpemVkXHJcbiAgICAgICAgICAgICAgICAvLyBpbiBvbGRlciBicm93c2VycyAoZS5nIEZGMy42LCBJRTYsNyw4LCBTYWZhcmkgNC4wLDUuMCwgZXRjKVxyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiAnLThweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogJy04cHgnLFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnOXB4JyxcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICc5cHgnLFxyXG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiAnaGlkZGVuJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIGluc2VydCBmbGFzaCBvYmplY3RcclxuICAgICAgICAgICAgICAgIGh0bWwgPSAnPG9iamVjdCBpZD1cIicgKyB0aGlzLnVpZCArICdcIiB0eXBlPVwiYXBwbGljYXRpb24vJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd4LXNob2Nrd2F2ZS1mbGFzaFwiIGRhdGE9XCInICsgIG9wdHMuc3dmICsgJ1wiICc7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmICggQmFzZS5icm93c2VyLmllICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJ2NsYXNzaWQ9XCJjbHNpZDpkMjdjZGI2ZS1hZTZkLTExY2YtOTZiOC00NDQ1NTM1NDAwMDBcIiAnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBodG1sICs9ICd3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCIgc3R5bGU9XCJvdXRsaW5lOjBcIj4nICArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxwYXJhbSBuYW1lPVwibW92aWVcIiB2YWx1ZT1cIicgKyBvcHRzLnN3ZiArICdcIiAvPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8cGFyYW0gbmFtZT1cImZsYXNodmFyc1wiIHZhbHVlPVwidWlkPScgKyB0aGlzLnVpZCArXHJcbiAgICAgICAgICAgICAgICAgICAgJyZqc3JlY2l2ZXI9JyArIHRoaXMuanNyZWNpdmVyICsgJ1wiIC8+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxwYXJhbSBuYW1lPVwid21vZGVcIiB2YWx1ZT1cInRyYW5zcGFyZW50XCIgLz4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPHBhcmFtIG5hbWU9XCJhbGxvd3NjcmlwdGFjY2Vzc1wiIHZhbHVlPVwiYWx3YXlzXCIgLz4nICtcclxuICAgICAgICAgICAgICAgICc8L29iamVjdD4nO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuaHRtbCggaHRtbCApO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIGdldEZsYXNoOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGlmICggdGhpcy5fZmxhc2ggKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ZsYXNoO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9mbGFzaCA9ICQoICcjJyArIHRoaXMudWlkICkuZ2V0KCAwICk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZmxhc2g7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgRmxhc2hSdW50aW1lLnJlZ2lzdGVyID0gZnVuY3Rpb24oIG5hbWUsIGNvbXBvbmVudCApIHtcclxuICAgICAgICAgICAgY29tcG9uZW50ID0gY29tcG9uZW50c1sgbmFtZSBdID0gQmFzZS5pbmhlcml0cyggQ29tcEJhc2UsICQuZXh0ZW5kKHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gQHRvZG8gZml4IHRoaXMgbGF0ZXJcclxuICAgICAgICAgICAgICAgIGZsYXNoRXhlYzogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG93bmVyID0gdGhpcy5vd25lcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcnVudGltZSA9IHRoaXMuZ2V0UnVudGltZSgpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJ1bnRpbWUuZmxhc2hFeGVjLmFwcGx5KCBvd25lciwgYXJndW1lbnRzICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGNvbXBvbmVudCApICk7XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudDtcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgaWYgKCBnZXRGbGFzaFZlcnNpb24oKSA+PSAxMS40ICkge1xyXG4gICAgICAgICAgICBSdW50aW1lLmFkZFJ1bnRpbWUoIHR5cGUsIEZsYXNoUnVudGltZSApO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIHJldHVybiBGbGFzaFJ1bnRpbWU7XHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyBGaWxlUGlja2VyXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgncnVudGltZS9mbGFzaC9maWxlcGlja2VyJyxbXHJcbiAgICAgICAgJ2Jhc2UnLFxyXG4gICAgICAgICdydW50aW1lL2ZsYXNoL3J1bnRpbWUnXHJcbiAgICBdLCBmdW5jdGlvbiggQmFzZSwgRmxhc2hSdW50aW1lICkge1xyXG4gICAgICAgIHZhciAkID0gQmFzZS4kO1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIEZsYXNoUnVudGltZS5yZWdpc3RlciggJ0ZpbGVQaWNrZXInLCB7XHJcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCBvcHRzICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvcHkgPSAkLmV4dGVuZCh7fSwgb3B0cyApLFxyXG4gICAgICAgICAgICAgICAgICAgIGxlbiwgaTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8g5L+u5aSNRmxhc2jlho3msqHmnInorr7nva50aXRsZeeahOaDheWGteS4i+aXoOazleW8ueWHumZsYXNo5paH5Lu26YCJ5oup5qGG55qEYnVnLlxyXG4gICAgICAgICAgICAgICAgbGVuID0gY29weS5hY2NlcHQgJiYgY29weS5hY2NlcHQubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgZm9yICggIGkgPSAwOyBpIDwgbGVuOyBpKysgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhY29weS5hY2NlcHRbIGkgXS50aXRsZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29weS5hY2NlcHRbIGkgXS50aXRsZSA9ICdGaWxlcyc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBkZWxldGUgY29weS5idXR0b247XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgY29weS5pZDtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBjb3B5LmNvbnRhaW5lcjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5mbGFzaEV4ZWMoICdGaWxlUGlja2VyJywgJ2luaXQnLCBjb3B5ICk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZsYXNoRXhlYyggJ0ZpbGVQaWNrZXInLCAnZGVzdHJveScgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIEBmaWxlT3ZlcnZpZXcg5Zu+54mH5Y6L57ypXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgncnVudGltZS9mbGFzaC9pbWFnZScsW1xyXG4gICAgICAgICdydW50aW1lL2ZsYXNoL3J1bnRpbWUnXHJcbiAgICBdLCBmdW5jdGlvbiggRmxhc2hSdW50aW1lICkge1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIEZsYXNoUnVudGltZS5yZWdpc3RlciggJ0ltYWdlJywge1xyXG4gICAgICAgICAgICAvLyBpbml0OiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuICAgICAgICAgICAgLy8gICAgIHZhciBvd25lciA9IHRoaXMub3duZXI7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gICAgIHRoaXMuZmxhc2hFeGVjKCAnSW1hZ2UnLCAnaW5pdCcsIG9wdGlvbnMgKTtcclxuICAgICAgICAgICAgLy8gICAgIG93bmVyLm9uKCAnbG9hZCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIGRlYnVnZ2VyO1xyXG4gICAgICAgICAgICAvLyAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgbG9hZEZyb21CbG9iOiBmdW5jdGlvbiggYmxvYiApIHtcclxuICAgICAgICAgICAgICAgIHZhciBvd25lciA9IHRoaXMub3duZXI7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIG93bmVyLmluZm8oKSAmJiB0aGlzLmZsYXNoRXhlYyggJ0ltYWdlJywgJ2luZm8nLCBvd25lci5pbmZvKCkgKTtcclxuICAgICAgICAgICAgICAgIG93bmVyLm1ldGEoKSAmJiB0aGlzLmZsYXNoRXhlYyggJ0ltYWdlJywgJ21ldGEnLCBvd25lci5tZXRhKCkgKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5mbGFzaEV4ZWMoICdJbWFnZScsICdsb2FkRnJvbUJsb2InLCBibG9iLnVpZCApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyAgVHJhbnNwb3J0IGZsYXNo5a6e546wXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgncnVudGltZS9mbGFzaC90cmFuc3BvcnQnLFtcclxuICAgICAgICAnYmFzZScsXHJcbiAgICAgICAgJ3J1bnRpbWUvZmxhc2gvcnVudGltZScsXHJcbiAgICAgICAgJ3J1bnRpbWUvY2xpZW50J1xyXG4gICAgXSwgZnVuY3Rpb24oIEJhc2UsIEZsYXNoUnVudGltZSwgUnVudGltZUNsaWVudCApIHtcclxuICAgICAgICB2YXIgJCA9IEJhc2UuJDtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBGbGFzaFJ1bnRpbWUucmVnaXN0ZXIoICdUcmFuc3BvcnQnLCB7XHJcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc3RhdHVzID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Jlc3BvbnNlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Jlc3BvbnNlSnNvbiA9IG51bGw7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgc2VuZDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3duZXIgPSB0aGlzLm93bmVyLFxyXG4gICAgICAgICAgICAgICAgICAgIG9wdHMgPSB0aGlzLm9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICAgICAgeGhyID0gdGhpcy5faW5pdEFqYXgoKSxcclxuICAgICAgICAgICAgICAgICAgICBibG9iID0gb3duZXIuX2Jsb2IsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VydmVyID0gb3B0cy5zZXJ2ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgYmluYXJ5O1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB4aHIuY29ubmVjdFJ1bnRpbWUoIGJsb2IucnVpZCApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIG9wdHMuc2VuZEFzQmluYXJ5ICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlcnZlciArPSAoL1xcPy8udGVzdCggc2VydmVyICkgPyAnJicgOiAnPycpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQucGFyYW0oIG93bmVyLl9mb3JtRGF0YSApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgYmluYXJ5ID0gYmxvYi51aWQ7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQuZWFjaCggb3duZXIuX2Zvcm1EYXRhLCBmdW5jdGlvbiggaywgdiApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeGhyLmV4ZWMoICdhcHBlbmQnLCBrLCB2ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICB4aHIuZXhlYyggJ2FwcGVuZEJsb2InLCBvcHRzLmZpbGVWYWwsIGJsb2IudWlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0cy5maWxlbmFtZSB8fCBvd25lci5fZm9ybURhdGEubmFtZSB8fCAnJyApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRSZXF1ZXN0SGVhZGVyKCB4aHIsIG9wdHMuaGVhZGVycyApO1xyXG4gICAgICAgICAgICAgICAgeGhyLmV4ZWMoICdzZW5kJywge1xyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogb3B0cy5tZXRob2QsXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBzZXJ2ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yY2VVUkxTdHJlYW06IG9wdHMuZm9yY2VVUkxTdHJlYW0sXHJcbiAgICAgICAgICAgICAgICAgICAgbWltZVR5cGU6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nXHJcbiAgICAgICAgICAgICAgICB9LCBiaW5hcnkgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBnZXRTdGF0dXM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXR1cztcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBnZXRSZXNwb25zZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVzcG9uc2UgfHwgJyc7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgZ2V0UmVzcG9uc2VBc0pzb246IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc3BvbnNlSnNvbjtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBhYm9ydDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeGhyID0gdGhpcy5feGhyO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIHhociApIHtcclxuICAgICAgICAgICAgICAgICAgICB4aHIuZXhlYygnYWJvcnQnKTtcclxuICAgICAgICAgICAgICAgICAgICB4aHIuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3hociA9IHhociA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFib3J0KCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgX2luaXRBamF4OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZSA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgeGhyID0gbmV3IFJ1bnRpbWVDbGllbnQoJ1hNTEh0dHBSZXF1ZXN0Jyk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHhoci5vbiggJ3VwbG9hZHByb2dyZXNzIHByb2dyZXNzJywgZnVuY3Rpb24oIGUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBlcmNlbnQgPSBlLmxvYWRlZCAvIGUudG90YWw7XHJcbiAgICAgICAgICAgICAgICAgICAgcGVyY2VudCA9IE1hdGgubWluKCAxLCBNYXRoLm1heCggMCwgcGVyY2VudCApICk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lLnRyaWdnZXIoICdwcm9ncmVzcycsIHBlcmNlbnQgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB4aHIub24oICdsb2FkJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXR1cyA9IHhoci5leGVjKCdnZXRTdGF0dXMnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZEJvZHkgPSBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyID0gJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHA7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICB4aHIub2ZmKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWUuX3hociA9IG51bGw7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkQm9keSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggc3RhdHVzID49IDUwMCAmJiBzdGF0dXMgPCA2MDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRCb2R5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyID0gJ3NlcnZlcic7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyID0gJ2h0dHAnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggcmVhZEJvZHkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lLl9yZXNwb25zZSA9IHhoci5leGVjKCdnZXRSZXNwb25zZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZS5fcmVzcG9uc2UgPSBkZWNvZGVVUklDb21wb25lbnQoIG1lLl9yZXNwb25zZSApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZsYXNoIOWkhOeQhuWPr+iDveWtmOWcqCBidWcsIOayoei+meWPquiDvemdoCBqcyDkuoZcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIG1lLl9yZXNwb25zZUpzb24gPSB4aHIuZXhlYygnZ2V0UmVzcG9uc2VBc0pzb24nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSBjYXRjaCAoIGVycm9yICkge1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBmdW5jdGlvbiggcyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5KU09OICYmIHdpbmRvdy5KU09OLnBhcnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb24oJ3JldHVybiAnICsgcykuY2FsbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoIGVyciApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lLl9yZXNwb25zZUpzb24gID0gbWUuX3Jlc3BvbnNlID8gcChtZS5fcmVzcG9uc2UpIDoge307XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHhoci5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgeGhyID0gbnVsbDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnIgPyBtZS50cmlnZ2VyKCAnZXJyb3InLCBlcnIgKSA6IG1lLnRyaWdnZXIoJ2xvYWQnKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB4aHIub24oICdlcnJvcicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHhoci5vZmYoKTtcclxuICAgICAgICAgICAgICAgICAgICBtZS5feGhyID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBtZS50cmlnZ2VyKCAnZXJyb3InLCAnaHR0cCcgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBtZS5feGhyID0geGhyO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHhocjtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBfc2V0UmVxdWVzdEhlYWRlcjogZnVuY3Rpb24oIHhociwgaGVhZGVycyApIHtcclxuICAgICAgICAgICAgICAgICQuZWFjaCggaGVhZGVycywgZnVuY3Rpb24oIGtleSwgdmFsICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHhoci5leGVjKCAnc2V0UmVxdWVzdEhlYWRlcicsIGtleSwgdmFsICk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogQGZpbGVPdmVydmlldyBCbG9iIEh0bWzlrp7njrBcclxuICAgICAqL1xyXG4gICAgZGVmaW5lKCdydW50aW1lL2ZsYXNoL2Jsb2InLFtcclxuICAgICAgICAncnVudGltZS9mbGFzaC9ydW50aW1lJyxcclxuICAgICAgICAnbGliL2Jsb2InXHJcbiAgICBdLCBmdW5jdGlvbiggRmxhc2hSdW50aW1lLCBCbG9iICkge1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIEZsYXNoUnVudGltZS5yZWdpc3RlciggJ0Jsb2InLCB7XHJcbiAgICAgICAgICAgIHNsaWNlOiBmdW5jdGlvbiggc3RhcnQsIGVuZCApIHtcclxuICAgICAgICAgICAgICAgIHZhciBibG9iID0gdGhpcy5mbGFzaEV4ZWMoICdCbG9iJywgJ3NsaWNlJywgc3RhcnQsIGVuZCApO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEJsb2IoIHRoaXMuZ2V0UnVpZCgpLCBibG9iICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3ICBNZDUgZmxhc2jlrp7njrBcclxuICAgICAqL1xyXG4gICAgZGVmaW5lKCdydW50aW1lL2ZsYXNoL21kNScsW1xyXG4gICAgICAgICdydW50aW1lL2ZsYXNoL3J1bnRpbWUnXHJcbiAgICBdLCBmdW5jdGlvbiggRmxhc2hSdW50aW1lICkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBGbGFzaFJ1bnRpbWUucmVnaXN0ZXIoICdNZDUnLCB7XHJcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gZG8gbm90aGluZy5cclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICBsb2FkRnJvbUJsb2I6IGZ1bmN0aW9uKCBibG9iICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmxhc2hFeGVjKCAnTWQ1JywgJ2xvYWRGcm9tQmxvYicsIGJsb2IudWlkICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IOWujOWFqOeJiOacrOOAglxyXG4gICAgICovXHJcbiAgICBkZWZpbmUoJ3ByZXNldC9hbGwnLFtcclxuICAgICAgICAnYmFzZScsXHJcbiAgICBcclxuICAgICAgICAvLyB3aWRnZXRzXHJcbiAgICAgICAgJ3dpZGdldHMvZmlsZWRuZCcsXHJcbiAgICAgICAgJ3dpZGdldHMvZmlsZXBhc3RlJyxcclxuICAgICAgICAnd2lkZ2V0cy9maWxlcGlja2VyJyxcclxuICAgICAgICAnd2lkZ2V0cy9pbWFnZScsXHJcbiAgICAgICAgJ3dpZGdldHMvcXVldWUnLFxyXG4gICAgICAgICd3aWRnZXRzL3J1bnRpbWUnLFxyXG4gICAgICAgICd3aWRnZXRzL3VwbG9hZCcsXHJcbiAgICAgICAgJ3dpZGdldHMvdmFsaWRhdG9yJyxcclxuICAgICAgICAnd2lkZ2V0cy9tZDUnLFxyXG4gICAgXHJcbiAgICAgICAgLy8gcnVudGltZXNcclxuICAgICAgICAvLyBodG1sNVxyXG4gICAgICAgICdydW50aW1lL2h0bWw1L2Jsb2InLFxyXG4gICAgICAgICdydW50aW1lL2h0bWw1L2RuZCcsXHJcbiAgICAgICAgJ3J1bnRpbWUvaHRtbDUvZmlsZXBhc3RlJyxcclxuICAgICAgICAncnVudGltZS9odG1sNS9maWxlcGlja2VyJyxcclxuICAgICAgICAncnVudGltZS9odG1sNS9pbWFnZW1ldGEvZXhpZicsXHJcbiAgICAgICAgJ3J1bnRpbWUvaHRtbDUvYW5kcm9pZHBhdGNoJyxcclxuICAgICAgICAncnVudGltZS9odG1sNS9pbWFnZScsXHJcbiAgICAgICAgJ3J1bnRpbWUvaHRtbDUvdHJhbnNwb3J0JyxcclxuICAgICAgICAncnVudGltZS9odG1sNS9tZDUnLFxyXG4gICAgXHJcbiAgICAgICAgLy8gZmxhc2hcclxuICAgICAgICAncnVudGltZS9mbGFzaC9maWxlcGlja2VyJyxcclxuICAgICAgICAncnVudGltZS9mbGFzaC9pbWFnZScsXHJcbiAgICAgICAgJ3J1bnRpbWUvZmxhc2gvdHJhbnNwb3J0JyxcclxuICAgICAgICAncnVudGltZS9mbGFzaC9ibG9iJyxcclxuICAgICAgICAncnVudGltZS9mbGFzaC9tZDUnXHJcbiAgICBdLCBmdW5jdGlvbiggQmFzZSApIHtcclxuICAgICAgICByZXR1cm4gQmFzZTtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IOaXpeW/l+e7hOS7tu+8jOS4u+imgeeUqOadpeaUtumbhumUmeivr+S/oeaBr++8jOWPr+S7peW4ruWKqSB3ZWJ1cGxvYWRlciDmm7Tlpb3nmoTlrprkvY3pl67popjlkozlj5HlsZXjgIJcclxuICAgICAqXHJcbiAgICAgKiDlpoLmnpzmgqjkuI3mg7PopoHlkK/nlKjmraTlip/og73vvIzor7flnKjmiZPljIXnmoTml7blgJnljrvmjokgbG9nIOaooeWdl+OAglxyXG4gICAgICpcclxuICAgICAqIOaIluiAheWPr+S7peWcqOWIneWni+WMlueahOaXtuWAmemAmui/hyBvcHRpb25zLmRpc2FibGVXaWRnZXRzIOWxnuaAp+emgeeUqOOAglxyXG4gICAgICpcclxuICAgICAqIOWmgu+8mlxyXG4gICAgICogV2ViVXBsb2FkZXIuY3JlYXRlKHtcclxuICAgICAqICAgICAuLi5cclxuICAgICAqXHJcbiAgICAgKiAgICAgZGlzYWJsZVdpZGdldHM6ICdsb2cnLFxyXG4gICAgICpcclxuICAgICAqICAgICAuLi5cclxuICAgICAqIH0pXHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgnd2lkZ2V0cy9sb2cnLFtcclxuICAgICAgICAnYmFzZScsXHJcbiAgICAgICAgJ3VwbG9hZGVyJyxcclxuICAgICAgICAnd2lkZ2V0cy93aWRnZXQnXHJcbiAgICBdLCBmdW5jdGlvbiggQmFzZSwgVXBsb2FkZXIgKSB7XHJcbiAgICAgICAgdmFyICQgPSBCYXNlLiQsXHJcbiAgICAgICAgICAgIGxvZ1VybCA9ICcgaHR0cDovL3N0YXRpYy50aWViYS5iYWlkdS5jb20vdGIvcG1zL2ltZy9zdC5naWY/PycsXHJcbiAgICAgICAgICAgIHByb2R1Y3QgPSAobG9jYXRpb24uaG9zdG5hbWUgfHwgbG9jYXRpb24uaG9zdCB8fCAncHJvdGVjdGVkJykudG9Mb3dlckNhc2UoKSxcclxuICAgIFxyXG4gICAgICAgICAgICAvLyDlj6rpkojlr7kgYmFpZHUg5YaF6YOo5Lqn5ZOB55So5oi35YGa57uf6K6h5Yqf6IO944CCXHJcbiAgICAgICAgICAgIGVuYWJsZSA9IHByb2R1Y3QgJiYgL2JhaWR1L2kuZXhlYyhwcm9kdWN0KSxcclxuICAgICAgICAgICAgYmFzZTtcclxuICAgIFxyXG4gICAgICAgIGlmICghZW5hYmxlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBiYXNlID0ge1xyXG4gICAgICAgICAgICBkdjogMyxcclxuICAgICAgICAgICAgbWFzdGVyOiAnd2VidXBsb2FkZXInLFxyXG4gICAgICAgICAgICBvbmxpbmU6IC90ZXN0Ly5leGVjKHByb2R1Y3QpID8gMCA6IDEsXHJcbiAgICAgICAgICAgIG1vZHVsZTogJycsXHJcbiAgICAgICAgICAgIHByb2R1Y3Q6IHByb2R1Y3QsXHJcbiAgICAgICAgICAgIHR5cGU6IDBcclxuICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gc2VuZChkYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciBvYmogPSAkLmV4dGVuZCh7fSwgYmFzZSwgZGF0YSksXHJcbiAgICAgICAgICAgICAgICB1cmwgPSBsb2dVcmwucmVwbGFjZSgvXiguKilcXD8vLCAnJDEnICsgJC5wYXJhbSggb2JqICkpLFxyXG4gICAgICAgICAgICAgICAgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgIFxyXG4gICAgICAgICAgICBpbWFnZS5zcmMgPSB1cmw7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIFVwbG9hZGVyLnJlZ2lzdGVyKHtcclxuICAgICAgICAgICAgbmFtZTogJ2xvZycsXHJcbiAgICBcclxuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3duZXIgPSB0aGlzLm93bmVyLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50ID0gMCxcclxuICAgICAgICAgICAgICAgICAgICBzaXplID0gMDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgb3duZXJcclxuICAgICAgICAgICAgICAgICAgICAub24oJ2Vycm9yJywgZnVuY3Rpb24oY29kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IDIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjX2Vycm9yX2NvZGU6IGNvZGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAub24oJ3VwbG9hZEVycm9yJywgZnVuY3Rpb24oZmlsZSwgcmVhc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNfZXJyb3JfY29kZTogJ1VQTE9BRF9FUlJPUicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjX3JlYXNvbjogJycgKyByZWFzb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAub24oJ3VwbG9hZENvbXBsZXRlJywgZnVuY3Rpb24oZmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplICs9IGZpbGUuc2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICB9KS5cclxuICAgICAgICAgICAgICAgICAgICBvbigndXBsb2FkRmluaXNoZWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VuZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjX2NvdW50OiBjb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNfc2l6ZTogc2l6ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY291bnQgPSBzaXplID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgc2VuZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgY191c2FnZTogMVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZmlsZU92ZXJ2aWV3IFVwbG9hZGVy5LiK5Lyg57G7XHJcbiAgICAgKi9cclxuICAgIGRlZmluZSgnd2VidXBsb2FkZXInLFtcclxuICAgICAgICAncHJlc2V0L2FsbCcsXHJcbiAgICAgICAgJ3dpZGdldHMvbG9nJ1xyXG4gICAgXSwgZnVuY3Rpb24oIHByZXNldCApIHtcclxuICAgICAgICByZXR1cm4gcHJlc2V0O1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcmVxdWlyZSgnd2VidXBsb2FkZXInKTtcclxufSk7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvdXBsb2FkL3dlYnVwbG9hZGVyLmpzXG4vLyBtb2R1bGUgaWQgPSA0OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 49 */
/***/ function(module, exports) {

	eval("module.exports = window.$;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJ3aW5kb3cuJFwiP2Y4ZDIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiNDkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHdpbmRvdy4kO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwid2luZG93LiRcIlxuLy8gbW9kdWxlIGlkID0gNDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ }
/******/ ]);